(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{11:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return makeStub})),__webpack_require__.d(__webpack_exports__,"b",(function(){return services}));var makeStub=function(service,methods){return methods.reduce((function(acc,key){return acc[key]=(fnname=service+"."+key+"()",function(){throw new Error("No implementation for "+fnname+". The framework specific code did not implement this method.")}),acc;var fnname}),{})},services={$q:void 0,$injector:void 0}},2:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"root",(function(){return common.M})),__webpack_require__.d(__webpack_exports__,"fromJson",(function(){return common.x})),__webpack_require__.d(__webpack_exports__,"toJson",(function(){return common.Q})),__webpack_require__.d(__webpack_exports__,"forEach",(function(){return common.w})),__webpack_require__.d(__webpack_exports__,"extend",(function(){return common.r})),__webpack_require__.d(__webpack_exports__,"equals",(function(){return common.q})),__webpack_require__.d(__webpack_exports__,"identity",(function(){return common.y})),__webpack_require__.d(__webpack_exports__,"noop",(function(){return common.E})),__webpack_require__.d(__webpack_exports__,"createProxyFunctions",(function(){return common.n})),__webpack_require__.d(__webpack_exports__,"inherit",(function(){return common.A})),__webpack_require__.d(__webpack_exports__,"inArray",(function(){return common.z})),__webpack_require__.d(__webpack_exports__,"_inArray",(function(){return common.b})),__webpack_require__.d(__webpack_exports__,"removeFrom",(function(){return common.L})),__webpack_require__.d(__webpack_exports__,"_removeFrom",(function(){return common.d})),__webpack_require__.d(__webpack_exports__,"pushTo",(function(){return common.K})),__webpack_require__.d(__webpack_exports__,"_pushTo",(function(){return common.c})),__webpack_require__.d(__webpack_exports__,"deregAll",(function(){return common.p})),__webpack_require__.d(__webpack_exports__,"defaults",(function(){return common.o})),__webpack_require__.d(__webpack_exports__,"mergeR",(function(){return common.D})),__webpack_require__.d(__webpack_exports__,"ancestors",(function(){return common.f})),__webpack_require__.d(__webpack_exports__,"pick",(function(){return common.H})),__webpack_require__.d(__webpack_exports__,"omit",(function(){return common.F})),__webpack_require__.d(__webpack_exports__,"pluck",(function(){return common.I})),__webpack_require__.d(__webpack_exports__,"filter",(function(){return common.s})),__webpack_require__.d(__webpack_exports__,"find",(function(){return common.t})),__webpack_require__.d(__webpack_exports__,"mapObj",(function(){return common.C})),__webpack_require__.d(__webpack_exports__,"map",(function(){return common.B})),__webpack_require__.d(__webpack_exports__,"values",(function(){return common.U})),__webpack_require__.d(__webpack_exports__,"allTrueR",(function(){return common.e})),__webpack_require__.d(__webpack_exports__,"anyTrueR",(function(){return common.g})),__webpack_require__.d(__webpack_exports__,"unnestR",(function(){return common.T})),__webpack_require__.d(__webpack_exports__,"flattenR",(function(){return common.v})),__webpack_require__.d(__webpack_exports__,"pushR",(function(){return common.J})),__webpack_require__.d(__webpack_exports__,"uniqR",(function(){return common.R})),__webpack_require__.d(__webpack_exports__,"unnest",(function(){return common.S})),__webpack_require__.d(__webpack_exports__,"flatten",(function(){return common.u})),__webpack_require__.d(__webpack_exports__,"assertPredicate",(function(){return common.l})),__webpack_require__.d(__webpack_exports__,"assertMap",(function(){return common.k})),__webpack_require__.d(__webpack_exports__,"assertFn",(function(){return common.j})),__webpack_require__.d(__webpack_exports__,"pairs",(function(){return common.G})),__webpack_require__.d(__webpack_exports__,"arrayTuples",(function(){return common.i})),__webpack_require__.d(__webpack_exports__,"applyPairs",(function(){return common.h})),__webpack_require__.d(__webpack_exports__,"tail",(function(){return common.P})),__webpack_require__.d(__webpack_exports__,"copy",(function(){return common.m})),__webpack_require__.d(__webpack_exports__,"_extend",(function(){return common.a})),__webpack_require__.d(__webpack_exports__,"silenceUncaughtInPromise",(function(){return common.N})),__webpack_require__.d(__webpack_exports__,"silentRejection",(function(){return common.O})),__webpack_require__.d(__webpack_exports__,"makeStub",(function(){return coreservices.a})),__webpack_require__.d(__webpack_exports__,"services",(function(){return coreservices.b})),__webpack_require__.d(__webpack_exports__,"Glob",(function(){return Glob})),__webpack_require__.d(__webpack_exports__,"curry",(function(){return hof.e})),__webpack_require__.d(__webpack_exports__,"compose",(function(){return hof.d})),__webpack_require__.d(__webpack_exports__,"pipe",(function(){return hof.m})),__webpack_require__.d(__webpack_exports__,"prop",(function(){return hof.n})),__webpack_require__.d(__webpack_exports__,"propEq",(function(){return hof.o})),__webpack_require__.d(__webpack_exports__,"parse",(function(){return hof.k})),__webpack_require__.d(__webpack_exports__,"not",(function(){return hof.i})),__webpack_require__.d(__webpack_exports__,"and",(function(){return hof.b})),__webpack_require__.d(__webpack_exports__,"or",(function(){return hof.j})),__webpack_require__.d(__webpack_exports__,"all",(function(){return hof.a})),__webpack_require__.d(__webpack_exports__,"any",(function(){return hof.c})),__webpack_require__.d(__webpack_exports__,"is",(function(){return hof.h})),__webpack_require__.d(__webpack_exports__,"eq",(function(){return hof.f})),__webpack_require__.d(__webpack_exports__,"val",(function(){return hof.p})),__webpack_require__.d(__webpack_exports__,"invoke",(function(){return hof.g})),__webpack_require__.d(__webpack_exports__,"pattern",(function(){return hof.l})),__webpack_require__.d(__webpack_exports__,"isUndefined",(function(){return predicates.m})),__webpack_require__.d(__webpack_exports__,"isDefined",(function(){return predicates.c})),__webpack_require__.d(__webpack_exports__,"isNull",(function(){return predicates.f})),__webpack_require__.d(__webpack_exports__,"isNullOrUndefined",(function(){return predicates.g})),__webpack_require__.d(__webpack_exports__,"isFunction",(function(){return predicates.d})),__webpack_require__.d(__webpack_exports__,"isNumber",(function(){return predicates.h})),__webpack_require__.d(__webpack_exports__,"isString",(function(){return predicates.l})),__webpack_require__.d(__webpack_exports__,"isObject",(function(){return predicates.i})),__webpack_require__.d(__webpack_exports__,"isArray",(function(){return predicates.a})),__webpack_require__.d(__webpack_exports__,"isDate",(function(){return predicates.b})),__webpack_require__.d(__webpack_exports__,"isRegExp",(function(){return predicates.k})),__webpack_require__.d(__webpack_exports__,"isInjectable",(function(){return predicates.e})),__webpack_require__.d(__webpack_exports__,"isPromise",(function(){return predicates.j})),__webpack_require__.d(__webpack_exports__,"Queue",(function(){return queue_Queue})),__webpack_require__.d(__webpack_exports__,"maxLength",(function(){return maxLength})),__webpack_require__.d(__webpack_exports__,"padString",(function(){return padString})),__webpack_require__.d(__webpack_exports__,"kebobString",(function(){return kebobString})),__webpack_require__.d(__webpack_exports__,"functionToString",(function(){return functionToString})),__webpack_require__.d(__webpack_exports__,"fnToString",(function(){return fnToString})),__webpack_require__.d(__webpack_exports__,"stringify",(function(){return stringify})),__webpack_require__.d(__webpack_exports__,"beforeAfterSubstr",(function(){return beforeAfterSubstr})),__webpack_require__.d(__webpack_exports__,"hostRegex",(function(){return hostRegex})),__webpack_require__.d(__webpack_exports__,"stripLastPathElement",(function(){return stripLastPathElement})),__webpack_require__.d(__webpack_exports__,"splitHash",(function(){return splitHash})),__webpack_require__.d(__webpack_exports__,"splitQuery",(function(){return splitQuery})),__webpack_require__.d(__webpack_exports__,"splitEqual",(function(){return splitEqual})),__webpack_require__.d(__webpack_exports__,"trimHashVal",(function(){return trimHashVal})),__webpack_require__.d(__webpack_exports__,"splitOnDelim",(function(){return splitOnDelim})),__webpack_require__.d(__webpack_exports__,"joinNeighborsR",(function(){return joinNeighborsR})),__webpack_require__.d(__webpack_exports__,"Category",(function(){return Category})),__webpack_require__.d(__webpack_exports__,"Trace",(function(){return trace_Trace})),__webpack_require__.d(__webpack_exports__,"trace",(function(){return trace})),__webpack_require__.d(__webpack_exports__,"DefType",(function(){return DefType})),__webpack_require__.d(__webpack_exports__,"Param",(function(){return param_Param})),__webpack_require__.d(__webpack_exports__,"ParamTypes",(function(){return paramTypes_ParamTypes})),__webpack_require__.d(__webpack_exports__,"StateParams",(function(){return stateParams_StateParams})),__webpack_require__.d(__webpack_exports__,"ParamType",(function(){return paramType_ParamType})),__webpack_require__.d(__webpack_exports__,"PathNode",(function(){return pathNode_PathNode})),__webpack_require__.d(__webpack_exports__,"PathUtils",(function(){return pathUtils_PathUtils})),__webpack_require__.d(__webpack_exports__,"resolvePolicies",(function(){return resolvePolicies})),__webpack_require__.d(__webpack_exports__,"defaultResolvePolicy",(function(){return defaultResolvePolicy})),__webpack_require__.d(__webpack_exports__,"Resolvable",(function(){return resolvable_Resolvable})),__webpack_require__.d(__webpack_exports__,"NATIVE_INJECTOR_TOKEN",(function(){return NATIVE_INJECTOR_TOKEN})),__webpack_require__.d(__webpack_exports__,"ResolveContext",(function(){return resolveContext_ResolveContext})),__webpack_require__.d(__webpack_exports__,"resolvablesBuilder",(function(){return resolvablesBuilder})),__webpack_require__.d(__webpack_exports__,"StateBuilder",(function(){return stateBuilder_StateBuilder})),__webpack_require__.d(__webpack_exports__,"StateObject",(function(){return stateObject_StateObject})),__webpack_require__.d(__webpack_exports__,"StateMatcher",(function(){return stateMatcher_StateMatcher})),__webpack_require__.d(__webpack_exports__,"StateQueueManager",(function(){return stateQueueManager_StateQueueManager})),__webpack_require__.d(__webpack_exports__,"StateRegistry",(function(){return stateRegistry_StateRegistry})),__webpack_require__.d(__webpack_exports__,"StateService",(function(){return stateService_StateService})),__webpack_require__.d(__webpack_exports__,"TargetState",(function(){return targetState_TargetState})),__webpack_require__.d(__webpack_exports__,"TransitionHookPhase",(function(){return TransitionHookPhase})),__webpack_require__.d(__webpack_exports__,"TransitionHookScope",(function(){return TransitionHookScope})),__webpack_require__.d(__webpack_exports__,"HookBuilder",(function(){return hookBuilder_HookBuilder})),__webpack_require__.d(__webpack_exports__,"matchState",(function(){return matchState})),__webpack_require__.d(__webpack_exports__,"RegisteredHook",(function(){return hookRegistry_RegisteredHook})),__webpack_require__.d(__webpack_exports__,"makeEvent",(function(){return makeEvent})),__webpack_require__.d(__webpack_exports__,"RejectType",(function(){return RejectType})),__webpack_require__.d(__webpack_exports__,"Rejection",(function(){return rejectFactory_Rejection})),__webpack_require__.d(__webpack_exports__,"Transition",(function(){return transition_Transition})),__webpack_require__.d(__webpack_exports__,"TransitionHook",(function(){return transitionHook_TransitionHook})),__webpack_require__.d(__webpack_exports__,"TransitionEventType",(function(){return transitionEventType_TransitionEventType})),__webpack_require__.d(__webpack_exports__,"defaultTransOpts",(function(){return defaultTransOpts})),__webpack_require__.d(__webpack_exports__,"TransitionService",(function(){return transitionService_TransitionService})),__webpack_require__.d(__webpack_exports__,"UrlMatcher",(function(){return urlMatcher_UrlMatcher})),__webpack_require__.d(__webpack_exports__,"ParamFactory",(function(){return urlMatcherFactory_ParamFactory})),__webpack_require__.d(__webpack_exports__,"UrlMatcherFactory",(function(){return urlMatcherFactory_UrlMatcherFactory})),__webpack_require__.d(__webpack_exports__,"UrlRouter",(function(){return urlRouter_UrlRouter})),__webpack_require__.d(__webpack_exports__,"UrlRuleFactory",(function(){return urlRule_UrlRuleFactory})),__webpack_require__.d(__webpack_exports__,"BaseUrlRule",(function(){return urlRule_BaseUrlRule})),__webpack_require__.d(__webpack_exports__,"UrlService",(function(){return urlService_UrlService})),__webpack_require__.d(__webpack_exports__,"UrlRules",(function(){return urlRules_UrlRules})),__webpack_require__.d(__webpack_exports__,"UrlConfig",(function(){return urlConfig_UrlConfig})),__webpack_require__.d(__webpack_exports__,"ViewService",(function(){return view_ViewService})),__webpack_require__.d(__webpack_exports__,"UIRouterGlobals",(function(){return globals_UIRouterGlobals})),__webpack_require__.d(__webpack_exports__,"UIRouter",(function(){return router_UIRouter})),__webpack_require__.d(__webpack_exports__,"$q",(function(){return q_$q})),__webpack_require__.d(__webpack_exports__,"$injector",(function(){return injector_$injector})),__webpack_require__.d(__webpack_exports__,"BaseLocationServices",(function(){return baseLocationService_BaseLocationServices})),__webpack_require__.d(__webpack_exports__,"HashLocationService",(function(){return hashLocationService_HashLocationService})),__webpack_require__.d(__webpack_exports__,"MemoryLocationService",(function(){return MemoryLocationService})),__webpack_require__.d(__webpack_exports__,"PushStateLocationService",(function(){return pushStateLocationService_PushStateLocationService})),__webpack_require__.d(__webpack_exports__,"MemoryLocationConfig",(function(){return memoryLocationConfig_MemoryLocationConfig})),__webpack_require__.d(__webpack_exports__,"BrowserLocationConfig",(function(){return browserLocationConfig_BrowserLocationConfig})),__webpack_require__.d(__webpack_exports__,"keyValsToObjectR",(function(){return keyValsToObjectR})),__webpack_require__.d(__webpack_exports__,"getParams",(function(){return getParams})),__webpack_require__.d(__webpack_exports__,"parseUrl",(function(){return utils_parseUrl})),__webpack_require__.d(__webpack_exports__,"buildUrl",(function(){return buildUrl})),__webpack_require__.d(__webpack_exports__,"locationPluginFactory",(function(){return locationPluginFactory})),__webpack_require__.d(__webpack_exports__,"servicesPlugin",(function(){return servicesPlugin})),__webpack_require__.d(__webpack_exports__,"hashLocationPlugin",(function(){return hashLocationPlugin})),__webpack_require__.d(__webpack_exports__,"pushStateLocationPlugin",(function(){return pushStateLocationPlugin})),__webpack_require__.d(__webpack_exports__,"memoryLocationPlugin",(function(){return memoryLocationPlugin})),__webpack_require__.d(__webpack_exports__,"UIRouterPluginBase",(function(){return UIRouterPluginBase}));var RejectType,common=__webpack_require__(3),coreservices=__webpack_require__(11),Glob=function(){function Glob(text){this.text=text,this.glob=text.split(".");var regexpString=this.text.split(".").map((function(seg){return"**"===seg?"(?:|(?:\\.[^.]*)*)":"*"===seg?"\\.[^.]*":"\\."+seg})).join("");this.regexp=new RegExp("^"+regexpString+"$")}return Glob.is=function(text){return!!/[!,*]+/.exec(text)},Glob.fromString=function(text){return Glob.is(text)?new Glob(text):null},Glob.prototype.matches=function(name){return this.regexp.test("."+name)},Glob}(),hof=__webpack_require__(6),predicates=__webpack_require__(4),queue_Queue=function(){function Queue(_items,_limit){void 0===_items&&(_items=[]),void 0===_limit&&(_limit=null),this._items=_items,this._limit=_limit,this._evictListeners=[],this.onEvict=Object(common.K)(this._evictListeners)}return Queue.prototype.enqueue=function(item){var items=this._items;return items.push(item),this._limit&&items.length>this._limit&&this.evict(),item},Queue.prototype.evict=function(){var item=this._items.shift();return this._evictListeners.forEach((function(fn){return fn(item)})),item},Queue.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},Queue.prototype.clear=function(){var current=this._items;return this._items=[],current},Queue.prototype.size=function(){return this._items.length},Queue.prototype.remove=function(item){var idx=this._items.indexOf(item);return idx>-1&&this._items.splice(idx,1)[0]},Queue.prototype.peekTail=function(){return this._items[this._items.length-1]},Queue.prototype.peekHead=function(){if(this.size())return this._items[0]},Queue}();!function(RejectType){RejectType[RejectType.SUPERSEDED=2]="SUPERSEDED",RejectType[RejectType.ABORTED=3]="ABORTED",RejectType[RejectType.INVALID=4]="INVALID",RejectType[RejectType.IGNORED=5]="IGNORED",RejectType[RejectType.ERROR=6]="ERROR"}(RejectType||(RejectType={}));var rejectFactory_id=0,rejectFactory_Rejection=function(){function Rejection(type,message,detail){this.$id=rejectFactory_id++,this.type=type,this.message=message,this.detail=detail}return Rejection.isRejectionPromise=function(obj){return obj&&"function"==typeof obj.then&&Object(hof.h)(Rejection)(obj._transitionRejection)},Rejection.superseded=function(detail,options){var rejection=new Rejection(RejectType.SUPERSEDED,"The transition has been superseded by a different transition",detail);return options&&options.redirected&&(rejection.redirected=!0),rejection},Rejection.redirected=function(detail){return Rejection.superseded(detail,{redirected:!0})},Rejection.invalid=function(detail){return new Rejection(RejectType.INVALID,"This transition is invalid",detail)},Rejection.ignored=function(detail){return new Rejection(RejectType.IGNORED,"The transition was ignored",detail)},Rejection.aborted=function(detail){return new Rejection(RejectType.ABORTED,"The transition has been aborted",detail)},Rejection.errored=function(detail){return new Rejection(RejectType.ERROR,"The transition errored",detail)},Rejection.normalize=function(detail){return Object(hof.h)(Rejection)(detail)?detail:Rejection.errored(detail)},Rejection.prototype.toString=function(){var d,detail=(d=this.detail)&&d.toString!==Object.prototype.toString?d.toString():stringify(d);return"Transition Rejection($id: "+this.$id+" type: "+this.type+", message: "+this.message+", detail: "+detail+")"},Rejection.prototype.toPromise=function(){return Object(common.r)(Object(common.O)(this),{_transitionRejection:this})},Rejection}();function maxLength(max,str){return str.length<=max?str:str.substr(0,max-3)+"..."}function padString(length,str){for(;str.length<length;)str+=" ";return str}function kebobString(camelCase){return camelCase.replace(/^([A-Z])/,(function($1){return $1.toLowerCase()})).replace(/([A-Z])/g,(function($1){return"-"+$1.toLowerCase()}))}function functionToString(fn){var fnStr=fnToString(fn),namedFunctionMatch=fnStr.match(/^(function [^ ]+\([^)]*\))/),toStr=namedFunctionMatch?namedFunctionMatch[1]:fnStr,fnName=fn.name||"";return fnName&&toStr.match(/function \(/)?"function "+fnName+toStr.substr(9):toStr}function fnToString(fn){var _fn=Object(predicates.a)(fn)?fn.slice(-1)[0]:fn;return _fn&&_fn.toString()||"undefined"}var isRejection=rejectFactory_Rejection.isRejectionPromise,stringifyPattern=Object(hof.l)([[predicates.m,Object(hof.p)("undefined")],[predicates.f,Object(hof.p)("null")],[predicates.j,Object(hof.p)("[Promise]")],[isRejection,function(x){return x._transitionRejection.toString()}],[function(obj){return Object(predicates.i)(obj)&&!Object(predicates.a)(obj)&&obj.constructor!==Object&&Object(predicates.d)(obj.toString)},function(x){return x.toString()}],[predicates.e,functionToString],[Object(hof.p)(!0),common.y]]);function stringify(o){var seen=[];function format(value){if(Object(predicates.i)(value)){if(-1!==seen.indexOf(value))return"[circular ref]";seen.push(value)}return stringifyPattern(value)}return Object(predicates.m)(o)?format(o):JSON.stringify(o,(function(key,value){return format(value)})).replace(/\\"/g,'"')}var beforeAfterSubstr=function(char){return function(str){if(!str)return["",""];var idx=str.indexOf(char);return-1===idx?[str,""]:[str.substr(0,idx),str.substr(idx+1)]}},hostRegex=new RegExp("^(?:[a-z]+:)?//[^/]+/"),stripLastPathElement=function(str){return str.replace(/\/[^/]*$/,"")},splitHash=beforeAfterSubstr("#"),splitQuery=beforeAfterSubstr("?"),splitEqual=beforeAfterSubstr("="),trimHashVal=function(str){return str?str.replace(/^#/,""):""};function splitOnDelim(delim){var re=new RegExp("("+delim+")","g");return function(str){return str.split(re).filter(common.y)}}function joinNeighborsR(acc,x){return Object(predicates.l)(Object(common.P)(acc))&&Object(predicates.l)(x)?acc.slice(0,-1).concat(Object(common.P)(acc)+x):Object(common.J)(acc,x)}var noopConsoleStub={log:common.E,error:common.E,table:common.E};var safeConsole=function getSafeConsole(){return"undefined"!=typeof document&&document.documentMode&&9===document.documentMode?window&&window.console?function ie9Console(console){var bound=function(fn){return Function.prototype.bind.call(fn,console)};return{log:bound(console.log),error:bound(console.log),table:bound(console.log)}}(window.console):noopConsoleStub:console.table&&console.error?console:function fallbackConsole(console){var log=console.log.bind(console);return{log:log,error:console.error?console.error.bind(console):log,table:console.table?console.table.bind(console):log}}(console)}();function uiViewString(uiview){if(!uiview)return"ui-view (defunct)";var state=uiview.creationContext?uiview.creationContext.name||"(root)":"(none)";return"[ui-view#"+uiview.id+" "+uiview.$type+":"+uiview.fqn+" ("+uiview.name+"@"+state+")]"}var Category;function normalizedCat(input){return Object(predicates.h)(input)?Category[input]:Category[Category[input]]}!function(Category){Category[Category.RESOLVE=0]="RESOLVE",Category[Category.TRANSITION=1]="TRANSITION",Category[Category.HOOK=2]="HOOK",Category[Category.UIVIEW=3]="UIVIEW",Category[Category.VIEWCONFIG=4]="VIEWCONFIG"}(Category||(Category={}));var _tid=Object(hof.k)("$id"),_rid=Object(hof.k)("router.$id"),transLbl=function(trans){return"Transition #"+_tid(trans)+"-"+_rid(trans)},trace_Trace=function(){function Trace(){this._enabled={},this.approximateDigests=0}return Trace.prototype._set=function(enabled,categories){var _this=this;categories.length||(categories=Object.keys(Category).map((function(k){return parseInt(k,10)})).filter((function(k){return!isNaN(k)})).map((function(key){return Category[key]}))),categories.map(normalizedCat).forEach((function(category){return _this._enabled[category]=enabled}))},Trace.prototype.enable=function(){for(var categories=[],_i=0;_i<arguments.length;_i++)categories[_i]=arguments[_i];this._set(!0,categories)},Trace.prototype.disable=function(){for(var categories=[],_i=0;_i<arguments.length;_i++)categories[_i]=arguments[_i];this._set(!1,categories)},Trace.prototype.enabled=function(category){return!!this._enabled[normalizedCat(category)]},Trace.prototype.traceTransitionStart=function(trans){this.enabled(Category.TRANSITION)&&safeConsole.log(transLbl(trans)+": Started  -> "+stringify(trans))},Trace.prototype.traceTransitionIgnored=function(trans){this.enabled(Category.TRANSITION)&&safeConsole.log(transLbl(trans)+": Ignored  <> "+stringify(trans))},Trace.prototype.traceHookInvocation=function(step,trans,options){if(this.enabled(Category.HOOK)){var event=Object(hof.k)("traceData.hookType")(options)||"internal",context=Object(hof.k)("traceData.context.state.name")(options)||Object(hof.k)("traceData.context")(options)||"unknown",name=functionToString(step.registeredHook.callback);safeConsole.log(transLbl(trans)+":   Hook -> "+event+" context: "+context+", "+maxLength(200,name))}},Trace.prototype.traceHookResult=function(hookResult,trans,transitionOptions){this.enabled(Category.HOOK)&&safeConsole.log(transLbl(trans)+":   <- Hook returned: "+maxLength(200,stringify(hookResult)))},Trace.prototype.traceResolvePath=function(path,when,trans){this.enabled(Category.RESOLVE)&&safeConsole.log(transLbl(trans)+":         Resolving "+path+" ("+when+")")},Trace.prototype.traceResolvableResolved=function(resolvable,trans){this.enabled(Category.RESOLVE)&&safeConsole.log(transLbl(trans)+":               <- Resolved  "+resolvable+" to: "+maxLength(200,stringify(resolvable.data)))},Trace.prototype.traceError=function(reason,trans){this.enabled(Category.TRANSITION)&&safeConsole.log(transLbl(trans)+": <- Rejected "+stringify(trans)+", reason: "+reason)},Trace.prototype.traceSuccess=function(finalState,trans){this.enabled(Category.TRANSITION)&&safeConsole.log(transLbl(trans)+": <- Success  "+stringify(trans)+", final state: "+finalState.name)},Trace.prototype.traceUIViewEvent=function(event,viewData,extra){void 0===extra&&(extra=""),this.enabled(Category.UIVIEW)&&safeConsole.log("ui-view: "+padString(30,event)+" "+uiViewString(viewData)+extra)},Trace.prototype.traceUIViewConfigUpdated=function(viewData,context){this.enabled(Category.UIVIEW)&&this.traceUIViewEvent("Updating",viewData," with ViewConfig from context='"+context+"'")},Trace.prototype.traceUIViewFill=function(viewData,html){this.enabled(Category.UIVIEW)&&this.traceUIViewEvent("Fill",viewData," with: "+maxLength(200,html))},Trace.prototype.traceViewSync=function(pairs){if(this.enabled(Category.VIEWCONFIG)){var uivheader="uiview component fqn",mapping=pairs.map((function(_a){var _b,uiView=_a.uiView,viewConfig=_a.viewConfig,uiv=uiView&&uiView.fqn,cfg=viewConfig&&viewConfig.viewDecl.$context.name+": ("+viewConfig.viewDecl.$name+")";return(_b={})[uivheader]=uiv,_b["view config state (view name)"]=cfg,_b})).sort((function(a,b){return(a[uivheader]||"").localeCompare(b[uivheader]||"")}));safeConsole.table(mapping)}},Trace.prototype.traceViewServiceEvent=function(event,viewConfig){this.enabled(Category.VIEWCONFIG)&&safeConsole.log("VIEWCONFIG: "+event+" "+function(viewConfig){var view=viewConfig.viewDecl,state=view.$context.name||"(root)";return"[View#"+viewConfig.$id+" from '"+state+"' state]: target ui-view: '"+view.$uiViewName+"@"+view.$uiViewContextAnchor+"'"}(viewConfig))},Trace.prototype.traceViewServiceUIViewEvent=function(event,viewData){this.enabled(Category.VIEWCONFIG)&&safeConsole.log("VIEWCONFIG: "+event+" "+uiViewString(viewData))},Trace}(),trace=new trace_Trace,paramType_ParamType=function(){function ParamType(def){this.pattern=/.*/,this.inherit=!0,Object(common.r)(this,def)}return ParamType.prototype.is=function(val,key){return!0},ParamType.prototype.encode=function(val,key){return val},ParamType.prototype.decode=function(val,key){return val},ParamType.prototype.equals=function(a,b){return a==b},ParamType.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)},ParamType.prototype.toString=function(){return"{ParamType:"+this.name+"}"},ParamType.prototype.$normalize=function(val){return this.is(val)?val:this.decode(val)},ParamType.prototype.$asArray=function(mode,isSearch){if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)},ParamType}();function ArrayType(type,mode){var _this=this;function arrayWrap(val){return Object(predicates.a)(val)?val:Object(predicates.c)(val)?[val]:[]}function arrayHandler(callback,allTruthyMode){return function handleArray(val){if(Object(predicates.a)(val)&&0===val.length)return val;var arr=arrayWrap(val),result=Object(common.B)(arr,callback);return!0===allTruthyMode?0===Object(common.s)(result,(function(x){return!x})).length:function arrayUnwrap(val){switch(val.length){case 0:return;case 1:return"auto"===mode?val[0]:val;default:return val}}(result)}}function arrayEqualsHandler(callback){return function handleArray(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}}["encode","decode","equals","$normalize"].forEach((function(name){var paramTypeFn=type[name].bind(type),wrapperFn="equals"===name?arrayEqualsHandler:arrayHandler;_this[name]=wrapperFn(paramTypeFn)})),Object(common.r)(this,{dynamic:type.dynamic,name:type.name,pattern:type.pattern,inherit:type.inherit,raw:type.raw,is:arrayHandler(type.is.bind(type),!0),$arrayMode:mode})}var DefType,hasOwn=Object.prototype.hasOwnProperty;function getParamDeclaration(paramName,location,state){var noReloadOnSearch=!1===state.reloadOnSearch&&location===DefType.SEARCH||void 0,dynamic=Object(common.t)([state.dynamic,noReloadOnSearch],predicates.c),defaultConfig=Object(predicates.c)(dynamic)?{dynamic:dynamic}:{},paramConfig=function unwrapShorthand(cfg){function getStaticDefaultValue(){return cfg.value}cfg=function(cfg){return 0===["value","type","squash","array","dynamic"].filter(hasOwn.bind(cfg||{})).length}(cfg)?{value:cfg}:cfg,getStaticDefaultValue.__cacheable=!0;var $$fn=Object(predicates.e)(cfg.value)?cfg.value:getStaticDefaultValue;return Object(common.r)(cfg,{$$fn:$$fn})}(state&&state.params&&state.params[paramName]);return Object(common.r)(defaultConfig,paramConfig)}!function(DefType){DefType[DefType.PATH=0]="PATH",DefType[DefType.SEARCH=1]="SEARCH",DefType[DefType.CONFIG=2]="CONFIG"}(DefType||(DefType={}));var param_Param=function(){function Param(id,type,location,urlConfig,state){var config=getParamDeclaration(id,location,state);type=function getType(cfg,urlType,location,id,paramTypes){if(cfg.type&&urlType&&"string"!==urlType.name)throw new Error("Param '"+id+"' has two type configurations.");if(cfg.type&&urlType&&"string"===urlType.name&&paramTypes.type(cfg.type))return paramTypes.type(cfg.type);if(urlType)return urlType;if(!cfg.type){var type=location===DefType.CONFIG?"any":location===DefType.PATH?"path":location===DefType.SEARCH?"query":"string";return paramTypes.type(type)}return cfg.type instanceof paramType_ParamType?cfg.type:paramTypes.type(cfg.type)}(config,type,location,id,urlConfig.paramTypes);var arrayMode=function getArrayMode(){var arrayDefaults={array:location===DefType.SEARCH&&"auto"},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{};return Object(common.r)(arrayDefaults,arrayParamNomenclature,config).array}();type=arrayMode?type.$asArray(arrayMode,location===DefType.SEARCH):type;var isOptional=void 0!==config.value||location===DefType.SEARCH,dynamic=Object(predicates.c)(config.dynamic)?!!config.dynamic:!!type.dynamic,raw=Object(predicates.c)(config.raw)?!!config.raw:!!type.raw,squash=function getSquashPolicy(config,isOptional,defaultPolicy){var squash=config.squash;if(!isOptional||!1===squash)return!1;if(!Object(predicates.c)(squash)||null==squash)return defaultPolicy;if(!0===squash||Object(predicates.l)(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}(config,isOptional,urlConfig.defaultSquashPolicy()),replace=function getReplace(config,arrayMode,isOptional,squash){var defaultPolicy=[{from:"",to:isOptional||arrayMode?void 0:""},{from:null,to:isOptional||arrayMode?void 0:""}],replace=Object(predicates.a)(config.replace)?config.replace:[];Object(predicates.l)(squash)&&replace.push({from:squash,to:void 0});var configuredKeys=Object(common.B)(replace,Object(hof.n)("from"));return Object(common.s)(defaultPolicy,(function(item){return-1===configuredKeys.indexOf(item.from)})).concat(replace)}(config,arrayMode,isOptional,squash),inherit=Object(predicates.c)(config.inherit)?!!config.inherit:!!type.inherit;Object(common.r)(this,{id:id,type:type,location:location,isOptional:isOptional,dynamic:dynamic,raw:raw,squash:squash,replace:replace,inherit:inherit,array:arrayMode,config:config})}return Param.values=function(params,values){void 0===values&&(values={});for(var paramValues={},_i=0,params_1=params;_i<params_1.length;_i++){var param=params_1[_i];paramValues[param.id]=param.value(values[param.id])}return paramValues},Param.changed=function(params,values1,values2){return void 0===values1&&(values1={}),void 0===values2&&(values2={}),params.filter((function(param){return!param.type.equals(values1[param.id],values2[param.id])}))},Param.equals=function(params,values1,values2){return void 0===values1&&(values1={}),void 0===values2&&(values2={}),0===Param.changed(params,values1,values2).length},Param.validates=function(params,values){return void 0===values&&(values={}),params.map((function(param){return param.validates(values[param.id])})).reduce(common.e,!0)},Param.prototype.isDefaultValue=function(value){return this.isOptional&&this.type.equals(this.value(),value)},Param.prototype.value=function(value){var _this=this;return value=function(val){for(var _i=0,_a=_this.replace;_i<_a.length;_i++){var tuple=_a[_i];if(tuple.from===val)return tuple.to}return val}(value),Object(predicates.m)(value)?function(){if(_this._defaultValueCache)return _this._defaultValueCache.defaultValue;if(!coreservices.b.$injector)throw new Error("Injectable functions cannot be called at configuration time");var defaultValue=coreservices.b.$injector.invoke(_this.config.$$fn);if(null!=defaultValue&&!_this.type.is(defaultValue))throw new Error("Default value ("+defaultValue+") for parameter '"+_this.id+"' is not an instance of ParamType ("+_this.type.name+")");return _this.config.$$fn.__cacheable&&(_this._defaultValueCache={defaultValue:defaultValue}),defaultValue}():this.type.$normalize(value)},Param.prototype.isSearch=function(){return this.location===DefType.SEARCH},Param.prototype.validates=function(value){if((Object(predicates.m)(value)||null===value)&&this.isOptional)return!0;var normalized=this.type.$normalize(value);if(!this.type.is(normalized))return!1;var encoded=this.type.encode(normalized);return!(Object(predicates.l)(encoded)&&!this.type.pattern.exec(encoded))},Param.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},Param}(),paramTypes_ParamTypes=function(){function ParamTypes(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=Object(common.H)(ParamTypes.prototype,["hash","string","query","path","int","bool","date","json","any"]);this.types=Object(common.A)(Object(common.B)(this.defaultTypes,(function(definition,name){return new paramType_ParamType(Object(common.r)({name:name},definition))})),{})}return ParamTypes.prototype.dispose=function(){this.types={}},ParamTypes.prototype.type=function(name,definition,definitionFn){if(!Object(predicates.c)(definition))return this.types[name];if(this.types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return this.types[name]=new paramType_ParamType(Object(common.r)({name:name},definition)),definitionFn&&(this.typeQueue.push({name:name,def:definitionFn}),this.enqueue||this._flushTypeQueue()),this},ParamTypes.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var type=this.typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");Object(common.r)(this.types[type.name],coreservices.b.$injector.invoke(type.def))}},ParamTypes}();!function initDefaultTypes(){var makeDefaultType=function(def){var valToString=function(val){return null!=val?val.toString():val},defaultTypeBase={encode:valToString,decode:valToString,is:Object(hof.h)(String),pattern:/.*/,equals:function(a,b){return a==b}};return Object(common.r)({},defaultTypeBase,def)};Object(common.r)(paramTypes_ParamTypes.prototype,{string:makeDefaultType({}),path:makeDefaultType({pattern:/[^/]*/}),query:makeDefaultType({}),hash:makeDefaultType({inherit:!1}),int:makeDefaultType({decode:function(val){return parseInt(val,10)},is:function(val){return!Object(predicates.g)(val)&&this.decode(val.toString())===val},pattern:/-?\d+/}),bool:makeDefaultType({encode:function(val){return val?1:0},decode:function(val){return 0!==parseInt(val,10)},is:Object(hof.h)(Boolean),pattern:/0|1/}),date:makeDefaultType({encode:function(val){return this.is(val)?[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-"):void 0},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):void 0},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(l,r){return["getFullYear","getMonth","getDate"].reduce((function(acc,fn){return acc&&l[fn]()===r[fn]()}),!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:makeDefaultType({encode:common.Q,decode:common.x,is:Object(hof.h)(Object),equals:common.q,pattern:/[^/]*/}),any:makeDefaultType({encode:common.y,decode:common.y,is:function(){return!0},equals:common.q})})}();var stateParams_StateParams=function(){function StateParams(params){void 0===params&&(params={}),Object(common.r)(this,params)}return StateParams.prototype.$inherit=function(newParams,$current,$to){var parentParams,parents=Object(common.f)($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i]&&parents[i].params&&(parentParams=Object.keys(parents[i].params)).length)for(var j in parentParams)inheritList.indexOf(parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=this[parentParams[j]]);return Object(common.r)({},inherited,newParams)},StateParams}(),pathNode_PathNode=function(){function PathNode(stateOrNode){if(stateOrNode instanceof PathNode){var node=stateOrNode;this.state=node.state,this.paramSchema=node.paramSchema.slice(),this.paramValues=Object(common.r)({},node.paramValues),this.resolvables=node.resolvables.slice(),this.views=node.views&&node.views.slice()}else{var state=stateOrNode;this.state=state,this.paramSchema=state.parameters({inherit:!1}),this.paramValues={},this.resolvables=state.resolvables.map((function(res){return res.clone()}))}}return PathNode.prototype.clone=function(){return new PathNode(this)},PathNode.prototype.applyRawParams=function(params){return this.paramValues=this.paramSchema.reduce((function(memo,pDef){return Object(common.h)(memo,[(paramDef=pDef).id,paramDef.value(params[paramDef.id])]);var paramDef}),{}),this},PathNode.prototype.parameter=function(name){return Object(common.t)(this.paramSchema,Object(hof.o)("id",name))},PathNode.prototype.equals=function(node,paramsFn){var diff=this.diff(node,paramsFn);return diff&&0===diff.length},PathNode.prototype.diff=function(node,paramsFn){if(this.state!==node.state)return!1;var params=paramsFn?paramsFn(this):this.paramSchema;return param_Param.changed(params,this.paramValues,node.paramValues)},PathNode.clone=function(node){return node.clone()},PathNode}(),targetState_TargetState=function(){function TargetState(_stateRegistry,_identifier,_params,_options){this._stateRegistry=_stateRegistry,this._identifier=_identifier,this._identifier=_identifier,this._params=Object(common.r)({},_params||{}),this._options=Object(common.r)({},_options||{}),this._definition=_stateRegistry.matcher.find(_identifier,this._options.relative)}return TargetState.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},TargetState.prototype.identifier=function(){return this._identifier},TargetState.prototype.params=function(){return this._params},TargetState.prototype.$state=function(){return this._definition},TargetState.prototype.state=function(){return this._definition&&this._definition.self},TargetState.prototype.options=function(){return this._options},TargetState.prototype.exists=function(){return!(!this._definition||!this._definition.self)},TargetState.prototype.valid=function(){return!this.error()},TargetState.prototype.error=function(){var base=this.options().relative;if(!this._definition&&base){var stateName=base.name?base.name:base;return"Could not resolve '"+this.name()+"' from state '"+stateName+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},TargetState.prototype.toString=function(){return"'"+this.name()+"'"+stringify(this.params())},TargetState.prototype.withState=function(state){return new TargetState(this._stateRegistry,state,this._params,this._options)},TargetState.prototype.withParams=function(params,replace){void 0===replace&&(replace=!1);var newParams=replace?params:Object(common.r)({},this._params,params);return new TargetState(this._stateRegistry,this._identifier,newParams,this._options)},TargetState.prototype.withOptions=function(options,replace){void 0===replace&&(replace=!1);var newOpts=replace?options:Object(common.r)({},this._options,options);return new TargetState(this._stateRegistry,this._identifier,this._params,newOpts)},TargetState.isDef=function(obj){return obj&&obj.state&&(Object(predicates.l)(obj.state)||Object(predicates.i)(obj.state)&&Object(predicates.l)(obj.state.name))},TargetState}(),pathUtils_PathUtils=function(){function PathUtils(){}return PathUtils.makeTargetState=function(registry,path){var state=Object(common.P)(path).state;return new targetState_TargetState(registry,state,path.map(Object(hof.n)("paramValues")).reduce(common.D,{}),{})},PathUtils.buildPath=function(targetState){var toParams=targetState.params();return targetState.$state().path.map((function(state){return new pathNode_PathNode(state).applyRawParams(toParams)}))},PathUtils.buildToPath=function(fromPath,targetState){var toPath=PathUtils.buildPath(targetState);return targetState.options().inherit?PathUtils.inheritParams(fromPath,toPath,Object.keys(targetState.params())):toPath},PathUtils.applyViewConfigs=function($view,path,states){path.filter((function(node){return Object(common.z)(states,node.state)})).forEach((function(node){var viewDecls=Object(common.U)(node.state.views||{}),subPath=PathUtils.subPath(path,(function(n){return n===node})),viewConfigs=viewDecls.map((function(view){return $view.createViewConfig(subPath,view)}));node.views=viewConfigs.reduce(common.T,[])}))},PathUtils.inheritParams=function(fromPath,toPath,toKeys){void 0===toKeys&&(toKeys=[]);var noInherit=fromPath.map((function(node){return node.paramSchema})).reduce(common.T,[]).filter((function(param){return!param.inherit})).map(Object(hof.n)("id"));return toPath.map((function makeInheritedParamsNode(toNode){var toParamVals=Object(common.r)({},toNode&&toNode.paramValues),incomingParamVals=Object(common.H)(toParamVals,toKeys);toParamVals=Object(common.F)(toParamVals,toKeys);var fromParamVals=Object(common.F)(function nodeParamVals(path,state){var node=Object(common.t)(path,Object(hof.o)("state",state));return Object(common.r)({},node&&node.paramValues)}(fromPath,toNode.state)||{},noInherit),ownParamVals=Object(common.r)(toParamVals,fromParamVals,incomingParamVals);return new pathNode_PathNode(toNode.state).applyRawParams(ownParamVals)}))},PathUtils.treeChanges=function(fromPath,toPath,reloadState){for(var node1,node2,from,retained,exiting,entering,max=Math.min(fromPath.length,toPath.length),keep=0;keep<max&&fromPath[keep].state!==reloadState&&(node1=fromPath[keep],node2=toPath[keep],node1.equals(node2,PathUtils.nonDynamicParams));)keep++;retained=(from=fromPath).slice(0,keep),exiting=from.slice(keep);var retainedWithToParams=retained.map((function applyToParams(retainedNode,idx){var cloned=retainedNode.clone();return cloned.paramValues=toPath[idx].paramValues,cloned}));return entering=toPath.slice(keep),{from:from,to:retainedWithToParams.concat(entering),retained:retained,retainedWithToParams:retainedWithToParams,exiting:exiting,entering:entering}},PathUtils.matching=function(pathA,pathB,paramsFn){var done=!1;return Object(common.i)(pathA,pathB).reduce((function(matching,_a){var nodeA=_a[0],nodeB=_a[1];return(done=done||!nodeA.equals(nodeB,paramsFn))?matching:matching.concat(nodeA)}),[])},PathUtils.equals=function(pathA,pathB,paramsFn){return pathA.length===pathB.length&&PathUtils.matching(pathA,pathB,paramsFn).length===pathA.length},PathUtils.subPath=function(path,predicate){var node=Object(common.t)(path,predicate),elementIdx=path.indexOf(node);return-1===elementIdx?void 0:path.slice(0,elementIdx+1)},PathUtils.nonDynamicParams=function(node){return node.state.parameters({inherit:!1}).filter((function(param){return!param.dynamic}))},PathUtils.paramValues=function(path){return path.reduce((function(acc,node){return Object(common.r)(acc,node.paramValues)}),{})},PathUtils}(),resolvePolicies={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT"}},defaultResolvePolicy={when:"LAZY",async:"WAIT"},resolvable_Resolvable=function(){function Resolvable(arg1,resolveFn,deps,policy,data){if(this.resolved=!1,this.promise=void 0,arg1 instanceof Resolvable)Object(common.r)(this,arg1);else if(Object(predicates.d)(resolveFn)){if(Object(predicates.g)(arg1))throw new Error("new Resolvable(): token argument is required");if(!Object(predicates.d)(resolveFn))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=arg1,this.policy=policy,this.resolveFn=resolveFn,this.deps=deps||[],this.data=data,this.resolved=void 0!==data,this.promise=this.resolved?coreservices.b.$q.when(this.data):void 0}else if(Object(predicates.i)(arg1)&&arg1.token&&(arg1.hasOwnProperty("resolveFn")||arg1.hasOwnProperty("data"))){var literal=arg1;return new Resolvable(literal.token,literal.resolveFn,literal.deps,literal.policy,literal.data)}}return Resolvable.prototype.getPolicy=function(state){var thisPolicy=this.policy||{},statePolicy=state&&state.resolvePolicy||{};return{when:thisPolicy.when||statePolicy.when||defaultResolvePolicy.when,async:thisPolicy.async||statePolicy.async||defaultResolvePolicy.async}},Resolvable.prototype.resolve=function(resolveContext,trans){var _this=this,$q=coreservices.b.$q,node=resolveContext.findNode(this),state=node&&node.state,asyncPolicy=this.getPolicy(state).async,customAsyncPolicy=Object(predicates.d)(asyncPolicy)?asyncPolicy:common.y;return this.promise=$q.when().then((function(){return $q.all(resolveContext.getDependencies(_this).map((function(resolvable){return resolvable.get(resolveContext,trans)})))})).then((function(resolvedDeps){return _this.resolveFn.apply(null,resolvedDeps)})).then(customAsyncPolicy).then((function(resolvedValue){return _this.data=resolvedValue,_this.resolved=!0,_this.resolveFn=null,trace.traceResolvableResolved(_this,trans),_this.data}))},Resolvable.prototype.get=function(resolveContext,trans){return this.promise||this.resolve(resolveContext,trans)},Resolvable.prototype.toString=function(){return"Resolvable(token: "+stringify(this.token)+", requires: ["+this.deps.map(stringify)+"])"},Resolvable.prototype.clone=function(){return new Resolvable(this)},Resolvable.fromData=function(token,data){return new Resolvable(token,(function(){return data}),null,null,data)},Resolvable}(),whens=resolvePolicies.when,ALL_WHENS=[whens.EAGER,whens.LAZY],EAGER_WHENS=[whens.EAGER],NATIVE_INJECTOR_TOKEN="Native Injector",resolveContext_ResolveContext=function(){function ResolveContext(_path){this._path=_path}return ResolveContext.prototype.getTokens=function(){return this._path.reduce((function(acc,node){return acc.concat(node.resolvables.map((function(r){return r.token})))}),[]).reduce(common.R,[])},ResolveContext.prototype.getResolvable=function(token){var matching=this._path.map((function(node){return node.resolvables})).reduce(common.T,[]).filter((function(r){return r.token===token}));return Object(common.P)(matching)},ResolveContext.prototype.getPolicy=function(resolvable){var node=this.findNode(resolvable);return resolvable.getPolicy(node.state)},ResolveContext.prototype.subContext=function(state){return new ResolveContext(pathUtils_PathUtils.subPath(this._path,(function(node){return node.state===state})))},ResolveContext.prototype.addResolvables=function(newResolvables,state){var node=Object(common.t)(this._path,Object(hof.o)("state",state)),keys=newResolvables.map((function(r){return r.token}));node.resolvables=node.resolvables.filter((function(r){return-1===keys.indexOf(r.token)})).concat(newResolvables)},ResolveContext.prototype.resolvePath=function(when,trans){var _this=this;void 0===when&&(when="LAZY");var matchedWhens=(Object(common.z)(ALL_WHENS,when)?when:"LAZY")===resolvePolicies.when.EAGER?EAGER_WHENS:ALL_WHENS;trace.traceResolvePath(this._path,when,trans);var matchesPolicy=function(acceptedVals,whenOrAsync){return function(resolvable){return Object(common.z)(acceptedVals,_this.getPolicy(resolvable)[whenOrAsync])}},promises=this._path.reduce((function(acc,node){var nodeResolvables=node.resolvables.filter(matchesPolicy(matchedWhens,"when")),nowait=nodeResolvables.filter(matchesPolicy(["NOWAIT"],"async")),wait=nodeResolvables.filter(Object(hof.i)(matchesPolicy(["NOWAIT"],"async"))),subContext=_this.subContext(node.state),getResult=function(r){return r.get(subContext,trans).then((function(value){return{token:r.token,value:value}}))};return nowait.forEach(getResult),acc.concat(wait.map(getResult))}),[]);return coreservices.b.$q.all(promises)},ResolveContext.prototype.injector=function(){return this._injector||(this._injector=new resolveContext_UIInjectorImpl(this))},ResolveContext.prototype.findNode=function(resolvable){return Object(common.t)(this._path,(function(node){return Object(common.z)(node.resolvables,resolvable)}))},ResolveContext.prototype.getDependencies=function(resolvable){var _this=this,node=this.findNode(resolvable),availableResolvables=(pathUtils_PathUtils.subPath(this._path,(function(x){return x===node}))||this._path).reduce((function(acc,_node){return acc.concat(_node.resolvables)}),[]).filter((function(res){return res!==resolvable}));return resolvable.deps.map((function(token){var matching=availableResolvables.filter((function(r){return r.token===token}));if(matching.length)return Object(common.P)(matching);var fromInjector=_this.injector().getNative(token);if(Object(predicates.m)(fromInjector))throw new Error("Could not find Dependency Injection token: "+stringify(token));return new resolvable_Resolvable(token,(function(){return fromInjector}),[],fromInjector)}))},ResolveContext}(),resolveContext_UIInjectorImpl=function(){function UIInjectorImpl(context){this.context=context,this.native=this.get(NATIVE_INJECTOR_TOKEN)||coreservices.b.$injector}return UIInjectorImpl.prototype.get=function(token){var resolvable=this.context.getResolvable(token);if(resolvable){if("NOWAIT"===this.context.getPolicy(resolvable).async)return resolvable.get(this.context);if(!resolvable.resolved)throw new Error("Resolvable async .get() not complete:"+stringify(resolvable.token));return resolvable.data}return this.getNative(token)},UIInjectorImpl.prototype.getAsync=function(token){var resolvable=this.context.getResolvable(token);return resolvable?resolvable.get(this.context):coreservices.b.$q.when(this.native.get(token))},UIInjectorImpl.prototype.getNative=function(token){return this.native&&this.native.get(token)},UIInjectorImpl}();function nameBuilder(state){return state.name}function selfBuilder(state){return state.self.$$state=function(){return state},state.self}function dataBuilder(state){return state.parent&&state.parent.data&&(state.data=state.self.data=Object(common.A)(state.parent.data,state.data)),state.data}var getUrlBuilder=function($urlMatcherFactoryProvider,root){return function urlBuilder(stateObject){var stateDec=stateObject.self;if(stateDec&&stateDec.url&&stateDec.name&&stateDec.name.match(/\.\*\*$/)){var newStateDec={};Object(common.m)(stateDec,newStateDec),newStateDec.url+="{remainder:any}",stateDec=newStateDec}var parent=stateObject.parent,parsed=function(url){if(!Object(predicates.l)(url))return!1;var root="^"===url.charAt(0);return{val:root?url.substring(1):url,root:root}}(stateDec.url),url=parsed?$urlMatcherFactoryProvider.compile(parsed.val,{state:stateDec}):stateDec.url;if(!url)return null;if(!$urlMatcherFactoryProvider.isMatcher(url))throw new Error("Invalid url '"+url+"' in state '"+stateObject+"'");return parsed&&parsed.root?url:(parent&&parent.navigable||root()).url.append(url)}},getNavigableBuilder=function(isRoot){return function navigableBuilder(state){return!isRoot(state)&&state.url?state:state.parent?state.parent.navigable:null}};function pathBuilder(state){return state.parent?state.parent.path.concat(state):[state]}function includesBuilder(state){var includes=state.parent?Object(common.r)({},state.parent.includes):{};return includes[state.name]=!0,includes}function resolvablesBuilder(state){var getToken=function(p){return p.provide||p.token},literal2Resolvable=Object(hof.l)([[Object(hof.n)("resolveFn"),function(p){return new resolvable_Resolvable(getToken(p),p.resolveFn,p.deps,p.policy)}],[Object(hof.n)("useFactory"),function(p){return new resolvable_Resolvable(getToken(p),p.useFactory,p.deps||p.dependencies,p.policy)}],[Object(hof.n)("useClass"),function(p){return new resolvable_Resolvable(getToken(p),(function(){return new p.useClass}),[],p.policy)}],[Object(hof.n)("useValue"),function(p){return new resolvable_Resolvable(getToken(p),(function(){return p.useValue}),[],p.policy,p.useValue)}],[Object(hof.n)("useExisting"),function(p){return new resolvable_Resolvable(getToken(p),common.y,[p.useExisting],p.policy)}]]),tuple2Resolvable=Object(hof.l)([[Object(hof.m)(Object(hof.n)("val"),predicates.l),function(tuple){return new resolvable_Resolvable(tuple.token,common.y,[tuple.val],tuple.policy)}],[Object(hof.m)(Object(hof.n)("val"),predicates.a),function(tuple){return new resolvable_Resolvable(tuple.token,Object(common.P)(tuple.val),tuple.val.slice(0,-1),tuple.policy)}],[Object(hof.m)(Object(hof.n)("val"),predicates.d),function(tuple){return new resolvable_Resolvable(tuple.token,tuple.val,(fn=tuple.val,$injector=coreservices.b.$injector,fn.$inject||$injector&&$injector.annotate(fn,$injector.strictDi)||"deferred"),tuple.policy);var fn,$injector}]]),item2Resolvable=Object(hof.l)([[Object(hof.h)(resolvable_Resolvable),function(r){return r}],[function(obj){return!(!obj.token||!obj.resolveFn)},literal2Resolvable],[function(obj){return!(!obj.provide&&!obj.token||!(obj.useValue||obj.useFactory||obj.useExisting||obj.useClass))},literal2Resolvable],[function(obj){return!!(obj&&obj.val&&(Object(predicates.l)(obj.val)||Object(predicates.a)(obj.val)||Object(predicates.d)(obj.val)))},tuple2Resolvable],[Object(hof.p)(!0),function(obj){throw new Error("Invalid resolve value: "+stringify(obj))}]]),decl=state.resolve;return(Object(predicates.a)(decl)?decl:function(resolveObj,resolvePolicies){return Object.keys(resolveObj||{}).map((function(token){return{token:token,val:resolveObj[token],deps:void 0,policy:resolvePolicies[token]}}))}(decl,state.resolvePolicy||{})).map(item2Resolvable)}var TransitionHookPhase,TransitionHookScope,stateBuilder_StateBuilder=function(){function StateBuilder(matcher,urlMatcherFactory){this.matcher=matcher;var paramFactory,self=this,root=function(){return matcher.find("")},isRoot=function(state){return""===state.name};this.builders={name:[nameBuilder],self:[selfBuilder],parent:[function parentBuilder(state){return isRoot(state)?null:matcher.find(self.parentName(state))||root()}],data:[dataBuilder],url:[getUrlBuilder(urlMatcherFactory,root)],navigable:[getNavigableBuilder(isRoot)],params:[(paramFactory=urlMatcherFactory.paramFactory,function paramsBuilder(state){var urlParams=state.url&&state.url.parameters({inherit:!1})||[],nonUrlParams=Object(common.U)(Object(common.C)(Object(common.F)(state.params||{},urlParams.map(Object(hof.n)("id"))),(function(config,id){return paramFactory.fromConfig(id,null,state.self)})));return urlParams.concat(nonUrlParams).map((function(p){return[p.id,p]})).reduce(common.h,{})})],views:[],path:[pathBuilder],includes:[includesBuilder],resolvables:[resolvablesBuilder]}}return StateBuilder.prototype.builder=function(name,fn){var builders=this.builders,array=builders[name]||[];return Object(predicates.l)(name)&&!Object(predicates.c)(fn)?array.length>1?array:array[0]:Object(predicates.l)(name)&&Object(predicates.d)(fn)?(builders[name]=array,builders[name].push(fn),function(){return builders[name].splice(builders[name].indexOf(fn,1))&&null}):void 0},StateBuilder.prototype.build=function(state){var matcher=this.matcher,builders=this.builders,parent=this.parentName(state);if(parent&&!matcher.find(parent,void 0,!1))return null;for(var key in builders)if(builders.hasOwnProperty(key)){var chain=builders[key].reduce((function(parentFn,step){return function(_state){return step(_state,parentFn)}}),common.E);state[key]=chain(state)}return state},StateBuilder.prototype.parentName=function(state){var name=state.name||"",segments=name.split(".");if("**"===segments.pop()&&segments.pop(),segments.length){if(state.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+name+")");return segments.join(".")}return state.parent?Object(predicates.l)(state.parent)?state.parent:state.parent.name:""},StateBuilder.prototype.name=function(state){var name=state.name;if(-1!==name.indexOf(".")||!state.parent)return name;var parentName=Object(predicates.l)(state.parent)?state.parent:state.parent.name;return parentName?parentName+"."+name:name},StateBuilder}(),stateObject_StateObject=function(){function StateObject(config){return StateObject.create(config||{})}return StateObject.create=function(stateDecl){stateDecl=StateObject.isStateClass(stateDecl)?new stateDecl:stateDecl;var state=Object(common.A)(Object(common.A)(stateDecl,StateObject.prototype));return stateDecl.$$state=function(){return state},state.self=stateDecl,state.__stateObjectCache={nameGlob:Glob.fromString(state.name)},state},StateObject.prototype.is=function(ref){return this===ref||this.self===ref||this.fqn()===ref},StateObject.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var name=this.parent.fqn();return name?name+"."+this.name:this.name},StateObject.prototype.root=function(){return this.parent&&this.parent.root()||this},StateObject.prototype.parameters=function(opts){return((opts=Object(common.o)(opts,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(Object(common.U)(this.params)).filter((function(param){return!opts.matchingKeys||opts.matchingKeys.hasOwnProperty(param.id)}))},StateObject.prototype.parameter=function(id,opts){return void 0===opts&&(opts={}),this.url&&this.url.parameter(id,opts)||Object(common.t)(Object(common.U)(this.params),Object(hof.o)("id",id))||opts.inherit&&this.parent&&this.parent.parameter(id)},StateObject.prototype.toString=function(){return this.fqn()},StateObject.isStateClass=function(stateDecl){return Object(predicates.d)(stateDecl)&&!0===stateDecl.__uiRouterState},StateObject.isStateDeclaration=function(obj){return Object(predicates.d)(obj.$$state)},StateObject.isState=function(obj){return Object(predicates.i)(obj.__stateObjectCache)},StateObject}(),stateMatcher_StateMatcher=function(){function StateMatcher(_states){this._states=_states}return StateMatcher.prototype.isRelative=function(stateName){return 0===(stateName=stateName||"").indexOf(".")||0===stateName.indexOf("^")},StateMatcher.prototype.find=function(stateOrName,base,matchGlob){if(void 0===matchGlob&&(matchGlob=!0),stateOrName||""===stateOrName){var isStr=Object(predicates.l)(stateOrName),name=isStr?stateOrName:stateOrName.name;this.isRelative(name)&&(name=this.resolvePath(name,base));var state=this._states[name];if(state&&(isStr||!(isStr||state!==stateOrName&&state.self!==stateOrName)))return state;if(isStr&&matchGlob){var matches=Object(common.U)(this._states).filter((function(_state){return _state.__stateObjectCache.nameGlob&&_state.__stateObjectCache.nameGlob.matches(name)}));return matches.length>1&&safeConsole.error("stateMatcher.find: Found multiple matches for "+name+" using glob: ",matches.map((function(match){return match.name}))),matches[0]}}},StateMatcher.prototype.resolvePath=function(name,base){if(!base)throw new Error("No reference point given for path '"+name+"'");for(var baseState=this.find(base),splitName=name.split("."),pathLength=splitName.length,i=0,current=baseState;i<pathLength;i++)if(""!==splitName[i]||0!==i){if("^"!==splitName[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+baseState.name+"'");current=current.parent}else current=baseState;var relName=splitName.slice(i).join(".");return current.name+(current.name&&relName?".":"")+relName},StateMatcher}(),stateQueueManager_StateQueueManager=function(){function StateQueueManager(router,states,builder,listeners){this.router=router,this.states=states,this.builder=builder,this.listeners=listeners,this.queue=[]}return StateQueueManager.prototype.dispose=function(){this.queue=[]},StateQueueManager.prototype.register=function(stateDecl){var queue=this.queue,state=stateObject_StateObject.create(stateDecl),name=state.name;if(!Object(predicates.l)(name))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(name)||Object(common.z)(queue.map(Object(hof.n)("name")),name))throw new Error("State '"+name+"' is already defined");return queue.push(state),this.flush(),state},StateQueueManager.prototype.flush=function(){for(var _this=this,queue=this.queue,states=this.states,builder=this.builder,registered=[],orphans=[],previousQueueLength={},getState=function(name){return _this.states.hasOwnProperty(name)&&_this.states[name]},notifyListeners=function(){registered.length&&_this.listeners.forEach((function(listener){return listener("registered",registered.map((function(s){return s.self})))}))};queue.length>0;){var state=queue.shift(),name_1=state.name,result=builder.build(state),orphanIdx=orphans.indexOf(state);if(result){var existingState=getState(name_1);if(existingState&&existingState.name===name_1)throw new Error("State '"+name_1+"' is already defined");var existingFutureState=getState(name_1+".**");existingFutureState&&this.router.stateRegistry.deregister(existingFutureState),states[name_1]=state,this.attachRoute(state),orphanIdx>=0&&orphans.splice(orphanIdx,1),registered.push(state)}else{var prev=previousQueueLength[name_1];if(previousQueueLength[name_1]=queue.length,orphanIdx>=0&&prev===queue.length)return queue.push(state),notifyListeners(),states;orphanIdx<0&&orphans.push(state),queue.push(state)}}return notifyListeners(),states},StateQueueManager.prototype.attachRoute=function(state){if(!state.abstract&&state.url){var rulesApi=this.router.urlService.rules;rulesApi.rule(rulesApi.urlRuleFactory.create(state))}},StateQueueManager}(),stateRegistry_StateRegistry=function(){function StateRegistry(router){this.router=router,this.states={},this.listeners=[],this.matcher=new stateMatcher_StateMatcher(this.states),this.builder=new stateBuilder_StateBuilder(this.matcher,router.urlMatcherFactory),this.stateQueue=new stateQueueManager_StateQueueManager(router,this.states,this.builder,this.listeners),this._registerRoot()}return StateRegistry.prototype._registerRoot=function(){(this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0})).navigable=null},StateRegistry.prototype.dispose=function(){var _this=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach((function(state){return _this.get(state)&&_this.deregister(state)}))},StateRegistry.prototype.onStatesChanged=function(listener){return this.listeners.push(listener),function deregisterListener(){Object(common.L)(this.listeners)(listener)}.bind(this)},StateRegistry.prototype.root=function(){return this._root},StateRegistry.prototype.register=function(stateDefinition){return this.stateQueue.register(stateDefinition)},StateRegistry.prototype._deregisterTree=function(state){var _this=this,all=this.get().map((function(s){return s.$$state()})),getChildren=function(states){var _children=all.filter((function(s){return-1!==states.indexOf(s.parent)}));return 0===_children.length?_children:_children.concat(getChildren(_children))},children=getChildren([state]),deregistered=[state].concat(children).reverse();return deregistered.forEach((function(_state){var rulesApi=_this.router.urlService.rules;rulesApi.rules().filter(Object(hof.o)("state",_state)).forEach((function(rule){return rulesApi.removeRule(rule)})),delete _this.states[_state.name]})),deregistered},StateRegistry.prototype.deregister=function(stateOrName){var _state=this.get(stateOrName);if(!_state)throw new Error("Can't deregister state; not found: "+stateOrName);var deregisteredStates=this._deregisterTree(_state.$$state());return this.listeners.forEach((function(listener){return listener("deregistered",deregisteredStates.map((function(s){return s.self})))})),deregisteredStates},StateRegistry.prototype.get=function(stateOrName,base){var _this=this;if(0===arguments.length)return Object.keys(this.states).map((function(name){return _this.states[name].self}));var found=this.matcher.find(stateOrName,base);return found&&found.self||null},StateRegistry.prototype.decorator=function(name,func){return this.builder.builder(name,func)},StateRegistry}();!function(TransitionHookPhase){TransitionHookPhase[TransitionHookPhase.CREATE=0]="CREATE",TransitionHookPhase[TransitionHookPhase.BEFORE=1]="BEFORE",TransitionHookPhase[TransitionHookPhase.RUN=2]="RUN",TransitionHookPhase[TransitionHookPhase.SUCCESS=3]="SUCCESS",TransitionHookPhase[TransitionHookPhase.ERROR=4]="ERROR"}(TransitionHookPhase||(TransitionHookPhase={})),function(TransitionHookScope){TransitionHookScope[TransitionHookScope.TRANSITION=0]="TRANSITION",TransitionHookScope[TransitionHookScope.STATE=1]="STATE"}(TransitionHookScope||(TransitionHookScope={}));var defaultOptions={current:common.E,transition:null,traceData:{},bind:null},transitionHook_TransitionHook=function(){function TransitionHook(transition,stateContext,registeredHook,options){var _this=this;this.transition=transition,this.stateContext=stateContext,this.registeredHook=registeredHook,this.options=options,this.isSuperseded=function(){return _this.type.hookPhase===TransitionHookPhase.RUN&&!_this.options.transition.isActive()},this.options=Object(common.o)(options,defaultOptions),this.type=registeredHook.eventType}return TransitionHook.chain=function(hooks,waitFor){return hooks.reduce((function(prev,nextHook){return prev.then((function(){return nextHook.invokeHook()}))}),waitFor||coreservices.b.$q.when())},TransitionHook.invokeHooks=function(hooks,doneCallback){for(var idx=0;idx<hooks.length;idx++){var hookResult=hooks[idx].invokeHook();if(Object(predicates.j)(hookResult)){var remainingHooks=hooks.slice(idx+1);return TransitionHook.chain(remainingHooks,hookResult).then(doneCallback)}}return doneCallback()},TransitionHook.runAllHooks=function(hooks){hooks.forEach((function(hook){return hook.invokeHook()}))},TransitionHook.prototype.logError=function(err){this.transition.router.stateService.defaultErrorHandler()(err)},TransitionHook.prototype.invokeHook=function(){var _this=this,hook=this.registeredHook;if(!hook._deregistered){var notCurrent=this.getNotCurrentRejection();if(notCurrent)return notCurrent;var options=this.options;trace.traceHookInvocation(this,this.transition,options);var handleError=function(err){return hook.eventType.getErrorHandler(_this)(err)},handleResult=function(result){return hook.eventType.getResultHandler(_this)(result)};try{var result=hook.callback.call(options.bind,_this.transition,_this.stateContext);return!this.type.synchronous&&Object(predicates.j)(result)?result.catch((function(err){return rejectFactory_Rejection.normalize(err).toPromise()})).then(handleResult,handleError):handleResult(result)}catch(err){return handleError(rejectFactory_Rejection.normalize(err))}finally{hook.invokeLimit&&++hook.invokeCount>=hook.invokeLimit&&hook.deregister()}}},TransitionHook.prototype.handleHookResult=function(result){var _this=this,notCurrent=this.getNotCurrentRejection();return notCurrent||(Object(predicates.j)(result)?result.then((function(val){return _this.handleHookResult(val)})):(trace.traceHookResult(result,this.transition,this.options),!1===result?rejectFactory_Rejection.aborted("Hook aborted transition").toPromise():Object(hof.h)(targetState_TargetState)(result)?rejectFactory_Rejection.redirected(result).toPromise():void 0))},TransitionHook.prototype.getNotCurrentRejection=function(){var router=this.transition.router;return router._disposed?rejectFactory_Rejection.aborted("UIRouter instance #"+router.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?rejectFactory_Rejection.aborted().toPromise():this.isSuperseded()?rejectFactory_Rejection.superseded(this.options.current()).toPromise():void 0},TransitionHook.prototype.toString=function(){var options=this.options,registeredHook=this.registeredHook;return(Object(hof.k)("traceData.hookType")(options)||"internal")+" context: "+(Object(hof.k)("traceData.context.state.name")(options)||Object(hof.k)("traceData.context")(options)||"unknown")+", "+maxLength(200,fnToString(registeredHook.callback))},TransitionHook.HANDLE_RESULT=function(hook){return function(result){return hook.handleHookResult(result)}},TransitionHook.LOG_REJECTED_RESULT=function(hook){return function(result){Object(predicates.j)(result)&&result.catch((function(err){return hook.logError(rejectFactory_Rejection.normalize(err))}))}},TransitionHook.LOG_ERROR=function(hook){return function(error){return hook.logError(error)}},TransitionHook.REJECT_ERROR=function(hook){return function(error){return Object(common.O)(error)}},TransitionHook.THROW_ERROR=function(hook){return function(error){throw error}},TransitionHook}();function matchState(state,criterion,transition){var toMatch=Object(predicates.l)(criterion)?[criterion]:criterion;return!!(Object(predicates.d)(toMatch)?toMatch:function matchGlobs(_state){for(var globStrings=toMatch,i=0;i<globStrings.length;i++){var glob=new Glob(globStrings[i]);if(glob&&glob.matches(_state.name)||!glob&&globStrings[i]===_state.name)return!0}return!1})(state,transition)}var hookRegistry_RegisteredHook=function(){function RegisteredHook(tranSvc,eventType,callback,matchCriteria,removeHookFromRegistry,options){void 0===options&&(options={}),this.tranSvc=tranSvc,this.eventType=eventType,this.callback=callback,this.matchCriteria=matchCriteria,this.removeHookFromRegistry=removeHookFromRegistry,this.invokeCount=0,this._deregistered=!1,this.priority=options.priority||0,this.bind=options.bind||null,this.invokeLimit=options.invokeLimit}return RegisteredHook.prototype._matchingNodes=function(nodes,criterion,transition){if(!0===criterion)return nodes;var matching=nodes.filter((function(node){return matchState(node.state,criterion,transition)}));return matching.length?matching:null},RegisteredHook.prototype._getDefaultMatchCriteria=function(){return Object(common.C)(this.tranSvc._pluginapi._getPathTypes(),(function(){return!0}))},RegisteredHook.prototype._getMatchingNodes=function(treeChanges,transition){var _this=this,criteria=Object(common.r)(this._getDefaultMatchCriteria(),this.matchCriteria);return Object(common.U)(this.tranSvc._pluginapi._getPathTypes()).reduce((function(mn,pathtype){var isStateHook=pathtype.scope===TransitionHookScope.STATE,path=treeChanges[pathtype.name]||[],nodes=isStateHook?path:[Object(common.P)(path)];return mn[pathtype.name]=_this._matchingNodes(nodes,criteria[pathtype.name],transition),mn}),{})},RegisteredHook.prototype.matches=function(treeChanges,transition){var matches=this._getMatchingNodes(treeChanges,transition);return Object(common.U)(matches).every(common.y)?matches:null},RegisteredHook.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},RegisteredHook}();function makeEvent(registry,transitionService,eventType){var hooks=(registry._registeredHooks=registry._registeredHooks||{})[eventType.name]=[],removeHookFn=Object(common.L)(hooks);function hookRegistrationFn(matchObject,callback,options){void 0===options&&(options={});var registeredHook=new hookRegistry_RegisteredHook(transitionService,eventType,callback,matchObject,removeHookFn,options);return hooks.push(registeredHook),registeredHook.deregister.bind(registeredHook)}return registry[eventType.name]=hookRegistrationFn,hookRegistrationFn}var hookBuilder_HookBuilder=function(){function HookBuilder(transition){this.transition=transition}return HookBuilder.prototype.buildHooksForPhase=function(phase){var _this=this;return this.transition.router.transitionService._pluginapi._getEvents(phase).map((function(type){return _this.buildHooks(type)})).reduce(common.T,[]).filter(common.y)},HookBuilder.prototype.buildHooks=function(hookType){var transition=this.transition,treeChanges=transition.treeChanges(),matchingHooks=this.getMatchingHooks(hookType,treeChanges,transition);if(!matchingHooks)return[];var baseHookOptions={transition:transition,current:transition.options().current};return matchingHooks.map((function(hook){return hook.matches(treeChanges,transition)[hookType.criteriaMatchPath.name].map((function(node){var _options=Object(common.r)({bind:hook.bind,traceData:{hookType:hookType.name,context:node}},baseHookOptions),state=hookType.criteriaMatchPath.scope===TransitionHookScope.STATE?node.state.self:null,transitionHook=new transitionHook_TransitionHook(transition,state,hook,_options);return{hook:hook,node:node,transitionHook:transitionHook}}))})).reduce(common.T,[]).sort(function tupleSort(reverseDepthSort){void 0===reverseDepthSort&&(reverseDepthSort=!1);return function nodeDepthThenPriority(l,r){var factor=reverseDepthSort?-1:1,depthDelta=(l.node.state.path.length-r.node.state.path.length)*factor;return 0!==depthDelta?depthDelta:r.hook.priority-l.hook.priority}}(hookType.reverseSort)).map((function(tuple){return tuple.transitionHook}))},HookBuilder.prototype.getMatchingHooks=function(hookType,treeChanges,transition){var isCreate=hookType.hookPhase===TransitionHookPhase.CREATE,$transitions=this.transition.router.transitionService;return(isCreate?[$transitions]:[this.transition,$transitions]).map((function(reg){return reg.getHooks(hookType.name)})).filter(Object(common.l)(predicates.a,"broken event named: "+hookType.name)).reduce(common.T,[]).filter((function(hook){return hook.matches(treeChanges,transition)}))},HookBuilder}();var stateSelf=Object(hof.n)("self"),transition_Transition=function(){function Transition(fromPath,targetState,router){var _this=this;if(this._deferred=coreservices.b.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new hookBuilder_HookBuilder(this),this.isActive=function(){return _this.router.globals.transition===_this},this.router=router,this._targetState=targetState,!targetState.valid())throw new Error(targetState.error());this._options=Object(common.r)({current:Object(hof.p)(this)},targetState.options()),this.$id=router.transitionService._transitionCount++;var toPath=pathUtils_PathUtils.buildToPath(fromPath,targetState);this._treeChanges=pathUtils_PathUtils.treeChanges(fromPath,toPath,this._options.reloadState),this.createTransitionHookRegFns();var onCreateHooks=this._hookBuilder.buildHooksForPhase(TransitionHookPhase.CREATE);transitionHook_TransitionHook.invokeHooks(onCreateHooks,(function(){return null})),this.applyViewConfigs(router)}return Transition.prototype.onBefore=function(criteria,callback,options){},Transition.prototype.onStart=function(criteria,callback,options){},Transition.prototype.onExit=function(criteria,callback,options){},Transition.prototype.onRetain=function(criteria,callback,options){},Transition.prototype.onEnter=function(criteria,callback,options){},Transition.prototype.onFinish=function(criteria,callback,options){},Transition.prototype.onSuccess=function(criteria,callback,options){},Transition.prototype.onError=function(criteria,callback,options){},Transition.prototype.createTransitionHookRegFns=function(){var _this=this;this.router.transitionService._pluginapi._getEvents().filter((function(type){return type.hookPhase!==TransitionHookPhase.CREATE})).forEach((function(type){return makeEvent(_this,_this.router.transitionService,type)}))},Transition.prototype.getHooks=function(hookName){return this._registeredHooks[hookName]},Transition.prototype.applyViewConfigs=function(router){var enteringStates=this._treeChanges.entering.map((function(node){return node.state}));pathUtils_PathUtils.applyViewConfigs(router.transitionService.$view,this._treeChanges.to,enteringStates)},Transition.prototype.$from=function(){return Object(common.P)(this._treeChanges.from).state},Transition.prototype.$to=function(){return Object(common.P)(this._treeChanges.to).state},Transition.prototype.from=function(){return this.$from().self},Transition.prototype.to=function(){return this.$to().self},Transition.prototype.targetState=function(){return this._targetState},Transition.prototype.is=function(compare){return compare instanceof Transition?this.is({to:compare.$to().name,from:compare.$from().name}):!(compare.to&&!matchState(this.$to(),compare.to,this)||compare.from&&!matchState(this.$from(),compare.from,this))},Transition.prototype.params=function(pathname){return void 0===pathname&&(pathname="to"),Object.freeze(this._treeChanges[pathname].map(Object(hof.n)("paramValues")).reduce(common.D,{}))},Transition.prototype.paramsChanged=function(){var fromParams=this.params("from"),toParams=this.params("to"),allParamDescriptors=[].concat(this._treeChanges.to).concat(this._treeChanges.from).map((function(pathNode){return pathNode.paramSchema})).reduce(common.v,[]).reduce(common.R,[]);return param_Param.changed(allParamDescriptors,fromParams,toParams).reduce((function(changedValues,descriptor){return changedValues[descriptor.id]=toParams[descriptor.id],changedValues}),{})},Transition.prototype.injector=function(state,pathName){void 0===pathName&&(pathName="to");var path=this._treeChanges[pathName];return state&&(path=pathUtils_PathUtils.subPath(path,(function(node){return node.state===state||node.state.name===state}))),new resolveContext_ResolveContext(path).injector()},Transition.prototype.getResolveTokens=function(pathname){return void 0===pathname&&(pathname="to"),new resolveContext_ResolveContext(this._treeChanges[pathname]).getTokens()},Transition.prototype.addResolvable=function(resolvable,state){void 0===state&&(state=""),resolvable=Object(hof.h)(resolvable_Resolvable)(resolvable)?resolvable:new resolvable_Resolvable(resolvable);var stateName="string"==typeof state?state:state.name,topath=this._treeChanges.to,targetNode=Object(common.t)(topath,(function(node){return node.state.name===stateName}));new resolveContext_ResolveContext(topath).addResolvables([resolvable],targetNode.state)},Transition.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},Transition.prototype.originalTransition=function(){var rf=this.redirectedFrom();return rf&&rf.originalTransition()||this},Transition.prototype.options=function(){return this._options},Transition.prototype.entering=function(){return Object(common.B)(this._treeChanges.entering,Object(hof.n)("state")).map(stateSelf)},Transition.prototype.exiting=function(){return Object(common.B)(this._treeChanges.exiting,Object(hof.n)("state")).map(stateSelf).reverse()},Transition.prototype.retained=function(){return Object(common.B)(this._treeChanges.retained,Object(hof.n)("state")).map(stateSelf)},Transition.prototype.views=function(pathname,state){void 0===pathname&&(pathname="entering");var path=this._treeChanges[pathname];return(path=state?path.filter(Object(hof.o)("state",state)):path).map(Object(hof.n)("views")).filter(common.y).reduce(common.T,[])},Transition.prototype.treeChanges=function(pathname){return pathname?this._treeChanges[pathname]:this._treeChanges},Transition.prototype.redirect=function(targetState){for(var redirects=1,trans=this;null!=(trans=trans.redirectedFrom());)if(++redirects>20)throw new Error("Too many consecutive Transition redirects (20+)");var redirectOpts={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==targetState.options().location&&(redirectOpts.location="replace");var newOptions=Object(common.r)({},this.options(),targetState.options(),redirectOpts);targetState=targetState.withOptions(newOptions,!0);var reloadState,newTransition=this.router.transitionService.create(this._treeChanges.from,targetState),originalEnteringNodes=this._treeChanges.entering,redirectEnteringNodes=newTransition._treeChanges.entering;return pathUtils_PathUtils.matching(redirectEnteringNodes,originalEnteringNodes,pathUtils_PathUtils.nonDynamicParams).filter(Object(hof.i)((reloadState=targetState.options().reloadState,function(node){return reloadState&&node.state.includes[reloadState.name]}))).forEach((function(node,idx){node.resolvables=originalEnteringNodes[idx].resolvables})),newTransition},Transition.prototype._changedParams=function(){var tc=this._treeChanges;if(!this._options.reload&&(!tc.exiting.length&&!tc.entering.length&&tc.to.length===tc.from.length&&!Object(common.i)(tc.to,tc.from).map((function(tuple){return tuple[0].state!==tuple[1].state})).reduce(common.g,!1))){var nodeSchemas=tc.to.map((function(node){return node.paramSchema})),_a=[tc.to,tc.from].map((function(path){return path.map((function(x){return x.paramValues}))})),toValues=_a[0],fromValues=_a[1];return Object(common.i)(nodeSchemas,toValues,fromValues).map((function(_a){var schema=_a[0],toVals=_a[1],fromVals=_a[2];return param_Param.changed(schema,toVals,fromVals)})).reduce(common.T,[])}},Transition.prototype.dynamic=function(){var changes=this._changedParams();return!!changes&&changes.map((function(x){return x.dynamic})).reduce(common.g,!1)},Transition.prototype.ignored=function(){return!!this._ignoredReason()},Transition.prototype._ignoredReason=function(){var pending=this.router.globals.transition,reloadState=this._options.reloadState,same=function(pathA,pathB){if(pathA.length!==pathB.length)return!1;var matching=pathUtils_PathUtils.matching(pathA,pathB);return pathA.length===matching.filter((function(node){return!reloadState||!node.state.includes[reloadState.name]})).length},newTC=this.treeChanges(),pendTC=pending&&pending.treeChanges();return pendTC&&same(pendTC.to,newTC.to)&&same(pendTC.exiting,newTC.exiting)?"SameAsPending":0===newTC.exiting.length&&0===newTC.entering.length&&same(newTC.from,newTC.to)?"SameAsCurrent":void 0},Transition.prototype.run=function(){var _this=this,runAllHooks=transitionHook_TransitionHook.runAllHooks,getHooksFor=function(phase){return _this._hookBuilder.buildHooksForPhase(phase)},allBeforeHooks=getHooksFor(TransitionHookPhase.BEFORE);return transitionHook_TransitionHook.invokeHooks(allBeforeHooks,(function(){var globals=_this.router.globals;return globals.lastStartedTransitionId=_this.$id,globals.transition=_this,globals.transitionHistory.enqueue(_this),trace.traceTransitionStart(_this),coreservices.b.$q.when(void 0)})).then((function(){var allRunHooks=getHooksFor(TransitionHookPhase.RUN);return transitionHook_TransitionHook.invokeHooks(allRunHooks,(function(){return coreservices.b.$q.when(void 0)}))})).then((function(){trace.traceSuccess(_this.$to(),_this),_this.success=!0,_this._deferred.resolve(_this.to()),runAllHooks(getHooksFor(TransitionHookPhase.SUCCESS))}),(function(reason){trace.traceError(reason,_this),_this.success=!1,_this._deferred.reject(reason),_this._error=reason,runAllHooks(getHooksFor(TransitionHookPhase.ERROR))})),this.promise},Transition.prototype.valid=function(){return!this.error()||void 0!==this.success},Transition.prototype.abort=function(){Object(predicates.m)(this.success)&&(this._aborted=!0)},Transition.prototype.error=function(){var state=this.$to();if(state.self.abstract)return rejectFactory_Rejection.invalid("Cannot transition to abstract state '"+state.name+"'");var paramDefs=state.parameters(),values=this.params(),invalidParams=paramDefs.filter((function(param){return!param.validates(values[param.id])}));if(invalidParams.length){var invalidValues=invalidParams.map((function(param){return"["+param.id+":"+stringify(values[param.id])+"]"})).join(", "),detail="The following parameter values are not valid for state '"+state.name+"': "+invalidValues;return rejectFactory_Rejection.invalid(detail)}return!1===this.success?this._error:void 0},Transition.prototype.toString=function(){var fromStateOrName=this.from(),toStateOrName=this.to(),avoidEmptyHash=function(params){return null!==params["#"]&&void 0!==params["#"]?params:Object(common.F)(params,["#"])};return"Transition#"+this.$id+"( '"+(Object(predicates.i)(fromStateOrName)?fromStateOrName.name:fromStateOrName)+"'"+stringify(avoidEmptyHash(this._treeChanges.from.map(Object(hof.n)("paramValues")).reduce(common.D,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(Object(predicates.i)(toStateOrName)?toStateOrName.name:toStateOrName)+"'"+stringify(avoidEmptyHash(this.params()))+" )"},Transition.diToken=Transition,Transition}();function quoteRegExp(str,param){var surroundPattern=["",""],result=str.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!param)return result;switch(param.squash){case!1:surroundPattern=["(",")"+(param.isOptional?"?":"")];break;case!0:result=result.replace(/\/$/,""),surroundPattern=["(?:/(",")|/)?"];break;default:surroundPattern=["("+param.squash+"|",")?"]}return result+surroundPattern[0]+param.type.pattern.source+surroundPattern[1]}var splitOnSlash=splitOnDelim("/"),urlMatcher_defaultConfig={state:{params:{}},strict:!0,caseInsensitive:!0},urlMatcher_UrlMatcher=function(){function UrlMatcher(pattern,paramTypes,paramFactory,config){var _this=this;this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.config=config=Object(common.o)(config,urlMatcher_defaultConfig),this.pattern=pattern;for(var matchArray,details,segment,placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,patterns=[],last=0,checkParamErrors=function(id){if(!UrlMatcher.nameValidator.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(Object(common.t)(_this._params,Object(hof.o)("id",id)))throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'")},matchDetails=function(m,isSearch){var str,id=m[2]||m[3],regexp=isSearch?m[4]:m[4]||("*"===m[1]?"[\\s\\S]*":null);return{id:id,regexp:regexp,segment:pattern.substring(last,m.index),type:regexp?paramTypes.type(regexp)||(str=regexp,Object(common.A)(paramTypes.type(isSearch?"query":"path"),{pattern:new RegExp(str,_this.config.caseInsensitive?"i":void 0)})):null}};(matchArray=placeholder.exec(pattern))&&!((details=matchDetails(matchArray,!1)).segment.indexOf("?")>=0);)checkParamErrors(details.id),this._params.push(paramFactory.fromPath(details.id,details.type,config.state)),this._segments.push(details.segment),patterns.push([details.segment,Object(common.P)(this._params)]),last=placeholder.lastIndex;var i=(segment=pattern.substring(last)).indexOf("?");if(i>=0){var search=segment.substring(i);if(segment=segment.substring(0,i),search.length>0)for(last=0;matchArray=searchPlaceholder.exec(search);)checkParamErrors((details=matchDetails(matchArray,!0)).id),this._params.push(paramFactory.fromSearch(details.id,details.type,config.state)),last=placeholder.lastIndex}this._segments.push(segment),this._compiled=patterns.map((function(_pattern){return quoteRegExp.apply(null,_pattern)})).concat(quoteRegExp(segment))}return UrlMatcher.encodeDashes=function(str){return encodeURIComponent(str).replace(/-/g,(function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()}))},UrlMatcher.pathSegmentsAndParams=function(matcher){var staticSegments=matcher._segments,pathParams=matcher._params.filter((function(p){return p.location===DefType.PATH}));return Object(common.i)(staticSegments,pathParams.concat(void 0)).reduce(common.T,[]).filter((function(x){return""!==x&&Object(predicates.c)(x)}))},UrlMatcher.queryParams=function(matcher){return matcher._params.filter((function(p){return p.location===DefType.SEARCH}))},UrlMatcher.compare=function(a,b){var weights=function(matcher){return matcher._cache.weights=matcher._cache.weights||function(matcher){return matcher._cache.segments=matcher._cache.segments||matcher._cache.path.map(UrlMatcher.pathSegmentsAndParams).reduce(common.T,[]).reduce(joinNeighborsR,[]).map((function(x){return Object(predicates.l)(x)?splitOnSlash(x):x})).reduce(common.T,[])}(matcher).map((function(segment){return"/"===segment?1:Object(predicates.l)(segment)?2:segment instanceof param_Param?3:void 0}))},weightsA=weights(a),weightsB=weights(b);!function(l,r,padVal){for(var len=Math.max(l.length,r.length);l.length<len;)l.push(padVal);for(;r.length<len;)r.push(padVal)}(weightsA,weightsB,0);var cmp,i,_pairs=Object(common.i)(weightsA,weightsB);for(i=0;i<_pairs.length;i++)if(0!==(cmp=_pairs[i][0]-_pairs[i][1]))return cmp;return 0},UrlMatcher.prototype.append=function(url){return this._children.push(url),url._cache={path:this._cache.path.concat(url),parent:this,pattern:null},url},UrlMatcher.prototype.isRoot=function(){return this._cache.path[0]===this},UrlMatcher.prototype.toString=function(){return this.pattern},UrlMatcher.prototype.exec=function(path,search,hash,options){var _this=this;void 0===search&&(search={}),void 0===options&&(options={});var obj,_prop,fn,match=(obj=this._cache,_prop="pattern",fn=function(){return new RegExp(["^",Object(common.S)(_this._cache.path.map(Object(hof.n)("_compiled"))).join(""),!1===_this.config.strict?"/?":"","$"].join(""),_this.config.caseInsensitive?"i":void 0)},obj[_prop]=obj[_prop]||fn()).exec(path);if(!match)return null;var reverseString,split,allReversed,allParams=this.parameters(),pathParams=allParams.filter((function(param){return!param.isSearch()})),searchParams=allParams.filter((function(param){return param.isSearch()})),nPathSegments=this._cache.path.map((function(urlm){return urlm._segments.length-1})).reduce((function(a,x){return a+x})),values={};if(nPathSegments!==match.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var i=0;i<nPathSegments;i++){for(var param=pathParams[i],value=match[i+1],j=0;j<param.replace.length;j++)param.replace[j].from===value&&(value=param.replace[j].to);value&&!0===param.array&&(reverseString=void 0,split=void 0,allReversed=void 0,split=(reverseString=function(str){return str.split("").reverse().join("")})(value).split(/-(?!\\)/),allReversed=Object(common.B)(split,reverseString),value=Object(common.B)(allReversed,(function(str){return str.replace(/\\-/g,"-")})).reverse()),Object(predicates.c)(value)&&(value=param.type.decode(value)),values[param.id]=param.value(value)}return searchParams.forEach((function(param){for(var value=search[param.id],j=0;j<param.replace.length;j++)param.replace[j].from===value&&(value=param.replace[j].to);Object(predicates.c)(value)&&(value=param.type.decode(value)),values[param.id]=param.value(value)})),hash&&(values["#"]=hash),values},UrlMatcher.prototype.parameters=function(opts){return void 0===opts&&(opts={}),!1===opts.inherit?this._params:Object(common.S)(this._cache.path.map((function(matcher){return matcher._params})))},UrlMatcher.prototype.parameter=function(id,opts){var _this=this;void 0===opts&&(opts={});var parent=this._cache.parent;return function(){for(var _i=0,_a=_this._params;_i<_a.length;_i++){var param=_a[_i];if(param.id===id)return param}}()||!1!==opts.inherit&&parent&&parent.parameter(id,opts)||null},UrlMatcher.prototype.validates=function(params){return params=params||{},this.parameters().filter((function(paramDef){return params.hasOwnProperty(paramDef.id)})).map((function(paramDef){return param=paramDef,val=params[paramDef.id],!param||param.validates(val);var param,val})).reduce(common.e,!0)},UrlMatcher.prototype.format=function(values){void 0===values&&(values={});var urlMatchers=this._cache.path,pathSegmentsAndParams=urlMatchers.map(UrlMatcher.pathSegmentsAndParams).reduce(common.T,[]).map((function(x){return Object(predicates.l)(x)?x:getDetails(x)})),queryParams=urlMatchers.map(UrlMatcher.queryParams).reduce(common.T,[]).map(getDetails);if(pathSegmentsAndParams.concat(queryParams).filter((function(param){return!1===param.isValid})).length)return null;function getDetails(param){var value=param.value(values[param.id]),isValid=param.validates(value),isDefaultValue=param.isDefaultValue(value),squash=!!isDefaultValue&&param.squash,encoded=param.type.encode(value);return{param:param,value:value,isValid:isValid,isDefaultValue:isDefaultValue,squash:squash,encoded:encoded}}var pathString=pathSegmentsAndParams.reduce((function(acc,x){if(Object(predicates.l)(x))return acc+x;var squash=x.squash,encoded=x.encoded,param=x.param;return!0===squash?acc.match(/\/$/)?acc.slice(0,-1):acc:Object(predicates.l)(squash)?acc+squash:!1!==squash||null==encoded?acc:Object(predicates.a)(encoded)?acc+Object(common.B)(encoded,UrlMatcher.encodeDashes).join("-"):param.raw?acc+encoded:acc+encodeURIComponent(encoded)}),""),queryString=queryParams.map((function(paramDetails){var param=paramDetails.param,squash=paramDetails.squash,encoded=paramDetails.encoded,isDefaultValue=paramDetails.isDefaultValue;if(!(null==encoded||isDefaultValue&&!1!==squash)&&(Object(predicates.a)(encoded)||(encoded=[encoded]),0!==encoded.length))return param.raw||(encoded=Object(common.B)(encoded,encodeURIComponent)),encoded.map((function(val){return param.id+"="+val}))})).filter(common.y).reduce(common.T,[]).join("&");return pathString+(queryString?"?"+queryString:"")+(values["#"]?"#"+values["#"]:"")},UrlMatcher.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,UrlMatcher}(),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},urlMatcherFactory_ParamFactory=function(){function ParamFactory(router){this.router=router}return ParamFactory.prototype.fromConfig=function(id,type,state){return new param_Param(id,type,DefType.CONFIG,this.router.urlService.config,state)},ParamFactory.prototype.fromPath=function(id,type,state){return new param_Param(id,type,DefType.PATH,this.router.urlService.config,state)},ParamFactory.prototype.fromSearch=function(id,type,state){return new param_Param(id,type,DefType.SEARCH,this.router.urlService.config,state)},ParamFactory}(),urlMatcherFactory_UrlMatcherFactory=function(){function UrlMatcherFactory(router){var _this=this;this.router=router,this.paramFactory=new urlMatcherFactory_ParamFactory(this.router),this.caseInsensitive=function(value){return _this.router.urlService.config.caseInsensitive(value)},this.defaultSquashPolicy=function(value){return _this.router.urlService.config.defaultSquashPolicy(value)},this.strictMode=function(value){return _this.router.urlService.config.strictMode(value)},this.type=function(name,definition,definitionFn){return _this.router.urlService.config.type(name,definition,definitionFn)||_this},Object(common.r)(this,{UrlMatcher:urlMatcher_UrlMatcher,Param:param_Param})}return UrlMatcherFactory.prototype.compile=function(pattern,config){var urlConfig=this.router.urlService.config,params=config&&!config.state&&config.params;config=params?__assign({state:{params:params}},config):config;var globalConfig={strict:urlConfig._isStrictMode,caseInsensitive:urlConfig._isCaseInsensitive};return new urlMatcher_UrlMatcher(pattern,urlConfig.paramTypes,this.paramFactory,Object(common.r)(globalConfig,config))},UrlMatcherFactory.prototype.isMatcher=function(object){if(!Object(predicates.i)(object))return!1;var result=!0;return Object(common.w)(urlMatcher_UrlMatcher.prototype,(function(val,name){Object(predicates.d)(val)&&(result=result&&Object(predicates.c)(object[name])&&Object(predicates.d)(object[name]))})),result},UrlMatcherFactory.prototype.$get=function(){var urlConfig=this.router.urlService.config;return urlConfig.paramTypes.enqueue=!1,urlConfig.paramTypes._flushTypeQueue(),this},UrlMatcherFactory}(),urlRule_UrlRuleFactory=function(){function UrlRuleFactory(router){this.router=router}return UrlRuleFactory.prototype.compile=function(str){return this.router.urlMatcherFactory.compile(str)},UrlRuleFactory.prototype.create=function(what,handler){var _this=this,isState=stateObject_StateObject.isState,isStateDeclaration=stateObject_StateObject.isStateDeclaration,makeRule=Object(hof.l)([[predicates.l,function(_what){return makeRule(_this.compile(_what))}],[Object(hof.h)(urlMatcher_UrlMatcher),function(_what){return _this.fromUrlMatcher(_what,handler)}],[Object(hof.j)(isState,isStateDeclaration),function(_what){return _this.fromState(_what,_this.router)}],[Object(hof.h)(RegExp),function(_what){return _this.fromRegExp(_what,handler)}],[predicates.d,function(_what){return new urlRule_BaseUrlRule(_what,handler)}]]),rule=makeRule(what);if(!rule)throw new Error("invalid 'what' in when()");return rule},UrlRuleFactory.prototype.fromUrlMatcher=function(urlMatcher,handler){var _handler=handler;Object(predicates.l)(handler)&&(handler=this.router.urlMatcherFactory.compile(handler)),Object(hof.h)(urlMatcher_UrlMatcher)(handler)&&(_handler=function(match){return handler.format(match)});var details={urlMatcher:urlMatcher,matchPriority:function matchPriority(params){var optional=urlMatcher.parameters().filter((function(param){return param.isOptional}));return optional.length?optional.filter((function(param){return params[param.id]})).length/optional.length:1e-6},type:"URLMATCHER"};return Object(common.r)(new urlRule_BaseUrlRule((function matchUrlParamters(url){var params=urlMatcher.exec(url.path,url.search,url.hash);return urlMatcher.validates(params)&&params}),_handler),details)},UrlRuleFactory.prototype.fromState=function(stateOrDecl,router){var state=stateObject_StateObject.isStateDeclaration(stateOrDecl)?stateOrDecl.$$state():stateOrDecl,details={state:state,type:"STATE"};return Object(common.r)(this.fromUrlMatcher(state.url,(function(match){var $state=router.stateService,globals=router.globals;$state.href(state,match)!==$state.href(globals.current,globals.params)&&$state.transitionTo(state,match,{inherit:!0,source:"url"})})),details)},UrlRuleFactory.prototype.fromRegExp=function(regexp,handler){if(regexp.global||regexp.sticky)throw new Error("Rule RegExp must not be global or sticky");var _handler=Object(predicates.l)(handler)?function(match){return handler.replace(/\$(\$|\d{1,2})/,(function(m,what){return match["$"===what?0:Number(what)]}))}:handler,details={regexp:regexp,type:"REGEXP"};return Object(common.r)(new urlRule_BaseUrlRule((function(url){return regexp.exec(url.path)}),_handler),details)},UrlRuleFactory.isUrlRule=function(obj){return obj&&["type","match","handler"].every((function(key){return Object(predicates.c)(obj[key])}))},UrlRuleFactory}(),urlRule_BaseUrlRule=function BaseUrlRule(match,handler){var _this=this;this.match=match,this.type="RAW",this.matchPriority=function(match){return 0-_this.$id},this.handler=handler||common.y};var defaultRuleSortFn,urlRouter_UrlRouter=function(){function UrlRouter(router){var _this=this;this.router=router,this.sync=function(evt){return _this.router.urlService.sync(evt)},this.listen=function(enabled){return _this.router.urlService.listen(enabled)},this.deferIntercept=function(defer){return _this.router.urlService.deferIntercept(defer)},this.match=function(urlParts){return _this.router.urlService.match(urlParts)},this.initial=function(handler){return _this.router.urlService.rules.initial(handler)},this.otherwise=function(handler){return _this.router.urlService.rules.otherwise(handler)},this.removeRule=function(rule){return _this.router.urlService.rules.removeRule(rule)},this.rule=function(rule){return _this.router.urlService.rules.rule(rule)},this.rules=function(){return _this.router.urlService.rules.rules()},this.sort=function(compareFn){return _this.router.urlService.rules.sort(compareFn)},this.when=function(matcher,handler,options){return _this.router.urlService.rules.when(matcher,handler,options)},this.urlRuleFactory=new urlRule_UrlRuleFactory(router)}return UrlRouter.prototype.update=function(read){var $url=this.router.locationService;read?this.location=$url.url():$url.url()!==this.location&&$url.url(this.location,!0)},UrlRouter.prototype.push=function(urlMatcher,params,options){var replace=options&&!!options.replace;this.router.urlService.url(urlMatcher.format(params||{}),replace)},UrlRouter.prototype.href=function(urlMatcher,params,options){var url=urlMatcher.format(params);if(null==url)return null;options=options||{absolute:!1};var cfg=this.router.urlService.config,isHtml5=cfg.html5Mode();if(isHtml5||null===url||(url="#"+cfg.hashPrefix()+url),url=function appendBasePath(url,isHtml5,absolute,baseHref){return"/"===baseHref?url:isHtml5?stripLastPathElement(baseHref)+url:absolute?baseHref.slice(1)+url:url}(url,isHtml5,options.absolute,cfg.baseHref()),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",cfgPort=cfg.port(),port=80===cfgPort||443===cfgPort?"":":"+cfgPort;return[cfg.protocol(),"://",cfg.host(),port,slash,url].join("")},Object.defineProperty(UrlRouter.prototype,"interceptDeferred",{get:function(){return this.router.urlService.interceptDeferred},enumerable:!0,configurable:!0}),UrlRouter}(),view_ViewService=function(){function ViewService(router){var _this=this;this.router=router,this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._listeners=[],this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIView:function(id){return Object(common.t)(_this._uiViews,(function(view){return _this.router.$id+"."+view.id===id}))},_registeredUIViews:function(){return _this._uiViews},_activeViewConfigs:function(){return _this._viewConfigs},_onSync:function(listener){return _this._listeners.push(listener),function(){return Object(common.L)(_this._listeners,listener)}}}}return ViewService.normalizeUIViewTarget=function(context,rawViewName){void 0===rawViewName&&(rawViewName="");var viewAtContext=rawViewName.split("@"),uiViewName=viewAtContext[0]||"$default",uiViewContextAnchor=Object(predicates.l)(viewAtContext[1])?viewAtContext[1]:"^",relativeViewNameSugar=/^(\^(?:\.\^)*)\.(.*$)/.exec(uiViewName);relativeViewNameSugar&&(uiViewContextAnchor=relativeViewNameSugar[1],uiViewName=relativeViewNameSugar[2]),"!"===uiViewName.charAt(0)&&(uiViewName=uiViewName.substr(1),uiViewContextAnchor="");if(/^(\^(?:\.\^)*)$/.exec(uiViewContextAnchor)){var anchorState=uiViewContextAnchor.split(".").reduce((function(anchor,x){return anchor.parent}),context);uiViewContextAnchor=anchorState.name}else"."===uiViewContextAnchor&&(uiViewContextAnchor=context.name);return{uiViewName:uiViewName,uiViewContextAnchor:uiViewContextAnchor}},ViewService.prototype._rootViewContext=function(context){return this._rootContext=context||this._rootContext},ViewService.prototype._viewConfigFactory=function(viewType,factory){this._viewConfigFactories[viewType]=factory},ViewService.prototype.createViewConfig=function(path,decl){var cfgFactory=this._viewConfigFactories[decl.$type];if(!cfgFactory)throw new Error("ViewService: No view config factory registered for type "+decl.$type);var cfgs=cfgFactory(path,decl);return Object(predicates.a)(cfgs)?cfgs:[cfgs]},ViewService.prototype.deactivateViewConfig=function(viewConfig){trace.traceViewServiceEvent("<- Removing",viewConfig),Object(common.L)(this._viewConfigs,viewConfig)},ViewService.prototype.activateViewConfig=function(viewConfig){trace.traceViewServiceEvent("-> Registering",viewConfig),this._viewConfigs.push(viewConfig)},ViewService.prototype.sync=function(){var _this=this,uiViewsByFqn=this._uiViews.map((function(uiv){return[uiv.fqn,uiv]})).reduce(common.h,{});function viewConfigDepth(config){for(var context=config.viewDecl.$context,count=0;++count&&context.parent;)context=context.parent;return count}var depthCompare=Object(hof.e)((function(depthFn,posNeg,left,right){return posNeg*(depthFn(left)-depthFn(right))})),uiViewTuples=this._uiViews.sort(depthCompare((function uiViewDepth(uiView){var stateDepth=function(context){return context&&context.parent?stateDepth(context.parent)+1:1};return 1e4*uiView.fqn.split(".").length+stateDepth(uiView.creationContext)}),1)).map((function(uiView){var matchingConfigs=_this._viewConfigs.filter(ViewService.matches(uiViewsByFqn,uiView));return matchingConfigs.length>1&&matchingConfigs.sort(depthCompare(viewConfigDepth,-1)),{uiView:uiView,viewConfig:matchingConfigs[0]}})),matchedViewConfigs=uiViewTuples.map((function(tuple){return tuple.viewConfig})),unmatchedConfigTuples=this._viewConfigs.filter((function(config){return!Object(common.z)(matchedViewConfigs,config)})).map((function(viewConfig){return{uiView:void 0,viewConfig:viewConfig}}));uiViewTuples.forEach((function(tuple){-1!==_this._uiViews.indexOf(tuple.uiView)&&tuple.uiView.configUpdated(tuple.viewConfig)}));var allTuples=uiViewTuples.concat(unmatchedConfigTuples);this._listeners.forEach((function(cb){return cb(allTuples)})),trace.traceViewSync(allTuples)},ViewService.prototype.registerUIView=function(uiView){trace.traceViewServiceUIViewEvent("-> Registering",uiView);var uiViews=this._uiViews;return uiViews.filter((function(uiv){return uiv.fqn===uiView.fqn&&uiv.$type===uiView.$type})).length&&trace.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",uiView),uiViews.push(uiView),this.sync(),function(){-1!==uiViews.indexOf(uiView)?(trace.traceViewServiceUIViewEvent("<- Deregistering",uiView),Object(common.L)(uiViews)(uiView)):trace.traceViewServiceUIViewEvent("Tried removing non-registered uiView",uiView)}},ViewService.prototype.available=function(){return this._uiViews.map(Object(hof.n)("fqn"))},ViewService.prototype.active=function(){return this._uiViews.filter(Object(hof.n)("$config")).map(Object(hof.n)("name"))},ViewService.matches=function(uiViewsByFqn,uiView){return function(viewConfig){if(uiView.$type!==viewConfig.viewDecl.$type)return!1;var vc=viewConfig.viewDecl,vcSegments=vc.$uiViewName.split("."),uivSegments=uiView.fqn.split(".");if(!Object(common.q)(vcSegments,uivSegments.slice(0-vcSegments.length)))return!1;var negOffset=1-vcSegments.length||void 0,fqnToFirstSegment=uivSegments.slice(0,negOffset).join("."),uiViewContext=uiViewsByFqn[fqnToFirstSegment].creationContext;return vc.$uiViewContextAnchor===(uiViewContext&&uiViewContext.name)}},ViewService}(),globals_UIRouterGlobals=function(){function UIRouterGlobals(){this.params=new stateParams_StateParams,this.lastStartedTransitionId=-1,this.transitionHistory=new queue_Queue([],1),this.successfulTransitions=new queue_Queue([],1)}return UIRouterGlobals.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},UIRouterGlobals}();function getHandlerFn(handler){if(!(Object(predicates.d)(handler)||Object(predicates.l)(handler)||Object(hof.h)(targetState_TargetState)(handler)||targetState_TargetState.isDef(handler)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return Object(predicates.d)(handler)?handler:Object(hof.p)(handler)}defaultRuleSortFn=function(a,b){var cmp=function(a,b){return(b.priority||0)-(a.priority||0)}(a,b);return 0!==cmp||0!==(cmp=function(a,b){var weights={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1};return(weights[a.type]||0)-(weights[b.type]||0)}(a,b))||0!==(cmp=function(a,b){return a.urlMatcher&&b.urlMatcher?urlMatcher_UrlMatcher.compare(a.urlMatcher,b.urlMatcher):0}(a,b))?cmp:function(a,b){var useMatchPriority={STATE:!0,URLMATCHER:!0};return useMatchPriority[a.type]&&useMatchPriority[b.type]?0:(a.$id||0)-(b.$id||0)}(a,b)};var urlRules_UrlRules=function(){function UrlRules(router){this.router=router,this._sortFn=defaultRuleSortFn,this._rules=[],this._id=0,this.urlRuleFactory=new urlRule_UrlRuleFactory(router)}return UrlRules.prototype.dispose=function(router){this._rules=[],delete this._otherwiseFn},UrlRules.prototype.initial=function(handler){var handlerFn=getHandlerFn(handler);this.rule(this.urlRuleFactory.create((function(urlParts,router){return 0===router.globals.transitionHistory.size()&&!!/^\/?$/.exec(urlParts.path)}),handlerFn))},UrlRules.prototype.otherwise=function(handler){var handlerFn=getHandlerFn(handler);this._otherwiseFn=this.urlRuleFactory.create(Object(hof.p)(!0),handlerFn),this._sorted=!1},UrlRules.prototype.removeRule=function(rule){Object(common.L)(this._rules,rule)},UrlRules.prototype.rule=function(rule){var _this=this;if(!urlRule_UrlRuleFactory.isUrlRule(rule))throw new Error("invalid rule");return rule.$id=this._id++,rule.priority=rule.priority||0,this._rules.push(rule),this._sorted=!1,function(){return _this.removeRule(rule)}},UrlRules.prototype.rules=function(){return this.ensureSorted(),this._rules.concat(this._otherwiseFn?[this._otherwiseFn]:[])},UrlRules.prototype.sort=function(compareFn){for(var sorted=this.stableSort(this._rules,this._sortFn=compareFn||this._sortFn),group=0,i=0;i<sorted.length;i++)sorted[i]._group=group,i<sorted.length-1&&0!==this._sortFn(sorted[i],sorted[i+1])&&group++;this._rules=sorted,this._sorted=!0},UrlRules.prototype.ensureSorted=function(){this._sorted||this.sort()},UrlRules.prototype.stableSort=function(arr,compareFn){var arrOfWrapper=arr.map((function(elem,idx){return{elem:elem,idx:idx}}));return arrOfWrapper.sort((function(wrapperA,wrapperB){var cmpDiff=compareFn(wrapperA.elem,wrapperB.elem);return 0===cmpDiff?wrapperA.idx-wrapperB.idx:cmpDiff})),arrOfWrapper.map((function(wrapper){return wrapper.elem}))},UrlRules.prototype.when=function(matcher,handler,options){var rule=this.urlRuleFactory.create(matcher,handler);return Object(predicates.c)(options&&options.priority)&&(rule.priority=options.priority),this.rule(rule),rule},UrlRules}(),urlConfig_UrlConfig=function(){function UrlConfig(router){var _this=this;this.router=router,this.paramTypes=new paramTypes_ParamTypes,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this.dispose=function(){return _this.paramTypes.dispose()},this.baseHref=function(){return _this.router.locationConfig.baseHref()},this.hashPrefix=function(newprefix){return _this.router.locationConfig.hashPrefix(newprefix)},this.host=function(){return _this.router.locationConfig.host()},this.html5Mode=function(){return _this.router.locationConfig.html5Mode()},this.port=function(){return _this.router.locationConfig.port()},this.protocol=function(){return _this.router.locationConfig.protocol()}}return UrlConfig.prototype.caseInsensitive=function(value){return this._isCaseInsensitive=Object(predicates.c)(value)?value:this._isCaseInsensitive},UrlConfig.prototype.defaultSquashPolicy=function(value){if(Object(predicates.c)(value)&&!0!==value&&!1!==value&&!Object(predicates.l)(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=Object(predicates.c)(value)?value:this._defaultSquashPolicy},UrlConfig.prototype.strictMode=function(value){return this._isStrictMode=Object(predicates.c)(value)?value:this._isStrictMode},UrlConfig.prototype.type=function(name,definition,definitionFn){var type=this.paramTypes.type(name,definition,definitionFn);return Object(predicates.c)(definition)?this:type},UrlConfig}(),urlService_UrlService=function(){function UrlService(router){var _this=this;this.router=router,this.interceptDeferred=!1,this.rules=new urlRules_UrlRules(this.router),this.config=new urlConfig_UrlConfig(this.router),this.url=function(newurl,replace,state){return _this.router.locationService.url(newurl,replace,state)},this.path=function(){return _this.router.locationService.path()},this.search=function(){return _this.router.locationService.search()},this.hash=function(){return _this.router.locationService.hash()},this.onChange=function(callback){return _this.router.locationService.onChange(callback)}}return UrlService.prototype.dispose=function(){this.listen(!1),this.rules.dispose()},UrlService.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},UrlService.prototype.sync=function(evt){if(!evt||!evt.defaultPrevented){var _a=this.router,urlService=_a.urlService,stateService=_a.stateService,url={path:urlService.path(),search:urlService.search(),hash:urlService.hash()},best=this.match(url);Object(hof.l)([[predicates.l,function(newurl){return urlService.url(newurl,!0)}],[targetState_TargetState.isDef,function(def){return stateService.go(def.state,def.params,def.options)}],[Object(hof.h)(targetState_TargetState),function(target){return stateService.go(target.state(),target.params(),target.options())}]])(best&&best.rule.handler(best.match,url,this.router))}},UrlService.prototype.listen=function(enabled){var _this=this;if(!1!==enabled)return this._stopListeningFn=this._stopListeningFn||this.router.urlService.onChange((function(evt){return _this.sync(evt)}));this._stopListeningFn&&this._stopListeningFn(),delete this._stopListeningFn},UrlService.prototype.deferIntercept=function(defer){void 0===defer&&(defer=!0),this.interceptDeferred=defer},UrlService.prototype.match=function(url){var _this=this;url=Object(common.r)({path:"",search:{},hash:""},url);for(var best,rule,match,rules=this.rules.rules(),i=0;i<rules.length&&(!best||best.rule._group===rules[i]._group);i++){var current=(rule=rules[i],match=void 0,(match=rule.match(url,_this.router))&&{match:match,rule:rule,weight:rule.matchPriority(match)});best=!best||current&&current.weight>best.weight?current:best}return best},UrlService}(),_routerInstance=0,locationServiceStub=Object(coreservices.a)("LocationServices",["url","path","search","hash","onChange"]),locationConfigStub=Object(coreservices.a)("LocationConfig",["port","protocol","host","baseHref","html5Mode","hashPrefix"]),router_UIRouter=function(){function UIRouter(locationService,locationConfig){void 0===locationService&&(locationService=locationServiceStub),void 0===locationConfig&&(locationConfig=locationConfigStub),this.locationService=locationService,this.locationConfig=locationConfig,this.$id=_routerInstance++,this._disposed=!1,this._disposables=[],this.trace=trace,this.viewService=new view_ViewService(this),this.globals=new globals_UIRouterGlobals,this.transitionService=new transitionService_TransitionService(this),this.urlMatcherFactory=new urlMatcherFactory_UrlMatcherFactory(this),this.urlRouter=new urlRouter_UrlRouter(this),this.urlService=new urlService_UrlService(this),this.stateRegistry=new stateRegistry_StateRegistry(this),this.stateService=new stateService_StateService(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlService),this.disposable(locationService),this.disposable(locationConfig)}return UIRouter.prototype.disposable=function(disposable){this._disposables.push(disposable)},UIRouter.prototype.dispose=function(disposable){var _this=this;disposable&&Object(predicates.d)(disposable.dispose)?disposable.dispose(this):(this._disposed=!0,this._disposables.slice().forEach((function(d){try{"function"==typeof d.dispose&&d.dispose(_this),Object(common.L)(_this._disposables,d)}catch(ignored){}})))},UIRouter.prototype.plugin=function(plugin,options){void 0===options&&(options={});var pluginInstance=new plugin(this,options);if(!pluginInstance.name)throw new Error("Required property `name` missing on plugin: "+pluginInstance);return this._disposables.push(pluginInstance),this._plugins[pluginInstance.name]=pluginInstance},UIRouter.prototype.getPlugin=function(pluginName){return pluginName?this._plugins[pluginName]:Object(common.U)(this._plugins)},UIRouter}();function addCoreResolvables(trans){trans.addResolvable(resolvable_Resolvable.fromData(router_UIRouter,trans.router),""),trans.addResolvable(resolvable_Resolvable.fromData(transition_Transition,trans),""),trans.addResolvable(resolvable_Resolvable.fromData("$transition$",trans),""),trans.addResolvable(resolvable_Resolvable.fromData("$stateParams",trans.params()),""),trans.entering().forEach((function(state){trans.addResolvable(resolvable_Resolvable.fromData("$state$",state),state)}))}var TRANSITION_TOKENS=["$transition$",transition_Transition],isTransition=Object(common.z)(TRANSITION_TOKENS),treeChangesCleanup=function(trans){var nodes=Object(common.U)(trans.treeChanges()).reduce(common.T,[]).reduce(common.R,[]),replaceTransitionWithNull=function(r){return isTransition(r.token)?resolvable_Resolvable.fromData(r.token,null):r};nodes.forEach((function(node){node.resolvables=node.resolvables.map(replaceTransitionWithNull)}))},redirectToHook=function(trans){var redirect=trans.to().redirectTo;if(redirect){var $state=trans.router.stateService;return Object(predicates.d)(redirect)?coreservices.b.$q.when(redirect(trans)).then(handleResult):handleResult(redirect)}function handleResult(result){if(result)return result instanceof targetState_TargetState?result:Object(predicates.l)(result)?$state.target(result,trans.params(),trans.options()):result.state||result.params?$state.target(result.state||trans.to(),result.params||trans.params(),trans.options()):void 0}};function makeEnterExitRetainHook(hookName){return function(transition,state){return(0,state.$$state()[hookName])(transition,state)}}var onExitHook=makeEnterExitRetainHook("onExit"),onRetainHook=makeEnterExitRetainHook("onRetain"),onEnterHook=makeEnterExitRetainHook("onEnter"),eagerResolvePath=function(trans){return new resolveContext_ResolveContext(trans.treeChanges().to).resolvePath("EAGER",trans).then(common.E)},lazyResolveState=function(trans,state){return new resolveContext_ResolveContext(trans.treeChanges().to).subContext(state.$$state()).resolvePath("LAZY",trans).then(common.E)},resolveRemaining=function(trans){return new resolveContext_ResolveContext(trans.treeChanges().to).resolvePath("LAZY",trans).then(common.E)},loadEnteringViews=function(transition){var $q=coreservices.b.$q,enteringViews=transition.views("entering");if(enteringViews.length)return $q.all(enteringViews.map((function(view){return $q.when(view.load())}))).then(common.E)},activateViews=function(transition){var enteringViews=transition.views("entering"),exitingViews=transition.views("exiting");if(enteringViews.length||exitingViews.length){var $view=transition.router.viewService;exitingViews.forEach((function(vc){return $view.deactivateViewConfig(vc)})),enteringViews.forEach((function(vc){return $view.activateViewConfig(vc)})),$view.sync()}},updateGlobalState=function(trans){var globals=trans.router.globals,clearCurrentTransition=function(){globals.transition===trans&&(globals.transition=null)};trans.onSuccess({},(function(){globals.successfulTransitions.enqueue(trans),globals.$current=trans.$to(),globals.current=globals.$current.self,Object(common.m)(trans.params(),globals.params)}),{priority:1e4}),trans.promise.then(clearCurrentTransition,clearCurrentTransition)},updateUrl=function(transition){var options=transition.options(),$state=transition.router.stateService,$urlRouter=transition.router.urlRouter;if("url"!==options.source&&options.location&&$state.$current.navigable){var urlOptions={replace:"replace"===options.location};$urlRouter.push($state.$current.navigable.url,$state.params,urlOptions)}$urlRouter.update(!0)},lazyLoadHook=function(transition){var router=transition.router;var promises=transition.entering().filter((function(state){return!!state.$$state().lazyLoad})).map((function(state){return lazyLoadState(transition,state)}));return coreservices.b.$q.all(promises).then((function retryTransition(){if("url"!==transition.originalTransition().options().source){var orig=transition.targetState();return router.stateService.target(orig.identifier(),orig.params(),orig.options())}var $url=router.urlService,result=$url.match($url.parts()),rule=result&&result.rule;if(rule&&"STATE"===rule.type){var state=rule.state,params=result.match;return router.stateService.target(state,params,transition.options())}router.urlService.sync()}))};function lazyLoadState(transition,state){var lazyLoadFn=state.$$state().lazyLoad,promise=lazyLoadFn._promise;if(!promise){promise=lazyLoadFn._promise=coreservices.b.$q.when(lazyLoadFn(transition,state)).then((function updateStateRegistry(result){result&&Array.isArray(result.states)&&result.states.forEach((function(_state){return transition.router.stateRegistry.register(_state)}));return result})).then((function(result){return delete state.lazyLoad,delete state.$$state().lazyLoad,delete lazyLoadFn._promise,result}),(function(err){return delete lazyLoadFn._promise,coreservices.b.$q.reject(err)}))}return promise}var transitionEventType_TransitionEventType=function TransitionEventType(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous){void 0===reverseSort&&(reverseSort=!1),void 0===getResultHandler&&(getResultHandler=transitionHook_TransitionHook.HANDLE_RESULT),void 0===getErrorHandler&&(getErrorHandler=transitionHook_TransitionHook.REJECT_ERROR),void 0===synchronous&&(synchronous=!1),this.name=name,this.hookPhase=hookPhase,this.hookOrder=hookOrder,this.criteriaMatchPath=criteriaMatchPath,this.reverseSort=reverseSort,this.getResultHandler=getResultHandler,this.getErrorHandler=getErrorHandler,this.synchronous=synchronous};function ignoredHook(trans){var ignoredReason=trans._ignoredReason();if(ignoredReason){trace.traceTransitionIgnored(trans);var pending=trans.router.globals.transition;return"SameAsCurrent"===ignoredReason&&pending&&pending.abort(),rejectFactory_Rejection.ignored().toPromise()}}function invalidTransitionHook(trans){if(!trans.valid())throw new Error(trans.error().toString())}var defaultTransOpts={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,supercede:!0,custom:{},current:function(){return null},source:"unknown"},transitionService_TransitionService=function(){function TransitionService(_router){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=_router,this.$view=_router.viewService,this._deregisterHookFns={},this._pluginapi=Object(common.n)(Object(hof.p)(this),{},Object(hof.p)(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks(),_router.globals.successfulTransitions.onEvict(treeChangesCleanup)}return TransitionService.prototype.onCreate=function(criteria,callback,options){},TransitionService.prototype.onBefore=function(criteria,callback,options){},TransitionService.prototype.onStart=function(criteria,callback,options){},TransitionService.prototype.onExit=function(criteria,callback,options){},TransitionService.prototype.onRetain=function(criteria,callback,options){},TransitionService.prototype.onEnter=function(criteria,callback,options){},TransitionService.prototype.onFinish=function(criteria,callback,options){},TransitionService.prototype.onSuccess=function(criteria,callback,options){},TransitionService.prototype.onError=function(criteria,callback,options){},TransitionService.prototype.dispose=function(router){Object(common.U)(this._registeredHooks).forEach((function(hooksArray){return hooksArray.forEach((function(hook){hook._deregistered=!0,Object(common.L)(hooksArray,hook)}))}))},TransitionService.prototype.create=function(fromPath,targetState){return new transition_Transition(fromPath,targetState,this._router)},TransitionService.prototype._defineCoreEvents=function(){var Phase=TransitionHookPhase,TH=transitionHook_TransitionHook,paths=this._criteriaPaths;this._defineEvent("onCreate",Phase.CREATE,0,paths.to,!1,TH.LOG_REJECTED_RESULT,TH.THROW_ERROR,!0),this._defineEvent("onBefore",Phase.BEFORE,0,paths.to),this._defineEvent("onStart",Phase.RUN,0,paths.to),this._defineEvent("onExit",Phase.RUN,100,paths.exiting,!0),this._defineEvent("onRetain",Phase.RUN,200,paths.retained),this._defineEvent("onEnter",Phase.RUN,300,paths.entering),this._defineEvent("onFinish",Phase.RUN,400,paths.to),this._defineEvent("onSuccess",Phase.SUCCESS,0,paths.to,!1,TH.LOG_REJECTED_RESULT,TH.LOG_ERROR,!0),this._defineEvent("onError",Phase.ERROR,0,paths.to,!1,TH.LOG_REJECTED_RESULT,TH.LOG_ERROR,!0)},TransitionService.prototype._defineCorePaths=function(){var STATE=TransitionHookScope.STATE,TRANSITION=TransitionHookScope.TRANSITION;this._definePathType("to",TRANSITION),this._definePathType("from",TRANSITION),this._definePathType("exiting",STATE),this._definePathType("retained",STATE),this._definePathType("entering",STATE)},TransitionService.prototype._defineEvent=function(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous){void 0===reverseSort&&(reverseSort=!1),void 0===getResultHandler&&(getResultHandler=transitionHook_TransitionHook.HANDLE_RESULT),void 0===getErrorHandler&&(getErrorHandler=transitionHook_TransitionHook.REJECT_ERROR),void 0===synchronous&&(synchronous=!1);var eventType=new transitionEventType_TransitionEventType(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous);this._eventTypes.push(eventType),makeEvent(this,this,eventType)},TransitionService.prototype._getEvents=function(phase){return(Object(predicates.c)(phase)?this._eventTypes.filter((function(type){return type.hookPhase===phase})):this._eventTypes.slice()).sort((function(l,r){var cmpByPhase=l.hookPhase-r.hookPhase;return 0===cmpByPhase?l.hookOrder-r.hookOrder:cmpByPhase}))},TransitionService.prototype._definePathType=function(name,hookScope){this._criteriaPaths[name]={name:name,scope:hookScope}},TransitionService.prototype._getPathTypes=function(){return this._criteriaPaths},TransitionService.prototype.getHooks=function(hookName){return this._registeredHooks[hookName]},TransitionService.prototype._registerCoreTransitionHooks=function(){var fns=this._deregisterHookFns;fns.addCoreResolves=this.onCreate({},addCoreResolvables),fns.ignored=function(transitionService){return transitionService.onBefore({},ignoredHook,{priority:-9999})}(this),fns.invalid=function(transitionService){return transitionService.onBefore({},invalidTransitionHook,{priority:-1e4})}(this),fns.redirectTo=function(transitionService){return transitionService.onStart({to:function(state){return!!state.redirectTo}},redirectToHook)}(this),fns.onExit=function(transitionService){return transitionService.onExit({exiting:function(state){return!!state.onExit}},onExitHook)}(this),fns.onRetain=function(transitionService){return transitionService.onRetain({retained:function(state){return!!state.onRetain}},onRetainHook)}(this),fns.onEnter=function(transitionService){return transitionService.onEnter({entering:function(state){return!!state.onEnter}},onEnterHook)}(this),fns.eagerResolve=function(transitionService){return transitionService.onStart({},eagerResolvePath,{priority:1e3})}(this),fns.lazyResolve=function(transitionService){return transitionService.onEnter({entering:Object(hof.p)(!0)},lazyResolveState,{priority:1e3})}(this),fns.resolveAll=function(transitionService){return transitionService.onFinish({},resolveRemaining,{priority:1e3})}(this),fns.loadViews=function(transitionService){return transitionService.onFinish({},loadEnteringViews)}(this),fns.activateViews=function(transitionService){return transitionService.onSuccess({},activateViews)}(this),fns.updateGlobals=function(transitionService){return transitionService.onCreate({},updateGlobalState)}(this),fns.updateUrl=function(transitionService){return transitionService.onSuccess({},updateUrl,{priority:9999})}(this),fns.lazyLoad=function(transitionService){return transitionService.onBefore({entering:function(state){return!!state.lazyLoad}},lazyLoadHook)}(this)},TransitionService}(),stateService_StateService=function(){function StateService(router){this.router=router,this.invalidCallbacks=[],this._defaultErrorHandler=function $defaultErrorHandler($error$){$error$ instanceof Error&&$error$.stack?(console.error($error$),console.error($error$.stack)):$error$ instanceof rejectFactory_Rejection?(console.error($error$.toString()),$error$.detail&&$error$.detail.stack&&console.error($error$.detail.stack)):console.error($error$)};var boundFns=Object.keys(StateService.prototype).filter(Object(hof.i)(Object(common.z)(["current","$current","params","transition"])));Object(common.n)(Object(hof.p)(StateService.prototype),this,Object(hof.p)(this),boundFns)}return Object.defineProperty(StateService.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(StateService.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(StateService.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(StateService.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),StateService.prototype.dispose=function(){this.defaultErrorHandler(common.E),this.invalidCallbacks=[]},StateService.prototype._handleInvalidTargetState=function(fromPath,toState){var _this=this,fromState=pathUtils_PathUtils.makeTargetState(this.router.stateRegistry,fromPath),globals=this.router.globals,latestThing=function(){return globals.transitionHistory.peekTail()},latest=latestThing(),callbackQueue=new queue_Queue(this.invalidCallbacks.slice()),injector=new resolveContext_ResolveContext(fromPath).injector(),checkForRedirect=function(result){if(result instanceof targetState_TargetState){var target=result;return(target=_this.target(target.identifier(),target.params(),target.options())).valid()?latestThing()!==latest?rejectFactory_Rejection.superseded().toPromise():_this.transitionTo(target.identifier(),target.params(),target.options()):rejectFactory_Rejection.invalid(target.error()).toPromise()}};return function invokeNextCallback(){var nextCallback=callbackQueue.dequeue();return void 0===nextCallback?rejectFactory_Rejection.invalid(toState.error()).toPromise():coreservices.b.$q.when(nextCallback(toState,fromState,injector)).then(checkForRedirect).then((function(result){return result||invokeNextCallback()}))}()},StateService.prototype.onInvalid=function(callback){return this.invalidCallbacks.push(callback),function deregisterListener(){Object(common.L)(this.invalidCallbacks)(callback)}.bind(this)},StateService.prototype.reload=function(reloadState){return this.transitionTo(this.current,this.params,{reload:!Object(predicates.c)(reloadState)||reloadState,inherit:!1,notify:!1})},StateService.prototype.go=function(to,params,options){var defautGoOpts={relative:this.$current,inherit:!0},transOpts=Object(common.o)(options,defautGoOpts,defaultTransOpts);return this.transitionTo(to,params,transOpts)},StateService.prototype.target=function(identifier,params,options){if(void 0===options&&(options={}),Object(predicates.i)(options.reload)&&!options.reload.name)throw new Error("Invalid reload state object");var reg=this.router.stateRegistry;if(options.reloadState=!0===options.reload?reg.root():reg.matcher.find(options.reload,options.relative),options.reload&&!options.reloadState)throw new Error("No such reload state '"+(Object(predicates.l)(options.reload)?options.reload:options.reload.name)+"'");return new targetState_TargetState(this.router.stateRegistry,identifier,params,options)},StateService.prototype.getCurrentPath=function(){var _this=this,latestSuccess=this.router.globals.successfulTransitions.peekTail();return latestSuccess?latestSuccess.treeChanges().to:[new pathNode_PathNode(_this.router.stateRegistry.root())]},StateService.prototype.transitionTo=function(to,toParams,options){var _this=this;void 0===toParams&&(toParams={}),void 0===options&&(options={});var router=this.router,globals=router.globals;options=Object(common.o)(options,defaultTransOpts);var getCurrent=function(){return globals.transition};options=Object(common.r)(options,{current:getCurrent});var ref=this.target(to,toParams,options),currentPath=this.getCurrentPath();if(!ref.exists())return this._handleInvalidTargetState(currentPath,ref);if(!ref.valid())return Object(common.O)(ref.error());if(!1===options.supercede&&getCurrent())return rejectFactory_Rejection.ignored("Another transition is in progress and supercede has been set to false in TransitionOptions for the transition. So the transition was ignored in favour of the existing one in progress.").toPromise();var rejectedTransitionHandler=function(trans){return function(error){if(error instanceof rejectFactory_Rejection){var isLatest=router.globals.lastStartedTransitionId<=trans.$id;if(error.type===RejectType.IGNORED)return isLatest&&router.urlRouter.update(),coreservices.b.$q.when(globals.current);var detail=error.detail;if(error.type===RejectType.SUPERSEDED&&error.redirected&&detail instanceof targetState_TargetState){var redirect=trans.redirect(detail);return redirect.run().catch(rejectedTransitionHandler(redirect))}if(error.type===RejectType.ABORTED)return isLatest&&router.urlRouter.update(),coreservices.b.$q.reject(error)}return _this.defaultErrorHandler()(error),coreservices.b.$q.reject(error)}},transition=this.router.transitionService.create(currentPath,ref),transitionToPromise=transition.run().catch(rejectedTransitionHandler(transition));return Object(common.N)(transitionToPromise),Object(common.r)(transitionToPromise,{transition:transition})},StateService.prototype.is=function(stateOrName,params,options){options=Object(common.o)(options,{relative:this.$current});var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(Object(predicates.c)(state)){if(this.$current!==state)return!1;if(!params)return!0;var schema=state.parameters({inherit:!0,matchingKeys:params});return param_Param.equals(schema,param_Param.values(schema,params),this.params)}},StateService.prototype.includes=function(stateOrName,params,options){options=Object(common.o)(options,{relative:this.$current});var glob=Object(predicates.l)(stateOrName)&&Glob.fromString(stateOrName);if(glob){if(!glob.matches(this.$current.name))return!1;stateOrName=this.$current.name}var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative),include=this.$current.includes;if(Object(predicates.c)(state)){if(!Object(predicates.c)(include[state.name]))return!1;if(!params)return!0;var schema=state.parameters({inherit:!0,matchingKeys:params});return param_Param.equals(schema,param_Param.values(schema,params),this.params)}},StateService.prototype.href=function(stateOrName,params,options){var defaultHrefOpts={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};options=Object(common.o)(options,defaultHrefOpts),params=params||{};var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(!Object(predicates.c)(state))return null;options.inherit&&(params=this.params.$inherit(params,this.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&void 0!==nav.url&&null!==nav.url?this.router.urlRouter.href(nav.url,params,{absolute:options.absolute}):null},StateService.prototype.defaultErrorHandler=function(handler){return this._defaultErrorHandler=handler||this._defaultErrorHandler},StateService.prototype.get=function(stateOrName,base){var reg=this.router.stateRegistry;return 0===arguments.length?reg.get():reg.get(stateOrName,base||this.$current)},StateService.prototype.lazyLoad=function(stateOrName,transition){var state=this.get(stateOrName);if(!state||!state.lazyLoad)throw new Error("Can not lazy load "+stateOrName);var currentPath=this.getCurrentPath(),target=pathUtils_PathUtils.makeTargetState(this.router.stateRegistry,currentPath);return lazyLoadState(transition=transition||this.router.transitionService.create(currentPath,target),state)},StateService}(),q_$q={when:function(val){return new Promise((function(resolve,reject){return resolve(val)}))},reject:function(val){return new Promise((function(resolve,reject){reject(val)}))},defer:function(){var deferred={};return deferred.promise=new Promise((function(resolve,reject){deferred.resolve=resolve,deferred.reject=reject})),deferred},all:function(promises){if(Object(predicates.a)(promises))return Promise.all(promises);if(Object(predicates.i)(promises)){var chain=Object.keys(promises).map((function(key){return promises[key].then((function(val){return{key:key,val:val}}))}));return q_$q.all(chain).then((function(values){return values.reduce((function(acc,tuple){return acc[tuple.key]=tuple.val,acc}),{})}))}}},injector_globals={},STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ARGUMENT_NAMES=/([^\s,]+)/g,injector_$injector={get:function(name){return injector_globals[name]},has:function(name){return null!=injector_$injector.get(name)},invoke:function(fn,context,locals){var all=Object(common.r)({},injector_globals,locals||{}),params=injector_$injector.annotate(fn),ensureExist=Object(common.l)((function(key){return all.hasOwnProperty(key)}),(function(key){return"DI can't find injectable: '"+key+"'"})),args=params.filter(ensureExist).map((function(x){return all[x]}));return Object(predicates.d)(fn)?fn.apply(context,args):fn.slice(-1)[0].apply(context,args)},annotate:function(fn){if(!Object(predicates.e)(fn))throw new Error("Not an injectable function: "+fn);if(fn&&fn.$inject)return fn.$inject;if(Object(predicates.a)(fn))return fn.slice(0,-1);var fnStr=fn.toString().replace(STRIP_COMMENTS,"");return fnStr.slice(fnStr.indexOf("(")+1,fnStr.indexOf(")")).match(ARGUMENT_NAMES)||[]}},keyValsToObjectR=function(accum,_a){var key=_a[0],val=_a[1];return accum.hasOwnProperty(key)?Object(predicates.a)(accum[key])?accum[key].push(val):accum[key]=[accum[key],val]:accum[key]=val,accum},getParams=function(queryString){return queryString.split("&").filter(common.y).map(splitEqual).reduce(keyValsToObjectR,{})};function utils_parseUrl(url){var orEmptyString=function(x){return x||""},_a=splitHash(url).map(orEmptyString),beforehash=_a[0],hash=_a[1],_b=splitQuery(beforehash).map(orEmptyString);return{path:_b[0],search:_b[1],hash:hash,url:url}}var buildUrl=function(loc){var path=loc.path(),searchObject=loc.search(),hash=loc.hash(),search=Object.keys(searchObject).map((function(key){var param=searchObject[key];return(Object(predicates.a)(param)?param:[param]).map((function(val){return key+"="+val}))})).reduce(common.T,[]).join("&");return path+(search?"?"+search:"")+(hash?"#"+hash:"")};function locationPluginFactory(name,isHtml5,serviceClass,configurationClass){return function(uiRouter){var service=uiRouter.locationService=new serviceClass(uiRouter),configuration=uiRouter.locationConfig=new configurationClass(uiRouter,isHtml5);return{name:name,service:service,configuration:configuration,dispose:function dispose(router){router.dispose(service),router.dispose(configuration)}}}}var extendStatics,baseLocationService_BaseLocationServices=function(){function BaseLocationServices(router,fireAfterUpdate){var _this=this;this.fireAfterUpdate=fireAfterUpdate,this._listeners=[],this._listener=function(evt){return _this._listeners.forEach((function(cb){return cb(evt)}))},this.hash=function(){return utils_parseUrl(_this._get()).hash},this.path=function(){return utils_parseUrl(_this._get()).path},this.search=function(){return getParams(utils_parseUrl(_this._get()).search)},this._location=common.M.location,this._history=common.M.history}return BaseLocationServices.prototype.url=function(url,replace){return void 0===replace&&(replace=!0),Object(predicates.c)(url)&&url!==this._get()&&(this._set(null,null,url,replace),this.fireAfterUpdate&&this._listeners.forEach((function(cb){return cb({url:url})}))),buildUrl(this)},BaseLocationServices.prototype.onChange=function(cb){var _this=this;return this._listeners.push(cb),function(){return Object(common.L)(_this._listeners,cb)}},BaseLocationServices.prototype.dispose=function(router){Object(common.p)(this._listeners)},BaseLocationServices}(),__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),hashLocationService_HashLocationService=function(_super){function HashLocationService(router){var _this=_super.call(this,router,!1)||this;return common.M.addEventListener("hashchange",_this._listener,!1),_this}return __extends(HashLocationService,_super),HashLocationService.prototype._get=function(){return trimHashVal(this._location.hash)},HashLocationService.prototype._set=function(state,title,url,replace){this._location.hash=url},HashLocationService.prototype.dispose=function(router){_super.prototype.dispose.call(this,router),common.M.removeEventListener("hashchange",this._listener)},HashLocationService}(baseLocationService_BaseLocationServices),memoryLocationService_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MemoryLocationService=function(_super){function MemoryLocationService(router){return _super.call(this,router,!0)||this}return memoryLocationService_extends(MemoryLocationService,_super),MemoryLocationService.prototype._get=function(){return this._url},MemoryLocationService.prototype._set=function(state,title,url,replace){this._url=url},MemoryLocationService}(baseLocationService_BaseLocationServices),pushStateLocationService_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),pushStateLocationService_PushStateLocationService=function(_super){function PushStateLocationService(router){var _this=_super.call(this,router,!0)||this;return _this._config=router.urlService.config,common.M.addEventListener("popstate",_this._listener,!1),_this}return pushStateLocationService_extends(PushStateLocationService,_super),PushStateLocationService.prototype._getBasePrefix=function(){return stripLastPathElement(this._config.baseHref())},PushStateLocationService.prototype._get=function(){var _a=this._location,pathname=_a.pathname,hash=_a.hash,search=_a.search;search=splitQuery(search)[1],hash=splitHash(hash)[1];var basePrefix=this._getBasePrefix(),exactBaseHrefMatch=pathname===this._config.baseHref(),startsWithBase=pathname.substr(0,basePrefix.length)===basePrefix;return(pathname=exactBaseHrefMatch?"/":startsWithBase?pathname.substring(basePrefix.length):pathname)+(search?"?"+search:"")+(hash?"#"+hash:"")},PushStateLocationService.prototype._set=function(state,title,url,replace){var basePrefix=this._getBasePrefix(),slash=url&&"/"!==url[0]?"/":"",fullUrl=""===url||"/"===url?this._config.baseHref():basePrefix+slash+url;replace?this._history.replaceState(state,title,fullUrl):this._history.pushState(state,title,fullUrl)},PushStateLocationService.prototype.dispose=function(router){_super.prototype.dispose.call(this,router),common.M.removeEventListener("popstate",this._listener)},PushStateLocationService}(baseLocationService_BaseLocationServices),memoryLocationConfig_MemoryLocationConfig=function MemoryLocationConfig(){var _this=this;this.dispose=common.E,this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return _this._port},this.protocol=function(){return _this._protocol},this.host=function(){return _this._host},this.baseHref=function(){return _this._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(newval){return Object(predicates.c)(newval)?_this._hashPrefix=newval:_this._hashPrefix}},browserLocationConfig_BrowserLocationConfig=function(){function BrowserLocationConfig(router,_isHtml5){void 0===_isHtml5&&(_isHtml5=!1),this._isHtml5=_isHtml5,this._baseHref=void 0,this._hashPrefix=""}return BrowserLocationConfig.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},BrowserLocationConfig.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},BrowserLocationConfig.prototype.host=function(){return location.hostname},BrowserLocationConfig.prototype.html5Mode=function(){return this._isHtml5},BrowserLocationConfig.prototype.hashPrefix=function(newprefix){return Object(predicates.c)(newprefix)?this._hashPrefix=newprefix:this._hashPrefix},BrowserLocationConfig.prototype.baseHref=function(href){return Object(predicates.c)(href)&&(this._baseHref=href),Object(predicates.m)(this._baseHref)&&(this._baseHref=this.getBaseHref()),this._baseHref},BrowserLocationConfig.prototype.getBaseHref=function(){var baseTag=document.getElementsByTagName("base")[0];return baseTag&&baseTag.href?baseTag.href.replace(/^([^/:]*:)?\/\/[^/]*/,""):this._isHtml5?"/":location.pathname||"/"},BrowserLocationConfig.prototype.dispose=function(){},BrowserLocationConfig}();function servicesPlugin(router){return coreservices.b.$injector=injector_$injector,coreservices.b.$q=q_$q,{name:"vanilla.services",$q:q_$q,$injector:injector_$injector,dispose:function(){return null}}}var hashLocationPlugin=locationPluginFactory("vanilla.hashBangLocation",!1,hashLocationService_HashLocationService,browserLocationConfig_BrowserLocationConfig),pushStateLocationPlugin=locationPluginFactory("vanilla.pushStateLocation",!0,pushStateLocationService_PushStateLocationService,browserLocationConfig_BrowserLocationConfig),memoryLocationPlugin=locationPluginFactory("vanilla.memoryLocation",!1,MemoryLocationService,memoryLocationConfig_MemoryLocationConfig),UIRouterPluginBase=function(){function UIRouterPluginBase(){}return UIRouterPluginBase.prototype.dispose=function(router){},UIRouterPluginBase}()},297:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"watchDigests",(function(){return watchDigests})),__webpack_require__.d(__webpack_exports__,"getLocals",(function(){return getLocals})),__webpack_require__.d(__webpack_exports__,"getNg1ViewConfigFactory",(function(){return getNg1ViewConfigFactory})),__webpack_require__.d(__webpack_exports__,"ng1ViewsBuilder",(function(){return ng1ViewsBuilder})),__webpack_require__.d(__webpack_exports__,"Ng1ViewConfig",(function(){return views_Ng1ViewConfig})),__webpack_require__.d(__webpack_exports__,"StateProvider",(function(){return stateProvider_StateProvider})),__webpack_require__.d(__webpack_exports__,"UrlRouterProvider",(function(){return urlRouterProvider_UrlRouterProvider})),__webpack_require__.d(__webpack_exports__,"core",(function(){return lib_esm})),__webpack_require__.d(__webpack_exports__,"root",(function(){return lib_esm.root})),__webpack_require__.d(__webpack_exports__,"fromJson",(function(){return lib_esm.fromJson})),__webpack_require__.d(__webpack_exports__,"toJson",(function(){return lib_esm.toJson})),__webpack_require__.d(__webpack_exports__,"forEach",(function(){return lib_esm.forEach})),__webpack_require__.d(__webpack_exports__,"extend",(function(){return lib_esm.extend})),__webpack_require__.d(__webpack_exports__,"equals",(function(){return lib_esm.equals})),__webpack_require__.d(__webpack_exports__,"identity",(function(){return lib_esm.identity})),__webpack_require__.d(__webpack_exports__,"noop",(function(){return lib_esm.noop})),__webpack_require__.d(__webpack_exports__,"createProxyFunctions",(function(){return lib_esm.createProxyFunctions})),__webpack_require__.d(__webpack_exports__,"inherit",(function(){return lib_esm.inherit})),__webpack_require__.d(__webpack_exports__,"inArray",(function(){return lib_esm.inArray})),__webpack_require__.d(__webpack_exports__,"_inArray",(function(){return lib_esm._inArray})),__webpack_require__.d(__webpack_exports__,"removeFrom",(function(){return lib_esm.removeFrom})),__webpack_require__.d(__webpack_exports__,"_removeFrom",(function(){return lib_esm._removeFrom})),__webpack_require__.d(__webpack_exports__,"pushTo",(function(){return lib_esm.pushTo})),__webpack_require__.d(__webpack_exports__,"_pushTo",(function(){return lib_esm._pushTo})),__webpack_require__.d(__webpack_exports__,"deregAll",(function(){return lib_esm.deregAll})),__webpack_require__.d(__webpack_exports__,"defaults",(function(){return lib_esm.defaults})),__webpack_require__.d(__webpack_exports__,"mergeR",(function(){return lib_esm.mergeR})),__webpack_require__.d(__webpack_exports__,"ancestors",(function(){return lib_esm.ancestors})),__webpack_require__.d(__webpack_exports__,"pick",(function(){return lib_esm.pick})),__webpack_require__.d(__webpack_exports__,"omit",(function(){return lib_esm.omit})),__webpack_require__.d(__webpack_exports__,"pluck",(function(){return lib_esm.pluck})),__webpack_require__.d(__webpack_exports__,"filter",(function(){return lib_esm.filter})),__webpack_require__.d(__webpack_exports__,"find",(function(){return lib_esm.find})),__webpack_require__.d(__webpack_exports__,"mapObj",(function(){return lib_esm.mapObj})),__webpack_require__.d(__webpack_exports__,"map",(function(){return lib_esm.map})),__webpack_require__.d(__webpack_exports__,"values",(function(){return lib_esm.values})),__webpack_require__.d(__webpack_exports__,"allTrueR",(function(){return lib_esm.allTrueR})),__webpack_require__.d(__webpack_exports__,"anyTrueR",(function(){return lib_esm.anyTrueR})),__webpack_require__.d(__webpack_exports__,"unnestR",(function(){return lib_esm.unnestR})),__webpack_require__.d(__webpack_exports__,"flattenR",(function(){return lib_esm.flattenR})),__webpack_require__.d(__webpack_exports__,"pushR",(function(){return lib_esm.pushR})),__webpack_require__.d(__webpack_exports__,"uniqR",(function(){return lib_esm.uniqR})),__webpack_require__.d(__webpack_exports__,"unnest",(function(){return lib_esm.unnest})),__webpack_require__.d(__webpack_exports__,"flatten",(function(){return lib_esm.flatten})),__webpack_require__.d(__webpack_exports__,"assertPredicate",(function(){return lib_esm.assertPredicate})),__webpack_require__.d(__webpack_exports__,"assertMap",(function(){return lib_esm.assertMap})),__webpack_require__.d(__webpack_exports__,"assertFn",(function(){return lib_esm.assertFn})),__webpack_require__.d(__webpack_exports__,"pairs",(function(){return lib_esm.pairs})),__webpack_require__.d(__webpack_exports__,"arrayTuples",(function(){return lib_esm.arrayTuples})),__webpack_require__.d(__webpack_exports__,"applyPairs",(function(){return lib_esm.applyPairs})),__webpack_require__.d(__webpack_exports__,"tail",(function(){return lib_esm.tail})),__webpack_require__.d(__webpack_exports__,"copy",(function(){return lib_esm.copy})),__webpack_require__.d(__webpack_exports__,"_extend",(function(){return lib_esm._extend})),__webpack_require__.d(__webpack_exports__,"silenceUncaughtInPromise",(function(){return lib_esm.silenceUncaughtInPromise})),__webpack_require__.d(__webpack_exports__,"silentRejection",(function(){return lib_esm.silentRejection})),__webpack_require__.d(__webpack_exports__,"makeStub",(function(){return lib_esm.makeStub})),__webpack_require__.d(__webpack_exports__,"services",(function(){return lib_esm.services})),__webpack_require__.d(__webpack_exports__,"Glob",(function(){return lib_esm.Glob})),__webpack_require__.d(__webpack_exports__,"curry",(function(){return lib_esm.curry})),__webpack_require__.d(__webpack_exports__,"compose",(function(){return lib_esm.compose})),__webpack_require__.d(__webpack_exports__,"pipe",(function(){return lib_esm.pipe})),__webpack_require__.d(__webpack_exports__,"prop",(function(){return lib_esm.prop})),__webpack_require__.d(__webpack_exports__,"propEq",(function(){return lib_esm.propEq})),__webpack_require__.d(__webpack_exports__,"parse",(function(){return lib_esm.parse})),__webpack_require__.d(__webpack_exports__,"not",(function(){return lib_esm.not})),__webpack_require__.d(__webpack_exports__,"and",(function(){return lib_esm.and})),__webpack_require__.d(__webpack_exports__,"or",(function(){return lib_esm.or})),__webpack_require__.d(__webpack_exports__,"all",(function(){return lib_esm.all})),__webpack_require__.d(__webpack_exports__,"any",(function(){return lib_esm.any})),__webpack_require__.d(__webpack_exports__,"is",(function(){return lib_esm.is})),__webpack_require__.d(__webpack_exports__,"eq",(function(){return lib_esm.eq})),__webpack_require__.d(__webpack_exports__,"val",(function(){return lib_esm.val})),__webpack_require__.d(__webpack_exports__,"invoke",(function(){return lib_esm.invoke})),__webpack_require__.d(__webpack_exports__,"pattern",(function(){return lib_esm.pattern})),__webpack_require__.d(__webpack_exports__,"isUndefined",(function(){return lib_esm.isUndefined})),__webpack_require__.d(__webpack_exports__,"isDefined",(function(){return lib_esm.isDefined})),__webpack_require__.d(__webpack_exports__,"isNull",(function(){return lib_esm.isNull})),__webpack_require__.d(__webpack_exports__,"isNullOrUndefined",(function(){return lib_esm.isNullOrUndefined})),__webpack_require__.d(__webpack_exports__,"isFunction",(function(){return lib_esm.isFunction})),__webpack_require__.d(__webpack_exports__,"isNumber",(function(){return lib_esm.isNumber})),__webpack_require__.d(__webpack_exports__,"isString",(function(){return lib_esm.isString})),__webpack_require__.d(__webpack_exports__,"isObject",(function(){return lib_esm.isObject})),__webpack_require__.d(__webpack_exports__,"isArray",(function(){return lib_esm.isArray})),__webpack_require__.d(__webpack_exports__,"isDate",(function(){return lib_esm.isDate})),__webpack_require__.d(__webpack_exports__,"isRegExp",(function(){return lib_esm.isRegExp})),__webpack_require__.d(__webpack_exports__,"isInjectable",(function(){return lib_esm.isInjectable})),__webpack_require__.d(__webpack_exports__,"isPromise",(function(){return lib_esm.isPromise})),__webpack_require__.d(__webpack_exports__,"Queue",(function(){return lib_esm.Queue})),__webpack_require__.d(__webpack_exports__,"maxLength",(function(){return lib_esm.maxLength})),__webpack_require__.d(__webpack_exports__,"padString",(function(){return lib_esm.padString})),__webpack_require__.d(__webpack_exports__,"kebobString",(function(){return lib_esm.kebobString})),__webpack_require__.d(__webpack_exports__,"functionToString",(function(){return lib_esm.functionToString})),__webpack_require__.d(__webpack_exports__,"fnToString",(function(){return lib_esm.fnToString})),__webpack_require__.d(__webpack_exports__,"stringify",(function(){return lib_esm.stringify})),__webpack_require__.d(__webpack_exports__,"beforeAfterSubstr",(function(){return lib_esm.beforeAfterSubstr})),__webpack_require__.d(__webpack_exports__,"hostRegex",(function(){return lib_esm.hostRegex})),__webpack_require__.d(__webpack_exports__,"stripLastPathElement",(function(){return lib_esm.stripLastPathElement})),__webpack_require__.d(__webpack_exports__,"splitHash",(function(){return lib_esm.splitHash})),__webpack_require__.d(__webpack_exports__,"splitQuery",(function(){return lib_esm.splitQuery})),__webpack_require__.d(__webpack_exports__,"splitEqual",(function(){return lib_esm.splitEqual})),__webpack_require__.d(__webpack_exports__,"trimHashVal",(function(){return lib_esm.trimHashVal})),__webpack_require__.d(__webpack_exports__,"splitOnDelim",(function(){return lib_esm.splitOnDelim})),__webpack_require__.d(__webpack_exports__,"joinNeighborsR",(function(){return lib_esm.joinNeighborsR})),__webpack_require__.d(__webpack_exports__,"Category",(function(){return lib_esm.Category})),__webpack_require__.d(__webpack_exports__,"Trace",(function(){return lib_esm.Trace})),__webpack_require__.d(__webpack_exports__,"trace",(function(){return lib_esm.trace})),__webpack_require__.d(__webpack_exports__,"DefType",(function(){return lib_esm.DefType})),__webpack_require__.d(__webpack_exports__,"Param",(function(){return lib_esm.Param})),__webpack_require__.d(__webpack_exports__,"ParamTypes",(function(){return lib_esm.ParamTypes})),__webpack_require__.d(__webpack_exports__,"StateParams",(function(){return lib_esm.StateParams})),__webpack_require__.d(__webpack_exports__,"ParamType",(function(){return lib_esm.ParamType})),__webpack_require__.d(__webpack_exports__,"PathNode",(function(){return lib_esm.PathNode})),__webpack_require__.d(__webpack_exports__,"PathUtils",(function(){return lib_esm.PathUtils})),__webpack_require__.d(__webpack_exports__,"resolvePolicies",(function(){return lib_esm.resolvePolicies})),__webpack_require__.d(__webpack_exports__,"defaultResolvePolicy",(function(){return lib_esm.defaultResolvePolicy})),__webpack_require__.d(__webpack_exports__,"Resolvable",(function(){return lib_esm.Resolvable})),__webpack_require__.d(__webpack_exports__,"NATIVE_INJECTOR_TOKEN",(function(){return lib_esm.NATIVE_INJECTOR_TOKEN})),__webpack_require__.d(__webpack_exports__,"ResolveContext",(function(){return lib_esm.ResolveContext})),__webpack_require__.d(__webpack_exports__,"resolvablesBuilder",(function(){return lib_esm.resolvablesBuilder})),__webpack_require__.d(__webpack_exports__,"StateBuilder",(function(){return lib_esm.StateBuilder})),__webpack_require__.d(__webpack_exports__,"StateObject",(function(){return lib_esm.StateObject})),__webpack_require__.d(__webpack_exports__,"StateMatcher",(function(){return lib_esm.StateMatcher})),__webpack_require__.d(__webpack_exports__,"StateQueueManager",(function(){return lib_esm.StateQueueManager})),__webpack_require__.d(__webpack_exports__,"StateRegistry",(function(){return lib_esm.StateRegistry})),__webpack_require__.d(__webpack_exports__,"StateService",(function(){return lib_esm.StateService})),__webpack_require__.d(__webpack_exports__,"TargetState",(function(){return lib_esm.TargetState})),__webpack_require__.d(__webpack_exports__,"TransitionHookPhase",(function(){return lib_esm.TransitionHookPhase})),__webpack_require__.d(__webpack_exports__,"TransitionHookScope",(function(){return lib_esm.TransitionHookScope})),__webpack_require__.d(__webpack_exports__,"HookBuilder",(function(){return lib_esm.HookBuilder})),__webpack_require__.d(__webpack_exports__,"matchState",(function(){return lib_esm.matchState})),__webpack_require__.d(__webpack_exports__,"RegisteredHook",(function(){return lib_esm.RegisteredHook})),__webpack_require__.d(__webpack_exports__,"makeEvent",(function(){return lib_esm.makeEvent})),__webpack_require__.d(__webpack_exports__,"RejectType",(function(){return lib_esm.RejectType})),__webpack_require__.d(__webpack_exports__,"Rejection",(function(){return lib_esm.Rejection})),__webpack_require__.d(__webpack_exports__,"Transition",(function(){return lib_esm.Transition})),__webpack_require__.d(__webpack_exports__,"TransitionHook",(function(){return lib_esm.TransitionHook})),__webpack_require__.d(__webpack_exports__,"TransitionEventType",(function(){return lib_esm.TransitionEventType})),__webpack_require__.d(__webpack_exports__,"defaultTransOpts",(function(){return lib_esm.defaultTransOpts})),__webpack_require__.d(__webpack_exports__,"TransitionService",(function(){return lib_esm.TransitionService})),__webpack_require__.d(__webpack_exports__,"UrlMatcher",(function(){return lib_esm.UrlMatcher})),__webpack_require__.d(__webpack_exports__,"ParamFactory",(function(){return lib_esm.ParamFactory})),__webpack_require__.d(__webpack_exports__,"UrlMatcherFactory",(function(){return lib_esm.UrlMatcherFactory})),__webpack_require__.d(__webpack_exports__,"UrlRouter",(function(){return lib_esm.UrlRouter})),__webpack_require__.d(__webpack_exports__,"UrlRuleFactory",(function(){return lib_esm.UrlRuleFactory})),__webpack_require__.d(__webpack_exports__,"BaseUrlRule",(function(){return lib_esm.BaseUrlRule})),__webpack_require__.d(__webpack_exports__,"UrlService",(function(){return lib_esm.UrlService})),__webpack_require__.d(__webpack_exports__,"UrlRules",(function(){return lib_esm.UrlRules})),__webpack_require__.d(__webpack_exports__,"UrlConfig",(function(){return lib_esm.UrlConfig})),__webpack_require__.d(__webpack_exports__,"ViewService",(function(){return lib_esm.ViewService})),__webpack_require__.d(__webpack_exports__,"UIRouterGlobals",(function(){return lib_esm.UIRouterGlobals})),__webpack_require__.d(__webpack_exports__,"UIRouter",(function(){return lib_esm.UIRouter})),__webpack_require__.d(__webpack_exports__,"$q",(function(){return lib_esm.$q})),__webpack_require__.d(__webpack_exports__,"$injector",(function(){return lib_esm.$injector})),__webpack_require__.d(__webpack_exports__,"BaseLocationServices",(function(){return lib_esm.BaseLocationServices})),__webpack_require__.d(__webpack_exports__,"HashLocationService",(function(){return lib_esm.HashLocationService})),__webpack_require__.d(__webpack_exports__,"MemoryLocationService",(function(){return lib_esm.MemoryLocationService})),__webpack_require__.d(__webpack_exports__,"PushStateLocationService",(function(){return lib_esm.PushStateLocationService})),__webpack_require__.d(__webpack_exports__,"MemoryLocationConfig",(function(){return lib_esm.MemoryLocationConfig})),__webpack_require__.d(__webpack_exports__,"BrowserLocationConfig",(function(){return lib_esm.BrowserLocationConfig})),__webpack_require__.d(__webpack_exports__,"keyValsToObjectR",(function(){return lib_esm.keyValsToObjectR})),__webpack_require__.d(__webpack_exports__,"getParams",(function(){return lib_esm.getParams})),__webpack_require__.d(__webpack_exports__,"parseUrl",(function(){return lib_esm.parseUrl})),__webpack_require__.d(__webpack_exports__,"buildUrl",(function(){return lib_esm.buildUrl})),__webpack_require__.d(__webpack_exports__,"locationPluginFactory",(function(){return lib_esm.locationPluginFactory})),__webpack_require__.d(__webpack_exports__,"servicesPlugin",(function(){return lib_esm.servicesPlugin})),__webpack_require__.d(__webpack_exports__,"hashLocationPlugin",(function(){return lib_esm.hashLocationPlugin})),__webpack_require__.d(__webpack_exports__,"pushStateLocationPlugin",(function(){return lib_esm.pushStateLocationPlugin})),__webpack_require__.d(__webpack_exports__,"memoryLocationPlugin",(function(){return lib_esm.memoryLocationPlugin})),__webpack_require__.d(__webpack_exports__,"UIRouterPluginBase",(function(){return lib_esm.UIRouterPluginBase}));var node_modules_angular=__webpack_require__(12),ng_from_global=angular,ng=node_modules_angular&&node_modules_angular.module?node_modules_angular:ng_from_global,lib_esm=__webpack_require__(2);function getNg1ViewConfigFactory(){var templateFactory=null;return function(path,view){return templateFactory=templateFactory||lib_esm.services.$injector.get("$templateFactory"),[new views_Ng1ViewConfig(path,view,templateFactory)]}}var hasAnyKey=function(keys,obj){return keys.reduce((function(acc,key){return acc||Object(lib_esm.isDefined)(obj[key])}),!1)};function ng1ViewsBuilder(state){if(!state.parent)return{};var compKeys=["component","bindings","componentProvider"],nonCompKeys=["templateProvider","templateUrl","template","notify","async"].concat(["controller","controllerProvider","controllerAs","resolveAs"]),allViewKeys=compKeys.concat(nonCompKeys);if(Object(lib_esm.isDefined)(state.views)&&hasAnyKey(allViewKeys,state))throw new Error("State '"+state.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+allViewKeys.filter((function(key){return Object(lib_esm.isDefined)(state[key])})).join(", "));var views={},viewsObject=state.views||{$default:Object(lib_esm.pick)(state,allViewKeys)};return Object(lib_esm.forEach)(viewsObject,(function(config,name){if(name=name||"$default",Object(lib_esm.isString)(config)&&(config={component:config}),config=Object(lib_esm.extend)({},config),hasAnyKey(compKeys,config)&&hasAnyKey(nonCompKeys,config))throw new Error("Cannot combine: "+compKeys.join("|")+" with: "+nonCompKeys.join("|")+" in stateview: '"+name+"@"+state.name+"'");config.resolveAs=config.resolveAs||"$resolve",config.$type="ng1",config.$context=state,config.$name=name;var normalized=lib_esm.ViewService.normalizeUIViewTarget(config.$context,config.$name);config.$uiViewName=normalized.uiViewName,config.$uiViewContextAnchor=normalized.uiViewContextAnchor,views[name]=config})),views}var id=0,views_Ng1ViewConfig=function(){function Ng1ViewConfig(path,viewDecl,factory){var _this=this;this.path=path,this.viewDecl=viewDecl,this.factory=factory,this.$id=id++,this.loaded=!1,this.getTemplate=function(uiView,context){return _this.component?_this.factory.makeComponentTemplate(uiView,context,_this.component,_this.viewDecl.bindings):_this.template}}return Ng1ViewConfig.prototype.load=function(){var _this=this,$q=lib_esm.services.$q,context=new lib_esm.ResolveContext(this.path),params=this.path.reduce((function(acc,node){return Object(lib_esm.extend)(acc,node.paramValues)}),{}),promises={template:$q.when(this.factory.fromConfig(this.viewDecl,params,context)),controller:$q.when(this.getController(context))};return $q.all(promises).then((function(results){return lib_esm.trace.traceViewServiceEvent("Loaded",_this),_this.controller=results.controller,Object(lib_esm.extend)(_this,results.template),_this}))},Ng1ViewConfig.prototype.getController=function(context){var provider=this.viewDecl.controllerProvider;if(!Object(lib_esm.isInjectable)(provider))return this.viewDecl.controller;var deps=lib_esm.services.$injector.annotate(provider),providerFn=Object(lib_esm.isArray)(provider)?Object(lib_esm.tail)(provider):provider;return new lib_esm.Resolvable("",providerFn,deps).get(context)},Ng1ViewConfig}(),templateFactory_TemplateFactory=function(){function TemplateFactory(){var _this=this;this._useHttp=ng.version.minor<3,this.$get=["$http","$templateCache","$injector",function($http,$templateCache,$injector){return _this.$templateRequest=$injector.has&&$injector.has("$templateRequest")&&$injector.get("$templateRequest"),_this.$http=$http,_this.$templateCache=$templateCache,_this}]}return TemplateFactory.prototype.useHttpService=function(value){this._useHttp=value},TemplateFactory.prototype.fromConfig=function(config,params,context){var asTemplate=function(result){return lib_esm.services.$q.when(result).then((function(str){return{template:str}}))},asComponent=function(result){return lib_esm.services.$q.when(result).then((function(str){return{component:str}}))};return Object(lib_esm.isDefined)(config.template)?asTemplate(this.fromString(config.template,params)):Object(lib_esm.isDefined)(config.templateUrl)?asTemplate(this.fromUrl(config.templateUrl,params)):Object(lib_esm.isDefined)(config.templateProvider)?asTemplate(this.fromProvider(config.templateProvider,params,context)):Object(lib_esm.isDefined)(config.component)?asComponent(config.component):Object(lib_esm.isDefined)(config.componentProvider)?asComponent(this.fromComponentProvider(config.componentProvider,params,context)):asTemplate("<ui-view></ui-view>")},TemplateFactory.prototype.fromString=function(template,params){return Object(lib_esm.isFunction)(template)?template(params):template},TemplateFactory.prototype.fromUrl=function(url,params){return Object(lib_esm.isFunction)(url)&&(url=url(params)),null==url?null:this._useHttp?this.$http.get(url,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then((function(response){return response.data})):this.$templateRequest(url)},TemplateFactory.prototype.fromProvider=function(provider,params,context){var deps=lib_esm.services.$injector.annotate(provider),providerFn=Object(lib_esm.isArray)(provider)?Object(lib_esm.tail)(provider):provider;return new lib_esm.Resolvable("",providerFn,deps).get(context)},TemplateFactory.prototype.fromComponentProvider=function(provider,params,context){var deps=lib_esm.services.$injector.annotate(provider),providerFn=Object(lib_esm.isArray)(provider)?Object(lib_esm.tail)(provider):provider;return new lib_esm.Resolvable("",providerFn,deps).get(context)},TemplateFactory.prototype.makeComponentTemplate=function(uiView,context,component,bindings){bindings=bindings||{};var prefix=ng.version.minor>=3?"::":"",kebob=function(camelCase){var kebobed=Object(lib_esm.kebobString)(camelCase);return/^(x|data)-/.exec(kebobed)?"x-"+kebobed:kebobed},attrs=function getComponentBindings(name){var cmpDefs=lib_esm.services.$injector.get(name+"Directive");if(!cmpDefs||!cmpDefs.length)throw new Error("Unable to find component named '"+name+"'");return cmpDefs.map(getBindings).reduce(lib_esm.unnestR,[])}(component).map((function(input){var name=input.name,type=input.type,attrName=kebob(name);if(uiView.attr(attrName)&&!bindings[name])return attrName+"='"+uiView.attr(attrName)+"'";var resolveName=bindings[name]||name;if("@"===type)return attrName+"='{{"+prefix+"$resolve."+resolveName+"}}'";if("&"===type){var res=context.getResolvable(resolveName),fn=res&&res.data,args=fn&&lib_esm.services.$injector.annotate(fn)||[];return attrName+"='$resolve."+resolveName+(Object(lib_esm.isArray)(fn)?"["+(fn.length-1)+"]":"")+"("+args.join(",")+")'"}return attrName+"='"+prefix+"$resolve."+resolveName+"'"})).join(" "),kebobName=kebob(component);return"<"+kebobName+" "+attrs+"></"+kebobName+">"},TemplateFactory}();var getBindings=function(def){return Object(lib_esm.isObject)(def.bindToController)?scopeBindings(def.bindToController):scopeBindings(def.scope)},scopeBindings=function(bindingsObj){return Object.keys(bindingsObj||{}).map((function(key){return[key,/^([=<@&])[?]?(.*)/.exec(bindingsObj[key])]})).filter((function(tuple){return Object(lib_esm.isDefined)(tuple)&&Object(lib_esm.isArray)(tuple[1])})).map((function(tuple){return{name:tuple[1][2]||tuple[0],type:tuple[1][1]}}))},stateProvider_StateProvider=function(){function StateProvider(stateRegistry,stateService){this.stateRegistry=stateRegistry,this.stateService=stateService,Object(lib_esm.createProxyFunctions)(Object(lib_esm.val)(StateProvider.prototype),this,Object(lib_esm.val)(this))}return StateProvider.prototype.decorator=function(name,func){return this.stateRegistry.decorator(name,func)||this},StateProvider.prototype.state=function(name,definition){return Object(lib_esm.isObject)(name)?definition=name:definition.name=name,this.stateRegistry.register(definition),this},StateProvider.prototype.onInvalid=function(callback){return this.stateService.onInvalid(callback)},StateProvider}(),getStateHookBuilder=function(hookName){return function stateHookBuilder(stateObject,parentFn){var hook=stateObject[hookName],pathname="onExit"===hookName?"from":"to";return hook?function decoratedNg1Hook(trans,state){var subContext=new lib_esm.ResolveContext(trans.treeChanges(pathname)).subContext(state.$$state()),locals=Object(lib_esm.extend)(getLocals(subContext),{$state$:state,$transition$:trans});return lib_esm.services.$injector.invoke(hook,this,locals)}:void 0}},locationServices_Ng1LocationServices=function(){function Ng1LocationServices($locationProvider){this._urlListeners=[],this.$locationProvider=$locationProvider;var _lp=Object(lib_esm.val)($locationProvider);Object(lib_esm.createProxyFunctions)(_lp,this,_lp,["hashPrefix"])}return Ng1LocationServices.monkeyPatchPathParameterType=function(router){var pathType=router.urlMatcherFactory.type("path");pathType.encode=function(x){return null!=x?x.toString().replace(/(~|\/)/g,(function(m){return{"~":"~~","/":"~2F"}[m]})):x},pathType.decode=function(x){return null!=x?x.toString().replace(/(~~|~2F)/g,(function(m){return{"~~":"~","~2F":"/"}[m]})):x}},Ng1LocationServices.prototype.dispose=function(){},Ng1LocationServices.prototype.onChange=function(callback){var _this=this;return this._urlListeners.push(callback),function(){return Object(lib_esm.removeFrom)(_this._urlListeners)(callback)}},Ng1LocationServices.prototype.html5Mode=function(){var html5Mode=this.$locationProvider.html5Mode();return(html5Mode=Object(lib_esm.isObject)(html5Mode)?html5Mode.enabled:html5Mode)&&this.$sniffer.history},Ng1LocationServices.prototype.baseHref=function(){return this._baseHref||(this._baseHref=this.$browser.baseHref()||this.$window.location.pathname)},Ng1LocationServices.prototype.url=function(newUrl,replace,state){return void 0===replace&&(replace=!1),Object(lib_esm.isDefined)(newUrl)&&this.$location.url(newUrl),replace&&this.$location.replace(),state&&this.$location.state(state),this.$location.url()},Ng1LocationServices.prototype._runtimeServices=function($rootScope,$location,$sniffer,$browser,$window){var _this=this;this.$location=$location,this.$sniffer=$sniffer,this.$browser=$browser,this.$window=$window,$rootScope.$on("$locationChangeSuccess",(function(evt){return _this._urlListeners.forEach((function(fn){return fn(evt)}))}));var _loc=Object(lib_esm.val)($location);Object(lib_esm.createProxyFunctions)(_loc,this,_loc,["replace","path","search","hash"]),Object(lib_esm.createProxyFunctions)(_loc,this,_loc,["port","protocol","host"])},Ng1LocationServices}(),urlRouterProvider_UrlRouterProvider=function(){function UrlRouterProvider(router){this.router=router}return UrlRouterProvider.injectableHandler=function(router,handler){return function(match){return lib_esm.services.$injector.invoke(handler,null,{$match:match,$stateParams:router.globals.params})}},UrlRouterProvider.prototype.$get=function(){var urlService=this.router.urlService;return this.router.urlRouter.update(!0),urlService.interceptDeferred||urlService.listen(),this.router.urlRouter},UrlRouterProvider.prototype.rule=function(ruleFn){var _this=this;if(!Object(lib_esm.isFunction)(ruleFn))throw new Error("'rule' must be a function");var rule=new lib_esm.BaseUrlRule((function(){return ruleFn(lib_esm.services.$injector,_this.router.locationService)}),lib_esm.identity);return this.router.urlService.rules.rule(rule),this},UrlRouterProvider.prototype.otherwise=function(rule){var _this=this,urlRules=this.router.urlService.rules;if(Object(lib_esm.isString)(rule))urlRules.otherwise(rule);else{if(!Object(lib_esm.isFunction)(rule))throw new Error("'rule' must be a string or function");urlRules.otherwise((function(){return rule(lib_esm.services.$injector,_this.router.locationService)}))}return this},UrlRouterProvider.prototype.when=function(what,handler){return(Object(lib_esm.isArray)(handler)||Object(lib_esm.isFunction)(handler))&&(handler=UrlRouterProvider.injectableHandler(this.router,handler)),this.router.urlService.rules.when(what,handler),this},UrlRouterProvider.prototype.deferIntercept=function(defer){this.router.urlService.deferIntercept(defer)},UrlRouterProvider}();ng.module("ui.router.angular1",[]);var mod_init=ng.module("ui.router.init",["ng"]),mod_util=ng.module("ui.router.util",["ui.router.init"]),mod_rtr=ng.module("ui.router.router",["ui.router.util"]),mod_state=ng.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),mod_main=ng.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),services_router=(ng.module("ui.router.compat",["ui.router"]),null);function $uiRouterProvider($locationProvider){(services_router=this.router=new lib_esm.UIRouter).stateProvider=new stateProvider_StateProvider(services_router.stateRegistry,services_router.stateService),services_router.stateRegistry.decorator("views",ng1ViewsBuilder),services_router.stateRegistry.decorator("onExit",getStateHookBuilder("onExit")),services_router.stateRegistry.decorator("onRetain",getStateHookBuilder("onRetain")),services_router.stateRegistry.decorator("onEnter",getStateHookBuilder("onEnter")),services_router.viewService._pluginapi._viewConfigFactory("ng1",getNg1ViewConfigFactory());var ng1LocationService=services_router.locationService=services_router.locationConfig=new locationServices_Ng1LocationServices($locationProvider);function $get($location,$browser,$window,$sniffer,$rootScope,$http,$templateCache){return ng1LocationService._runtimeServices($rootScope,$location,$sniffer,$browser,$window),delete services_router.router,delete services_router.$get,services_router}return locationServices_Ng1LocationServices.monkeyPatchPathParameterType(services_router),services_router.router=services_router,services_router.$get=$get,$get.$inject=["$location","$browser","$window","$sniffer","$rootScope","$http","$templateCache"],services_router}$uiRouterProvider.$inject=["$locationProvider"];var getProviderFor=function(serviceName){return["$uiRouterProvider",function($urp){var service=$urp.router[serviceName];return service.$get=function(){return service},service}]};function runBlock($injector,$q,$uiRouter){if(lib_esm.services.$injector=$injector,lib_esm.services.$q=$q,!$injector.hasOwnProperty("strictDi"))try{$injector.invoke((function(checkStrictDi){}))}catch(error){$injector.strictDi=!!/strict mode/.exec(error&&error.toString())}$uiRouter.stateRegistry.get().map((function(x){return x.$$state().resolvables})).reduce(lib_esm.unnestR,[]).filter((function(x){return"deferred"===x.deps})).forEach((function(resolvable){return resolvable.deps=$injector.annotate(resolvable.resolveFn,$injector.strictDi)}))}runBlock.$inject=["$injector","$q","$uiRouter"];function watchDigests($rootScope){$rootScope.$watch((function(){lib_esm.trace.approximateDigests++}))}watchDigests.$inject=["$rootScope"],mod_init.provider("$uiRouter",$uiRouterProvider),mod_rtr.provider("$urlRouter",["$uiRouterProvider",function(uiRouter){return uiRouter.urlRouterProvider=new urlRouterProvider_UrlRouterProvider(uiRouter)}]),mod_util.provider("$urlService",getProviderFor("urlService")),mod_util.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return services_router.urlMatcherFactory}]),mod_util.provider("$templateFactory",(function(){return new templateFactory_TemplateFactory})),mod_state.provider("$stateRegistry",getProviderFor("stateRegistry")),mod_state.provider("$uiRouterGlobals",getProviderFor("globals")),mod_state.provider("$transitions",getProviderFor("transitionService")),mod_state.provider("$state",["$uiRouterProvider",function(){return Object(lib_esm.extend)(services_router.stateProvider,{$get:function(){return services_router.stateService}})}]),mod_state.factory("$stateParams",["$uiRouter",function($uiRouter){return $uiRouter.globals.params}]),mod_main.factory("$view",(function(){return services_router.viewService})),mod_main.service("$trace",(function(){return lib_esm.trace})),mod_main.run(watchDigests),mod_util.run(["$urlMatcherFactory",function($urlMatcherFactory){}]),mod_state.run(["$state",function($state){}]),mod_rtr.run(["$urlRouter",function($urlRouter){}]),mod_init.run(runBlock);var uiSrefDirective,uiStateDirective,uiSrefActiveDirective,viewDirective_uiView,getLocals=function(ctx){return ctx.getTokens().filter(lib_esm.isString).map((function(key){var resolvable=ctx.getResolvable(key);return[key,"NOWAIT"===ctx.getPolicy(resolvable).async?resolvable.promise:resolvable.data]})).reduce(lib_esm.applyPairs,{})};__webpack_require__(617);function parseStateRef(ref){var parsed,paramsOnly=ref.match(/^\s*({[^}]*})\s*$/);if(paramsOnly&&(ref="("+paramsOnly[1]+")"),!(parsed=ref.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1]||null,paramExpr:parsed[3]||null}}function stateContext(el){var $uiView=el.parent().inheritedData("$uiView"),path=Object(lib_esm.parse)("$cfg.path")($uiView);return path?Object(lib_esm.tail)(path).state.name:void 0}function processedDef($state,$element,def){var uiState=def.uiState||$state.current.name,uiStateOpts=Object(lib_esm.extend)(function defaultOpts(el,$state){return{relative:stateContext(el)||$state.$current,inherit:!0,source:"sref"}}($element,$state),def.uiStateOpts||{}),href=$state.href(uiState,def.uiStateParams,uiStateOpts);return{uiState:uiState,uiStateParams:def.uiStateParams,uiStateOpts:uiStateOpts,href:href}}function getTypeInfo(el){var isSvg="[object SVGAnimatedString]"===Object.prototype.toString.call(el.prop("href")),isForm="FORM"===el[0].nodeName;return{attr:isForm?"action":isSvg?"xlink:href":"href",isAnchor:"A"===el.prop("tagName").toUpperCase(),clickable:!isForm}}function clickHook(el,$state,$timeout,type,getDef){return function(e){var button=e.which||e.button,target=getDef();if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||el.attr("target"))){var transition_1=$timeout((function(){el.attr("disabled")||$state.go(target.uiState,target.uiStateParams,target.uiStateOpts)}));e.preventDefault();var ignorePreventDefaultCount_1=type.isAnchor&&!target.href?1:0;e.preventDefault=function(){ignorePreventDefaultCount_1--<=0&&$timeout.cancel(transition_1)}}}}function bindEvents(element,scope,hookFn,uiStateOpts){var events;uiStateOpts&&(events=uiStateOpts.events),Object(lib_esm.isArray)(events)||(events=["click"]);for(var on=element.on?"on":"bind",_i=0,events_1=events;_i<events_1.length;_i++){var event_1=events_1[_i];element[on](event_1,hookFn)}scope.$on("$destroy",(function(){for(var off=element.off?"off":"unbind",_i=0,events_2=events;_i<events_2.length;_i++){var event_2=events_2[_i];element[off](event_2,hookFn)}}))}function $IsStateFilter($state){var isFilter=function(state,params,options){return $state.is(state,params,options)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state,params,options){return $state.includes(state,params,options)};return includesFilter.$stateful=!0,includesFilter}function $ViewDirectiveFill($compile,$controller,$transitions,$view,$q,$timeout){var getControllerAs=Object(lib_esm.parse)("viewDecl.controllerAs"),getResolveAs=Object(lib_esm.parse)("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return tElement.empty(),function(scope,$element){var data=$element.data("$uiView");if(!data)return $element.html(initial),void $compile($element.contents())(scope);var cfg=data.$cfg||{viewDecl:{},getTemplate:lib_esm.noop},resolveCtx=cfg.path&&new lib_esm.ResolveContext(cfg.path);$element.html(cfg.getTemplate($element,resolveCtx)||initial),lib_esm.trace.traceUIViewFill(data.$uiView,$element.html());var link=$compile($element.contents()),controller=cfg.controller,controllerAs=getControllerAs(cfg),resolveAs=getResolveAs(cfg),locals=resolveCtx&&getLocals(resolveCtx);if(scope[resolveAs]=locals,controller){var controllerInstance=$controller(controller,Object(lib_esm.extend)({},locals,{$scope:scope,$element:$element}));controllerAs&&(scope[controllerAs]=controllerInstance,scope[controllerAs][resolveAs]=locals),$element.data("$ngControllerController",controllerInstance),$element.children().data("$ngControllerController",controllerInstance),registerControllerCallbacks($q,$transitions,controllerInstance,scope,cfg)}if(Object(lib_esm.isString)(cfg.component))var kebobName=Object(lib_esm.kebobString)(cfg.component),tagRegexp_1=new RegExp("^(x-|data-)?"+kebobName+"$","i"),deregisterWatch_1=scope.$watch((function(){var directiveEl=[].slice.call($element[0].children).filter((function(el){return el&&el.tagName&&tagRegexp_1.exec(el.tagName)}));return directiveEl&&ng.element(directiveEl).data("$"+cfg.component+"Controller")}),(function(ctrlInstance){ctrlInstance&&(registerControllerCallbacks($q,$transitions,ctrlInstance,scope,cfg),deregisterWatch_1())}));link(scope)}}}}uiSrefDirective=["$uiRouter","$timeout",function $StateRefDirective($uiRouter,$timeout){var $state=$uiRouter.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var hookFn,type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],unlinkInfoFn=null,rawDef={},getDef=function(){return processedDef($state,element,rawDef)},ref=parseStateRef(attrs.uiSref);function update(){var def=getDef();unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(def.uiState,def.uiStateParams)),null!=def.href&&attrs.$set(type.attr,def.href)}rawDef.uiState=ref.state,rawDef.uiStateOpts=attrs.uiSrefOpts?scope.$eval(attrs.uiSrefOpts):{},ref.paramExpr&&(scope.$watch(ref.paramExpr,(function(val){rawDef.uiStateParams=Object(lib_esm.extend)({},val),update()}),!0),rawDef.uiStateParams=Object(lib_esm.extend)({},scope.$eval(ref.paramExpr))),update(),scope.$on("$destroy",$uiRouter.stateRegistry.onStatesChanged(update)),scope.$on("$destroy",$uiRouter.transitionService.onSuccess({},update)),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,getDef),bindEvents(element,scope,hookFn,rawDef.uiStateOpts))}}}],uiStateDirective=["$uiRouter","$timeout",function $StateRefDynamicDirective($uiRouter,$timeout){var $state=$uiRouter.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var hookFn,type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],unlinkInfoFn=null,rawDef={},getDef=function(){return processedDef($state,element,rawDef)},inputAttrs=["uiState","uiStateParams","uiStateOpts"],watchDeregFns=inputAttrs.reduce((function(acc,attr){return acc[attr]=lib_esm.noop,acc}),{});function update(){var def=getDef();unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(def.uiState,def.uiStateParams)),null!=def.href&&attrs.$set(type.attr,def.href)}inputAttrs.forEach((function(field){rawDef[field]=attrs[field]?scope.$eval(attrs[field]):null,attrs.$observe(field,(function(expr){watchDeregFns[field](),watchDeregFns[field]=scope.$watch(expr,(function(newval){rawDef[field]=newval,update()}),!0)}))})),update(),scope.$on("$destroy",$uiRouter.stateRegistry.onStatesChanged(update)),scope.$on("$destroy",$uiRouter.transitionService.onSuccess({},update)),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,getDef),bindEvents(element,scope,hookFn,rawDef.uiStateOpts))}}}],uiSrefActiveDirective=["$state","$stateParams","$interpolate","$uiRouter",function $StateRefActiveDirective($state,$stateParams,$interpolate,$uiRouter){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){var activeEqClass,uiSrefActive,states=[];activeEqClass=$interpolate($attrs.uiSrefActiveEq||"",!1)($scope);try{uiSrefActive=$scope.$eval($attrs.uiSrefActive)}catch(e){}function updateAfterTransition(trans){trans.promise.then(update,lib_esm.noop)}function handleStatesChanged(){setStatesFromDefinitionObject(uiSrefActive)}function setStatesFromDefinitionObject(statesDefinition){Object(lib_esm.isObject)(statesDefinition)&&(states=[],Object(lib_esm.forEach)(statesDefinition,(function(stateOrName,activeClass){var addStateForClass=function(stateOrName,activeClass){var ref=parseStateRef(stateOrName);addState(ref.state,$scope.$eval(ref.paramExpr),activeClass)};Object(lib_esm.isString)(stateOrName)?addStateForClass(stateOrName,activeClass):Object(lib_esm.isArray)(stateOrName)&&Object(lib_esm.forEach)(stateOrName,(function(stateOrName){addStateForClass(stateOrName,activeClass)}))})))}function addState(stateName,stateParams,activeClass){var stateInfo={state:$state.get(stateName,stateContext($element))||{name:stateName},params:stateParams,activeClass:activeClass};return states.push(stateInfo),function removeState(){Object(lib_esm.removeFrom)(states)(stateInfo)}}function update(){var splitClasses=function(str){return str.split(/\s/).filter(lib_esm.identity)},getClasses=function(stateList){return stateList.map((function(x){return x.activeClass})).map(splitClasses).reduce(lib_esm.unnestR,[])},allClasses=getClasses(states).concat(splitClasses(activeEqClass)).reduce(lib_esm.uniqR,[]),fuzzyClasses=getClasses(states.filter((function(x){return $state.includes(x.state.name,x.params)}))),exactClasses=!!states.filter((function(x){return $state.is(x.state.name,x.params)})).length?splitClasses(activeEqClass):[],addClasses=fuzzyClasses.concat(exactClasses).reduce(lib_esm.uniqR,[]),removeClasses=allClasses.filter((function(cls){return!Object(lib_esm.inArray)(addClasses,cls)}));$scope.$evalAsync((function(){addClasses.forEach((function(className){return $element.addClass(className)})),removeClasses.forEach((function(className){return $element.removeClass(className)}))}))}setStatesFromDefinitionObject(uiSrefActive=uiSrefActive||$interpolate($attrs.uiSrefActive||"",!1)($scope)),this.$$addStateInfo=function(newState,newParams){if(!(Object(lib_esm.isObject)(uiSrefActive)&&states.length>0)){var deregister=addState(newState,newParams,uiSrefActive);return update(),deregister}},$scope.$on("$destroy",function setupEventListeners(){var deregisterStatesChangedListener=$uiRouter.stateRegistry.onStatesChanged(handleStatesChanged),deregisterOnStartListener=$uiRouter.transitionService.onStart({},updateAfterTransition),deregisterStateChangeSuccessListener=$scope.$on("$stateChangeSuccess",update);return function cleanUp(){deregisterStatesChangedListener(),deregisterOnStartListener(),deregisterStateChangeSuccessListener()}}()),$uiRouter.globals.transition&&updateAfterTransition($uiRouter.globals.transition),update()}]}}],ng.module("ui.router.state").directive("uiSref",uiSrefDirective).directive("uiSrefActive",uiSrefActiveDirective).directive("uiSrefActiveEq",uiSrefActiveDirective).directive("uiState",uiStateDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],ng.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter),viewDirective_uiView=["$view","$animate","$uiViewScroll","$interpolate","$q",function $ViewDirective($view,$animate,$uiViewScroll,$interpolate,$q){var rootData={$cfg:{viewDecl:{$context:$view._pluginapi._rootViewContext()}},$uiView:{}},directive={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){var previousEl,currentEl,currentScope,viewConfig,unregister,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=function getRenderer(attrs,scope){return{enter:function(element,target,cb){ng.version.minor>2?$animate.enter(element,null,target).then(cb):$animate.enter(element,null,target,cb)},leave:function(element,cb){ng.version.minor>2?$animate.leave(element).then(cb):$animate.leave(element,cb)}}}(),inherited=$element.inheritedData("$uiView")||rootData,name=$interpolate(attrs.uiView||attrs.name||"")(scope)||"$default",activeUIView={$type:"ng1",id:directive.count++,name:name,fqn:inherited.$uiView.fqn?inherited.$uiView.fqn+"."+name:name,config:null,configUpdated:function configUpdatedCallback(config){if(config&&!(config instanceof views_Ng1ViewConfig))return;if(function configsEqual(config1,config2){return config1===config2}(viewConfig,config))return;lib_esm.trace.traceUIViewConfigUpdated(activeUIView,config&&config.viewDecl&&config.viewDecl.$context),viewConfig=config,updateView(config)},get creationContext(){var fromParentTagConfig=Object(lib_esm.parse)("$cfg.viewDecl.$context")(inherited),fromParentTag=Object(lib_esm.parse)("$uiView.creationContext")(inherited);return fromParentTagConfig||fromParentTag}};function updateView(config){var newScope=scope.$new(),animEnter=$q.defer(),animLeave=$q.defer(),$uiViewData={$cfg:config,$uiView:activeUIView},$uiViewAnim={$animEnter:animEnter.promise,$animLeave:animLeave.promise,$$animLeave:animLeave};newScope.$emit("$viewContentLoading",name);var cloned=$transclude(newScope,(function(clone){clone.data("$uiViewAnim",$uiViewAnim),clone.data("$uiView",$uiViewData),renderer.enter(clone,$element,(function onUIViewEnter(){animEnter.resolve(),currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(Object(lib_esm.isDefined)(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)})),function cleanupLastView(){if(previousEl&&(lib_esm.trace.traceUIViewEvent("Removing (previous) el",previousEl.data("$uiView")),previousEl.remove(),previousEl=null),currentScope&&(lib_esm.trace.traceUIViewEvent("Destroying scope",activeUIView),currentScope.$destroy(),currentScope=null),currentEl){var _viewData_1=currentEl.data("$uiViewAnim");lib_esm.trace.traceUIViewEvent("Animate out",_viewData_1),renderer.leave(currentEl,(function(){_viewData_1.$$animLeave.resolve(),previousEl=null})),previousEl=currentEl,currentEl=null}}()}));currentEl=cloned,(currentScope=newScope).$emit("$viewContentLoaded",config||viewConfig),currentScope.$eval(onloadExp)}lib_esm.trace.traceUIViewEvent("Linking",activeUIView),$element.data("$uiView",{$uiView:activeUIView}),updateView(),unregister=$view.registerUIView(activeUIView),scope.$on("$destroy",(function(){lib_esm.trace.traceUIViewEvent("Destroying/Unregistering",activeUIView),unregister()}))}}};return directive}],$ViewDirectiveFill.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var hasComponentImpl="function"==typeof ng.module("ui.router").component,_uiCanExitId=0;function registerControllerCallbacks($q,$transitions,controllerInstance,$scope,cfg){!Object(lib_esm.isFunction)(controllerInstance.$onInit)||(cfg.viewDecl.component||cfg.viewDecl.componentProvider)&&hasComponentImpl||controllerInstance.$onInit();var viewState=Object(lib_esm.tail)(cfg.path).state.self,hookOptions={bind:controllerInstance};if(Object(lib_esm.isFunction)(controllerInstance.uiOnParamsChanged)){var viewCreationTrans_1=new lib_esm.ResolveContext(cfg.path).getResolvable("$transition$").data;$scope.$on("$destroy",$transitions.onSuccess({},(function($transition$){if($transition$!==viewCreationTrans_1&&-1===$transition$.exiting().indexOf(viewState)){var toParams=$transition$.params("to"),fromParams=$transition$.params("from"),getNodeSchema=function(node){return node.paramSchema},toSchema=$transition$.treeChanges("to").map(getNodeSchema).reduce(lib_esm.unnestR,[]),fromSchema=$transition$.treeChanges("from").map(getNodeSchema).reduce(lib_esm.unnestR,[]),changedToParams=toSchema.filter((function(param){var idx=fromSchema.indexOf(param);return-1===idx||!fromSchema[idx].type.equals(toParams[param.id],fromParams[param.id])}));if(changedToParams.length){var changedKeys_1=changedToParams.map((function(x){return x.id})),newValues=Object(lib_esm.filter)(toParams,(function(val,key){return-1!==changedKeys_1.indexOf(key)}));controllerInstance.uiOnParamsChanged(newValues,$transition$)}}}),hookOptions))}if(Object(lib_esm.isFunction)(controllerInstance.uiCanExit)){var id_1=_uiCanExitId++,prevTruthyAnswer_1=function(trans){return!!trans&&(trans._uiCanExitIds&&!0===trans._uiCanExitIds[id_1]||prevTruthyAnswer_1(trans.redirectedFrom()))},criteria={exiting:viewState.name};$scope.$on("$destroy",$transitions.onBefore(criteria,(function(trans){var promise,ids=trans._uiCanExitIds=trans._uiCanExitIds||{};return prevTruthyAnswer_1(trans)||(promise=$q.when(controllerInstance.uiCanExit(trans))).then((function(val){return ids[id_1]=!1!==val})),promise}),hookOptions))}}ng.module("ui.router.state").directive("uiView",viewDirective_uiView),ng.module("ui.router.state").directive("uiView",$ViewDirectiveFill),ng.module("ui.router.state").provider("$uiViewScroll",(function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){return $timeout((function(){$element[0].scrollIntoView()}),0,!1)}}]}));__webpack_exports__.default="ui.router"},3:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"M",(function(){return root})),__webpack_require__.d(__webpack_exports__,"x",(function(){return fromJson})),__webpack_require__.d(__webpack_exports__,"Q",(function(){return toJson})),__webpack_require__.d(__webpack_exports__,"w",(function(){return forEach})),__webpack_require__.d(__webpack_exports__,"r",(function(){return extend})),__webpack_require__.d(__webpack_exports__,"q",(function(){return equals})),__webpack_require__.d(__webpack_exports__,"y",(function(){return identity})),__webpack_require__.d(__webpack_exports__,"E",(function(){return noop})),__webpack_require__.d(__webpack_exports__,"n",(function(){return createProxyFunctions})),__webpack_require__.d(__webpack_exports__,"A",(function(){return inherit})),__webpack_require__.d(__webpack_exports__,"z",(function(){return inArray})),__webpack_require__.d(__webpack_exports__,"b",(function(){return _inArray})),__webpack_require__.d(__webpack_exports__,"L",(function(){return removeFrom})),__webpack_require__.d(__webpack_exports__,"d",(function(){return _removeFrom})),__webpack_require__.d(__webpack_exports__,"K",(function(){return pushTo})),__webpack_require__.d(__webpack_exports__,"c",(function(){return _pushTo})),__webpack_require__.d(__webpack_exports__,"p",(function(){return deregAll})),__webpack_require__.d(__webpack_exports__,"o",(function(){return defaults})),__webpack_require__.d(__webpack_exports__,"D",(function(){return mergeR})),__webpack_require__.d(__webpack_exports__,"f",(function(){return ancestors})),__webpack_require__.d(__webpack_exports__,"H",(function(){return pick})),__webpack_require__.d(__webpack_exports__,"F",(function(){return omit})),__webpack_require__.d(__webpack_exports__,"I",(function(){return pluck})),__webpack_require__.d(__webpack_exports__,"s",(function(){return filter})),__webpack_require__.d(__webpack_exports__,"t",(function(){return find})),__webpack_require__.d(__webpack_exports__,"C",(function(){return mapObj})),__webpack_require__.d(__webpack_exports__,"B",(function(){return map})),__webpack_require__.d(__webpack_exports__,"U",(function(){return values})),__webpack_require__.d(__webpack_exports__,"e",(function(){return allTrueR})),__webpack_require__.d(__webpack_exports__,"g",(function(){return anyTrueR})),__webpack_require__.d(__webpack_exports__,"T",(function(){return unnestR})),__webpack_require__.d(__webpack_exports__,"v",(function(){return flattenR})),__webpack_require__.d(__webpack_exports__,"J",(function(){return pushR})),__webpack_require__.d(__webpack_exports__,"R",(function(){return uniqR})),__webpack_require__.d(__webpack_exports__,"S",(function(){return unnest})),__webpack_require__.d(__webpack_exports__,"u",(function(){return flatten})),__webpack_require__.d(__webpack_exports__,"l",(function(){return assertPredicate})),__webpack_require__.d(__webpack_exports__,"k",(function(){return assertMap})),__webpack_require__.d(__webpack_exports__,"j",(function(){return assertFn})),__webpack_require__.d(__webpack_exports__,"G",(function(){return pairs})),__webpack_require__.d(__webpack_exports__,"i",(function(){return arrayTuples})),__webpack_require__.d(__webpack_exports__,"h",(function(){return applyPairs})),__webpack_require__.d(__webpack_exports__,"P",(function(){return tail})),__webpack_require__.d(__webpack_exports__,"m",(function(){return copy})),__webpack_require__.d(__webpack_exports__,"a",(function(){return _extend})),__webpack_require__.d(__webpack_exports__,"N",(function(){return silenceUncaughtInPromise})),__webpack_require__.d(__webpack_exports__,"O",(function(){return silentRejection}));var _predicates__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_hof__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_coreservices__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11),__spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r},root="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||void 0,angular=root.angular||{},fromJson=angular.fromJson||JSON.parse.bind(JSON),toJson=angular.toJson||JSON.stringify.bind(JSON),forEach=angular.forEach||function _forEach(obj,cb,_this){if(Object(_predicates__WEBPACK_IMPORTED_MODULE_0__.a)(obj))return obj.forEach(cb,_this);Object.keys(obj).forEach((function(key){return cb(obj[key],key)}))},extend=Object.assign||_extend,equals=angular.equals||_equals;function identity(x){return x}function noop(){}function createProxyFunctions(source,target,bind,fnNames,latebind){void 0===latebind&&(latebind=!1);var bindFunction=function(fnName){return source()[fnName].bind(bind())};return(fnNames=fnNames||Object.keys(source())).reduce((function(acc,name){var fnName;return acc[name]=latebind?(fnName=name,function lateRebindFunction(){return target[fnName]=bindFunction(fnName),target[fnName].apply(null,arguments)}):bindFunction(name),acc}),target)}var inherit=function(parent,extra){return extend(Object.create(parent),extra)},inArray=Object(_hof__WEBPACK_IMPORTED_MODULE_1__.e)(_inArray);function _inArray(array,obj){return-1!==array.indexOf(obj)}var removeFrom=Object(_hof__WEBPACK_IMPORTED_MODULE_1__.e)(_removeFrom);function _removeFrom(array,obj){var idx=array.indexOf(obj);return idx>=0&&array.splice(idx,1),array}var pushTo=Object(_hof__WEBPACK_IMPORTED_MODULE_1__.e)(_pushTo);function _pushTo(arr,val){return arr.push(val),val}var deregAll=function(functions){return functions.slice().forEach((function(fn){"function"==typeof fn&&fn(),removeFrom(functions,fn)}))};function defaults(opts){for(var defaultsList=[],_i=1;_i<arguments.length;_i++)defaultsList[_i-1]=arguments[_i];var defaultVals=extend.apply(void 0,__spreadArrays([{}],defaultsList.reverse()));return extend(defaultVals,pick(opts||{},Object.keys(defaultVals)))}var mergeR=function(memo,item){return extend(memo,item)};function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function pick(obj,propNames){var objCopy={};for(var _prop in obj)-1!==propNames.indexOf(_prop)&&(objCopy[_prop]=obj[_prop]);return objCopy}function omit(obj,propNames){return Object.keys(obj).filter(Object(_hof__WEBPACK_IMPORTED_MODULE_1__.i)(inArray(propNames))).reduce((function(acc,key){return acc[key]=obj[key],acc}),{})}function pluck(collection,propName){return map(collection,Object(_hof__WEBPACK_IMPORTED_MODULE_1__.n)(propName))}function filter(collection,callback){var arr=Object(_predicates__WEBPACK_IMPORTED_MODULE_0__.a)(collection),result=arr?[]:{},accept=arr?function(x){return result.push(x)}:function(x,key){return result[key]=x};return forEach(collection,(function(item,i){callback(item,i)&&accept(item,i)})),result}function find(collection,callback){var result;return forEach(collection,(function(item,i){result||callback(item,i)&&(result=item)})),result}var mapObj=map;function map(collection,callback,target){return target=target||(Object(_predicates__WEBPACK_IMPORTED_MODULE_0__.a)(collection)?[]:{}),forEach(collection,(function(item,i){return target[i]=callback(item,i)})),target}var values=function(obj){return Object.keys(obj).map((function(key){return obj[key]}))},allTrueR=function(memo,elem){return memo&&elem},anyTrueR=function(memo,elem){return memo||elem},unnestR=function(memo,elem){return memo.concat(elem)},flattenR=function(memo,elem){return Object(_predicates__WEBPACK_IMPORTED_MODULE_0__.a)(elem)?memo.concat(elem.reduce(flattenR,[])):pushR(memo,elem)};function pushR(arr,obj){return arr.push(obj),arr}var uniqR=function(acc,token){return inArray(acc,token)?acc:pushR(acc,token)},unnest=function(arr){return arr.reduce(unnestR,[])},flatten=function(arr){return arr.reduce(flattenR,[])},assertPredicate=assertFn,assertMap=assertFn;function assertFn(predicateOrMap,errMsg){return void 0===errMsg&&(errMsg="assert failure"),function(obj){var result=predicateOrMap(obj);if(!result)throw new Error(Object(_predicates__WEBPACK_IMPORTED_MODULE_0__.d)(errMsg)?errMsg(obj):errMsg);return result}}var pairs=function(obj){return Object.keys(obj).map((function(key){return[key,obj[key]]}))};function arrayTuples(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(0===args.length)return[];for(var maxArrayLen=args.reduce((function(min,arr){return Math.min(arr.length,min)}),9007199254740991),result=[],_loop_1=function(i){switch(args.length){case 1:result.push([args[0][i]]);break;case 2:result.push([args[0][i],args[1][i]]);break;case 3:result.push([args[0][i],args[1][i],args[2][i]]);break;case 4:result.push([args[0][i],args[1][i],args[2][i],args[3][i]]);break;default:result.push(args.map((function(array){return array[i]})))}},i=0;i<maxArrayLen;i++)_loop_1(i);return result}function applyPairs(memo,keyValTuple){var key,value;if(Object(_predicates__WEBPACK_IMPORTED_MODULE_0__.a)(keyValTuple)&&(key=keyValTuple[0],value=keyValTuple[1]),!Object(_predicates__WEBPACK_IMPORTED_MODULE_0__.l)(key))throw new Error("invalid parameters to applyPairs");return memo[key]=value,memo}function tail(arr){return arr.length&&arr[arr.length-1]||void 0}function copy(src,dest){return dest&&Object.keys(dest).forEach((function(key){return delete dest[key]})),dest||(dest={}),extend(dest,src)}function _extend(toObj){for(var i=1;i<arguments.length;i++){var obj=arguments[i];if(obj)for(var keys=Object.keys(obj),j=0;j<keys.length;j++)toObj[keys[j]]=obj[keys[j]]}return toObj}function _equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!=o1&&o2!=o2)return!0;var t1=typeof o1;if(t1!==typeof o2||"object"!==t1)return!1;var tup=[o1,o2];if(Object(_hof__WEBPACK_IMPORTED_MODULE_1__.a)(_predicates__WEBPACK_IMPORTED_MODULE_0__.a)(tup))return function _arraysEq(a1,a2){return a1.length===a2.length&&arrayTuples(a1,a2).reduce((function(b,t){return b&&_equals(t[0],t[1])}),!0)}(o1,o2);if(Object(_hof__WEBPACK_IMPORTED_MODULE_1__.a)(_predicates__WEBPACK_IMPORTED_MODULE_0__.b)(tup))return o1.getTime()===o2.getTime();if(Object(_hof__WEBPACK_IMPORTED_MODULE_1__.a)(_predicates__WEBPACK_IMPORTED_MODULE_0__.k)(tup))return o1.toString()===o2.toString();if(Object(_hof__WEBPACK_IMPORTED_MODULE_1__.a)(_predicates__WEBPACK_IMPORTED_MODULE_0__.d)(tup))return!0;if([_predicates__WEBPACK_IMPORTED_MODULE_0__.d,_predicates__WEBPACK_IMPORTED_MODULE_0__.a,_predicates__WEBPACK_IMPORTED_MODULE_0__.b,_predicates__WEBPACK_IMPORTED_MODULE_0__.k].map(_hof__WEBPACK_IMPORTED_MODULE_1__.c).reduce((function(b,fn){return b||!!fn(tup)}),!1))return!1;var keys={};for(var key in o1){if(!_equals(o1[key],o2[key]))return!1;keys[key]=!0}for(var key in o2)if(!keys[key])return!1;return!0}var silenceUncaughtInPromise=function(promise){return promise.catch((function(e){return 0}))&&promise},silentRejection=function(error){return silenceUncaughtInPromise(_coreservices__WEBPACK_IMPORTED_MODULE_2__.b.$q.reject(error))}}).call(this,__webpack_require__(91))},379:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"UIRouterUpgradeModule",(function(){return uirouter_angular_hybrid_UIRouterUpgradeModule})),__webpack_require__.d(__webpack_exports__,"UIViewNgUpgrade",(function(){return uirouter_angular_hybrid_UIViewNgUpgrade})),__webpack_require__.d(__webpack_exports__,"getParentUIViewInject",(function(){return getParentUIViewInject})),__webpack_require__.d(__webpack_exports__,"getUIRouter",(function(){return getUIRouter})),__webpack_require__.d(__webpack_exports__,"objectFactory",(function(){return objectFactory})),__webpack_require__.d(__webpack_exports__,"uiRouterUpgradeFactory",(function(){return uiRouterUpgradeFactory})),__webpack_require__.d(__webpack_exports__,"upgradeModule",(function(){return upgradeModule})),__webpack_require__.d(__webpack_exports__,"ɵ0",(function(){return uirouter_angular_hybrid_0}));var tslib_es6=__webpack_require__(0),core=__webpack_require__(1),fesm5_static=__webpack_require__(156),lib_esm=__webpack_require__(2),common=__webpack_require__(10),ReplaySubject=__webpack_require__(384),of=__webpack_require__(217),from=__webpack_require__(229),concat=__webpack_require__(833),BehaviorSubject=__webpack_require__(830),combineLatest=__webpack_require__(831),switchMap=__webpack_require__(829),map=__webpack_require__(216),mergeMap=(__webpack_require__(618),__webpack_require__(380)),filter=__webpack_require__(381),ui_router_rx_UIRouterRx=function(){function UIRouterRx(router){this.name="@uirouter/rx",this.deregisterFns=[];var start$=new ReplaySubject.a(1),success$=start$.pipe(Object(mergeMap.a)((function(t){return t.promise.then((function(){return t}),(function(){return null}))})),Object(filter.a)((function(t){return!!t}))),params$=success$.pipe(Object(map.a)((function(transition){return transition.params()}))),states$=new ReplaySubject.a(1);function onStatesChangedEvent(event,states){var changeEvent={currentStates:router.stateRegistry.get(),registered:[],deregistered:[]};event&&(changeEvent[event]=states),states$.next(changeEvent)}this.deregisterFns.push(router.transitionService.onStart({},(function(transition){return start$.next(transition)}))),this.deregisterFns.push(router.stateRegistry.onStatesChanged(onStatesChangedEvent)),onStatesChangedEvent(null,null),Object.assign(router.globals,{start$:start$,success$:success$,params$:params$,states$:states$})}return UIRouterRx.prototype.dispose=function(){this.deregisterFns.forEach((function(deregisterFn){return deregisterFn()})),this.deregisterFns=[]},UIRouterRx}();__webpack_require__(18),__webpack_require__(828),__webpack_require__(832);function ng2ViewsBuilder(state){var views={},viewsObject=state.views||{$default:Object(lib_esm.pick)(state,["component","bindings"])};return Object(lib_esm.forEach)(viewsObject,(function(config,name){if(name=name||"$default",Object(lib_esm.isFunction)(config)&&(config={component:config}),0!==Object.keys(config).length){config.$type="ng2",config.$context=state,config.$name=name;var normalized=lib_esm.ViewService.normalizeUIViewTarget(config.$context,config.$name);config.$uiViewName=normalized.uiViewName,config.$uiViewContextAnchor=normalized.uiViewContextAnchor,views[name]=config}})),views}var id=0,uirouter_angular_Ng2ViewConfig=function(){function Ng2ViewConfig(path,viewDecl){this.path=path,this.viewDecl=viewDecl,this.$id=id++,this.loaded=!0}return Ng2ViewConfig.prototype.load=function(){return lib_esm.services.$q.when(this)},Ng2ViewConfig}(),MergeInjector=function(){function MergeInjector(){for(var injectors=[],_i=0;_i<arguments.length;_i++)injectors[_i]=arguments[_i];if(injectors.length<2)throw new Error("pass at least two injectors");this.injectors=injectors}return MergeInjector.prototype.get=function(token,notFoundValue){for(var i=0;i<this.injectors.length;i++){var val=this.injectors[i].get(token,MergeInjector.NOT_FOUND);if(val!==MergeInjector.NOT_FOUND)return val}if(arguments.length>=2)return notFoundValue;this.injectors[0].get(token)},MergeInjector.NOT_FOUND={},MergeInjector}(),id$1=0,ng2ComponentInputs=function(factory){return factory.inputs.map((function(input){return{prop:input.propName,token:input.templateName}}))},uirouter_angular_UIView=function(){function UIView(router,parent,viewContainerRef){this.router=router,this.viewContainerRef=viewContainerRef,this._uiViewData={},this._parent=parent}var UIView_1;return UIView_1=UIView,Object.defineProperty(UIView.prototype,"_name",{set:function(val){this.name=val},enumerable:!0,configurable:!0}),Object.defineProperty(UIView.prototype,"state",{get:function(){return Object(lib_esm.parse)("_uiViewData.config.viewDecl.$context.self")(this)},enumerable:!0,configurable:!0}),UIView.prototype.ngOnInit=function(){var _this=this,router=this.router,parentFqn=this._parent.fqn,name=this.name||"$default";this._uiViewData={$type:"ng2",id:id$1++,name:name,fqn:parentFqn?parentFqn+"."+name:name,creationContext:this._parent.context,configUpdated:this._viewConfigUpdated.bind(this),config:void 0},this._deregisterUiCanExitHook=router.transitionService.onBefore({},(function(trans){return _this._invokeUiCanExitHook(trans)})),this._deregisterUiOnParamsChangedHook=router.transitionService.onSuccess({},(function(trans){return _this._invokeUiOnParamsChangedHook(trans)})),this._deregisterUIView=router.viewService.registerUIView(this._uiViewData)},UIView.prototype._invokeUiCanExitHook=function(trans){var instance=this._componentRef&&this._componentRef.instance,uiCanExitFn=instance&&instance.uiCanExit;if(Object(lib_esm.isFunction)(uiCanExitFn)){var state=this.state;-1!==trans.exiting().indexOf(state)&&trans.onStart({},(function(){return uiCanExitFn.call(instance,trans)}))}},UIView.prototype._invokeUiOnParamsChangedHook=function($transition$){var instance=this._componentRef&&this._componentRef.instance,uiOnParamsChanged=instance&&instance.uiOnParamsChanged;if(Object(lib_esm.isFunction)(uiOnParamsChanged)){var viewState=this.state;if($transition$===new lib_esm.ResolveContext(this._uiViewData.config.path).getResolvable("$transition$").data||-1!==$transition$.exiting().indexOf(viewState))return;var toParams_1=$transition$.params("to"),fromParams_1=$transition$.params("from"),getNodeSchema=function(node){return node.paramSchema},toSchema=$transition$.treeChanges("to").map(getNodeSchema).reduce(lib_esm.unnestR,[]),fromSchema_1=$transition$.treeChanges("from").map(getNodeSchema).reduce(lib_esm.unnestR,[]),changedToParams=toSchema.filter((function(param){var idx=fromSchema_1.indexOf(param);return-1===idx||!fromSchema_1[idx].type.equals(toParams_1[param.id],fromParams_1[param.id])}));if(changedToParams.length){var changedKeys_1=changedToParams.map((function(x){return x.id})),newValues=Object(lib_esm.filter)(toParams_1,(function(val,key){return-1!==changedKeys_1.indexOf(key)}));instance.uiOnParamsChanged(newValues,$transition$)}}},UIView.prototype._disposeLast=function(){this._componentRef&&this._componentRef.destroy(),this._componentRef=null},UIView.prototype.ngOnDestroy=function(){this._deregisterUIView&&this._deregisterUIView(),this._deregisterUiCanExitHook&&this._deregisterUiCanExitHook(),this._deregisterUiOnParamsChangedHook&&this._deregisterUiOnParamsChangedHook(),this._deregisterUIView=this._deregisterUiCanExitHook=this._deregisterUiOnParamsChangedHook=null,this._disposeLast()},UIView.prototype._viewConfigUpdated=function(config){if(!config)return this._disposeLast();config instanceof uirouter_angular_Ng2ViewConfig&&this._uiViewData.config!==config&&(this._disposeLast(),lib_esm.trace.traceUIViewConfigUpdated(this._uiViewData,config&&config.viewDecl.$context),this._applyUpdatedConfig(config),this._componentRef.changeDetectorRef.markForCheck())},UIView.prototype._applyUpdatedConfig=function(config){this._uiViewData.config=config;var context=new lib_esm.ResolveContext(config.path),componentInjector=this._getComponentInjector(context),componentClass=config.viewDecl.component,compFactory=componentInjector.get(core.ComponentFactoryResolver).resolveComponentFactory(componentClass);this._componentRef=this._componentTarget.createComponent(compFactory,void 0,componentInjector),this._applyInputBindings(compFactory,this._componentRef.instance,context,componentClass)},UIView.prototype._getComponentInjector=function(context){var newProviders=context.getTokens().map((function(token){return context.getResolvable(token)})).filter((function(r){return r.resolved})).map((function(r){return{provide:r.token,useValue:context.injector().get(r.token)}})),parentInject={context:this._uiViewData.config.viewDecl.$context,fqn:this._uiViewData.fqn};newProviders.push({provide:UIView_1.PARENT_INJECT,useValue:parentInject});var parentComponentInjector=this.viewContainerRef.injector,moduleInjector=context.getResolvable(lib_esm.NATIVE_INJECTOR_TOKEN).data,mergedParentInjector=new MergeInjector(moduleInjector,parentComponentInjector);return core.ReflectiveInjector.resolveAndCreate(newProviders,mergedParentInjector)},UIView.prototype._applyInputBindings=function(factory,component,context,componentClass){var bindings=this._uiViewData.config.viewDecl.bindings||{},explicitBoundProps=Object.keys(bindings),explicitInputTuples=explicitBoundProps.reduce((function(acc,key){return acc.concat([{prop:(prop=key,input=factory.inputs.find((function(i){return i.templateName===prop})),input&&input.propName||prop),token:bindings[key]}]);var prop,input}),[]),implicitInputTuples=ng2ComponentInputs(factory).filter((function(tuple){return!Object(lib_esm.inArray)(explicitBoundProps,tuple.prop)})),injector=context.injector();explicitInputTuples.concat(implicitInputTuples).map((function(tuple){return{prop:tuple.prop,resolvable:context.getResolvable(tuple.token)}})).filter((function(tuple){return tuple.resolvable&&tuple.resolvable.resolved})).forEach((function(tuple){component[tuple.prop]=injector.get(tuple.resolvable.token)}))},UIView.PARENT_INJECT="UIView.PARENT_INJECT",Object(tslib_es6.b)([Object(core.ViewChild)("componentTarget",{read:core.ViewContainerRef,static:!0}),Object(tslib_es6.d)("design:type",core.ViewContainerRef)],UIView.prototype,"_componentTarget",void 0),Object(tslib_es6.b)([Object(core.Input)("name"),Object(tslib_es6.d)("design:type",String)],UIView.prototype,"name",void 0),Object(tslib_es6.b)([Object(core.Input)("ui-view"),Object(tslib_es6.d)("design:type",String),Object(tslib_es6.d)("design:paramtypes",[String])],UIView.prototype,"_name",null),UIView=UIView_1=Object(tslib_es6.b)([Object(core.Component)({selector:"ui-view, [ui-view]",exportAs:"uiView",template:'\n    <ng-template #componentTarget></ng-template>\n    <ng-content *ngIf="!_componentRef"></ng-content>\n  '}),Object(tslib_es6.e)(1,Object(core.Inject)(UIView_1.PARENT_INJECT)),Object(tslib_es6.d)("design:paramtypes",[lib_esm.UIRouter,Object,core.ViewContainerRef])],UIView)}();function applyModuleConfig(uiRouter,injector,module){return void 0===module&&(module={}),Object(lib_esm.isFunction)(module.config)&&module.config(uiRouter,injector,module),(module.states||[]).map((function(state){return uiRouter.stateRegistry.register(state)}))}var uirouter_angular_AnchorUISref=function(){function AnchorUISref(_el,_renderer){this._el=_el,this._renderer=_renderer}return AnchorUISref.prototype.openInNewTab=function(){return"_blank"===this._el.nativeElement.target},AnchorUISref.prototype.update=function(href){href&&""!==href?this._renderer.setProperty(this._el.nativeElement,"href",href):this._renderer.removeAttribute(this._el.nativeElement,"href")},AnchorUISref=Object(tslib_es6.b)([Object(core.Directive)({selector:"a[uiSref]"}),Object(tslib_es6.d)("design:paramtypes",[core.ElementRef,core.Renderer2])],AnchorUISref)}(),uirouter_angular_UISref=function(){function UISref(_router,_anchorUISref,parent){var _this=this;this.targetState$=new ReplaySubject.a(1),this._emit=!1,this._router=_router,this._anchorUISref=_anchorUISref,this._parent=parent,this._statesSub=_router.globals.states$.subscribe((function(){return _this.update()}))}return Object.defineProperty(UISref.prototype,"uiSref",{set:function(val){this.state=val,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(UISref.prototype,"uiParams",{set:function(val){this.params=val,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(UISref.prototype,"uiOptions",{set:function(val){this.options=val,this.update()},enumerable:!0,configurable:!0}),UISref.prototype.ngOnInit=function(){this._emit=!0,this.update()},UISref.prototype.ngOnChanges=function(changes){this.update()},UISref.prototype.ngOnDestroy=function(){this._emit=!1,this._statesSub.unsubscribe(),this.targetState$.unsubscribe()},UISref.prototype.update=function(){var $state=this._router.stateService;if(this._emit){var newTarget=$state.target(this.state,this.params,this.getOptions());this.targetState$.next(newTarget)}if(this._anchorUISref){var href=$state.href(this.state,this.params,this.getOptions());this._anchorUISref.update(href)}},UISref.prototype.getOptions=function(){var defaultOpts={relative:this._parent&&this._parent.context&&this._parent.context.name,inherit:!0,source:"sref"};return Object(lib_esm.extend)(defaultOpts,this.options||{})},UISref.prototype.go=function(button,ctrlKey,metaKey){if(!(this._anchorUISref&&(this._anchorUISref.openInNewTab()||button||!Object(lib_esm.isNumber)(button)||ctrlKey||metaKey)||!this.state))return this._router.stateService.go(this.state,this.params,this.getOptions()),!1},Object(tslib_es6.b)([Object(core.Input)("uiSref"),Object(tslib_es6.d)("design:type",String)],UISref.prototype,"state",void 0),Object(tslib_es6.b)([Object(core.Input)("uiParams"),Object(tslib_es6.d)("design:type",Object)],UISref.prototype,"params",void 0),Object(tslib_es6.b)([Object(core.Input)("uiOptions"),Object(tslib_es6.d)("design:type",Object)],UISref.prototype,"options",void 0),Object(tslib_es6.b)([Object(core.HostListener)("click",["$event.button","$event.ctrlKey","$event.metaKey"]),Object(tslib_es6.d)("design:type",Function),Object(tslib_es6.d)("design:paramtypes",[Number,Boolean,Boolean]),Object(tslib_es6.d)("design:returntype",void 0)],UISref.prototype,"go",null),UISref=Object(tslib_es6.b)([Object(core.Directive)({selector:"[uiSref]",exportAs:"uiSref"}),Object(tslib_es6.e)(1,Object(core.Optional)()),Object(tslib_es6.e)(2,Object(core.Inject)(uirouter_angular_UIView.PARENT_INJECT)),Object(tslib_es6.d)("design:paramtypes",[lib_esm.UIRouter,uirouter_angular_AnchorUISref,Object])],UISref)}(),inactiveStatus={active:!1,exact:!1,entering:!1,exiting:!1,targetStates:[]},pathMatches=function(target){if(!target.exists())return function(){return!1};var state=target.$state(),targetParamVals=target.params(),paramSchema=lib_esm.PathUtils.buildPath(target).map((function(node){return node.paramSchema})).reduce(lib_esm.unnestR,[]).filter((function(param){return targetParamVals.hasOwnProperty(param.id)}));return function(path){var tailNode=Object(lib_esm.tail)(path);if(!tailNode||tailNode.state!==state)return!1;var paramValues=lib_esm.PathUtils.paramValues(path);return lib_esm.Param.equals(paramSchema,paramValues,targetParamVals)}};function spreadToSubPaths(basePath,appendPath){return appendPath.map((function(node){return basePath.concat(lib_esm.PathUtils.subPath(appendPath,(function(n){return n.state===node.state})))}))}function mergeSrefStatus(left,right){return{active:left.active||right.active,exact:left.exact||right.exact,entering:left.entering||right.entering,exiting:left.exiting||right.exiting,targetStates:left.targetStates.concat(right.targetStates)}}var uirouter_angular_UISrefStatus=function(){function UISrefStatus(_hostUiSref,_globals){this.uiSrefStatus=new core.EventEmitter(!1),this._globals=_globals,this._hostUiSref=_hostUiSref,this.status=Object.assign({},inactiveStatus)}return UISrefStatus.prototype.ngAfterContentInit=function(){var _this=this,transEvents$=this._globals.start$.pipe(Object(switchMap.a)((function(trans){var event=function(evt){return{evt:evt,trans:trans}},transStart$=Object(of.a)(event("start")),transResult=trans.promise.then((function(){return event("success")}),(function(){return event("error")})),transFinish$=Object(from.a)(transResult);return Object(concat.a)(transStart$,transFinish$)}))),withHostSref=function(childrenSrefs){return childrenSrefs.concat(_this._hostUiSref).filter(lib_esm.identity).reduce(lib_esm.uniqR,[])};this._srefs$=new BehaviorSubject.a(withHostSref(this._srefs.toArray())),this._srefChangesSub=this._srefs.changes.subscribe((function(srefs){return _this._srefs$.next(withHostSref(srefs))}));var targetStates$=this._srefs$.pipe(Object(switchMap.a)((function(srefs){return Object(combineLatest.a)(srefs.map((function(sref){return sref.targetState$})))})));this._subscription=transEvents$.pipe(Object(switchMap.a)((function(evt){return targetStates$.pipe(Object(map.a)((function(targets){return targets.map((function(target){return function getSrefStatus(event,srefTarget){var pathMatchesTarget=pathMatches(srefTarget),tc=event.trans.treeChanges(),isStartEvent="start"===event.evt,activePath="success"===event.evt?tc.to:tc.from;return{active:spreadToSubPaths([],activePath).map(pathMatchesTarget).reduce(lib_esm.anyTrueR,!1),exact:pathMatchesTarget(activePath),entering:!!isStartEvent&&spreadToSubPaths(tc.retained,tc.entering).map(pathMatchesTarget).reduce(lib_esm.anyTrueR,!1),exiting:!!isStartEvent&&spreadToSubPaths(tc.retained,tc.exiting).map(pathMatchesTarget).reduce(lib_esm.anyTrueR,!1),targetStates:[srefTarget]}}(evt,target)})).reduce(mergeSrefStatus)})))}))).subscribe(this._setStatus.bind(this))},UISrefStatus.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe(),this._srefChangesSub&&this._srefChangesSub.unsubscribe(),this._srefs$&&this._srefs$.unsubscribe(),this._subscription=this._srefChangesSub=this._srefs$=void 0},UISrefStatus.prototype._setStatus=function(status){this.status=status,this.uiSrefStatus.emit(status)},Object(tslib_es6.b)([Object(core.Output)("uiSrefStatus"),Object(tslib_es6.d)("design:type",Object)],UISrefStatus.prototype,"uiSrefStatus",void 0),Object(tslib_es6.b)([Object(core.ContentChildren)(uirouter_angular_UISref,{descendants:!0}),Object(tslib_es6.d)("design:type",core.QueryList)],UISrefStatus.prototype,"_srefs",void 0),UISrefStatus=Object(tslib_es6.b)([Object(core.Directive)({selector:"[uiSrefStatus],[uiSrefActive],[uiSrefActiveEq]",exportAs:"uiSrefStatus"}),Object(tslib_es6.e)(0,Object(core.Host)()),Object(tslib_es6.e)(0,Object(core.Self)()),Object(tslib_es6.e)(0,Object(core.Optional)()),Object(tslib_es6.d)("design:paramtypes",[uirouter_angular_UISref,lib_esm.UIRouterGlobals])],UISrefStatus)}(),uirouter_angular_UISrefActive=function(){function UISrefActive(uiSrefStatus,rnd,host){var _this=this;this._classes=[],this._classesEq=[],this._subscription=uiSrefStatus.uiSrefStatus.subscribe((function(next){_this._classes.forEach((function(cls){next.active?rnd.addClass(host.nativeElement,cls):rnd.removeClass(host.nativeElement,cls)})),_this._classesEq.forEach((function(cls){next.exact?rnd.addClass(host.nativeElement,cls):rnd.removeClass(host.nativeElement,cls)}))}))}return Object.defineProperty(UISrefActive.prototype,"active",{set:function(val){this._classes=val.split(/\s+/)},enumerable:!0,configurable:!0}),Object.defineProperty(UISrefActive.prototype,"activeEq",{set:function(val){this._classesEq=val.split(/\s+/)},enumerable:!0,configurable:!0}),UISrefActive.prototype.ngOnDestroy=function(){this._subscription.unsubscribe()},Object(tslib_es6.b)([Object(core.Input)("uiSrefActive"),Object(tslib_es6.d)("design:type",String),Object(tslib_es6.d)("design:paramtypes",[String])],UISrefActive.prototype,"active",null),Object(tslib_es6.b)([Object(core.Input)("uiSrefActiveEq"),Object(tslib_es6.d)("design:type",String),Object(tslib_es6.d)("design:paramtypes",[String])],UISrefActive.prototype,"activeEq",null),UISrefActive=Object(tslib_es6.b)([Object(core.Directive)({selector:"[uiSrefActive],[uiSrefActiveEq]"}),Object(tslib_es6.e)(2,Object(core.Host)()),Object(tslib_es6.d)("design:paramtypes",[uirouter_angular_UISrefStatus,core.Renderer2,core.ElementRef])],UISrefActive)}(),_UIROUTER_DIRECTIVES=[uirouter_angular_UISref,uirouter_angular_AnchorUISref,uirouter_angular_UIView,uirouter_angular_UISrefActive,uirouter_angular_UISrefStatus],UIROUTER_ROOT_MODULE=new core.InjectionToken("UIRouter Root Module"),UIROUTER_MODULE_TOKEN=new core.InjectionToken("UIRouter Module");new core.InjectionToken("UIRouter States");function onTransitionReady(transitionService,root){var mod=root[0];return mod&&mod.deferInitialRender?function(){return new Promise((function(resolve){transitionService.onStart({},(function(trans){trans.promise.then(resolve,resolve)}),{invokeLimit:1})}))}:function(){return Promise.resolve()}}function makeRootProviders(module){return[{provide:UIROUTER_ROOT_MODULE,useValue:module,multi:!0},{provide:UIROUTER_MODULE_TOKEN,useValue:module,multi:!0},{provide:core.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:module.states||[],multi:!0},{provide:core.APP_INITIALIZER,useFactory:onTransitionReady,deps:[lib_esm.TransitionService,UIROUTER_ROOT_MODULE],multi:!0}]}function makeChildProviders(module){return[{provide:UIROUTER_MODULE_TOKEN,useValue:module,multi:!0},{provide:core.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:module.states||[],multi:!0}]}var uirouter_angular_UIRouterModule=function(){function UIRouterModule(){}var UIRouterModule_1;return UIRouterModule_1=UIRouterModule,UIRouterModule.forRoot=function(config){return void 0===config&&(config={}),{ngModule:UIRouterModule_1,providers:Object(tslib_es6.g)([_UIROUTER_INSTANCE_PROVIDERS,_UIROUTER_SERVICE_PROVIDERS,(useHash=config.useHash,{provide:common.d,useClass:useHash?common.c:common.e})],makeRootProviders(config))};var useHash},UIRouterModule.forChild=function(module){return void 0===module&&(module={}),{ngModule:UIRouterModule_1,providers:makeChildProviders(module)}},UIRouterModule=UIRouterModule_1=Object(tslib_es6.b)([Object(core.NgModule)({imports:[common.a],declarations:[_UIROUTER_DIRECTIVES],exports:[_UIROUTER_DIRECTIVES],entryComponents:[uirouter_angular_UIView]})],UIRouterModule)}();function loadNgModule(moduleToLoad){return function(transition,stateObject){var ng2Injector=transition.injector().get(lib_esm.NATIVE_INJECTOR_TOKEN);return function loadModuleFactory(moduleToLoad,ng2Injector){if(Object(lib_esm.isString)(moduleToLoad))return ng2Injector.get(core.NgModuleFactoryLoader).load(moduleToLoad);var compiler=ng2Injector.get(core.Compiler);return Promise.resolve(moduleToLoad()).then((function(x){return x&&x.__esModule&&x.default?x.default:x})).then((function(t){return t instanceof core.NgModuleFactory?t:compiler.compileModuleAsync(t)}))}(moduleToLoad,ng2Injector).then((function(factory){return factory.create(ng2Injector)})).then((function(moduleRef){return function applyNgModule(transition,ng2Module,parentInjector,lazyLoadState){var injector=ng2Module.injector,uiRouter=injector.get(lib_esm.UIRouter),registry=uiRouter.stateRegistry,originalName=lazyLoadState.name,originalState=registry.get(originalName),isFuture=/^(.*)\.\*\*$/.exec(originalName),replacementName=isFuture&&isFuture[1],newRootModules=multiProviderParentChildDelta(parentInjector,injector,UIROUTER_ROOT_MODULE).reduce(lib_esm.uniqR,[]),newChildModules=multiProviderParentChildDelta(parentInjector,injector,UIROUTER_MODULE_TOKEN).reduce(lib_esm.uniqR,[]);if(newRootModules.length)throw console.log(newRootModules),new Error("Lazy loaded modules should not contain a UIRouterModule.forRoot() module");var newStateObjects=newChildModules.map((function(module){return applyModuleConfig(uiRouter,injector,module)})).reduce(lib_esm.unnestR,[]).reduce(lib_esm.uniqR,[]);if(isFuture){var replacementState=registry.get(replacementName);if(!replacementState||replacementState===originalState)throw new Error("The Future State named '"+originalName+"' lazy loaded an NgModule. The lazy loaded NgModule must have a state named '"+replacementName+"' which replaces the (placeholder) '"+originalName+"' Future State. Add a '"+replacementName+"' state to the lazy loaded NgModule using UIRouterModule.forChild({ states: CHILD_STATES }).")}return newStateObjects.filter((function(state){return!Object(lib_esm["inArray"])(newStateObjects,state.parent)})).forEach((function(state){return state.resolvables.push(lib_esm.Resolvable.fromData(lib_esm.NATIVE_INJECTOR_TOKEN,injector))})),{}}(0,moduleRef,ng2Injector,stateObject)}))}}function multiProviderParentChildDelta(parent,child,token){var childVals=child.get(token,[]),parentVals=parent.get(token,[]);return childVals.filter((function(val){return-1===parentVals.indexOf(val)}))}function ng2LazyLoadBuilder(state,parent){var loadNgModuleFn=state.loadChildren;return loadNgModuleFn?loadNgModule(loadNgModuleFn):state.lazyLoad}var uirouter_angular_Ng2LocationServices=function(_super){function Ng2LocationServices(router,_locationStrategy,isBrowser){var _this=_super.call(this,router,isBrowser)||this;return _this._locationStrategy=_locationStrategy,_this._locationStrategy.onPopState((function(evt){"hashchange"!==evt.type&&_this._listener(evt)})),_this}return Object(tslib_es6.c)(Ng2LocationServices,_super),Ng2LocationServices.prototype._get=function(){return this._locationStrategy.path(!0).replace(this._locationStrategy.getBaseHref().replace(/\/$/,""),"")},Ng2LocationServices.prototype._set=function(state,title,url,replace){var _a=Object(lib_esm.parseUrl)(url),path=_a.path,search=_a.search,hash=_a.hash,urlWithHash=path+(hash?"#"+hash:"");replace?this._locationStrategy.replaceState(state,title,urlWithHash,search):this._locationStrategy.pushState(state,title,urlWithHash,search)},Ng2LocationServices.prototype.dispose=function(router){_super.prototype.dispose.call(this,router)},Ng2LocationServices}(lib_esm.BaseLocationServices),uirouter_angular_Ng2LocationConfig=function(_super){function Ng2LocationConfig(router,_locationStrategy){var _this=_super.call(this,router,Object(lib_esm.is)(common.e)(_locationStrategy))||this;return _this._locationStrategy=_locationStrategy,_this}return Object(tslib_es6.c)(Ng2LocationConfig,_super),Ng2LocationConfig.prototype.baseHref=function(href){return this._locationStrategy.getBaseHref()},Ng2LocationConfig}(lib_esm.BrowserLocationConfig);var _UIROUTER_INSTANCE_PROVIDERS=[{provide:lib_esm.UIRouter,useFactory:function uiRouterFactory(locationStrategy,rootModules,modules,injector){if(1!==rootModules.length)throw new Error("Exactly one UIRouterModule.forRoot() should be in the bootstrapped app module's imports: []");var router=new lib_esm.UIRouter;router.plugin(ui_router_rx_UIRouterRx),router.plugin(lib_esm.servicesPlugin),lib_esm.services.$injector.get=injector.get.bind(injector),router.locationService=new uirouter_angular_Ng2LocationServices(router,locationStrategy,Object(common.f)(injector.get(core.PLATFORM_ID))),router.locationConfig=new uirouter_angular_Ng2LocationConfig(router,locationStrategy),router.viewService._pluginapi._viewConfigFactory("ng2",(function(path,config){return new uirouter_angular_Ng2ViewConfig(path,config)}));var registry=router.stateRegistry;registry.decorator("views",ng2ViewsBuilder),registry.decorator("lazyLoad",ng2LazyLoadBuilder);var ng2InjectorResolvable=lib_esm.Resolvable.fromData(lib_esm.NATIVE_INJECTOR_TOKEN,injector);return registry.root().resolvables.push(ng2InjectorResolvable),router.urlMatcherFactory.$get(),rootModules.forEach((function(moduleConfig){return function applyRootModuleConfig(uiRouter,injector,module){Object(lib_esm.isDefined)(module.deferIntercept)&&uiRouter.urlService.deferIntercept(module.deferIntercept),Object(lib_esm.isDefined)(module.otherwise)&&uiRouter.urlService.rules.otherwise(module.otherwise),Object(lib_esm.isDefined)(module.initial)&&uiRouter.urlService.rules.initial(module.initial)}(router,0,moduleConfig)})),modules.forEach((function(moduleConfig){return applyModuleConfig(router,injector,moduleConfig)})),router},deps:[common.d,UIROUTER_ROOT_MODULE,UIROUTER_MODULE_TOKEN,core.Injector]},{provide:uirouter_angular_UIView.PARENT_INJECT,useFactory:function parentUIViewInjectFactory(r){return{fqn:null,context:r.root()}},deps:[lib_esm.StateRegistry]},{provide:core.APP_INITIALIZER,useFactory:function appInitializer(router){return function(){router.urlRouter.interceptDeferred||(router.urlService.listen(),router.urlService.sync())}},deps:[lib_esm.UIRouter],multi:!0}];var _UIROUTER_SERVICE_PROVIDERS=[{provide:lib_esm.StateService,useFactory:function fnStateService(r){return r.stateService},deps:[lib_esm.UIRouter]},{provide:lib_esm.TransitionService,useFactory:function fnTransitionService(r){return r.transitionService},deps:[lib_esm.UIRouter]},{provide:lib_esm.UrlMatcherFactory,useFactory:function fnUrlMatcherFactory(r){return r.urlMatcherFactory},deps:[lib_esm.UIRouter]},{provide:lib_esm.UrlRouter,useFactory:function fnUrlRouter(r){return r.urlRouter},deps:[lib_esm.UIRouter]},{provide:lib_esm.UrlService,useFactory:function fnUrlService(r){return r.urlService},deps:[lib_esm.UIRouter]},{provide:lib_esm.ViewService,useFactory:function fnViewService(r){return r.viewService},deps:[lib_esm.UIRouter]},{provide:lib_esm.StateRegistry,useFactory:function fnStateRegistry(r){return r.stateRegistry},deps:[lib_esm.UIRouter]},{provide:lib_esm.UIRouterGlobals,useFactory:function fnGlobals(r){return r.globals},deps:[lib_esm.UIRouter]}],angularjs_lib_esm=(_UIROUTER_INSTANCE_PROVIDERS.concat(_UIROUTER_SERVICE_PROVIDERS),__webpack_require__(297)),angular=(fesm5_static.getAngularJSGlobal||fesm5_static.getAngularLib)();if(!angular)throw new Error("AngularJS not found on window.  https://github.com/ui-router/angular-hybrid/wiki/AngularJS-not-found-on-window");var upgradeModule=angular.module("ui.router.upgrade",["ui.router"]);function objectFactory(){return{}}var uirouter_angular_hybrid_UIViewNgUpgrade=function(){function UIViewNgUpgrade(ref,parent,registry){var ng1elem=angular.element(ref.nativeElement).parent().parent();Object.defineProperty(parent,"context",{get:function(){var data=ng1elem.inheritedData("$uiView");return data&&data.$cfg?data.$cfg.viewDecl.$context:registry.root()},enumerable:!0}),Object.defineProperty(parent,"fqn",{get:function(){var data=ng1elem.inheritedData("$uiView");return data&&data.$uiView?data.$uiView.fqn:null},enumerable:!0})}return UIViewNgUpgrade.ctorParameters=function(){return[{type:core.ElementRef},{type:void 0,decorators:[{type:core.Inject,args:[uirouter_angular_UIView.PARENT_INJECT]}]},{type:lib_esm.StateRegistry}]},Object(tslib_es6.b)([Object(core.Input)()],UIViewNgUpgrade.prototype,"name",void 0),UIViewNgUpgrade=Object(tslib_es6.b)([Object(core.Component)({selector:"ui-view-ng-upgrade",template:'\n    <ui-view [name]="name"></ui-view>\n  ',viewProviders:[{provide:uirouter_angular_UIView.PARENT_INJECT,useFactory:objectFactory}]}),Object(tslib_es6.e)(1,Object(core.Inject)(uirouter_angular_UIView.PARENT_INJECT))],UIViewNgUpgrade)}();function uiRouterUpgradeFactory(router,injector){return injector.get(UIROUTER_MODULE_TOKEN,[]).forEach((function(module){return applyModuleConfig(router,injector,module)})),router}function getUIRouter($injector){return $injector.get("$uiRouter")}function getParentUIViewInject(r){return{fqn:null,context:r.root()}}var uirouter_angular_hybrid_0={},uirouter_angular_hybrid_UIRouterUpgradeModule=function(){function UIRouterUpgradeModule(){}var UIRouterUpgradeModule_1;return UIRouterUpgradeModule_1=UIRouterUpgradeModule,UIRouterUpgradeModule.forRoot=function(module){return void 0===module&&(module={}),{ngModule:UIRouterUpgradeModule_1,providers:makeChildProviders(module)}},UIRouterUpgradeModule.forChild=function(module){return void 0===module&&(module={}),{ngModule:uirouter_angular_UIRouterModule,providers:makeChildProviders(module)}},UIRouterUpgradeModule=UIRouterUpgradeModule_1=Object(tslib_es6.b)([Object(core.NgModule)({imports:[uirouter_angular_UIRouterModule,fesm5_static.UpgradeModule],declarations:[uirouter_angular_hybrid_UIViewNgUpgrade],providers:Object(tslib_es6.g)([{provide:"$uiRouter",useFactory:getUIRouter,deps:["$injector"]},{provide:lib_esm.UIRouter,useFactory:uiRouterUpgradeFactory,deps:["$uiRouter",core.Injector]},{provide:UIROUTER_ROOT_MODULE,useValue:uirouter_angular_hybrid_0,multi:!0},{provide:uirouter_angular_UIView.PARENT_INJECT,useFactory:getParentUIViewInject,deps:[lib_esm.StateRegistry]}],_UIROUTER_SERVICE_PROVIDERS),entryComponents:[uirouter_angular_hybrid_UIViewNgUpgrade],exports:[uirouter_angular_hybrid_UIViewNgUpgrade,uirouter_angular_UIRouterModule]})],UIRouterUpgradeModule)}();upgradeModule.directive("uiViewNgUpgrade",Object(fesm5_static.downgradeComponent)({component:uirouter_angular_hybrid_UIViewNgUpgrade,inputs:["name"]})),upgradeModule.run(["$injector",function(ng1Injector){var $uiRouter=ng1Injector.get("$uiRouter");$uiRouter.plugin(ui_router_rx_UIRouterRx);var mergedInjector={get:function(token,ng2NotFoundValue){var ng2Injector=ng1Injector.get("$$angularInjector");return ng1Injector.has(token)?ng1Injector.get(token):ng2Injector.get(token,ng2NotFoundValue)}},ng2InjectorResolvable=lib_esm.Resolvable.fromData(lib_esm.NATIVE_INJECTOR_TOKEN,mergedInjector);$uiRouter.stateRegistry.root().resolvables.push(ng2InjectorResolvable)}]),upgradeModule.config(["$stateRegistryProvider",function($stateRegistry){$stateRegistry.decorator("lazyLoad",ng2LazyLoadBuilder)}]),upgradeModule.config(["$stateRegistryProvider",function($stateRegistry){$stateRegistry.decorator("views",(function(state,parentFn){var views=parentFn(state);return Object(lib_esm.forEach)(views,(function(viewDecl,viewName){"ng1-to-ng2"!==viewDecl.$type&&"function"!=typeof viewDecl.component||(viewDecl.$type="ng1-to-ng2",viewDecl.templateProvider=null,viewDecl.template="<ui-view-ng-upgrade name='"+viewDecl.$uiViewName+"'></ui-view-ng-upgrade>")})),views}))}]),upgradeModule.run(["$view","$templateFactory",function($view,$templateFactory){$view._pluginapi._viewConfigFactory("ng2",(function(path,config){return new uirouter_angular_Ng2ViewConfig(path,config)})),$view._pluginapi._viewConfigFactory("ng1-to-ng2",(function(path,config){var ng1ViewConfig=new angularjs_lib_esm.Ng1ViewConfig(path,Object.assign({},config,{$type:"ng1"}),$templateFactory);return[new uirouter_angular_Ng2ViewConfig(path,Object.assign({},config,{$type:"ng2"})),ng1ViewConfig]}))}])},4:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"m",(function(){return isUndefined})),__webpack_require__.d(__webpack_exports__,"c",(function(){return isDefined})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isNull})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isNullOrUndefined})),__webpack_require__.d(__webpack_exports__,"d",(function(){return isFunction})),__webpack_require__.d(__webpack_exports__,"h",(function(){return isNumber})),__webpack_require__.d(__webpack_exports__,"l",(function(){return isString})),__webpack_require__.d(__webpack_exports__,"i",(function(){return isObject})),__webpack_require__.d(__webpack_exports__,"a",(function(){return isArray})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isDate})),__webpack_require__.d(__webpack_exports__,"k",(function(){return isRegExp})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isInjectable})),__webpack_require__.d(__webpack_exports__,"j",(function(){return isPromise}));var _hof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),toStr=Object.prototype.toString,tis=function(t){return function(x){return typeof x===t}},isUndefined=tis("undefined"),isDefined=Object(_hof__WEBPACK_IMPORTED_MODULE_0__.i)(isUndefined),isNull=function(o){return null===o},isNullOrUndefined=Object(_hof__WEBPACK_IMPORTED_MODULE_0__.j)(isNull,isUndefined),isFunction=tis("function"),isNumber=tis("number"),isString=tis("string"),isObject=function(x){return null!==x&&"object"==typeof x},isArray=Array.isArray,isDate=function(x){return"[object Date]"===toStr.call(x)},isRegExp=function(x){return"[object RegExp]"===toStr.call(x)};function isInjectable(val){if(isArray(val)&&val.length){var head=val.slice(0,-1),tail=val.slice(-1);return!(head.filter(Object(_hof__WEBPACK_IMPORTED_MODULE_0__.i)(isString)).length||tail.filter(Object(_hof__WEBPACK_IMPORTED_MODULE_0__.i)(isFunction)).length)}return isFunction(val)}var isPromise=Object(_hof__WEBPACK_IMPORTED_MODULE_0__.b)(isObject,Object(_hof__WEBPACK_IMPORTED_MODULE_0__.m)(Object(_hof__WEBPACK_IMPORTED_MODULE_0__.n)("then"),isFunction))},6:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return curry})),__webpack_require__.d(__webpack_exports__,"d",(function(){return compose})),__webpack_require__.d(__webpack_exports__,"m",(function(){return pipe})),__webpack_require__.d(__webpack_exports__,"n",(function(){return prop})),__webpack_require__.d(__webpack_exports__,"o",(function(){return propEq})),__webpack_require__.d(__webpack_exports__,"k",(function(){return parse})),__webpack_require__.d(__webpack_exports__,"i",(function(){return not})),__webpack_require__.d(__webpack_exports__,"b",(function(){return and})),__webpack_require__.d(__webpack_exports__,"j",(function(){return or})),__webpack_require__.d(__webpack_exports__,"a",(function(){return all})),__webpack_require__.d(__webpack_exports__,"c",(function(){return any})),__webpack_require__.d(__webpack_exports__,"h",(function(){return is})),__webpack_require__.d(__webpack_exports__,"f",(function(){return eq})),__webpack_require__.d(__webpack_exports__,"p",(function(){return val})),__webpack_require__.d(__webpack_exports__,"g",(function(){return invoke})),__webpack_require__.d(__webpack_exports__,"l",(function(){return pattern}));var __spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};function curry(fn){return function curried(){if(arguments.length>=fn.length)return fn.apply(this,arguments);var args=Array.prototype.slice.call(arguments);return curried.bind.apply(curried,__spreadArrays([this],args))}}function compose(){var args=arguments,start=args.length-1;return function(){for(var i=start,result=args[start].apply(this,arguments);i--;)result=args[i].call(this,result);return result}}function pipe(){for(var funcs=[],_i=0;_i<arguments.length;_i++)funcs[_i]=arguments[_i];return compose.apply(null,[].slice.call(arguments).reverse())}var prop=function(name){return function(obj){return obj&&obj[name]}},propEq=curry((function(name,_val,obj){return obj&&obj[name]===_val})),parse=function(name){return pipe.apply(null,name.split(".").map(prop))},not=function(fn){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return!fn.apply(null,args)}};function and(fn1,fn2){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return fn1.apply(null,args)&&fn2.apply(null,args)}}function or(fn1,fn2){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return fn1.apply(null,args)||fn2.apply(null,args)}}var all=function(fn1){return function(arr){return arr.reduce((function(b,x){return b&&!!fn1(x)}),!0)}},any=function(fn1){return function(arr){return arr.reduce((function(b,x){return b||!!fn1(x)}),!1)}},is=function(ctor){return function(obj){return null!=obj&&obj.constructor===ctor||obj instanceof ctor}},eq=function(value){return function(other){return value===other}},val=function(v){return function(){return v}};function invoke(fnName,args){return function(obj){return obj[fnName].apply(obj,args)}}function pattern(struct){return function(x){for(var i=0;i<struct.length;i++)if(struct[i][0](x))return struct[i][1](x)}}},617:function(module,exports){},618:function(module,exports){}}]);
//# sourceMappingURL=uirouter.js.map