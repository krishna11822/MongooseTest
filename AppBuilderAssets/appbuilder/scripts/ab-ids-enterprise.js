(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{865:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function($,jQuery,setImmediate,d3){__webpack_require__.d(__webpack_exports__,"DOM",(function(){return DOM})),__webpack_require__.d(__webpack_exports__,"Editors",(function(){return editors})),__webpack_require__.d(__webpack_exports__,"Formatters",(function(){return formatters})),__webpack_require__.d(__webpack_exports__,"GroupBy",(function(){return groupBy})),__webpack_require__.d(__webpack_exports__,"HideFocus",(function(){return HideFocus})),__webpack_require__.d(__webpack_exports__,"Initialize",(function(){return Initialize})),__webpack_require__.d(__webpack_exports__,"Locale",(function(){return Locale})),__webpack_require__.d(__webpack_exports__,"Place",(function(){return Place})),__webpack_require__.d(__webpack_exports__,"RenderLoopItem",(function(){return RenderLoopItem})),__webpack_require__.d(__webpack_exports__,"Validation",(function(){return Validation})),__webpack_require__.d(__webpack_exports__,"base",(function(){return base})),__webpack_require__.d(__webpack_exports__,"breakpoints",(function(){return breakpoints})),__webpack_require__.d(__webpack_exports__,"components",(function(){return components})),__webpack_require__.d(__webpack_exports__,"debug",(function(){return debug})),__webpack_require__.d(__webpack_exports__,"defer",(function(){return defer})),__webpack_require__.d(__webpack_exports__,"env",(function(){return Environment})),__webpack_require__.d(__webpack_exports__,"excel",(function(){return excel})),__webpack_require__.d(__webpack_exports__,"getColorStyleSheet",(function(){return getColorStyleSheet})),__webpack_require__.d(__webpack_exports__,"keyboard",(function(){return keyboard})),__webpack_require__.d(__webpack_exports__,"longPress",(function(){return longPress})),__webpack_require__.d(__webpack_exports__,"masks",(function(){return masks})),__webpack_require__.d(__webpack_exports__,"number",(function(){return numberUtils})),__webpack_require__.d(__webpack_exports__,"object",(function(){return objectUtils})),__webpack_require__.d(__webpack_exports__,"patterns",(function(){return patterns})),__webpack_require__.d(__webpack_exports__,"personalization",(function(){return personalization})),__webpack_require__.d(__webpack_exports__,"renderLoop",(function(){return renderLoop})),__webpack_require__.d(__webpack_exports__,"setColors",(function(){return setColors})),__webpack_require__.d(__webpack_exports__,"setTheme",(function(){return setTheme})),__webpack_require__.d(__webpack_exports__,"smoothScrollTo",(function(){return smoothScrollTo})),__webpack_require__.d(__webpack_exports__,"string",(function(){return stringUtils})),__webpack_require__.d(__webpack_exports__,"theme",(function(){return theme})),__webpack_require__.d(__webpack_exports__,"uniqueIdCount",(function(){return uniqueIdCount})),__webpack_require__.d(__webpack_exports__,"utils",(function(){return utils})),__webpack_require__.d(__webpack_exports__,"version",(function(){return version})),__webpack_require__.d(__webpack_exports__,"xss",(function(){return xssUtils}));var debug=Object.freeze({__proto__:null,enableTimeLogging:!1,logTimeStart:function logTimeStart(label){},logTimeEnd:function logTimeEnd(label){},enableConsoleLogging:!1,log:function log(type,message){},getComponents:function getComponents(rootElem){var allElems=$(rootElem||"body").find("*"),results=[];return allElems.each((function(i,thisElem){var data=$(thisElem).data();data&&Object.keys(data).length&&results.push({data:data,element:thisElem})})),results}});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){for(var matches=(this.document||this.ownerDocument).querySelectorAll(s),i=matches.length;--i>=0&&matches.item(i)!==this;);return i>-1}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(item){item.hasOwnProperty("remove")||Object.defineProperty(item,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function remove(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}));var version="4.27.5";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _construct(Parent,args,Class){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance}).apply(null,arguments)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var xssUtils={stripHTML:function stripHTML(str){var newStr=str;return newStr?newStr=newStr.replace(/<\/?[^>]+(>|$)/g,""):""},stripTags:function(html,allowed){if(!html)return"";if("number"==typeof html)return html;var whitelist=("".concat(allowed||"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return html.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(tags,(function($0,$1){return whitelist.indexOf("<"+$1.toLowerCase()+">")>-1?$0:""})).replace(tags,(function($0,$1){return whitelist.indexOf("<"+$1.toLowerCase()+">")>-1?$0:""})).replace(tags,(function($0,$1){return whitelist.indexOf("<"+$1.toLowerCase()+">")>-1?$0:""}))},sanitizeConsoleMethods:function(html){var expr=new RegExp("console\\.(".concat(["assert","clear","count","debug","dirxml","dir","error","exception","groupCollapsed","groupEnd","group","info","log","markTimeline","profileEnd","profile","table","timeEnd","timeStamp","time","trace","warn"].join("|"),")((\\s+)?\\(([^)]+)\\);?)?"),"igm");return"string"!=typeof html?html:html.replace(expr,"")},sanitizeHTML:function(html){var santizedHtml=html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/g,"");return santizedHtml=santizedHtml.replace(/<[^>]+/g,(function(match){return match.replace(/(\/|\s)on\w+=(\'|")?[^"]*(\'|")?/g,"")})),santizedHtml=(santizedHtml=this.sanitizeConsoleMethods(santizedHtml)).replace(/<\/script>/g,"")},ensureAlphaNumeric:function(string){return"number"==typeof string?string:this.stripTags(string).replace(/[^a-z0-9-]/gi,"","")},ensureAlphaNumericWithSpaces:function(string){return"number"==typeof string?string:this.stripTags(string).replace(/[^a-z0-9 ]/gi,"","")},escapeHTML:function(value){var newValue=value;if("string"==typeof newValue){var map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return newValue.replace(/[&<>"']/gi,(function(match){return map[match]}))}return newValue},unescapeHTML:function(value){return""===value?"":"string"==typeof value?(new DOMParser).parseFromString(value,"text/html").documentElement.textContent:value},htmlEntities:function(string){return String(string).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},isUrlLocal:function(url){return!(""===url)&&("/"===url[0]&&(1===url.length||"/"!==url[1]&&"\\"!==url[1])||url.length>1&&"~"===url[0]&&"/"===url[1])||url.length>=1&&"#"===url[0]}},DOM={isValidElement:function isValidElement(el){return el instanceof HTMLElement||el instanceof SVGElement},getAttributes:function getAttributes(element){return element&&(element instanceof HTMLElement||element instanceof SVGElement)?element.attributes:{}},classNameExists:function classNameExists(element){var cn=element.className;return cn&&cn.length>0},hasClass:function hasClass(el,className){if(!el.classList)return!1;if(el.className)return new RegExp("\\b".concat(className,"\\b")).test(el.className);var classAttr=el.getAttribute("class");return!(!classAttr||!classAttr.length)&&classAttr.indexOf(className)>-1},addClass:function addClass(el){if(el){for(var classStr="",_len=arguments.length,className=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)className[_key-1]=arguments[_key];for(var i=0;i<className.length;i++)el.classList?el.classList.add(className[i]):DOM.hasClass(el,[i])||(classStr.length&&(classStr+=" "),classStr+=className[i]);classStr.length&&$(el).addClass(classStr)}},removeClass:function removeClass(el){if(el){for(var classStr="",_len2=arguments.length,className=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)className[_key2-1]=arguments[_key2];for(var i=0;i<className.length;i++)el.classList?el.classList.remove(className[i]):DOM.hasClass(el,[i])||(classStr.length&&(classStr+=" "),classStr+=className[i]);classStr.length&&$(el).removeClass(classStr)}},isElement:function isElement(el){return!!(el instanceof HTMLElement||el instanceof SVGElement||el instanceof $&&el.length)},getDimensions:function getDimensions(el){if(!DOM.isElement(el))return{};if(el instanceof $){if(!el.length)return{};el=el[0]}var rect=el.getBoundingClientRect(),rectObj={};for(var prop in rect)isNaN(rect[prop])||(rectObj[prop]=rect[prop]);return rectObj},append:function append(el,contents,stripTags){var domEl=el;el instanceof $&&el.length&&(domEl=domEl[0]),(domEl instanceof HTMLElement||domEl instanceof SVGElement)&&domEl.insertAdjacentHTML("beforeend",this.xssClean(contents,stripTags))},remove:function append(el){var domEl=el;el instanceof $&&el.length&&(domEl=domEl[0]),(domEl instanceof HTMLElement||domEl instanceof SVGElement)&&el.parentNode&&el.parentNode.removeChild(el)},setAttribute:function append(el,attribute,value){var domEl=el;el instanceof $&&el.length&&(domEl=domEl[0]),(domEl instanceof HTMLElement||domEl instanceof SVGElement)&&domEl.setAttribute("attribute",value)},xssClean:function xssClean(contents,stripTags){var markup=contents;return stripTags&&"*"!==stripTags&&(markup=xssUtils.stripTags(contents,stripTags)),"*"===stripTags&&(markup=xssUtils.sanitizeHTML(contents)),markup},html:function html(el,contents,stripTags){var domEl=el;el instanceof $&&el.length&&(domEl=domEl[0]),(domEl instanceof HTMLElement||domEl instanceof SVGElement)&&(domEl.innerHTML=this.xssClean(contents,stripTags))},parents:function parents(el,selector,closest){var thisEl,parentEls=[];if(!DOM.isValidElement(el))return parentEls;for(;el.parentNode&&(!closest||!parentEls.length);)el=el.parentNode,(thisEl=el)!==document&&thisEl.matches(selector)&&parentEls.push(thisEl);return closest?parentEls[0]:parentEls},getNextSibling:function getNextSibling(el,selector){el instanceof $&&el.length&&(el=el[0]);var sibling=el.nextElementSibling;if(!selector)return sibling;for(;sibling;){if(sibling.matches(selector))return sibling;sibling=sibling.nextElementSibling}},getPreviousSibling:function getPreviousSibling(el,selector){el instanceof $&&el.length&&(el=el[0]);var sibling=el.previousElementSibling;if(!selector)return sibling;for(;sibling;){if(sibling.matches(selector))return sibling;sibling=sibling.previousElementSibling}}},breakpoints={phone:320,slim:400,phablet:610,"phone-to-tablet":767,"wide-tablet":968,"tablet-to-desktop":1280,desktop:1024,"desktop-to-extralarge":1600},availableBreakpoints=Object.keys(breakpoints);function debounce(func,threshold,execAsap){var timeout;return function debounced(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var obj=this;function delayed(){execAsap||func.apply(obj,args),timeout=null}timeout?clearTimeout(timeout):execAsap&&func.apply(obj,args),timeout=setTimeout(delayed,threshold||250)}}breakpoints.available=availableBreakpoints,breakpoints.current=function(){var afterElement=!!window.getComputedStyle&&window.getComputedStyle(document.body,":after");return afterElement?(afterElement.getPropertyValue("content")||"").replace(/"/g,""):""},breakpoints.isAbove=function isAbove(breakpoint){var bp=breakpoints[breakpoint];return!!bp&&$(window).width()>bp-1},breakpoints.isBelow=function isBelow(breakpoint){var bp=breakpoints[breakpoint];return!!bp&&$(window).width()<bp},breakpoints.compare=function compare(){this.last||(this.last="");var cur=this.current();this.last!==cur&&($("body").triggerHandler("breakpoint-change",[{previous:this.last,current:cur}]),this.last=cur)},breakpoints.isHidden=function(element){if(!element||!DOM.isElement(element))return!1;var cl=element.classList;if(!cl.length)return!1;if(cl.contains("hidden"))return!0;var size={phonedown:"xs",phone:"sm",tablet:"md",desktop:"lg",extralarge:"xl"}[this.current()],hiddenClassName="hidden-".concat(size),visibleClassName="visible-".concat(size,"-");return!!cl.contains(hiddenClassName)||(cl.toString().indexOf(visibleClassName),!1)},$.fn.isHiddenAtBreakpoint=function(){return!!this.length&&breakpoints.isHidden($(this).first()[0])};$.fn.debouncedResize=function(fn){return fn?this.bind("resize",debounce(fn)):this.trigger("debouncedResize")};var Environment={browser:{},features:{touch:"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},os:{},devicespecs:{},get rtl(){return"rtl"===$("html").attr("dir")},set:function set(){$("html").attr("data-sohoxi-version",version),this.viewport=document.querySelector("meta[name=viewport]"),this.viewport&&this.viewport.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0"),this.addBrowserClasses(),this.addGlobalResize(),this.addDeviceSpecs()},addBrowserClasses:function addBrowserClasses(){var ua=navigator.userAgent||navigator.vendor||window.opera,platform=navigator.platform,html=$("html"),cssClasses="";if(-1!==ua.indexOf("Safari")&&-1===ua.indexOf("Chrome")&&-1===ua.indexOf("Android")&&(cssClasses+="is-safari ",this.browser.name="safari"),this.browser.isWKWebView=function(){return!1},"iP"===navigator.platform.substr(0,2)){var lte9=/constructor/i.test(window.HTMLElement),idb=!!window.indexedDB;(window.webkit&&window.webkit.messageHandlers||!lte9||idb)&&(this.browser.name="wkwebview",cssClasses+="is-safari is-wkwebview ",this.browser.isWKWebView=function(){return!0})}-1!==ua.indexOf("Chrome")&&(cssClasses+="is-chrome ",this.browser.name="chrome");if(["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(platform)>-1&&!/Linux/.test(platform)&&(cssClasses+="is-mac ",this.os.name="Mac OS X"),ua.indexOf("Firefox")>0&&(cssClasses+="is-firefox ",this.browser.name="firefox"),ua.match(/Edge\//)&&(cssClasses+="ie ie-edge ",this.browser.name="edge",this.browser.version=navigator.appVersion.indexOf("Edge/18")>-1?"18":"17",cssClasses+="ie-edge".concat(this.browser.version)),ua.match(/Trident/)&&(cssClasses+="ie ",this.browser.name="ie"),(navigator.appVersion.indexOf("MSIE 8.0")>-1||ua.indexOf("MSIE 8.0")>-1||8===document.documentMode)&&(cssClasses+="ie8 ",this.browser.version="8"),navigator.appVersion.indexOf("MSIE 9.0")>-1&&(cssClasses+="ie9 ",this.browser.version="9"),navigator.appVersion.indexOf("MSIE 10.0")>-1?(cssClasses+="ie10 ",this.browser.version="10"):ua.match(/Trident\/7\./)&&(cssClasses+="ie11 ",this.browser.version="11"),/iPhone|iPod|iPad/.test(ua)){cssClasses+="ios ",this.os.name="ios";for(var iDevices=["iPod","iPad","iPhone"],i=0;i<iDevices.length;i++)new RegExp(iDevices[i]).test(ua)&&(cssClasses+="".concat(iDevices[i].toLowerCase()," "),this.device=iDevices[i])}/Android/.test(ua)&&(cssClasses+="android ",this.os.name="android"),!this.os.name&&/Linux/.test(platform)&&(this.os.name="linux"),html.addClass(cssClasses)},addDeviceSpecs:function addDeviceSpecs(){var nameOffset,verOffset,ix,nAppVer=navigator.appVersion,nUAgent=navigator.userAgent,browser=navigator.appName,version=" ".concat(parseFloat(navigator.appVersion)),majorVersion=parseInt(navigator.appVersion,10),browserVersionName="";-1!==(verOffset=nUAgent.indexOf("Opera"))&&(browser="Opera",version=nUAgent.substring(verOffset+6),-1!==(verOffset=nUAgent.indexOf("Version"))&&(version=nUAgent.substring(verOffset+8))),-1!==(verOffset=nUAgent.indexOf("OPR"))?(browser="Opera",version=nUAgent.substring(verOffset+4)):-1!==(verOffset=nUAgent.indexOf("Edge"))?(browser="Microsoft Edge",version=nUAgent.substring(verOffset+5)):-1!==(verOffset=nUAgent.indexOf("MSIE"))?(browser="Microsoft Internet Explorer",version=nUAgent.substring(verOffset+5)):-1!==(verOffset=nUAgent.indexOf("Chrome"))?(browser="Chrome",version=nUAgent.substring(verOffset+7),nUAgent.indexOf("Edg")>-1&&(browserVersionName="Microsoft Edge")):-1!==(verOffset=nUAgent.indexOf("Safari"))?(browser="Safari",version=nUAgent.substring(verOffset+7),-1!==(verOffset=nUAgent.indexOf("Version"))&&(version=nUAgent.substring(verOffset+8))):this.browser.isWKWebView()?(browser="WKWebView",version="",majorVersion=""):-1!==(verOffset=nUAgent.indexOf("Firefox"))?(browser="Firefox",version=nUAgent.substring(verOffset+8)):-1!==nUAgent.indexOf("Trident/")?(browser="Microsoft Internet Explorer",version=nUAgent.substring(nUAgent.indexOf("rv:")+3)):(nameOffset=nUAgent.lastIndexOf(" ")+1)<(verOffset=nUAgent.lastIndexOf("/"))&&(browser=nUAgent.substring(nameOffset,verOffset),version=nUAgent.substring(verOffset+1),browser.toLowerCase()===browser.toUpperCase()&&(browser=navigator.appName)),-1!==(ix=version.indexOf(";"))&&(version=version.substring(0,ix)),-1!==(ix=version.indexOf(" "))&&(version=version.substring(0,ix)),-1!==(ix=version.indexOf(")"))&&(version=version.substring(0,ix)),majorVersion=" ".concat(parseInt(version,10)),isNaN(majorVersion)&&(version=" ".concat(parseFloat(navigator.appVersion)),majorVersion=parseInt(navigator.appVersion,10));var mobile=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(nAppVer),os="-",clientStrings=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"UNIX",r:/UNIX/}];for(var id in clientStrings){var cs=clientStrings[id];if(cs.r.test(nUAgent)){os=cs.s;break}}var osVersion="-";switch(/Windows/.test(os)&&(osVersion=/Windows (.*)/.exec(os)[1]),os){case"Mac OS X":osVersion=/Mac OS X (10[\.\_\d]+)/.exec(nUAgent)[1].replace(/\_/g,".");break;case"Android":osVersion=/Android ([\.\_\d]+)/.exec(nUAgent)[1];break;case"iOS":osVersion=/OS (\d+)_?(\d+)?/.exec(nUAgent),osVersion="".concat(osVersion[1],".").concat(osVersion[2],".").concat(0|osVersion[3])}this.devicespecs={currentBrowser:browser,browserVersion:version.trim(),browserMajorVersion:majorVersion,isMobile:mobile,os:os,currentOSVersion:osVersion,browserVersionName:browserVersionName}},addGlobalResize:function addGlobalResize(){$(window).debouncedResize((function(){$("body").triggerHandler("resize",[window]),breakpoints.compare()})),$(window).on("orientationchange load",(function(){return breakpoints.compare()}))},removeGlobalEvents:function removeGlobalEvents(){$(window).off("scroll.".concat("environment")),$("body").off(["focusin.".concat("environment"),"focusout.".concat("environment")].join(" "))}};function HideFocus(element){return this.init(element)}function smoothScrollTo(el,target,duration){var dfd=$.Deferred();if(!DOM.isElement(el))return dfd.reject();if(el instanceof $&&el.length&&(el=el[0]),null==target)return dfd.resolve();if(isNaN(duration)&&(duration=0),target=Math.round(target),(duration=Math.round(duration))<0)return dfd.fail();if(0===duration)return el.scrollLeft+=target,dfd.resolve();var startTime=Date.now(),endTime=startTime+duration,startLeft=el.scrollLeft,distance=target;var previousLeft=el.scrollLeft;return setTimeout((function scrollFrame(){if(el.scrollLeft===previousLeft){var now=Date.now(),point=function smoothStep(start,end,point){if(point<=start)return 0;if(point>=end)return 1;var x=(point-start)/(end-start);return x*x*(3-2*x)}(startTime,endTime,now),frameLeft=Math.round(startLeft+distance*point);el.scrollLeft=frameLeft,now>=endTime?dfd.resolve():el.scrollLeft!==previousLeft||el.scrollLeft===frameLeft?(previousLeft=el.scrollLeft,setTimeout(scrollFrame,0)):dfd.resolve()}else dfd.reject()}),0),dfd}function defer(callback,timer){return(void 0!==window.requestAnimationFrame?window.requestAnimationFrame:setTimeout)(callback,timer)}Environment.browser.isEdge=function(){return"edge"===Environment.browser.name},Environment.browser.isIE11=function(){return"ie"===Environment.browser.name&&"11"===Environment.browser.version},Environment.browser.isSafari=function(){return"safari"===Environment.browser.name||"wkwebview"===Environment.browser.name},Environment.browser.isIE10=function(){return"ie"===Environment.browser.name&&"10"===Environment.browser.version},Environment.set(),HideFocus.prototype={init:function init(element){!this.element&&(element instanceof HTMLElement||element instanceof SVGElement)&&(this.element=element);var $el=$(this.element),isClick=!1,isFocused=!1,labelClicked=!1;if($el.is(".checkbox, .radio, .switch")){var label=$el.next();label.is('[type="hidden"]')&&(label=label.next()),this.label=label[0],$el.addClass("hide-focus").on("focusin.hide-focus",(function(e){isClick||isFocused||labelClicked||($el.removeClass("hide-focus"),$el.triggerHandler("hidefocusremove",[e])),isClick=!1,isFocused=!0,labelClicked=!1})).on("focusout.hide-focus",(function(e){$el.addClass("hide-focus"),labelClicked=label.is(labelClicked),isClick=!1,isFocused=!1,$el.triggerHandler("hidefocusadd",[e])})),label.on("mousedown.hide-focus",(function(e){labelClicked=this,isClick=!0,$el.addClass("hide-focus"),$el.triggerHandler("hidefocusadd",[e])}))}else{var handleMousedown=function handleMousedown(e){isClick=!0,$el.addClass("hide-focus"),$el.triggerHandler("hidefocusadd",[e])};Environment.features.touch&&$el.on("touchstart.hide-focus",(function(e){handleMousedown(e)})),$el.addClass("hide-focus").on("mousedown.hide-focus",(function(e){handleMousedown(e)})).on("focusin.hide-focus",(function(e){isClick||isFocused||($el.removeClass("hide-focus"),$el.triggerHandler("hidefocusremove",[e])),isClick=!1,isFocused=!0})).on("focusout.hide-focus",(function(e){$el.addClass("hide-focus"),isClick=!1,isFocused=!1,$el.triggerHandler("hidefocusadd",[e])}))}return this},updated:function updated(){return this.teardown().init()},teardown:function teardown(){this.label&&$(this.label).off("mousedown.hide-focus");return $(this.element).off(["focusin.hide-focus","focusout.hide-focus","mousedown.hide-focus","touchstart.hide-focus"].join(" ")),this.element.classList.remove("hide-focus"),this}},$.fn.hideFocus=function(){return this.each((function(){var instance=$.data(this,"hidefocus");instance?instance.updated():(instance=$.data(this,"hidefocus",new HideFocus(this))).destroy=function destroy(){this.teardown(),$.removeData(this,"hidefocus")}}))},$.fn.smoothScroll=function(target,duration){return smoothScrollTo(this,target,duration)},$.fn.bindFirst=function(name,fn){this.on(name,fn),this.each((function(){var handlers=$._data(this,"events")[name.split(".")[0]],handler=handlers.pop();handlers.splice(0,0,handler)}))};var uniqueIdCount=[];function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter((function(){return"hidden"===$.css(this,"visibility")})).length}$.fn.cssPropSupport=function(prop){if(!prop)return null;var el=$("<div></div>")[0],propStr=prop.toString(),prefixes=["Moz","Webkit","O","ms"],capitalizedProp=propStr.charAt(0).toUpperCase()+propStr.substr(1);if(prop in el.style)return $(el).remove(),prop;for(var i=0;i<prefixes.length;i++){var vendorProp=prefixes[i]+capitalizedProp;if(vendorProp in el.style)return $(el).remove(),vendorProp}return $(el).remove(),null},$.fn.transitionEndName=function(){return{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"}[$.fn.cssPropSupport("transition")]||null},$.extend($.expr[":"],{focusable:function focusable(element){return function _focusable(element){var map,mapName,img,nodeName=element.nodeName.toLowerCase(),isTabIndexNotNaN=!isNaN($.attr(element,"tabindex"));return"area"===nodeName?(mapName=(map=element.parentNode).name,!(!element.href||!mapName||"map"!==map.nodeName.toLowerCase())&&(!!(img=$("img[usemap=#".concat(mapName,"]"))[0])&&visible(img))):!!visible(element)&&(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName&&void 0!==element.href||isTabIndexNotNaN)}(element,isNaN($.attr(element,"tabindex")))}}),$.fn.listEvents=function(){var data={};return this.each((function(){data=$._data(this,"events")})),data};var utils={};function isValidOptions(o){return"object"===_typeof(o)||"function"==typeof o}function resolveFunctionBasedSettings(o){return"function"==typeof o?o():o}utils.uniqueId=function(element,className,prefix,suffix){var predefinedId=element.id;if(predefinedId&&$("#".concat(predefinedId)).length<2)return predefinedId;prefix=prefix?"".concat(prefix,"-"):"",suffix=suffix?"-".concat(suffix):"",className=className||utils.getArrayFromList(element.classList).join("-"),uniqueIdCount[className]||(uniqueIdCount[className]=1);var str="".concat(prefix).concat(className,"-").concat(uniqueIdCount[className]).concat(suffix);return uniqueIdCount[className]+=1,str},utils.parseSettings=function parseSettings(element,attr){var options={};if(!element||!(element instanceof HTMLElement)&&!(element instanceof $)||element instanceof $&&!element.length)return options;element instanceof $&&(element=element[0]),attr=attr||"data-options";var str=element.getAttribute(attr);if(!str||"string"!=typeof str||-1===str.indexOf("{"))return options;function replaceDoubleQuotes(changedStr){return changedStr.replace(/'/g,'"')}try{options=JSON.parse(replaceDoubleQuotes(str))}catch(err){options=JSON.parse(function manualParse(changedStr){var regex=/({|,)(?:\s*)(?:')?([A-Za-z_$\.][A-Za-z0-9_ \-\.$]*)(?:')?(?:\s*):/g;return changedStr=changedStr.replace(regex,'$1"$2":'),regex=/:(?:\s*)(?!(true|false|null|undefined))([A-Za-z_$\.#][A-Za-z0-9_ \-\.$]*)/g,changedStr=replaceDoubleQuotes(changedStr=changedStr.replace(regex,':"$2"'))}(str))}return options},utils.parseOptions=function parseOptions(element,attr){return utils.parseSettings(element,attr)},$.fn.parseOptions=function(element,attr){var results=[],targets=this;return element instanceof HTMLElement||element instanceof SVGElement||element instanceof $?targets=$(element):(attr=element,element=void 0),targets.each((function(i,item){results.push({element:this,options:utils.parseOptions(item,attr)})})),1===results.length?results[0].options:results},utils.coerceToBoolean=function(b){return!/^(false|0)$/i.test(b)&&!!b},utils.coerceSettingsToBoolean=function(settings,targetPropsArr){var i,l;for(targetPropsArr&&Array.isArray(targetPropsArr)||Object.keys(settings).forEach((function(key){targetPropsArr.push(key)})),i=0,l=targetPropsArr.length;i<l;i++)settings[targetPropsArr[i]]=utils.coerceToBoolean(settings[targetPropsArr[i]]);return settings},$.fn.timer=function(callback,delay){var interval,self=$(this),counter=0;function update(){interval=setInterval((function(){counter+=10,self.triggerHandler("update",[{counter:counter}]),counter>delay&&(self.triggerHandler("timeout"),callback.apply(arguments),clearInterval(interval),counter=0)}),10)}return update(),{event:this,cancel:function cancel(){self.triggerHandler("cancel"),clearInterval(interval),counter=0},pause:function pause(){self.triggerHandler("pause"),clearInterval(interval)},resume:function resume(){self.triggerHandler("resume"),update()}}},$.copyToClipboard=function(text){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",text);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var textarea=document.createElement("textarea");textarea.textContent=text,textarea.style.position="fixed",document.body.appendChild(textarea),textarea.select();try{return document.execCommand("copy")}catch(ex){return!1}finally{document.body.removeChild(textarea)}}},$.fn.clearable=function(){var self=this;this.element=$(this);this.xButton=this.element.find(".icon.close").first(),this.xButton&&this.xButton.length||(this.xButton=$.createIconElement({classes:"close is-empty",icon:"close"}).icon()),this.clear=function(){self.element.val("").trigger("change").focus().trigger("cleared"),self.checkContents()},this.handleKeydown=function(e){var key=e.key;("Enter"===key||e.altKey&&("Delete"===key||"Backspace"===key))&&(e.preventDefault(),self.clear())},this.checkContents=function(){var text=self.element.val();text&&text.length?this.xButton.removeClass("is-empty"):this.xButton.addClass("is-empty"),this.element.trigger("contents-checked")},this.xButton.insertAfter(self.element),this.xButton[0].tabIndex=0,this.xButton[0].setAttribute("focusable",!0),this.xButton.off(["click.".concat("clearable"),"keydown.".concat("clearable")].join(" ")).on("click.clearable",this.clear).on("keydown.clearable",this.handleKeydown);var elemEvents=["blur.".concat("clearable"),"change.".concat("clearable"),"keyup.".concat("clearable")].join(" ");this.element.off(elemEvents).on(elemEvents,(function(){self.checkContents()})),this.checkContents()},utils.actualChar=function(e){var key=e.which,toAscii={188:"44",190:"46",191:"47",192:"96",220:"92",222:"39",221:"93",219:"91",173:"45",187:"61",186:"59",189:"45"},shiftUps={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",37:"%",38:"&",39:'"',44:"<",46:">",47:"?"};return Object.prototype.hasOwnProperty.call(toAscii,key)&&(key=toAscii[key]),key>=96&&key<=105&&(key-=48),!e.shiftKey&&key>=65&&key<=90?String.fromCharCode(key+32):!e.shiftKey&&key>=37&&key<=40?"":e.shiftKey&&Object.prototype.hasOwnProperty.call(shiftUps,key)?shiftUps[key]:String.fromCharCode(key)},$.actualChar=function(e){return utils.actualChar(e)},utils.equals=function equals(a,b){return JSON.stringify(a)===JSON.stringify(b)},DOM.convertToHTMLElement=function convertToHTMLElement(item){return item instanceof HTMLElement?item:item instanceof $?item=item.length?item[0]:void 0:void 0},DOM.focusableElems=function focusableElems(el){var elems=el.querySelectorAll(["button","[href]","input","select","textarea",'[focusable]:not([focusable="false"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","iframe"].join(", "));return utils.getArrayFromList(elems).filter((function(elem){return"use"!==elem.tagName.toLowerCase()}))},utils.extend=$.extend,utils.fixSVGIcons=function fixSVGIcons(rootElement){if(("ie"===Environment.browser.name||"11"===Environment.browser.version)&&void 0!==rootElement){var xlinkNS="http://www.w3.org/1999/xlink";if(rootElement instanceof $){if(!rootElement.length)return;if(1!==rootElement.length)return void rootElement.each((function(i,elem){fixSVGIcons(elem)}));rootElement=rootElement[0]}rootElement instanceof NodeList?Array.prototype.forEach.call(rootElement,(function(elem){fixSVGIcons(elem)})):setTimeout((function(){for(var uses=rootElement.getElementsByTagName("use"),i=0;i<uses.length;i++){var attr=uses[i].getAttributeNS(xlinkNS,"href");uses[i].setAttributeNS(xlinkNS,"href","x"),uses[i].setAttributeNS(xlinkNS,"href",attr)}}),1)}},utils.getViewportSize=function getViewportSize(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},utils.getContainerScrollDistance=function getContainerScrollDistance(element){if(!DOM.isElement(element))return[];var containers=[];return $(element).parents([".scrollable",".scrollable-x",".scrollable-y",".modal",".card-content",".widget-content",".tab-panel",".datagrid-content"].join(", ")).each((function(){containers.push({element:this,left:this.scrollLeft,top:this.scrollTop})})),document.body.classList.contains("no-scroll")||containers.push({element:document.body,left:document.body.scrollLeft,top:document.body.scrollTop}),containers},utils.getHiddenSize=function getHiddenSize(el,options){var defaults={dims:{width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},parentElement:void 0,includeMargin:!1};if(!DOM.isElement(el))return defaults.dims;el=$(el),options=$.extend({},defaults,options);var hasDefinedParentElement=DOM.isElement(options.parentElement);hasDefinedParentElement&&(el=el.clone().appendTo(options.parentElement));var dims=options.dims,hiddenParents=el.parents().add(el),props={transition:"none",webkitTransition:"none",mozTransition:"none",msTransition:"none",visibility:"hidden",display:"block"},oldProps=[];return hiddenParents.each((function(){var _this=this,old={};Object.keys(props).forEach((function(name){_this.style[name]&&(old[name]=_this.style[name],_this.style[name]=props[name])})),oldProps.push(old)})),dims.padding={bottom:el.css("padding-bottom"),left:el.css("padding-left"),right:el.css("padding-right"),top:el.css("padding-top")},dims.width=el.width(),dims.outerWidth=el.outerWidth(options.includeMargin),dims.innerWidth=el.innerWidth(),dims.scrollWidth=el[0].scrollWidth,dims.height=el.height(),dims.innerHeight=el.innerHeight(),dims.outerHeight=el.outerHeight(options.includeMargin),dims.scrollHeight=el[0].scrollHeight,hiddenParents.each((function(i){var _this2=this,old=oldProps[i];Object.keys(props).forEach((function(name){old[name]&&(_this2.style[name]=old[name])}))})),hasDefinedParentElement&&el.remove(),dims},$.fn.getHiddenSize=function(options){return utils.getHiddenSize(this,options)},utils.isString=function isString(value){return"string"==typeof value||value instanceof String},utils.isNumber=function isNumber(value){return"number"==typeof value&&void 0===value.length&&!isNaN(value)},utils.safeSetSelection=function safeSetSelection(element,startPos,endPos){element instanceof HTMLInputElement&&-1!==["text","password","search","url","week","month"].indexOf(element.type)&&(startPos&&void 0===endPos&&(endPos=startPos),document.activeElement===element&&("android"===Environment.os.name?defer((function(){element.setSelectionRange(startPos,endPos,"none")}),0):element.setSelectionRange(startPos,endPos,"none")))},utils.mergeSettings=function mergeSettings(element,incomingOptions,defaultOptions){return incomingOptions&&isValidOptions(incomingOptions)||(incomingOptions=isValidOptions(defaultOptions)?defaultOptions:{}),utils.extend(!0,{},resolveFunctionBasedSettings(defaultOptions||{}),resolveFunctionBasedSettings(incomingOptions),void 0!==element?utils.parseSettings(element):{})},utils.isHTML=function(string){return/(<([^>]+)>)/i.test(string)};var math={convertDelayToFPS:function convertDelayToFPS(delay){if(isNaN(delay))throw new Error("provided delay value is not a number");return delay/16.7},convertFPSToDelay:function convertFPSToDelay(fps){if(isNaN(fps))throw new Error("provided delay value is not a number");return 16.7*fps},isFinite:function isFinite(value){return"number"==typeof value&&(value==value&&value!==1/0&&value!==-1/0)}};utils.forEach=function forEach(array,callback,scope){for(var i=0;i<array.length;i++)callback.call(scope,array[i],i,array)},utils.hasClass=function hasClass(elem,classStr){var r=!1;if(elem)if("classList"in elem)r=elem.classList.contains(classStr);else{var classAttr=elem.getAttribute("class");r=!!classAttr&&-1!==classAttr.split(/\s+/).indexOf(classStr)}return r},math.sign=function(x){return Math.sign?Math.sign(x):0===(x=+x)||isNaN(x)?x:x>0?1:-1},utils.getArrayFromList=function(listObj){var unboundSlice=Array.prototype.slice;return Function.prototype.call.bind(unboundSlice)(listObj)},utils.getScrollbarWidth=function(){var outer=document.createElement("div");outer.style.visibility="hidden",outer.style.width="100px",document.body.appendChild(outer);var widthNoScroll=outer.offsetWidth;outer.style.overflow="scroll";var inner=document.createElement("div");inner.style.width="100%",outer.appendChild(inner);var widthWithScroll=inner.offsetWidth;return outer.parentNode.removeChild(outer),widthNoScroll-widthWithScroll},utils.deepCopy=function(arrayOrObject){return function copy(input){if("object"!==_typeof(input)||null===input)return input;var output=Array.isArray(input)?[]:{};return Object.keys(input).forEach((function(key){var value=input[key];output[key]="object"===_typeof(value)&&null!==value?copy(value):value})),output}(arrayOrObject)};var objectUtils={isEmpty:function(obj){return 0===Object.keys(obj).length&&obj.constructor===Object}},stringUtils={EMPTY:"",splice:function splice(str,start,delCount,newSubStr){return str.slice(0,start)+newSubStr+str.slice(start+Math.abs(delCount))},removeDuplicates:function removeDuplicates(str){return str.split("").filter((function(item,pos,self){return self.indexOf(item)===pos})).join("")},containsHTML:function containsHTML(str){return/<[a-z][\s\S]*>/i.test(str)},stripWhitespace:function stripWhitespace(str){return str.replace(/\n/g,"").replace(/[\t ]+</g,"<").replace(/>[\t ]+</g,"><").replace(/>[\t ]+$/g,">")},capitalize:function capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1)},toBoolean:function capitalize(val){var num=+val;return isNaN(num)?!!String(val).toLowerCase().replace(!1,""):!!num},textWidth:function capitalize(text){var fontsize=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var context=this.canvas.getContext("2d");context.font="".concat(fontsize,"px arial");var metrics=context.measureText(text);return Math.round(metrics.width)},padDate:function padDate(year,month,day){return year+"0".concat(month+1).slice(-2)+"0".concat(day).slice(-2)}};stringUtils.textWidth=function textWidth(text,padding,font){this.canvasTW=this.canvasTW||(this.canvasTW=document.createElement("canvas"));var context=this.canvasTW.getContext("2d");context.font=font||"14px arial";var metrics=context.measureText(text);return Math.round(metrics.width+(padding||0))},stringUtils.escapeRegExp=function escapeRegExp(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},stringUtils.count=function count(string,subString){return string.split(subString).length-1};var numberUtils={truncate:function truncate(number){var decimals=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,numString=number.toString(),parts=numString.split(".");return parts[1]=parts[1]?parts[1].substr(0,decimals):"","".concat(parts[0],".").concat(parts[1])},round:function round(number){var decimals=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return numberUtils.toFixed(number,decimals)},fixTo:function toFixed(number){var decimals=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(+(Math.round(+(number+"e"+decimals))+"e"+-decimals)).toFixed(decimals)},toFixed:function toFixed(number){var decimals=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,numStr=number.toString(),parsedNum="",noDecimals=numStr.split("."),parts=[noDecimals[0].substr(0,10),noDecimals[0].substr(10),noDecimals[1]],firstPart=parts[0],lastPart=parts[1];return parsedNum=this.fixTo((lastPart||firstPart)+(parts[2]?".".concat(parts[2]):""),decimals).toString(),lastPart&&11===parsedNum.length&&"10000000000"===parsedNum&&(parsedNum="0000000000",firstPart=(parseInt(firstPart,10)+1).toString()),lastPart&&(parsedNum=firstPart+parsedNum),parsedNum},decimalPlaces:function decimalPlaces(number){return Math.floor(number)===number||-1===number.toString().indexOf(".")?0:number.toString().split(".")[1].length||0}},ummalquraData=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53914,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60647,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74585,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],existingCulturePath="",minifyCultures=!1;"object"===_typeof(window.SohoConfig)&&("string"==typeof window.SohoConfig.culturesPath&&(existingCulturePath=window.SohoConfig.culturesPath),"boolean"==typeof window.SohoConfig.minifyCultures&&(minifyCultures=window.SohoConfig.minifyCultures));var Locale={currentLocale:{name:"",data:{}},currentLanguage:{name:""},cultures:{},languages:{},dff:[],culturesPath:existingCulturePath,defaultLocales:[{lang:"af",default:"af-ZA"},{lang:"ar",default:"ar-EG"},{lang:"bg",default:"bg-BG"},{lang:"cs",default:"cs-CZ"},{lang:"da",default:"da-DK"},{lang:"de",default:"de-DE"},{lang:"el",default:"el-GR"},{lang:"en",default:"en-US"},{lang:"es",default:"es-ES"},{lang:"et",default:"et-EE"},{lang:"fi",default:"fi-FI"},{lang:"fr",default:"fr-FR"},{lang:"he",default:"he-IL"},{lang:"hi",default:"hi-IN"},{lang:"hr",default:"hr-HR"},{lang:"hu",default:"hu-HU"},{lang:"id",default:"id-ID"},{lang:"it",default:"it-IT"},{lang:"iw",default:"he-IL"},{lang:"ja",default:"ja-JP"},{lang:"ko",default:"ko-KR"},{lang:"lt",default:"lt-LT"},{lang:"lv",default:"lv-LV"},{lang:"ms",default:"ms-bn"},{lang:"nb",default:"no-NO"},{lang:"nn",default:"no-NO"},{lang:"nl",default:"nl-NL"},{lang:"no",default:"no-NO"},{lang:"pl",default:"pl-PL"},{lang:"pt",default:"pt-PT"},{lang:"ro",default:"ro-RO"},{lang:"ru",default:"ru-RU"},{lang:"sk",default:"sk-SK"},{lang:"sl",default:"sl-SI"},{lang:"sv",default:"sv-SE"},{lang:"th",default:"th-TH"},{lang:"tr",default:"tr-TR"},{lang:"uk",default:"uk-UA"},{lang:"vi",default:"vi-VN"},{lang:"zh",default:"zh-CN"}],supportedLocales:["af-ZA","ar-EG","ar-SA","bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-AU","en-GB","en-IN","en-NZ","en-US","en-ZA","es-AR","es-ES","es-419","es-MX","es-US","et-EE","fi-FI","fr-CA","fr-FR","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","lt-LT","lv-LV","ms-bn","ms-my","nb-NO","nn-NO","nl-NL","no-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-Hans","zh-Hant","zh-TW"],translatedLocales:["fr-CA","fr-FR","pl-PL","pt-PT"],defaultLocale:"en-US",minify:minifyCultures,updateLanguageTag:function updateLanguageTag(locale){var html=$("html");2===locale.length&&(locale=this.defaultLocales.filter((function(a){return a.lang===locale}))),html.attr("lang",locale),this.isRTL()?html.attr("dir","rtl"):html.removeAttr("dir"),this.isRTL()&&Locale.flipIconsHorizontally(),$("body").removeClass("busy-loading-locale")},getCulturesPath:function getCulturesPath(){if(!this.culturesPath)for(var scripts=document.getElementsByTagName("script"),partialPathRegexp=/sohoxi(.min){0,1}(.{0,1}[a-z0-9]*)\.js/,i=0;i<scripts.length;i++){var src=scripts[i].src,idx=src.indexOf("?");if(""!==src&&idx>-1&&(src=src.substr(0,idx)),"sohoxi-script"===scripts[i].id)return"".concat(src.substring(0,src.lastIndexOf("/")),"/");src.match(partialPathRegexp)&&(this.culturesPath="".concat(src.replace(partialPathRegexp,""),"cultures/"))}return this.culturesPath},cultureInHead:function cultureInHead(){for(var isThere=!1,scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++){scripts[i].src.indexOf("cultures")>-1&&(isThere=!0)}return isThere},correctLocale:function correctLocale(locale){"in-ID"===locale&&(locale="id-ID"),"iw"===locale.substr(0,2)&&(locale="he-IL");var lang=locale.split("-")[0];if(-1===this.supportedLocales.indexOf(locale)){if((locale=this.defaultLocales.filter((function(a){return a.lang===lang})))&&locale[0])return locale[0].default;locale=this.defaultLocale}return locale},correctLanguage:function correctLanguage(lang){var correctLanguage=this.defaultLocales.filter((function(a){return a.lang===lang}));return correctLanguage&&correctLanguage[0]?this.remapLanguage(lang):(correctLanguage=this.remapLanguage(lang),correctLanguage)},remapLanguage:function remapLanguage(lang){var correctLanguage=lang;return"in"===lang&&(correctLanguage="id"),"iw"===lang&&(correctLanguage="he"),"nb"!==lang&&"nn"!==lang||(correctLanguage="no"),correctLanguage},addCulture:function addCulture(locale,data,langData){var lang=locale.substr(0,2);if(this.cultures[locale]=data,this.cultures[locale].name=locale,!this.languages[lang]&&data.messages)this.languages[lang]={name:lang,direction:data.direction||(langData?langData.direction:""),nativeName:data.nativeName||(langData?langData.nativeName:""),messages:data.messages||(langData?langData.messages:{})},this.languages[locale]={name:locale,direction:data.direction||(langData?langData.direction:""),nativeName:data.nativeName||(langData?langData.nativeName:""),messages:data.messages||(langData?langData.messages:{})};else if(!this.languages[lang]&&!data.messages){var parentLocale=this.parentLocale(locale);parentLocale.default&&parentLocale.default!==locale&&!this.cultures[parentLocale.default]&&this.appendLocaleScript(parentLocale.default)}},parentLocale:function parentLocale(locale){var lang=locale.substr(0,2),parentLocale=this.defaultLocales.filter((function(a){return a.lang===lang}))[0]||[{default:"en-US"}];return this.translatedLocales.indexOf(locale)>-1?{lang:"fr",default:"fr-CA"}:parentLocale},appendedLocales:[],appendLocaleScript:function appendLocaleScript(locale,isCurrent,parentLocale,filename){var _this=this,script=document.createElement("script"),min=this.minify?".min":"";script.async=!1,this.appendedLocales.indexOf(locale)>-1||(this.appendedLocales.push(locale),script.src=filename?"".concat(this.getCulturesPath()+filename).concat(min,".js"):"".concat(this.getCulturesPath()+locale).concat(min,".js"),script.onload=function(){isCurrent&&!parentLocale&&(_this.setCurrentLocale(locale,_this.cultures[locale]),_this.dff[locale].resolve(locale)),parentLocale&&_this.dff[parentLocale]&&(_this.setCurrentLocale(locale,_this.cultures[locale]),_this.setCurrentLocale(parentLocale,_this.cultures[parentLocale]),_this.dff[parentLocale].resolve(parentLocale)),parentLocale&&_this.dff[locale]&&_this.cultures[locale]&&(_this.setCurrentLocale(locale,_this.cultures[locale]),_this.dff[locale].resolve(locale)),isCurrent||parentLocale||!_this.dff[locale]||_this.dff[locale].resolve(locale)},script.onerror=function(){_this.dff[locale]&&_this.dff[locale].reject()},"object"===_typeof(window.SohoConfig)&&"string"==typeof window.SohoConfig.nonce&&script.setAttribute("nonce",window.SohoConfig.nonce),document.head.appendChild(script))},set:function set(locale){if(locale=this.correctLocale(locale),this.dff[locale]=$.Deferred(),""===locale)return this.dff.resolve(),this.dff.promise();this.cultures["en-US"]||this.appendLocaleScript("en-US","en-US"===locale);var hasParentLocale=!1,parentLocale=this.parentLocale(locale);return parentLocale.default&&parentLocale.default!==locale&&!this.cultures[parentLocale.default]&&(hasParentLocale=!0),hasParentLocale||!locale||this.cultures[locale]||this.currentLocale.name===locale||"en-US"===locale||(this.setCurrentLocale(locale),this.appendLocaleScript(locale,!0)),hasParentLocale&&("en-US"!==parentLocale.default&&this.appendLocaleScript(parentLocale.default,!1),this.appendLocaleScript(locale,!1,parentLocale.default)),locale&&this.currentLocale.data&&this.currentLocale.dataName===locale&&this.dff[locale].resolve(this.currentLocale.name),this.setCurrentLocale(locale,this.cultures[locale]),this.cultures[locale]&&this.cultureInHead()&&this.dff[locale].resolve(this.currentLocale.name),this.dff[locale].promise()},getLocale:function getLocale(locale,filename){if(!locale)return null;if(locale=this.correctLocale(locale),this.dff[locale]=$.Deferred(),""===locale){var dff=$.Deferred();return dff.resolve(),dff.promise()}return locale&&"en-US"!==locale&&!this.cultures["en-US"]&&this.appendLocaleScript("en-US",!1),locale&&!this.cultures[locale]&&this.currentLocale.name!==locale&&"en-US"!==locale&&this.appendLocaleScript(locale,!1,!1,filename),locale&&this.currentLocale.data&&this.currentLocale.dataName===locale&&this.dff[locale].resolve(locale),this.cultures[locale]&&this.cultureInHead()&&this.dff[locale].resolve(locale),this.dff[locale].promise()},setLanguage:function setLanguage(lang){var _this2=this,currentLocale=this.currentLocale.name;lang=this.correctLanguage(lang),this.languages[lang]||this.set(lang).done((function(){_this2.set(currentLocale),_this2.setLanguage(lang)}));var correctLocale=this.correctLocale(lang);return this.languages[lang]?(this.currentLanguage=this.languages[lang],this.updateLanguageTag(lang),this.dff[correctLocale]=$.Deferred(),this.dff[correctLocale].resolve()):(this.currentLanguage.name=lang,this.dff[correctLocale])},setCurrentLocale:function setCurrentLocale(name,data){var lang=this.remapLanguage(name.substr(0,2));this.currentLocale.name=name,data&&(this.currentLocale.data=data,this.currentLocale.dataName=name,this.currentLanguage={},this.currentLanguage.name=lang,this.languages[lang]&&(this.currentLanguage=this.languages[lang],this.updateLanguageTag(name)),this.translatedLocales.indexOf(name)>-1&&(this.languages[lang].direction=data.direction,this.languages[lang].messages=data.messages,this.languages[lang].name=lang,this.languages[lang].nativeName=data.nativeName,this.languages[name]={direction:data.direction,messages:data.messages,name:name,nativeName:data.nativeName}))},formatDate:function formatDate(value,options){options||(options={date:"short"});var localeData=this.useLocale(options);if(value){if("0000"===value||"000000"===value||"00000000"===value)return"";if("string"==typeof value&&/T|Z/g.test(value)&&(value=this.newDateObj(value)),!(value instanceof Date)&&"string"==typeof value){var tDate2=Locale.parseDate(value,options);isNaN(tDate2)&&"datetime"===options.date&&"-"===value.substr(4,1)&&"-"===value.substr(7,1)&&(tDate2=new Date(value.substr(0,4),value.substr(5,2)-1,value.substr(8,2),value.substr(11,2),value.substr(14,2),value.substr(17,2))),value=tDate2}if(!(value instanceof Date)&&"number"==typeof value)value=new Date(value);if(value){var pattern,ret="",cal=localeData.calendars?localeData.calendars[0]:null;options.pattern&&(pattern=options.pattern),options.date&&(pattern=cal.dateFormat[options.date]),"string"==typeof options&&""!==options&&(pattern=options),pattern||(pattern=cal.dateFormat.short);var year=value instanceof Array?value[0]:value.getFullYear(),month=value instanceof Array?value[1]:value.getMonth(),day=value instanceof Array?value[2]:value.getDate(),dayOfWeek=value.getDay?value.getDay():"",hours=value instanceof Array?value[3]:value.getHours(),mins=value instanceof Array?value[4]:value.getMinutes(),seconds=value instanceof Array?value[5]:value.getSeconds(),millis=value instanceof Array?value[6]:value.getMilliseconds();if(cal&&cal.conversions)if(options.fromGregorian){var islamicParts=this.gregorianToUmalqura(value);day=islamicParts[2],month=islamicParts[1],year=islamicParts[0]}else if(options.toGregorian){var gregorianDate=this.umalquraToGregorian(year,month,day);day=gregorianDate.getDate(),month=gregorianDate.getMonth(),year=gregorianDate.getFullYear()}var showDayPeriods=(ret=(ret=(ret=(ret=(ret=(pattern=(pattern=(pattern=(pattern=pattern.replace("de","nnnnn")).replace("ngày","nnnn")).replace("tháng","t1áng")).replace("den","nnn")).replace("dd",this.pad(day,2))).replace("d",day)).replace("yyyy",year)).replace("yy",year.toString().substr(2))).replace("y",year)).indexOf(" a")>-1||0===ret.indexOf("a");if(showDayPeriods&&0===hours&&(ret=(ret=ret.replace("hh",12)).replace("h",12)),ret=(ret=(ret=(ret=(ret=(ret=(ret=(ret=(ret=ret.replace("hh",hours>12?this.pad(hours-12,2):this.pad(hours,2))).replace("h",hours>12?hours-12:hours)).replace("HH",this.pad(hours,2))).replace("H",hours)).replace("mm",this.pad(mins,2))).replace("ss",this.pad(seconds,2))).replace("SSS",this.pad(millis,3))).replace("MMMM",cal?cal.months.wide[month]:null)).replace("MMM",cal?cal.months.abbreviated[month]:null),-1===pattern.indexOf("MMM")&&(ret=(ret=ret.replace("MM",this.pad(month+1,2))).replace("M",month+1)),showDayPeriods&&cal&&(0===(ret=ret.replace(" a"," ".concat(hours>=12?cal.dayPeriods[1]:cal.dayPeriods[0]))).indexOf("a")&&(ret=ret.replace("a"," ".concat(hours>=12?cal.dayPeriods[1]:cal.dayPeriods[0]))),ret=ret.replace("EEEE",cal.days.wide[dayOfWeek])),cal&&(ret=ret.replace("EEEE",cal.days.wide[dayOfWeek])),cal&&(ret=ret.replace("EEE",cal.days.abbreviated[dayOfWeek])),cal&&(ret=ret.replace("EE",cal.days.narrow[dayOfWeek])),(ret=(ret=(ret=(ret=ret.replace("nnnnn","de")).replace("nnnn","ngày")).replace("t1áng","tháng")).replace("nnn","den")).indexOf("zz")>-1){var timezoneDate=new Date,shortName=this.getTimeZone(timezoneDate,"short"),longName=this.getTimeZone(timezoneDate,"long");ret=(ret=ret.replace("zzzz",longName)).replace("zz",shortName)}return ret.trim()}}},newDateObj:function newDateObj(dateStr){var date=new Date(dateStr);if("safari"===Environment.browser.name&&"string"==typeof dateStr&&/T|Z/g.test(dateStr)){var arr=dateStr.replace(/Z/,"").replace(/T|:/g,"-").split("-");arr=arr.map((function(x,i){return+(1===i?x-1:x)})),date=_construct(Date,_toConsumableArray(arr))}return date},formatHour:function formatHour(hour,options){var timeSeparator=this.calendar().dateFormat.timeSeparator,locale=this.currentLocale.name;"object"===_typeof(options)&&(locale=options.locale||locale,timeSeparator=options.timeSeparator||this.calendar(locale).dateFormat.timeSeparator),"string"==typeof hour&&-1===hour.indexOf(timeSeparator)&&(timeSeparator=":");var date=new Date;if("number"==typeof hour){var split=hour.toString().split(".");date.setHours(split[0]),date.setMinutes(split[1]?60*parseFloat("0.".concat(split[1])):0)}else{var parts=hour.split(timeSeparator);date.setHours(parts[0]),date.setMinutes(parts[1]||0)}return this.formatDate(date,{date:"hour"})},formatHourRange:function formatHourRange(startHour,endHour,options){var locale=this.currentLocale.name,dayPeriods=this.calendar(locale).dayPeriods,removePeriod=!1;"object"===_typeof(options)&&(locale=options.locale||locale,dayPeriods=this.calendar(locale).dayPeriods);var range="".concat(Locale.formatHour(startHour,options)," - ").concat(Locale.formatHour(endHour,options));return(range.indexOf(":00 AM -")>-1||range.indexOf(":00 PM -")>-1)&&(removePeriod=!0),stringUtils.count(range,dayPeriods[0])>1&&(range=range.replace(dayPeriods[0],"")),stringUtils.count(range,dayPeriods[1])>1&&(range=range.replace(" ".concat(dayPeriods[1]),"")),range=range.replace("  "," "),removePeriod&&(range=range.replace(":00 -"," -")),range},getTimeZone:function getTimeZone(date,timeZoneName){var currentLocale=Locale.currentLocale.name||"en-US";return"ie"===Environment.browser.name&&"11"===Environment.browser.version?date.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join(""):("long"===timeZoneName?date.toLocaleTimeString(currentLocale,{timeZoneName:"long"}):date.toLocaleTimeString(currentLocale,{timeZoneName:"short"})).replace(/[0-9:AMP]/g,"").split(" ").join(" ").trimLeft()},dateToTimeZone:function dateToTimeZone(date,timeZone,timeZoneName){return"ie"===Environment.browser.name&&"11"===Environment.browser.version?"".concat(date.toLocaleString(Locale.currentLocale.name)," ").concat(date.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("")):date.toLocaleString(Locale.currentLocale.name,{timeZone:timeZone,timeZoneName:timeZoneName})},dateToUTC:function dateToUTC(date){return new Date(Date.UTC(date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds()))},toLocaleString:function toLocaleString(number,locale,options,groupSeparator){if("number"!=typeof number)return"";var args={locale:locale||Locale.currentLocale.name,options:options||void 0},n=number.toLocaleString(args.locale,args.options);if(!/undefined|null/.test(_typeof(groupSeparator))){var gSeparator=this.getSeparator(args.locale,"group");n=n.replace(new RegExp(gSeparator,"g"),groupSeparator.toString())}return n},getSeparator:function getSeparator(locale,separatorType){return Intl.NumberFormat(locale).formatToParts(1000.1).find((function(part){return part.type===separatorType})).value},convertNumberToEnglish:function convertNumberToEnglish(string){for(var arabic=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],devanagari=["०","१","२","३","४","५","६","७","८","९"],chineseFinancialTraditional=["零","壹","貳","叄","肆","伍","陸","柒","捌","玖"],chineseFinancialSimplified=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],chinese=["〇","一","二","三","四","五","六","七","八","九"],i=0;i<=9;i++)string=(string=(string=(string=(string=(string=(string=string.replace(arabic[i],i)).replace("٬","")).replace(",","")).replace(devanagari[i],i)).replace(chineseFinancialTraditional[i],i)).replace(chineseFinancialSimplified[i],i)).replace(chinese[i],i),0===i&&(string=string.replace("零",i));return parseFloat(string)},isValidDate:function isValidDate(date){return"[object Date]"===Object.prototype.toString.call(date)&&!isNaN(date.getTime())},parseDate:function parseDate(dateString,options,isStrict){if(dateString){var dateFormat=options,locale=this.currentLocale.name,thisLocaleCalendar=this.calendar();"object"===_typeof(options)&&(locale=options.locale||locale,dateFormat=options.dateFormat||this.calendar(locale).dateFormat[dateFormat.date]),"object"===_typeof(options)&&options.pattern&&(dateFormat=options.dateFormat||options.pattern),"object"===_typeof(options)&&options.calendarName&&options.locale&&(thisLocaleCalendar=this.calendar(options.locale,options.calendarName)),dateFormat||(dateFormat=this.calendar(locale).dateFormat.short);var orgDatestring=dateString;if("0000"!==dateString&&"000000"!==dateString&&"00000000"!==dateString){var formatParts,dateStringParts;dateFormat.pattern&&(dateFormat=dateFormat.pattern);var i,l,dateObj={},isDateTime=dateFormat.toLowerCase().indexOf("h")>-1,isUTC=dateString.toLowerCase().indexOf("z")>-1,hasDot=3===(dateFormat.match(/M/g)||[]).length&&thisLocaleCalendar&&thisLocaleCalendar.months&&thisLocaleCalendar.months.abbreviated&&thisLocaleCalendar.months.abbreviated.filter((function(v){return/\./.test(v)})).length;if(isDateTime){var shortTimeZone=Locale.getTimeZone(new Date,"short"),longTimeZone=Locale.getTimeZone(new Date,"long");dateString=(dateString=dateString.replace(" ".concat(shortTimeZone),"")).replace(" ".concat(longTimeZone),"");var regex=hasDot?/[T\s:-]/g:/[T\s:.-]/g;dateFormat=(dateFormat=dateFormat.replace(" zzzz","").replace(" zz","")).replace(regex,"/").replace(/z/i,""),dateString=dateString.replace(regex,"/").replace(/z/i,"")}if(dateFormat=dateFormat.replace(" de "," "),dateString=dateString.replace(" de "," "),dateFormat=dateFormat.replace("/ah/","/a/h/"),dateString=dateString.replace("午","午/"),dateFormat=dateFormat.replace(",",""),dateString=dateString.replace(",",""),"Mdyyyy"!==dateFormat&&"dMyyyy"!==dateFormat||(dateString="".concat(dateString.substr(0,dateString.length-4),"/").concat(dateString.substr(dateString.length-4,dateString.length)),dateString="".concat(dateString.substr(0,dateString.indexOf("/")/2),"/").concat(dateString.substr(dateString.indexOf("/")/2))),"Mdyyyy"===dateFormat&&(dateFormat="M/d/yyyy"),"dMyyyy"===dateFormat&&(dateFormat="d/M/yyyy"),-1!==dateFormat.indexOf(" ")){var _regex=hasDot?/[\s:]/g:/[\s:.]/g;dateFormat=dateFormat.replace(_regex,"/"),dateString=dateString.replace(_regex,"/")}if(dateFormat.indexOf("MMMM")>-1&&Locale.isRTL()&&dateFormat){var lastIdx=dateString.lastIndexOf("/");dateString=dateString.substr(0,lastIdx-1).replace("/"," ")+dateString.substr(lastIdx)}if(-1===dateFormat.indexOf(" ")&&-1===dateFormat.indexOf(".")&&-1===dateFormat.indexOf("/")&&-1===dateFormat.indexOf("-")){-1!==dateString.indexOf(" ")?dateString=dateString.split(" ").join(""):-1!==dateString.indexOf(".")?dateString=dateString.split(".").join(""):-1!==dateString.indexOf("/")?dateString=dateString.split("/").join(""):-1!==dateString.indexOf("-")&&(dateString=dateString.split("-").join(""));var lastChar=dateFormat[0],newFormat="",newDateString="";for(i=0,l=dateFormat.length;i<l;i++)newDateString+=dateFormat[i]!==lastChar?"/".concat(dateString[i]):dateString[i],newFormat+=dateFormat[i]!==lastChar?"/".concat(dateFormat[i]):dateFormat[i],i>1&&(lastChar=dateFormat[i]);dateString=newDateString,dateFormat=newFormat}formatParts=dateFormat.split("/"),dateStringParts=dateString.split("/"),1===formatParts.length&&(formatParts=dateFormat.split(".")),1===dateStringParts.length&&(dateStringParts=dateString.split(".")),1===formatParts.length&&(formatParts=dateFormat.split("-")),1===dateStringParts.length&&(dateStringParts=dateString.split("-")),1===formatParts.length&&(formatParts=dateFormat.split(" ")),1===dateStringParts.length&&(dateStringParts=dateString.split(" "));var month=this.getDatePart(formatParts,dateStringParts,"M","MM","MMM","MMMM"),year=this.getDatePart(formatParts,dateStringParts,"yy","yyyy"),hasDays=!1,hasAmFirst=!1;for(i=0,l=dateStringParts.length;i<l;i++){var pattern="".concat(formatParts[i]),value=dateStringParts[i],numberValue=parseInt(value,10);hasDays||(hasDays=pattern.toLowerCase().indexOf("d")>-1);var lastDay=void 0,abrMonth=void 0,textMonths=void 0;switch(pattern){case"d":if(lastDay=new Date(year,month,0).getDate(),numberValue<1||numberValue>31||numberValue>lastDay)return;dateObj.day=value;break;case"dd":if(numberValue<1||numberValue>31||numberValue<10&&"0"!==value.substr(0,1))return;dateObj.day=value;break;case"M":if(numberValue<1||numberValue>12)return;dateObj.month=value-1;break;case"MM":if(numberValue<1||numberValue>12||numberValue<10&&"0"!==value.substr(0,1))return;dateObj.month=value-1;break;case"MMM":abrMonth=this.calendar(locale).months.abbreviated;for(var len=0;len<abrMonth.length;len++)orgDatestring.indexOf(abrMonth[len])>-1&&(dateObj.month=len);break;case"MMMM":textMonths=this.calendar(locale).months.wide;for(var k=0;k<textMonths.length;k++)orgDatestring.indexOf(textMonths[k])>-1&&(dateObj.month=k);break;case"yy":dateObj.year=this.twoToFourDigitYear(value);break;case"yyyy":dateObj.year=2===value.length?this.twoToFourDigitYear(value):value;break;case"h":if(numberValue<0||numberValue>12)return;dateObj.h=hasAmFirst?dateObj.h:value;break;case"hh":if(numberValue<0||numberValue>12)return;dateObj.h=hasAmFirst?dateObj.h:1===value.length?"0".concat(value):value;break;case"H":if(numberValue<0||numberValue>24)return;dateObj.h=hasAmFirst?dateObj.h:value;break;case"HH":if(numberValue<0||numberValue>24)return;dateObj.h=hasAmFirst?dateObj.h:1===value.length?"0".concat(value):value;break;case"ss":if(numberValue<0||numberValue>60){dateObj.ss=0;break}dateObj.ss=value;break;case"SSS":dateObj.ms=value;break;case"mm":if(numberValue<0||numberValue>60){dateObj.mm=0;break}dateObj.mm=value;break;case"a":value.toLowerCase()!==thisLocaleCalendar.dayPeriods[0]&&value.toUpperCase()!==thisLocaleCalendar.dayPeriods[0]||(dateObj.a="AM",dateObj.h||"h"!==formatParts[i+1].toLowerCase().substr(0,1)||(dateObj.h=dateStringParts[i+1],hasAmFirst=!0),dateObj.h&&(12!==dateObj.h&&"12"!==dateObj.h||(dateObj.h=0))),value.toLowerCase()!==thisLocaleCalendar.dayPeriods[1]&&value.toUpperCase()!==thisLocaleCalendar.dayPeriods[1]||(dateObj.a="PM",dateObj.h&&dateObj.h<12&&(dateObj.h=parseInt(dateObj.h,10)+12))}}var isLeap=function isLeap(y){return y%4==0&&y%100!=0||y%400==0};if(dateObj.return=void 0,dateObj.leapYear=isLeap(dateObj.year),!isDateTime||dateObj.h||dateObj.mm){if(!dateObj.year&&0!==dateObj.year&&!isStrict){for(dateObj.isUndefindedYear=!0,i=0,l=formatParts.length;i<l;i++)if(formatParts[i].indexOf("y")>-1&&void 0!==dateStringParts[i]){dateObj.isUndefindedYear=!1;break}if(dateObj.isUndefindedYear){var isFeb29=29===parseInt(dateObj.day,10)&&1===parseInt(dateObj.month,10);dateObj.year=isFeb29?function closestLeap(y){for(var closestLeapYear="number"!=typeof y||isNaN(y)?(new Date).getFullYear():y,i2=0;i2<4&&!isLeap(closestLeapYear);i2++)closestLeapYear--;return closestLeapYear}():(new Date).getFullYear()}else delete dateObj.year}if(dateObj.year&&2===dateObj.year.length&&(dateObj.year="20".concat(dateObj.year)),dateObj.year=$.trim(dateObj.year),dateObj.day=$.trim(dateObj.day),(""===dateObj.year||dateObj.year&&2!=="".concat(dateObj.year).length&&4!=="".concat(dateObj.year).length)&&delete dateObj.year,!dateObj.month&&0!==dateObj.month&&!isStrict){for(dateObj.isUndefindedMonth=!0,i=0,l=formatParts.length;i<l;i++)if(formatParts[i].indexOf("M")>-1&&void 0!==dateStringParts[i]){dateObj.isUndefindedMonth=!1;break}dateObj.isUndefindedMonth&&(dateObj.month=(new Date).getMonth())}if(!(dateObj.day||0===dateObj.day||isStrict&&hasDays)){for(dateObj.isUndefindedDay=!0,i=0,l=formatParts.length;i<l;i++)if(formatParts[i].indexOf("d")>-1&&void 0!==dateStringParts[i]){dateObj.isUndefindedDay=!1;break}dateObj.isUndefindedDay?dateObj.day=1:delete dateObj.day}return isDateTime?isUTC?(void 0!==dateObj.h&&(dateObj.return=new Date(Date.UTC(dateObj.year,dateObj.month,dateObj.day,dateObj.h,dateObj.mm))),void 0!==dateObj.ss&&(dateObj.return=new Date(Date.UTC(dateObj.year,dateObj.month,dateObj.day,dateObj.h,dateObj.mm,dateObj.ss))),void 0!==dateObj.ms&&(dateObj.return=new Date(Date.UTC(dateObj.year,dateObj.month,dateObj.day,dateObj.h,dateObj.mm,dateObj.ss,dateObj.ms)))):(void 0!==dateObj.h&&(dateObj.return=new Date(dateObj.year,dateObj.month,dateObj.day,dateObj.h,dateObj.mm)),void 0!==dateObj.ss&&(dateObj.return=new Date(dateObj.year,dateObj.month,dateObj.day,dateObj.h,dateObj.mm,dateObj.ss)),void 0!==dateObj.ms&&(dateObj.return=new Date(dateObj.year,dateObj.month,dateObj.day,dateObj.h,dateObj.mm,dateObj.ss,dateObj.ms))):dateObj.return=new Date(dateObj.year,dateObj.month,dateObj.day),"islamic-umalqura"===thisLocaleCalendar.name?[parseInt(dateObj.year,10),parseInt(dateObj.month,10),parseInt(dateObj.day,10),parseInt(dateObj.h||0,10),parseInt(dateObj.ss||0,10),parseInt(dateObj.ms||0,10)]:this.isValidDate(dateObj.return)?dateObj.return:void 0}}}},twoToFourDigitYear:function twoToFourDigitYear(twoDigitYear){return parseInt((twoDigitYear>39?"19":"20")+twoDigitYear,10)},getDatePart:function getDatePart(formatParts,dateStringParts,filter1,filter2,filter3,filter4){var ret=0;return $.each(dateStringParts,(function(i){filter1!==formatParts[i]&&filter2!==formatParts[i]&&filter3!==formatParts[i]&&filter4!==formatParts[i]||(ret=dateStringParts[i])})),ret},useLocale:function useLocale(options){var localeData=this.currentLocale.data;if(options&&options.locale&&this.cultures[options.locale]&&(localeData=this.cultures[options.locale]),options&&options.language&&this.languages[options.language]){var newData=utils.extend(!0,{},this.currentLocale.data);if(newData.calendars)return newData.calendars[0]=this.calendar(options.locale||this.currentLocale.name,options.language),newData}return localeData.numbers||(localeData.numbers=this.numbers()),localeData},useLanguage:function useLanguage(options){var languageData=this.currentLanguage;if(options&&options.locale){var lang=options.locale.split("-")[0];languageData=this.languages[lang]}return options&&options.locale&&this.currentLanguage.name!==this.currentLocale.name.substr(0,2)&&this.languages[this.currentLanguage.name]&&(languageData=this.languages[this.currentLanguage.name]),options&&options.language&&this.languages[options.language]&&(languageData=this.languages[options.language]),languageData},formatNumber:function formatNumber(number,options){var formattedNum,curFormat,percentFormat,localeData=this.useLocale(options),decimal=options&&options.decimal?options.decimal:localeData.numbers.decimal,minimumFractionDigits=options&&void 0!==options.minimumFractionDigits?options.minimumFractionDigits:options&&options.style&&"currency"===options.style?2:options&&options.style&&"percent"===options.style?0:2,maximumFractionDigits=options&&void 0!==options.maximumFractionDigits?options.maximumFractionDigits:options&&options.style&&("currency"===options.style||"percent"===options.style)?2:options&&options.minimumFractionDigits?options.minimumFractionDigits:3;if(null!=number&&""!==number){if(options&&"integer"===options.style&&(maximumFractionDigits=0,minimumFractionDigits=0),options&&"currency"===options.style){var sign=options&&options.currencySign?options.currencySign:localeData.currencySign,format=options&&options.currencyFormat?options.currencyFormat:localeData.currencyFormat;format||(format="¤#,##0.00"),curFormat=format.replace("¤",sign)}if(options&&"percent"===options.style){var percentSign=localeData.numbers?localeData.numbers.percentSign:"%";percentFormat=(percentFormat=localeData.numbers?localeData.numbers.percentFormat:"### %").replace("¤",percentSign)}"string"==typeof number&&(number=Locale.parseNumber(number)),number.toString().indexOf("e")>-1&&(number=number.toFixed(maximumFractionDigits+1)),options&&"percent"===options.style&&(number=(100*number).toFixed(minimumFractionDigits));var parts=this.truncateDecimals(number,minimumFractionDigits,maximumFractionDigits,options&&options.round).split("."),groupSizes=[3,3];localeData&&localeData.numbers&&localeData.numbers.groupSizes&&(groupSizes=localeData.numbers.groupSizes),options&&options.groupSizes&&(groupSizes=options.groupSizes);var sep=options&&void 0!==options.group?options.group:localeData.numbers.group,expandedNum=this.expandNumber(parts[0],groupSizes,sep);parts[0]=expandedNum,formattedNum=parts.join(decimal);var minusSign=localeData&&localeData.numbers&&localeData.numbers.minusSign?localeData.numbers.minusSign:"-",isNegative=formattedNum.indexOf(minusSign)>-1;formattedNum=formattedNum.replace(minusSign,"");var escape=function escape(str){return str.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},expr="";return 0===minimumFractionDigits&&(expr=new RegExp("(".concat(escape(decimal),"[0-9]*?)0+$")),formattedNum=formattedNum.replace(expr,"$1")),minimumFractionDigits>0&&(expr=new RegExp("(".concat(escape(decimal),".{").concat(minimumFractionDigits,"}[0-9]*?)0+$")),formattedNum=formattedNum.replace(expr,"$1")),expr=new RegExp("".concat(escape(decimal),"$")),formattedNum=formattedNum.replace(expr,""),options&&"currency"===options.style&&(formattedNum=curFormat.replace("###",formattedNum)),options&&"percent"===options.style&&(formattedNum=percentFormat.replace("###",formattedNum)),isNegative&&(formattedNum=minusSign+formattedNum),formattedNum}},expandNumber:function expandNumber(numberString,groupSizes,sep){var len=numberString.length,isNegative=!1;if("-"===numberString.substr(0,1)&&(len=(numberString=numberString.substr(1)).length,isNegative=!0),len<=3)return(isNegative?"-":"")+numberString;if(0===groupSizes[0])return(isNegative?"-":"")+numberString;var firstGroup=numberString.substr(numberString.length-groupSizes[0]),nthGroup=numberString.substr(0,numberString.length-groupSizes[0]);if(0===groupSizes[1])return(isNegative?"-":"")+nthGroup+(""===nthGroup?"":sep)+firstGroup;var reversed=nthGroup.split("").reverse().join(""),regex=new RegExp(".{1,".concat(groupSizes[1],"}"),"g");return(isNegative?"-":"")+reversed.match(regex).join(sep).split("").reverse().join("")+sep+firstGroup},truncateDecimals:function truncateDecimals(number,minDigits,maxDigits,round){var processed=number;processed=round?numberUtils.round(number,maxDigits):numberUtils.truncate(number,maxDigits);var actualDecimals=numberUtils.decimalPlaces(processed);return actualDecimals<minDigits&&(processed=processed.toString()+new Array(minDigits-actualDecimals+1).join("0")),processed.toString()},parseNumber:function parseNumber(input,options){var numString,localeData=this.useLocale(options),numSettings=localeData.numbers;if(!(numString=input))return NaN;"number"==typeof input&&(numString=numString.toString());var group=numSettings?numSettings.group:",",decimal=numSettings?numSettings.decimal:".",percentSign=numSettings?numSettings.percentSign:"%",currencySign=localeData.currencySign||"$",exp=" "===group?new RegExp(/\s/g):new RegExp("\\".concat(group),"g");return(numString=(numString=(numString=(numString=(numString=(numString=numString.replace(exp,"")).replace(decimal,".")).replace(percentSign,"")).replace(currencySign,"")).replace("$","")).replace(" ","")).length>=19?numString:parseFloat(numString)},translate:function translate(key,options){var languageData=this.useLanguage(options),showAsUndefined=!1,showBrackets=!0;if("&nsbp;"===key)return"";if("boolean"==typeof options&&(showAsUndefined=options),"object"===_typeof(options)&&void 0!==options.showAsUndefined&&(showAsUndefined=options.showAsUndefined),"object"===_typeof(options)&&void 0!==options.showBrackets&&(showBrackets=options.showBrackets),void 0===languageData||void 0===languageData.messages)return showAsUndefined?void 0:"".concat(showBrackets?"[":"").concat(key).concat(showBrackets?"]":"");if(void 0===languageData.messages[key]){return this.languages&&this.languages.en&&this.languages.en.messages&&void 0!==this.languages.en.messages[key]?this.languages.en.messages[key].value:showAsUndefined?void 0:"".concat(showBrackets?"[":"").concat(key).concat(showBrackets?"]":"")}return languageData.messages[key].value},extendTranslations:function extendTranslations(lang,messages){if(this.languages[lang]){var base=this.languages[lang].messages;this.languages[lang].messages=$.extend(!1,base,messages)}},calendar:function calendar(locale,lang,name){var calendars=[];if(this.currentLocale.data.calendars&&!locale&&(calendars=this.currentLocale.data.calendars),lang&&lang.length>2&&(lang=lang.substr(0,2)),locale&&this.cultures[locale]&&(calendars=this.cultures[locale].calendars),name&&calendars)for(var i=0;i<calendars.length;i++){var cal=calendars[i];if(cal.name===name)return cal}if(!calendars[0])return{dateFormat:{separator:"/",timeSeparator:":",short:"M/d/yyyy",medium:"MMM d, yyyy",long:"MMMM d, yyyy",full:"EEEE, MMMM d, y",month:"MMMM d",year:"MMMM yyyy",timestamp:"h:mm:ss a",datetime:"M/d/yyyy h:mm a"},timeFormat:"HH:mm:ss",dayPeriods:["AM","PM"]};var calendar=utils.extend({},calendars[0]);if(lang&&locale.substr(0,2)!==lang){var defaultLocale=this.defaultLocales.filter((function(a){return a.lang===lang}));if(defaultLocale[0]){var culture=this.cultures[defaultLocale[0].default];calendar.days=culture.calendars[0].days,calendar.months=culture.calendars[0].months,calendar.dayPeriods=culture.calendars[0].dayPeriods}}return calendar},numbers:function numbers(){return this.currentLocale.data.numbers?this.currentLocale.data.numbers:{percentSign:"%",percentFormat:"### %",minusSign:"-",decimal:".",group:","}},pad:function pad(n,width,z){return z=z||"0",(n+="").length>=width?n:new Array(width-n.length+1).join(z)+n},isRTL:function isRTL(){return!!this.currentLanguage&&"right-to-left"===this.currentLanguage.direction},toUpperCase:function toUpperCase(str){return"function"==typeof this.currentLocale.data.toUpperCase?this.currentLocale.data.toUpperCase(str):str.toLocaleUpperCase()},toLowerCase:function toLowerCase(str){return"function"==typeof this.currentLocale.data.toLowerCase?this.currentLocale.data.toLowerCase(str):str.toString().toLocaleLowerCase()},capitalize:function capitalize(str){return this.toUpperCase(str.charAt(0))+str.slice(1)},capitalizeWords:function capitalizeWords(str){for(var words=str.split(" "),i=0;i<words.length;i++)words[i]=this.capitalize(words[i]);return words.join(" ")},gregorianToUmalqura:function gregorianToUmalqura(date){if("function"!=typeof date.getMonth)return null;var umalquraDate=function julianToUmalqura(julianDate){for(var mcjdn=julianDate-24e5+.5,index=0,i=0;i<ummalquraData.length&&!(ummalquraData[i]>mcjdn);i++)index++;var lunation=index+15292,ii=Math.floor((lunation-1)/12);return{year:ii+1,month:lunation-12*ii-1,day:mcjdn-ummalquraData[index-1]+1}}(function getJd(year,month,day){year<0&&year++,month<3&&(month+=12,year--);var a=Math.floor(year/100),b=2-a+Math.floor(a/4);return Math.floor(365.25*(year+4716))+Math.floor(30.6001*(month+1))+day+b-1524.5}(date.getFullYear(),date.getMonth()+1,date.getDate()));return[umalquraDate.year,umalquraDate.month,umalquraDate.day,date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()]},umalquraToGregorian:function umalquraToGregorian(year,month,day){var isNumber=function isNumber(n){return"number"==typeof n&&!isNaN(n)};if(!isNumber(year)||!isNumber(month)||!isNumber(day))return null;var gregorianDateObj=function julianToGregorian(julianDate){var z=Math.floor(julianDate+.5),a=Math.floor((z-1867216.25)/36524.25),b=(a=z+1+a-Math.floor(a/4))+1524,c=Math.floor((b-122.1)/365.25),d=Math.floor(365.25*c),e=Math.floor((b-d)/30.6001),gmonth=e-(e>13.5?13:1),gyear=c-(gmonth>2.5?4716:4715);return gyear<=0&&gyear--,{year:gyear,month:gmonth-1,day:b-d-Math.floor(30.6001*e)}}(function getJd(y,m,d){return d+ummalquraData[12*(y-1)+m-15292-1]-1+24e5-.5}(year,month+1,day));return new Date(gregorianDateObj.year,gregorianDateObj.month,gregorianDateObj.day,0,0,0,0)},flipIconsHorizontally:function flipIconsHorizontally(){var icons=["attach","bottom-aligned","bullet-list","cancel","cart","collapse-app-tray","cut","document","drilldown","duplicate","expand-app-tray","export","first-page","folder","import","last-page","launch","left-align","left-text-align","left-arrow","new-document","next-page","number-list","paste","previous-page","quote","redo","refresh","right-align","right-arrow","right-text-align","save","search-folder","search-list","search","send","tack","tree-collapse","tree-expand","undo","unlocked","add-grid-record","add-grid-row","additional-help","bubble","bullet-steps","cascade","change-font","clear-screen","script","clockwise-90","close-cancel","close-save","contacts","copy-from","copy-mail","copy-url","counter-clockwise-90","create-report","delete-grid-record","delete-grid-row","display","employee-directory","export-2","export-to-pdf","generate-key","get-more-rows","group-selection","headphones","help","helper-list-select","history","invoice-released","language","logout","key","lasso","line-bar-chart","line-chart","new-expense-report","new-payment-request","new-time-sheet","new-travel-plan","no-attachment","no-comment","no-filter","overlay-line","pdf-file","phone","payment-request","pie-chart","queries","quick-access","refresh-current","restore-user","run-quick-access","save-close","save-new","search-results-history","select","send-submit","show-last-x-days","special-item","stacked","timesheet","unsubscribe","update-preview","zoom-100","zoom-in","zoom-out","caret-left","caret-right"];$("svg").each((function(){var iconName=$(this).getIconName();iconName&&-1!==$.inArray(iconName,icons)&&0===$(this).closest(".monthview").length&&$(this).addClass("icon-rtl-rotate")}))}};function methodName(method){if("function"!=typeof method){if("string"==typeof method)return method;throw new Error("".concat(_typeof(method)," was provided where a function was expected."))}if("string"==typeof method.name)return"".concat(method.name,"()");var result=/^function\s+([\w$]+)\s*\(/.exec(method.toString());return result?"".concat(result[1],"()"):"(anonymous function)"}function warnAboutDeprecation(newMethod,oldMethod){var context=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("object"===("undefined"==typeof console?"undefined":_typeof(console))){var newMethodName=methodName(newMethod),oldMethodName=methodName(oldMethod);context.length&&(context=" (".concat(context,")")),console.warn("IDS Enterprise".concat(context,': "').concat(oldMethodName,'" is deprecated. Please use "').concat(newMethodName,'" instead.'))}}function warnAboutRemoval(removedName){"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.warn('IDS Enterprise: "'.concat(removedName,'" is deprecated and will be later removed. Please adjust your code accordingly.'))}function deprecateMethod(newMethod,oldMethod){var wrapper=function deprecatedMethodWrapper(){warnAboutDeprecation(newMethod,oldMethod);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];newMethod.apply(this,args)};return wrapper.prototype=newMethod.prototype,wrapper}function Base(element){return this.element=$(element),this}Base.prototype={get url(){return window.location.href.replace(window.location.hash,"")},get href(){return this.element[0].getAttribute("href")},getCurrentURL:function getCurrentURL(){return warnAboutDeprecation("url","getCurrentURL"),this.url},getBaseURL:function getBaseURL(hash){return this.element.length&&this.href&&"/"!==this.href?hash?0===hash.indexOf("/")?hash:(hash=(-1===hash.indexOf("#")?"#":"")+hash,this.url+hash):this.url:hash||""}};var base=new Base($("base[href]"));$.getBaseURL=function(hash){return base.getBaseURL(hash)};var RENDERLOOP_DEFAULTS={noAutoStart:!1},instanceSettings={};function timestamp(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}function RenderLoopItem(opts){if(this.id=opts.id,this.duration=opts.duration||-1,this.duration<1&&("string"!=typeof this.id||!this.id.length))throw new Error("cannot build a RenderLoopItem with no duration and no namespace");return this.updateDuration=opts.updateDuration||1,this.setFuncs(opts),this.paused=!1,this.elapsedTime=0,this.startTime=timestamp(),this}function RenderLoop(settings){return this.items=[],this.element=$("body"),this.settings=utils.mergeSettings(null,settings,RENDERLOOP_DEFAULTS),!0!==this.settings.noAutoStart&&this.start(),this}"object"===_typeof(window.SohoConfig)&&"object"===_typeof(window.SohoConfig.renderLoop)&&(instanceSettings=utils.extend({},RENDERLOOP_DEFAULTS,window.SohoConfig.renderLoop)),RenderLoopItem.prototype={setFuncs:function setFuncs(opts){if("function"!=typeof opts.updateCallback&&"function"!=typeof opts.timeoutCallback)throw new Error("cannot register callback to RenderLoop because callback is not a function");"function"==typeof opts.updateCallback&&(this.updateCallback=opts.updateCallback),"function"==typeof opts.timeoutCallback&&(this.timeoutCallback=opts.timeoutCallback)},pause:function pause(){this.paused=!0},resume:function resume(){this.paused=!1},destroy:function destroy(noTimeout){noTimeout&&(this.noTimeout=!0),this.doRemoveOnNextTick=!0}},RenderLoop.prototype={start:function start(){this.doLoop=!0,this.startTime=timestamp();var now,deltaTime,self=this,last=timestamp();!function tick(){self.doLoop&&(now=timestamp(),deltaTime=(now-last)/1e3,self.items.forEach((function(loopItem){var modifiedArgs;if(loopItem.doRemoveOnNextTick)self.remove(loopItem);else if(loopItem.paused||loopItem.elapsedTime++,"number"==typeof loopItem.duration&&loopItem.duration>-1&&(loopItem.startTime||(loopItem.startTime=now),loopItem.elapsedTime>=loopItem.duration))loopItem.destroy();else if("function"==typeof loopItem.updateCallback){if(loopItem.updateDuration&&loopItem.updateDuration>1&&(isNaN(loopItem.timeUntilNextUpdate)&&(loopItem.timeUntilNextUpdate=loopItem.updateDuration),loopItem.timeUntilNextUpdate>0))return void--loopItem.timeUntilNextUpdate;modifiedArgs=[loopItem,{last:last,delta:deltaTime,now:now}],loopItem.updateCallback.apply(null,modifiedArgs)}})),last=now,requestAnimationFrame(tick))}()},stop:function stop(){this.doLoop=!1},totalDuration:function totalDuration(){return timestamp()-this.startTime},queue:function queue(){return this.items},buildRenderLoopItem:function buildRenderLoopItem(updateCallback,timeoutCallback,duration,namespace){var noNamespace="string"!=typeof namespace||!namespace.length;if("string"==typeof duration)if(noNamespace)namespace=duration,duration=-1,noNamespace=!1;else{var numberDuration=Number(duration);isNaN(numberDuration)||(duration=numberDuration)}else"number"!=typeof duration&&(duration=-1);return"string"==typeof namespace&&namespace.length||(namespace=""),new RenderLoopItem({id:namespace,updateCallback:updateCallback,timeoutCallback:timeoutCallback,duration:duration})},register:function register(loopItem,timeoutCallback,duration,namespace){return loopItem instanceof RenderLoopItem||(loopItem=this.buildRenderLoopItem(loopItem,timeoutCallback,duration,namespace)),this.items.push(loopItem),loopItem},unregister:function unregister(callback,namespace){if("function"!=typeof callback&&"string"!=typeof callback&&"string"!=typeof namespace)throw new Error("must provide either a callback function or a namespace string to remove an entry from the RenderLoop queue.");return"string"==typeof callback&&(namespace=callback,callback=void 0),this.remove({cb:callback,id:namespace})},getFromQueue:function getFromQueue(updateCallback,namespace){var retreivedItem;return"string"==typeof callback&&(namespace=updateCallback,updateCallback=void 0),"function"==typeof callback?this.items.forEach((function(item){return"".concat(item.updateCallback)!=="".concat(updateCallback)||(retreivedItem=item,!1)})):"string"==typeof namespace&&this.items.forEach((function(item){return item.id!==namespace||(retreivedItem=item,!1)})),retreivedItem},remove:function remove(obj){var removedItem;return obj instanceof RenderLoopItem?(removedItem=obj,this.items=this.items.filter((function(item){return item!==obj}))):"function"==typeof obj.updateCallback?this.items=this.items.filter((function(item){return"".concat(item.updateCallback)!=="".concat(obj.updateCallback)||(removedItem=item,!1)})):"string"==typeof obj.id&&(this.items=this.items.filter((function(item){return item.id!==obj.id||(removedItem=item,!1)}))),"function"!=typeof removedItem.timeoutCallback||removedItem.noTimeout||removedItem.timeoutCallback.apply(null,removedItem),this.element.triggerHandler("remove.renderLoop",[removedItem]),removedItem},pause:function pause(callback,namespace){if("function"!=typeof callback&&"string"!=typeof callback&&"string"!=typeof namespace)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var pausedItem=this.getFromQueue(callback,namespace);return pausedItem.pause(),pausedItem},resume:function resume(callback,namespace){if("function"!=typeof callback&&"string"!=typeof callback&&"string"!=typeof namespace)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var resumableItem=this.getFromQueue(callback,namespace);return resumableItem.resume(),resumableItem}};var renderLoop=new RenderLoop(instanceSettings);function Keyboard(){this.pressedKeys=new Map,this.init()}Keyboard.prototype={init:function init(){var _this=this;$(document).on("keydown.".concat("keyboard"),(function(e){_this.press(e.key),_this.announceKeys()})).on("keyup.".concat("keyboard"),(function(e){_this.unpress(e.key),_this.announceKeys()}))},announceKeys:function announceKeys(){var keys=[];this.pressedKeys.forEach((function(val,key){keys.push(key)})),$("body").triggerHandler("keys",[keys])},press:function press(key){return this.pressedKeys.set("".concat(key),!0)},unpress:function unpress(key){return this.pressedKeys.delete("".concat(key))},isPressed:function isPressed(key){return this.pressedKeys.has("".concat(key))}};var keyboard=new Keyboard,colorUtils={hexToRgba:function hexToRgba(hex,opacity){var c;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)?(3===(c=hex.substring(1).split("")).length&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]),c="0x".concat(c.join("")),"rgba(".concat([c>>16&255,c>>8&255,255&c].join(","),",").concat(opacity.toString(),")")):""},getLuminousColorShade:function getLuminousColorShade(hex,lum){hex=this.validateHex(hex).substr(1),lum=lum||0;var c,i,rgb="#";for(i=0;i<3;i++)c=parseInt(hex.substr(2*i,2),16),c=Math.round(Math.min(Math.max(0,c+c*lum),255)).toString(16),rgb+="00".concat(c).substr(c.length);return rgb},validateHex:function validateHex(hex){return(hex=String(hex).replace(/[^0-9a-f]/gi,"")).length<6&&(hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]),"#".concat(hex)},getContrastColor:function getContrastColor(hex,light,dark){hex=hex?hex.replace("#",""):"";var parse=function parse(x){return parseInt(hex.substr(x,2),16)};return(299*parse(0)+587*parse(2)+114*parse(4))/1e3>=128?dark||"black":light||"white"}},theme={currentTheme:{id:"theme-soho-light",name:Locale.translate("SohoLightTheme"),legacyId:"light"},allColors:[{id:"theme-soho-light",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#fbe9bf"},20:{name:"theme-color-palette-amber-20",value:"#f8e09c"},30:{name:"theme-color-palette-amber-30",value:"#f7d475"},40:{name:"theme-color-palette-amber-40",value:"#f4c951"},50:{name:"theme-color-palette-amber-50",value:"#f2bc41"},60:{name:"theme-color-palette-amber-60",value:"#efa836"},70:{name:"theme-color-palette-amber-70",value:"#ee9a36"},80:{name:"theme-color-palette-amber-80",value:"#e4882b"},90:{name:"theme-color-palette-amber-90",value:"#db7726"},100:{name:"theme-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"theme-color-palette-amethyst-20",value:"#daccec"},30:{name:"theme-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"theme-color-palette-amethyst-40",value:"#b59eca"},50:{name:"theme-color-palette-amethyst-50",value:"#a38db7"},60:{name:"theme-color-palette-amethyst-60",value:"#9279a6"},70:{name:"theme-color-palette-amethyst-70",value:"#806594"},80:{name:"theme-color-palette-amethyst-80",value:"#6e5282"},90:{name:"theme-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"theme-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#c8e9f4"},20:{name:"theme-color-palette-azure-20",value:"#addbeb"},30:{name:"theme-color-palette-azure-30",value:"#8dc9e6"},40:{name:"theme-color-palette-azure-40",value:"#69b5dd"},50:{name:"theme-color-palette-azure-50",value:"#54a1d3"},60:{name:"theme-color-palette-azure-60",value:"#368ac0"},70:{name:"theme-color-palette-azure-70",value:"#2578a9"},80:{name:"theme-color-palette-azure-80",value:"#1d5f8a"},90:{name:"theme-color-palette-azure-90",value:"#134d71"},100:{name:"theme-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"theme-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"theme-color-palette-emerald-30",value:"#afdc91"},40:{name:"theme-color-palette-emerald-40",value:"#9cce7c"},50:{name:"theme-color-palette-emerald-50",value:"#89bf65"},60:{name:"theme-color-palette-emerald-60",value:"#76b051"},70:{name:"theme-color-palette-emerald-70",value:"#66a140"},80:{name:"theme-color-palette-emerald-80",value:"#56932e"},90:{name:"theme-color-palette-emerald-90",value:"#488421"},100:{name:"theme-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"theme-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"theme-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"theme-color-palette-graphite-40",value:"#999999"},50:{name:"theme-color-palette-graphite-50",value:"#737373"},60:{name:"theme-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"theme-color-palette-graphite-70",value:"#454545"},80:{name:"theme-color-palette-graphite-80",value:"#383838"},90:{name:"theme-color-palette-graphite-90",value:"#292929"},100:{name:"theme-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#f6caca"},20:{name:"theme-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"theme-color-palette-ruby-30",value:"#de8181"},40:{name:"theme-color-palette-ruby-40",value:"#d26d6d"},50:{name:"theme-color-palette-ruby-50",value:"#c65f5f"},60:{name:"theme-color-palette-ruby-60",value:"#b94e4a"},70:{name:"theme-color-palette-ruby-70",value:"#ad4242"},80:{name:"theme-color-palette-ruby-80",value:"#a13030"},90:{name:"theme-color-palette-ruby-90",value:"#941e1e"},100:{name:"theme-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#dee1e8"},20:{name:"theme-color-palette-slate-20",value:"#c8cbd4"},30:{name:"theme-color-palette-slate-30",value:"#abaeb7"},40:{name:"theme-color-palette-slate-40",value:"#888b94"},50:{name:"theme-color-palette-slate-50",value:"#656871"},60:{name:"theme-color-palette-slate-60",value:"#50535a"},70:{name:"theme-color-palette-slate-70",value:"#414247"},80:{name:"theme-color-palette-slate-80",value:"#313236"},90:{name:"theme-color-palette-slate-90",value:"#212224"},100:{name:"theme-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"theme-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"theme-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"theme-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"theme-color-palette-turquoise-50",value:"#69ada3"},60:{name:"theme-color-palette-turquoise-60",value:"#579e95"},70:{name:"theme-color-palette-turquoise-70",value:"#448d83"},80:{name:"theme-color-palette-turquoise-80",value:"#317c73"},90:{name:"theme-color-palette-turquoise-90",value:"#206b62"},100:{name:"theme-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#2578a9",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"theme-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"theme-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"theme-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"theme-color-brand-primary-base",value:"#368ac0"},alt:{name:"theme-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"theme-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"theme-color-brand-secondary-alt",value:"#999999"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#383838"}}}},legacyId:"light"},{id:"theme-soho-dark",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#fbe9bf"},20:{name:"theme-color-palette-amber-20",value:"#f8e09c"},30:{name:"theme-color-palette-amber-30",value:"#f7d475"},40:{name:"theme-color-palette-amber-40",value:"#f4c951"},50:{name:"theme-color-palette-amber-50",value:"#f2bc41"},60:{name:"theme-color-palette-amber-60",value:"#efa836"},70:{name:"theme-color-palette-amber-70",value:"#ee9a36"},80:{name:"theme-color-palette-amber-80",value:"#e4882b"},90:{name:"theme-color-palette-amber-90",value:"#db7726"},100:{name:"theme-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"theme-color-palette-amethyst-20",value:"#daccec"},30:{name:"theme-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"theme-color-palette-amethyst-40",value:"#b59eca"},50:{name:"theme-color-palette-amethyst-50",value:"#a38db7"},60:{name:"theme-color-palette-amethyst-60",value:"#9279a6"},70:{name:"theme-color-palette-amethyst-70",value:"#806594"},80:{name:"theme-color-palette-amethyst-80",value:"#6e5282"},90:{name:"theme-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"theme-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#c8e9f4"},20:{name:"theme-color-palette-azure-20",value:"#addbeb"},30:{name:"theme-color-palette-azure-30",value:"#8dc9e6"},40:{name:"theme-color-palette-azure-40",value:"#69b5dd"},50:{name:"theme-color-palette-azure-50",value:"#54a1d3"},60:{name:"theme-color-palette-azure-60",value:"#368ac0"},70:{name:"theme-color-palette-azure-70",value:"#2578a9"},80:{name:"theme-color-palette-azure-80",value:"#1d5f8a"},90:{name:"theme-color-palette-azure-90",value:"#134d71"},100:{name:"theme-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"theme-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"theme-color-palette-emerald-30",value:"#afdc91"},40:{name:"theme-color-palette-emerald-40",value:"#9cce7c"},50:{name:"theme-color-palette-emerald-50",value:"#89bf65"},60:{name:"theme-color-palette-emerald-60",value:"#76b051"},70:{name:"theme-color-palette-emerald-70",value:"#66a140"},80:{name:"theme-color-palette-emerald-80",value:"#56932e"},90:{name:"theme-color-palette-emerald-90",value:"#488421"},100:{name:"theme-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"theme-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"theme-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"theme-color-palette-graphite-40",value:"#999999"},50:{name:"theme-color-palette-graphite-50",value:"#737373"},60:{name:"theme-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"theme-color-palette-graphite-70",value:"#454545"},80:{name:"theme-color-palette-graphite-80",value:"#383838"},90:{name:"theme-color-palette-graphite-90",value:"#292929"},100:{name:"theme-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#f6caca"},20:{name:"theme-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"theme-color-palette-ruby-30",value:"#de8181"},40:{name:"theme-color-palette-ruby-40",value:"#d26d6d"},50:{name:"theme-color-palette-ruby-50",value:"#c65f5f"},60:{name:"theme-color-palette-ruby-60",value:"#b94e4a"},70:{name:"theme-color-palette-ruby-70",value:"#ad4242"},80:{name:"theme-color-palette-ruby-80",value:"#a13030"},90:{name:"theme-color-palette-ruby-90",value:"#941e1e"},100:{name:"theme-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#dee1e8"},20:{name:"theme-color-palette-slate-20",value:"#c8cbd4"},30:{name:"theme-color-palette-slate-30",value:"#abaeb7"},40:{name:"theme-color-palette-slate-40",value:"#888b94"},50:{name:"theme-color-palette-slate-50",value:"#656871"},60:{name:"theme-color-palette-slate-60",value:"#50535a"},70:{name:"theme-color-palette-slate-70",value:"#414247"},80:{name:"theme-color-palette-slate-80",value:"#313236"},90:{name:"theme-color-palette-slate-90",value:"#212224"},100:{name:"theme-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"theme-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"theme-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"theme-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"theme-color-palette-turquoise-50",value:"#69ada3"},60:{name:"theme-color-palette-turquoise-60",value:"#579e95"},70:{name:"theme-color-palette-turquoise-70",value:"#448d83"},80:{name:"theme-color-palette-turquoise-80",value:"#317c73"},90:{name:"theme-color-palette-turquoise-90",value:"#206b62"},100:{name:"theme-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#2578a9",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"theme-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"theme-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"theme-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"theme-color-brand-primary-base",value:"#368ac0"},alt:{name:"theme-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"theme-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"theme-color-brand-secondary-alt",value:"#999999"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#383838"}}}},legacyId:"dark"},{id:"theme-soho-contrast",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#fbe9bf"},20:{name:"theme-color-palette-amber-20",value:"#f8e09c"},30:{name:"theme-color-palette-amber-30",value:"#f7d475"},40:{name:"theme-color-palette-amber-40",value:"#f4c951"},50:{name:"theme-color-palette-amber-50",value:"#f2bc41"},60:{name:"theme-color-palette-amber-60",value:"#efa836"},70:{name:"theme-color-palette-amber-70",value:"#ee9a36"},80:{name:"theme-color-palette-amber-80",value:"#e4882b"},90:{name:"theme-color-palette-amber-90",value:"#db7726"},100:{name:"theme-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"theme-color-palette-amethyst-20",value:"#daccec"},30:{name:"theme-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"theme-color-palette-amethyst-40",value:"#b59eca"},50:{name:"theme-color-palette-amethyst-50",value:"#a38db7"},60:{name:"theme-color-palette-amethyst-60",value:"#9279a6"},70:{name:"theme-color-palette-amethyst-70",value:"#806594"},80:{name:"theme-color-palette-amethyst-80",value:"#6e5282"},90:{name:"theme-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"theme-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#c8e9f4"},20:{name:"theme-color-palette-azure-20",value:"#addbeb"},30:{name:"theme-color-palette-azure-30",value:"#8dc9e6"},40:{name:"theme-color-palette-azure-40",value:"#69b5dd"},50:{name:"theme-color-palette-azure-50",value:"#54a1d3"},60:{name:"theme-color-palette-azure-60",value:"#368ac0"},70:{name:"theme-color-palette-azure-70",value:"#2578a9"},80:{name:"theme-color-palette-azure-80",value:"#1d5f8a"},90:{name:"theme-color-palette-azure-90",value:"#134d71"},100:{name:"theme-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"theme-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"theme-color-palette-emerald-30",value:"#afdc91"},40:{name:"theme-color-palette-emerald-40",value:"#9cce7c"},50:{name:"theme-color-palette-emerald-50",value:"#89bf65"},60:{name:"theme-color-palette-emerald-60",value:"#76b051"},70:{name:"theme-color-palette-emerald-70",value:"#66a140"},80:{name:"theme-color-palette-emerald-80",value:"#56932e"},90:{name:"theme-color-palette-emerald-90",value:"#488421"},100:{name:"theme-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"theme-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"theme-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"theme-color-palette-graphite-40",value:"#999999"},50:{name:"theme-color-palette-graphite-50",value:"#737373"},60:{name:"theme-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"theme-color-palette-graphite-70",value:"#454545"},80:{name:"theme-color-palette-graphite-80",value:"#383838"},90:{name:"theme-color-palette-graphite-90",value:"#292929"},100:{name:"theme-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#f6caca"},20:{name:"theme-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"theme-color-palette-ruby-30",value:"#de8181"},40:{name:"theme-color-palette-ruby-40",value:"#d26d6d"},50:{name:"theme-color-palette-ruby-50",value:"#c65f5f"},60:{name:"theme-color-palette-ruby-60",value:"#b94e4a"},70:{name:"theme-color-palette-ruby-70",value:"#ad4242"},80:{name:"theme-color-palette-ruby-80",value:"#a13030"},90:{name:"theme-color-palette-ruby-90",value:"#941e1e"},100:{name:"theme-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#dee1e8"},20:{name:"theme-color-palette-slate-20",value:"#c8cbd4"},30:{name:"theme-color-palette-slate-30",value:"#abaeb7"},40:{name:"theme-color-palette-slate-40",value:"#888b94"},50:{name:"theme-color-palette-slate-50",value:"#656871"},60:{name:"theme-color-palette-slate-60",value:"#50535a"},70:{name:"theme-color-palette-slate-70",value:"#414247"},80:{name:"theme-color-palette-slate-80",value:"#313236"},90:{name:"theme-color-palette-slate-90",value:"#212224"},100:{name:"theme-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"theme-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"theme-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"theme-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"theme-color-palette-turquoise-50",value:"#69ada3"},60:{name:"theme-color-palette-turquoise-60",value:"#579e95"},70:{name:"theme-color-palette-turquoise-70",value:"#448d83"},80:{name:"theme-color-palette-turquoise-80",value:"#317c73"},90:{name:"theme-color-palette-turquoise-90",value:"#206b62"},100:{name:"theme-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#133c59",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"theme-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"theme-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"theme-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"theme-color-brand-primary-base",value:"#134d71"},alt:{name:"theme-color-brand-primary-alt",value:"#133c59"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"theme-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"theme-color-brand-secondary-alt",value:"#999999"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#383838"}}}},legacyId:"high-contrast"},{id:"theme-uplift-light",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#FEF2E5"},20:{name:"theme-color-palette-amber-20",value:"#FDDFBD"},30:{name:"theme-color-palette-amber-30",value:"#FCC888"},40:{name:"theme-color-palette-amber-40",value:"#FBAF50"},50:{name:"theme-color-palette-amber-50",value:"#FA9601"},60:{name:"theme-color-palette-amber-60",value:"#F98300"},70:{name:"theme-color-palette-amber-70",value:"#DF6F00"},80:{name:"theme-color-palette-amber-80",value:"#CD6200"},90:{name:"theme-color-palette-amber-90",value:"#BB5500"},100:{name:"theme-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"theme-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"theme-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"theme-color-palette-amethyst-40",value:"#A876EB"},50:{name:"theme-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"theme-color-palette-amethyst-60",value:"#7928E1"},70:{name:"theme-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"theme-color-palette-amethyst-80",value:"#591DA8"},90:{name:"theme-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"theme-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#E6F1FD"},20:{name:"theme-color-palette-azure-20",value:"#BEDCFA"},30:{name:"theme-color-palette-azure-30",value:"#8ABFF7"},40:{name:"theme-color-palette-azure-40",value:"#55A3F3"},50:{name:"theme-color-palette-azure-50",value:"#1C86EF"},60:{name:"theme-color-palette-azure-60",value:"#0072ED"},70:{name:"theme-color-palette-azure-70",value:"#0066D4"},80:{name:"theme-color-palette-azure-80",value:"#0054B1"},90:{name:"theme-color-palette-azure-90",value:"#004A99"},100:{name:"theme-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"theme-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"theme-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"theme-color-palette-emerald-40",value:"#78D8A3"},50:{name:"theme-color-palette-emerald-50",value:"#4DCC86"},60:{name:"theme-color-palette-emerald-60",value:"#2AC371"},70:{name:"theme-color-palette-emerald-70",value:"#25AF65"},80:{name:"theme-color-palette-emerald-80",value:"#1F9254"},90:{name:"theme-color-palette-emerald-90",value:"#1C7F49"},100:{name:"theme-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"theme-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"theme-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"theme-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"theme-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"theme-color-palette-graphite-60",value:"#535353"},70:{name:"theme-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"theme-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"theme-color-palette-graphite-90",value:"#363636"},100:{name:"theme-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"theme-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"theme-color-palette-ruby-30",value:"#EE9496"},40:{name:"theme-color-palette-ruby-40",value:"#E66467"},50:{name:"theme-color-palette-ruby-50",value:"#DF3539"},60:{name:"theme-color-palette-ruby-60",value:"#DA1217"},70:{name:"theme-color-palette-ruby-70",value:"#C31014"},80:{name:"theme-color-palette-ruby-80",value:"#A30D11"},90:{name:"theme-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"theme-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#EFEFF0"},20:{name:"theme-color-palette-slate-20",value:"#D7D7D8"},30:{name:"theme-color-palette-slate-30",value:"#B7B7BA"},40:{name:"theme-color-palette-slate-40",value:"#97979B"},50:{name:"theme-color-palette-slate-50",value:"#77777C"},60:{name:"theme-color-palette-slate-60",value:"#606066"},70:{name:"theme-color-palette-slate-70",value:"#56565B"},80:{name:"theme-color-palette-slate-80",value:"#47474C"},90:{name:"theme-color-palette-slate-90",value:"#3E3E42"},100:{name:"theme-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"theme-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"theme-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"theme-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"theme-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"theme-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"theme-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"theme-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"theme-color-palette-turquoise-90",value:"#297B7B"},100:{name:"theme-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#0066D4",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"theme-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"theme-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"theme-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"theme-color-brand-primary-base",value:"#0072ED"},alt:{name:"theme-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#97979B"},base:{name:"theme-color-brand-secondary-base",value:"#606066"},alt:{name:"theme-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#3E3E42"}}}}},{id:"theme-uplift-dark",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#FEF2E5"},20:{name:"theme-color-palette-amber-20",value:"#FDDFBD"},30:{name:"theme-color-palette-amber-30",value:"#FCC888"},40:{name:"theme-color-palette-amber-40",value:"#FBAF50"},50:{name:"theme-color-palette-amber-50",value:"#FA9601"},60:{name:"theme-color-palette-amber-60",value:"#F98300"},70:{name:"theme-color-palette-amber-70",value:"#DF6F00"},80:{name:"theme-color-palette-amber-80",value:"#CD6200"},90:{name:"theme-color-palette-amber-90",value:"#BB5500"},100:{name:"theme-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"theme-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"theme-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"theme-color-palette-amethyst-40",value:"#A876EB"},50:{name:"theme-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"theme-color-palette-amethyst-60",value:"#7928E1"},70:{name:"theme-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"theme-color-palette-amethyst-80",value:"#591DA8"},90:{name:"theme-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"theme-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#E6F1FD"},20:{name:"theme-color-palette-azure-20",value:"#BEDCFA"},30:{name:"theme-color-palette-azure-30",value:"#8ABFF7"},40:{name:"theme-color-palette-azure-40",value:"#55A3F3"},50:{name:"theme-color-palette-azure-50",value:"#1C86EF"},60:{name:"theme-color-palette-azure-60",value:"#0072ED"},70:{name:"theme-color-palette-azure-70",value:"#0066D4"},80:{name:"theme-color-palette-azure-80",value:"#0054B1"},90:{name:"theme-color-palette-azure-90",value:"#004A99"},100:{name:"theme-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"theme-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"theme-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"theme-color-palette-emerald-40",value:"#78D8A3"},50:{name:"theme-color-palette-emerald-50",value:"#4DCC86"},60:{name:"theme-color-palette-emerald-60",value:"#2AC371"},70:{name:"theme-color-palette-emerald-70",value:"#25AF65"},80:{name:"theme-color-palette-emerald-80",value:"#1F9254"},90:{name:"theme-color-palette-emerald-90",value:"#1C7F49"},100:{name:"theme-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"theme-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"theme-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"theme-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"theme-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"theme-color-palette-graphite-60",value:"#535353"},70:{name:"theme-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"theme-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"theme-color-palette-graphite-90",value:"#363636"},100:{name:"theme-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"theme-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"theme-color-palette-ruby-30",value:"#EE9496"},40:{name:"theme-color-palette-ruby-40",value:"#E66467"},50:{name:"theme-color-palette-ruby-50",value:"#DF3539"},60:{name:"theme-color-palette-ruby-60",value:"#DA1217"},70:{name:"theme-color-palette-ruby-70",value:"#C31014"},80:{name:"theme-color-palette-ruby-80",value:"#A30D11"},90:{name:"theme-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"theme-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#EFEFF0"},20:{name:"theme-color-palette-slate-20",value:"#D7D7D8"},30:{name:"theme-color-palette-slate-30",value:"#B7B7BA"},40:{name:"theme-color-palette-slate-40",value:"#97979B"},50:{name:"theme-color-palette-slate-50",value:"#77777C"},60:{name:"theme-color-palette-slate-60",value:"#606066"},70:{name:"theme-color-palette-slate-70",value:"#56565B"},80:{name:"theme-color-palette-slate-80",value:"#47474C"},90:{name:"theme-color-palette-slate-90",value:"#3E3E42"},100:{name:"theme-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"theme-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"theme-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"theme-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"theme-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"theme-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"theme-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"theme-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"theme-color-palette-turquoise-90",value:"#297B7B"},100:{name:"theme-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#0072ED",paletteName:"{theme.color.brand.primary.base.value}"},caution:{name:"theme-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"theme-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"theme-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"theme-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"theme-color-brand-primary-base",value:"#0072ED"},alt:{name:"theme-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#97979B"},base:{name:"theme-color-brand-secondary-base",value:"#606066"},alt:{name:"theme-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#3E3E42"}}}}},{id:"theme-uplift-contrast",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#FEF2E5"},20:{name:"theme-color-palette-amber-20",value:"#FDDFBD"},30:{name:"theme-color-palette-amber-30",value:"#FCC888"},40:{name:"theme-color-palette-amber-40",value:"#FBAF50"},50:{name:"theme-color-palette-amber-50",value:"#FA9601"},60:{name:"theme-color-palette-amber-60",value:"#F98300"},70:{name:"theme-color-palette-amber-70",value:"#DF6F00"},80:{name:"theme-color-palette-amber-80",value:"#CD6200"},90:{name:"theme-color-palette-amber-90",value:"#BB5500"},100:{name:"theme-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"theme-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"theme-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"theme-color-palette-amethyst-40",value:"#A876EB"},50:{name:"theme-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"theme-color-palette-amethyst-60",value:"#7928E1"},70:{name:"theme-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"theme-color-palette-amethyst-80",value:"#591DA8"},90:{name:"theme-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"theme-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#E6F1FD"},20:{name:"theme-color-palette-azure-20",value:"#BEDCFA"},30:{name:"theme-color-palette-azure-30",value:"#8ABFF7"},40:{name:"theme-color-palette-azure-40",value:"#55A3F3"},50:{name:"theme-color-palette-azure-50",value:"#1C86EF"},60:{name:"theme-color-palette-azure-60",value:"#0072ED"},70:{name:"theme-color-palette-azure-70",value:"#0066D4"},80:{name:"theme-color-palette-azure-80",value:"#0054B1"},90:{name:"theme-color-palette-azure-90",value:"#004A99"},100:{name:"theme-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"theme-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"theme-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"theme-color-palette-emerald-40",value:"#78D8A3"},50:{name:"theme-color-palette-emerald-50",value:"#4DCC86"},60:{name:"theme-color-palette-emerald-60",value:"#2AC371"},70:{name:"theme-color-palette-emerald-70",value:"#25AF65"},80:{name:"theme-color-palette-emerald-80",value:"#1F9254"},90:{name:"theme-color-palette-emerald-90",value:"#1C7F49"},100:{name:"theme-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"theme-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"theme-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"theme-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"theme-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"theme-color-palette-graphite-60",value:"#535353"},70:{name:"theme-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"theme-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"theme-color-palette-graphite-90",value:"#363636"},100:{name:"theme-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"theme-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"theme-color-palette-ruby-30",value:"#EE9496"},40:{name:"theme-color-palette-ruby-40",value:"#E66467"},50:{name:"theme-color-palette-ruby-50",value:"#DF3539"},60:{name:"theme-color-palette-ruby-60",value:"#DA1217"},70:{name:"theme-color-palette-ruby-70",value:"#C31014"},80:{name:"theme-color-palette-ruby-80",value:"#A30D11"},90:{name:"theme-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"theme-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#EFEFF0"},20:{name:"theme-color-palette-slate-20",value:"#D7D7D8"},30:{name:"theme-color-palette-slate-30",value:"#B7B7BA"},40:{name:"theme-color-palette-slate-40",value:"#97979B"},50:{name:"theme-color-palette-slate-50",value:"#77777C"},60:{name:"theme-color-palette-slate-60",value:"#606066"},70:{name:"theme-color-palette-slate-70",value:"#56565B"},80:{name:"theme-color-palette-slate-80",value:"#47474C"},90:{name:"theme-color-palette-slate-90",value:"#3E3E42"},100:{name:"theme-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"theme-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"theme-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"theme-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"theme-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"theme-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"theme-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"theme-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"theme-color-palette-turquoise-90",value:"#297B7B"},100:{name:"theme-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#003876",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"theme-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"theme-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"theme-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"theme-color-brand-primary-base",value:"#004A99"},alt:{name:"theme-color-brand-primary-alt",value:"#003876"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#47474C"},base:{name:"theme-color-brand-secondary-base",value:"#3E3E42"},alt:{name:"theme-color-brand-secondary-alt",value:"#2F2F32"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#3E3E42"}}}}}],themes:function themes(){return[{id:"theme-soho-light",name:Locale.translate("SohoLightTheme"),themeId:"theme-soho",variantId:"light",variantName:Locale.translate("Light"),legacyId:"light"},{id:"theme-soho-dark",name:Locale.translate("SohoDarkTheme"),themeId:"theme-soho",variantId:"dark",variantName:Locale.translate("Dark"),legacyId:"dark"},{id:"theme-soho-contrast",name:Locale.translate("SohoHighContrastTheme"),themeId:"theme-soho",variantId:"contrast",variantName:Locale.translate("Contrast"),legacyId:"high-contrast"},{id:"theme-uplift-light",name:Locale.translate("UpliftLightTheme"),themeId:"theme-uplift",variantId:"light",variantName:Locale.translate("Light")},{id:"theme-uplift-dark",name:Locale.translate("UpliftDarkTheme"),themeId:"theme-uplift",variantId:"dark",variantName:Locale.translate("Dark")},{id:"theme-uplift-contrast",name:Locale.translate("UpliftHighContrastTheme"),themeId:"theme-uplift",variantId:"contrast",variantName:Locale.translate("Contrast")}]},themeColors:function themeColors(){var _this=this,result=this.allColors.filter((function(color){return color.id===_this.currentTheme.id}));return result[0]?result[0].colors:{palette:{},colors:{},brand:{}}},personalizationColors:function personalizationColors(){var palette=this.themeColors().palette,brand=this.themeColors().brand,personalize={},opts={showBrackets:!1};return personalize.default={id:"default",name:Locale.translate("Default",opts),backgroundColorClass:"primary-bg-color",value:brand.primary.base.value},personalize.amber={id:"amber",name:Locale.translate("Amber",opts),backgroundColorClass:"amber09",value:palette.amber[90].value},personalize.amethyst={id:"amethyst",name:Locale.translate("Amethyst",opts),backgroundColorClass:"amethyst06",value:palette.amethyst[60].value},personalize.azure={id:"azure",name:Locale.translate("Azure",opts),backgroundColorClass:"azure07",value:palette.azure[70].value},personalize.emerald={id:"emerald",name:Locale.translate("Emerald",opts),backgroundColorClass:"emerald08",value:palette.emerald[80].value},personalize.graphite={id:"graphite",name:Locale.translate("Graphite",opts),backgroundColorClass:"graphite06",value:palette.graphite[60].value},personalize.ruby={id:"ruby",name:Locale.translate("Ruby",opts),backgroundColorClass:"ruby09",value:palette.ruby[90].value},personalize.slate={id:"slate",name:Locale.translate("Slate",opts),backgroundColorClass:"slate06",value:palette.slate[60].value},personalize.turquoise={id:"turquoise",name:Locale.translate("Turquoise",opts),backgroundColorClass:"turquoise09",value:palette.turquoise[90].value},personalize},setTheme:function setTheme(themeId){var result=this.themes().filter((function(themeObj){return themeObj.id===themeId||themeObj.legacyId&&themeObj.legacyId===themeId}));return 0===result.length?"":(this.currentTheme=result[0],result)},get uplift(){return this.currentTheme.id.indexOf("-uplift-")>-1}};var PERSONALIZE_DEFAULTS={colors:"",theme:"",font:"",blockUI:!0,noInit:!1};function Personalize(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,PERSONALIZE_DEFAULTS),this.init()}Personalize.prototype={init:function init(){return this.handleEvents(),this.settings.noInit||(this.settings.theme?this.setTheme(this.settings.theme):this.setTheme(this.getThemeFromStylesheet()),this.settings.colors&&this.setColors(this.settings.colors),this.settings.font&&this.setFont(this.settings.font)),this},handleEvents:function handleEvents(){var self=this;return this.element.off("updated.".concat("personalize")).on("updated.".concat("personalize"),(function(){self.updated()})),this},appendStyleSheet:function appendStyleSheet(cssRules){var sheet=document.getElementById("soho-personalization");sheet&&sheet.parentNode.removeChild(sheet),(sheet=document.createElement("style")).setAttribute("id","soho-personalization"),sheet.appendChild(document.createTextNode(cssRules)),document.head.appendChild(sheet)},getColorStyleSheet:function getColorStyleSheet(colors){if(colors||(colors={}),"string"==typeof colors&&(colors={header:colors}),!colors||""===colors)return this;var defaultColors={header:"2578A9"},forceToBeLightTextOn={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],azure:["#2578a9","#0563c2","368AC0"],emerald:["#56932e","#1f9254"],graphite:["#5c5c5c","#808080"],ruby:["#941e1e","#7b0f11"],slate:["#50535a","#98949e"],turquoise:["#206b62","#297b7b"]},foundColor=!1,isDark="".concat(colors.header||defaultColors.header).toLowerCase();isDark=colorUtils.validateHex(isDark),Object.keys(forceToBeLightTextOn).forEach((function(color){foundColor=foundColor||forceToBeLightTextOn[color].indexOf(isDark)>-1})),isDark=foundColor?"white":null;var lightest=colorUtils.validateHex(colors.lightest||colorUtils.getLuminousColorShade(colors.header||defaultColors.header,.3));"white"===colorUtils.getContrastColor(lightest,null,isDark)?(defaultColors.text="ffffff",defaultColors.subtext="f0f0f0"):(defaultColors.text="000000",defaultColors.subtext="292929"),colors.header=colorUtils.validateHex(colors.header||defaultColors.header),colors.text=colorUtils.validateHex(colors.text||defaultColors.text),colors.subtext=colorUtils.validateHex(colors.subtext||defaultColors.subtext),colors.btnColorHeader=colorUtils.validateHex(colors.btnColorHeader||colorUtils.getLuminousColorShade(colors.header,.3)),colors.subheader=colorUtils.validateHex(colors.subheader||colorUtils.getLuminousColorShade(colors.header,.2)),colors.verticalBorder=colorUtils.validateHex(colors.verticalBorder||colorUtils.getLuminousColorShade(colors.header,.1)),colors.btnColorSubheader=colorUtils.validateHex(colors.btnColorSubheader||colorUtils.getLuminousColorShade(colors.header,-.1)),colors.inactive=colorUtils.validateHex(colors.inactive||colorUtils.getLuminousColorShade(colors.header,-.2)),colors.horizontalBorder=colorUtils.validateHex(colors.horizontalBorder||colorUtils.getLuminousColorShade(colors.header,-.3)),colors.hover=colorUtils.validateHex(colors.hover||colorUtils.getLuminousColorShade(colors.header,-.5)),colors.button=colorUtils.validateHex(colors.button||colorUtils.getLuminousColorShade(colors.text,-.8)),colors.lightest=colors.btnColorHeader,colors.lighter=colors.subheader,colors.light=colors.verticalBorder,colors.base=colors.header,colors.contrast=colors.text,colors.dark=colors.btnColorSubheader,colors.darker=colors.inactive,colors.darkest=colors.horizontalBorder;var tooltipContrast=colorUtils.getContrastColor(colors.darkest);return defaultColors.tooltipText="white"===tooltipContrast?"ffffff":"000000",colors.tooltipText=colorUtils.validateHex(colors.tooltipText||defaultColors.tooltipText),function personalizeStyles(colors){return"\n\n.tab-container.module-tabs.is-personalizable {\n  border-top: 1px solid ".concat(colors.darkest," !important;\n  border-bottom: 1px solid ").concat(colors.darkest," !important;\n}\n\n.module-tabs.is-personalizable .tab:not(:first-child) {\n  border-left: 1px solid ").concat(colors.darkest," !important;\n}\n\n.module-tabs.is-personalizable {\n  background-color: ").concat(colors.darker," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-selected {\n  background-color: ").concat(colors.base," !important;\n}\n\n.accordion.panel .accordion-header.is-selected {\n  background-color: ").concat(colors.lighter," !important;\n  color: ").concat(colors.contrast," !important;\n}\n\n.builder-header.is-personalizable{\n  background-color: ").concat(colors.lighter,";\n}\n\n.header.is-personalizable {\n  background-color: ").concat(colors.base,";\n}\n\n.header.is-personalizable .title {\n  color: ").concat(colors.contrast,";\n}\n\n.header.is-personalizable h1 {\n  color: ").concat(colors.contrast,";\n}\n\n.header.is-personalizable button:not(:disabled),\n.header.is-personalizable button:not(:disabled) .icon,\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  color: ").concat(colors.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable .header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(colors.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable button:not(:disabled):hover,\n.header.is-personalizable button:not(:disabled):hover .icon,\n.header.is-personalizable button:not(:disabled):hover .app-header.icon > span,\n.header.is-personalizable .toolbar [class*='btn']:hover:not([disabled]) {\n  color: ").concat(colors.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(colors.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(colors.lightest,";\n  border-color:").concat(colors.lightest,";\n  color: ").concat(colors.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab.is-selected:not(.is-disabled) {\n  color: ").concat(colors.contrast," !important;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  color: ").concat(colors.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled),\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)  {\n  color: ").concat(colors.contrast,' !important;\n  opacity: 1;\n}\n\nhtml[class*="theme-uplift-"] .header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\nhtml[class*="theme-uplift-"] .is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  opacity: 1;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)::before {\n  background-color: ').concat(colors.contrast,";\n}\n\n.header.is-personalizable.has-tabs .animated-bar {\n  background-color: ").concat(colors.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-list-container .tab.is-selected:not(.is-disabled):hover::before {\n  background-color: ").concat(colors.contrast," !important;\n}\n\n.subheader.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(colors.dark,";\n  border-color: ").concat(colors.dark,";\n  color: ").concat(colors.contrast,";\n}\n\n.module-tabs.is-personalizable .tab-more {\n  border-left-color: ").concat(colors.darkest," !important;\n}\n\n.module-tabs.is-personalizable .tab-more:hover {\n  background-color: ").concat(colors.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-open {\n  background-color: ").concat(colors.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-selected {\n  background-color: ").concat(colors.base," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield {\n  background-color: ").concat(colors.hover," !important;\n  border-bottom-color: ").concat(colors.hover," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield-category-button {\n  background-color: ").concat(colors.hover," !important;\n  border-bottom-color: ").concat(colors.hover," !important;\n}\n\n.subheader.is-personalizable {\n  background-color: ").concat(colors.lighter," !important;\n}\n\n.builder .sidebar .header {\n  border-right: 1px solid ").concat(colors.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab:hover {\n  background-color: ").concat(colors.darker," !important;\n}\n\n.module-tabs.has-toolbar.is-personalizable .tab-list-container + .toolbar {\n  border-left-color: ").concat(colors.darkest,' !important;\n}\n\n.module-tabs.is-personalizable [class^="btn"] {\n  background-color: transparent !important;\n  color: ').concat(colors.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled {\n  background-color: ").concat(colors.darker," !important;\n  color: ").concat(colors.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled > svg {\n  fill: ").concat(colors.contrast," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button {\n  border-left-color: ").concat(colors.darkest," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button:hover {\n  background-color: ").concat(colors.darker," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > .searchfield {\n  color: ").concat(colors.contrast," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > svg {\n  fill: ").concat(colors.contrast," !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::before,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to right, ").concat(colors.base," , ").concat(colorUtils.hexToRgba(colors.base,0),") !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::after,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to right, ").concat(colorUtils.hexToRgba(colors.base,0),", ").concat(colors.base,") !important;\n}\n\n.hero-widget.is-personalizable {\n  background-color: ").concat(colors.lighter,";\n}\n\n.hero-widget.is-personalizable .hero-bottom {\n  background-color: ").concat(colors.base,";\n}\n\n.hero-widget.is-personalizable .hero-footer .hero-footer-nav li::before {\n  color: ").concat(colors.light,";\n}\n\n.hero-widget.is-personalizable .chart-container .arc {\n  stroke: ").concat(colors.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container .bar {\n  stroke: ").concat(colors.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container.line-chart .dot {\n  stroke: ").concat(colors.lighter,";\n}\n\n.application-menu.is-personalizable {\n  background-color: ").concat(colors.lighter,";\n  border-right: ").concat(colors.light,";\n}\n\n.application-menu.is-personalizable .application-menu-header {\n  background-color: ").concat(colors.lighter,";\n  border-bottom-color: ").concat(colors.light,";\n}\n\n.application-menu.is-personalizable .application-menu-footer {\n  background-color: ").concat(colors.lighter,";\n  border-top-color: ").concat(colors.light,";\n}\n\n.application-menu.is-personalizable button .icon,\n.application-menu.is-personalizable button span,\n.application-menu.is-personalizable .hyperlink {\n  color: ").concat(colors.contrast," !important;\n}\n\n.application-menu.is-personalizable button:not(:disabled):hover .icon,\n.application-menu.is-personalizable button:not(:disabled):hover span,\n.application-menu.is-personalizable .hyperlink:hover {\n  color: ").concat(colors.contrast,";\n  opacity: 1;\n}\n\n.application-menu.is-personalizable .accordion.panel {\n  background-color: ").concat(colors.lighter,";\n}\n\n.application-menu.is-personalizable .name-xl,\n.application-menu.is-personalizable .name,\n.application-menu.is-personalizable .accordion-heading {\n  color: ").concat(colors.contrast,";\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header {\n  background-color: ").concat(colors.lighter," !important;\n  border: 1px solid transparent !important;\n  color: ").concat(colors.contrast,";\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header .icon {\n  color: ").concat(colors.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected {\n  background-color: ").concat(colors.base," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected:hover > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected .icon {\n  color: ").concat(colors.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header:hover {\n  background-color: ").concat(colors.base," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-focused:not(.hide-focus) {\n  border: 1px solid ").concat(colors.contrast," !important;\n  box-shadow: none !important;\n}\n\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: ").concat(colors.lighter,";\n}\n\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  border: 1px solid ").concat(colors.lighter,";\n}\n\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::before,\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::after {\n  background-color: ").concat(colors.contrast,";\n}\n\n.application-menu.is-personalizable button:focus:not(.hide-focus),\n.application-menu.is-personalizable .hyperlink:focus:not(.hide-focus)::after {\n  border-color: ").concat(colors.contrast," !important;\n  box-shadow: none !important;\n}\n\n.application-menu .application-menu-header button:hover,\n.application-menu .application-menu-footer button:hover {\n  background-color: ").concat(colors.base," !important;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .searchfield {\n  color: ").concat(colors.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion-header.has-filtered-children > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.has-filtered-children.is-focused {\n  color: ").concat(colors.contrast," !important;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .searchfield::placeholder {\n  color: ").concat(colors.contrast,";\n  opacity: .5;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .icon {\n  color: ").concat(colors.contrast,";\n  opacity: .8;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper.active .icon {\n  color: ").concat(colors.contrast,";\n  opacity: 1;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header {\n  background-color: ").concat(colors.base," !important;\n  border-top-color: transparent;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header:hover {\n  background-color: ").concat(colors.darkest," !important;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion-heading {\n  border-top-color: ").concat(colors.darkest,";\n}\n\n.application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ").concat(colors.base,";\n  border-bottom: none !important;\n}\n\nhtml[dir='rtl'] .application-menu.is-personalizable {\n  background-color: ").concat(colors.lighter,";\n  border-left: ").concat(colors.light,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ').concat(colors.dark,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header:hover {\n  background-color: ').concat(colors.darkest,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header.is-selected {\n  background-color: ').concat(colors.darkest,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::before {\n  background-color: ').concat(colors.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::after {\n  background-color: ').concat(colors.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  color: ').concat(colors.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded {\n  background-color: ').concat(colors.dark," !important;\n  color: ").concat(colors.subtext,' !important;\n}\n\nhtml[class*="theme-uplift"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused:not(.hide-focus):not(.is-expanded) {\n  border-color: ').concat(colors.contrast,' !important;\n}\n\nhtml[class*="theme-uplift"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused.is-expanded {\n  border-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-selected::before {\n  background-color: ').concat(colors.darker," !important;\n  border-color: ").concat(colors.darker,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-focused::before {\n  border-color: ').concat(colors.contrast,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded + .accordion-pane {\n  background-color: ').concat(colors.dark,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded:hover::before {\n  border-color: ').concat(colors.darkest," !important;\n  background-color: ").concat(colors.darkest," !important;\n}\n\n.is-personalizable .personalize-header,\n.is-personalizable.tab-container {\n  background-color: ").concat(colors.dark," !important;\n}\n\n.is-personalizable .personalize-subheader {\n  background-color: ").concat(colors.lighter," !important;\n}\n\n.is-personalizable .personalize-text {\n  color: ").concat(colors.contrast," !important;\n}\n\n.is-personalizable .personalize-actionable,\n.is-personalizable .personalize-actionable svg {\n  color: ").concat(colors.contrast,";\n  opacity: .8;\n}\n\n.is-personalizable .personalize-actionable:hover:not([disabled]),\n.is-personalizable .personalize-actionable:hover:not([disabled]) svg {\n  color: ").concat(colors.contrast,";\n  opacity: 1;\n}\n\n.is-personalizable .personalize-actionable.is-focused:not(.hide-focus),\n.is-personalizable .personalize-actionable:focus:not(.hide-focus) {\n  border-color: ").concat(colors.contrast,";\n  box-shadow: 0 0 4px 3px rgba(0, 0, 0, 0.2);\n}\n\n.is-personalizable .personalize-actionable.hyperlink:focus:not(.hide-focus)::after {\n  border-color: ").concat(colors.contrast,";\n  opacity: 1;\n  box-shadow: 0 0 4px 3px rgba(0, 0, 0, 0.2);\n}\n\n.is-personalizable .personalize-vertical-border {\n  border-color: ").concat(colors.light,";\n}\n\n.is-personalizable .personalize-horizontal-bottom-border {\n  border-bottom: 1px solid ").concat(colors.darkest,";\n}\n\n.is-personalizable .personalize-horizontal-top-border {\n  border-top: 1px solid: ").concat(colors.darkest,";\n}\n\n.is-personalizable .personalize-chart-targeted .total.bar {\n  background-color: rgba(255, 255, 255, .8);\n}\n\n.is-personalizable .personalize-chart-targeted .chart-percent-text,\n.is-personalizable .personalize-chart-targeted .label {\n  color: ").concat(colors.text,";\n}\n\n.is-personalizable .info-message,\n.is-personalizable .info-message .icon,\n.is-personalizable .info-message p {\n  color: ").concat(colors.text," !important;\n}\n\n.is-personalizable .personalize-actionable-disabled,\n.is-personalizable .personalize-actionable-disabled:hover {\n  opacity: .4 !important;\n  cursor: default;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .arc,\n.hero-widget.is-personalizable .hero-header .chart-container .bar,\n.hero-widget.is-personalizable .hero-header .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-content .chart-container .arc,\n.hero-widget.is-personalizable .hero-content .chart-container .bar,\n.hero-widget.is-personalizable .hero-content .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-footer .chart-container .arc,\n.hero-widget.is-personalizable .hero-footer .chart-container .bar,\n.hero-widget.is-personalizable .hero-footer .chart-container.line-chart .dot {\n    stroke: ").concat(colors.lighter," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container text,\n.hero-widget.is-personalizable .hero-content .chart-container text,\n.hero-widget.is-personalizable .hero-footer .chart-container text {\n    fill: ").concat(colors.text," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-content .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-footer .chart-container .chart-legend-item-text {\n  color: ").concat(colors.text,";\n  fill: ").concat(colors.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .axis path, .chart-container .axis line,\n.hero-widget.is-personalizable .hero-header .chart-container .axis .tick0 line {\n  stroke: ").concat(colors.subtext," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .title,\n.hero-widget.is-personalizable .hero-content .title,\n.hero-widget.is-personalizable .hero-footer .title {\n  color: ").concat(colors.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-content .btn-tertiary,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-header .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon\n {\n  color: ").concat(colors.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon\n {\n  color: ").concat(colors.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(colors.subtext,",\n    0 0 2px 1px ").concat(colors.subtext,";\n}\n\n.header.is-personalizable .toolbar [class*='btn']:focus:not(.hide-focus),\n.header.is-personalizable .flex-toolbar [class*='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .toolbar [class*='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .flex-toolbar [class*='btn']:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(colors.subtext,",\n    0 0 2px 1px ").concat(colors.subtext,";\n}\n\n.tooltip.is-personalizable {\n  background-color: ").concat(colors.darkest,";\n  border-color: ").concat(colors.darkest,";\n}\n.tooltip.is-personalizable .chart-swatch .swatch-row div {\n  border-bottom-color: ").concat(colors.darkest,";\n}\n.tooltip.is-personalizable,\n.tooltip.is-personalizable p,\n.tooltip.is-personalizable .chart-swatch .swatch-row span,\n.tooltip.is-personalizable .chart-swatch .swatch-row b {\n  color: ").concat(colors.tooltipText,";\n}\n.tooltip.is-personalizable.top .arrow::after {\n  border-top-color: ").concat(colors.darkest,";\n}\n.tooltip.is-personalizable.right .arrow::after {\n  border-right-color: ").concat(colors.darkest,";\n}\n.tooltip.is-personalizable.bottom .arrow::after {\n  border-bottom-color: ").concat(colors.darkest,";\n}\n.tooltip.is-personalizable.left .arrow::after {\n  border-left-color: ").concat(colors.darkest,";\n}\n\n    ")}(colors)},setFont:function setFont(font){$("html").addClass("font-".concat(font))},setColors:function setColors(colors){return""===colors?(this.setColorsToDefault(),this):colors?(this.appendStyleSheet(this.getColorStyleSheet(colors)),this.settings.colors=colors,this.element.triggerHandler("colorschanged",{colors:this.settings.colors.header||this.settings.colors||theme.themeColors().brand.primary.alt.value,isDefault:!1,theme:this.currentTheme||"theme-soho-light"}),this):this},setColorsToDefault:function setColorsToDefault(){this.settings.colors="";var sheet=document.getElementById("soho-personalization");sheet&&sheet.parentNode.removeChild(sheet),this.element.triggerHandler("colorschanged",{colors:theme.themeColors().brand.primary.alt.value,isDefault:!0,theme:this.currentTheme||"theme-soho-light"})},getThemeFromStylesheet:function getThemeFromStylesheet(){var css=$("#stylesheet, #sohoxi-stylesheet"),thisTheme="";if(css.length>0){var path=css.attr("href"),queryParamIndex=(thisTheme=path.substring(path.lastIndexOf("/")+1)).lastIndexOf("?");queryParamIndex>-1&&(thisTheme=thisTheme.slice(0,queryParamIndex)),thisTheme=thisTheme.replace(".min","").replace(".css","")}return thisTheme},setTheme:function setTheme(incomingTheme){var $html=$("html");if(incomingTheme)if(this.currentTheme=incomingTheme,theme.currentTheme.id!==incomingTheme){["light","dark","high-contrast"].indexOf(incomingTheme)>-1&&(incomingTheme+="-theme"),$html.removeClass((function(idx,val){return val.split(" ").filter((function(c){return c.indexOf("theme")>-1})).join()})).addClass(incomingTheme),this.blockUi();var self=this,originalCss=$("#stylesheet, #sohoxi-stylesheet"),newCss=$('<link rel="stylesheet">'),path=originalCss.attr("href");newCss.on("load",(function(){originalCss.remove(),self.unBlockUi(),self.triggerEvent(incomingTheme)})).on("error",(function(){self.unBlockUi()}));var themePath=path?path.substring(0,path.lastIndexOf("/")):"",isMin=!!path&&path.indexOf(".min")>-1;newCss.attr({id:originalCss.attr("id"),href:xssUtils.stripTags("".concat(themePath,"/").concat(incomingTheme).concat(isMin?".min":"",".css"))}),originalCss.removeAttr("id"),originalCss.before(newCss),this.settings.theme=incomingTheme,theme.setTheme(incomingTheme)}else $html.hasClass(incomingTheme)||$html.addClass(incomingTheme)},blockUi:function blockUi(){if(this.settings.blockUI){var backgroundColor="#bdbdbd";switch(theme){case"light":backgroundColor="#f0f0f0";break;case"dark":backgroundColor="#313236";break;case"high-contrast":backgroundColor="#d8d8d8";break;default:backgroundColor="#f0f0f0"}this.pageOverlay=this.pageOverlay||$('<div class="personalize-overlay"></div>'),this.pageOverlay.css("background",backgroundColor),$("body").append(this.pageOverlay)}},triggerEvent:function triggerEvent(incomingTheme){this.element.triggerHandler("themechanged",{colors:this.settings.colors.header||this.settings.colors||theme.themeColors().brand.primary.alt.value,theme:incomingTheme||"theme-soho-light"}),$("body").trigger("resize")},unBlockUi:function unBlockUi(){var self=this;self.settings.blockUI&&self.pageOverlay&&self.pageOverlay.fadeOut(300,(function(){self.pageOverlay.remove(),self.pageOverlay=void 0}))},updated:function updated(settings){if(!settings)return this;var prevSettings=utils.extend({},this.settings);return this.settings=utils.mergeSettings(this.element[0],settings,this.settings),this.settingsDidChange(prevSettings,"theme")&&this.setTheme(this.settings.theme),this.settingsDidChange(prevSettings,"colors")&&this.setColors(this.settings.colors),this.settingsDidChange(prevSettings,"font")&&this.setFont(this.settings.font),this},settingsDidChange:function settingsDidChange(prevSettings,prop){return this.settings[prop]&&this.settings[prop]!==prevSettings[prop]},teardown:function teardown(){return this.element.off("updated.".concat("personalize")),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"personalize")}};var instanceSettings$1={theme:"theme-soho-light"};"object"===_typeof(window.SohoConfig)&&"object"===_typeof(window.SohoConfig.personalize)&&(instanceSettings$1=window.SohoConfig.personalize);var personalization=new Personalize(document.documentElement,instanceSettings$1);function setTheme(theme){return personalization.setTheme(theme)}function setColors(colors){return personalization.setColors(colors)}function getColorStyleSheet(colors){return personalization.getColorStyleSheet(colors)}$.fn.personalize=function(settings){return this.each((function(){var instance=$.data(this,"personalize");instance||(instance=$.data(this,"personalize",personalization)),instance.updated(settings)}))},$.fn.disable=function(){return $.each(this.data(),(function(index,value){value instanceof jQuery||value&&value.disable&&value.disable()})),this.prop("disabled",!0),this},$.fn.enable=function(){return $.each(this.data(),(function(index,value){value instanceof jQuery||value&&value.enable&&value.enable()})),this.prop({disabled:!1,readonly:!1}),this},$.fn.readonly=function(){return $.each(this.data(),(function(index,value){value instanceof jQuery||value&&value.readonly&&value.readonly()})),this.prop("readonly",!0),this},$((function(){var str,control;$(".label-text").closest("label, .label").each((function(){control=$("input, textarea, select",this),str=control.attr("class"),$(this).addClass((function(){return"inline".concat(str?" inline-".concat(-1===str.indexOf(" ")?str:str.substr(0,str.indexOf(" "))):"")}))}))})),$((function(){$("input:radio").on("click.radios",(function(){this.focus()}))})),$((function(){var addCssClassToParent=function addCssClassToParent(elemArray,cssClass){for(var i=0,l=elemArray.length;i<l;i++)$(elemArray[i]).parent().addClass(cssClass)};addCssClassToParent($(".field > input:checkbox, .field > .inline-checkbox"),"field-checkbox"),addCssClassToParent($(".field > input:radio, .field > .inline-radio"),"field-radio")})),$((function(){[].slice.call(document.body.querySelectorAll("label.required .label-text, .label.required .label-text, label:not(.inline).required, .label:not(.inline).required")).forEach((function(label){-1!==label.className.indexOf("accessible")&&(label.querySelector(".required-asterisk")||label.insertAdjacentHTML("beforeend",'<span class="required-asterisk" aria-hidden="true">*</span>'))}));var elements=[].slice.call(document.body.querySelectorAll("[data-validate]"));elements.forEach((function(el){var rules=el.getAttribute("data-validate");rules&&rules.indexOf("required")>-1&&el.setAttribute("aria-required",!0)})),(elements=[].slice.call(document.body.querySelectorAll('input[type="hidden"]'))).forEach((function(el){var id=el.getAttribute("id");if(id){var label=document.body.querySelector('label[for="'.concat(id,'"]'));label&&label.setAttribute("aria-hidden",!0)}}))})),$.fn.highlight=function(pat){return this.length&&pat&&pat.length?this.each((function(){!function innerHighlight(node,pat){var pos,spannode,middlebit,middleclone,skip=0;if(3===node.nodeType)pos=node.data.toUpperCase().indexOf(pat),(pos-=node.data.substr(0,pos).toUpperCase().length-node.data.substr(0,pos).length)>=0&&((spannode=document.createElement("mark")).className="highlight",(middlebit=node.splitText(pos)).splitText(pat.length),middleclone=middlebit.cloneNode(!0),spannode.appendChild(middleclone),middlebit.parentNode.replaceChild(spannode,middlebit),skip=1);else if(1===node.nodeType&&node.childNodes&&!/(script|style)/i.test(node.tagName))for(var i=0;i<node.childNodes.length;++i)i+=innerHighlight(node.childNodes[i],pat);return skip}(this,pat.toUpperCase())})):this},$.fn.unhighlight=function(){return this.find("mark.highlight").each((function(){var node=this.parentNode;node.replaceChild(this.firstChild,this),node.normalize()})).end()};var ARRANGE_DEFAULTS={handle:null,itemsSelector:null,connectWith:!1,isVisualItems:!1,placeholder:null,placeholderCssClass:"arrange-placeholder"};function Arrange(element,settings){this.settings=utils.mergeSettings(element,settings,ARRANGE_DEFAULTS),this.element=$(element),this.init()}Arrange.prototype={init:function init(){this.isTouch=Environment.features.touch,this.isIe="ie"===Environment.browser.name,this.handleEvents()},getElementByTouchInList:function getElementByTouchInList(list,x,y){for(var returns=!1,listJq=$(list),i=0,l=listJq.length;i<l;i++){var item=$(listJq[i]),offset=item.offset();x<=offset.left||x>=offset.left+item.outerWidth()||y<=offset.top||y>=offset.top+item.outerHeight()||(returns=item)}return returns},dragTouchElement:function dragTouchElement(e,elm){var orig=e.originalEvent.changedTouches[0];elm[0].style.top="".concat(orig.pageY-this.offset.y,"px"),elm[0].style.left="".concat(orig.pageX-this.offset.x,"px")},unbind:function unbind(){return this.items.removeClass("draggable").removeAttr("draggable").off("selectstart.arrange ".concat(this.dragStart," ").concat(this.dragEnd," ").concat(this.dragWhileDragging)),$(this.handle,this.items).removeClass("draggable").off("mousedown.arrange mouseup.arrange touchstart.arrange touchend.arrange"),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,ARRANGE_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"arrange")},getVisualIndex:function getVisualIndex(elem){var s=this.settings,idx=null;if(s.isVisualItems){var items=this.element.children().not('[data-arrange-exclude="true"]');s.itemsSelector&&(items=$(s.itemsSelector,this.element).not('[data-arrange-exclude="true"]')),idx=items.index(elem)}return idx},handleEvents:function handleEvents(){var index,isHandle,self=this,s=this.settings,status={},items=this.element.children().not('[data-arrange-exclude="true"]'),placeholder=$("<".concat(/^(ul|ol)$/i.test(this.element[0].tagName)?"li":"div",">"));s.itemsSelector&&(items=$(s.itemsSelector,this.element).not('[data-arrange-exclude="true"]'),placeholder=$("<".concat(items.first()[0].tagName," />"))),s.placeholder&&(placeholder=$(s.placeholder)),this.dragStart="dragstart.arrange touchstart.arrange gesturestart.arrange",this.dragEnd="dragend.arrange touchend.arrange touchcancel.arrange gestureend.arrange",this.dragWhileDragging="dragover.arrange dragenter.arrange drop.arrange touchmove.arrange gesturechange.arrange",this.handle=s.handle||this.element.attr("data-arrange-handle"),this.connectWith=this.element.attr("data-arrange-connectWith"),this.placeholders=placeholder,this.isTouch||this.placeholders.addClass("".concat(s.placeholderCssClass," draggable")),$(this.handle,items).addClass("draggable").on("mousedown.arrange touchstart.arrange",(function(){isHandle=!0})).on("mouseup.arrange touchend.arrange",(function(){isHandle=!1})),this.connectWith&&(items=items.add($(this.connectWith).children().not('[data-arrange-exclude="true"]')).data("connectWith",this.connectWith)),this.items=items,this.items.attr("draggable",!0).addClass(this.handle?"":"draggable").add([this,placeholder]).not("a[href], img").on("selectstart.arrange",(function(){return this.dragDrop&&this.dragDrop(),this.isIe})).end().each((function(){$(this).on(self.dragStart,(function(e){if(self.handle&&!isHandle){if(self.isTouch)return;return!1}isHandle=!1,self.dragging=$(this),index=self.dragging.addClass("arrange-dragging").index();var idx=s.isVisualItems?self.getVisualIndex(self.dragging):index;$.extend(status,{start:self.dragging,startIndex:idx});var result=self.element.triggerHandler("beforearrange",status);if("boolean"==typeof result&&!result||"string"==typeof result&&"false"===result.toLowerCase())self.dragging=null;else if(self.isTouch){var rect=self.dragging[0].getBoundingClientRect(),touch=e.originalEvent.changedTouches[0];self.offset={x:touch.pageX-rect.left,y:touch.pageY-rect.top},self.placeholderTouch=self.dragging.clone().addClass("is-touch").attr("id","arrange-placeholder-touch").insertBefore(self.dragging),self.dragTouchElement(e,self.placeholderTouch)}else{var dt=e.originalEvent.dataTransfer;dt.effectAllowed="move",dt.setData("Text","dummy")}})).on(self.dragEnd,(function(){if(self.dragging){if(self.isTouch&&(self.dragging.css("opacity",1),self.placeholderTouch.remove()),self.placeholders.filter(":visible").after(self.dragging),self.dragging.removeClass("arrange-dragging").show(),self.placeholders.detach(),index!==self.dragging.index()){var idx=s.isVisualItems?self.getVisualIndex(self.dragging):self.dragging.index();$.extend(status,{end:self.dragging,endIndex:idx}),self.element.triggerHandler("arrangeupdate",status)}self.dragging=null,self.placeholderTouch=null}})).on(self.dragWhileDragging,(function(e){if(self.dragging){var overIndex,idx,overItem=this;if(e.preventDefault(),"drop"===e.type)return e.stopPropagation(),self.dragging.trigger("dragend.arrange"),!1;if(self.isTouch){var touch=e.originalEvent.touches[0];overItem=self.getElementByTouchInList(items,touch.pageX,touch.pageY)||overItem}if(overItem=$(overItem),self.isTouch||(e.originalEvent.dataTransfer.dropEffect="move"),items.is(overItem)&&placeholder.index()!==overItem.index())self.isTouch?self.dragging.css("opacity",0):self.dragging.hide(),placeholder.index()<overItem.index()?(placeholder.insertAfter(overItem),overIndex=overItem.index(),idx=s.isVisualItems?self.getVisualIndex(overItem):overIndex):(placeholder.insertBefore(overItem),overIndex=placeholder.index(),idx=s.isVisualItems?self.getVisualIndex(placeholder):overIndex),$.extend(status,{over:overItem,overIndex:idx}),self.element.triggerHandler("draggingarrange",status),utils.fixSVGIcons(overItem),self.placeholders.not(placeholder).detach();else self.placeholders.is(this)||(self.placeholders.detach(),self.element.append(placeholder));if(!self.isTouch)return!1;self.dragTouchElement(e,self.placeholderTouch)}}))}))}},$.fn.arrange=function(settings){return this.each((function(){var instance=$.data(this,"arrange");instance?instance.updated(settings):instance=$.data(this,"arrange",new Arrange(this,settings))}))};var DRAG_DEFAULTS={axis:null,clone:!1,cloneCssClass:"is-clone",clonePosIsFixed:!1,cloneAppendTo:null,containment:!1,obstacle:!1,underElements:!1,containmentOffset:{left:0,top:0}};function Drag(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,DRAG_DEFAULTS),this.init()}Drag.prototype={init:function init(){this.handleEvents()},finish:function finish(left,top){var pos={top:top,left:left};this.element.off("mouseup.draggable"),$(document).off("mousemove.draggable mouseup.draggable"),this.settings.underElements&&(pos.underElements=this.getElementsFromPoint(pos.left,pos.top)),pos.offset=this.offset,pos.clone=this.clone,this.element.trigger("dragend",pos),this.element.removeClass("is-dragging"),this.clone&&("x"===this.settings.axis&&delete pos.top,"y"===this.settings.axis&&delete pos.left,this.clone.remove(),this.clone=null),this.obstacle&&(this.obstacle=null),this.upperYLimit&&(this.upperYLimit=null),this.upperXLimit&&(this.upperXLimit=null),$("body").removeClass("disable-select")},move:function move(left,top){var css={left:left,top:top};if("x"===this.settings.axis&&delete css.top,"y"===this.settings.axis&&delete css.left,this.settings.containment&&(this.settings.containment instanceof jQuery?this.container=this.settings.containment:"parent"===this.settings.containment?this.container=this.element.parent():"window"===this.settings.containment?this.container=$(window):"container"===this.settings.containment?this.container=this.element.closest(".page-container"):this.container=$(document),this.upperXLimit||(this.upperXLimit=this.container.width()-this.element.outerWidth()+this.settings.containmentOffset.left),this.upperYLimit||(this.upperYLimit=this.container.height()-this.element.outerHeight()+this.settings.containmentOffset.top),css.top>this.upperYLimit&&(css.top=this.upperYLimit),css.left>this.upperXLimit&&(css.left=this.upperXLimit),css.top<0&&(css.top=0),css.left<0&&(css.left=0),"container"===this.settings.containment&&css.left<=1&&(css.left=1)),this.settings.obstacle){var elemOffset=this.clone?this.clone.offset():this.element.offset(),elemWidth=this.clone?this.clone.outerWidth():this.element.outerWidth(),movingRight=css.left>elemOffset.left;if(!this.obstacle){this.obstacle=$(this.settings.obstacle).not(this.element);var obstacleOffset=$(this.obstacle).offset();this.constraints={top:obstacleOffset.top,left:obstacleOffset.left,bottom:obstacleOffset.top+this.obstacle.outerHeight(),right:obstacleOffset.left+this.obstacle.outerWidth()}}!movingRight&&this.originalPos.left>this.constraints.left&&css.left<=this.constraints.right&&(css.left=this.constraints.right),movingRight&&this.originalPos.left+elemWidth<=this.constraints.left&&css.left+elemWidth>=this.constraints.left&&(css.left=this.constraints.left-this.obstacle.outerWidth())}var applyCssStyle=function applyCssStyle(el,applyCss,prop){void 0!==applyCss[prop]&&(el[0].style[prop]="".concat(applyCss[prop],"px"))};applyCssStyle(this.clone||this.element,css,"top"),applyCssStyle(this.clone||this.element,css,"left"),this.settings.underElements&&(css.underElements=this.getElementsFromPoint(css.left,css.top)),css.offset=this.offset,css.clone=this.clone,this.element.trigger("drag",css)},getElementsFromPoint:function getElementsFromPoint(x,y){var elements=[];if(document.elementsFromPoint)elements=document.elementsFromPoint(x,y);else if(document.msElementsFromPoint)elements=document.msElementsFromPoint(x,y);else{for(var i,l,d,current,max=999,pointerEvents=[];(current=document.elementFromPoint(x,y))&&-1===elements.indexOf(current)&&null!==current&&max>-1;)max--,elements.push(current),pointerEvents.push({value:current.style.getPropertyValue("pointer-events")||"",priority:current.style.getPropertyPriority("pointer-events")}),current.style.setProperty("pointer-events","none","important");for(i=0,l=elements.length;i<l;i++)d=pointerEvents[i],elements[i].style.setProperty("pointer-events",d.value,d.priority)}return elements},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings))},destroy:function destroy(){$.removeData(this.element[0],"drag"),this.element.off("touchstart.draggable MSPointerDown.draggable pointerdown.draggable touchmove.draggable touchend.draggable touchcancel.draggable mousedown.draggable")},handleEvents:function handleEvents(){var self=this;self.offset=null,self.element.attr("draggable",!1),"onpointerdown"in window||"onmspointerdown"in window||self.element.on("touchstart.draggable gesturestart.draggable",(function(e){var pos=$(this).position(),orig=e.originalEvent;self.offset={x:orig.changedTouches[0].pageX-pos.left,y:orig.changedTouches[0].pageY-pos.top},self.originalPos=pos,self.element.addClass("is-dragging"),pos.offset=self.offset,pos.clone=self.clone,self.element.trigger("dragstart",pos)})).on("touchmove.draggable gesturechange.draggable",(function(e){e.preventDefault();var orig=e.originalEvent;if(!(orig.targetTouches.length>1)){var xpos=orig.changedTouches[0].pageX-self.offset.x,ypos=orig.changedTouches[0].pageY-self.offset.y;self.move(xpos,ypos)}})).on("touchend.draggable gestureend.draggable touchcancel.draggable",(function(e){e.preventDefault();var touch=e.originalEvent.changedTouches[0];self.finish(touch.pageX-self.offset.x,touch.pageY-self.offset.y)})),self.element.on("mousedown.draggable",(function(e){e.preventDefault();var pos=self.settings.clonePosIsFixed?self.element[0].getBoundingClientRect():self.element.position();self.offset={x:e.pageX-pos.left,y:e.pageY-pos.top},self.originalPos=pos,$("body").addClass("disable-select"),$(document).on("mousemove.draggable",(function(mouseMoveEvent){mouseMoveEvent.preventDefault(),self.move(mouseMoveEvent.pageX-self.offset.x,mouseMoveEvent.pageY-self.offset.y)})),$(document).on("mouseup.draggable",(function(docMouseUpEvent){docMouseUpEvent.preventDefault(),self.finish(e.pageX-self.offset.x,docMouseUpEvent.pageY-self.offset.y)})),self.element.on("mouseup.draggable",(function(mouseUpEvent){mouseUpEvent.preventDefault(),self.finish(mouseUpEvent.pageX-self.offset.x,mouseUpEvent.pageY-self.offset.y)})),!self.clone&&self.settings.clone&&(self.clone=self.element.clone(!0),"parent"===self.settings.cloneAppendTo&&(self.settings.cloneAppendTo=self.element.parent()),self.clone.addClass(self.settings.cloneCssClass).appendTo(self.settings.cloneAppendTo||"body")),self.element.addClass("is-dragging"),self.element.trigger("dragstart",[pos,self.clone])}))}},$.fn.drag=function(settings){return this.each((function(){var instance=$.data(this,"drag");instance?instance.updated(settings):instance=$.data(this,"drag",new Drag(this,settings))}))};var DEFAULT_PLACE_SETTINGS={bleedFromContainer:!1,callback:null,container:null,parent:null,parentXAlignment:"center",parentYAlignment:"center",placement:"bottom",strategies:["nudge"]},PLACE_STRATEGIES=["nudge","clockwise","flip","shrink","shrink-x","shrink-y"],PLACE_POSITIONS=["top","left","right","bottom","center"],PLACE_X_ALIGNMENTS=["left","center","right"],PLACE_Y_ALIGNMENTS=["top","center","bottom"],PLACEMENT_OBJECT_SETTING_KEYS=["x","y","container","containerOffsetX","containerOffsetY","callback","parent","parentXAlignment","parentYAlignment","useParentWidth","useParentHeight","placement","strategies"];function PlacementObject(placementOptions){var self=this;return PLACEMENT_OBJECT_SETTING_KEYS.forEach((function(val){if(null!==placementOptions[val])return"x"===val||"y"===val?(self.setCoordinate(val,placementOptions[val]),void(self["original".concat(val)]=placementOptions[val])):void(self[val]=placementOptions[val])})),this.modified=!1,this.sanitize()}function Place(element,settings){this.settings=utils.mergeSettings(element,settings,DEFAULT_PLACE_SETTINGS),this.element=$(element),this.init()}PlacementObject.prototype={isReasonableDefault:function isReasonableDefault(setting,limits){return $.inArray(setting,limits)>-1},sanitize:function sanitize(){var self=this;this.bleedFromContainer=!0===this.bleedFromContainer,this.callback="function"==typeof this.callback?this.callback:DEFAULT_PLACE_SETTINGS.callback,this.container=this.container instanceof $&&this.container.length?this.container:DEFAULT_PLACE_SETTINGS.container,this.containerOffsetX=isNaN(parseInt(this.containerOffsetX,10))?0:this.containerOffsetX,this.containerOffsetY=isNaN(parseInt(this.containerOffsetY,10))?0:this.containerOffsetY,this.parent=this.parent instanceof $&&this.parent.length?this.parent:DEFAULT_PLACE_SETTINGS.parent,this.parentXAlignment=this.isReasonableDefault(this.parentXAlignment,PLACE_X_ALIGNMENTS)?this.parentXAlignment:DEFAULT_PLACE_SETTINGS.parentXAlignment,this.parentYAlignment=this.isReasonableDefault(this.parentYAlignment,PLACE_Y_ALIGNMENTS)?this.parentYAlignment:DEFAULT_PLACE_SETTINGS.parentYAlignment,this.placement=this.isReasonableDefault(this.placement,PLACE_POSITIONS)?this.placement:DEFAULT_PLACE_SETTINGS.placement,this.useParentHeight=!0===this.useParentHeight,this.useParentWidth=!0===this.useParentWidth,$.isArray(this.strategies)&&this.strategies.length||(this.strategies=["nudge"]),this.strategies.forEach((function(strat,i){self.strategies[i]=self.isReasonableDefault(strat,PLACE_STRATEGIES)?strat:self.strategies[i]}))},setCoordinate:function setCoordinate(coordinate,value){this.isReasonableDefault(coordinate,["x","y"])&&(isNaN(value)&&(value=0),this[coordinate]=Math.round(value))}},Place.prototype={init:function init(){return this.build().handleEvents()},build:function build(){this.element.hasClass("placeable")||this.element.addClass("placeable"),this.originalStyles={};var h=this.element[0].style.height,w=this.element[0].style.width;return h&&(this.originalStyles.height=h),w&&(this.originalStyles.width=w),this},handleEvents:function handleEvents(){var self=this;return this.element.on("place.".concat("place"),(function(e,x,y){self.place(new PlacementObject({x:x,y:y}))})).on("updated.".concat("place"),(function(){self.updated()})),this},render:function render(placementObj){var unitRegex=/(px|%)/i;this.element.offset({left:placementObj.x,top:placementObj.y}),placementObj.height&&(this.element[0].style.height=placementObj.height+(unitRegex.test("".concat(placementObj.height))?"":"px")),placementObj.width&&(this.element[0].style.width=placementObj.width+(unitRegex.test("".concat(placementObj.width))?"":"px"))},place:function place(placementObj){var curr=[this.element[0].style.left,this.element[0].style.top];return this.element.trigger("beforeplace",[curr])?(placementObj instanceof PlacementObject||(placementObj=new PlacementObject(placementObj)),null==placementObj.x&&null==placementObj.y?curr:(this.clearOldStyles(),placementObj.parent?this.placeWithParent(placementObj):this.placeWithCoords(placementObj))):curr},placeWithParent:function placeWithParent(placementObj){if(!placementObj.parent||!placementObj.parent.length)return[void 0,void 0];var containerRect,self=this,container=this.getContainer(placementObj),containerIsBody=container.length&&container[0]===document.body;Environment.rtl&&container.length&&(containerRect=DOM.getDimensions(container[0]),this.element.css({left:"".concat(containerRect.left,"px"),top:"".concat(containerRect.right,"px")}));var parentRect=DOM.getDimensions(placementObj.parent[0]),elRect=DOM.getDimensions(this.element[0]),scrollX=containerIsBody?$(window).scrollLeft():container.scrollLeft(),scrollY=containerIsBody?$(window).scrollTop():container.scrollTop();function doPlacementAgainstParent(incomingPlacementObj){var coords=function getCoordsFromPlacement(incomingPlacementObj){var cX,cY,p=incomingPlacementObj.placement,aX=incomingPlacementObj.parentXAlignment,aY=incomingPlacementObj.parentYAlignment;switch(p){case"top":cY=parentRect.top-elRect.height-incomingPlacementObj.y+(containerIsBody?scrollY:0);break;case"left":cX=parentRect.left-elRect.width-incomingPlacementObj.x+(containerIsBody?scrollX:0);break;case"right":cX=parentRect.right+incomingPlacementObj.x+(containerIsBody?scrollX:0);break;default:cY=parentRect.bottom+incomingPlacementObj.y+(containerIsBody?scrollY:0)}if("top"===p||"bottom"===p){var cW=Math.round(containerIsBody?document.body.offsetWidth:null);switch(aX){case"left":cX=containerIsBody&&cW<Math.round(elRect.left)+Math.round(elRect.width)?parentRect.left+incomingPlacementObj.x+scrollX:parentRect.left-incomingPlacementObj.x+(containerIsBody?scrollX:0);break;case"right":cX=containerIsBody&&Math.round(elRect.right)-Math.round(elRect.width)<0?parentRect.left-incomingPlacementObj.x+scrollX:parentRect.right-elRect.width+incomingPlacementObj.x+(containerIsBody?scrollX:0);break;default:cX=parentRect.left+(parentRect.width-elRect.width)/2+incomingPlacementObj.x+(containerIsBody?scrollX:0)}}if("right"===p||"left"===p)switch(aY){case"top":cY=parentRect.top-incomingPlacementObj.y+(containerIsBody?scrollY:0);break;case"bottom":cY=parentRect.bottom-elRect.height+incomingPlacementObj.y+(containerIsBody?scrollY:0);break;default:cY=parentRect.top+(parentRect.height-elRect.height)/2+incomingPlacementObj.y+(containerIsBody?scrollY:0)}return[cX,cY]}(incomingPlacementObj);return incomingPlacementObj.setCoordinate("x",coords[0]),incomingPlacementObj.setCoordinate("y",coords[1]),self.render(incomingPlacementObj),incomingPlacementObj=self.handlePlacementCallback(incomingPlacementObj)}return placementObj.useParentWidth&&(placementObj.width=parentRect.width),placementObj.useParentHeight&&(placementObj.height=parentRect.height),(placementObj=doPlacementAgainstParent(placementObj)).strategies.forEach((function(strat){(placementObj=self.checkBleeds(placementObj)).bleeds&&(placementObj=function(){switch(strat){case"nudge":return self.nudge(placementObj);case"clockwise":return self.clockwise(placementObj);case"flip":return(placementObj=self.flip(placementObj)).setCoordinate("x",placementObj.originalx),placementObj.setCoordinate("y",placementObj.originaly),placementObj=doPlacementAgainstParent(placementObj);case"shrink":return self.shrink(placementObj);case"shrink-x":return self.shrink(placementObj,"x");case"shrink-y":return self.shrink(placementObj,"y");default:return placementObj}}(),self.render(placementObj))})),placementObj.element=this.element,this.element.trigger("afterplace",[placementObj]),placementObj},placeWithCoords:function placeWithCoords(placementObj){return this.render(placementObj),placementObj=this.handlePlacementCallback(placementObj),this.render(placementObj),(placementObj=this.checkBleeds(placementObj)).bleeds&&(placementObj=this.nudge(placementObj)),this.render(placementObj),(placementObj=this.checkBleeds(placementObj)).bleeds&&(placementObj=this.shrink(placementObj)),this.render(placementObj),this.element.trigger("afterplace",[placementObj]),placementObj},handlePlacementCallback:function handlePlacementCallback(placementObj){var cb=placementObj.callback||this.settings.callback;return placementObj.element=this.element,cb&&"function"==typeof cb&&(placementObj=cb(placementObj)),this.render(placementObj),placementObj},accountForScrolling:function accountForScrolling(placementObj){var container=placementObj.container,pos=window.getComputedStyle(this.element[0]).position;if("fixed"===pos)return!1;if(container&&container.length||(container=this.element.parents().filter((function(){return"absolute"===window.getComputedStyle(this).position||"fixed"===pos}))),!container||!container.length)return!0;if(container[0]===document.body)return!1;var containerStyle=window.getComputedStyle(container[0]);return"fixed"!==(pos=containerStyle.position)&&("absolute"!==pos||"hidden"!==containerStyle.overflow)},getContainer:function getContainer(placementObj){if(placementObj.container instanceof $&&placementObj.container.length)return placementObj.container;var modalParent=this.element.parents(".modal");return modalParent.length?modalParent:$(document.body)},checkBleeds:function checkBleeds(placementObj){var d,containerBleed=this.settings.bleedFromContainer,container=this.getContainer(placementObj),containerIsBody=container.length&&container[0]===document.body,BoundingRect=this.element[0].getBoundingClientRect(),rect={},containerRect=container?container[0].getBoundingClientRect():{},scrollX=containerIsBody?$(window).scrollLeft():container.scrollLeft(),scrollY=containerIsBody?$(window).scrollTop():container.scrollTop(),windowH=Math.max(document.documentElement.clientHeight,window.innerHeight||0),windowW=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function getBoundary(edge){switch(edge){case"top":return(containerBleed?0:containerRect.top)-(containerIsBody?-1*scrollY:0);case"left":return(containerBleed?0:containerRect.left)-(containerIsBody?-1*scrollX:0);case"right":return(containerBleed?windowW:containerRect.right)-(containerIsBody?-1*scrollX:0);default:return(containerBleed?windowH:containerRect.bottom)-(containerIsBody?-1*scrollY:0)}}rect.width=BoundingRect.width,rect.height=BoundingRect.height,rect.top=BoundingRect.top,rect.right=BoundingRect.right,rect.bottom=BoundingRect.bottom,rect.left=BoundingRect.left;var rightViewportEdge=getBoundary("right");if(rect.width>=rightViewportEdge){d=rect.width-rightViewportEdge+20;var newWidth=rect.width-d;placementObj.width=newWidth,this.element[0].style.width="".concat(newWidth,"px"),rect.width=newWidth}var bottomViewportEdge=getBoundary("bottom");if(rect.height>=bottomViewportEdge){d=rect.height-bottomViewportEdge+20;var newHeight=rect.height-d;placementObj.height=newHeight,this.element[0].style.height="".concat(newHeight,"px"),rect.height=newHeight}var offRightEdge=rect.right>getBoundary("right"),offLeftEdge=rect.left<getBoundary("left"),offTopEdge=rect.top<getBoundary("top"),offBottomEdge=rect.bottom>getBoundary("bottom");return offRightEdge||offLeftEdge||offTopEdge||offBottomEdge?(placementObj.bleeds={},placementObj.bleeds.right=offRightEdge?rect.right-getBoundary("right"):null,placementObj.bleeds.left=offLeftEdge?-(rect.left-getBoundary("left")):null,placementObj.bleeds.top=offTopEdge?-(rect.top-getBoundary("top")):null,placementObj.bleeds.bottom=offBottomEdge?rect.bottom-getBoundary("bottom"):null,placementObj):(placementObj.bleeds=void 0,placementObj)},nudge:function nudge(placementObj){placementObj.nudges||(placementObj.nudges={x:0,y:0});var d=0;return placementObj.bleeds.right&&(d=Math.abs(placementObj.bleeds.right)+Math.abs(placementObj.containerOffsetX),placementObj.setCoordinate("x",placementObj.x-d),placementObj.nudges.x-=d),placementObj.bleeds.left&&(d=Math.abs(placementObj.bleeds.left)+Math.abs(placementObj.containerOffsetX),placementObj.setCoordinate("x",placementObj.x+d),placementObj.nudges.x+=d),placementObj.bleeds.top&&(d=Math.abs(placementObj.bleeds.top)+Math.abs(placementObj.containerOffsetY),placementObj.setCoordinate("y",placementObj.y+d),placementObj.nudges.y+=d),placementObj.bleeds.bottom&&(d=Math.abs(placementObj.bleeds.bottom)+Math.abs(placementObj.containerOffsetY),placementObj.setCoordinate("y",placementObj.y-d),placementObj.nudges.y-=d),placementObj.wasNudged=!0,placementObj.bleeds=void 0,placementObj},flip:function flip(placementObj){if(!placementObj.bleeds[placementObj.placement])return placementObj;if(placementObj.attemptedFlips||(placementObj.attemptedFlips=[]),placementObj.attemptedFlips.push(placementObj.placement),placementObj.attemptedFlips.length>3)return placementObj=this.giveup(placementObj);var accountForScrolling=this.accountForScrolling(placementObj),isXCoord=["left","right"].indexOf(placementObj.placement)>-1,containerBleed=this.settings.bleedFromContainer,container=this.getContainer(placementObj),containerIsBody=container.length&&container[0]===document.body,containerRect=container?container[0].getBoundingClientRect():{},parentRect=placementObj.parent[0].getBoundingClientRect(),scrollX=containerIsBody?$(window).scrollLeft():container.scrollLeft(),scrollY=containerIsBody?$(window).scrollTop():container.scrollTop(),windowH=Math.max(document.documentElement.clientHeight,window.innerHeight||0),windowW=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function getOppositeDir(dir){switch(dir){case"left":return"right";case"right":return"left";case"top":return"bottom";default:return"top"}}function getDistance(dir){var d=0;switch(dir){case"left":d=(containerBleed?0:containerRect.left)-(accountForScrolling?scrollX:0)-parentRect.left+placementObj.containerOffsetX;break;case"right":d=(containerBleed?windowW:containerRect.right)-(accountForScrolling?scrollX:0)-parentRect.right-placementObj.containerOffsetX;break;case"top":d=(containerBleed?0:containerRect.top)-(accountForScrolling?scrollY:0)-parentRect.top+placementObj.containerOffsetY;break;default:d=(containerBleed?windowH:containerRect.bottom)-(accountForScrolling?scrollY:0)-parentRect.bottom-placementObj.containerOffsetY}return Math.abs(d)}function tried(placement){return $.inArray(placement,placementObj.attemptedFlips)>-1}return placementObj.placement=function performFlip(originalDir){var newDir=getOppositeDir(originalDir),perpendicularDir=isXCoord?"top":"left",oppPerpendicularDir=getOppositeDir(perpendicularDir),originalDistance=getDistance(originalDir),targetDistance=getDistance(newDir);if(!tried(newDir))return originalDistance>=targetDistance?originalDir:(placementObj.wasFlipped=!0,newDir);var tmp=placementObj.originalx;placementObj.originalx=placementObj.originaly,placementObj.originaly=tmp;var perpendicularDistance=getDistance(perpendicularDir),oppPerpendicularDistance=getDistance(oppPerpendicularDir);if(!tried(perpendicularDir)){if(perpendicularDistance>=oppPerpendicularDistance)return perpendicularDir;if(!tried(oppPerpendicularDir))return oppPerpendicularDir}return originalDir}(placementObj.placement),placementObj},clockwise:function clockwise(placementObj){return placementObj},shrink:function shrink(placementObj,dimension){var dX=0,dY=0,useX=null==dimension||"x"===dimension,useY=null==dimension||"y"===dimension,accountForScrolling=this.accountForScrolling(placementObj),menuRect=DOM.getDimensions(this.element[0]),containerBleed=this.settings.bleedFromContainer,container=this.getContainer(placementObj),containerRect=container?container[0].getBoundingClientRect():{},containerIsBody=container.length&&container[0]===document.body,coordinateShrink=null===placementObj.parent,scrollX=containerIsBody?$(window).scrollLeft():container.scrollLeft(),scrollY=containerIsBody?$(window).scrollTop():container.scrollTop(),windowH=Math.max(document.documentElement.clientHeight,window.innerHeight||0),windowW=Math.max(document.documentElement.clientWidth,window.innerWidth||0),leftViewportEdge=(accountForScrolling?scrollX:0)+(containerBleed?0:containerRect.left)+placementObj.containerOffsetX,topViewportEdge=(accountForScrolling?scrollY:0)+(containerBleed?0:containerRect.top)+placementObj.containerOffsetY,rightViewportEdge=(accountForScrolling?scrollX:0)+(containerBleed?windowW:containerRect.right)-placementObj.containerOffsetX,bottomViewportEdge=(accountForScrolling?scrollY:0)+(containerBleed?windowH:containerRect.bottom)-placementObj.containerOffsetY,availableX=rightViewportEdge-leftViewportEdge,availableY=bottomViewportEdge-topViewportEdge;if(!coordinateShrink){var parentRect=DOM.getDimensions(placementObj.parent[0]),availableTop=parentRect.top-topViewportEdge,availableBottom=bottomViewportEdge-parentRect.bottom,availableLeft=parentRect.left-leftViewportEdge,availableRight=rightViewportEdge-parentRect.right;availableX=availableLeft>availableRight?availableLeft:availableRight,availableY=availableTop>availableBottom?availableTop:availableBottom}return useX&&(menuRect.width>availableX&&(placementObj.width=availableX),menuRect.left<leftViewportEdge&&(dX=leftViewportEdge-menuRect.left,placementObj.setCoordinate("x",placementObj.x+dX))),useY&&(menuRect.height>availableY&&(placementObj.height=availableY),menuRect.top<topViewportEdge&&(dY=topViewportEdge-menuRect.top,placementObj.setCoordinate("y",placementObj.y+dY))),placementObj},giveup:function giveup(placementObj){return placementObj.giveup=!0,placementObj.strategy=this.settings.strategy,placementObj.placement=this.settings.placement,placementObj},clearOldStyles:function clearOldStyles(){this.element[0].style.left="",this.element[0].style.top="",this.element[0].style.width="",this.element[0].style.height="";var os=this.originalStyles;return os&&(os.width&&(this.element[0].style.width=os.width),os.height&&(this.element[0].style.height=os.height)),this},setArrowPosition:function setArrowPosition(e,placementObj,element){var target=placementObj.parent,arrow=element.find("div.arrow"),dir=placementObj.placement,targetRect={},elementRect=element[0].getBoundingClientRect(),arrowRect={},newArrowRect={},hideArrow=!1;if(target&&target.length&&arrow.length){arrow[0].removeAttribute("style"),element.removeClass("top right bottom left").addClass(dir),target.is(".colorpicker")&&(target=target.next(".trigger")),target.is(".datepicker, .timepicker")&&(target=target.next(".icon")),target.is(".btn-split-menu, .btn-menu, .btn-actions, .btn-filter, .tab, .tab-more")&&(target=target.find(".icon").last()),target.is(".searchfield-category-button")&&(target=target.find(".icon.icon-dropdown")),target.is(".colorpicker-editor-button")&&(target=target.find(".trigger .icon")),target.is(".fontpicker")&&(target=target.find(".icon.icon-dropdown")),target.length||(target=placementObj.parent),targetRect=target.length?target[0].getBoundingClientRect():targetRect,arrowRect=arrow.length?arrow[0].getBoundingClientRect():arrowRect,newArrowRect={};var positionOpts={};positionOpts[function getMargin(placement){return"right"===placement||"left"===placement?"margin-top":"margin-left"}(dir)]=function getDistance(){var d=0;return"left"!==dir&&"right"!==dir||(d=targetRect.top+targetRect.height/2-(arrowRect.top+arrowRect.height/2),newArrowRect.top=arrowRect.top+d,newArrowRect.bottom=arrowRect.bottom+d,(newArrowRect.top<=elementRect.top||newArrowRect.bottom>=elementRect.bottom)&&(hideArrow=!0)),"top"!==dir&&"bottom"!==dir||(d=targetRect.left+targetRect.width/2-(arrowRect.left+arrowRect.width/2),newArrowRect.left=arrowRect.left+d,newArrowRect.right=arrowRect.right+d,(newArrowRect.left<=elementRect.left||newArrowRect.right>=elementRect.right)&&(hideArrow=!0)),d}(),hideArrow&&(positionOpts.display="none"),arrow.css(positionOpts)}},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.teardown().init()},teardown:function teardown(){return this.clearOldStyles(),this.element.removeClass("placeable"),this.element.off("updated.".concat("place"," place.").concat("place")),this.element.trigger("afterteardown"),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"place")}},$.fn.place=function(settings){return this.each((function(){var instance=$.data(this,"place");instance?instance.updated(settings):instance=$.data(this,"place",new Place(this,settings))}))};var ICON_DEFAULTS={use:"user-profile",focusable:!1};function Icon(element,settings){this.settings=utils.mergeSettings(element,settings,ICON_DEFAULTS),this.element=$(element),this.init()}Icon.prototype={init:function init(){return this.getExistingUseTag(),this.render().handleEvents()},render:function render(){if(this.element.addClass("icon"),!this.element.is("svg"))return this;var use=this.element[0].getElementsByTagName("use")[0];return use?(use.getAttribute("href")!==this.getBasedUseTag()&&use.setAttribute("href",this.getBasedUseTag()),this):this},getBasedUseTag:function getBasedUseTag(){return base.getBaseURL("#icon-".concat(this.settings.use))},getExistingUseTag:function getExistingUseTag(){if(!this.element.is("svg"))return this;var useTag=this.element.children("use");if(!useTag.length)return this;var href=useTag.attr("href");!href&&useTag.attr("xlink:href")&&(href=useTag.attr("xlink:href"));var baseUrl=base.url;return href&&base.element.length&&baseUrl.length&&(href=href.replace(baseUrl,"")),href=href.replace("#icon-",""),this.settings.use=href,this},handleEvents:function handleEvents(){var self=this;return this.element.on("updated.".concat("icon"),(function(){self.updated()})),this},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),this.teardown().init()},teardown:function teardown(){return this.element.off("updated.".concat("icon")),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"icon")}},$.fn.icon=function(settings){return this.each((function(){var instance=$.data(this,"icon");instance?instance.updated(settings):instance=$.data(this,"icon",new Icon(this,settings))}))},function(){function normalizeIconOptions(options){var defaults={icon:"user-profile",classes:["icon"]};return"string"==typeof(options=options||$.extend({},defaults))&&(options=$.extend({},defaults,{icon:options.replace("icon-","")})),!options.classes&&options.class&&(options.classes=options.class,delete options.class),options.classes||(options.classes=[].concat(defaults.classes)),"string"==typeof options.classes&&(options.classes=options.classes.split(" ")),-1===options.classes.indexOf("icon")&&options.classes.push("icon"),options.icon||(options.icon=""),options}$.createIcon=function createIcon(options){return options=normalizeIconOptions(options),['<svg class="'.concat(options.classes.join(" "),'" focusable="false" aria-hidden="true" role="presentation">')+'<use href="#icon-'.concat(options.icon,'"></use>')+"</svg>"].join("")},$.createIconElement=function createIconElement(options){return $($.createIcon(options))},$.createIconPath=function createIconElement(options){return options=normalizeIconOptions(options),$.getBaseURL("#icon-".concat(options.icon.replace("icon-","")))},$.fn.changeIcon=function(icon){icon&&$(this).find("use").attr("href",$.createIconPath({icon:icon}))},$.fn.getIconName=function(){var svg=$(this),use=svg.find("use");return 1===use.length&&use.attr("href")?use.attr("href").substr(use.attr("href").indexOf("#icon-")+6):1===use.length&&use.attr("xlink:href")?use.attr("xlink:href").substr(use.attr("xlink:href").indexOf("#icon-")+6):svg.attr("data-icon")}}();var TOOLTIP_DEFAULTS={content:null,offset:{top:10,left:10},placement:"top",trigger:"hover",title:null,beforeShow:null,popover:null,closebutton:null,isError:!1,isErrorColor:!1,tooltipElement:null,parentElement:null,keepOpen:!1,extraClass:null,placementOpts:{},maxWidth:null,initializeContent:!0,headerClass:null};function Tooltip(element,settings){this.settings=utils.mergeSettings(element,settings,TOOLTIP_DEFAULTS),this.element=$(element),this.init()}Tooltip.prototype={get visible(){return this.tooltip.length&&!1===this.tooltip[0].classList.contains("hidden")&&!1===this.tooltip[0].classList.contains("is-hidden")},get canBeShown(){return!this.reopenDelay&&!DOM.hasClass(this.element[0],"hidden")&&!DOM.hasClass(this.element[0],"is-hidden")&&this.element.parents(".hidden, .is-hidden").length<1},get popupmenuAPI(){return this.element.data("popupmenu")},get isFocused(){var activeElem=document.activeElement;return!!this.activeElement.is($(activeElem))||!!(this.tooltip&&this.tooltip.length&&this.tooltip[0].contains(activeElem))},init:function init(){this.uniqueId=utils.uniqueId(this.element,"tooltip"),this.isTouch=Environment.features.touch,this.setup(),this.appendTooltip(),"immediate"!==this.settings.trigger&&this.setContent(this.settings.content,!0),this.handleEvents()},setup:function setup(){this.activeElement=this.settings.parentElement instanceof $&&this.settings.parentElement.length?this.settings.parentElement:this.element,this.descriptionId=$(".tooltip-description").length+1,this.description=this.element.parent().find(".tooltip-description"),!this.description.length&&this.settings.isError&&(this.description=$('<span id="tooltip-description-'.concat(this.descriptionId,'" class="tooltip-description audible"></span>')).insertAfter(this.element)),this.element.is(".dropdown, .multiselect")&&(this.activeElement=this.element.nextAll(".dropdown-wrapper:first").find(">.dropdown"));var titleAttr=this.element.attr("title");(!this.settings.popover&&titleAttr&&titleAttr.length||!this.settings.popover&&this.settings.title)&&(this.settings.content=this.settings.title?this.settings.title:titleAttr,this.element.removeAttr("title")),"hover"===this.settings.trigger&&this.isTouch&&this.element.addClass("longpress-target"),this.isPopover=null!==this.settings.content&&"object"===_typeof(this.settings.content)||!0===this.settings.popover,this.settings.closebutton=!(!this.settings.closebutton&&!this.element.data("closebutton")),this.element.data("extraClass")&&this.element.data("extraClass").length&&(this.settings.extraClass=this.element.data("extraClass")),this.isRTL=Locale.isRTL(),DOM.addClass(this.element[0],"has-tooltip")},addAria:function addAria(){this.content&&(this.description.text(this.content),this.content=this.addClassToLinks(this.content,"links-clickable"),this.isPopover||this.element.removeAttr("title").attr("aria-describedby",this.description.attr("id")),this.isPopover&&"click"===this.settings.trigger&&this.element.attr("aria-haspopup",!0))},addClassToLinks:function addClassToLinks(content,thisClass){if(content instanceof $&&content.length>0)return content;var d=$("<div/>").html(content);return $("a",d).addClass(thisClass),d.html()},appendTooltip:function appendTooltip(){if(this.tooltip=this.settings.tooltipElement?$(this.settings.tooltipElement):$("#tooltip"),!this.tooltip.length){var name=this.settings.tooltipElement?this.settings.tooltipElement.substring(1,this.settings.tooltipElement.length):"tooltip";this.tooltip=$('<div class="'.concat(this.isPopover?"popover":"tooltip",' bottom is-hidden" role="tooltip" id="').concat(name,'"><div class="arrow"></div><div class="tooltip-content"></div></div>'))}this.tooltip.place({container:this.scrollparent,parent:this.activeElement,placement:this.settings.placement,strategy:"flip"}),$.data(this.tooltip[0],"tooltip",this),this.setTargetContainer()},handleEvents:function handleEvents(){var timer,self=this;function clearTimer(){timer&&timer.destroy&&timer.destroy()}function showImmediately(){clearTimer(),self.show()}function hideImmediately(){clearTimer(),self.hide()}function toggleTooltipDisplay(){self.visible?hideImmediately():showImmediately()}"hover"!==this.settings.trigger||this.settings.isError||(this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("mouseenter.".concat("tooltip"),(function(){self.isTouch||function showOnTimer(){clearTimer(),timer=new RenderLoopItem({duration:400/30,timeoutCallback:function timeoutCallback(){self.show()}}),renderLoop.register(timer)}()})).on("mouseleave.".concat("tooltip"),(function(){!function hideOnTimer(){clearTimer(),timer=new RenderLoopItem({duration:400/30,timeoutCallback:function timeoutCallback(){self.hide()}}),renderLoop.register(timer)}()})).on("longpress.".concat("tooltip"),(function(){showImmediately()})).on("updated.".concat("tooltip"),(function(){self.updated()})),"click"===this.settings.trigger&&this.element.on("click.".concat("tooltip"),(function(){toggleTooltipDisplay()})),"immediate"===this.settings.trigger&&(timer=setTimeout((function(){toggleTooltipDisplay()}),1)),"focus"===this.settings.trigger&&this.element.on("focus.".concat("tooltip"),(function(){showImmediately()})).on("blur.".concat("tooltip"),(function(){self.settings.keepOpen||hideImmediately()})),$(window).on("orientationchange.".concat("tooltip"),(function(){self.visible&&hideImmediately()}),!1)},setContent:function setContent(content,dontRender){var self=this,settingsContent=this.settings.content,noIncomingContent=null==content;function doRender(){!0!==dontRender&&(self.addAria(),self.render())}if(noIncomingContent&&null==settingsContent)return!1;if("function"==typeof settingsContent&&(content=settingsContent),noIncomingContent&&(content=settingsContent),content===this.content)return doRender(),!0;if(content instanceof $&&content.length)return this.content=content.addClass("hidden"),doRender(),!0;if("string"==typeof content){if(!content.length)return!1;if(0===(content=Locale.translate(content,{showAsUndefined:!0})||content).indexOf("#")){var contentCheck=$("".concat(content));return!!contentCheck.length&&(this.content=contentCheck,doRender(),!0)}}else{if("function"!=typeof content)return!1;var callbackResult=content.call(this.element);if(!callbackResult||"string"!=typeof callbackResult||!callbackResult.length)return!1;content=callbackResult}return this.content=xssUtils.sanitizeHTML(content),this.content="<p>".concat(this.content,"</p>"),doRender(),!0},render:function render(){return this.isPopover?this.renderPopover():this.renderTooltip()},renderTooltip:function renderTooltip(){var titleArea=this.tooltip[0].querySelectorAll(".tooltip-title")[0],contentArea=this.tooltip[0].querySelectorAll(".tooltip-content")[0],extraClass=this.settings.extraClass,content=this.content,tooltip=this.tooltip[0],classes="tooltip is-hidden";extraClass&&(classes+=" ".concat(extraClass)),tooltip.setAttribute("class",classes),titleArea&&(titleArea.style.display="none"),contentArea&&contentArea.previousElementSibling&&!contentArea.previousElementSibling.classList.contains("arrow")&&contentArea.insertAdjacentHTML("beforebegin",'<div class="arrow"></div>');var tooltipHTML="string"==typeof this.content?content:content[0].innerHTML;DOM.html(contentArea,tooltipHTML,"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>")},renderPopover:function renderPopover(){var self=this,extraClass=this.settings.extraClass,contentArea=this.tooltip.find(".tooltip-content"),title=this.tooltip[0].querySelector(".tooltip-title"),content=this.content,classes="popover is-hidden";extraClass&&(classes+=" ".concat(extraClass)),this.tooltip[0].setAttribute("class",classes);var useHtml="ie"===Environment.browser.name&&Environment.browser.isIE11()&&content instanceof $&&content.length&&"hover"===this.settings.trigger;if("string"==typeof content)content=$(content),contentArea.html(content),contentArea.find(".hidden").removeClass("hidden");else if(useHtml){var clone=content[0].cloneNode(!0),id=clone.id;id&&(clone.id="".concat(id,"-").concat(this.uniqueId)),contentArea.html(clone.outerHTML)}else contentArea.html(content);var popoverWidth=contentArea.width();this.settings.placementOpts||(this.settings.placementOpts={}),this.settings.placementOpts.parent||(this.settings.placementOpts.parent=this.element),useHtml||content[0].classList.remove("hidden"),contentArea[0].firstElementChild.classList.remove("hidden");var parentWidth=this.settings.placementOpts.parent.width();if(Locale.isRTL()?this.settings.placementOpts.parentXAlignment=parentWidth>popoverWidth?"left":"right":this.settings.placementOpts.parentXAlignment=parentWidth>popoverWidth?"right":"left",null!==this.settings.title)if(title)title.style.display="",title.childNodes[0].nodeValue=this.settings.title;else{var titleFrag=document.createDocumentFragment();title=document.createElement("div"),DOM.html(title,this.settings.title,"*"),title.classList.add("tooltip-title"),this.settings.headerClass&&DOM.addClass(title,this.settings.headerClass,"filled"),titleFrag.appendChild(title),this.tooltip[0].insertBefore(titleFrag,this.tooltip[0].firstChild)}else title&&(title.style.display="none");if(this.settings.closebutton&&title&&!title.firstElementChild){var closeBtnX=$('<button type="button" class="btn-icon l-pull-right btn-close">'.concat($.createIcon({classes:["icon-close"],icon:"close"}),"<span>Close</span>")+"</button>").on("click",(function(){self.hide(!0)}));title.appendChild(closeBtnX[0])}this.settings.initializeContent&&content.initialize()},open:function open(){return this.show()},show:function show(newSettings,ajaxReturn){var self=this;if((!this.popupmenuAPI||!this.popupmenuAPI.isOpen)&&this.canBeShown){if(this.isInPopup=!1,newSettings&&(this.settings=utils.mergeSettings(this.element[0],newSettings,this.settings)),this.settings.beforeShow&&!ajaxReturn){var response=function response(content){("boolean"!=typeof content||content)&&(self.content=content,self.show({content:content},!0))};return"string"==typeof this.settings.beforeShow?void window[this.settings.beforeShow](response,this.element):void this.settings.beforeShow(response,this.element)}if(!1!==this.setContent(this.content)&&!1!==this.element.triggerHandler("beforeshow",[this.tooltip])){this.tooltip[0].removeAttribute("style"),this.tooltip[0].classList.add(this.settings.placement),this.tooltip[0].classList.add("is-open"),DOM.addClass(this.element[0],"has-open-tooltip"),(this.settings.isError||this.settings.isErrorColor)&&this.tooltip[0].classList.add("is-error"),this.position(),utils.fixSVGIcons(this.tooltip),this.element.trigger("show",[this.tooltip]);var mouseUpEventName=this.isTouch?"touchend":"mouseup",isPersonalizable=self.element.closest(".is-personalizable").length>0;self.tooltip[0].classList[isPersonalizable?"add":"remove"]("is-personalizable"),setTimeout((function(){$(document).on("".concat(mouseUpEventName,".").concat("tooltip","-").concat(self.uniqueId),(function(e){var target=$(e.target);self.settings.isError||"focus"===self.settings.trigger||target.is(self.element)&&target.is("svg.icon")||$("#editor-popup").length&&$("#colorpicker-menu").length||(0===target.closest(".popover").length&&0===target.closest(".dropdown-list").length&&self.hide(),1===target.closest(".popover").length&&target.closest(".popover").not(".monthview-popup").length&&self.element.prev().is(".datepicker")&&self.hide())})).on("keydown.".concat("tooltip","-").concat(self.uniqueId),(function(e){(27===e.which||self.settings.isError)&&self.hide()})),self.settings.isError&&!self.element.is(":visible, .dropdown")&&self.element.is("[aria-describedby]")&&self.hide(),void 0===window.orientation&&$("body").on("resize.".concat("tooltip"),(function(){self.hide()})),$("body").on("scroll.".concat("tooltip"),(function(){self.hide()})),self.element.closest(".modal-body-wrapper").on("scroll.tooltip",(function(){self.hide()})),self.element.closest(".scrollable").on("scroll.tooltip",(function(){self.hide()})),self.element.closest(".datagrid-wrapper").on("scroll.tooltip",(function(){self.hide()})),self.settings.isError&&self.tooltip.on("click.".concat("tooltip"),(function(){self.hide()})),self.element.trigger("aftershow",[self.tooltip])}),400)}}},setTargetContainer:function setTargetContainer(){var targetContainer=$("body");this.scrollparent=this.element.closest(".page-container.scrollable"),this.scrollparent.length&&(targetContainer=this.scrollparent),this.settings.parentElement&&(targetContainer=this.settings.parentElement),targetContainer[0].appendChild(this.tooltip[0])},handleAfterPlace:function handleAfterPlace(e,placementObj){var _this=this;this.tooltip.data("place").setArrowPosition(e,placementObj,this.tooltip),setTimeout((function(){_this.tooltip.triggerHandler("tooltipafterplace",[placementObj])}))},position:function position(){this.setTargetContainer(),this.tooltip[0].classList.remove("is-hidden");var self=this,distance=this.isPopover?20:10,tooltipPlacementOpts=this.settings.placementOpts||{},windowW=Math.max(document.documentElement.clientWidth,window.innerWidth||0),windowH=Math.max(document.documentElement.clientHeight,window.innerHeight||0),rect=this.tooltip[0].getBoundingClientRect(),opts=$.extend({},{x:0,y:distance,container:this.scrollparent,containerOffsetX:tooltipPlacementOpts.containerOffsetX||this.settings.offset.left,containerOffsetY:tooltipPlacementOpts.containerOffsetY||this.settings.offset.top,parent:tooltipPlacementOpts.parent||this.activeElement,placement:tooltipPlacementOpts.placement||this.settings.placement,strategies:["flip","nudge"]},tooltipPlacementOpts);return"left"!==opts.placement&&"right"!==opts.placement||(opts.x=distance,opts.y=0),rect.width>=windowW&&/left|right/g.test(opts.placement)||rect.height>=windowH&&/top|bottom/g.test(opts.placement)?this.tooltip[0].classList.add("no-arrow"):this.tooltip[0].classList.remove("no-arrow"),this.tooltip.one("afterplace.tooltip",(function(e,placementObj){self.handleAfterPlace(e,placementObj)})),this.tooltip.data("place")||this.tooltip.place(opts),this.tooltip.data("place").place(opts),this},close:function close(){return this.hide()},hide:function hide(force){this.settings.keepOpen&&!force||!this.visible||(this.isInPopup?this.settings.content.addClass("hidden"):(DOM.removeClass(this.element[0],"has-open-tooltip"),this.tooltip[0].classList.remove("is-personalizable"),this.tooltip[0].classList.remove("is-open"),this.tooltip[0].classList.add("is-hidden"),this.tooltip[0].style.left="",this.tooltip[0].style.top="",this.tooltip.find(".arrow").removeAttr("style"),this.detachOpenEvents(),0===$(".popover").not(".is-hidden").length&&($(document).off("mouseup.tooltip keydown.tooltip"),$("body").off("resize.tooltip")),this.element.triggerHandler("hide",[this.tooltip])))},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings));var self=this;return"immediate"===self.settings.trigger?setTimeout((function(){self.show()}),100):self.setContent(),this},detachOpenEvents:function detachOpenEvents(){this.tooltip.off("click.".concat("tooltip")),$(document).off(["keydown.".concat("tooltip","-").concat(self.uniqueId),"mouseup.".concat("tooltip","-").concat(self.uniqueId),"touchend.".concat("tooltip","-").concat(self.uniqueId)].join(" ")),$("body").off(["resize.".concat("tooltip"),"scroll.".concat("tooltip")].join(" ")),this.element.closest(".modal-body-wrapper").off("scroll.".concat("tooltip")),this.element.closest(".scrollable").off("scroll.".concat("tooltip")),this.element.closest(".datagrid-body").off("scroll.".concat("tooltip"))},teardown:function teardown(){return this.description.remove(),this.descriptionId=void 0,this.activeElement=void 0,this.element.removeAttr("aria-describedby").removeAttr("aria-haspopup"),this.tooltip.hasClass("is-hidden")||this.hide(),this.reopenDelay&&delete this.reopenDelay,this.tooltip&&this.tooltip.length&&(this.tooltip.data("place")&&this.tooltip.data("place").destroy(),this.tooltip.data("tooltip")&&$.removeData(this.tooltip[0],"tooltip")),this.element.off(["mouseenter.".concat("tooltip"),"mouseleave.".concat("tooltip"),"longpress.".concat("tooltip"),"click.".concat("tooltip"),"updated.".concat("tooltip"),"focus.".concat("tooltip"),"blur.".concat("tooltip")].join(" ")),DOM.removeClass(this.element[0],"has-tooltip"),this.detachOpenEvents(),$(window).off("orientationchange.".concat("tooltip")),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"tooltip")}},$.fn.tooltip=function(settings){return this.each((function(){var instance=$.data(this,"tooltip");instance?instance.updated(settings):instance=$.data(this,"tooltip",new Tooltip(this,settings))}))};var buttonStyles=["default","btn","btn-primary","btn-secondary","btn-tertiary","btn-destructive"],buttonTypes=["default","btn-icon","btn-menu","btn-actions","btn-toggle","icon-favorite","btn-editor","input"],pressableTypes=["icon-favorite","btn-toggle"],BUTTON_DEFAULTS={style:buttonStyles[0],type:buttonTypes[0],toggleOnIcon:null,toggleOffIcon:null,hideMenuArrow:null,replaceText:!1,ripple:!0,validate:!1};function Button(element,settings){this.element=$(element),this.settings=utils.mergeSettings(element,settings,BUTTON_DEFAULTS),this.init()}Button.prototype={get tooltipAPI(){return this.element.data("tooltip")},get icon(){return this.element[0].querySelector("svg:not(.ripple-effect):not(.icon-dropdown)")},get disabled(){return this.element[0].disabled},set disabled(val){var trueVal=!0===val;this.settings.disabled=trueVal,this.element[0].disabled=trueVal,this.element[0].classList[trueVal?"add":"remove"]("is-disabled")},init:function init(){void 0!==this.settings.buttonsetAPI&&"function"==typeof this.settings.buttonsetAPI.render&&(this.buttonsetAPI=this.settings.buttonsetAPI,delete this.settings.buttonsetAPI),this.getSettingsFromElement(),this.render()},animateWithJS:function animateWithJS(el){var elStyle=el[0].style,xPos="".concat(parseFloat(elStyle.left)-100,"px"),yPos="".concat(parseFloat(elStyle.top)-100,"px");el[0].style.opacity="0.4",el.animate({opacity:0,left:xPos,top:yPos,width:200,height:200},1e3)},createRipple:function createRipple(e){if(!(this.disabled||e&&(void 0!==e.which&&1!==e.which||-1===["click","touchstart"].indexOf(e.type)))){$("svg.ripple-effect",this.element).remove();var xPos,yPos,btnOffset=this.element.offset();e&&(Environment.features.touch?(e=e.originalEvent)&&e.touches&&1===e.touches.length&&(xPos=e.touches[0].pageX-btnOffset.left,yPos=e.touches[0].pageY-btnOffset.top):(xPos=e.pageX-btnOffset.left,yPos=e.pageY-btnOffset.top)),xPos=xPos<0?this.element.outerWidth()/2:xPos,yPos=yPos<0?this.element.outerHeight()/2:yPos;var ripple=$('<svg class="ripple-effect" focusable="false" aria-hidden="true" role="presentation">\n      <circle r="0" class="ripple-circle"></circle>\n    </svg>');if(ripple[0].style.left="".concat(xPos,"px"),ripple[0].style.top="".concat(yPos,"px"),this.element.prepend(ripple),!$.fn.cssPropSupport("animation")||Environment.browser.isSafari&&!Environment.features.touch||"firefox"===Environment.browser.name)ripple.removeClass("is-animation"),this.animateWithJS(ripple);else $("svg.ripple-effect",this.element).addClass("is-animation");setTimeout((function(){ripple.remove()}),1e3)}},render:function render(){var _this=this,elemClasses=this.element[0].classList;buttonStyles.indexOf(this.settings.style)>0&&elemClasses.add(this.settings.style),buttonTypes.indexOf(this.settings.type)>0&&elemClasses.add(this.settings.type);var buttonsetAPI=this.buttonsetAPI,switchModalClasses=!1;if(buttonsetAPI){"modal"===buttonsetAPI.settings.style&&(switchModalClasses=!0);["default","btn","btn-modal"].indexOf(this.settings.style)>-1&&(elemClasses[switchModalClasses?"remove":"add"]("btn"),elemClasses[switchModalClasses?"add":"remove"]("btn-modal"));["btn-primary","btn-modal-primary"].indexOf(this.settings.style)>-1&&(elemClasses[switchModalClasses?"remove":"add"]("btn-primary"),elemClasses[switchModalClasses?"add":"remove"]("btn-modal-primary"));["btn-secondary","btn-modal-secondary"].indexOf(this.settings.style)>-1&&(elemClasses[switchModalClasses?"remove":"add"]("btn-secondary"),elemClasses[switchModalClasses?"add":"remove"]("btn-modal-secondary"))}this.settings.isDefault&&(this.settings.style="btn-primary",elemClasses.remove("btn-primary"),elemClasses.add("btn-modal-primary"),delete this.settings.isDefault),"string"==typeof this.settings.cssClass&&(this.element[0].className+=xssUtils.stripHTML(this.settings.cssClass)),this.settings.disabled&&(this.disabled=!0===this.settings.disabled,delete this.settings.disabled);if(this.settings.text){var textSpan=this.element[0].querySelector("span"),hasPrexistingSpan=textSpan instanceof HTMLElement;hasPrexistingSpan||(textSpan=this.element);var currentTextContent=this.settings.text||$(textSpan).text().trim();currentTextContent=xssUtils.stripHTML(currentTextContent),hasPrexistingSpan||(this.element[0].innerText="",textSpan=document.createElement("span"),this.element.append($(textSpan)),(this.settings.audible||["btn-icon","btn-actions"].indexOf(this.settings.type)>-1)&&textSpan.classList.add("audible")),textSpan.innerText=currentTextContent}var targetIcon,iconElem=this.icon;if(this.settings.icon?targetIcon=this.settings.icon:"btn-toggle"===this.settings.type?targetIcon=this.pressed?this.settings.toggleOnIcon:this.settings.toggleOffIcon:"icon-favorite"===this.settings.type?targetIcon=this.pressed?"icon-star-filled":"icon-star-outlined":"btn-actions"===this.settings.type&&(targetIcon="icon-more"),targetIcon&&(targetIcon=xssUtils.stripHTML(targetIcon),iconElem instanceof SVGElement||iconElem instanceof HTMLElement?iconElem.querySelector("use").setAttribute("href","#".concat(targetIcon)):(iconElem=$.createIconElement({icon:targetIcon.replace("icon-","")}),this.element.prepend($(iconElem)))),this.element.hasClass("btn-menu")&&!this.element.hasClass("btn-icon")&&!this.element.hasClass("btn-actions")){var ddIcon=this.element.children("svg.icon"),use=ddIcon.find("use"),hasIcon=!1;if(ddIcon.length>0&&use.length>=1){var hrefValue=use.last().attr("href");!hrefValue&&use.last().attr("xlink:href")&&(hrefValue=use.last().attr("xlink:href")),hasIcon=hrefValue.indexOf("#icon-dropdown")>-1}hasIcon||(ddIcon=$.createIconElement({icon:"dropdown",classes:["icon-dropdown"]}),this.element.append(ddIcon)),ddIcon.hasClass("icon-dropdown")||ddIcon.addClass("icon-dropdown"),this.settings.replaceText&&this.element.on("selected.content",(function(e,a){$(this).find("span").text(a.text())})),this.settings.hideMenuArrow&&ddIcon.remove()}if(pressableTypes.indexOf(this.settings.type)>-1&&(this.element.on("click.favorite",(function(){_this.toggle()})),this.pressed=this.pressed),this.element.hasClass("btn-actions")&&!this.element.parents(".field").length&&!this.element.parents(".toolbar").length&&!this.tooltipAPI){var moreText=Locale.translate("More");this.element.attr("title",moreText).tooltip({content:moreText})}elemClasses[this.settings.ripple?"add":"remove"]("no-ripple"),this.settings.ripple&&this.element.on("touchstart.button click.button",(function(e){_this.createRipple(e)})),this.element.data("hidefocus")||this.element.hideFocus()},getSettingsFromElement:function getSettingsFromElement(){var buttonsetAPI,_this2=this,dontStoreSettings=arguments.length>0&&void 0!==arguments[0]&&arguments[0],elementSettings={},container=this.element.parents(".buttonset, .modal-buttonset");container.length&&(buttonsetAPI=container.data("buttonset"))&&(this.buttonsetAPI=buttonsetAPI);var elemClasses=this.element[0].classList||"";if(buttonStyles.forEach((function(style){"default"!==style&&elemClasses.contains(style)&&(elementSettings.style=style)})),this.buttonsetAPI&&"modal"===this.buttonsetAPI.settings.style){var modalBtnMappings={"btn-modal":"btn","btn-modal-primary":"btn-primary","btn-modal-secondary":"btn-secondary"};Object.keys(modalBtnMappings).forEach((function(modalBtnStyle){elemClasses.contains(modalBtnStyle)&&(elementSettings.style=modalBtnMappings[modalBtnStyle])}))}buttonTypes.forEach((function(type){"default"!==type&&elemClasses.contains(type)&&(elementSettings.type=type)})),this.settings.disabled||(elementSettings.disabled=this.disabled);var ariaPressedAttr=this.element[0].getAttribute("aria-pressed");void 0!==ariaPressedAttr&&(elementSettings.pressed=!0===ariaPressedAttr,"icon-favorite"===elementSettings.type&&(elementSettings.toggleOnIcon="icon-star-filled",elementSettings.toggleOffIcon="icon-star-outlined"));var idAttr=this.element[0].id;"string"==typeof idAttr&&idAttr.length&&(elementSettings.id=idAttr);var titleAttr=this.element[0].title;"string"==typeof titleAttr&&titleAttr.length&&(elementSettings.title=titleAttr),elemClasses.contains("no-ripple")&&(elementSettings.ripple=!1);var audibleTextElem=this.element[0].querySelector("span.audible");return audibleTextElem&&(elementSettings.audible=!0),dontStoreSettings||Object.keys(elementSettings).forEach((function(setting){_this2.settings[setting]=elementSettings[setting]})),elementSettings},toData:function toData(addContextElement){var _this3=this,ret={};return Object.keys(this.settings).forEach((function(setting){ret[setting]=_this3.settings[setting]})),ret.pressed=this.pressed,addContextElement&&(ret.element=this.element[0]),ret},get pressed(){return-1!==pressableTypes.indexOf(this.settings.type)&&"true"===this.element[0].getAttribute("aria-pressed")},set pressed(val){var icon,trueVal=!0===val,hasPressedIcons=this.settings.toggleOffIcon&&this.settings.toggleOnIcon,iconElem=$(this.icon);switch(this.element[0].setAttributeNS(null,"aria-pressed","x"),this.element[0].setAttributeNS(null,"aria-pressed",trueVal),this.element[0].classList[trueVal?"add":"remove"]("is-pressed"),this.settings.type){case"icon-favorite":icon=trueVal?"icon-star-filled":"icon-star-outlined";break;case"btn-toggle":hasPressedIcons&&(icon=trueVal?this.settings.toggleOnIcon:this.settings.toggleOffIcon)}0!==iconElem.length&&"string"==typeof icon&&(iconElem.changeIcon(icon),utils.fixSVGIcons(iconElem))},toggle:function toggle(){this.pressed=!this.pressed},teardown:function teardown(){this.element.off(["click.".concat("button"),"touchstart.".concat("button")].join(" "));var tooltipApi=this.tooltipAPI;this.element.hasClass("btn-actions")&&tooltipApi&&tooltipApi.destroy();var hidefocusApi=this.element.data("hidefocus");return hidefocusApi&&hidefocusApi.destroy(),this},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.teardown(),this.render(),this},destroy:function destroy(){this.teardown(),this.buttonsetAPI&&delete this.buttonsetAPI,$.removeData(this.element[0],"button")}},$.fn.button=function jQueryButton(settings){return this.each((function(){var instance=$.data(this,"button");instance?instance.updated(settings):instance=$.data(this,"button",new Button(this,settings))}))};var BUTTONSET_DEFAULTS={buttons:[],detectHTMLButtons:!1,style:"default"};function ButtonSet(element,settings){if(!(element instanceof HTMLElement))throw new Error("ButtonSet component needs an HTMLElement as a base element.");this.element=element,this.settings=utils.mergeSettings(element,settings,BUTTONSET_DEFAULTS),this.init()}ButtonSet.prototype={set disabled(val){val=!0===val,this.element.classList[val?"add":"remove"]("is-disabled"),this.buttons&&this.buttons.forEach((function(buttonAPI){buttonAPI.disabled=val}))},init:function init(){this.build(),this.render()},build:function build(doAdd){var _this=this;this.buttons&&doAdd||this.reset(),Array.isArray(this.settings.buttons)&&this.settings.buttons.length?this.settings.buttons.forEach((function(buttonJSON){_this.add(buttonJSON)})):this.detectHTMLButtons()},render:function render(){var _this2=this,ignoreChildren=arguments.length>0&&void 0!==arguments[0]&&arguments[0],elemClasses=this.element.classList,cssClassMap={default:"buttonset",modal:"modal-buttonset"};Object.keys(cssClassMap).forEach((function(style){var cssClass=cssClassMap[style];_this2.settings.style!==style&&elemClasses.remove(cssClass)})),elemClasses.add(cssClassMap[this.settings.style]),ignoreChildren||this.buttons.forEach((function(buttonAPI){buttonAPI.render()}))},add:function add(settings){var doAddDOM=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!settings||"object"!==_typeof(settings))throw new Error("Settings object is required to add a new button to the ButtonSet");var buttonElem=settings.element,didExist=buttonElem instanceof HTMLElement;didExist||(buttonElem=document.createElement("button"));var buttonId=xssUtils.stripHTML(settings.id);"string"==typeof buttonId&&buttonId.length>0&&(buttonElem.id=buttonId);var $buttonElem=$(buttonElem);!doAddDOM&&didExist||$(this.element).append($buttonElem),settings.buttonsetAPI=this,$buttonElem.button(settings);var buttonAPI=$buttonElem.data("button");this.buttons.push(buttonAPI)},remove:function remove(){var elem,$elem,buttonAPI=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,doRemoveDOM=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!buttonAPI)throw new Error("No Button API, HTMLElement, or ID string provided");if(void 0===buttonAPI||"function"!=typeof buttonAPI.destroy){if(buttonAPI instanceof HTMLElement?elem=buttonAPI:"string"==typeof buttonAPI&&(elem=$(this.element).find("#".concat(buttonAPI.replace("#","")))),$elem=$(elem),void 0===(buttonAPI=$(elem).data("button"))||"function"!=typeof buttonAPI.destroy)throw new Error("The provided Button API did not match a button existing in this ButtonSet.")}else $elem=buttonAPI.element;buttonAPI.destroy(),doRemoveDOM&&$elem.remove(),this.buttons=this.buttons.filter((function(item){return item!==buttonAPI}))},removeAll:function removeAll(){var _this3=this,doRemoveDOM=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.buttons.forEach((function(buttonAPI){_this3.remove(buttonAPI,doRemoveDOM)}))},reset:function reset(){this.buttons=[]},at:function at(){var idx=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.buttons[idx]},detectHTMLButtons:function detectHTMLButtons(){var _this4=this;this.settings.detectHTMLButtons&&(this.reset(),(utils.getArrayFromList(this.element.querySelectorAll("button"))||[]).forEach((function(button){var api=$(button).data("button");api||($(button).button(),api=$(button).data("button"));var data=api.getSettingsFromElement(!0);data.element=button,_this4.add(data)})))},toData:function toData(){var data=utils.extend({},this.settings);return this.buttons.forEach((function(buttonAPI){data.buttons.push(buttonAPI.toData())})),data},teardown:function teardown(doRemoveDOM){return this.removeAll(doRemoveDOM),this.reset(),this},updated:function updated(settings){var prevButtons=this.settings.buttons;return settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),Array.isArray(settings.buttons)&&prevButtons!==settings.buttons?(this.settings.buttons=settings.buttons,this.teardown(!0),this.init()):(this.render(!0),this.buttons.forEach((function(buttonAPI){buttonAPI.updated()}))),this},destroy:function destroy(){this.teardown(!0),$.removeData(this.element,"buttonset")}},$.fn.buttonset=function jQueryButton(settings){return this.each((function(){var instance=$.data(this,"buttonset");instance?instance.updated(settings):instance=$.data(this,"buttonset",new ButtonSet(this,settings))}))};var HYPERLINK_DEFAULTS={};function Hyperlink(element,settings){return this.init(element,settings)}Hyperlink.prototype={init:function init(element,settings){if(!this.element&&element instanceof HTMLElement&&(this.element=element),"object"===_typeof(settings)){var previousSettings=this.settings||HYPERLINK_DEFAULTS;this.settings=utils.mergeSettings(this.element,settings,previousSettings)}return this.focusBehavior||(this.focusBehavior=new HideFocus(this.element)),this},handleEvents:function handleEvents(){return this},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),this.teardown().init()},teardown:function teardown(){return this}},$.fn.hyperlink=function(settings){return this.each((function(){var instance=$.data(this,"hyperlink");instance?instance.updated(settings):(instance=$.data(this,"hyperlink",new Hyperlink(this,settings))).destroy=function destroy(){this.teardown(),$.removeData(this,"hyperlink")}}))};var masks={EMPTY_STRING:"",PLACEHOLDER_CHAR:"_",CARET_TRAP:"[]",NON_DIGITS_REGEX:/[^\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/g,DIGITS_REGEX:/[\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/,ALPHAS_REGEX:/[\u00C0-\u017Fa-zA-Z]/,ANY_REGEX:/[\u00C0-\u017Fa-zA-Z0-9]/,DEFAULT_API_OPTIONS:{locale:"en-US",pattern:void 0,pipe:void 0}};masks.LEGACY_DEFS={"#":masks.DIGITS_REGEX,0:masks.DIGITS_REGEX,x:masks.ALPHAS_REGEX,"*":masks.ANY_REGEX,"?":/./,"~":/[-0-9]/,a:/[APap]/,m:/[Mm]/},masks.DEFAULT_CONFORM_OPTIONS={caretTrapIndexes:[],guide:!0,previousMaskResult:masks.EMPTY_STRING,placeholderChar:masks.PLACEHOLDER_CHAR,placeholder:masks.EMPTY_STRING,selection:{start:0},keepCharacterPositions:!0};var DEFAULT_NUMBER_MASK_OPTIONS={prefix:masks.EMPTY_STRING,suffix:masks.EMPTY_STRING,allowThousandsSeparator:!0,symbols:{currency:"$",decimal:".",negative:"-",thousands:","},allowDecimal:!0,decimalLimit:2,locale:"",requireDecimal:!1,allowNegative:!1,allowLeadingZeros:!1,integerLimit:null};function convertToMask(strNumber){return strNumber.split(masks.EMPTY_STRING).map((function(char){return masks.DIGITS_REGEX.test(char)?masks.DIGITS_REGEX:char}))}function getRegexForPart(part,type){var types={any:masks.ANY_REGEX,digits:masks.DIGITS_REGEX,alphas:masks.ALPHAS_REGEX};types[type]||(type="any");for(var size=part.toString().length,arr=[];size>0;)arr.push(types[type]),size-=1;return arr}masks.numberMask=function sohoNumberMask(rawValue,options){(options=utils.mergeSettings(void 0,options,DEFAULT_NUMBER_MASK_OPTIONS)).locale&&options.locale.length||(options.locale=Locale.currentLocale.name),options.allowLeadingZeroes&&(warnAboutDeprecation("allowLeadingZeros","allowLeadingZeroes","Number Mask"),options.allowLeadingZeros=options.allowLeadingZeroes,options.allowLeadingZeroes=void 0);var PREFIX=options.prefix,SUFFIX=options.suffix,DECIMAL=options.symbols.decimal,THOUSANDS=options.symbols.thousands,prefixLength=PREFIX&&PREFIX.length||0,suffixLength=SUFFIX&&SUFFIX.length||0,thousandsSeparatorSymbolLength=THOUSANDS&&THOUSANDS.length||0;function numberMask(thisRawValue){"string"!=typeof thisRawValue&&(thisRawValue=masks.EMPTY_STRING);var rawValueLength=thisRawValue.length;if(thisRawValue===masks.EMPTY_STRING||thisRawValue[0]===PREFIX[0]&&1===rawValueLength)return PREFIX.split(masks.EMPTY_STRING).concat([masks.DIGITS_REGEX]).concat(SUFFIX.split(masks.EMPTY_STRING));if(thisRawValue===DECIMAL&&options.allowDecimal)return PREFIX.split(masks.EMPTY_STRING).concat(["0",DECIMAL,masks.DIGITS_REGEX]).concat(SUFFIX.split(masks.EMPTY_STRING));var integer,fraction,mask,indexOfLastDecimal=thisRawValue.lastIndexOf(DECIMAL),hasDecimal=-1!==indexOfLastDecimal,isNegative=thisRawValue[0]===options.symbols.negative&&options.allowNegative;if(thisRawValue.slice(-1*suffixLength)===SUFFIX&&(thisRawValue=thisRawValue.slice(0,-1*suffixLength)),hasDecimal?(integer=thisRawValue.slice(thisRawValue.slice(0,prefixLength)===PREFIX?prefixLength:0,indexOfLastDecimal),fraction=convertToMask((fraction=thisRawValue.slice(indexOfLastDecimal+1,rawValueLength)).replace(masks.NON_DIGITS_REGEX,masks.EMPTY_STRING))):integer=thisRawValue.slice(0,prefixLength)===PREFIX?thisRawValue.slice(prefixLength):thisRawValue,options.integerLimit&&"number"==typeof options.integerLimit){var thousandsSeparatorRegex="."===THOUSANDS?"[.]":"".concat(THOUSANDS),numberOfThousandSeparators=(integer.match(new RegExp(thousandsSeparatorRegex,"g"))||[]).length;integer=integer.slice(0,options.integerLimit+(isNegative?1:0)+numberOfThousandSeparators*thousandsSeparatorSymbolLength)}integer=integer.replace(masks.NON_DIGITS_REGEX,masks.EMPTY_STRING),options.allowLeadingZeros||(integer=integer.replace(/^0+(0$|[^0])/,"$1"));var localeOptions={maximumFractionDigits:options.decimalLimit,style:"decimal",useGrouping:!0};return mask=convertToMask(integer=options.allowThousandsSeparator?function addThousandsSeparator(n,thousands,options,localeStringOpts){if(""===n||isNaN(n))return n;var formatted=Locale.toLocaleString(Number(n),options.locale,localeStringOpts,thousands);if(options&&options.allowLeadingZeros&&0===n.indexOf("0")){var zeros=function getLeadingZeros(formattedStr){return"".concat(formattedStr).match(/^0*/)[0].length}(n);for(0===formatted.indexOf("0")&&(formatted=formatted.substring(1));zeros>0;)zeros-=1,formatted="0".concat(formatted)}return formatted}(integer,THOUSANDS,options,localeOptions):integer),(hasDecimal&&options.allowDecimal||!0===options.requireDecimal)&&(thisRawValue[indexOfLastDecimal-1]!==DECIMAL&&mask.push(masks.CARET_TRAP),mask.push(DECIMAL,masks.CARET_TRAP),fraction&&("number"==typeof options.decimalLimit&&(fraction=fraction.slice(0,options.decimalLimit)),mask=mask.concat(fraction)),!0===options.requireDecimal&&thisRawValue[indexOfLastDecimal-1]===DECIMAL&&mask.push(masks.DIGITS_REGEX)),prefixLength>0&&(mask=PREFIX.split(masks.EMPTY_STRING).concat(mask)),isNegative&&(mask.length===prefixLength&&mask.push(masks.DIGITS_REGEX),mask=[/-/].concat(mask)),SUFFIX.length>0&&(mask=mask.concat(SUFFIX.split(masks.EMPTY_STRING))),mask}return numberMask.instanceOf="createNumberMask",numberMask(rawValue)};var DEFAULT_DATETIME_MASK_OPTIONS={format:"M/d/yyyy",symbols:{timeSeparator:":",dayPeriodSeparator:" ",dateSeparator:"/"}},DATE_MAX_VALUES={dd:31,d:31,MMM:void 0,MM:12,M:12,yy:99,yyyy:9999,h:12,hh:12,H:24,HH:24,mm:60,ss:60,a:void 0};function MaskAPI(settings){return this.configure(settings),this}masks.dateMask=function dateMask(rawValue,options){options=utils.mergeSettings(void 0,options,DEFAULT_DATETIME_MASK_OPTIONS);var mask=[],digitRegex=masks.DIGITS_REGEX,format=options.format,splitterStr=stringUtils.removeDuplicates(format.replace(/[dMyHhmsa]+/g,"")),splitterRegex=new RegExp("[".concat(splitterStr,"]+")),formatArray=format.split(/[^dMyHhmsa]+/),rawValueArray=rawValue.split(splitterRegex),maxValue=DATE_MAX_VALUES;return formatArray.forEach((function(part,i){var size,value=maxValue[part];if("a"===part||"ah"===part){var am="AM",pm="PM";if(Locale.calendar()){am=Locale.calendar().dayPeriods[0],pm=Locale.calendar().dayPeriods[1];for(var apRegex=[],j=0;j<am.length;j++)am[j]&&pm[j]&&am[j].toLowerCase()===pm[j].toLowerCase()?apRegex.push(am[j].toLowerCase()):apRegex.push(am[j].toLowerCase()+(pm[j]?pm[j].toLowerCase():""));for(var k=0;k<apRegex.length;k++)mask.push(new RegExp("[".concat(apRegex[k],"]"),"i"))}else mask.push(/[aApP]/,/[Mm]/);if("ah"===part){var hourValue=rawValueArray[i].replace(am,"").replace(pm,"");mask=mask.concat(getRegexForPart(hourValue,"digits"))}}else if(value)if(rawValueArray[i]){var rawValueStr=rawValueArray[i].toString(),rawValueFirstDigit=parseInt(rawValueStr.substr(0,1),10),maxFirstDigit=parseInt(maxValue[part].toString().substr(0,1),10);1===part.length&&rawValueFirstDigit>maxFirstDigit||"0"!==rawValueStr&&1===rawValueStr.length&&rawValueFirstDigit<=maxFirstDigit&&void 0!==rawValueArray[i+1]&&"HH"!==part.toUpperCase()?mask.push(digitRegex):mask=mask.concat(getRegexForPart(value,"digits"))}else for(size=value.toString().length;size>0;)mask.push(digitRegex),size-=1;else mask=mask.concat(getRegexForPart(part,"alphas"));var nextPart=formatArray[i+1];if(void 0!==nextPart){var thisPartSize=part.toString().length,start=format.indexOf(part)+thisPartSize,end=format.indexOf(nextPart),literals=format.substring(start,end).split(masks.EMPTY_STRING);mask=mask.concat(literals)}})),mask},masks.rangeDateMask=function(rawValue,options){var parts=rawValue.split(options.delimeter),delimiterArr=options.delimeter.split(""),firstDate=masks.dateMask(parts[0],options),secondDate=[];return parts[1]&&(secondDate=masks.dateMask(parts[1],options)),firstDate.concat(delimiterArr.concat(secondDate))},masks.autocorrectedDatePipe=function autoCorrectedDatePipe(processResult,options){options.dateFormat||(options.dateFormat=Locale.calendar().dateFormat.short);var indexesOfPipedChars=[],dateFormatArray=options.dateFormat.split(/[^dMy]+/),maxValue={d:31,M:12,yy:99,yyyy:9999},minValue={d:1,M:1,yy:0,yyyy:1},conformedValueArr=processResult.conformedValue.split("");dateFormatArray.forEach((function(format){var position=options.dateFormat.indexOf(format),maxFirstDigit=parseInt(maxValue[format].toString().substr(0,1),10);parseInt(conformedValueArr[position],10)>maxFirstDigit&&(conformedValueArr[position+1]=conformedValueArr[position],conformedValueArr[position]=0,indexesOfPipedChars.push(position))}));var placeholderRegex=new RegExp("[^".concat(processResult.placeholderChar,"]")),maskPieces=processResult.placeholder.split(placeholderRegex),conformedPieces=processResult.conformedValue.split(/\D/g);return!dateFormatArray.some((function(format,i){var length=maskPieces[i].length>format.length?maskPieces[i].length:format.length,textValue=conformedPieces[i]||"",value=parseInt(textValue,10);return value>maxValue[format]||textValue.length===length&&value<minValue[format]}))&&{value:conformedValueArr.join(""),characterIndexes:indexesOfPipedChars}},MaskAPI.prototype={configure:function configure(settings){if(this.settings||(this.settings={}),!settings)return this;if(settings.locale&&(this.locale=settings.locale),settings.pattern)if(Array.isArray(settings.pattern)||"function"==typeof settings.pattern)this.pattern=settings.pattern;else if("string"==typeof settings.pattern){var defs=utils.mergeSettings(void 0,settings.definitions||{},masks.LEGACY_DEFS);this.pattern=this._convertPatternFromString(settings.pattern,defs)}return settings.patternOptions&&(this.patternOptions=settings.patternOptions),this},process:function process(rawValue,opts){if("string"!=typeof rawValue)throw new Error("No string provided");var providedMask,processResult={originalValue:rawValue,caretPos:opts.selection.start,maskResult:!1};if("function"==typeof this.pattern){opts.patternOptions||(opts.patternOptions={});var maskOpts=utils.extend({},this.patternOptions,opts.patternOptions,{caretPos:opts.selection.start,previousMaskResult:opts.previousMaskResult});providedMask=this.pattern(rawValue,maskOpts);var caretTrapInfo=this._processCaretTraps(providedMask);providedMask=caretTrapInfo.maskWithoutCaretTraps,opts.caretTrapIndexes=caretTrapInfo.indexes}else providedMask=this.pattern;if(!1===providedMask)return processResult;try{processResult=this._conformToMask(rawValue,providedMask,opts)}catch(e){return processResult}if(opts.patternOptions&&opts.patternOptions.delimeter&&processResult.conformedValue&&processResult.conformedValue!==rawValue&&(processResult.caretPos=processResult.conformedValue.length),"function"==typeof opts.pipe){var pipeResult={};try{pipeResult=opts.pipe(processResult,opts)}catch(e){pipeResult=!1}!1===pipeResult?(processResult.pipeResult=!1,processResult.pipedValue=opts.previousMaskResult):utils.isString(pipeResult)?(processResult.pipeResult=!0,processResult.pipedValue=pipeResult,processResult.pipedCharIndexes=[]):processResult=utils.extend({},processResult,{pipeResult:pipeResult.result,pipedValue:pipeResult.value,pipedCharIndexes:pipeResult.characterIndexes})}return processResult},_conformToMask:function _conformToMask(rawValue,mask,settings){(settings=utils.mergeSettings(void 0,settings,masks.DEFAULT_CONFORM_OPTIONS)).placeholder=this._convertMaskToPlaceholder(mask,settings.placeholderChar);var charactersRejected=!1,suppressGuide=!1===settings.guide&&void 0!==settings.previousMaskResult,rawValueLength=rawValue.length,prevMaskResultLength=settings.previousMaskResult.length,maskLength=this.pattern.length,placeholderLength=settings.placeholder.length||0,placeholderChar=settings.placeholderChar,caretPos=settings.selection.start,resultStr=masks.EMPTY_STRING,editDistance=rawValueLength-prevMaskResultLength,isAddition=editDistance>0,indexOfFirstChange=caretPos+(isAddition?-editDistance:0),indexOfLastChange=indexOfFirstChange+Math.abs(editDistance);if(!0===settings.keepCharacterPositions&&!isAddition){for(var compensatingPlaceholderChars=masks.EMPTY_STRING,i=indexOfFirstChange;i<indexOfLastChange;i++)settings.placeholder[i]===placeholderChar&&(compensatingPlaceholderChars+=placeholderChar);rawValue=rawValue.slice(0,indexOfFirstChange)+compensatingPlaceholderChars+rawValue.slice(indexOfFirstChange,rawValueLength)}for(var rawValueArr=rawValue.split(masks.EMPTY_STRING).map((function markAddedChars(char,j){return{char:char,isNew:j>=indexOfFirstChange&&j<indexOfLastChange}})),k=rawValueLength-1;k>=0;k--){var char=rawValueArr[k];if(char!==settings.placeholderChar){var shouldOffset=k>=indexOfFirstChange&&prevMaskResultLength===maskLength;char===settings.placeholder[shouldOffset?k-editDistance:k]&&rawValueArr.splice(k,1)}}placeholderLoop:for(var l=0;l<placeholderLength;l++){var charInPlaceholder=settings.placeholder[l];if(charInPlaceholder===placeholderChar){if(rawValueArr.length>0)for(;rawValueArr.length>0;){var rawValueChar=rawValueArr.shift();if(rawValueChar.char===placeholderChar&&!0!==suppressGuide){resultStr+=placeholderChar;continue placeholderLoop}if(mask[l].test(rawValueChar.char)){if(!0===settings.keepCharacterPositions&&!1!==rawValueChar.isNew&&settings.previousMaskResult!==masks.EMPTY_STRING&&!1!==settings.guide&&isAddition){for(var rawValueArrLength=rawValueArr.length,indexOfNextAvailablePlaceholderChar=null,x=0;x<rawValueArrLength;x++){var charData=rawValueArr[x];if(charData.char!==placeholderChar&&!1===charData.isNew)break;if(charData.char===placeholderChar){indexOfNextAvailablePlaceholderChar=x;break}}null!==indexOfNextAvailablePlaceholderChar?(resultStr+=rawValueChar.char,rawValueArr.splice(indexOfNextAvailablePlaceholderChar,1)):l--}else resultStr+=rawValueChar.char;continue placeholderLoop}charactersRejected=!0}!1===suppressGuide&&(resultStr+=settings.placeholder.substr(l,placeholderLength));break}resultStr+=charInPlaceholder}if(suppressGuide&&!1===isAddition){for(var indexOfLastFilledPlaceholderChar=null,m=0;m<resultStr.length;m++)settings.placeholder[m]===placeholderChar&&(indexOfLastFilledPlaceholderChar=m);resultStr=null!==indexOfLastFilledPlaceholderChar?resultStr.substr(0,indexOfLastFilledPlaceholderChar+1):masks.EMPTY_STRING}return{caretPos:caretPos,caretTrapIndexes:settings.caretTrapIndexes,conformedValue:resultStr,charactersRejected:charactersRejected,placeholder:settings.placeholder,placeholderChar:placeholderChar,maskResult:!0}},_processCaretTraps:function _processCaretTraps(mask){for(var indexes=[],indexOfCaretTrap=mask.indexOf(masks.CARET_TRAP);-1!==indexOfCaretTrap;)indexes.push(indexOfCaretTrap),mask.splice(indexOfCaretTrap,1),indexOfCaretTrap=mask.indexOf(masks.CARET_TRAP);return{maskWithoutCaretTraps:mask,indexes:indexes}},_convertMaskToPlaceholder:function _convertMaskToPlaceholder(mask,placeholderChar){if(Array.isArray(mask)||(mask=[]),placeholderChar||(placeholderChar=masks.PLACEHOLDER_CHAR),-1!==mask.indexOf(placeholderChar))throw new Error("".concat("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is:").concat(JSON.stringify(placeholderChar),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(mask)));return mask.map((function(char){return char instanceof RegExp?placeholderChar:char})).join(masks.EMPTY_STRING)},adjustCaretPosition:function adjustCaretPosition(opts){if(0===opts.caretPos)return 0;function nonPlaceholderFilter(char){return char!==nonPlaceholderFilter}var rawValueLength=opts.rawValue.length,previousConformedValueLength=opts.previousMaskResult.length,placeholderLength=opts.placeholder?opts.placeholder.length:0,conformedValueLength=opts.conformedValue?opts.conformedValue.length:0,editLength=rawValueLength-previousConformedValueLength,isAddition=editLength>0;if(editLength>1&&!isAddition&&!(0===previousConformedValueLength))return opts.caretPos;var trackRightCharacter,targetChar,startingSearchIndex=0;if(isAddition&&(opts.previousMaskResult===opts.conformedValue||opts.conformedValue===opts.placeholder))startingSearchIndex=opts.caretPos-editLength;else{var normalizedConformedValue=opts.conformedValue.toLowerCase(),intersection=opts.rawValue.toLowerCase().substr(0,opts.caretPos).split(masks.EMPTY_STRING).filter((function(char){return-1!==normalizedConformedValue.indexOf(char)}));targetChar=intersection[intersection.length-1];var previousLeftMaskChars=opts.previousPlaceholder.substr(0,intersection.length).split(masks.EMPTY_STRING).filter(nonPlaceholderFilter).length,masklengthChanged=opts.placeholder.substr(0,intersection.length).split(masks.EMPTY_STRING).filter(nonPlaceholderFilter).length!==previousLeftMaskChars,targetIsMaskMovingLeft=void 0!==opts.previousPlaceholder[intersection.length-1]&&void 0!==opts.placeholder[intersection.length-2]&&opts.previousPlaceholder[intersection.length-1]!==opts.placeholderChar&&opts.previousPlaceholder[intersection.length-1]!==opts.placeholder[intersection.length-1]&&opts.previousPlaceholder[intersection.length-1]===opts.placeholder[intersection.length-2];!isAddition&&(masklengthChanged||targetIsMaskMovingLeft)&&previousLeftMaskChars>0&&opts.placeholder.indexOf(targetChar)>-1&&void 0!==opts.rawValue[opts.caretPos]&&(trackRightCharacter=!0,targetChar=opts.rawValue[opts.caretPos]);var pipedChars=[];opts.indexesOfPipedChars&&(pipedChars=opts.indexesOfPipedChars.map((function(index){return normalizedConformedValue[index]})));for(var countTargetCharInPipedChars=pipedChars.filter((function(char){return char===targetChar})).length,countTargetCharInIntersection=intersection.filter((function(char){return char===targetChar})).length,requiredNumberOfMatches=opts.placeholder.substr(0,opts.placeholder.indexOf(opts.placeholderChar)).split(masks.EMPTY_STRING).filter((function(char,index){return char===targetChar&&opts.rawValue[index]!==char})).length+countTargetCharInIntersection+countTargetCharInPipedChars+(trackRightCharacter?1:0),numberOfEncounteredMatches=0,i=0;i<conformedValueLength;i++){if(startingSearchIndex=i+1,normalizedConformedValue[i]===targetChar&&numberOfEncounteredMatches++,numberOfEncounteredMatches>=requiredNumberOfMatches)break}}if(isAddition)for(var lastPlaceholderChar=startingSearchIndex,j=startingSearchIndex;j<=placeholderLength;j++){if(!opts.placeholder)return lastPlaceholderChar;if(opts.placeholder[j]===opts.placeholderChar&&(lastPlaceholderChar=j),opts.placeholder[j]===opts.placeholderChar||-1!==opts.caretTrapIndexes.indexOf(j)||j===placeholderLength)return lastPlaceholderChar}else if(trackRightCharacter){for(var k=startingSearchIndex-1;k>=0;k--)if(opts.conformedValue[k]===targetChar||-1!==opts.caretTrapIndexes.indexOf(k)||0===k)return k}else for(var l=startingSearchIndex;l>=0;l--)if(opts.placeholder[l-1]===opts.placeholderChar||-1!==opts.caretTrapIndexes.indexOf(l)||0===l)return l},_convertPatternFromString:function _convertPatternFromString(pattern,defs){var char,idx,arr=[],legacyKeys=Object.keys(defs);for(var i=0;i<pattern.length;i++)arr.push((char=pattern[i],idx=void 0,(idx=legacyKeys.indexOf(char))>-1&&(char=defs[legacyKeys[idx]]),char));return arr}};var DEFAULT_MASK_INPUT_OPTIONS={definitions:void 0,guide:!1,keepCharacterPositions:!1,maskAPI:MaskAPI,locale:null,pattern:void 0,patternOptions:{},placeholderChar:"_",pipe:void 0,process:void 0,processOnBlur:!0,processOnInitialize:!0};function MaskInput(element,settings){return this.element=element,this.settings=utils.mergeSettings(this.element,settings,DEFAULT_MASK_INPUT_OPTIONS),this.init()}MaskInput.prototype={get type(){return this.element.type},init:function init(){this.setLocale()},build:function build(){this._replaceLegacySettings();if("string"==typeof this.settings.process)switch(this.settings.patternOptions.locale||(this.settings.patternOptions.locale=this.settings.locale),this.settings.process){case"number":this.settings.pattern=masks.numberMask,this.element.classList.add("is-number-mask");break;case"date":var datepicker=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions||this.settings.patternOptions.format||(this.settings.patternOptions.format=datepicker.settings.dateFormat)),this.settings.pattern=masks.dateMask;break;case"rangeDate":var _datepicker=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions.format=_datepicker.settings.dateFormat),this.settings.pattern=masks.rangeDateMask;break;default:this.element.classList.remove(["is-number-mask"].join(" "))}return this.mask=new this.settings.maskAPI(this.settings),this.state={previousMaskResult:""},this.handleEvents(),this.settings.processOnInitialize&&this.process(),this},setLocale:function setLocale(){var _this=this;this.locale=Locale.currentLocale,this.settings.locale?Locale.getLocale(this.settings.locale).done((function(locale){_this.locale=Locale.cultures[locale],_this.build()})):this.build()},handleEvents:function handleEvents(){var self=this;return this.changeEventHandler=function(){self.hasTriggeredChangeEvent=!0},this.element.addEventListener("change",this.changeEventHandler),this.focusEventHandler=function(){self.state.previousMaskResult=self.element.value,self.state.initialValue=self.element.value},this.element.addEventListener("focus",this.focusEventHandler),this.inputEventHandler=function(e){return self.hasTriggeredChangeEvent=!1,self.process(e)},this.element.addEventListener("input",this.inputEventHandler),this.blurEventHandler=function(e){if(!0===this.processingJustHappenedOnInput)return e.preventDefault(),!1;if(self.settings.processOnBlur){if(self.element.readOnly)return e.preventDefault(),!1;!self._hasChangedValue()||!self._isEdgeIE()&&self.hasTriggeredChangeEvent||($(self.element).trigger("change"),self.hasTriggeredChangeEvent=!0)}return delete self.state.initialValue,self.process(e)},this.element.addEventListener("blur",this.blurEventHandler),this},process:function process(e){if(!this.settings.pattern)return!0;var api=this.mask,patternOptions=this.settings.patternOptions||{},definedDecimal=".";this.locale&&this.locale.data&&this.locale.data.numbers&&this.locale.data.numbers.decimal&&(definedDecimal=this.locale.data.numbers.decimal),patternOptions.symbols&&patternOptions.symbols.decimal&&(definedDecimal=patternOptions.symbols.decimal),api.pattern||api.configure({pattern:this.settings.pattern,patternOptions:patternOptions});var rawValue=this.element.value,numberInputCorrections=!1;if(e&&"input"===e.type&&"insertText"===e.inputType&&(""===rawValue?(rawValue=this.state.previousMaskResult,numberInputCorrections=!0):e.data===definedDecimal&&rawValue.indexOf(definedDecimal)>-1&&(numberInputCorrections=!0)),rawValue===this.state.previousMaskResult)return numberInputCorrections&&(this.element.value="",this.element.value="".concat(rawValue)),!1;var posBegin=this.element.selectionStart||0,posEnd=this.element.selectionEnd||0;this._isAndroid()&&""===this.state.previousMaskResult&&posBegin!==posEnd&&(utils.safeSetSelection(rawValue.length,rawValue.length),posBegin=rawValue.length,posEnd=rawValue.length),rawValue=this._getSafeRawValue(rawValue);var opts={guide:this.settings.guide,keepCharacterPositions:this.settings.keepCharacterPositions,patternOptions:this.settings.patternOptions,placeholderChar:this.settings.placeholderChar,previousMaskResult:this.state.previousMaskResult,selection:{start:posBegin,end:posEnd}};posBegin!==posEnd&&(opts.selection.contents=rawValue.substring(posBegin,posEnd)),"function"==typeof this.settings.pipe&&(opts.pipe=this.settings.pipe);var processed=api.process(rawValue,opts);if(!processed.maskResult)return processed.maskResult;var finalValue=processed.pipedValue?processed.pipedValue:processed.conformedValue;""!==finalValue&&patternOptions&&patternOptions.suffix&&finalValue.indexOf(patternOptions.suffix)<0&&(finalValue+=this.settings.patternOptions.suffix),opts.patternOptions&&opts.patternOptions.delimeter&&finalValue&&finalValue!==rawValue&&(rawValue=finalValue);var adjustCaretOpts={previousMaskResult:this.state.previousMaskResult||"",previousPlaceholder:this.state.previousPlaceholder||"",conformedValue:finalValue,placeholder:processed.placeholder,rawValue:rawValue,caretPos:processed.caretPos,placeholderChar:this.settings.placeholderChar};processed.pipedCharIndexes&&(adjustCaretOpts.indexesOfPipedChars=processed.pipedCharIndexes),processed.caretTrapIndexes&&(adjustCaretOpts.caretTrapIndexes=processed.caretTrapIndexes),processed.caretPos=api.adjustCaretPosition(adjustCaretOpts);var previousValue=this.state.previousMaskResult;return this.state.previousMaskResult=finalValue,this.state.previousPlaceholder=processed.placeholder,"firefox"===Environment.browser.name?this.element.value!==finalValue&&(this.element.value=finalValue):this.element.value=finalValue,utils.safeSetSelection(this.element,processed.caretPos),previousValue!==finalValue&&($(this.element).trigger("write.mask",[finalValue]),processed.maskResult)},_isAndroid:function _isAndroid(){return"android"===(Environment&&Environment.os&&Environment.os.name?Environment.os.name:"")},_isEdgeIE:function _isEdgeIE(){var browser=Environment&&Environment.browser&&Environment.browser.name?Environment.browser.name:"";return"ie"===browser||"edge"===browser},_hasChangedValue:function _hasChangedValue(){return!(this.state&&this.state.previousMaskResult||""===this.state.previousMaskResult)||this.state.previousMaskResult!==this.state.initialValue},_getSafeRawValue:function getSafeRawValue(inputValue){if(utils.isString(inputValue))return inputValue;if(utils.isNumber(inputValue))return String(inputValue);if(null==inputValue)return"";throw new Error("".concat('The "value" provided to the Masked Input needs to be a string or a number. The value received was:\n\n').concat(JSON.stringify(inputValue)))},_replaceLegacySettings:function _replaceLegacySettings(){var modes=["group","number","date","time"];this.settings.patternOptions=this.settings.patternOptions||{},this.settings.patternOptions.symbols=this.settings.patternOptions.symbols||{};var html5DataMask=this.element.getAttribute("data-mask")||!1;"string"==typeof html5DataMask&&html5DataMask.length&&(this.settings.pattern=html5DataMask);var html5DataMaskMode=this.element.getAttribute("data-mask-mode")||!1;if(html5DataMaskMode&&modes.indexOf(html5DataMaskMode)>-1&&(this.settings.mode=html5DataMaskMode),this.settings.mode&&(-1===modes.indexOf(this.settings.mode)&&delete this.settings.mode,"group"===this.settings.mode?this.settings.process=void 0:"date"===this.settings.mode?this.settings.process="date":this.settings.process=this.settings.mode,delete this.settings.mode),"number"===this.settings.process){this.settings.thousandsSeparator&&(this.settings.patternOptions.allowThousandsSeparator=this.settings.thousandsSeparator,delete this.settings.thousandsSeparator);var html5DataThousands=this.element.getAttribute("data-thousands")||!1;if(html5DataThousands&&(this.settings.patternOptions.allowThousandsSeparator="true"===html5DataThousands),"string"==typeof this.settings.pattern){var allowNegative=-1!==this.settings.pattern.indexOf("-");allowNegative&&(this.settings.patternOptions.allowNegative=allowNegative,this.settings.patternOptions.symbols.negative="-");var group=Locale.currentLocale.data.numbers?Locale.currentLocale.data.numbers.group:",",thousandsSep=this.settings.patternOptions&&this.settings.patternOptions.symbols&&this.settings.patternOptions.symbols.thousands?this.settings.patternOptions.symbols.thousands:group,hasThousandsInPattern=-1!==this.settings.pattern.indexOf(thousandsSep);this.settings.patternOptions.allowThousandsSeparator=hasThousandsInPattern,hasThousandsInPattern&&(this.settings.patternOptions.symbols.thousands=thousandsSep);var decimal="string"==typeof this.settings.patternOptions.symbols.decimal?this.settings.patternOptions.symbols.decimal:".",decimalParts=this.settings.pattern.split(decimal);this.settings.patternOptions.integerLimit=decimalParts[0].replace(/[^#0]/g,"").length,decimalParts[1]&&(this.settings.patternOptions.allowDecimal=!0,this.settings.patternOptions.decimalLimit=decimalParts[1].toString().replace(/[^#0]/g,"").length,this.settings.patternOptions.symbols.decimal||(this.settings.patternOptions.symbols.decimal=decimal))}}var html5DataMustComplete=this.element.getAttribute("data-must-complete")||!1;html5DataMustComplete&&(this.settings.mustComplete=html5DataMustComplete),this.element.getAttribute("data-show-currency")&&(this.settings.showSymbol="currency");var symbol,s,symbolSetting=this.settings.showSymbol;if(["currency","percent"].indexOf(symbolSetting)>-1){symbol="currency"===(s=this.settings.showSymbol)?{char:Locale.currentLocale.data.currencySign,format:Locale.currentLocale.data.currencyFormat}:"percent"===s?{char:Locale.currentLocale.data.numbers.percentSign,format:Locale.currentLocale.data.numbers.percentFormat}:{};var replacementRegex,symbolWithWhitespace,placementType,detectableSymbol="currency"===symbolSetting?"¤":symbol.char,match=new RegExp(detectableSymbol,"g").exec(symbol.format),index=-1;if(match&&match.length){if(0===(index=symbol.format.indexOf(match[0])))placementType="prefix",replacementRegex=new RegExp("[^".concat(detectableSymbol,"]\\S"),"g"),symbolWithWhitespace=symbol.format.replace(replacementRegex,"");else if(index>0){for(placementType="suffix",replacementRegex=new RegExp("\\S[^".concat(detectableSymbol,"]"),"g");/\s/.test(symbol.format.charAt(index-1));)--index;symbolWithWhitespace=symbol.format.substr(index).replace(replacementRegex,"")}"currency"===symbolSetting&&(symbolWithWhitespace=symbolWithWhitespace.replace("¤",symbol.char)),this.settings.patternOptions[placementType]=symbolWithWhitespace}}},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),this.teardown().init()},teardown:function teardown(){return"number"===this.settings.process&&this.element.classList.remove("is-number-mask"),this.element.removeEventListener("focus",this.focusEventHandler),delete this.focusEventHandler,this.element.removeEventListener("input",this.inputEventHandler),delete this.inputEventHandler,this.blurEventHandler&&(this.element.removeEventListener("blur",this.blurEventHandler),delete this.blurEventHandler),this.changeEventHandler&&(this.element.removeEventListener("change",this.changeEventHandler),delete this.changeEventHandler),this}},$.fn.maskinput=function(settings){return this.each((function(){var instance=$.data(this,"mask");instance?instance.updated(settings):(instance=$.data(this,"mask",new MaskInput(this,settings))).destroy=function(){this.teardown(),$.removeData(this.element,"mask")}}))},$.fn.maskedinput=$.fn.maskinput,$.fn.mask=$.fn.maskinput;var POPUPMENU_DEFAULTS={menu:null,trigger:"click",autoFocus:!0,mouseFocus:!0,attachToBody:!0,removeOnDestroy:!1,beforeOpen:null,ariaListbox:!1,eventObj:void 0,returnFocus:!0,showArrow:null,triggerSelect:!0,placementOpts:new PlacementObject({containerOffsetX:10,containerOffsetY:"ios"===Environment.os.name?25:15,strategies:["flip","shrink"]}),offset:{x:0,y:0},predefined:$(),duplicateMenu:null,stretchToWidestMenuItem:!1};function PopupMenu(element,settings){this.settings=utils.mergeSettings(element,settings,POPUPMENU_DEFAULTS),this.element=$(element),this.init()}PopupMenu.prototype={init:function init(){this.isFirefox="firefox"===Environment.browser.name,this.setup(),this.addMarkup(),this.handleEvents(),this.iconFilteringSetup(),"immediate"===this.settings.trigger&&this.open(this.settings.eventObj),this.menu.find(".submenu").length&&this.menu.addClass("has-submenu")},isRTL:function isRTL(){return Environment.rtl},get isOpen(){return DOM.hasClass(this.element[0],"is-open")},setup:function setup(){this.element.attr("data-popupmenu")&&!this.settings.menu&&(this.settings.menu=this.element.attr("data-popupmenu").replace(/#/g,"")),this.settings.menuId&&(this.settings.menu=this.settings.menuId,this.settings.menuId=void 0),this.id||(this.id=(parseInt($(".popupmenu-wrapper").length,10)+1).toString()),this.predefinedItems=$().add(this.settings.predefined)},setMenuOrgContainment:function setMenuOrgContainment(menu){if(menu&&menu.length){var parent=menu.parent();parent.is("body")||(this.menuOrgContainment={parent:parent,index:parent.children().index(menu)})}},insertAtContainment:function insertAtContainment(elem,containment){var isEl=function isEl(el){return el&&el.length};if(containment=containment||this.menuOrgContainment||{},isEl(elem)&&isEl(containment.parent)){var index=containment.index,parent=containment.parent,lastIndex=parent.children().length;index<0&&(index=Math.max(0,lastIndex+1+index)),index<lastIndex?parent.children().eq(index).before(elem):parent.append(elem)}},addMarkup:function addMarkup(){var id,duplicateMenu,triggerId;if(!this.menu||!this.menu.length)switch(_typeof(this.settings.menu)){case"string":id=this.settings.menu,this.menu=$("#".concat(this.settings.menu)),this.settings.duplicateMenu&&this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.menu.data("trigger",this.element),triggerId=this.menu.data("trigger")[0].id,duplicateMenu=this.menu.clone(),this.setMenuOrgContainment(duplicateMenu),duplicateMenu.detach().appendTo("body"),duplicateMenu.attr("data-trigger",triggerId),this.menu.attr("data-trigger",triggerId));break;case"object":null===this.settings.menu?this.menu=this.element.next(".popupmenu, .popupmenu-wrapper"):this.menu=$(this.settings.menu),(id=this.menu.attr("id"))&&""!==id||(this.menu.attr("id","popupmenu-".concat(this.id)),id=this.menu.attr("id"))}if(this.menu.is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu,this.menu=this.wrapper.children(".popupmenu").first()),this.menu.parent().is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu.parent()),0!==this.menu.length){this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.originalParent=this.menu.prev(),this.setMenuOrgContainment(this.menu),this.menu.detach().appendTo("body"),this.settings.duplicateMenu&&this.menu.attr("id","".concat(this.settings.menu,"-original"))),this.menu.is(".popupmenu")||this.menu.addClass("popupmenu").attr("role",this.settings.ariaListbox?"listbox":"menu"),this.menu.data("trigger",this.element),this.wrapper=this.menu.parent(".popupmenu-wrapper"),this.wrapper.length||(this.menu.wrap('<div class="popupmenu-wrapper"></div>'),this.wrapper=this.menu.parent(".popupmenu-wrapper")),this.wrapper.find("svg").each((function(){$(this).data("icon")||$(this).icon()})),0===this.wrapper.parents().filter((function scrollableFilter(){var c=this?this.style.overflow:null;return"auto"!==c&&"visible"!==c&&"scroll"!==c})).length&&(this.wrapper[0].style.position="absolute"),this.menu.find(".popupmenu").each((function(i,elem){var popup=$(elem);popup.parent().hasClass("wrapper")||popup.wrap('<div class="wrapper"></div>')}));var doSetArrow=!1,containerClass=this.element.parent().attr("class");if(!0===this.settings.showArrow)doSetArrow=!1;else if(null===this.settings.showArrow){var closestToolbar=this.element.closest(".toolbar"),closestMasthead=this.element.closest(".masthead");(this.element.hasClass("btn-menu")||this.element.hasClass("btn-actions")||this.element.hasClass("btn-icon")&&"#icon-more"===this.element.find("use").attr("href")||closestToolbar.length>0&&!closestToolbar.is(".formatter-toolbar")||closestMasthead.length>0||"colorpicker-menu"===this.settings.menu||this.element.is(".searchfield-category-button")||containerClass&&containerClass.indexOf("more")>=0||containerClass&&containerClass.indexOf("btn-group")>=0)&&(doSetArrow=!0)}if(doSetArrow){var arrow=$('<div class="arrow"></div>'),wrapper=this.menu.parent(".popupmenu-wrapper");0===wrapper.find(".arrow").length&&wrapper.addClass("bottom").append(arrow)}var addFieldShort=this.element.closest(".field-short").length>0||this.element.closest(".form-layout-compact").length>0;if(this.menu[addFieldShort?"addClass":"removeClass"]("popupmenu-short"),void 0!==containerClass&&this.element.closest(".masthead").not(".search-results .masthead").length>0&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.element.attr("aria-haspopup",!0),this.element.attr("aria-controls",id),this.markupItems(),this.menu.is(".hidden")&&this.menu.removeClass("hidden"),this.settings.stretchToWidestMenuItem){var btnStyle=window.getComputedStyle(this.element[0]),padding=0;btnStyle&&btnStyle.getPropertyValue("padding-left")&&(padding=parseInt(btnStyle.getPropertyValue("padding-left"),10)+parseInt(btnStyle.getPropertyValue("padding-right"),10)),this.element.width(parseInt(this.getMaxMenuWidth(),10)-padding)}}},renderItem:function renderItem(settings){if(void 0===settings)return"";var self=this;function wrapMenuItems(settingsArr){var items="";return settingsArr.forEach((function(menuObj){items+=self.renderItem(menuObj)})),items}if(Array.isArray(settings)){var items=wrapMenuItems(settings),template='<ul class="popupmenu">'.concat(items,"</ul>");return stringUtils.stripWhitespace(template)}var headingText="",sectionSelectClass="";if(void 0!==settings.separator)return settings.heading&&(headingText+='<li class="heading">'.concat(settings.heading,"</li>")),"single"===settings.nextSectionSelect?sectionSelectClass=" single-selectable-section":"multiple"===settings.nextSectionSelect&&(sectionSelectClass=" multi-selectable-section"),stringUtils.stripWhitespace('\n        <li class="separator'.concat(sectionSelectClass,'"></li>\n        ').concat(headingText,"\n      "));if(settings.menu){var menuId="";settings.menuId&&(menuId=' id="'.concat(settings.menuId,'"'));var iconsClass="";settings.hasIcons&&(iconsClass+=" has-icons");var _items="";return Array.isArray(settings.menu)&&(_items=wrapMenuItems(settings.menu)),settings.noMenuWrap?_items:stringUtils.stripWhitespace("\n        <ul".concat(menuId,' class="popupmenu').concat(iconsClass,'">\n          ').concat(_items,"\n        </ul>\n      "))}var disabledClass="",hiddenClass="",icon="",id="",selectableClass="",submenuClass="",submenu="",ddicon="";return settings.disabled&&(disabledClass+=" is-disabled"),!1===settings.visible&&(hiddenClass+=" hidden"),settings.id&&(id=' id="'.concat(settings.id,'"')),"single"===settings.selectable&&(selectableClass+=" is-selectable"),"multiple"===settings.selectable&&(selectableClass+=" is-multiselectable"),settings.icon&&(icon='<svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-'.concat(settings.icon,'"></use>\n      </svg>')),Array.isArray(settings.submenu)&&(submenuClass+=" submenu",submenu+=this.renderItem(settings.submenu),ddicon+='<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-dropdown"></use>\n      </svg>'),stringUtils.stripWhitespace('<li class="popupmenu-item'.concat(disabledClass).concat(hiddenClass).concat(selectableClass).concat(submenuClass,'">\n      <a').concat(id,' href="#">').concat(icon,"<span>").concat(settings.text,"</span>\n        ").concat(ddicon,"\n      </a>\n      ").concat(submenu,"\n    </li>"))},toData:function toData(settings){var data={},menu=[],self=this;(settings=settings||{}).contextElement||(settings.contextElement=this.menu),settings.contextElement instanceof HTMLElement&&(settings.contextElement=$(settings.contextElement)),settings.contextElement.is(".popupmenu-wrapper")&&(settings.contextElement=settings.contextElement.children("ul"));var idAttr=settings.contextElement.attr("id");idAttr&&idAttr.length&&(data.menuId="".concat(idAttr));var singleSelectable,multiSelectable,hasIcons=settings.contextElement.hasClass("has-icons");return data.hasIcons=hasIcons,settings.contextElement.children("li").each((function(i,item){var liData=function decodeListItem(item){var li=$(item),liData={};if(!li.hasClass("heading")){if(li.hasClass("separator")){liData.separator=!0,li.hasClass("single-selectable-section")&&(singleSelectable=!0,liData.nextSectionSelect="single"),li.hasClass("multi-selectable-section")&&(multiSelectable=!0,liData.nextSectionSelect="multiple");var next=li.next();return next.hasClass("heading")&&(liData.heading=next.text().trim()),liData}var a=li.children("a"),icon=a.children(".icon:not(.close):not(.icon-dropdown)"),id=a.attr("id");liData.text=a.text().trim(),liData.disabled=li.hasClass("is-disabled"),liData.visible=!li.hasClass("hidden"),"string"==typeof id&&id.length&&(liData.id=id),icon.length&&icon[0]instanceof SVGElement&&(liData.icon=icon[0].querySelector("use").getAttribute("href").replace("#icon-",""));var notGloballySelectable=!singleSelectable&&!multiSelectable,noSelectableSections=!self.hasSelectableSeparator(li);liData.selectable&&notGloballySelectable&&noSelectableSections&&("single"===liData.selectable?singleSelectable=!0:"multiple"===liData.selectable&&(multiSelectable=!0),data.selectable=liData.selectable);var submenu=li.find(".popupmenu");return submenu.length&&(liData.submenu=[],submenu.first().children().each((function(i,submenuItem){var submenuLiData=decodeListItem(submenuItem);submenuLiData&&liData.submenu.push(submenuLiData)}))),liData}}(item);liData&&menu.push(liData)})),settings.noMenuWrap?data=menu:data.menu=menu,data},markupItems:function markupItems(contextElement){var self=this;contextElement?contextElement instanceof HTMLElement&&(contextElement=$(contextElement)):contextElement=this.menu;var lis=contextElement.find("li:not(.heading):not(.separator)"),hasIcons=!1;contextElement[0].setAttribute("role","menu"),lis.each((function(i,li){var a=$(li).children("a")[0],span=$(a).children("span")[0],submenu=$(li).children("ul")[0],icon=$(li).find(".icon:not(.close):not(.icon-dropdown)"),submenuWrapper=$(li).children(".wrapper")[0];if(li.setAttribute("role",self.settings.ariaListbox?"option":"menuitem"),a){a.setAttribute("tabindex","-1");var $a=$(a),$li=$(li);if($li.hasClass("is-disabled")||"true"===a.getAttribute("disabled")||"disabled"===a.getAttribute("disabled")?($li.addClass("is-disabled"),a.setAttribute("aria-disabled","true"),a.setAttribute("disabled",!0)):($li.removeClass("is-disabled"),$a.removeAttr("aria-disabled"),a.removeAttribute("disabled")),submenu instanceof HTMLElement&&submenu.classList.add("popupmenu"),submenuWrapper instanceof HTMLElement&&(li.className+="".concat(DOM.classNameExists(li)?" ":"","submenu"),(submenu=$(submenuWrapper).children("ul")[0])instanceof HTMLElement&&submenu.classList.add("popupmenu")),DOM.hasClass(li,"submenu")&&(span||(a.innerHTML="<span>".concat(a.innerHTML,"</span>"),span=$a.children("span")[0]),0===$a.find("svg.arrow").length&&$a.append($.createIconElement({classes:["arrow","icon-dropdown"],icon:"dropdown"})),a.setAttribute("aria-haspopup","true")),DOM.hasClass(li,"is-checked")&&(a.setAttribute("role","menuitemcheckbox"),a.setAttribute("aria-checked",!0),!self.hasSelectableSeparator(li))){var selectableClassName="is-selectable";self.menu.is(".is-multiselectable")&&(selectableClassName="is-multiselectable"),self.getAdjacentSelectables(li).addClass(selectableClassName)}DOM.hasClass(li,"is-not-checked")&&(li.className=li.className.replace("is-not-checked",""),a.setAttribute("role","menuitemcheckbox"),a.removeAttribute("aria-checked"))}icon&&icon.length>0&&(hasIcons=!0)})),hasIcons?contextElement.addClass("has-icons"):contextElement.removeClass("has-icons")},refreshMenuItem:function refreshMenuItem(item,data,callback){if(item&&item instanceof HTMLElement&&data&&$(this.menu)[0].contains(item)){var itemIconUse,itemA=item.querySelector("a"),itemIcon=item.querySelector(".icon:not(.close):not(.icon-dropdown)");if(data.text&&itemA.innerText.trim()!==data.text&&(itemA.innerText="".concat(data.text)),!0===data.disabled?-1===item.className.indexOf("hidden")&&item.classList.add("is-disabled"):item.className.indexOf("is-disabled")>-1&&item.classList.remove("is-disabled"),!0===data.visible?item.className.indexOf("hidden")>-1&&item.classList.remove("hidden"):-1===item.className.indexOf("hidden")&&item.classList.add("visible"),data.icon?itemIcon&&((itemIconUse=itemIcon.querySelector("use"))&&itemIconUse.getAttribute("href").replace("#icon-","")!==data.icon&&itemIcon.remove(),itemIconUse.setAttribute("href","#icon-".concat(data.icon))):itemIcon&&itemIcon.remove(),data.submenu){item.classList.add("submenu");var submenuContainer=item.querySelector(".popupmenu");if(submenuContainer)for(var submenuItems=submenuContainer.children,j=0;j<data.submenu.length;j++)data.submenu[j].isSubmenuItem=!0,this.refreshMenuItem(submenuItems.item(j),data.submenu[j],callback)}"function"==typeof callback&&callback.apply(this,[item,data])}},handleEvents:function handleEvents(){var self=this,leftClick="rightClick"!==this.settings.trigger;function disableBrowserContextMenu(e){return e.stopPropagation(),e.preventDefault(),!1}function contextMenuHandler(e,isLeftClick){if(self.keydownThenClick)delete self.keydownThenClick;else{var btn=!0===isLeftClick?0:2;if(!(e.button>btn||self.element.is(":disabled"))){["android","ios"].indexOf(Environment.os.name)>-1&&(self.holdingDownClick=!0),function doOpen(e){if(self.element.hasClass("is-disabled"))return e.stopPropagation(),void e.preventDefault();var rightClick="rightClick"===self.settings.trigger;if(e.stopPropagation(),e.preventDefault(),rightClick&&self.menu.hasClass("is-open"))return self.close(),void self.open(e);self.menu.add(self.element).hasClass("is-open")?self.close():self.open(e)}(e)}}}if(!("immediate"===this.settings.trigger)&&(leftClick&&this.element.on("click.popupmenu",(function(e){contextMenuHandler(e,!0)})),!leftClick)){this.menu.parent().on("contextmenu.popupmenu",disableBrowserContextMenu);-1===["android","ios"].indexOf(Environment.os.name)?this.element.on("contextmenu.popupmenu",(function(e){disableBrowserContextMenu(e),contextMenuHandler(e)})):this.element.on("touchstart.popupmenu",(function(e){"ios"===Environment.os.name&&"INPUT"!==e.target.tagName&&e.preventDefault(),$(e.target).addClass("longpress-target")})).on("touchend.popupmenu",(function(e){$(e.target).removeClass("longpress-target")})).on("longpress.popupmenu",(function(e,originalE){self.openedWithTouch=!0,contextMenuHandler(originalE)}))}this.menu.off("dragstart.popupmenu").on("dragstart.popupmenu","a",(function(){return!1})),this.element.not(".autocomplete, ul").on("keydown.popupmenu",(function(e){switch(e.which){case 13:case 32:"click"===self.settings.trigger&&(self.keydownThenClick=!0,self.open(e));break;case 121:e.shiftKey&&self.open(e)}})).on("updated.popupmenu",(function(e,settings){e.stopPropagation(),self.updated(settings)}))},handleKeys:function handleKeys(){var self=this;this.menu.on("click.popupmenu","li",(function(e){var a=$(this).find("a");self.handleItemClick(e,a)}));var excludes="li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled):not(.is-placeholder)";this.settings.mouseFocus&&this.menu.on("mouseenter.popupmenu","li",(function(){self.highlight($(this).children("a"))})),setTimeout((function(){$(document).off("keydown.popupmenu.".concat(this.id)).on("keydown.popupmenu.".concat(this.id),(function(e){var key=e.which;if(27===key)return e.stopPropagation(),e.stopImmediatePropagation(),self.close(!0),!1;if(9===key&&(e.stopPropagation(),self.close(!0)),32===key){e.stopPropagation();var target=$(e.target),checkbox=target.find("input:checkbox");if(checkbox.length)return checkbox.trigger("click"),!0;var a=$();if(target.is(".tab")||target.parent().is(".tab")||target.is(".tab-more"))return e.preventDefault(),!0;if(target.is("li")&&(a=target.children("a")),target.is("a")&&(a=target),a.length)return a.trigger("click"),!0}var focus=self.menu.find(":focus");focus[0]||(focus=$(self.menu[0].querySelector(".is-focused a")));var getPrev,getNext,getLast,getFirst,isPicker="colorpicker-menu"===self.settings.menu,isAutocomplete=self.element.is(".autocomplete");37!==key||isAutocomplete||(e.stopPropagation(),e.preventDefault(),focus.closest(".popupmenu")[0]!==self.menu[0]&&focus.closest(".popupmenu").length>0&&(focus.closest(".popupmenu").removeClass("is-open").parent().parent().removeClass("is-submenu-open"),self.highlight(focus.closest(".popupmenu").parent().prev("a")))),getPrev=function getPrev(a){var prev;return a.parent().prevAll(excludes).each((function(){if(!prev){var li=$(this),targetA=li.children("a");li.is(".is-disabled")||!0===targetA.prop("disabled")||(prev=targetA)}})),prev||getFirst(a)},getFirst=function getFirst(a){var first=a.parent().prevAll(excludes).last(),targetA=first.children("a");return first.is(".is-disabled")||!0===targetA.prop("disabled")?getNext(targetA):targetA},getNext=function getNext(a){var next;return a.parent().nextAll(excludes).each((function(){if(!next){var li=$(this),targetA=li.children("a");li.is(".is-disabled")||!0===targetA.prop("disabled")||(next=targetA)}})),next||getFirst(a)},getLast=function getLast(a){var last=a.parent().nextAll(excludes).last(),targetA=last.children("a");return last.is(".is-disabled")||!0===targetA.prop("disabled")?getPrev(targetA):targetA};for(var rowCount=0,colors=self.menu.children(excludes),colorsLength=colors.length,currentOffsetTop=0,i=0;i<colorsLength;i++){var colorItem=colors[i];if(0===currentOffsetTop&&(currentOffsetTop=colorItem.offsetTop),colorItem.offsetTop!==currentOffsetTop)break;rowCount++}if(!isPicker&&38===key||isPicker&&key===(Locale.isRTL()?39:37)){if(e.stopPropagation(),e.preventDefault(),0===focus.parent().prevAll(excludes).length)return void(0===focus.length?self.highlight(self.menu.children(excludes).last().find("a")):self.highlight(getLast(focus)));self.highlight(getPrev(focus))}if(isPicker&&38===key&&(e.stopPropagation(),e.preventDefault(),focus.parent().prevAll(excludes).length>0&&self.highlight($(focus.parent().prevAll(excludes)[rowCount-1]).find("a"))),39!==key||isAutocomplete||(e.stopPropagation(),e.preventDefault(),focus.parent().hasClass("submenu")&&(self.openSubmenu(focus.parent()),self.highlight(focus.parent().find(".popupmenu a:first")))),!isPicker&&40===key||isPicker&&key===(Locale.isRTL()?37:39)&&!isAutocomplete){if(e.stopPropagation(),e.preventDefault(),0===focus.parent().nextAll(excludes).length)return void(0===focus.length?self.highlight(self.menu.children(excludes).first().find("a")):self.highlight(getFirst(focus)));self.highlight(getNext(focus))}if(isPicker&&40===key&&(e.stopPropagation(),e.preventDefault(),focus.parent().nextAll(excludes).length>0&&self.highlight($(focus.parent().nextAll(excludes)[rowCount-1]).find("a"))),self.isFirefox&&isAutocomplete&&!/37|39|38|40/.test(key)){self.element.triggerHandler(e),self.element[0].focus();var val=self.element[0].value;self.element[0].value="",self.element[0].value=val}}))}),1)},handleItemClick:function handleItemClick(e,anchor){var href=anchor.attr("href"),selectionResult=[anchor];return!(!e&&!anchor||!anchor.length)&&(anchor.parent().is(".submenu, .hidden, .is-disabled")||anchor[0].disabled?(e.preventDefault(),!1):!(anchor.find("input[checkbox]").length>0)&&(this.element.hasClass("btn-filter")&&(this.iconFilteringUpdate(anchor),e.preventDefault()),this.isSelectable(anchor.parent())&&(selectionResult=this.select(anchor)),anchor.parent().hasClass("is-toggleable")&&anchor.parent().toggleClass("is-checked"),e&&this.settings.triggerSelect&&(1===selectionResult.length&&selectionResult.push(void 0),selectionResult.push(!0),this.element.triggerHandler("selected",selectionResult)),!(!this.menu.hasClass("is-multiselectable")&&!this.isInMultiselectSection(anchor))||(this.close(),!!this.element.is(".autocomplete")||(href&&"#"!==href.charAt(0)?("_blank"===anchor.attr("target")?window.open(href,"_blank"):window.location.href=href,!0):(e&&(e.preventDefault(),e.stopPropagation()),!0)))))},iconFilteringSetup:function iconFilteringSetup(alink){if(this.element.hasClass("btn-filter")){var svg=this.element.find("svg.icon-dropdown"),link=alink||$("li.is-checked a",this.menu)||$("li:first a",this.menu),audibleText=link.find("span").text();1===svg.length&&this.element.append($.createIconElement({classes:"icon-dropdown",icon:"dropdown"})),svg.first().changeIcon(link.find("svg").getIconName()),this.element.find(".audible").text(audibleText)}},iconFilteringUpdate:function iconFilteringUpdate(alink){if(this.element.hasClass("btn-filter")){var link=alink||$("li.is-checked a",this.menu)||$("li:first a",this.menu),audibleText=link.find("span").text();this.element.find(".audible").text(audibleText),this.element.find("svg:not(.ripple-effect):first").changeIcon(link.find("svg").getIconName())}},getPositionFromEvent:function getPositionFromEvent(e){var x=0,y=0;if(e||(e=window.event),!e)return{};if(e.changedTouches){var touch=e.changedTouches[0];x=touch.pageX,y=touch.pageY}else e.pageX||e.pageY?(x=e.pageX,y=e.pageY):(e.clientX||e.clientY)&&(x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);return{x:x,y:y}},position:function position(e){var self=this,target=this.element,isRTL=this.isRTL(),wrapper=this.menu.parent(".popupmenu-wrapper"),mouse=this.getPositionFromEvent(e),menuDimensions_width=this.menu[0].offsetWidth;this.menu[0].offsetHeight;if(wrapper.length){var elemWidth=this.element[0].offsetWidth;"click"===this.settings.trigger&&elemWidth>menuDimensions_width&&this.menu.width(elemWidth),target.is("svg, .icon")&&target.closest(".tab").length&&(target=target.closest(".tab")),wrapper.find(".arrow").removeAttr("style");var opts=$.extend({},this.settings.placementOpts),strategies=["flip"];strategies.push("shrink-y"),opts.strategies=strategies,"immediate"===this.settings.trigger&&this.settings.eventObj||"rightClick"===this.settings.trigger?(opts.x=getCoordinates(0,"x")-(isRTL?menuDimensions_width:0)+(isRTL?-1:1)*this.settings.offset.x,opts.y=getCoordinates(0,"y")+this.settings.offset.y,0===opts.x&&0===opts.y&&(opts.x=this.settings.offset.x||0,opts.y=this.settings.offset.y||0,opts.parent=this.element,opts.placement="bottom",opts.parentXAlignment=isRTL?"right":"left")):(opts.x=this.settings.offset.x||0,opts.y=this.settings.offset.y||0,opts.parent=this.element,opts.placement="bottom",opts.strategies.push("nudge"));var toolbarParent=target.parents(".toolbar"),insideToolbar=toolbarParent.length>0,insideToolbarTitle=target.parents(".title").length>0,isNotFullToolbar=insideToolbar&&toolbarParent.children(".buttonset, .title").length>1,isPagerMenu=target.parents(".pager-pagesize").length>0;!function doAlignment(){target.is(".btn-menu")?isPagerMenu?alignRight():insideToolbar&&isNotFullToolbar?insideToolbarTitle?alignLeft():alignRight():alignLeft():target.is(".btn-actions")||target.is(".tab-more")?alignRight():target.is(".btn-split-menu, .tab, .searchfield-category-button")&&!target.parent(".pager-pagesize").length&&alignLeft()}(),target.parents(".masthead").length>0&&function shiftDown(){opts.y+=15}();var container=this.element.parents(".page-container:not(.tab-container)");container.length&&(opts.container=container.first()),wrapper.one("afterplace.popupmenu",(function(thisE,positionObj){self.handleAfterPlace(thisE,positionObj)})),this.wrapperPlace=new Place(wrapper,opts),this.wrapperPlace.place(opts)}function getCoordinates(thisE,axis){return mouse[axis="x"===axis||"y"===axis?axis:"x"]}function alignLeft(){opts.parentXAlignment=isRTL?"right":"left"}function alignRight(){opts.parentXAlignment=isRTL?"left":"right"}},handleAfterPlace:function handleAfterPlace(e,placementObj){var wrapper=this.menu.parent(".popupmenu-wrapper");return this.wrapperPlace.setArrowPosition(e,placementObj,wrapper),placementObj.height&&(wrapper[0].style.height="",this.menu[0].style.height=placementObj.height+(/(px|%)/i.test("".concat(placementObj.height))?"":"px")),placementObj.width&&(wrapper[0].style.width="",this.menu[0].style.width=placementObj.width+(/(px|%)/i.test("".concat(placementObj.width))?"":"px")),wrapper.triggerHandler("popupmenuafterplace",[placementObj]),placementObj},callSource:function callSource(e,doOpen,contextElement,isSubmenu){if("function"==typeof this.settings.beforeOpen){var self=this,targetMenu=this.menu;if(!(DOM.isElement(contextElement)&&$(contextElement).is(".popupmenu, .submenu")&&(targetMenu=$(contextElement),contextElement.hasClass("is-open")))){var response=function response(content){if(targetMenu.children().filter((function(i,item){return-1===self.predefinedItems.index(item)})).off().remove(),!1===content)return!1;var newContent=$(content);targetMenu.append(newContent);var wrapper=targetMenu.parent(".wrapper, .popupmenu-wrapper");return wrapper.length||(wrapper=targetMenu.wrap('<div class="wrapper">').parent()),wrapper.removeAttr("style"),self.markupItems(targetMenu),doOpen&&(targetMenu.is(self.menu)?self.open(e,!0):self.openSubmenu(wrapper.parent("li"),!0)),!0},callbackOpts={};targetMenu.is(this.menu)||(callbackOpts.contextElement=targetMenu),callbackOpts.element=this.element,callbackOpts.isSubmenu=isSubmenu,"string"!=typeof this.settings.beforeOpen?this.settings.beforeOpen(response,callbackOpts):window[this.settings.beforeOpen](response,callbackOpts)}}},getMaxMenuWidth:function getMaxMenuWidth(){if(!(this.menu instanceof $))return 0;var wasOriginallyClosed=!this.isOpen;wasOriginallyClosed&&(this.wrapper.css({left:"-999999px"}),this.menu.addClass("is-open"));var width=this.menu.width();return wasOriginallyClosed&&(this.wrapper.css({left:""}),this.menu.removeClass("is-open")),width},open:function open(e,ajaxReturn,useDelay){var self=this;if(this.menu&&this.menu.length){if((this.element.hasClass("autocomplete")||!1!==this.element.triggerHandler("beforeopen",[this.menu]))&&(ajaxReturn||(this.callSource(e,!0),!this.settings.beforeOpen)))if(useDelay||"ios"!==Environment.os.name){$(".popupmenu.is-open").filter((function(){return 0===$(this).parents(".popupmenu").length})).not(this.menu).each((function(){var trigger=$(this).data("trigger");if(trigger&&trigger.length){var api=$(this).data("trigger").data("popupmenu");api&&"function"==typeof api.close&&api.close()}}));var tooltipAPI=this.element.data("tooltip");tooltipAPI&&tooltipAPI.visible&&tooltipAPI.hide();var openDropdown=$(".dropdown.is-open");if(openDropdown.length>0){var dropDownApi=openDropdown.parent().prev().data("dropdown");dropDownApi&&dropDownApi.closeList("cancel")}var openAppMenu=document.querySelector(".application-menu.is-open");openAppMenu instanceof HTMLElement&&!openAppMenu.contains(this.element[0])&&!openAppMenu.contains(this.menu[0])&&$(document).triggerHandler("dismiss-applicationmenu"),this.element.addClass("is-open"),this.menu.addClass("is-open").attr("aria-hidden","false"),this.element.hasClass("inverse")&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.position(e),utils.fixSVGIcons(this.menu),this.element.closest(".header").length>0&&(this.menu.parent()[0].style.zIndex="9001"),this.menu.find("a").each((function(){var a=$(this),li=a.parent();li.hasClass("is-disabled")?(li.addClass("is-disabled"),a.attr("aria-disabled","true"),a.attr("disabled","disabled")):(li.removeClass("is-disabled"),a.removeAttr("aria-disabled"),a.removeAttr("disabled"))})),setTimeout((function(){$(document).on("touchend.popupmenu.".concat(self.id," click.popupmenu.").concat(self.id),(function(thisE){var isPicker="colorpicker-menu"===self.settings.menu;2!==thisE.button&&(self.holdingDownClick?delete self.holdingDownClick:$(thisE.target).is(self.element)&&!isPicker&&"rightClick"!==self.settings.trigger||(0===$(thisE.target).closest(".popupmenu").length&&self.close(!0,"rightClick"===self.settings.trigger),$(thisE.target).hasClass("colorpicker")&&self.close()))})),void 0===window.orientation&&$("body").on("resize.popupmenu",(function(){self.handleCloseEvent()})),$(window).on("scroll.popupmenu",(function(){self.close()})),$(".datagrid-wrapper").on("scroll.popupmenu",(function(){self.close()})),$(".scrollable, .modal.is-visible .modal-body-wrapper").on("scroll.popupmenu",(function(){var delay=self.isInViewport(self.element[0])?0:150;setTimeout((function(){self.close()}),delay)})),self.element.triggerHandler("open",[self.menu])}),300),$("iframe").each((function(){var frame=$(this);frame.ready((function(){try{frame.contents().find("body").on("click.popupmenu",(function(){self.close()}))}catch(thisE){}}))})),this.handleKeys();var startY,menuToClose,tracker=0;self.menu.find(".popupmenu").removeClass("is-open"),self.menu.on("mouseenter.popupmenu touchend.popupmenu",".submenu:not(.is-disabled)",(function(thisE){if(!$(thisE.target).hasClass("popupmenu")){var menuitem=$(this);startY=thisE.pageX,clearTimeout(self.submenuOpenTimeout),self.submenuOpenTimeout=setTimeout((function(){self.openSubmenu(menuitem)}),300),$(document).on("mousemove.popupmenu.".concat(this.id),(function(documentE){tracker=documentE.pageX}))}})).on("mouseleave.popupmenu",".submenu",(function(){$(document).off("mousemove.popupmenu.".concat(this.id));var isLeft=((menuToClose=$(this).find("ul")).parent(".wrapper").length>0?parseInt(menuToClose.parent(".wrapper")[0].style.left,10):0)<0,canClose=tracker-startY<3.5;isLeft&&(canClose=tracker-startY>=0),canClose&&(menuToClose.removeClass("is-open").removeAttr("style"),menuToClose.parent(".wrapper").removeAttr("style"),menuToClose.parent().parent().removeClass("is-submenu-open"),menuToClose=null),clearTimeout(self.submenuOpenTimeout)})),self.settings.autoFocus&&setTimeout((function(){var excludes=":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)",selection=self.menu.children(excludes).find(".is-selected").children("a");selection.length||(selection=self.menu.children(excludes).first().children("a")),self.highlight(selection),self.element.triggerHandler("afteropen",[self.menu])}),1)}else setTimeout((function(){self.open(e,ajaxReturn,!0)}),400)}},isInViewport:function isInViewport(elem){var b=elem.getBoundingClientRect();return b.top>0&&b.left>0&&b.bottom<(window.innerHeight||document.documentElement.clientHeight)&&b.right<(window.innerWidth||document.documentElement.clientWidth)},handleCloseEvent:function handleCloseEvent(){this.holdingDownClick||this.close()},openSubmenu:function openSubmenu(li,ajaxReturn){if(!DOM.hasClass(li,"is-disabled")&&!li[0].disabled){var submenu=li.children(".wrapper, .popupmenu");submenu.length&&submenu.is(".wrapper")&&(submenu=submenu.children(".popupmenu"));var canOpen=this.element.triggerHandler("beforeopen",[submenu]);!1!==canOpen&&(!ajaxReturn&&(canOpen=this.callSource(null,!0,submenu,!0),this.settings.beforeOpen)||this.showSubmenu(li))}},showSubmenu:function showSubmenu(li){this.element.triggerHandler("show-submenu",[li]);var wrapper=li.children(".wrapper").filter(":first"),isRTL=this.isRTL();if(0===wrapper.length){var ul=li.children("ul").filter(":first");ul.wrap('<div class="wrapper"></div>'),wrapper=ul.parent()}var wrapperWidth,menu=wrapper.children(".popupmenu"),wrapperLeft=li.position().left+li.outerWidth();li.parent().find(".popupmenu").removeClass("is-open").removeAttr("style"),wrapper.children(".popupmenu").addClass("is-open"),wrapperWidth=wrapper.outerWidth(),isRTL&&(wrapperLeft=li.position().left-wrapperWidth),wrapper[0].style.left="".concat(wrapperLeft,"px"),wrapper[0].style.top="".concat(parseInt(li.position().top,10)-5,"px");var menuWidth=menu.outerWidth();if(wrapper.offset().left+menuWidth>$(window).width()+$(document).scrollLeft()||isRTL&&wrapper.offset().left<0){if(wrapper[0].style.left="-9999px",menuWidth=menu.outerWidth(),wrapperLeft=li.position().left-menuWidth,isRTL)wrapperLeft=wrapper.closest(".popupmenu").outerWidth()-4;if(wrapper[0].style.left="".concat(wrapperLeft,"px"),(wrapper.offset().left<0||isRTL&&wrapper.offset().left+menuWidth>$(window).width()+$(document).scrollLeft())&&(wrapperLeft=li.position().left-menuWidth+Math.abs(wrapper.offset().left)+40,isRTL&&(wrapperLeft=li.position().left-menuWidth-30),wrapper[0].style.left="".concat(wrapperLeft,"px"),menuWidth=menu.outerWidth()),wrapper.offset().left+menuWidth>$(window).width()+$(document).scrollLeft()||isRTL&&wrapper.offset().left<0)menuWidth-=wrapper.offset().left+menuWidth-($(window).width()+$(document).scrollLeft()),menu[0].style.width="".concat(menuWidth,"px")}var menuHeight=menu.outerHeight(),bottomBuffer=this.settings.placementOpts.containerOffsetY;if(wrapper.offset().top+menuHeight>window.innerHeight-bottomBuffer+$(document).scrollTop()){var differenceFromBottomY=wrapper.offset().top+menuHeight-(window.innerHeight+$(document).scrollTop());if(wrapper[0].style.top="".concat(wrapper.position().top-differenceFromBottomY-bottomBuffer,"px"),wrapper.offset().top+menuHeight>window.innerHeight+$(document).scrollTop()){var mainWrapperOffset=li.parents(".popupmenu-wrapper:first").offset().top;wrapper[0].style.top="".concat(window.innerHeight+$(document).scrollTop()-menuHeight-mainWrapperOffset,"px")}if(wrapper.offset().top-$(document).scrollTop()<0&&(wrapper[0].style.top=0,wrapper[0].style.top="".concat(-1*wrapper.offset().top,"px"),menuHeight=menu.outerHeight()),wrapper.offset().top+menuHeight>window.innerHeight+$(document).scrollTop())menuHeight=menuHeight-(wrapper.offset().top+menuHeight-(window.innerHeight+$(document).scrollTop()))-32,menu[0].style.height="".concat(menuHeight,"px")}li.parent().find(".is-submenu-open").removeClass("is-submenu-open"),li.addClass("is-submenu-open")},highlight:function highlight(anchor){if(anchor&&anchor.length){var li=anchor.parent();li.parent().children("li").removeClass("is-focused"),li.addClass("is-focused"),anchor&&anchor.focus(),li.closest(".header").scrollTop(0)}},select:function select(anchor){var singleMenu=this.menu.is(".is-selectable"),multipleMenu=this.menu.is(".is-multiselectable"),singleSection=this.isInSingleSelectSection(anchor),multipleSection=this.isInMultiselectSection(anchor),parent=anchor.parent(),returnObj=[anchor];return parent.hasClass("is-selectable")||singleMenu||singleSection?(parent.prevUntil(".heading, .separator").add(parent.nextUntil(".heading, .separator")).removeClass("is-checked"),parent.addClass("is-checked"),returnObj.push("selected"),returnObj):parent.hasClass("is-multiselectable")||multipleMenu||multipleSection?parent.hasClass("is-checked")?(parent.removeClass("is-checked"),returnObj.push("deselected"),returnObj):(parent.addClass("is-checked"),returnObj.push("selected"),returnObj):returnObj},getSelected:function getSelected(){return this.menu.is(".is-selectable, .is-multiselectable")?this.menu.children(".is-checked").children("a"):$()},isSelectable:function isSelectable(li){return $(li).is(".is-selectable, .is-multiselectable")||this.hasSelectableSeparator(li)||this.menu.hasClass("is-selectable")||this.menu.hasClass("is-multiselectable")},getSelectableSeparator:function getSelectableSeparator(li){return $(li).prevAll(".separator.single-selectable-section, .separator.multi-selectable-section").first()},hasSelectableSeparator:function hasSelectableSeparator(li){var sep=this.getSelectableSeparator(li);return sep&&sep.length},getAdjacentSelectables:function getAdjacentSelectables(li){var sep=this.getSelectableSeparator(li),exclusions=":not(.heading):not(.separator):not(.submenu)";return sep&&sep.length?$(sep).nextUntil(".separator").filter(exclusions):$(li).parent().children("li".concat(exclusions))},isInSelectableSection:function isInSelectableSection(anchor){warnAboutDeprecation("hasSelectableSeparator()","isInSelectableSection()");var separator=anchor.parent().prevAll().filter(".separator").first();return separator.hasClass("multi-selectable-section")||separator.hasClass("single-selectable-section")},isInSingleSelectSection:function isInSingleSelectSection(anchor){return anchor.parent().prevAll().filter(".separator").first().hasClass("single-selectable-section")},isInMultiselectSection:function isInMultiselectSection(anchor){return anchor.parent().prevAll().filter(".separator").first().hasClass("multi-selectable-section")},detach:function detach(){$(document).off("touchend.popupmenu.".concat(this.id," click.popupmenu.").concat(this.id," keydown.popupmenu")),$(window).off("scroll.popupmenu orientationchange.popupmenu"),$(".datagrid-wrapper").off("scroll.popupmenu"),$("body").off("resize.popupmenu"),$(".scrollable").off("scroll.popupmenu"),this.menu&&this.menu.length&&this.menu.off("click.popupmenu touchend.popupmenu touchcancel.popupmenu"),$("iframe").each((function(){var frame=$(this);try{frame.contents().find("body").off("click.popupmenu touchend.popupmenu touchcancel.popupmenu")}catch(e){}}))},close:function close(isCancelled,noFocus){if(isCancelled&&void 0!==isCancelled||(isCancelled=!1),this.menu&&this.menu.add(this.element).hasClass("is-open")){var wrapper=this.menu.parent(".popupmenu-wrapper"),menu=this.menu.find(".popupmenu");if(this.menu.removeClass("is-open").attr("aria-hidden","true"),this.menu[0]&&(this.menu[0].style.height="",this.menu[0].style.width=""),wrapper[0]&&(wrapper[0].style.left="-999px",wrapper[0].style.height="",wrapper[0].style.width=""),this.menu.find(".submenu").off(["mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),this.menu.find(".is-submenu-open").removeClass("is-submenu-open"),this.submenuOpenTimeout&&(clearTimeout(this.submenuOpenTimeout),delete this.submenuOpenTimeout),menu[0]&&(menu[0].style.left="",menu[0].style.top="",menu[0].style.height="",menu[0].style.width=""),this.menu.find(".is-focused").removeClass("is-focused"),$(document).off(["keydown.popupmenu.".concat(this.id),"click.popupmenu.".concat(this.id),"mousemove.popupmenu.".concat(this.id),"touchend.popupmenu.".concat(self.id)].join(" ")),this.menu.off(["click.popupmenu","touchend.popupmenu","touchcancel.popupmenu","mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),delete this.keydownThenClick,delete this.holdingDownClick,this.element.is("ul.popupmenu")&&this.element.closest(".popupmenu-wrapper").prev("button").removeClass("is-open"),this.menu.find(".popupmenu.is-open").removeClass("is-open"),this.element.removeClass("is-open").triggerHandler("close",[isCancelled]),this.detach(),"immediate"===this.settings.trigger&&this.destroy(),"INPUT"===this.element[0].tagName&&this.openedWithTouch)return this.element.removeClass("longpress-target"),void delete this.openedWithTouch;delete this.openedWithTouch,noFocus||!this.settings.returnFocus||Environment.features.touch||("function"!=typeof this.settings.returnFocus?document.activeElement&&"INPUT"===document.activeElement.tagName||this.element&&this.element.focus():this.settings.returnFocus(this,{triggerElement:this.element[0],menuElement:this.menu[0]}))}},teardown:function teardown(){var wrapper=this.menu.parent(".popupmenu-wrapper");this.ajaxContent&&this.ajaxContent.off().remove(),this.predefinedItems=$();var parentNode=this.menu.parent();parentNode.find(".arrow").remove(),parentNode.off("contextmenu.popupmenu"),this.element.hasClass("btn-actions")&&parentNode.removeClass("bottom"),this.menu.off("dragstart.popupmenu"),!this.preExistingWrapper&&this.menu.parent().is(".popupmenu-wrapper")&&this.menu.unwrap();var searchfield=this.element.parent().children(".searchfield");return searchfield.length?this.menu.insertAfter(searchfield.first()):this.menuOrgContainment?this.insertAtContainment(this.menu):this.menu.insertAfter(this.element),this.menu.find(".submenu").children("a").each((function(i,item){var text=$(item).find("span").text()||$(item).text();$(item).find("span, svg").remove(),$(item).text(text)})),this.menu.find(".submenu").removeClass("submenu"),this.menu.find(".popupmenu").each((function(){!function unwrapPopup(menu){menu.parent().is(".popupmenu-wrapper, .wrapper")&&menu.unwrap()}($(this))})),this.wrapperPlace&&(this.wrapperPlace.destroy(),delete this.wrapperPlace),wrapper.off().remove(),this.menu&&this.menu.length&&this.menu.data("trigger")&&$.removeData(this.menu[0],"trigger"),this.detach(),this.element.removeAttr("aria-controls").removeAttr("aria-haspopup").off("touchend.popupmenu touchcancel.popupmenu click.popupmenu keydown.popupmenu keypress.popupmenu contextmenu.popupmenu updated.popupmenu"),this},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element[0],settings,this.settings),this.teardown().init()},destroy:function destroy(){this.menu&&(this.close(),this.teardown(),this.menu.triggerHandler("destroy"),this.settings.removeOnDestroy&&this.menu&&this.menu.length&&(this.menu.off().remove(),delete this.menu),$.removeData(this.element[0],"popupmenu"))}},$.fn.popupmenu=function(settings){return this.each((function(){var instance=$.data(this,"popupmenu");instance?instance.updated(settings):instance=$.data(this,"popupmenu",new PopupMenu(this,settings))}))};var ABOUT_DEFAULTS={appName:"Infor Application Name",content:void 0,copyrightYear:(new Date).getFullYear(),deviceSpecs:!0,productName:void 0,useDefaultCopyright:!0,version:void 0};function About(element,settings){this.settings=utils.mergeSettings(element,settings,ABOUT_DEFAULTS),this.element=$(element),this.init()}About.prototype={init:function init(){return this.setup().build().handleEvents()},setup:function setup(){var appName=this.element.attr("data-appname");this.isBody=$(this.element).is("body"),this.settings.appName=void 0!==appName?appName.toString():this.settings.appName;var content=this.element.attr("data-about-content");this.settings.content=void 0!==content?content.toString():this.settings.content;var copyrightYear=this.element.attr("data-copyright-year");this.settings.copyrightYear=void 0!==copyrightYear?copyrightYear.toString():this.settings.copyrightYear;var deviceSpecs=this.element.attr("data-device-specs");deviceSpecs&&(this.settings.deviceSpecs="true"===deviceSpecs);var productName=this.element.attr("data-product-name");this.settings.productName=void 0!==productName?productName.toString():this.settings.productName;var useDefaultCopyright=this.element.attr("data-use-default");void 0!==useDefaultCopyright&&(this.settings.useDefaultCopyright="true"===useDefaultCopyright);var version=this.element.attr("data-version");return this.settings.version=void 0!==version?version.toString():this.settings.version,this.defaultCopyright="".concat(Locale.translate("AboutText"),' <a class="hyperlink" href="http://www.infor.com" target="_blank">www.infor.com</a>.'),this.defaultCopyright=this.defaultCopyright.replace("{0}",this.settings.copyrightYear),this},build:function build(){this.modal=$('<div class="modal about" id="about-modal"></div>'),$('<div class="modal-content"></div>').appendTo(this.modal);var header=$('<div class="modal-header"></div>').appendTo(this.modal.find(".modal-content"));$('<div class="close-container"></div>').append($('<button name="close" type="button" class="btn-icon hide-focus"></button>').append($.createIconElement({icon:"close",classes:"icon-close"})).append("<span>".concat(Locale.translate("Close"),"'</span>"))).appendTo(header),$.createIconElement({icon:"logo-trademark",classes:["icon","about-logo"]}).attr({viewBox:"0 0 44 44"}).appendTo(header),this.title=$('<h1 class="title"></h1>').text(this.settings.appName).appendTo(this.modal.find(".modal-header"));var body=$('<div class="modal-body"></div>').appendTo(this.modal.find(".modal-content"));if(this.settings.version||this.settings.productName){var productAndVersion=this.settings.productName?"".concat(this.settings.productName," ").concat(this.settings.version):"".concat(this.settings.version);$("<p></p>").text(productAndVersion).appendTo(body)}if(this.settings.content&&$('<div class="additional-content"></div>').html(this.settings.content).appendTo(body),!this.settings.useDefaultCopyright&&this.settings.content||$("<p></p>").html(this.defaultCopyright).appendTo(body),this.settings.deviceSpecs){var specs=this.getDeviceSpecs(),text='<span class="ds">'.concat(Locale.translate("OperatingSystem")," : ").concat(Environment.devicespecs.os.replace(Environment.devicespecs.currentOSVersion,"")," ").concat(Environment.devicespecs.currentOSVersion,'</span><br>\n        <span class="platform">').concat(Locale.translate("Platform")," : ").concat(specs.os,'</span><br>\n        <span class="ds">').concat(Locale.translate("Mobile")," : ").concat(Environment.devicespecs.isMobile,'</span><br>\n        <span class="locale">').concat(Locale.translate("Locale")," : ").concat(Locale.currentLocale.name,'</span><br>\n        <span class="locale">').concat(Locale.translate("Language")," : ").concat(Locale.currentLanguage.name,'</span><br>\n        <span class="browser">').concat(Locale.translate("Browser")," :"," ".concat(Environment.devicespecs.browserVersionName)," ").concat(Environment.devicespecs.currentBrowser," (").concat(Environment.devicespecs.browserVersion,')</span><br>\n        <span class="locale">').concat(Locale.translate("BrowserLanguage")," : ").concat(specs.locale,'</span><br>\n        <span class="cookiesEnabled">').concat(Locale.translate("CookiesEnabled")," : ").concat(specs.cookiesEnabled,'</span><br>\n        <span class="version">').concat(Locale.translate("Version")," : ").concat($("html").attr("data-sohoxi-version"),"</span><br>");$("<p></p>").html(text).appendTo(body)}return this.buttons=this.modal.find("button"),this.modal.find(".hide-focus").one("blur",(function(){$(this).removeClass("hide-focus")})),this.element.attr("data-modal","about-modal"),$(".modal-body",this.modal)[0].tabIndex=0,this.modal.appendTo("body"),this.modal.modal({trigger:this.isBody?"immediate":"click"}),this},getDeviceSpecs:function getDeviceSpecs(){var ua,result,M,locale="Microsoft Internet Explorer"===navigator.appName?navigator.userLanguage:navigator.language;return{browser:(ua=navigator.userAgent,result=[],M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(M[1])?(result=/\brv[ :]+(\d+)/g.exec(ua)||[],"IE '".concat(result[1])):"Chrome"===M[1]&&null!=(result=ua.match(/\b(OPR|Edge)\/(\d+)/))?result.slice(1).join(" ").replace("OPR","Opera"):(M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(result=ua.match(/version\/(\d+)/i))&&M.splice(1,1,result[1]),M.join(" "))),os:navigator.platform,cookiesEnabled:navigator.cookieEnabled,locale:locale}},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),this},close:function close(){var modalApi=this.modal.data("modal");modalApi&&modalApi.close(),this.isBody&&this.destroy()},destroy:function destroy(){var modalApi=this.modal.data("modal");modalApi&&(modalApi.element.off("beforeopen.about"),modalApi.destroy()),this.buttons.off(),this.element.off("open.about"),this.element.length>0&&$.removeData(this.element[0],"about")},handleEvents:function handleEvents(){var _this=this;return this.element.on("open.about",(function(e){e.stopPropagation(),_this.element.trigger("click")})),this.buttons.filter('[name="done"], [name="close"]').on("click.about",(function(){_this.close()})),this.modal.data("modal").element.on("beforeopen.about",(function(){_this.modal.find(".modal-body").scrollTop(0)})),$(document).on("keydown.about",(function(e){0!==e.which&&27!==e.which||_this.close()})),this}},$.fn.about=function(settings){return this.each((function(){var instance=$.data(this,"about");instance?instance.updated(settings):instance=$.data(this,"about",new About(this,settings))}))};var ANIMATE_OPEN_DEFAULTS={direction:"vertical",distance:"auto",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateOpen=function(settings){var eventName=$.fn.transitionEndName();return settings=utils.mergeSettings(void 0,settings,ANIMATE_OPEN_DEFAULTS),this.each((function(){var timeout,self=this,$self=$(this),dim="horizontal"===settings.direction?"width":"height",cDim=dim.charAt(0).toUpperCase()+dim.slice(1),distance=isNaN(settings.distance)?"auto":"".concat(parseInt(settings.distance,10),"px");function transitionEndCallback(){timeout&&clearTimeout(timeout),$self.data("ignore-animation-once")&&$.removeData($self[0],"ignore-animation-once"),$self.data("is-animating")&&$.removeData($self[0],"is-animating"),$self.off("".concat(eventName,".animateopen")),self.style.transition="",self.style[dim]=distance,$self.trigger("animateopencomplete")}$self.one("animateopenstart.animation",(function(e){e.stopPropagation(),$self.off("".concat(eventName,".animateopen"))})),$self.trigger("animateopenstart"),eventName&&$self.one("".concat(eventName,".animateopen"),transitionEndCallback),$self.data("is-animating",!0);var prevVal=this.style[dim];this.style[dim]=distance;var endVal=getComputedStyle(this)[dim];this.style[dim]=prevVal,this["offset".concat(cDim)],this.style.transition="".concat(dim," ").concat(settings.timing,"ms ").concat(settings.transition),timeout=setTimeout(transitionEndCallback,settings.timing),this.style[dim]=endVal,($self.is(":hidden")||$self.is(".no-transition")||$self.data("ignore-animation-once"))&&transitionEndCallback()}))};var ANIMATE_CLOSED_DEFAULTS={direction:"vertical",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateClosed=function(settings){var eventName=$.fn.transitionEndName();return settings=utils.mergeSettings(void 0,settings,ANIMATE_CLOSED_DEFAULTS),this.each((function(){var timeout,self=this,$self=$(this),dim="horizontal"===settings.direction?"width":"height",cDim=dim.charAt(0).toUpperCase()+dim.slice(1);function transitionEndCallback(){timeout&&clearTimeout(timeout),$self.data("ignore-animation-once")&&$.removeData($self[0],"ignore-animation-once"),$self.data("is-animating")&&$.removeData($self[0],"is-animating"),$self.off("".concat(eventName,".animatedclosed")),self.style.transition="",self.style[dim]="0px",$self.trigger("animateclosedcomplete")}$self.one("animateclosedstart",(function(e){e.stopPropagation(),$self.off("".concat(eventName,".animatedclosed"))})),$self.trigger("animateclosedstart"),eventName&&$self.one("".concat(eventName,".animatedclosed"),transitionEndCallback),$self.data("is-animating",!0),this.style[dim]=getComputedStyle(this)[dim],this["offset".concat(cDim)],this.style.transition="".concat(dim," ").concat(settings.timing,"ms ").concat(settings.transition),timeout=setTimeout(transitionEndCallback,settings.timing),this.style[dim]="0px",($self.is(":hidden")||$self.is(".no-transition")||$self.data("ignore-animation-once"))&&transitionEndCallback()}))},$.fn.isAnimating=function(){return this.each((function(){return!0===$(this).data("is-animating")}))};var expanderDisplayModes=["classic","plus-minus","chevron"],ACCORDION_DEFAULTS={allowOnePane:!0,expanderDisplay:expanderDisplayModes[0],enableTooltips:!0,rerouteOnLinkClick:!0,source:null};function handleDeprecatedSettings(settings){return void 0!==settings.displayChevron&&(warnAboutDeprecation("expanderDisplay setting","displayChevron setting"),!1===settings.displayChevron?settings.expanderDisplay=expanderDisplayModes[1]:settings.expanderDisplay=expanderDisplayModes[0],delete settings.displayChevron),settings}function Accordion(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,ACCORDION_DEFAULTS),this.settings=handleDeprecatedSettings(this.settings),this.init()}Accordion.prototype={init:function init(headers){this.build(headers).handleEvents(headers).setupTooltips()},build:function build(headers,noFilterReset){var anchors,panes,contentAreas,_this=this,self=this,isGlobalBuild=!0;headers&&headers instanceof jQuery?(anchors=headers.children("a"),contentAreas=(panes=headers.next(".accordion-pane")).children(".accordion-content"),isGlobalBuild=!1,this.headers=this.headers.add(headers),this.anchors=this.anchors.add(anchors),this.panes=this.panes.add(panes),this.contentAreas=this.contentAreas.add(contentAreas)):(this.headers=this.element.find(".accordion-header"),headers=this.element.find(".accordion-header"),this.anchors=headers.children("a"),anchors=this.anchors,this.panes=headers.next(".accordion-pane"),panes=this.panes,this.contentAreas=panes.children(".accordion-content"),contentAreas=this.contentAreas);var headersHaveIcons=!1;if(headers.each((function addExpander(){var header=$(this),hasIcons=!1,containerPane=header.parent(),isTopLevel=containerPane.is(".accordion");function checkIfIcons(){isTopLevel||(hasIcons?containerPane.addClass("has-icons"):header.addClass("no-icon"))}header.hideFocus(),header.children("a").find("svg").detach().insertBefore(header.children("a"));var outerIcon=header.children(".icon, svg");if(outerIcon.addClass("icon").attr({role:"presentation","aria-hidden":"true",focusable:"false"}),isTopLevel&&outerIcon.length&&(headersHaveIcons=!0),(header.is(".list-item")||!isTopLevel&&header.find("button").length||!isTopLevel&&header.find("svg").length)&&(hasIcons=!0),header.hasClass("is-disabled")&&header.children("a, button").attr("tabindex","-1"),header.next(".accordion-pane").length){hasIcons=!0;var expander=header.children(".btn");if(!expander.length){expander=$('<button class="btn" type="button"></button>');var method="insertBefore";"plus-minus"!==self.settings.expanderDisplay&&isTopLevel&&(header.addClass("has-chevron"),method="insertAfter"),expander[method](header.children("a")),header.data("addedExpander",expander)}expander.hideFocus(),outerIcon.length&&"plus-minus"===self.settings.expanderDisplay&&outerIcon.appendTo(expander);var expanderIcon=expander.children(".icon, .svg, .plus-minus");if(!expanderIcon.length){if("classic"===self.settings.expanderDisplay&&isTopLevel||"chevron"===self.settings.expanderDisplay)expanderIcon=$.createIconElement({icon:"caret-down",classes:["chevron"]});else{var isActive=self.isExpanded(header)?" active":"";expanderIcon=$('<span class="icon plus-minus'.concat(isActive,'" aria-hidden="true" role="presentation"></span>'))}expanderIcon.appendTo(expander)}var expanderIconOpts={role:"presentation","aria-hidden":"true"};expanderIcon.is("span")||(expanderIconOpts.focusable="false"),expanderIcon.attr(expanderIconOpts),expanderIcon.is(".chevron")&&isTopLevel?(header.addClass("has-chevron"),expander.insertAfter(header.children("a"))):(header.removeClass("has-chevron"),expander.insertBefore(header.children("a"))),"plus-minus"===self.settings.expanderDisplay&&isTopLevel&&(headersHaveIcons=!0),checkIfIcons();var description=expander.children(".audible");description.length||(description=$('<span class="audible"></span>').appendTo(expander)),description.text(Locale.translate("Expand"))}else checkIfIcons()})),headersHaveIcons&&this.element.addClass("has-icons"),isGlobalBuild&&!this.element.data("updating")){var targetsToExpand=headers.filter(".is-selected, .is-expanded");targetsToExpand.next(".accordion-pane").addClass("no-transition"),this.settings.allowOnePane?(targetsToExpand=targetsToExpand.first(),this.expand(targetsToExpand)):targetsToExpand.each((function(idx){_this.expand($(targetsToExpand[idx]))})),this.select(targetsToExpand.last()),targetsToExpand.next(".accordion-pane").removeClass("no-transition")}return panes.each((function addPaneARIA(){var pane=$(this),header=pane.prev(".accordion-header");header.children("a").attr({"aria-haspopup":"true",role:"button"});var children=pane.children(),allChildrenFiltered=!0;if(children.each((function(i,child){$(child).is(".accordion-header, .accordion-content")&&!$(child).hasClass("filtered")&&(allChildrenFiltered=!1)})),pane[allChildrenFiltered?"addClass":"removeClass"]("all-children-filtered"),allChildrenFiltered&&(pane.data("ignore-animation-once",!0),self.collapse(header,!1)),!noFilterReset){var heightAttr="0px";self.isExpanded(header)&&(heightAttr="auto"),pane.attr("style","height: ".concat(heightAttr))}})),noFilterReset||(this.currentlyFiltered=$()),this},handleHeaderClick:function handleHeaderClick(e,header){if(!header||!header.length||this.isDisabled(header)||this.isFiltered(header)||header.data("is-animating"))e.preventDefault();else{if(!$(e.target).is('[class^="btn"]')){var anchor=header.children("a");return this.handleAnchorClick(e,anchor)}e.preventDefault()}},handleAnchorClick:function handleAnchorClick(e,anchor){var self=this,header=anchor.parent(".accordion-header"),pane=header.next(".accordion-pane"),ngLink=anchor.attr("ng-reflect-href");if(e&&!ngLink&&e.preventDefault(),!header.length||this.isDisabled(header)||this.isFiltered(header))return!1;if(!1!==this.element.triggerHandler("beforeselect",[anchor]))return this.originalSelection=anchor,this.select(anchor),this.closePopups(e),function followLink(){var href=anchor.attr("href");return!(!href||""===href||"#"===href)&&(!self.settings.rerouteOnLinkClick||(window.location.href=href,!0))}()?(this.element.trigger("followlink",[anchor]),!0):pane.length?(self.toggle(header),self.focusOriginalType(header),!0):(this.isControllingDetails?pane.length||self.element.trigger("drilldown",[header[0]]):(self.orignalSelection=anchor,self.focusOriginalType(header)),this.element.trigger("selected",header),!0)},closePopups:function closePopups(e){$(".popupmenu.is-open").length&&this.element.find('.accordion-header[aria-haspopup="true"]').each((function(){return $(this).data("popupmenu").close(),void 0!==e&&(e.stopPropagation(),e.stopImmediatePropagation()),!1}))},handleExpanderClick:function handleExpanderClick(e,expander){var header=expander.parent(".accordion-header");if(header.length&&!this.isDisabled(header)&&!this.isFiltered(header)&&!header.data("is-animating"))return this.originalSelection=expander,e&&e.stopPropagation(),this.closePopups(),header.next(".accordion-pane").length?(this.toggle(header),this.select(header),void this.focusOriginalType(header)):this.handleAnchorClick(e,header.children("a"))},handleKeys:function handleKeys(e){var self=this,key=e.which,target=$(e.target),header=target.parent(),expander=header.children('[class^="btn"]').first(),anchor=header.children("a");function setInitialOriginalSelection(selection){selection||(selection=target),self.originalSelection||(self.originalSelection=selection)}if(9===key&&(this.headers.removeClass("is-selected"),target.is("a")&&expander.length?setInitialOriginalSelection(expander):setInitialOriginalSelection(anchor)),32===key){if(e.preventDefault(),target.is('[class^="btn"]')&&(e.stopPropagation(),e.stopImmediatePropagation(),$("html").hasClass("is-firefox")))return;return expander.length?(setInitialOriginalSelection(expander),this.handleExpanderClick(null,target)):(setInitialOriginalSelection(anchor),this.handleAnchorClick(null,target))}return 37===key||38===key?(e.preventDefault(),setInitialOriginalSelection(),e.shiftKey?this.ascend(header):this.prevHeader(header)):39===key||40===key?(e.preventDefault(),setInitialOriginalSelection(),e.shiftKey?this.descend(header):this.nextHeader(header)):void 0},toData:function toData(flatten,addElementReference){var data=[];return this.element.children(".accordion-header").each((function(i,item){!function buildElementJSON(el,index,parentNesting,parentArr){var $el=$(el),pane=$(el).next(".accordion-pane"),isContentArea=el.classList.contains("accordion-content"),elemData={index:"".concat(void 0!==parentNesting?"".concat(parentNesting,"."):"").concat(index),type:isContentArea?"content":"header"};addElementReference&&(elemData.element=el),el.getAttribute("id")&&(elemData.id=el.getAttribute("id")),isContentArea?(elemData.content="".concat($el.html()),elemData.contentText="".concat($el.text().trim().replace(/\n|\s{2,}/g," "))):elemData.text=$el.children("a, span").text().trim();var icon=$el.children(".icon");if(icon.length&&(elemData.icon="svg"===icon[0].tagName.toLowerCase()?icon[0].getElementsByTagName("use")[0].getAttribute("href"):""),$el.hasClass("is-disabled")&&(elemData.disabled=!0),pane.length){var subElems=pane.children(".accordion-header, .accordion-content"),subElementData=[];if(subElems.length){var targetArray=subElementData;flatten&&(targetArray=parentArr),subElems.each((function(j,subitem){buildElementJSON(subitem,j,elemData.index,targetArray)})),elemData.children=subElementData}}parentArr.push(elemData)}(item,i,void 0,data)})),data},select:function select(element){if(element&&element.length){var anchor=element,header=anchor.parent();if(element.is(".accordion-header")&&(anchor=(header=element).children("a")),anchor.is('[class^="btn"]')&&(anchor=element.next("a")),!this.isDisabled(header)&&!this.isFiltered(header))this.headers.removeClass("child-selected").removeClass("is-selected"),header.addClass("is-selected"),header.parentsUntil(this.element,".accordion-pane").prev(".accordion-header").addClass("child-selected")}},getSelected:function getSelected(){return this.element.find(".is-selected")},isDisabled:function isDisabled(header){return!!this.element.hasClass("is-disabled")||!!header&&header.hasClass("is-disabled")},isFiltered:function isFiltered(header){if(!header||!header.length)return!1;var cl=header[0].classList;return cl.contains("filtered")&&!cl.contains("has-filtered-children")},isExpanded:function isExpanded(header){if(header&&header instanceof Element&&(header=$(header)),header&&header.length)return"true"===header.children("a").attr("aria-expanded")},toggle:function toggle(header){var _this2=this;!header||!header.length||this.isDisabled(header)||this.isFiltered(header)||this.isAnimating||(this.isAnimating=!0,setTimeout((function(){_this2.isAnimating=!1}),500),this.isExpanded(header)?this.collapse(header):this.expand(header))},expand:function expand(header,dontCollapseHeaders){if(header&&header.length){var self=this,pane=header.next(".accordion-pane"),a=header.children("a"),dfd=$.Deferred();return!1===this.element.triggerHandler("beforeexpand",[a])?dfd.reject():(this.callSource(a,continueExpand)||continueExpand.apply(this),dfd)}function continueExpand(){if(!(pane=header.next(".accordion-pane"))||!pane.length)return dfd.reject();var expander=header.children(".btn");expander.length&&(expander.children(".plus-minus, .chevron").addClass("active"),expander.children(".audible").text(Locale.translate("Collapse")));var headerParents=header.parentsUntil(self.element).filter(".accordion-pane").prev(".accordion-header").add(header),collapseDfds=[];self.settings.allowOnePane&&!dontCollapseHeaders&&self.headers.not(headerParents).each((function(){var h=$(this);self.isExpanded(h)&&collapseDfds.push(self.collapse(h))}));var expandDfds=[];function handleAfterExpand(e){var _$;e&&e.stopPropagation(),pane.triggerHandler("afterexpand",[a]),self.element.trigger("afterexpand",[a]),(_$=$).when.apply(_$,expandDfds.concat(collapseDfds)).done((function(){dfd.resolve()}))}headerParents.not(header).each((function(){var h=$(this);self.isExpanded(h)||expandDfds.push(self.expand(h))})),header.add(pane).addClass("is-expanded"),header.children("a").attr("aria-expanded","true"),self.element.trigger("expand",[a]),pane.hasClass("no-transition")?handleAfterExpand():pane.one("animateopencomplete",handleAfterExpand).animateOpen()}},expandAll:function expandAll(){var _$2;if(!0!==this.settings.allowOnePane){var self=this,dfd=$.Deferred(),dfds=[];return this.headers.each((function(){var h=$(this);self.isExpanded(h)||dfds.push(self.expand(h))})),(_$2=$).when.apply(_$2,dfds).always((function(){dfd.resolve()})),dfd}},collapse:function collapse(header){var closeChildren=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(header&&header.length){var self=this,pane=header.next(".accordion-pane"),a=header.children("a"),dfd=$.Deferred(),canExpand=this.element.triggerHandler("beforecollapse",[a]);if(!1===canExpand)return dfd.reject();var expander=header.children(".btn");return expander.length&&(expander.children(".plus-minus, .chevron").removeClass("active"),expander.children(".audible").text(Locale.translate("Expand"))),header.add(pane).removeClass("is-expanded"),a.attr("aria-expanded","false"),closeChildren&&pane.closeChildren(),self.element.trigger("collapse",[a]),pane.hasClass("no-transition")?handleAfterCollapse():pane.one("animateclosedcomplete",handleAfterCollapse).animateClosed(),dfd}function handleAfterCollapse(e){e&&e.stopPropagation(),pane.triggerHandler("aftercollapse",[a]),self.element.trigger("aftercollapse",[a]),dfd.resolve()}},collapseAll:function collapseAll(){var _$3,self=this,dfd=$.Deferred(),dfds=[];return this.headers.each((function(){var h=$(this);self.isExpanded(h)&&dfds.push(self.collapse(h))})),(_$3=$).when.apply(_$3,dfds).always((function(){dfd.resolve()})),dfd},callSource:function callSource(anchor,animationCallback){if(!this.settings.source||"function"!=typeof this.settings.source)return!1;var self=this,header=anchor.parent(),pane=header.next(".accordion-pane"),ui={anchor:anchor,header:header,pane:pane};return this.settings.source(ui,(function response(){self.updated(),setTimeout((function(){animationCallback.apply(self)}),1)}))},getElements:function getElements(eventTarget){var header,anchor,expander,pane,target=$(eventTarget);return target.is(".accordion-header")&&(header=target,expander=target.children('[class^="btn"]'),anchor=target.children("a")),target.is(".btn")&&(anchor=(header=(expander=target).parent()).children("a")),target.is("a")&&(expander=(header=(anchor=target).parent()).children(".btn")),pane=header.next(".accordion-pane"),{header:header,expander:expander,anchor:anchor,pane:pane}},prevHeader:function prevHeader(element,noDescend){var elem=this.getElements(element),adjacentHeaders=elem.header.parent().children(),currentIndex=adjacentHeaders.index(elem.header),target=$(adjacentHeaders.get(xssUtils.ensureAlphaNumeric(currentIndex)-1));if(!adjacentHeaders.length||0===currentIndex){if(elem.header.parent(".accordion-pane").length)return this.ascend(elem.header);target=adjacentHeaders.last()}for(;target.is(".accordion-content")||this.isDisabled(target)||this.isFiltered(target);){if(target.is(":only-child")||target.is(":first-child"))return this.ascend(elem.header);target=target.prev()}if(target.is(".accordion-pane")){var prevHeader=target.prev(".accordion-header");if(this.isExpanded(prevHeader))if(prevHeader.next(".accordion-pane").children(":not(.accordion-content)").length&&!noDescend)return this.descend(prevHeader,-1);if(!(target=prevHeader).length){if(elem.header.parent(".accordion-pane").length)return this.ascend(elem.header);for(target=adjacentHeaders.last();target.is(".accordion-content")||this.isDisabled(target)||this.isFiltered(target);)target=target.prev()}}this.focusOriginalType(target)},nextHeader:function nextHeader(element,noDescend){var elem=this.getElements(element),adjacentHeaders=elem.header.parent().children(),currentIndex=adjacentHeaders.index(elem.header),target=$(adjacentHeaders.get(xssUtils.ensureAlphaNumeric(currentIndex)+1));if(!adjacentHeaders.length||currentIndex===adjacentHeaders.length-1){if(elem.header.parent(".accordion-pane").length)return this.ascend(elem.header,-1);target=adjacentHeaders.first()}for(;target.is(".accordion-content")||this.isDisabled(target)||this.isFiltered(target);){if(target.is(":only-child")||target.is(":last-child"))return this.ascend(elem.header);target=target.next()}if(target.is(".accordion-pane")){var prevHeader=target.prev(".accordion-header");if(this.isExpanded(prevHeader))if(prevHeader.next(".accordion-pane").children(":not(.accordion-content)").length&&!noDescend)return this.descend(prevHeader);if(!(target=$(adjacentHeaders.get(xssUtils.ensureAlphaNumeric(currentIndex)+2))).length){if(elem.header.parent(".accordion-pane").length)return this.ascend(elem.header,-1);for(target=adjacentHeaders.first();target.is(".accordion-content")||this.isDisabled(target)||this.isFiltered(target);)target=target.next()}}this.focusOriginalType(target)},ascend:function ascend(header,direction){direction||(direction=0);var pane=header.parent(".accordion-pane"),target=pane.prev();if(-1===direction&&!(target=pane.next(".accordion-header")).length)return pane.parent(".accordion").length?this.nextHeader(pane.prev().children("a"),!0):this.ascend(pane.prev(),-1);this.focusOriginalType(target)},descend:function descend(header,direction){direction||(direction=0);var pane=header.next(".accordion-pane"),target=pane.children(".accordion-header").first();return-1===direction&&(target=pane.children(".accordion-header").last()),target.length?this.isExpanded(target)?this.descend(target,-1):void this.focusOriginalType(target):this.focusOriginalType(header)},focusOriginalType:function focusOriginalType(header){var btns=header.children('[class*="btn"]');this.headers.not(header).removeClass("is-focused"),this.originalSelection.is('[class*="btn"]')&&btns.length?btns.first()[0].focus():(header.children("a")[0].focus(),header.addClass("is-focused").removeClass("hide-focus"))},filter:function filter(targets){var _this3=this;if(targets&&targets.length){var self=this;this.headers.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),this.currentlyFiltered=$();var toFilter=targets.not(this.currentlyFiltered),allParentHeaders=$(),allContentAreas=$();this.headers.add(this.contentAreas).not(toFilter).addClass("filtered"),toFilter.each((function(i,target){var isContentArea=$(target).is(".accordion-content"),allParentPanes=$(target).parents(".accordion-pane");if(isContentArea){allContentAreas.push($(target));var thisParentHeader=$(allParentPanes[0]).prev(".accordion-header").filter((function(j,item){return-1===allParentHeaders.index(item)}));thisParentHeader.length&&(allParentHeaders=allParentHeaders.add(thisParentHeader))}if(allParentPanes.length){var parentHeaders=allParentPanes.prev(".accordion-header").filter((function(j,item){return-1===allParentPanes.index(item)}));allParentHeaders=allParentHeaders.add(parentHeaders)}})),allParentHeaders.addClass("has-filtered-children");var expandPromise=this.expand(allParentHeaders,!0);$.when(expandPromise).done((function(){_this3.currentlyFiltered=toFilter,self.build(void 0,!0)}))}},unfilter:function unfilter(headers){var _this4=this;if(this.currentlyFiltered.length){headers&&headers.length||(headers=this.currentlyFiltered);var allParentHeaders=$();this.headers.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),headers.each((function(i,header){var parentPanes=$(header).parents(".accordion-pane");if(parentPanes.length){var parentHeaders=parentPanes.prev(".accordion-header").filter((function(j,item){return-1===allParentHeaders.index(item)}));allParentHeaders=allParentHeaders.add(parentHeaders)}})),allParentHeaders.removeClass("has-filtered-children");var collapseDfds=[this.collapse(headers),this.collapse(allParentHeaders)];$.when(collapseDfds).done((function(){_this4.currentlyFiltered=_this4.currentlyFiltered.not(headers)}))}},disable:function disable(){this.element.addClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).attr("tabindex","-1")},enable:function enable(){this.element.removeClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).removeAttr("tabindex")},updated:function updated(headers,settings){this.element.data("updating",!0),settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings),this.settings=handleDeprecatedSettings(this.settings));var currentFocus=$(document.activeElement);return $.contains(this.element[0],currentFocus[0])||(currentFocus=void 0),headers&&headers instanceof jQuery?this.teardown(headers).init(headers):this.teardown().init(),currentFocus&&currentFocus.length&&currentFocus.focus(),$.removeData(this.element[0],"updating"),this},teardown:function teardown(headers){var globalEventTeardown=!1,headerElems=headers;(this.currentlyFiltered&&this.unfilter(this.currentlyFiltered),headers&&headers instanceof jQuery||(headerElems=this.headers,globalEventTeardown=!0),headerElems&&headerElems.length)&&(headerElems.off("touchend.accordion click.accordion focusin.accordion focusout.accordion keydown.accordion mousedown.accordion mouseup.accordion").each((function(){var header=$(this),icon=header.children(".icon"),hideFocus=header.data("hidefocus");if(hideFocus&&hideFocus.destroy(),icon.length){var iconAPI=icon.data("icon");iconAPI&&iconAPI.destroy()}var expander=header.data("addedExpander");expander&&(expander.remove(),$.removeData(this,"addedExpander"))})),headerElems.not(".accordion-content").find("a").off("touchend.accordion keydown.accordion click.accordion"),headerElems.children('[class^="btn"]').off("touchend.accordion click.accordion keydown.accordion"));return globalEventTeardown&&this.element.off("updated.accordion selected.accordion"),delete this.anchors,delete this.headers,delete this.panes,delete this.contentAreas,this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"accordion")},handleEvents:function handleEvents(headers){var self=this,headerWhereMouseDown=null,headerElems=headers,globalEventSetup=!1;headers&&headers instanceof jQuery||(headerElems=this.headers,globalEventSetup=!0);var anchors=headerElems.find("a");function clickInterceptor(e,element){var type=function getElementType(element){var elementType="Header";return element.is("a")&&(elementType="Anchor"),element.is("button")&&(elementType="Expander"),elementType}(element);return $("body").children().not(".application-menu, .modal-page-container, .page-container").closeChildren(),self["handle".concat(type,"Click")](e,element)}return headerElems.on("click.accordion",(function(e){return clickInterceptor(e,$(this))})).on("focusin.accordion",(function(e){var target=$(e.target);self.originalSelection||(self.originalSelection=target),headerElems.not($(this)).removeClass("is-focused"),target.is(":not(.btn)")&&$(this).addClass("is-focused").removeClass("hide-focus")})).on("focusout.accordion",(function(){$.contains(this,headerWhereMouseDown)&&!$(this).is($(headerWhereMouseDown))||$(this).removeClass("is-focused")})).on("keydown.accordion",(function(e){self.handleKeys(e)})).on("mousedown.accordion",(function(e){$(this).addClass("is-focused").removeClass("hide-focus"),headerWhereMouseDown=e.target})).on("mouseup.accordion",(function(){headerWhereMouseDown=null})),anchors.on("click.accordion",(function(e){return clickInterceptor(e,$(this))})),headerElems.children('[class^="btn"]').on("click.accordion",(function(e){return clickInterceptor(e,$(this))})).on("keydown.accordion",(function(e){self.handleKeys(e)})),globalEventSetup&&this.element.on("selected.accordion",(function(e){e.stopPropagation()})).on("updated.accordion",(function(e,settings){e.stopPropagation(),self.updated(settings)})),this},hideTooltip:function hideTooltip(){var _this5=this,self=window;self.tooltip&&(this.removeTooltipData(self.tooltip),self.tooltip.classList.add("is-hidden"),self.tooltip.classList.remove("content-tooltip")),$("body, .scrollable").off("scroll.spantooltip",(function(){_this5.hideTooltip()}))},removeTooltipData:function removeTooltipData(elem){(elem=elem instanceof jQuery?elem:$(elem)).data("spantooltip")&&$.removeData(elem[0],"spantooltip")},setupTooltips:function setupTooltips(){if(this.settings.enableTooltips){var tooltipTimer,self=this,selector=".accordion-header a span";this.element.off("mouseenter.spantooltip",selector).on("mouseenter.spantooltip",selector,(function(){!function handleShow(elem){elem.style.width="auto",elem.offsetWidth>elem.parentElement.offsetWidth-parseInt($(elem).parent().css("padding-left"),10)&&(elem.style.width="",tooltipTimer=setTimeout((function(){$(elem).tooltip({trigger:"immediate",content:"".concat(elem.innerText),extraClass:"tooltip-accordion-style"})}),400))}(this)})).off("mouseleave.spantooltip click.spantooltip",selector).on("mouseleave.spantooltip click.spantooltip",selector,(function(){!function handleHide(elem){elem.style.width="auto",elem.offsetWidth>elem.parentElement.offsetWidth-parseInt($(elem).parent().css("padding-left"),10)&&(elem.style.width="",self.hideTooltip(),clearTimeout(tooltipTimer))}(this)}))}}},$.fn.accordion=function(settings){return this.each((function(){var instance=$.data(this,"accordion");instance?instance.updated(settings):instance=$.data(this,"accordion",new Accordion(this,settings))}))};var EXCLUDED_FROM_CLOSE_CHILDREN=[".expandable-area",".accordion","[soho-busyindicator]",".busy-indicator-container"],EXCLUDED_FROM_HANDLE_RESIZE=[];function canCall(prop,method){return!!function canAccessAPI(prop){return prop&&!(prop instanceof jQuery)}(prop)&&(prop[method]&&"function"==typeof prop[method])}function findControlsOnElements(elems,method){var foundControls=[];return $.each(elems,(function(index,elem){$.each($(elem).data(),(function(i,dataEntry){(function triggerAPIMethod(prop,method){return!!canCall(prop,method)&&(prop[method](),!0)})(dataEntry,method)&&foundControls.push({elem:$(elem),control:dataEntry})}))})),foundControls}function siftFor(rootElem,method,filteredOutElements){if(rootElem&&method){var DOMelements=(rootElem=$(rootElem)).find("*").add(rootElem);filteredOutElements&&(DOMelements=DOMelements.not(filteredOutElements.join(", ")));var siftedControls=findControlsOnElements(DOMelements,method);return rootElem.trigger("sift-".concat(method,"-complete"),[siftedControls]),rootElem}}$.fn.destroy=function(){return siftFor($(this),"destroy")},$.fn.closeChildren=function(){return siftFor($(this),"close",EXCLUDED_FROM_CLOSE_CHILDREN)},$.fn.handleResize=function(){return siftFor($(this),"handleResize",EXCLUDED_FROM_HANDLE_RESIZE)};var setTimeoutFunc=setTimeout;function isArray(x){return Boolean(x&&void 0!==x.length)}function noop(){}function Promise(fn){if(!(this instanceof Promise))throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(fn,this)}function handle(self,deferred){for(;3===self._state;)self=self._value;0!==self._state?(self._handled=!0,Promise._immediateFn((function(){var cb=1===self._state?deferred.onFulfilled:deferred.onRejected;if(null!==cb){var ret;try{ret=cb(self._value)}catch(e){return void reject(deferred.promise,e)}resolve(deferred.promise,ret)}else(1===self._state?resolve:reject)(deferred.promise,self._value)}))):self._deferreds.push(deferred)}function resolve(self,newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if(newValue instanceof Promise)return self._state=3,self._value=newValue,void finale(self);if("function"==typeof then)return void doResolve(function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}(then,newValue),self)}self._state=1,self._value=newValue,finale(self)}catch(e){reject(self,e)}}function reject(self,newValue){self._state=2,self._value=newValue,finale(self)}function finale(self){2===self._state&&0===self._deferreds.length&&Promise._immediateFn((function(){self._handled||Promise._unhandledRejectionFn(self._value)}));for(var i=0,len=self._deferreds.length;i<len;i++)handle(self,self._deferreds[i]);self._deferreds=null}function Handler(onFulfilled,onRejected,promise){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.promise=promise}function doResolve(fn,self){var done=!1;try{fn((function(value){done||(done=!0,resolve(self,value))}),(function(reason){done||(done=!0,reject(self,reason))}))}catch(ex){if(done)return;done=!0,reject(self,ex)}}Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);return handle(this,new Handler(onFulfilled,onRejected,prom)),prom},Promise.prototype.finally=function finallyConstructor(callback){var constructor=this.constructor;return this.then((function(value){return constructor.resolve(callback()).then((function(){return value}))}),(function(reason){return constructor.resolve(callback()).then((function(){return constructor.reject(reason)}))}))},Promise.all=function(arr){return new Promise((function(resolve,reject){if(!isArray(arr))return reject(new TypeError("Promise.all accepts an array"));var args=Array.prototype.slice.call(arr);if(0===args.length)return resolve([]);var remaining=args.length;function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,(function(val){res(i,val)}),reject)}args[i]=val,0==--remaining&&resolve(args)}catch(ex){reject(ex)}}for(var i=0;i<args.length;i++)res(i,args[i])}))},Promise.resolve=function(value){return value&&"object"==typeof value&&value.constructor===Promise?value:new Promise((function(resolve){resolve(value)}))},Promise.reject=function(value){return new Promise((function(resolve,reject){reject(value)}))},Promise.race=function(arr){return new Promise((function(resolve,reject){if(!isArray(arr))return reject(new TypeError("Promise.race accepts an array"));for(var i=0,len=arr.length;i<len;i++)Promise.resolve(arr[i]).then(resolve,reject)}))},Promise._immediateFn="function"==typeof setImmediate&&function(fn){setImmediate(fn)}||function(fn){setTimeoutFunc(fn,0)},Promise._unhandledRejectionFn=function _unhandledRejectionFn(err){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",err)};var filterModes=["startsWith","contains","keyword","wordStartsWith","phraseStartsWith"];var LISTFILTER_DEFAULTS={caseSensitive:!1,filterMode:filterModes[3],searchableTextCallback:void 0};function ListFilter(settings){this.settings=utils.mergeSettings(void 0,settings,LISTFILTER_DEFAULTS),this.init()}ListFilter.prototype={init:function init(){for(var setting,limits,preset,checks=[{setting:this.settings.filterMode,limits:filterModes,preset:LISTFILTER_DEFAULTS.filterMode}],i=0;i<checks.length;i++)setting=checks[i].setting,limits=checks[i].limits,preset=checks[i].preset,-1===$.inArray(setting,limits)&&(setting=preset);return this.settings.filterMode===filterModes[0]&&warnAboutDeprecation("wordStartsWith (filter)","startsWith (filter)"),this},filter:function filter(list,term){if(!list)return!1;if(!($.isArray(list)||list instanceof jQuery))return!1;if(!term||"string"!=typeof term||!term.length)return!1;var self=this,items=[],isJQuery=!1;function getSearchableContent(item){var targetContent,santitize=!0;if("function"==typeof self.settings.searchableTextCallback)return self.settings.searchableTextCallback(item);"string"==typeof item?targetContent=item:item instanceof $?targetContent=$(item).text():item instanceof HTMLElement?(santitize=!1,targetContent=item.innerText):targetContent=function getObjectPropsAsText(thisItem){var text="";return Object.keys(thisItem).forEach((function(prop){var pad=text.length?" ":"";text+="".concat(pad).concat(thisItem[prop])})),text}(item);var ret=targetContent;return santitize&&(ret=xssUtils.sanitizeHTML(targetContent)),ret}return this.settings.caseSensitive||(term=term.toLowerCase()),$.isArray(list)||(list instanceof jQuery||"object"===_typeof(list))&&(list=$.makeArray(list),isJQuery=!0),list.forEach((function searchItemIterator(item){var text=getSearchableContent(item);self.settings.caseSensitive||(text=text.toLowerCase());var match=!1;if(["startsWith","wordStartsWith"].indexOf(self.settings.filterMode)>-1&&(match=function wordStartsWithFilter(text,term){for(var parts=text.split(" "),a=0;a<parts.length;a++)if(0===parts[a].indexOf(term))return!0;return 0===text.indexOf(term)||term.indexOf(" ")>0&&text.indexOf(term)>0}(text,term)),"phraseStartsWith"===self.settings.filterMode&&0===text.indexOf(term)&&(match=!0),"contains"===self.settings.filterMode&&text.indexOf(term)>=0&&(match=!0),"keyword"===self.settings.filterMode)for(var keywords=term.split(" "),i=0;i<keywords.length;i++){var keyword=keywords[i];if(text.indexOf(keyword)>=0){match=!0;break}}null===self.settings.filterMode&&(match=!0),match&&items.push(item)})),isJQuery&&(items=$(items)),!(!isJQuery&&!items.length)&&items},updated:function updated(settings){return this.settings=utils.mergeSettings(void 0,settings,this.settings),this.teardown().init()},teardown:function teardown(){return this},destroy:function destroy(){return this.teardown()}};var Tmpl={compile:function compile(template,self,parent,invert){var i,render=compile,output="";function get(ctx,path){return ctx=ctx[(path=path.pop?path:path.split(".")).shift()]||"",0 in path?get(ctx,path):ctx}self=Array.isArray(self)?self:self?[self]:[],self=invert?0 in self?[]:[1]:self;var _loop=function _loop(){var childCode="",depth=0,inverted=void 0,ctx="object"===_typeof(self[i])?self[i]:{};(ctx=utils.extend({},parent,ctx))[""]={"":self[i]},template.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,(function(match,code,y,z,close,invert,name){depth?childCode+=depth&&!close||depth>1?match:code:(output+=code.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,(function(match,raw,comment,isRaw,partial,name){return raw?get(ctx,raw):isRaw?get(ctx,name):partial?render(get(ctx,name),ctx):comment?"":new Option(get(ctx,name)).innerHTML})),inverted=invert),close?--depth||(name=get(ctx,name),/^f/.test(_typeof(name))?output+=name.call(ctx,childCode,(function(template){return render(template,ctx)})):output+=render(childCode,name,ctx,inverted),childCode=""):++depth}))};for(i=0;i<self.length;i++)_loop();return output}},AUTOCOMPLETE_DEFAULTS={source:[],sourceArguments:{},template:void 0,filterMode:"wordStartsWith",caseSensitive:!1,delay:300,width:null,offset:null,autoSelectFirstItem:!1,highlightMatchedText:!0,highlightCallback:function highlightMatch(item,options){var targetProp=item,hasAlias=!1;if("string"==typeof options.alias&&void 0!==item[options.alias]&&(hasAlias=!0,targetProp=item[options.alias]),"contains"===options.filterMode)targetProp=targetProp.replace(new RegExp("("+options.term+")","ig"),"<i>$1</i>");else if("keyword"===options.filterMode)for(var keywords=options.term.split(" "),i=0;i<keywords.length;i++){var keyword=keywords[i];keyword&&(targetProp=targetProp.replace(new RegExp("("+keyword+")","ig"),"<i>$1</i>"))}else{var originalItem=targetProp,testContent="".concat(originalItem);options.caseSensitive||(testContent=Locale.toLowerCase(testContent));var pos=testContent.indexOf(options.term);pos>0?targetProp=originalItem.substr(0,pos)+"<i>"+originalItem.substr(pos,options.term.length)+"</i>"+originalItem.substr(options.term.length+pos):0===pos&&(targetProp="<i>"+originalItem.substr(0,options.term.length)+"</i>"+originalItem.substr(options.term.length))}return hasAlias?item[options.alias]=targetProp:item=targetProp,item},resultIteratorCallback:function resultIterator(item,index){var isString="string"==typeof item,dataset={highlightTarget:"label",index:index,listItemId:"ac-list-option".concat(index)};return isString?dataset.label=item:dataset=utils.extend({},dataset,item),dataset.hasValue=void 0!==item.value,dataset.hasValue&&(dataset.value=item.value),dataset},clearResultsCallback:void 0,displayResultsCallback:void 0,searchableTextCallback:function DEFAULT_AUTOCOMPLETE_SEARCHABLE_TEXT_CALLBACK(item){return"string"==typeof item?item:item.label}};function Autocomplete(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,AUTOCOMPLETE_DEFAULTS),this.init()}Autocomplete.prototype={init:function init(){var data=this.element.attr("data-autocomplete");data&&"source"!==data&&(this.settings.source=data,this.element.removeAttr("data-autocomplete"));var listFilterSettings={filterMode:this.settings.filterMode,caseSensitive:this.settings.caseSensitive,highlightMatchedText:this.settings.highlightMatchedText,searchableTextCallback:this.settings.searchableTextCallback};this.listFilter?this.listFilter.updated(listFilterSettings):this.listFilter=new ListFilter(listFilterSettings),this.addMarkup(),this.handleEvents()},addMarkup:function addMarkup(){this.element.addClass("autocomplete").attr({role:"combobox",autocomplete:"off"})},isLoading:function isLoading(){return this.element.hasClass("is-loading")&&this.element.hasClass("is-blocked")},openList:function openList(term,items){if(!this.element.is("[disabled], [readonly]")&&!this.isLoading()){if(!this.element.hasClass("searchfield"))if(!1===this.element.triggerHandler("beforeopen.autocomplete",{elem:this.element,value:this.element.val()}))return;var self=this;this.settings.caseSensitive||(term=Locale.toLowerCase(term)),this.list=$("#autocomplete-list"),0===this.list.length&&(this.list=$('<ul id="autocomplete-list" aria-expanded="true"></ul>').appendTo("body")),this.list[0].style.height="auto",this.list[0].style.width="".concat(this.element.outerWidth(),"px"),this.list.addClass("autocomplete"),this.list.empty(),this.settings.width&&(this.list[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px"));var templateAttr=$(this.element.attr("data-tmpl"));this.tmpl=$(templateAttr).length?$(templateAttr).text():"string"==typeof templateAttr?templateAttr:$(this.settings.template).length?$(this.settings.template).text():"string"==typeof this.settings.template?this.settings.template:'<li id="{{listItemId}}" data-index="{{index}}" {{#hasValue}}data-value="{{value}}"{{/hasValue}} role="listitem">\n <a href="#" tabindex="-1">\n   <span>{{{label}}}</span>\n </a>\n</li>';var filterResult=this.listFilter.filter(items,term),modifiedFilterResults=[];!1!==filterResult&&filterResult.forEach((function(val,index){"string"==typeof val&&(val={label:val,value:val});var result=utils.extend(!0,{},val);if(result=self.settings.resultIteratorCallback(result,index),self.settings.highlightMatchedText){var filterOpts={filterMode:self.settings.filterMode,caseSensitive:self.settings.caseSensitive,term:term};result.highlightTarget&&(filterOpts.alias=result.highlightTarget),self.settings.displayResultsCallback||(result=self.settings.highlightCallback(result,filterOpts))}modifiedFilterResults.push(result)})),this.currentDataSet=modifiedFilterResults,"function"!=typeof this.settings.displayResultsCallback?this.handleListResults(term,items,modifiedFilterResults):this.settings.displayResultsCallback(modifiedFilterResults,(function(){self.element.trigger("listopen",[modifiedFilterResults])}),term)}},handleListResults:function handleListResults(term,items,filterResult){var self=this;filterResult.forEach((function(dataset){if(void 0!==Tmpl){var renderedTmpl=Tmpl.compile(self.tmpl,dataset);DOM.append(self.list,renderedTmpl,"*")}})),this.element.trigger("beforepopulated",[filterResult]);var popupOpts={menuId:"autocomplete-list",ariaListbox:!0,mouseFocus:!1,trigger:"immediate",attachToBody:!0,autoFocus:!1,returnFocus:!1,triggerSelect:!1,placementOpts:{parent:this.element,callback:function afterPlaceCallback(placementObj){return!0===placementObj.wasFlipped&&(self.list.add(self.element).addClass("is-ontop"),placementObj.y+=1),placementObj}}};if(this.previouslyOpened){var popupmenuAPI=this.element.data("popupmenu");popupmenuAPI&&popupmenuAPI.position()}else this.element.addClass("is-open").popupmenu(popupOpts).one("close.autocomplete",(function(){self.closeList(!0)}));var lis=self.list.find("li"),width=$(lis[0]).find("span").outerWidth()+20;if(width>parseInt(this.element.outerWidth(),10)){for(var i=0;i<lis.length;i++)lis.width(width+"px");this.maxWidth=width}if(self.settings.autoSelectFirstItem&&self.list.children().filter(":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)").first().addClass("is-selected"),this.noSelect=!0,this.element.trigger("populated",[filterResult]).focus(),!this.previouslyOpened){self.list.on("touchend.".concat("autocomplete"," click.").concat("autocomplete"),"a",(function(e){self.select(e)})).on("focusout.".concat("autocomplete"),(function(){self.checkActiveElement()}));var all=self.list.find("a").on("focus.".concat("autocomplete"," touchend.").concat("autocomplete"),(function(){self.highlight($(this),all)}));if(this.settings.offset){var domListParent=this.list.parent()[0];this.settings.offset.left&&(domListParent.style.left="".concat(parseInt(domListParent.style.left,10)+this.settings.offset.left,"px")),this.settings.offset.top&&(domListParent.style.top="".concat(parseInt(domListParent.style.top,10)+this.settings.offset.top,"px"))}}var previousLiveMessages=document.querySelectorAll("#ac-is-arialive");previousLiveMessages&&previousLiveMessages.forEach((function(messageElem){messageElem.parentNode.removeChild(messageElem)})),DOM.append(self.list.parent(".popupmenu-wrapper"),'<span id="ac-is-arialive" aria-live="polite" class="audible">'.concat($.trim(this.list.find(">li:first-child").text()),"</span>"),"<div><span><a><small><img><svg><i><b><use><br><strong><em>"),this.noSelect=!0,this.previouslyOpened=!0,this.element.trigger("listopen",[filterResult])},closeList:function closeList(dontClosePopup){if(this.list.off(["click.".concat("autocomplete"),"touchend.".concat("autocomplete"),"focusout.".concat("autocomplete")].join(" ")),this.list.find("a").off("focus.".concat("autocomplete"," touchend.").concat("autocomplete")),this.element.trigger("listclose"),"function"!=typeof this.settings.clearResultsCallback){var popup=this.element.data("popupmenu");popup&&(dontClosePopup||popup.close(),$("#autocomplete-list").parent(".popupmenu-wrapper").remove(),$("#autocomplete-list").remove(),this.element.add(this.list).removeClass("is-open is-ontop"),delete this.previouslyOpened)}else this.settings.clearResultsCallback()},listIsOpen:function listIsOpen(){return this.list instanceof $&&this.list.length&&this.list.is(":visible")},handleAutocompleteKeydown:function handleAutocompleteKeydown(e){if(this.isLoading())return e.preventDefault(),!1;if(!this.listIsOpen())return null;function unhighlight(item){item.removeClass("is-selected is-focused")}function highlight(item){item.addClass("is-selected").find("a").focus()}var items=this.list.find("li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)"),highlighted=function getHighlighted(items){return items.filter(".is-selected")}(items);return 40===e.keyCode&&this.listIsOpen()&&highlighted.length&&(this.noSelect=!0,unhighlight(highlighted),highlight(items.eq(items.index(highlighted)+1)),e.preventDefault(),e.stopPropagation()),38===e.keyCode&&this.listIsOpen()&&highlighted.length&&(this.noSelect=!0,unhighlight(highlighted),highlight(items.eq(items.index(highlighted)-1)),e.preventDefault(),e.stopPropagation()),9!==e.keyCode&&13!==e.keyCode||!this.listIsOpen()||(highlighted.length?(e.stopPropagation(),e.preventDefault(),this.noSelect=!0,this.select(highlighted)):this.closeList()),null},handleAutocompleteInput:function handleAutocompleteInput(e){var self=this;return self.isLoading()?(e.preventDefault(),!1):(this.getDataFromSource().done((function(term,response){self.currentDataSet=response,self.openList(term,response)})),null)},checkActiveElement:function checkActiveElement(){var self=this;setTimeout((function(){var activeElem=document.activeElement;self.listIsOpen()&&$.contains(self.list[0],activeElem)||self.element.is(activeElem)||self.element.trigger("safe-blur")}),0)},getDataFromSource:function getDataFromSource(){var self=this;if(self.isLoading())return!1;var buffer,field=this.element,dfd=$.Deferred();function done(searchTerm,response,deferredStatus){return self.element.triggerHandler("complete"),self.element.trigger("requestend",[searchTerm,response]),!1===deferredStatus?dfd.reject(searchTerm):dfd.resolve(xssUtils.stripTags(searchTerm),response)}return clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout((function(){if(!self.isLoading())if(""!==(buffer=field.val())){var sourceType=_typeof(self.settings.source);if(self.element.triggerHandler("start"),self.element.trigger("requeststart",[buffer]),"function"===sourceType)self.settings.source(buffer,done,self.settings.sourceArguments);else if("object"===sourceType){var sourceData=$.isArray(self.settings.source)?self.settings.source:[self.settings.source];done(buffer,sourceData,!0)}else if(self.settings.source)if("keyword"===self.settings.filterMode){var keywordData=[],mergeData=function mergeData(data){if(0===keywordData.length)keywordData=data;else for(var i=0;i<data.length;i++){for(var dataItem=data[i],isExists=!1,ii=0;ii<keywordData.length;ii++)for(var keywordItem=keywordData[ii],iii=0;iii<Object.getOwnPropertyNames(keywordItem).length;iii++){if(dataItem[Object.getOwnPropertyNames(dataItem)[iii]]===keywordItem[Object.getOwnPropertyNames(keywordItem)[iii]]){isExists=!0;break}}isExists||keywordData.push(dataItem)}},doneData=function doneData(data){mergeData(data),done(buffer,keywordData,!0)},keywords=buffer.split(" ");""===keywords[keywords.length-1]&&keywords.splice(-1,1);for(var i=0;i<keywords.length;i++){var keyword=keywords[i];if(keyword.length>0){var sourceURL=self.settings.source.toString(),request=$.getJSON(sourceURL+keyword);i<keywords.length-1?request.done(mergeData).fail(mergeData):request.done(doneData).fail(doneData)}}}else{var _sourceURL=self.settings.source.toString();$.getJSON(_sourceURL+buffer).done((function(data){done(buffer,data,!0)})).fail((function(){done(buffer,[],!1)}))}else dfd.reject(buffer)}else self.element.data("popupmenu")&&self.element.data("popupmenu").close()}),self.settings.delay),dfd},resetFilters:function resetFilters(){this.openList("",this.currentDataSet)},handleAutocompleteFocus:function handleAutocompleteFocus(){this.noSelect?this.noSelect=!1:this.element.select()},highlight:function highlight(anchor,allAnchors){var text=anchor.text().trim();anchor.find(".display-value").length>0&&(text=anchor.find(".display-value").text().trim()),allAnchors&&allAnchors.length&&allAnchors.parent("li").removeClass("is-selected"),anchor.parent("li").addClass("is-selected"),this.noSelect=!0,this.element.val(text).focus()},select:function select(anchorOrEvent,items){var a,li,ret={},isEvent=!1;anchorOrEvent instanceof $.Event?(isEvent=!0,a=$(anchorOrEvent.currentTarget)):a=anchorOrEvent,a.is("li")&&(li=a,a=a.children("a"));var dataIndex=(li=a.parent("li")).attr("data-index"),dataValue=li.attr("data-value");if(this.element.attr("aria-activedescendant",li.attr("id")),items&&items.length||(items=this.currentDataSet),dataIndex)ret=items[parseInt(dataIndex,10)];else if(dataValue)for(var value,i=0;i<items.length;i++)(value="object"===_typeof(items[i])&&void 0!==items[i].value?items[i].value.toString():items[i].toString())===dataValue&&("object"===_typeof(items[i])&&(ret=items[i]),ret.value=value);return ret.value&&0!==!ret.value.length||(ret.value=a.text().trim()),this.highlight(a),this.noSelect=!0,ret.label=xssUtils.stripHTML(ret.label),ret.highlightTarget||(ret.highlightTarget="label",ret.index=parseInt(dataIndex,10),ret.listItemId="ac-list-option"+ret.index,ret.hasValue=!0),this.element.trigger("selected",[a,ret]),isEvent&&anchorOrEvent.preventDefault(),this.closeList(),this.element.focus(),ret},handleAfterListOpen:function handleAfterListOpen(){return this.element.offset().left>this.list.offset().left&&this.list.width(this.list.width()+1),this},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),settings&&settings.source&&(this.settings.source=settings.source),this.teardown().init(),this},enable:function enable(){this.element.prop("disabled",!1)},disable:function disable(){this.element.prop("disabled",!0)},teardown:function teardown(){var popup=this.element.data("popupmenu");return popup&&popup.destroy(),this.element.off(["focus.".concat("autocomplete"),"focusout.".concat("autocomplete"),"input.".concat("autocomplete"),"keydown.".concat("autocomplete"),"listopen.".concat("autocomplete"),"requestend.".concat("autocomplete"),"resetfilter.".concat("autocomplete"),"updated.".concat("autocomplete")].join(" ")),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"autocomplete")},handleEvents:function handleEvents(){var self=this;this.element.on("updated.".concat("autocomplete"),(function(){self.updated()})).on("keydown.".concat("autocomplete"),(function(e){self.handleAutocompleteKeydown(e)})).on("input.".concat("autocomplete"),(function(e){self.handleAutocompleteInput(e)})).on("focus.".concat("autocomplete"),(function(){self.handleAutocompleteFocus()})).on("focusout.".concat("autocomplete"),(function(){self.checkActiveElement()})).on("listopen.".concat("autocomplete"),(function(){self.handleAfterListOpen()})).on("resetfilter.".concat("autocomplete"),(function(){self.resetFilters()}))}},$.fn.autocomplete=function(settings){return this.each((function(){var instance=$.data(this,"autocomplete");if("string"==typeof instance){var stringSource="".concat(instance),modifiedSettings=utils.extend({},settings,{source:stringSource||settings.source});instance=$.data(this,"autocomplete",new Autocomplete(this,modifiedSettings))}else instance?instance.updated(settings):instance=$.data(this,"autocomplete",new Autocomplete(this,settings))}))};var SEARCHFIELD_COLLAPSE_MODES=[!1,"mobile",!0],SEARCHFIELD_DEFAULTS={resultsCallback:void 0,allResultsCallback:void 0,showAllResults:!0,showGoButton:!1,goButtonCopy:void 0,goButtonAction:void 0,categories:void 0,categoryMultiselect:!1,showCategoryText:!1,source:void 0,template:void 0,clearable:!1,collapsible:SEARCHFIELD_COLLAPSE_MODES[0],collapseSize:void 0};function SearchField(element,settings){this.element=$(element),this.toolbarParent&&!this.isContainedByFlexToolbar&&void 0!==settings&&(void 0===settings.clearable&&(settings.clearable=!0),void 0===settings.collapsible&&(settings.collapsible=!0)),this.settings=utils.mergeSettings(element,settings,SEARCHFIELD_DEFAULTS),this.init()}SearchField.prototype={get toolbarParent(){var toolbarParents=this.element.parents(".toolbar"),toolbarFlexParents=this.element.parents(".flex-toolbar");if(!(toolbarParents.add(toolbarFlexParents).length<1))return toolbarFlexParents.length>0?toolbarFlexParents.first()[0]:toolbarParents.first()[0]},get buttonsetElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".buttonset")},get titleElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".title")},get containmentParent(){var moduleTabs=this.element.closest(".module-tabs");return moduleTabs.length?moduleTabs.first()[0]:this.toolbarParent},get input(){return this.element[0]},get categoryButton(){return this.wrapper.find(".searchfield-category-button")},get isCollapsible(){return!1!==this.settings.collapsible},get isCurrentlyCollapsible(){return!0===this.settings.collapsible||"mobile"===this.settings.collapsible&&this.shouldBeFullWidth()},get isContainedByFlexToolbar(){return!!this.containmentParent&&this.containmentParent.className.indexOf("flex-toolbar")>-1},get toolbarFlexItem(){var item;return this.isContainedByFlexToolbar&&(item=$(this.element).data("toolbarflexitem")),item},get autocompleteAPI(){return $(this.element).data("autocomplete")},get isContextSearch(){return this.wrapper[0].className.indexOf("context")>-1},init:function init(){this.coerceBooleanSettings(),this.build(),this.setupEvents()},build:function build(){this.id||(this.id=utils.uniqueId(this.element,"searchfield")),this.label=this.element.prev("label, .label"),this.inlineLabel=this.element.closest("label"),this.isInlineLabel=this.element.parent().is(".inline");var autocompleteDataAttr=this.element.attr("data-autocomplete");autocompleteDataAttr&&"source"!==autocompleteDataAttr&&(this.settings.source=autocompleteDataAttr,this.element.removeAttr("data-autocomplete"),$.removeData(this.element,"autocomplete")),this.settings.source&&(this.autocomplete=this.element.data("autocomplete"),this.autocomplete?this.autocomplete.updated(this.settings):(this.element.autocomplete(this.settings),this.autocomplete=this.element.data("autocomplete"))),this.element.attr("autocomplete","off");var label=this.element.attr("placeholder")||this.element.prev("label, .label").text().trim();label&&""!==label||(label=Locale.translate("Keyword")),this.element.attr({"aria-label":label}),this.wrapper=this.element.parent(".searchfield-wrapper"),this.wrapper&&this.wrapper.length||(this.isInlineLabel?this.wrapper=this.inlineLabel.addClass("searchfield-wrapper"):this.wrapper=this.element.wrap('<span class="searchfield-wrapper"></span>').parent()),this.checkContents();var collapseSizeMethod="remove";this.settings.collapsible&&this.settings.collapseSize&&(collapseSizeMethod="add"),this.wrapper[0].classList[collapseSizeMethod]("has-custom-collapse-size"),this.toolbarParent&&(this.label.prependTo(this.wrapper),this.setInitalWidth());for(var c,customClasses=["context","alternate"],i=0;i<customClasses.length;i++)this.element.hasClass(customClasses[i])&&(c=customClasses[i],this.wrapper.addClass(c),this.element.removeClass(c));!0===this.settings.collapsibleOnMobile&&(this.settings.collapsible=SEARCHFIELD_COLLAPSE_MODES[1]),this.wrapper[0].classList[!0==!this.settings.collapsible?"add":"remove"]("non-collapsible"),this.wrapper[0].classList[this.toolbarParent?"add":"remove"]("toolbar-searchfield-wrapper"),this.toolbarParent&&!this.isContainedByFlexToolbar&&this.element.add(this.wrapper).addClass("no-transition no-animation");var icon=this.wrapper.find(".icon:not(.icon-dropdown)");if(icon&&icon.length||(icon=$.createIconElement("search")),icon[this.wrapper.hasClass("context")||this.wrapper.hasClass("has-categories")?"insertBefore":"insertAfter"](this.element).icon(),this.hasCategories()){this.wrapper.addClass("has-categories"),this.categoryButton.length||$('<button type="button" class="btn searchfield-category-button"></button>').insertBefore(this.element),icon.appendTo(this.categoryButton),icon=this.categoryButton,this.settings.showCategoryText&&this.wrapper.addClass("show-category");var ddIcon=icon.find(".icon-dropdown");if(ddIcon.length||(ddIcon=$.createIconElement({classes:"icon-dropdown",icon:"dropdown"}).icon()),ddIcon.appendTo(icon),this.categoryButton.data("popupmenu"))this.setCategories(this.settings.categories);else{this.list=this.wrapper.find("ul.popupmenu"),this.list&&this.list.length||(this.list=$('<ul class="popupmenu"></ul>'));var categoryListType=this.settings.categoryMultiselect?"is-multiselectable":"is-selectable";this.list.addClass(categoryListType);var removeListType="is-selectable";this.settings.categoryMultiselect||(removeListType="is-multiselectable"),this.list.removeClass(removeListType),this.setCategories(this.settings.categories),this.list.insertAfter(this.element);var _self=this;this.categoryButton.popupmenu({menu:this.list,offset:{y:10},returnFocus:function returnFocus(){_self.isFocused&&_self.element.focus()}})}this.setCategoryButtonText()}this.isContainedByFlexToolbar?(this.collapseButton&&this.collapseButton.length||(this.collapseButton=$('\n          <button class="btn-secondary collapse-button" type="button">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n              <use href="#icon-exit-fullview"></use>\n            </svg>\n            <span class="audible">'.concat(Locale.translate("Collapse"),"</span>\n          </button>\n        "))),this.wrapper[0].classList.add("has-collapse-button"),this.element.after(this.collapseButton)):this.wrapper[0].classList.remove("has-collapse-button");var goButton=this.wrapper.next(".go-button");goButton.length||(goButton=this.wrapper.find(".go-button")),goButton.length&&(this.settings.showGoButton=!0,this.goButton=goButton,this.element.after(this.goButton)),this.settings.showGoButton?(this.goButton&&this.goButton.length||(this.goButton=$('\n          <button class="btn-secondary go-button">\n            <span>'.concat(this.settings.goButtonCopy||Locale.translate("Go",{showBrackets:!1}),"</span>\n          </button>\n        "))),this.goButton.attr("id",utils.uniqueId(this.goButton,"searchfield-go-button-")),this.wrapper.addClass("has-go-button"),this.element.after(this.goButton)):this.wrapper.removeClass("has-go-button"),this.settings.clearable&&(this.element.clearable(),this.wrapper.addClass("has-close-icon-button"),this.xButton=this.wrapper.children(".icon.close"));var self=this,resizeTimer=new RenderLoopItem({duration:1,updateCallback:function updateCallback(){},timeoutCallback:function timeoutCallback(){self.calculateSearchfieldWidth()}});return renderLoop.register(resizeTimer),(!1===this.settings.collapsible||"mobile"===this.settings.collapsible&&breakpoints.isAbove("phone-to-tablet"))&&this.expand(!0),this},simpleAdjustOnBreakpoint:function simpleAdjustOnBreakpoint(){this.shouldBeFullWidth()?this.isFocused||this.wrapper[0].classList.remove("is-open"):this.wrapper[0].classList.add("is-open")},adjustOnBreakpoint:function adjustOnBreakpoint(){if(this.shouldBeFullWidth()){if(this.wrapper.removeAttr("style"),this.input.removeAttribute("style"),this.isFocused){if(this.appendToParent(),this.calculateOpenWidth(),this.setOpenWidth(),this.isExpanded)return;return void this.expand(!0)}return this.isCurrentlyCollapsible&&this.isExpanded&&this.collapse(),this.isContainedByFlexToolbar&&this.wrapper[0].classList.remove("is-open"),void this.setInitalWidth()}this.appendToButtonset(),this.isFocused||"mobile"===this.settings.collapsible?this.isExpanded||this.expand(!0):(this.isExpanded&&this.collapse(),this.setInitalWidth())},saveFocus:function saveFocus(){this.isFocused&&(this.focusElem=document.activeElement)},restoreFocus:function restoreFocus(){if(this.focusElem){var self=this,focusTimer=new RenderLoopItem({duration:1,updateCallback:function updateCallback(){},timeoutCallback:function timeoutCallback(){self.focusElem&&(self.focusElem.focus(),delete self.focusElem)}});renderLoop.register(focusTimer)}},appendToParent:function appendToParent(){this.containmentParent&&!this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper=this.wrapper.prev(),$(this.containmentParent).find(".buttonset").prepend(this.wrapper),utils.fixSVGIcons(this.wrapper),this.restoreFocus()))},appendToButtonset:function appendToButtonset(){this.containmentParent&&this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper instanceof $&&this.elemBeforeWrapper.length?(this.wrapper.insertAfter(this.elemBeforeWrapper),this.elemBeforeWrapper=null):this.wrapper.prependTo($(this.buttonsetElem)),$(this.toolbarParent).triggerHandler("scrollup"),utils.fixSVGIcons(this.wrapper),this.restoreFocus()))},shouldBeFullWidth:function shouldBeFullWidth(){var header=this.wrapper.closest(".header"),headerCondition=!1;return header.length&&(headerCondition=header.width()<breakpoints.phone),headerCondition||breakpoints.isBelow("phone-to-tablet")},shouldExpandOnMobile:function shouldExpandOnMobile(){return!0!==this.settings.collapsible&&("mobile"===this.settings.collapsible||this.shouldBeFullWidth())},coerceBooleanSettings:function coerceBooleanSettings(){this.settings=utils.coerceSettingsToBoolean(this.settings,["showAllResults","categoryMultiselect","showCategoryText","clearable"])},hasCategories:function hasCategories(){return this.settings.categories&&$.isArray(this.settings.categories)&&this.settings.categories.length>0},hasGoButton:function hasGoButton(){return this.settings.showGoButton&&this.goButton&&this.goButton.length},setupEvents:function setupEvents(){var _this=this,self=this;return self.element.on("updated.".concat(this.id),(function(e,settings){self.updated(settings)})).on("focus.".concat(this.id),(function(e){self.handleFocus(e)})).on("blur.".concat(this.id),(function(e){self.isContainedByFlexToolbar&&self.handleSafeBlur(e)})).on("click.".concat(this.id),(function(e){self.handleClick(e)})).on("keydown.".concat(this.id),(function(e){self.handleKeydown(e)})).on("beforeopen.".concat(this.id),(function(e,menu){self.handlePopupBeforeOpen(e,menu)})).on("safe-blur.".concat(this.id),(function(){self.handleSafeBlur()})).on("listclose.".concat(this.id),(function(){self.handleSafeBlur()})).on("input.".concat(this.id),(function(){self.checkContents()})),self.wrapper.on("mouseenter.".concat(this.id),(function(){$(this).addClass("is-hovered")})).on("mouseleave.".concat(this.id),(function(){$(this).removeClass("is-hovered")})),this.hasCategories()&&this.categoryButton.on("selected.".concat(this.id),(function(e,anchor){self.handleCategorySelected(e,anchor)})).on("focus.".concat(this.id),(function(e){self.handleCategoryFocus(e)})).on("blur.".concat(this.id),(function(){self.handleSafeBlur()})).on("close.".concat(this.id),(function(){self.handleSafeBlur()})).on("beforeopen.".concat(this.id),(function(e,menu){self.handlePopupBeforeOpen(e,menu)})),self.hasGoButton()&&self.goButton.on("click.".concat(this.id),(function(e){return self.handleGoButtonClick(e)})).on("click.".concat(this.id),(function(e){return self.handleGoButtonFocus(e)})).on("blur.".concat(this.id),(function(){return self.handleSafeBlur()})),this.isCollapsible?(this.wrapper.on("focusin.".concat(this.id),(function(e){self.handleFocus(e)})).on("focusout.".concat(this.id),(function(e){self.handleBlur(e)})).on("keydown.".concat(this.id),(function(e){self.handleKeydown(e)})).on("collapse.".concat(this.id),(function(){self.collapse()})),$("body").on("resize.".concat(this.id),(function(){self.adjustOnBreakpoint()})),self.adjustOnBreakpoint()):($("body").on("resize.".concat(this.id),(function(){self.simpleAdjustOnBreakpoint()})),self.simpleAdjustOnBreakpoint()),this.collapseButton&&this.collapseButton.length&&this.collapseButton.on("keydown.".concat(this.id),(function(e){self.collapseResponsive(e)})).on("click.".concat(this.id),(function(e){self.collapseResponsive(e)})).on("blur.".concat(this.id),(function(){return self.handleSafeBlur()})),this.toolbarParent&&$(this.toolbarParent).on("navigate.".concat(this.id),(function(){!self.isFocused&&self.isCurrentlyCollapsible&&self.collapse()})).on("rendered.".concat(this.id),(function(){self.element.removeClass("no-transition no-animation"),self.wrapper.removeClass("no-transition no-animation")})),self.element.on("beforepopulated.".concat(this.id),(function(e,items){items.length>0?self.settings.showAllResults&&self.addMoreLink():self.addNoneLink()})),self.settings.clearable&&(self.element.on("cleared.".concat(this.id),(function(){self.autocomplete&&self.autocomplete.closeList()})),self.xButton.on("blur.".concat(this.id),(function(e){self.handleSafeBlur(e)}))),self.element.on("listopen.".concat(this.id),(function(){var list=$("#autocomplete-list");self.wrapper.addClass("popup-is-open"),self.element.on("selected.".concat(_this.id),(function(thisE,a,ret){if(a.hasClass("more-results")){var callback=self.settings.allResultsCallback;callback&&"function"==typeof callback&&callback(ret)}})),list.find(".more-results, .no-results").on("focus.".concat(_this.id),(function(){var anchor=$(this);list.find("li").removeClass("is-selected"),anchor.parent("li").addClass("is-selected"),self.element.val("")}))})).on("listclose.".concat(this.id),(function(){var list=$("#autocomplete-list");self.element.off("selected.".concat(_this.id)),list.off("focus.".concat(_this.id))})),this},setAsActive:function setAsActive(force,doFocus){var _this2=this;if(force||!this.wrapper.hasClass("active")){this.addDocumentDeactivationEvents();var wrapperClasses=["has-focus","active"];(this.isCurrentlyCollapsible||this.isContainedByFlexToolbar)&&(this.expand(!0),this.isContainedByFlexToolbar&&wrapperClasses.push("is-open")),wrapperClasses.forEach((function(cssClass){_this2.wrapper[0].classList.add(cssClass)})),this.toolbarParent&&this.toolbarParent.classList.add("searchfield-active"),this.isExpanded||!0===doFocus&&this.element.focus()}},get isFocused(){var active=document.activeElement;if(this.wrapper[0].contains(active))return!0;if(this.autocomplete){var autocompleteListElem=this.autocomplete.list;if(autocompleteListElem&&autocompleteListElem[0].contains(active))return!0}if(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(active).length)return!0;return!!(this.xButton&&this.xButton.length&&this.xButton.has(active).length)},hasFocus:function hasFocus(){return warnAboutDeprecation("isFocused","hasFocus"),this.isFocused},handleFocus:function handleFocus(){this.setAsActive(!0)},handleBlur:function handleBlur(){this.handleSafeBlur()},handleSafeBlur:function handleSafeBlur(){var self=this;this.blurTimer&&this.blurTimer.destroy(!0),this.blurTimer=new RenderLoopItem({duration:1,updateCallback:function updateCallback(){},timeoutCallback:function safeBlurHandler(){self.isFocused||(self.wrapper[0].classList.remove("has-focus","active"),self.removeDocumentDeactivationEvents(),self.clearResponsiveState(),self.isCurrentlyCollapsible?self.collapse():self.isContainedByFlexToolbar&&self.wrapper[0].classList.remove("is-open"))}}),renderLoop.register(this.blurTimer)},clearResponsiveState:function clearResponsiveState(){this.toolbarParent&&this.toolbarParent.classList.remove("searchfield-active")},handleClick:function handleClick(){this.setAsActive()},addDocumentDeactivationEvents:function addDocumentDeactivationEvents(){if(!0!==this.hasDeactivationEvents){var self=this;$(document).on("click.".concat(this.id),(function(e){self.handleOutsideClick(e)})).on("keydown.".concat(this.id),(function(e){self.handleOutsideKeydown(e)})),this.hasDeactivationEvents=!0}},removeDocumentDeactivationEvents:function removeDocumentDeactivationEvents(){$(document).off("click.".concat(this.id," keydown.").concat(this.id)),this.hasDeactivationEvents=!1},handleOutsideClick:function handleOutsideClick(e){var target=e.target;this.isSearchfieldElement(target)||this.handleSafeBlur()},handleKeydown:function handleKeydown(e){var key=e.which,keyName=e.key;if(27===key&&Environment.browser.isIE11()&&e.preventDefault(),e.ctrlKey&&8===key&&this.element.val(""),9===key&&this.handleSafeBlur(),this.isContainedByFlexToolbar){["ArrowUp","Up","ArrowDown","Down"].indexOf(keyName)>-1&&this.collapse()}},handleOutsideKeydown:function handleOutsideKeydown(e){var key=e.which,target=e.target;9!==key||this.isSearchfieldElement(target)||this.handleSafeBlur()},handlePopupBeforeOpen:function handlePopupBeforeOpen(e,menu){if(this.isCollapsible&&(this.isExpanding||!this.isExpanded)||!menu)return!1;var contextClassMethod=this.wrapper.hasClass("context")?"addClass":"removeClass",altClassMethod=this.wrapper.hasClass("alternate")?"addClass":"removeClass";return menu[contextClassMethod]("context"),menu[altClassMethod]("alternate"),!!this.isExpanded||(this.categoryButton.focus(),!1)},handleGoButtonClick:function handleGoButtonClick(e){var action=this.settings.goButtonAction;if("function"==typeof action){var categorySelection,searchfieldValue=this.element.val();return this.hasCategories()&&(categorySelection=this.getCategoryData()),action(e,searchfieldValue,categorySelection)}},handleGoButtonFocus:function handleGoButtonFocus(){this.setAsActive(!0)},setCategoryButtonText:function setCategoryButtonText(textContent){if(this.settings.showCategoryText&&this.categoryButton.length){var text="",button=this.wrapper.find(".btn"),span=button.find("span");if(span&&span.length||(span=$('<span class="category"></span>').insertAfter(button.find(".icon").first())),span.empty(),"string"==typeof textContent&&textContent.length)span.text(textContent.trim());else{var item=this.getSelectedCategories();item.length&&(text=item.length>1?"".concat(item.length," ").concat(Locale.translate("Selected")):item.text().trim(),span.text(text))}}},isSearchfieldElement:function isSearchfieldElement(element){if($.contains(this.wrapper[0],element))return!0;if(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(element).length)return!0;return!1},getFillSize:function getFillSize(leftBoundary,rightBoundary){var leftBoundaryNum,rightBoundaryNum;function sanitize(boundary){if(!boundary)return 0;if(!isNaN(parseInt(boundary,10)))return parseInt(boundary,10);if(boundary instanceof jQuery){if(!boundary.length)return 0;boundary.is(".title")&&(boundary=boundary.next(".buttonset")),boundary=boundary[0]}return boundary}function getEdgeFromBoundary(boundary,edge){if(!isNaN(boundary))return null==boundary?0:boundary;edge&&"string"==typeof edge||(edge="left");var rect,edges=["left","right"];return-1===$.inArray(edge,edges)&&(edge=edges[0]),(boundary instanceof HTMLElement||boundary instanceof SVGElement)&&(rect=boundary.getBoundingClientRect()),rect[edge]}if(leftBoundary=sanitize(leftBoundary),rightBoundary=sanitize(rightBoundary),leftBoundaryNum=getEdgeFromBoundary(leftBoundary),rightBoundaryNum=getEdgeFromBoundary(rightBoundary,function whichEdge(){var e="left";return(leftBoundary===rightBoundary||$(rightBoundary).length&&$(rightBoundary).is(".buttonset"))&&(e="right"),e}()),!leftBoundaryNum&&!rightBoundaryNum)return 280;var distance=rightBoundaryNum-leftBoundaryNum;return distance<=280?280:distance>=450?450:distance},setClosedWidth:function setClosedWidth(){return this.setInitalWidth()},setOpenWidth:function setOpenWidth(){var subtractWidth=0;if(this.wrapper[0]&&(this.wrapper[0].style.width=this.openWidth),this.hasCategories()){var categoryButtonStyle=window.getComputedStyle(this.categoryButton[0]);subtractWidth+=this.categoryButton.width()+(parseInt(categoryButtonStyle.paddingLeft,10)+parseInt(categoryButtonStyle.paddingRight,10))+2*parseInt(categoryButtonStyle.borderLeftWidth,10)}if(this.hasGoButton()){var goButtonStyle=window.getComputedStyle(this.goButton[0]);subtractWidth+=this.goButton.width()+(parseInt(goButtonStyle.paddingLeft,10)+parseInt(goButtonStyle.paddingRight,10))+2*parseInt(goButtonStyle.borderLeftWidth,10)}subtractWidth>0&&(this.input.style.width="calc(100% - ".concat(subtractWidth,"px)")),delete this.openWidth},calculateOpenWidth:function calculateOpenWidth(){var width,buttonset=this.element.parents(".toolbar").children(".buttonset"),nextElem=this.wrapper.next();if(buttonset.length){if(nextElem.is(".title")&&(nextElem=buttonset),this.shouldBeFullWidth())return width="100%",$(this.toolbarParent).closest(".header").length&&(width="calc(100% - 40px)"),$(this.toolbarParent).closest(".tab-container.module-tabs").length&&(width="calc(100% - 1px)"),void(this.openWidth=width);var leftBoundary=buttonset.offset().left+10,rightBoundary=nextElem;rightBoundary.length||(rightBoundary=buttonset.offset().left+10+buttonset.outerWidth(!0)),width=this.getFillSize(leftBoundary,rightBoundary),this.openWidth="".concat(width-6,"px")}},calculateSearchfieldWidth:function calculateSearchfieldWidth(){var targetWidthProp,baseWidth="100%",subtractWidth=0;this.element[0].getAttribute("style")&&this.element[0].removeAttribute("style");var computedStyle=window.getComputedStyle(this.element[0]);computedStyle.width&&!this.isContextSearch&&(baseWidth=computedStyle.width),this.hasCategories()&&(subtractWidth+=this.categoryButton.outerWidth(!0)),this.hasGoButton()&&(subtractWidth+=this.goButton.outerWidth(!0)),subtractWidth>0&&(targetWidthProp="calc(".concat(baseWidth," - ").concat(subtractWidth,"px)")),targetWidthProp&&(this.element[0].style.width=targetWidthProp)},handleCategorySelected:function handleCategorySelected(e,anchor){this.element.trigger("selected",[anchor]),this.settings.showCategoryText&&(this.setCategoryButtonText(e,anchor.text().trim()),this.calculateSearchfieldWidth(),this.settings.categoryMultiselect||this.setAsActive(!0,!0))},handleCategoryFocus:function handleCategoryFocus(){this.saveFocus(),this.setAsActive(!0)},getCategories:function getCategories(){return this.list.children("li:not(.separator)")},getSelectedCategories:function getSelectedCategories(){return this.getCategories().filter(".is-checked")},getCategoryData:function getCategoryData(onlyReturnSelected){var categories=this.getCategories(),data=[];return categories.each((function(){var checked=this.classList.contains("is-checked");if(!0!==onlyReturnSelected||!1!==checked){var category={name:this.innerText,checked:checked};this.id&&(category.id=this.id);var value=this.getAttribute("data-value");void 0!==value&&(category.value=value),data.push(category)}})),data},updateCategories:function updateCategories(categories){this.settings.categories=categories,this.setCategories(this.settings.categories)},setCategories:function setCategories(categories){this.list.empty();var self=this,valueTypes=["string","number"],previouslySelected=!1;categories.forEach((function(val){if("string"==typeof val&&(val={name:val}),val.name){var id="";"string"==typeof val.id&&val.id.length&&(id=' id="'.concat(val.id,'"'));var value="";valueTypes.indexOf(_typeof(val.value))>-1&&(value=' data-value="'.concat(val.value,'"'));var selected="";!0===val.checked&&!0!==previouslySelected&&(selected=' class="is-checked"',self.settings.categoryMultiselect||(previouslySelected=!0)),self.list.append("<li".concat(selected).concat(id).concat(value,'><a href="#">').concat(val.name,"</a></li>"))}}));var api=this.categoryButton.data("popupmenu");api&&"function"==typeof api.updated&&api.updated()},expand:function expand(noFocus){var _this3=this,self=this;return new Promise((function(resolve){if(self.isExpanded||self.isExpanding||self.isCollapsing)resolve();else{var notFullWidth=!self.shouldBeFullWidth();self.isExpanding=!0,notFullWidth||self.appendToParent(),self.wrapper.removeAttr("style"),self.input.removeAttribute("style");var buttonsetWidth=0;self.buttonsetElem&&(buttonsetWidth=parseInt(window.getComputedStyle(self.buttonsetElem).width,10));var containerSizeSetters={buttonset:buttonsetWidth+280};_this3.isContainedByFlexToolbar&&!breakpoints.isAbove("phone-to-tablet")||_this3.wrapper[0].classList.add("is-open"),_this3.calculateOpenWidth(),_this3.setOpenWidth(),(!noFocus||"ios"===Environment.os.name||self.isFocused&&document.activeElement!==self.input)&&(self.focusElem&&(self.focusElem=self.input),self.input.focus());var eventArgs=[];containerSizeSetters&&eventArgs.push(containerSizeSetters),self.element.trigger("beforeexpand"),$(self.toolbarParent).triggerHandler("recalculate-buttons",eventArgs);var expandTimer=new RenderLoopItem({duration:10,updateCallback:function updateCallback(){},timeoutCallback:function timeoutCallback(){$(self.toolbarParent).triggerHandler("recalculate-buttons",eventArgs),self.element.trigger("expanded"),delete self.isExpanding,self.isExpanded=!0,!self.isCurrentlyCollapsible||self.isFocused||self.focusElem||self.handleSafeBlur()}});renderLoop.register(expandTimer)}}))},collapse:function collapse(){var _this4=this,self=this;return new Promise((function(resolve){if(self.isExpanded||!self.isExpanding||self.isCollapsing){self.isCollapsing=!0,self.wrapper.removeAttr("style"),self.appendToButtonset(),self.checkContents(),self.toolbarParent&&self.setInitalWidth(),self.clearResponsiveState(),self.wrapper[0].classList.remove("active","is-open"),Environment.browser.isIE11&&self.wrapper[0].classList.remove("is-open"),!_this4.isContainedByFlexToolbar&&_this4.isFocused||self.wrapper[0].classList.remove("has-focus"),self.categoryButton&&self.categoryButton.length&&self.categoryButton.data("popupmenu").close(!1,!0),self.element.trigger("beforecollapse"),delete self.isExpanded,delete self.isExpanding;var collapseTimer=new RenderLoopItem({duration:10,updateCallback:function updateCallback(){},timeoutCallback:function timeoutCallback(){delete self.isCollapsing,$(self.toolbarParent).triggerHandler("recalculate-buttons"),self.element.trigger("collapsed"),resolve()}});renderLoop.register(collapseTimer)}else resolve()}))},collapseResponsive:function collapseResponsive(e){if(this.previouslyCollapsedByKey&&"click"===e.type)delete this.previouslyCollapsedByKey;else{var self=this,dir=1;e&&!e.key&&(dir=0,this.toolbarFlexItem&&this.toolbarFlexItem.focused&&(dir=1)),"keydown"===e.type&&(this.previouslyCollapsedByKey=!0),this.collapse().then((function(){self.wrapper.trigger("collapsed-responsive",[dir])}))}},get hasText(){return""!==(this.input.value?this.input.value.trim():"")},checkContents:function checkContents(){return this.wrapper[0].classList[this.hasText?"add":"remove"]("has-text")},setInitalWidth:function setInitalWidth(){var size;this.settings.collapsible&&!this.shouldBeFullWidth()&&this.hasText&&(this.settings.collapseSize&&(size="function"==typeof this.settings.collapseSize?this.settings.collapseSize(this):parseInt(this.settings.collapseSize,10)),isNaN(size)?this.wrapper[0]&&(this.wrapper[0].style.width=""):this.wrapper[0]&&(this.wrapper[0].style.width="".concat(size,"px")))},addMoreLink:function addMoreLink(){var list=$("#autocomplete-list"),val=this.element.val();if(!($(".more-results",list).length>0)){var separator=$('<li class="separator" role="presentation"></li>').appendTo(list),more=$('<li role="presentation"></li>').appendTo(list);this.moreLink=$('<a href="#" class="more-results" tabindex="-1" role="menuitem"></a>').html("<span>".concat(Locale.translate("AllResults"),' "').concat(xssUtils.ensureAlphaNumericWithSpaces(val),'"</span>')).appendTo(more),this.autocomplete.maxWidth&&separator.width("".concat(this.autocomplete.maxWidth,"px"))}},addNoneLink:function addNoneLink(){var list=$("#autocomplete-list");if(!($(".no-results",list).length>0)){var none=$('<li role="presentation" class="is-placeholder"></li>').appendTo(list);this.noneLink=$('<a href="#" class="no-results" disabled="disabled" tabindex="-1" role="menuitem" aria-disabled="true"></a>').html("<span>".concat(Locale.translate("NoResults"),"</span>")).appendTo(none)}},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings),Object.prototype.hasOwnProperty.call(settings,"collapseSize")&&void 0===settings.collapseSize&&(this.settings.collapseSize=settings.collapseSize)),this.teardown().init()},disable:function disable(){this.wrapper.addClass("is-disabled"),this.element.prop("disabled",!0)},enable:function enable(){this.wrapper.removeClass("is-disabled"),this.element.prop("disabled",!1)},teardown:function teardown(){return this.element.off(["updated.".concat(this.id),"focus.".concat(this.id),"blur.".concat(this.id),"click.".concat(this.id),"keydown.".concat(this.id),"beforeopen.".concat(this.id),"input.".concat(this.id),"listopen.".concat(this.id),"listclose.".concat(this.id),"safe-blur.".concat(this.id),"selected.".concat(this.id),"populated.".concat(this.id),"cleared.".concat(this.id)].join(" ")),this.wrapper.off(["mouseenter.".concat(this.id),"mouseleave.".concat(this.id),"focusin.".concat(this.id),"focusout.".concat(this.id),"keydown.".concat(this.id),"collapse.".concat(this.id)].join(" ")),this.toolbarParent&&$(this.toolbarParent).off("navigate.toolbarsearchfield"),this.goButton&&this.goButton.length&&(this.goButton.off("click.".concat(this.id," blur.").concat(this.id)).remove(),delete this.goButton),this.categoryButton&&this.categoryButton.length&&(this.categoryButton.off().remove(),delete this.categoryButton),this.collapseButton&&this.collapseButton.length&&(this.collapseButton.off().remove(),delete this.collapseButton,delete this.previouslyCollapsedByKey),this.removeDocumentDeactivationEvents(),$("body").off("resize.".concat(this.id)),this.autocomplete&&this.autocomplete.destroy(),this.wrapper.hasClass("context")&&this.element.addClass("context"),this.element.next(".icon").remove(),this.element.parent().hasClass("searchfield-wrapper")&&(this.element.parent().find("ul").remove(),this.element.parent().find(".icon").remove()),this.xButton&&this.xButton.length&&(this.xButton.off("blur.".concat(this.id)),this.xButton.remove()),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"searchfield")}},$.fn.searchfield=function(settings){return this.each((function(){var instance=$.data(this,"searchfield");instance?instance.updated(settings):instance=$.data(this,"searchfield",new SearchField(this,settings))}))};var APPLICATIONMENU_DEFAULTS={breakpoint:"phone-to-tablet",dismissOnClickMobile:!1,filterable:!1,filterMode:"contains",openOnLarge:!1,triggers:[".application-menu-trigger"],onExpandSwitcher:null,onCollapseSwitcher:null};function ApplicationMenu(element,settings){return this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,APPLICATIONMENU_DEFAULTS),this.init()}ApplicationMenu.prototype={get searchfieldAPI(){if(this.searchfield&&this.searchfield.length)return this.searchfield.data("searchfield")},init:function init(){this.setup().handleEvents()},setup:function setup(){var _this=this;this.hasTrigger=!1,this.isAnimating=!1,this.element.find(".application-menu-footer").length&&this.element.addClass("has-menu-footer"),this.hasTriggers()||(this.triggers=$()),this.menu=this.element;var openOnLarge=this.element.attr("data-open-on-large");this.settings.openOnLarge=void 0!==openOnLarge?"true"===openOnLarge:this.settings.openOnLarge;var dataBreakpoint=this.element.attr("data-breakpoint");this.settings.breakpoint=void 0!==breakpoints[dataBreakpoint]?dataBreakpoint:this.settings.breakpoint,this.modifyTriggers(this.settings.triggers,!1,!0),this.scrollTarget=this.menu.parents(".header");var masthead=this.menu.prevAll(".masthead"),moduleTabs=this.menu.prevAll(".module-tabs");masthead.length>0&&(this.scrollTarget=masthead,this.menu.addClass("short")),moduleTabs.length>0&&(this.scrollTarget=moduleTabs),this.element.find(".application-menu-switcher-panel .accordion").accordion(),this.accordion=this.menu.find(".accordion").last(),this.accordion.addClass("panel").addClass("inverse");var accordion=this.accordion.data("accordion");if(accordion||(this.accordion.accordion(),accordion=this.accordion.data("accordion")),this.accordionAPI=accordion,this.searchfield=this.element.find(".searchfield, .searchfield-wrapper"),this.settings.filterable&&"function"==typeof $.fn.searchfield){this.searchfield.length?this.searchfield.is(".searchfield-wrapper")&&(this.searchfield=this.searchfield.children(".searchfield")):this.searchfield=$("".concat('<div class="searchfield-wrapper"><label for="application-menu-searchfield">').concat(Locale.translate("Search"),"</label>")+'<input id="application-menu-searchfield" class="searchfield" /></div>').prependTo(this.element),this.element.addClass("has-searchfield");var self=this;this.searchfield.searchfield({clearable:!0,filterMode:this.settings.filterMode,source:function source(term,done,args){done(term,self.accordion.data("accordion").toData(!0,!0),args)},searchableTextCallback:function searchableTextCallback(item){return item.text||item.contentText||""},resultIteratorCallback:function resultIteratorCallback(item){return item.highlightTarget="text",item},clearResultsCallback:function clearResultsCallback(){self.searchfieldAPI&&!self.searchfieldAPI.isFocused&&self.accordionAPI.unfilter()},displayResultsCallback:function displayResultsCallback(results,done,term){return self.filterResultsCallback(results,done,term)}}),this.searchfield.on("cleared.".concat("applicationmenu"),(function(){self.accordionAPI.unfilter()}))}this.isOpen()?this.openMenu(!1,!1,!0):this.adjustHeight();var switchTrigger=this.element.find(".application-menu-switcher-trigger");switchTrigger.length>0&&(this.switcherPanel=switchTrigger.next(".expandable-area"),this.switcherPanel.data("expandablearea")||this.switcherPanel.expandablearea(),this.switcherPanel.on("beforeexpand.applicationmenu",(function(){var height=_this.element.height();_this.element.addClass("has-open-switcher"),_this.switcherPanel.find(".content").height(height-71),_this.settings.onExpandSwitcher&&_this.settings.onExpandSwitcher(_this,_this.element,_this.settings)})).on("aftercollapse.applicationmenu",(function(){_this.element.removeClass("has-open-switcher"),_this.settings.onCollapseSwitcher&&_this.settings.onCollapseSwitcher(_this,_this.element,_this.settings)})));return this},getAdjacentContainerElement:function getAdjacentContainerElement(){var container=this.element.next(".page-container");return container.length||(container=$("body")),container},handleTriggerEvents:function handleTriggerEvents(){var self=this;this.triggers.length&&this.triggers.off("click.applicationmenu").on("click.applicationmenu",(function triggerClickHandler(e){return!$(e.currentTarget).find(".icon.app-header").hasClass("go-back")&&(!self.isAnimating&&(self.menu.hasClass("is-open")?self.closeMenu(!0):self.openMenu(void 0,!0),!0))})),$(document).on("keydown.applicationmenu",(function(e){self.handleKeyDown(e)}))},handleKeyDown:function handleKeyDown(e){return!(121===e.which&&!e.shiftKey)||(e.preventDefault(),this.isOpen()?(this.closeMenu(!0),this.triggers.length&&this.triggers.eq(0).focus()):this.openMenu(),!1)},notify:function notify(anchor,value){if(anchor&&void 0!==anchor&&(anchor instanceof HTMLElement&&(anchor=$(anchor)),anchor.is("a"))){var tag=anchor.find(".tag");if(value&&void 0!==value&&0!==parseInt(value,10))return tag.length||(tag=$('<span class="tag"></span>').appendTo(anchor)),tag.text(value.toString()),tag;tag.length&&tag.remove()}},adjustHeight:function adjustHeight(){var isSticky=this.scrollTarget.is(".is-sticky"),offset=this.scrollTarget.outerHeight(!0)-(isSticky?0:$(window).scrollTop());this.scrollTarget.prev().is(".masthead")&&(offset+=this.scrollTarget.prev().outerHeight(!0)),this.menu[0].style.height=offset>0?"calc(100% - ".concat(offset,"px)"):"100%"},toggleScrollClass:function toggleScrollClass(){if("ie"===Environment.browser.name&&"11"===Environment.browser.version){var el=this.element[0];el&&el.classList.contains("has-menu-footer")&&(el.scrollHeight>el.clientHeight?el.classList.add("has-scrollbar"):el.classList.remove("has-scrollbar"))}},isLargerThanBreakpoint:function isLargerThanBreakpoint(){return breakpoints.isAbove(this.settings.breakpoint)},isOpen:function isOpen(){return this.menu[0].classList.contains("is-open")},testWidth:function testWidth(){if(this.isOpen()){if(breakpoints.isAbove(this.settings.breakpoint))return void this.element[0].classList.remove("show-shadow");if(this.element[0].classList.add("show-shadow"),this.isAnimating)return;this.userOpened||this.closeMenu()}else breakpoints.isBelow(this.settings.breakpoint)||this.userClosed||!this.settings.openOnLarge||this.isAnimating||this.openMenu(!0)},openMenu:function openMenu(noFocus,userOpened,openedByClass){if(!0!==this.isAnimating){var self=this,transitionEnd=$.fn.transitonEndName;if(openedByClass||(this.isAnimating=!0),this.adjustHeight(),this.triggers.each((function(){var trig=$(this);if(trig.parents(".header").length>0||trig.parents(".masthead").length>0){if(trig.parents(".header, .masthead").parents(".page-container").length)return;trig.find(".icon.app-header").removeClass("go-back").addClass("close"),trig.trigger("icon-change")}})),openedByClass||(this.menu.off("".concat(transitionEnd,".applicationmenu")),this.menu[0].style.display="",this.menu[0].offsetHeight,this.menu.addClass("is-open"),Environment.features.touch&&$("body").addClass("is-open-touch")),breakpoints.isBelow(this.settings.breakpoint)&&this.menu.addClass("show-shadow"),noFocus&&!0===noFocus||this.menu.find(".is-selected > a").focus(),"ios"===Environment.os.name)this.getAdjacentContainerElement().addClass("ios-click-target");openedByClass?isOpen():(this.menu.one("".concat(transitionEnd,".applicationmenu"),isOpen),this.timeout=setTimeout(isOpen,300)),setTimeout((function(){$(document).on("click.applicationmenu",(function(e){$(e.target).parents(".application-menu").length<1&&!self.isLargerThanBreakpoint()&&self.closeMenu(!0)}))}),0)}function isOpen(){null!==self.timeout&&(clearTimeout(self.timeout),self.timeout=null),userOpened&&(self.userOpened=!0,self.userClosed=void 0),openedByClass||(self.isAnimating=!1,self.element.trigger("applicationmenuopen"),$("body").triggerHandler("resize")),self.toggleScrollClass(),self.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}},closeMenu:function closeMenu(userClosed){if(!0!==this.isAnimating){var self=this,transitionEnd=$.fn.transitionEndName();if(this.isAnimating=!0,this.triggers.each((function(){var trig=$(this);(trig.parents(".header").length>0||trig.parents(".masthead").length>0)&&(trig.find(".icon.app-header").removeClass("close"),trig.trigger("icon-change"))})),"ios"===Environment.os.name)this.getAdjacentContainerElement().removeClass("ios-click-target");this.menu.one("".concat(transitionEnd,".applicationmenu"),close),this.timeout=setTimeout(close,300),this.menu.removeClass("is-open show-shadow").find("[tabindex]"),$(document).off("click.applicationmenu"),Environment.features.touch&&$("body").removeClass("is-open-touch")}function close(){null!==self.timeout&&(clearTimeout(self.timeout),self.timeout=null),self.menu.off("".concat(transitionEnd,".applicationmenu")),self.menu[0].style.display="none",self.isAnimating=!1,userClosed&&(self.userOpened=void 0,self.userClosed=!0),self.element.trigger("applicationmenuclose"),$("body").triggerHandler("resize")}},hasTriggers:function hasTriggers(){return void 0!==this.triggers&&this.triggers instanceof $&&this.triggers.length},modifyTriggers:function modifyTriggers(triggers,remove,norebuild){if(triggers&&triggers.length){var changed=$();$.each(triggers,(function(i,obj){changed=changed.add($(obj))})),this.triggers=this.triggers[remove?"not":"add"](changed),this.handleTriggerEvents(),norebuild&&!0===norebuild||this.updated()}},filterResultsCallback:function filterResultsCallback(results,done){if(!results||!results.length)return this.accordionAPI.unfilter(),void done();var targets=$(results.map((function(item){return item.element})));this.accordionAPI.filter(targets,!0),this.element.triggerHandler("filtered",[results]),done()},handleSearchfieldInputEvent:function handleSearchfieldInputEvent(){if(this.searchfield&&this.searchfield.length){var val=this.searchfield.val();if(!val||""===val){var filteredParentHeaders=this.accordion.find(".has-filtered-children");this.accordionAPI.headers.removeClass("filtered has-filtered-children"),this.accordionAPI.collapse(filteredParentHeaders),this.accordionAPI.updated(),this.element.triggerHandler("filtered",[[]])}}},handleDismissOnClick:function handleDismissOnClick(){this.settings.dismissOnClickMobile&&(this.userOpened=!1,this.isLargerThanBreakpoint()||this.closeMenu())},closeSwitcherPanel:function closeSwitcherPanel(){if(this.switcherPanel){var expandableArea=this.switcherPanel.data("expandablearea");if(expandableArea&&(expandableArea.close(),this.settings.dismissOnClickMobile)){if(this.userOpened=!1,this.isLargerThanBreakpoint())return;this.closeMenu()}}},teardown:function teardown(){if(this.menu.off("animateopencomplete animateclosedcomplete").removeClass("short").removeAttr("style"),$(window).off("scroll.applicationmenu"),$("body").off("resize.applicationmenu"),$(document).off(["click.applicationmenu","open-applicationmenu","close-applicationmenu","dismiss-applicationmenu","keydown.applicationmenu"].join(" ")),this.element.find(".expandable-area").off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.accordion.off(["blur.applicationmenu","selected.applicationmenu","followlink.applicationmenu","afterexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.accordionAPI&&"function"==typeof this.accordionAPI.destroy&&(this.isFiltered&&this.accordionAPI.collapse(),this.accordionAPI.destroy()),this.switcherPanel&&this.switcherPanel.off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.searchfield&&this.searchfield.length){this.searchfield.off(["input.applicationmenu","cleared.".concat("applicationmenu")].join(" "));var sfAPI=this.searchfield.data("searchfield");sfAPI&&sfAPI.destroy()}return this.hasTriggers()&&this.triggers.off("click.applicationmenu"),this},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.teardown().init()},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"applicationmenu")},handleEvents:function handleEvents(){var self=this;return this.handleTriggerEvents(),this.menu.on("notify.applicationmenu",(function(e,anchor,value){self.notify(anchor,value)})).on("updated.applicationmenu",(function(){self.updated()})),"ie"===Environment.browser.name&&"11"===Environment.browser.version&&self.element.find(".expandable-area").on("beforeexpand.applicationmenu",(function(){self.element[0].classList.remove("has-scrollbar")})).on("aftercollapse.applicationmenu",(function(){self.toggleScrollClass()})),this.accordion.on("blur.applicationmenu",(function(){self.closeMenu()})).on("selected.applicationmenu",(function(){self.handleDismissOnClick()})).on("followlink.applicationmenu",(function(){self.handleDismissOnClick()})).on("afterexpand.applicationmenu aftercollapse.applicationmenu",(function(){self.toggleScrollClass()})),$(document).on("open-applicationmenu",(function(){self.openMenu(void 0,!0)})).on("close-applicationmenu",(function(){self.closeMenu()})).on("dismiss-applicationmenu",(function(){self.handleDismissOnClick()})),$(window).on("scroll.applicationmenu",(function(){self.adjustHeight()})),$("body").on("resize.applicationmenu",(function(){self.testWidth(),self.toggleScrollClass()})),!0===this.settings.filterable&&this.searchfield&&this.searchfield.length&&this.searchfield.on("input.applicationmenu",(function(e){self.handleSearchfieldInputEvent(e)})),this.settings.openOnLarge&&this.isLargerThanBreakpoint()&&(this.menu.addClass("no-transition"),$(".page-container").addClass("no-transition")),this.testWidth(),setTimeout((function(){self.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}),800),this}},$.fn.applicationmenu=function(settings){return this.each((function(){var instance=$.data(this,"applicationmenu");return instance?instance.updated(settings):instance=$.data(this,"applicationmenu",new ApplicationMenu(this,settings)),instance}))};var BLOCKGRID_DEFAULTS={dataset:[],selectable:!1,paging:!1,pagesize:25,pagesizes:[10,25,50,75]};function Blockgrid(element,settings){this.element=$(element),this.settings=utils.mergeSettings(element,settings,BLOCKGRID_DEFAULTS),settings.dataset&&(this.settings.dataset=settings.dataset),this.init()}Blockgrid.prototype={get pagerAPI(){return this.element.data("pager")},init:function init(){return this.selectedRows=[],this.handlePaging(),this.build().handleEvents()},build:function build(){return this.settings.paging&&this.element.empty(),this.render(),this},handleEvents:function handleEvents(){var _this=this,self=this;return this.element.on("click.".concat("blockgrid"),".block",(function(e){var activeBlock=$(e.currentTarget),target=$(e.target),isCheckbox=target.is(".checkbox-label")||target.is(".checkbox");setTimeout((function(){self.select(activeBlock,isCheckbox)}),0),e.stopPropagation(),e.preventDefault()})),this.element.on("focus.".concat("blockgrid"),".checkbox",(function(e){$(e.currentTarget).parent().addClass("has-focus")})),this.element.on("blur.".concat("blockgrid"),".checkbox",(function(e){$(e.currentTarget).parent().removeClass("has-focus")})),this.element.on("keypress.".concat("blockgrid"),".block",(function(e){if(32===e.which){var activeBlock=$(e.target);self.select(activeBlock,!1)}})),this.element.on("updated.".concat("blockgrid"),(function(){self.updated()})),this.pagerAPI&&this.element.on("page.".concat("blockgrid"),(function(){_this.previousFocusedElement=!0,_this.build()})).on("pagesizechange.".concat("blockgrid"),(function(){_this.previousFocusedElement=!0,_this.build()})),this},handlePaging:function handlePaging(){this.settings.paging&&(this.element.addClass("paginated"),this.element.pager({componentAPI:this,dataset:this.settings.dataset,pagesize:this.settings.pagesize,pagesizes:this.settings.pagesizes}))},selectBlock:function selectBlock(activeBlock,isCheckbox){return deprecateMethod(this.select,this.selectBlock).apply(this,[activeBlock,isCheckbox])},select:function select(activeBlock,isCheckbox){var allBlocks=this.element.find(".block"),allChecks=this.element.find(".checkbox"),activeCheckbox=activeBlock.find(".checkbox"),isChecked=activeCheckbox.is(":checked"),action="",idx=Number(activeCheckbox.data("idx"));if("single"===this.settings.selectable&&(this.selectedRows=[],allBlocks.removeClass("is-selected").removeAttr("aria-selected"),allChecks.prop("checked",!1)),"multiple"===this.settings.selectable&&isChecked||"mixed"===this.settings.selectable&&isCheckbox&&isChecked){activeBlock.removeClass("is-selected").removeAttr("aria-selected"),activeCheckbox.prop("checked",!1);for(var i=0;i<this.selectedRows.length;i++)idx===this.selectedRows[i].idx&&this.selectedRows.splice(i,1);this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}])}else{if(!1===this.settings.selectable||"mixed"===this.settings.selectable&&!isCheckbox||(isChecked||(activeBlock.addClass("is-selected").attr("aria-selected","true"),activeCheckbox.prop("checked",!0)),this.selectedRows.push({idx:idx,data:this.settings.dataset[idx],elem:activeBlock}),action=isChecked?"deselected":"selected"),"mixed"===this.settings.selectable&&!isCheckbox){var isActivated=activeBlock.hasClass("is-activated");return allBlocks.removeClass("is-activated"),void(isActivated?(activeBlock.removeClass("is-activated"),this.element.triggerHandler("deactivated",[{row:idx,item:this.settings.dataset[idx]}])):(activeBlock.addClass("is-activated"),this.element.triggerHandler("activated",[{row:idx,item:this.settings.dataset[idx]}])))}this.element.triggerHandler(isChecked?"deselected":"selected",[{selectedRows:this.selectedRows,action:action}])}},render:function render(){var _this2=this,blockelements="",displayedDataset=this.settings.dataset,selectText=Locale?Locale.translate("Select"):"Select";if(this.pagerAPI){var pagerInfo=this.pagerAPI.state;if(pagerInfo.pages>1){var trueActivePage=pagerInfo.activePage>0?pagerInfo.activePage-1:0,firstRecordIdx=pagerInfo.pagesize*trueActivePage,lastRecordIdx=pagerInfo.pagesize*(trueActivePage+1);if((displayedDataset=displayedDataset.slice(firstRecordIdx,lastRecordIdx)).length!==this.settings.dataset.length)for(var j=0;j<lastRecordIdx-firstRecordIdx+1&&!displayedDataset[j].id;j++)displayedDataset[j].id=firstRecordIdx+j}}var checkedIdxs=[];this.selectedRows.forEach((function(row){checkedIdxs.push(row.idx)}));for(var i=0;i<displayedDataset.length;i++){var data=displayedDataset[i],tabindex="mixed"===this.settings.selectable?"0":"-1",selected="",checked="";checkedIdxs.indexOf(data.id)>-1&&(selected=" is-selected",checked=" checked"),blockelements+='<div class="block is-selectable'.concat(selected,'" role="listitem" tabindex="0">\n        <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox').concat(i,'" tabindex="').concat(tabindex,'" data-idx="').concat(data.id||i,'"').concat(checked,'>\n        <label for="checkbox').concat(i,'" class="checkbox-label">\n          <span class="audible">').concat(selectText,'</span>\n        </label>\n        <img alt="Placeholder Image" src="').concat(data.img||data.image,'" class="image-round">\n        <p> ').concat(data.maintxt||data.title," <br> ").concat(data.subtxt||data.subtitle," </p>\n      </div>")}this.element.attr("role","list").append(blockelements),this.previousFocusedElement&&setTimeout((function(){_this2.element.find(".block").first().focus(),delete _this2.previousFocusedElement}),0)},renderBlock:function renderBlock(){return deprecateMethod(this.render,this.renderBlock).apply(this)},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.teardown(),this.init(),this},teardown:function teardown(){return this.element.off("updated.".concat("blockgrid")),this.element.off("click.".concat("blockgrid")),this.element.empty(),this.selectedRows=[],this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"blockgrid")}},$.fn.blockgrid=function(settings){return this.each((function(){var instance=$.data(this,"blockgrid");instance?instance.updated(settings):instance=$.data(this,"blockgrid",new Blockgrid(this,settings))}))};var BUSYINDICATOR_DEFAULTS={blockUI:!0,text:null,displayDelay:1e3,timeToComplete:0,transparentOverlay:!1,overlayOnly:!1};function BusyIndicator(element,settings){this.settings=utils.mergeSettings(element,settings,BUSYINDICATOR_DEFAULTS),this.element=$(element),this.init()}BusyIndicator.prototype={init:function init(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.setup().handleEvents()},setup:function setup(){var blockUI=this.element.attr("data-block-ui"),delay=this.element.attr("data-display-delay"),completionTime=this.element.attr("data-completion-time");this.blockUI=void 0!==blockUI?blockUI:this.settings.blockUI,this.settings.overlayOnly||(this.loadingText=this.settings.text?this.settings.text:Locale.translate("Loading"),this.label&&this.label.text(this.loadingText));var isDelayDefined=void 0!==delay&&!isNaN(delay)&&parseInt(delay,10)>20,displayDelay=!isNaN(this.settings.displayDelay)&&this.settings.displayDelay>=20?this.settings.displayDelay:20;return this.delay=isDelayDefined?delay:displayDelay,this.completionTime=void 0===completionTime||isNaN(completionTime)?this.settings.timeToComplete:parseInt(completionTime,10),this},activate:function activate(){var self=this;if(!self.isActive()){if(this.container)return self.closeTimeout&&clearTimeout(self.closeTimeout),this.label.remove(),this.settings.overlayOnly||(this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container),this.element.is("input, .dropdown, .multiselect, .busy-xs, .busy-sm")&&this.label.addClass("audible")),void this.container.removeClass("is-hidden").trigger("afterstart");this.container=$('<div class="busy-indicator-container is-hidden"></div>').attr({"aria-live":"polite",role:"status"}),this.loader=$('<div class="busy-indicator active"></div>').appendTo(this.container),this.settings.overlayOnly||($('<div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div>').appendTo(this.loader),this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container));var transparency="";if(this.blockUI&&(this.settings.transparentOverlay&&(transparency=" transparent"),this.originalPositionProp=this.element[0].style.position,this.element[0].style.position="relative",this.overlay=$('<div class="overlay busy is-hidden'.concat(transparency,'"></div>')).appendTo(this.element),this.container.addClass("blocked-ui")),this.label&&this.element.is(".busy-xs, .busy-sm")&&this.label.addClass("audible"),this.element.is("input, .dropdown, .multiselect")){var target;if(this.element.addClass("is-loading"),this.blockUI&&this.element.addClass("is-blocked"),this.label&&this.label.addClass("audible"),this.element.is("input"))target=this.element,this.container.insertAfter(this.isInlineLabel?this.inlineLabel:this.element);else target=this.element.data("dropdown").pseudoElem,this.container.appendTo(target.parent());this.overlay&&this.overlay.insertAfter(this.container);for(var rect=target.position(),h=target.outerHeight(),w=target.outerWidth(),elements=this.container.add(this.overlay),setCssStyle=function setCssStyle(el,key,value){el.style[key]="".concat(value,"px")},i=0,l=elements.length;i<l;i++)setCssStyle(elements[i],"left",rect.left),setCssStyle(elements[i],"top",rect.top),setCssStyle(elements[i],"bottom",rect.bottom),setCssStyle(elements[i],"right",rect.right),setCssStyle(elements[i],"height",h),setCssStyle(elements[i],"width",w)}else this.container.appendTo(this.element);setTimeout((function(){self.container&&self.container.removeClass("is-hidden"),self.overlay&&self.overlay.removeClass("is-hidden"),self.blockUI&&self.addScrollParent()}),self.delay),this.element.trigger("afterstart"),$.fn.cssPropSupport("animation")||(self.isAnimating=!0,self.animateWithJS()),this.completionTime>0&&setTimeout((function(){self.element.trigger("complete")}),self.completionTime)}},close:function close(fromEvent){var self=this;self.isActive()&&(this.removeScrollParent(),fromEvent&&(this.element.removeClass("is-loading"),this.element.removeClass("is-blocked")),this.container&&this.container.addClass("is-hidden"),this.overlay&&this.overlay.addClass("is-hidden"),self.closeTimeout=setTimeout((function(){clearTimeout(self.closeTimeout),self.container&&self.container.remove(),self.container=void 0,self.loader=void 0,self.label=void 0,self.overlay&&(self.overlay.remove(),self.element[0].style.position=self.originalPositionProp,self.originalPositionProp=void 0),self.overlay=void 0,self.element.trigger("aftercomplete.busyindicator"),self.element.off("complete.busyindicator")}),600))},animateWithJS:function animateWithJS(){var self=this,bar1=this.container.find(".bar.one"),bar2=this.container.find(".bar.two"),bar3=this.container.find(".bar.three"),bar4=this.container.find(".bar.four"),bar5=this.container.find(".bar.five"),t=0;setInterval((function animate(){self.isAnimating?(1===(t+=1)&&bar1.addClass("half"),13===t&&(bar1.removeClass("half").addClass("full"),bar2.addClass("half")),26===t&&(bar1.removeClass("full").addClass("half"),bar2.removeClass("half").addClass("full"),bar3.addClass("half")),39===t&&(bar1.removeClass("half"),bar2.removeClass("full").addClass("half"),bar3.removeClass("half").addClass("full"),bar4.addClass("half")),51===t&&(bar2.removeClass("half"),bar3.removeClass("full").addClass("half"),bar4.removeClass("half").addClass("full"),bar5.addClass("half")),64===t&&(bar3.removeClass("half"),bar4.removeClass("full").addClass("half"),bar5.removeClass("half").addClass("full")),77===t&&(bar4.removeClass("half"),bar5.removeClass("full").addClass("half")),90===t&&bar5.removeClass("half"),103===t&&(t=0)):clearInterval(null)}),10)},addScrollParent:function addScrollParent(){var _this=this;if(this.blockUI){this.scrollParent=$(this.getScrollParent(this.element[0]));var h=this.scrollParent[0]?this.scrollParent[0].offsetHeight:0;if(h&&this.container&&h<this.element[0].offsetHeight){var loc=h/2-58,setTop=function setTop(){return _this.container.css({top:loc+_this.scrollParent[0].scrollTop})};setTop(),this.scrollParent.off("scroll.parent.busyindicator").on("scroll.parent.busyindicator",(function(){_this.container&&setTop()}))}}},removeScrollParent:function removeScrollParent(){this.scrollParent&&(this.scrollParent.off("scroll.parent.busyindicator"),delete this.scrollParent)},getScrollParent:function getScrollParent(elem){var properties=["overflow","overflow-x","overflow-y"],styleMerged=function styleMerged(el){return properties.reduce((function(a,b){return a+function style(el,prop){return getComputedStyle(el,null).getPropertyValue(prop)}(el,b)}),0)},regex=/(auto|scroll)/,isScroll=function isScroll(el){return regex.test(styleMerged(el))};return function scrollParent(el){for(var found=!1,parent=el.parentNode;!found&&parent&&parent.tagName&&"body"!==parent.tagName.toLowerCase();){if(isScroll(parent)){found=!0;break}parent=parent.parentNode}return found?parent:null}(elem)},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),this.setup()},isActive:function isActive(){return!!this.container&&this.container.children(".busy-indicator").is(".active")},destroy:function destroy(){this.removeScrollParent(),this.close(!0),this.element.off("start.busyindicator complete.busyindicator afterstart.busyindicator aftercomplete.busyindicator updated.busyindicator"),$.removeData(this.element[0],"busyindicator")},handleEvents:function handleEvents(){var _this2=this;return this.element.on("start.busyindicator",(function(e){e.stopPropagation(),_this2.activate()})).on("afterstart.busyindicator",(function(){_this2.element.on("complete.busyindicator",(function(e){e.stopPropagation(),_this2.close(!0)}))})).on("updated.busyindicator",(function(){_this2.close(!0),_this2.updated()})),this}},$.fn.busyindicator=function(settings){return this.each((function(){var instance=$.data(this,"busyindicator");instance?instance.updated(settings):instance=$.data(this,"busyindicator",new BusyIndicator(this,settings))}))};var charts={tooltip:{}};charts.isIE="ie"===Environment.browser.name,charts.isIEEdge="edge"===Environment.browser.name,charts.tooltipSize=function tooltipSize(content){return DOM.html(this.tooltip.find(".tooltip-content"),content,"*"),{height:this.tooltip.outerHeight(),width:this.tooltip.outerWidth()}},charts.formatToSettings=function formatToSettings(data,settings){var d=data.data?data.data:data;return"value"===settings.show?settings.formatter?d3.format(settings.formatter)(d.value):d.value:"label"===settings.show?d.name:"label (percent)"===settings.show?"".concat(d.name," (").concat(isNaN(d.percentRound)?0:d.percentRound,"%)"):"label (value)"===settings.show?"".concat(d.name," (").concat(settings.formatter?d3.format(settings.formatter)(d.value):d.value,")"):"percent"===settings.show?"".concat(isNaN(d.percentRound)?0:d.percentRound,"%"):"function"==typeof settings.show?settings.show(d):d.value},charts.appendTooltip=function appendTooltip(extraClass){var _this=this;this.tooltip=$("#svg-tooltip"),0===this.tooltip.length&&(this.tooltip=$('<div id="svg-tooltip" class="tooltip '.concat(extraClass,' right is-hidden">\n      <div class="arrow"></div>\n        <div class="tooltip-content">\n          <p><b>32</b> Element</p>\n        </div>\n      </div>')).appendTo("body"),this.isTouch&&(this.tooltip[0].style.pointerEvents="auto",this.tooltip.on("touchend.svgtooltip",(function(){_this.hideTooltip()}))))},charts.hideTooltip=function hideTooltip(){var _this2=this;d3.select("#svg-tooltip").classed("is-personalizable",!1).classed("is-hidden",!0).style("left","-999px"),$("body, .scrollable").off("scroll.chart-tooltip",(function(){_this2.hideTooltip()}))},charts.removeTooltip=function removeTooltip(){this.tooltip&&this.tooltip.remove&&this.tooltip.remove()},charts.colorRange=function(){var palette=theme.themeColors().palette;return theme.uplift?[palette.azure[80].value,palette.turquoise[40].value,palette.amethyst[60].value,palette.graphite[40].value,palette.amber[40].value,palette.emerald[70].value,palette.ruby[60].value,palette.azure[30].value,palette.amber[70].value,palette.graphite[60].value,palette.turquoise[60].value,palette.emerald[90].value,palette.amethyst[30].value,palette.azure[50].value,palette.ruby[30].value,palette.amethyst[80].value,palette.emerald[30].value,palette.turquoise[80].value,palette.graphite[20].value,palette.amber[90].value]:[palette.azure[70].value,palette.turquoise[30].value,palette.amethyst[30].value,palette.graphite[60].value,palette.amber[50].value,palette.emerald[60].value,palette.ruby[60].value,palette.azure[30].value,palette.amber[90].value,palette.turquoise[80].value,palette.ruby[20].value,palette.graphite[50].value,palette.emerald[50].value,palette.azure[50].value,palette.amethyst[80].value,palette.emerald[30].value,palette.turquoise[50].value,palette.amber[70].value,palette.graphite[20].value,palette.azure[20].value]},charts.colorNameRange=function(){return theme.uplift?["azure08","turquoise04","amethyst06","graphite04","amber04","emerald07","ruby06","azure03","amber07","graphite06","turquoise06","emerald09","amethyst03","azure05","ruby03","amethyst08","emerald03","turquoise08","graphite02","amber09"]:["azure07","turquoise03","amethyst03","graphite06","amber05","emerald06","ruby06","azure03","amber09","turquoise08","ruby02","graphite05","emerald05","amethyst03","azure05","amethyst08","emerald03","turquoise06","amber07","graphite02"]},charts.chartColor=function chartColor(i,chartType,data){var themeColors=charts.colorRange(),specifiedColor=data&&data.color?data.color:null;if(specifiedColor){if("error"===specifiedColor)return theme.themeColors().status.danger.value;if("alert"===specifiedColor)return theme.themeColors().status.warning.value;if("alertYellow"===specifiedColor)return theme.themeColors().status.caution.value;if("good"===specifiedColor)return theme.themeColors().status.success.value;if("neutral"===specifiedColor)return theme.themeColors().palette.graphite[30].value;if(specifiedColor&&0===specifiedColor.indexOf("#"))return data.color}return/^(pie|donut)$/.test(chartType)?themeColors[i]:/^(bar-single|column-single)$/.test(chartType)?themeColors[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(chartType)?themeColors[i]:""},charts.chartColorName=function chartColor(i,chartType,data){var specifiedColor=data&&data.color?data.color:null;if(specifiedColor){if("error"===specifiedColor)return"alert01";if("alert"===specifiedColor)return"alert02";if("alertYellow"===specifiedColor)return"alert03";if("good"===specifiedColor)return"alert04";if("neutral"===specifiedColor)return"graphite03";if(specifiedColor&&0===specifiedColor.indexOf("#"))return data.color}return/^(pie|donut)$/.test(chartType)?this.colorNameRange()[i]:/^(bar-single|column-single)$/.test(chartType)?this.colorNameRange()[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(chartType)?this.colorNameRange()[i]:""},charts.showTooltip=function(x,y,content,arrow){var _this3=this;x<0&&(x=2),this.tooltip[0].style.left="".concat(x,"px"),this.tooltip[0].style.top="".concat(y,"px"),DOM.html(this.tooltip.find(".tooltip-content"),content,"*"),this.tooltip.removeClass("bottom top left right").addClass(arrow),this.tooltip.removeClass("is-hidden"),$("body").off("scroll.chart-tooltip").on("scroll.chart-tooltip",(function(){_this3.hideTooltip()})),$(".scrollable").off("scroll.chart-tooltip").on("scroll.chart-tooltip",(function(){_this3.hideTooltip()}))},charts.addLegend=function(series,chartType,settings,container){var i;if(0!==series.length){var isTwoColumn=series[0].display&&"twocolumn"===series[0].display,legend=$(isTwoColumn?'<div class="chart-legend '.concat(series[0].placement?"is-".concat(series[0].placement):"is-bottom",'"></div>'):'<div class="chart-legend"></div>');"pie"!==chartType&&"donut"!==chartType||!settings.showMobile||(legend=$('<div class="chart-legend"><div class="container"></div></div>'));var currentWidth,width=0;for(i=0;i<series.length;i++)currentWidth=series[i].name?6*series[i].name.length:6,width=series[i].name&&currentWidth>width?currentWidth:width;var widthPercent=(width+=55)/$(container).width()*100;for(i=0;i<series.length;i++)if(series[i].name){var extraClass="";(isTwoColumn||series[i].display&&"block"===series[i].display)&&(extraClass+=" lg"),"column-positive-negative"===settings.type&&series[i].option&&(extraClass+=" ".concat(series[i].option));var seriesLine='<span class="chart-legend-item'.concat(extraClass,'" tabindex="0"></span>'),hexColor=charts.chartColor(i,chartType||(1===series.length?"bar-single":"bar"),series[i]),colorName=charts.chartColorName(i,chartType||(1===series.length?"bar-single":"bar"),series[i]),color="";"#"===colorName.substr(0,1)?(color=$('<span class="chart-legend-color"></span>'),series[i].pattern||color.css("background-color",hexColor)):color=$('<span class="chart-legend-color '.concat(series[i].pattern?"":colorName,'"></span>')),"scatterplot"===chartType&&(color=$('<span class="chart-legend-color"></span>'));var textBlock=$('<span class="chart-legend-item-text">'.concat(xssUtils.stripTags(series[i].name),"</span>"));if(series[i].pattern&&(color.append('<svg width="12" height="12"><rect height="12" width="12" mask="url(#'.concat(series[i].pattern,')"/></svg>')),color.find("rect").css("fill",hexColor)),series[i].percent){var pct=$('<span class="chart-legend-percent"></span>').text(series[i].percent);textBlock.append(pct)}series[i].display&&"block"===series[i].display&&(seriesLine='<span class="chart-legend-item'.concat(extraClass,'" tabindex="0"></span>')),isTwoColumn&&(seriesLine=widthPercent>45&&"right"!==settings.legendPlacement?'<span class="chart-legend-item'.concat(extraClass,'" tabindex="0"></span>'):'<span class="chart-legend-item'.concat(extraClass,' is-two-column" tabindex="0" ></span>')),(seriesLine=$(seriesLine)).append(color,textBlock),"pie"!==chartType&&"donut"!==chartType||!settings.showMobile?legend.append(seriesLine):legend.find(".container").append(seriesLine),(series[i].display&&"block"===series[i].display||isTwoColumn&&widthPercent>45&&"right"!==settings.legendPlacement)&&seriesLine.css({float:"none",display:"block",margin:"0 auto",width:"".concat(width,"px")}),"scatterplot"===chartType&&(self.svg=d3.select(color[0]).append("svg").attr("width","24").attr("height","24").append("path").attr("class","symbol").attr("transform","translate(10, 10)").attr("d",d3.symbol().size("80").type((function(){return d3.symbols[i]}))).style("fill",hexColor)),innerWidth<=480&&series[i].data&&series[i].data.legendAbbrName&&textBlock.replaceWith('<span class="chart-legend-item-text">'.concat(series[i].data.legendAbbrName,"</span>")),innerWidth>=481&&innerWidth<=768&&series[i].data&&series[i].data.legendShortName&&textBlock.replaceWith('<span class="chart-legend-item-text">'.concat(series[i].data.legendShortName,"</span>"))}legend instanceof $&&(legend.on("click.chart",".chart-legend-item",(function(){charts.handleElementClick(this,series,settings)})).on("keypress.chart",".chart-legend-item",(function(e){13!==e.which&&32!==e.which||charts.handleElementClick(this,series,settings)})),$(container).append(legend))}},charts.handleElementClick=function(line,series,settings){var selector,idx=$(line).index(),elem=series[idx];if("radar"===settings.type&&(selector=d3.select(settings.svg.selectAll(".chart-radar-area").nodes()[idx])),"pie"===settings.type||"donut"===settings.type)selector=d3.select(settings.svg.selectAll(".slice").nodes()[idx]);else if("column-positive-negative"===settings.type)selector=!elem.option||elem.option&&"target"===elem.option?settings.svg.select(".target-bar"):settings.svg.select(".bar.".concat(elem.option));else if(-1!==["column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative"].indexOf(settings.type))if(settings.isGrouped||settings.isSingle)selector=settings.svg.select(".series-".concat(idx));else if(settings.isStacked&&!settings.isSingle){selector=d3.select(settings.svg.selectAll("bar"===settings.type||"bar-stacked"===settings.type||"bar-normalized"===settings.type?".series-group":".g").nodes()[idx]).select(".bar")}-1!==["radar","pie","donut","column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative"].indexOf(settings.type)&&(charts.clickedLegend=!0,selector.dispatch("click")),elem.selectionObj&&charts.selectElement(d3.select(elem.selectionObj.nodes()[idx]),elem.selectionInverse,elem.data)},charts.selected=[],charts.selectElement=function(element,inverse,data,container){var isSelected=element.node()&&element.classed("is-selected"),triggerData=[{elem:element.nodes(),data:isSelected?{}:data}];inverse.classed("is-selected",!1).classed("is-not-selected",!isSelected),element.classed("is-not-selected",!1).classed("is-selected",!isSelected),charts.selected=$.isEmptyObject(triggerData[0].data)?[]:triggerData,$(container).triggerHandler("selected",[triggerData])},charts.setSelectedElement=function(o){var thisData,dataset=o.dataset,isPositiveNegative="column-positive-negative"===o.type,isBar=/^(bar|bar-stacked|bar-grouped|bar-normalized)$/.test(o.type),isTypePie="pie"===o.type||"donut"===o.type,isTypeColumn=/^(column|column-grouped|column-stacked|column-positive-negative)$/.test(o.type),svg=o.svg,isSingle=o.isSingle,isGrouped=o.isGrouped,isStacked=o.isStacked,taskSelected="selected"===o.task,selector=d3.select(o.selector),isPositive=selector.classed("positive"),ticksX=o.svg.selectAll(".axis.x .tick"),ticksY=o.svg.selectAll(".axis.y .tick"),pnPositiveText=o.svg.selectAll(".bartext.positive, .target-bartext.positive"),pnNegativeText=o.svg.selectAll(".bartext.negative, .target-bartext.negative"),pnTargetText=o.svg.selectAll(".target-bartext.positive, .target-bartext.negative"),thisGroup=d3.select(o.selector.parentNode),thisGroupId=parseInt(thisGroup.node()?thisGroup.attr("data-group-id"):0,10),triggerData=[],selectedBars=[];if(dataset=isStacked||isTypePie?dataset||null:dataset&&dataset[thisGroupId]?dataset[thisGroupId].data||dataset[thisGroupId]:null,ticksX.style("font-weight","normal"),ticksY.style("font-weight","normal"),pnPositiveText.style("font-weight","normal"),pnNegativeText.style("font-weight","normal"),svg.selectAll(".is-selected").classed("is-selected",!1),isTypePie&&svg.selectAll(".is-not-selected").classed("is-not-selected",!1),taskSelected)if(svg.selectAll(".bar, .target-bar").style("opacity",.6),charts.clickedLegend&&!isTypePie)isPositiveNegative?(o.isTargetBar?(o.svg.selectAll(".target-bar").classed("is-selected",!0).style("opacity",1),pnTargetText.style("font-weight","bolder")):(o.svg.selectAll(isPositive?".bar.positive, .target-bar.positive":".bar.negative, .target-bar.negative").classed("is-selected",!0).style("opacity",1),(isPositive?pnPositiveText:pnNegativeText).style("font-weight","bolder")),svg.selectAll(".bar").each((function(d,i){var bar=d3.select(this);bar.classed("is-selected")&&selectedBars.push({elem:bar.node(),data:dataset?dataset[i]:d})})),triggerData=selectedBars):(isTypeColumn||isBar)&&(isGrouped||isSingle?o.svg.selectAll(".series-"+o.i).classed("is-selected",!0).style("opacity",1):thisGroup.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),svg.selectAll(".bar.is-selected").each((function(d,i){var bar=d3.select(this);(thisData=o.dataset)||(thisData=d),isBar?(thisData[i][o.i]&&(thisData=thisData[i][o.i]),thisData[o.i]&&thisData[o.i][i]&&(thisData=thisData[o.i][i]),thisData[i]&&thisData[i][o.i]&&(thisData=thisData[i][o.i])):isStacked&&!isSingle?thisData[thisGroupId]&&thisData[thisGroupId].data[i]&&(thisData=thisData[thisGroupId].data[i]):(thisData[i].data[o.i]&&(thisData=thisData[i].data[o.i]),thisData[o.i]&&thisData[o.i].data[i]&&(thisData=thisData[o.i].data[i]),thisData[i]&&thisData[i].data[o.i]&&(thisData=thisData[i].data[o.i])),selectedBars.push({elem:bar.node(),data:thisData})})),triggerData=selectedBars);else if(isSingle&&isStacked&&isTypeColumn)thisData=dataset[0]&&dataset[0].data?dataset[0].data:o.d,selector.classed("is-selected",!0).style("opacity",1),triggerData.push({elem:selector.nodes(),data:thisData[o.i]});else if(!isSingle&&!isGrouped||isStacked||!isTypeColumn&&!isBar){if(isTypeColumn||isBar)svg.selectAll("".concat(isTypeColumn?".axis.x":".axis.y"," .tick:nth-child(").concat(o.i+2,")")).style("font-weight","bolder"),svg.selectAll(".bar:nth-child(".concat(o.i+1,")")).classed("is-selected",!0).style("opacity",1),svg.selectAll(".bar.is-selected").each((function(d,i){var bar=d3.select(this),data=d;dataset&&(data=isBar&&isStacked?dataset[i][o.i]:dataset[i].data[o.i]),selectedBars.push({elem:bar.node(),data:data})})),triggerData=selectedBars;else if(isTypePie){svg.selectAll(".slice").classed("is-selected",!1).classed("is-not-selected",!0).attr("transform","");var thisArcData=dataset&&dataset[0]&&dataset[0].data?dataset[0].data[o.i]:o.d?o.d.data:o.d;selector.classed("is-selected",!0).classed("is-not-selected",!1).attr("transform","scale(1.025, 1.025)"),triggerData.push({elem:selector.nodes(),data:thisArcData,index:o.i})}}else{if(svg.selectAll("".concat(isTypeColumn?".axis.x":".axis.y"," .tick:nth-child(").concat((isGrouped?thisGroupId:o.i)+2,")")).style("font-weight","bolder"),selector.classed("is-selected",!0).style("opacity",1),isPositiveNegative){var thisIndex=o.isTargetBar?o.i:o.i-o.dataset[0].data.length;svg.select(".target-bar.series-".concat(thisIndex)).classed("is-selected",!0).style("opacity",1),svg.select(".bar.series-".concat(thisIndex)).classed("is-selected",!0).style("opacity",1),d3.select(svg.selectAll(".bartext").nodes()[thisIndex]).style("font-weight","bolder"),d3.select(svg.selectAll(".target-bartext").nodes()[thisIndex]).style("font-weight","bolder")}(isGrouped||isPositiveNegative||isTypeColumn)&&((!isPositiveNegative&&!isTypeColumn||isTypeColumn&&isGrouped)&&thisGroup.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),thisGroup.selectAll(".bar").each((function(d,i){var bar=d3.select(this);bar.classed("is-selected")&&selectedBars.push({elem:bar.node(),data:dataset?dataset[i]:d})})),isGrouped?triggerData.push({groupIndex:thisGroupId,groupElem:thisGroup.nodes()[0],groupItems:selectedBars}):triggerData=selectedBars)}else svg.selectAll(".bar, .target-bar").style("opacity",1),pnPositiveText.style("font-weight","bolder"),pnNegativeText.style("font-weight","bolder"),isTypePie&&selector.classed("is-selected",!1).style("stroke","#fff").style("stroke-width","1px").attr("transform","");charts.clickedLegend&&(charts.clickedLegend=!1),charts.selected=triggerData,o.isTrigger&&$(o.container).triggerHandler(taskSelected?"selected":"unselected",[triggerData])},charts.setSelected=function(o,isToggle,internals){if(o){var barIndex,selector,isStackedGroup,xGroup,selected=0,equals=utils.equals,legendsNode=internals.isPie?internals.svg.node().nextSibling:internals.svg.node().parentNode.nextSibling,legends=d3.select(legendsNode),isLegends=legends.node()&&legends.classed("chart-legend"),setSelectedBar=function setSelectedBar(g){var isGroup=!!g;(g=isGroup?d3.select(g):internals.svg).selectAll(".bar").each((function(d,i){d&&selected<1&&(void 0!==o.fieldName&&void 0!==o.fieldValue&&o.fieldValue===d[o.fieldName]||void 0!==o.index&&o.index===i||o.data&&equals(o.data,internals.chartData[d.index].data[i])||o.elem&&$(this).is(o.elem))&&(selected++,selector=d3.select(this),barIndex=i,isGroup&&!internals.isStacked&&(isStackedGroup=!0))}))};internals.isGrouped||internals.isStacked&&!internals.isSingle?(internals.chartData.forEach((function(d,i){selected<1&&(xGroup=$(internals.svg.select('[data-group-id="'+i+'"]').node()),(void 0!==o.groupName&&void 0!==o.groupValue&&o.groupValue===d[o.groupName]||void 0!==o.groupIndex&&o.groupIndex===i||o.data&&equals(o.data,d)||o.elem&&xGroup.is(o.elem))&&void 0===o.fieldName&&void 0===o.fieldValue&&void 0===o.index&&(selected++,selector=internals.svg.select('[data-group-id="'+i+'"]').select(".bar"),barIndex=i,internals.isStacked&&!internals.isGrouped&&(isStackedGroup=!0)))})),selected<1&&function setSelectedGroup(){var groups=internals.svg.selectAll(".series-group");groups.nodes().length&&groups.each((function(){setSelectedBar(this)}))}()):setSelectedBar(),selected>0&&(isToggle||!selector.classed("is-selected"))&&(isStackedGroup?isLegends&&$(legends.selectAll(".chart-legend-item").nodes()[barIndex]).trigger("click.chart"):selector.on("click").call(selector.node(),selector.datum(),barIndex))}},charts.labelsColide=function(svg){var ticks=svg.selectAll(".x text"),collides=!1;return ticks.each((function(d1,i){var rect2,rect1=this.getBoundingClientRect();ticks.each((function(d2,j){i!==j&&(rect2=this.getBoundingClientRect(),!(rect1.right<rect2.left||rect1.left>rect2.right||rect1.bottom<rect2.top||rect1.top>rect2.bottom)&&(collides=!0))}))})),collides},charts.applyAltLabels=function(svg,dataArray,elem,selector,isNoEclipse){(selector?svg.selectAll(selector):svg.selectAll(".x text")).each((function(d1,i){var text=dataArray[i]?dataArray[i][elem]:"";text=text||(isNoEclipse?d3.select(this).text().substring(0,1):"".concat(d3.select(this).text().substring(0,6),"...")),d3.select(this).text(text)}))},charts.triggerContextMenu=function(container,elem,d){d3.event.preventDefault(),d3.event.stopPropagation(),d3.event.stopImmediatePropagation();var e=$.Event("contextmenu");e.target=elem,e.pageX=d3.event.pageX,e.pageY=d3.event.pageY,$(container).trigger(e,[elem,d])},charts.wrap=function(node,width,labelFactor){labelFactor||(labelFactor=1.27),width||(labelFactor=60),node.each((function(){var text=d3.select(this),words=text.text().split(/\s+/).reverse(),word="",line=[],lineNumber=0;if(!(words.length<=1))for(var lineHeight=labelFactor,y=text.attr("y"),x=text.attr("x"),dy=parseFloat(text.attr("dy")),tspan=text.text(null).append("tspan").attr("x",x).attr("y",y).attr("dy","".concat(dy,"em"));word=words.pop();)line.push(word),tspan.text(line.join(" ")),tspan.node().getComputedTextLength()>width&&(line.pop(),tspan.text(line.join(" ")),line=[word],tspan=text.append("tspan").attr("x",x).attr("y",y).attr("dy","".concat(++lineNumber*lineHeight+dy,"em")).text(word))}))};var BULLET_DEFAULTS={dataset:[],animate:!1,redrawOnResize:!0,format:{ranges:null,difference:null}};function Bullet(element,settings){this.settings=utils.mergeSettings(element,settings,BULLET_DEFAULTS),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element=$(element),this.init()}Bullet.prototype={init:function init(){return this.namespace=utils.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function build(){var _this=this,chartData=this.settings.dataset[0],isPersonalizable=this.element.closest(".is-personalizable").length>0;this.element.addClass("bullet-chart");var tooltipInterval=0,tooltipDataCache=[],tooltipData=chartData.data[0]?chartData.data[0].tooltip:[],noMarkers=!1,parent=this.element.parent(),margin_top=30,margin_right=35,margin_bottom=35,margin_left=40,width=parent.width()-margin_left-margin_right,height=parent.height()-margin_top-margin_bottom-30;height=height<0?50:height;var svg=d3.select(this.element[0]).append("svg").attr("width",width+margin_left+margin_right).attr("height",height+margin_top+margin_bottom).append("g").attr("transform","translate(".concat(margin_left,",").concat(margin_top,")"));for(var formatCallback=function formatCallback(type,d,i){function callback(func,d2,i2){var results=func(d2,i2);return void 0!==results?results:d2}return chartData.format&&"function"==typeof chartData.format[type]?callback(chartData.format[type],d,i):chartData.format&&"string"==typeof chartData.format[type]?d3.format(chartData.format[type])(d):_this.settings.format&&"function"==typeof _this.settings.format[type]?callback(_this.settings.format[type],d,i):_this.settings.format&&"string"==typeof _this.settings.format[type]?d3.format(_this.settings.format[type])(d):d},format_ranges=function ranges(d,i){return formatCallback("ranges",d,i)},format_difference=function difference(d){return formatCallback("difference",d)},_loop=function _loop(i){var duration=_this.settings.animate?400:0,self=_this,rowData=chartData.data[i],ranges=rowData.ranges.slice().sort(d3.descending),markers=rowData.markers?rowData.markers.slice().sort(d3.descending):[],measures=rowData.measures?rowData.measures.slice().sort(d3.descending):[],rangesAsc=rowData.ranges.slice().sort(d3.ascending),markersAsc=rowData.markers?rowData.markers.slice().sort(d3.ascending):[],measuresAsc=rowData.measures?rowData.measures.slice().sort(d3.ascending):[];0===markers.length&&(markers=measures,markersAsc=measuresAsc,noMarkers=!0);var g=svg.append("g").attr("class","bullet").attr("transform","translate(0, ".concat(70*i,")"));g.append("g").append("text").attr("class","title").attr("dy","-10px").text((function(){return rowData.title})).append("tspan").attr("class","subtitle").attr("dx","15px").text((function(){return rowData.subtitle}));var maxAll=Math.max(ranges[0],markers[0],measures[0]),minAll=Math.min(rangesAsc[0],markersAsc[0],measuresAsc[0]);minAll=minAll<0?minAll:0;var x1=d3.scaleLinear().domain([minAll,maxAll]).range([0,width]).nice(),w1=function bulletWidth(x){var x0=x(0);return function(d){return Math.abs(x(d)-x0)}}(x1),range=g.selectAll("rect.range").data(ranges);range.enter().append("rect").attr("class",(function(d,a){return"range s".concat(a)})).attr("data-idx",i).attr("width",0).attr("x",(function(d){return x1(d<0?d:0)})).style("fill",(function(d,b){return chartData.barColors?chartData.barColors[b]:""})).attr("height",20).on("click.".concat(self.namespace),(function(){var bar=d3.select(this);self.element.trigger("selected",[bar,chartData.data[bar.attr("data-idx")]])})).on("mouseenter.".concat(self.namespace),(function(d,mouseEnterIdx){var bar=d3.select(this),data=chartData.data[bar.attr("data-idx")],rect=this.getBoundingClientRect(),content="<p>".concat(format_ranges(d,mouseEnterIdx),"</p>"),show=function show(){var size=charts.tooltipSize(content),x=rect.left+rect.width-size.width/2,y=rect.top-size.height+$(window).scrollTop()-5;""!==content&&(charts.tooltip&&charts.tooltip.length&&charts.tooltip[isPersonalizable?"addClass":"removeClass"]("is-personalizable"),charts.showTooltip(x,y,content,"top"))};if(data.tooltip&&data.tooltip[mouseEnterIdx]&&(content=data.tooltip[data.tooltip.length-mouseEnterIdx-1]),tooltipData&&"function"==typeof tooltipData&&!tooltipDataCache[mouseEnterIdx]){content="";var runInterval=!0;tooltipInterval=setInterval((function(){runInterval&&(runInterval=!1,tooltipData((function(da){content=da,tooltipDataCache[i]=da}))),""!==content&&(clearInterval(tooltipInterval),show())}),10)}else tooltipData="object"===_typeof(tooltipData)?"":tooltipData,content=tooltipDataCache[i]||tooltipData||content||"",show()})).on("mouseleave.".concat(self.namespace),(function(){clearInterval(tooltipInterval),charts.hideTooltip()})).on("contextmenu.".concat(self.namespace),(function(d){charts.triggerContextMenu(self.element,d3.select(this).nodes()[0],d)})).merge(range).transition().duration(duration).attr("width",w1);var measure=g.selectAll("rect.measure").data(measures);measure.enter().append("rect").attr("class",(function(d,k){return"measure s".concat(k)})).attr("width",0).attr("height",3).attr("x",(function(d){return x1(d<0?d:0)})).style("fill",(function(d,j){return chartData.lineColors?chartData.lineColors[j]:""})).attr("y",8.5).merge(measure).transition().duration(duration).attr("width",w1);var marker=g.selectAll("line.marker").data(markers);marker.enter().append("line").attr("class",noMarkers?"hidden":"marker").attr("x1",0).attr("x2",0).style("stroke",(function(d,l){return chartData.markerColors?chartData.markerColors[l]:""})).attr("y1",20/6).attr("y2",100/6).merge(marker).transition().duration(duration).attr("x1",x1).attr("x2",x1).attr("y1",20/6).attr("y2",100/6);var diff=(markers[0]>measures[0]?"-":"+")+Math.abs(markers[0]-measures[0]);0!==Math.abs(markers[0]-measures[0])&&marker.enter().append("text").attr("class","inverse").attr("text-anchor","middle").attr("y",14).attr("dx",charts.isRTL?"-20px":"20px").attr("x",0).text(format_difference(diff)).merge(marker).transition().duration(duration).attr("x",(function(){var total=0;return g.selectAll(".measure").each((function(d){var w=w1(d),x=x1(d);w>total&&(total=w),x>total&&(total=x)})),charts.isRTL?-total:total})).style("opacity",1);var tickEnter=g.selectAll("g.tick").data(x1.ticks(8)).enter().append("g").attr("class","tick").attr("transform","translate(0,0)").style("opacity",0);tickEnter.append("line").attr("y1",20).attr("y2",Math.round(140/4.7)),tickEnter.append("text").attr("text-anchor","middle").attr("dy","1.1em").attr("y",Math.round(140/4.7)).attr("class",(function(d){return d<0?"negative-value":"positive-value"})).text((function(d,k){return format_ranges(d,k)})),tickEnter.transition().duration(duration).attr("transform",(function(d){return"translate(".concat(x1(d),",0)")})).style("opacity",1),charts.isRTL&&charts.isIE&&svg.selectAll("text").attr("transform","scale(-1, 1)")},i=0;i<chartData.data.length;i++)_loop(i);return charts.appendTooltip(),this.element.trigger("rendered"),this},handleEvents:function handleEvents(){var _this2=this;return this.element.on("updated.".concat(this.namespace),(function(){_this2.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){_this2.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){_this2.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){_this2.updated()})),this},handleResize:function handleResize(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element.empty(),this.build()},teardown:function teardown(){var _this3=this,events=function events(arr){return"".concat(arr.join(".".concat(_this3.namespace," ")),".").concat(_this3.namespace)};return this.element&&(this.element.find(".range").off(events(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(events(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function destroy(){this.teardown(),charts.removeTooltip(),this.element&&(this.element.empty().removeClass("bullet-chart"),$.removeData(this.element[0],"bullet"),$.removeData(this.element[0],"chart"))}};var COMPLETION_CHART_DEFAULTS={dataset:[]};function CompletionChart(element,settings){this.settings=utils.mergeSettings(element,settings,COMPLETION_CHART_DEFAULTS),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element=$(element),this.init()}CompletionChart.prototype={init:function init(){return this.build().handleEvents(),this},build:function build(){var _this=this,chartData=this.settings.dataset[0];0===this.settings.dataset.length&&((chartData={}).data=[{name:{text:Locale?Locale.translate("NoData"):"No Data Available"},completed:{value:0}}]);var dataset=chartData.data[0],isTarget="completion-target"===this.settings.type,isAchievment="targeted-achievement"===this.settings.type;$(this.element).addClass("completion-chart".concat("targeted-achievement"===this.settings.type?" chart-targeted-achievement":"")),dataset.total=$.extend({},{value:100},dataset.total);var c,isUndefined=function isUndefined(value){return void 0===value},fixUndefined=function fixUndefined(value,isNumber){var defaultValue=isNumber?0:"";return isUndefined(value)?defaultValue:value},toPercent=function toPercent(value,ds){return ds=ds||dataset,Math.round(value/fixUndefined(ds.total.value,!0)*100)},localePercent=function localePercent(value){return Locale.formatNumber(value/100,{style:"percent",maximumFractionDigits:0})},fixPercent=function fixPercent(value,ds){var s=value.toString();return-1!==s.indexOf("%")?function toValue(percent,ds){return percent/100*fixUndefined((ds=ds||dataset).total.value,!0)}(s.replace(/%/g,""),ds):value},updateWidth=function updateWidth(elem,value,ds){var percent=toPercent(value,ds),w=(percent=percent<0?0:percent)>100?100:percent;elem[0].style.width="".concat(w,"%"),0===w&&(elem[0].className+="is-empty")},setFormat=function setFormat(obj,ds,isPrivate){var value=isPrivate?obj._value:obj.value;return obj&&!isUndefined(value)&&obj.format?function format(value,formatterString,ds){return".0%"===formatterString?localePercent(toPercent(value,ds)):d3.format(formatterString||"")(value)}(fixPercent(value,ds),obj.format,ds):obj?fixPercent(value,ds):0},self=this,percentText=$.extend({},{show:!1,color1:"",color2:"inverse"},dataset.percentText);isUndefined(percentText.color)||""!==percentText.color1||(percentText.color1=percentText.color);var html={body:$('<div class="total bar" />')},specColor=function getSpecColor(ds){var specColor={};return(ds=ds||dataset).info&&!isUndefined(ds.info.color)&&0===dataset.info.color.indexOf("#")&&(specColor.info=!0),ds.completed&&!isUndefined(ds.completed.color)&&0===ds.completed.color.indexOf("#")&&(specColor.completed=!0),ds.remaining&&!isUndefined(ds.remaining.color)&&0===ds.remaining.color.indexOf("#")&&(specColor.remaining=!0),ds.targetline&&!isUndefined(ds.targetline.color)&&0===ds.targetline.color.indexOf("#")&&(specColor.targetline=!0),specColor}();if(isTarget||isAchievment){var totalText=function getTotalText(ds){var totalText="",difference={};return(ds=ds||dataset).total.difference&&(difference.value=ds.total.value-ds.completed.value,difference.format=dataset.total.format),totalText=(ds.total.textOnly?"":setFormat(ds.total.difference?difference:ds.total))+(ds.total.text||""),totalText=isAchievment&&ds.remaining?(ds.remaining.textOnly?"":setFormat(ds.remaining))+(ds.remaining.text||""):totalText}();html.body.addClass("chart-completion-target".concat(isAchievment?" chart-targeted-achievement":"")),html.label='<span class="label">\n        <span class="name">'.concat(fixUndefined(dataset.name.text)," ").concat(dataset.completed.color&&"error"===dataset.completed.color?$.createIcon({icon:"error",classes:"icon-error"}):"",'</span>\n        <span class="l-pull-right total value">').concat(totalText,"</span>\n      </span>")}else{html.body.addClass("chart-completion");var name=fixUndefined(dataset.name.text),completedColor=fixUndefined(dataset.completed.color),infoColor=fixUndefined(dataset.info.color),bColor=dataset.info.color&&!specColor.info?infoColor:"",infoText=fixUndefined(dataset.info.text);specColor.completed||(bColor=completedColor);var styleColor="";dataset.info.color&&specColor.info&&(styleColor=infoColor),specColor.completed&&(styleColor=completedColor);var styleValue=dataset.info&&!isUndefined(dataset.info.value)?fixUndefined(dataset.info.value):setFormat(dataset.completed);html.label='<b class="label name">'.concat(name,'</b>\n      <b class="label info ').concat(bColor,' colored">\n      <span class="value ').concat(bColor,'" ').concat(styleColor?'style="color:'.concat(styleColor):"",'">').concat(styleValue,'</span>\n      <span class="text ').concat(bColor,'" ').concat(styleColor?'style="color:'.concat(styleColor):"",'">').concat(infoText,"</span>\n      </b>")}return dataset.remaining?html.remaining="".concat('<div class="target remaining bar').concat(specColor.remaining?"":" ".concat(fixUndefined(dataset.remaining.color)),'"').concat(specColor.remaining?' style="color:'.concat(dataset.remaining.color,";background-color:").concat(dataset.remaining.color,';"'):"",'">').concat(isAchievment?"":'<span aria-hidden="true"'.concat(isTarget||isAchievment?"":' class="audible"',">")+'<span class="value'.concat(specColor.remaining?"":" ".concat(fixUndefined(dataset.remaining.color)),'"').concat(specColor.remaining?' style="color:'.concat(dataset.remaining.color,';"'):"",'">').concat(setFormat(dataset.remaining),"</span><br />")+'<span class="text'.concat(specColor.remaining?"":" ".concat(fixUndefined(dataset.remaining.color)),'"').concat(specColor.remaining?' style="color:'.concat(dataset.remaining.color,';"'):"",'">').concat(fixUndefined(dataset.remaining.text),"</span>")+"</span>","</div>"):html.remaining='<div class="target remaining bar" style="opacity: 0"></div>',dataset.completed&&isAchievment&&(!function setPercentText(ds){ds=ds||dataset,percentText._value=ds.completed?ds.completed.value:0,percentText.percent=toPercent(fixUndefined(percentText._value,!0),ds),percentText.format=".0%",percentText._text=void 0!==percentText.text?percentText.text:void 0!==percentText.value?localePercent(percentText.value):setFormat(percentText,ds,!0),percentText.color=percentText[percentText.percent>55?"color2":"color1"]}(),specColor.percentText=0===percentText.color.indexOf("#"),html.completed="".concat('<div class="completed bar').concat(specColor.completed?"":" ".concat(fixUndefined(dataset.completed.color)),'"').concat(specColor.completed?' style="color:'.concat(dataset.completed.color,";background-color:").concat(dataset.completed.color,';"'):"",'"></div>').concat(percentText.show?'<div class="chart-percent-text'.concat(specColor.percentText||""===percentText.color?"":" ".concat(percentText.color),'"').concat(specColor.percentText?' style="color:'.concat(percentText.color,';"'):"",">").concat(percentText._text,"</div>"):"",'<span class="completed-label" aria-hidden="true"').concat(isTarget||isAchievment?"":' class="audible"',">")+'<span class="text">'.concat(fixUndefined(dataset.completed.text),"</span>")+"</span>"),(dataset.completed.text||dataset.completed.format&&!isAchievment)&&this.element.addClass("chart-completion-target-padding"),dataset.completed&&!isAchievment&&(html.completed="".concat('<div class="completed bar').concat(specColor.completed?"":" ".concat(fixUndefined(dataset.completed.color)),'"').concat(specColor.completed?' style="color:'.concat(dataset.completed.color,";background-color:").concat(dataset.completed.color,';"'):"",">")+'<span aria-hidden="true"'.concat(isTarget||isAchievment?"":' class="audible"',">")+'<span class="value'.concat(specColor.completed?"":" ".concat(fixUndefined(dataset.completed.color)),'"').concat(specColor.completed?' style="color:'.concat(dataset.completed.color,';"'):"",'">').concat(setFormat(dataset.completed),"</span><br />")+'<span class="text'.concat(specColor.completed?"":" ".concat(fixUndefined(dataset.completed.color)),'"').concat(specColor.completed?' style="color:'.concat(dataset.completed.color,';"'):"",'">').concat(fixUndefined(dataset.completed.text),"</span>")+"</span></div>"),dataset.targetline&&(html.targetline="".concat('<div class="target-line targetline bar').concat(specColor.targetline?"":" ".concat(fixUndefined(dataset.targetline.color)),'"').concat(specColor.targetline?' style="color:'.concat(dataset.targetline.color,";background-color:").concat(dataset.targetline.color,';"'):"",'">')+'<span aria-hidden="true"'.concat(isTarget||isAchievment?"":' class="audible"',">")+'<span class="value'.concat(specColor.targetline?"":" ".concat(fixUndefined(dataset.targetline.color)),'"').concat(specColor.targetline?' style="color:'.concat(dataset.targetline.color,';"'):"",'">').concat(setFormat(dataset.targetline),"</span><br />")+'<span class="text'.concat(specColor.targetline?"":" ".concat(fixUndefined(dataset.targetline.color)),'"').concat(specColor.targetline?' style="color:'.concat(dataset.targetline.color,';"'):"",'">').concat(fixUndefined(dataset.targetline.text),"</span>")+"</span></div>"),DOM.append(html.body,(html.remaining||"")+(html.completed||"")+(html.targetline||""),"<a><use><svg><div><span><br>"),DOM.append(this.element,html.label+html.body.prop("outerHTML"),"<a><use><svg><div><span><br>"),function cacheElements(){c={name:$(".name",_this.element),info:{value:$(".info .value",_this.element),text:$(".info .text",_this.element)},completed:{bar:$(".completed.bar",_this.element),value:$(".completed .value",_this.element),text:$(".completed .text, .completed-label .text",_this.element)},remaining:{bar:$(".remaining.bar",_this.element),value:$(".remaining .value",_this.element),text:$(".remaining .text",_this.element)},targetline:{bar:$(".targetline",_this.element),value:$(".targetline .value",_this.element),text:$(".targetline .text",_this.element)},total:{bar:$(".total.bar",_this.element),value:$(".total.value",_this.element)},percentText:$(".chart-percent-text",_this.element)}}(),function setJsonData(ds){ds=ds||dataset,c.name.data("jsonData",{name:ds.name}),c.info.value.add(c.info.text).data("jsonData",{info:ds.info}),c.completed.bar.add(c.completed.value).add(c.completed.text).data("jsonData",{completed:ds.completed}),c.remaining.bar.add(c.remaining.value).add(c.remaining.text).data("jsonData",{remaining:ds.remaining}),c.targetline.bar.add(c.targetline.value).add(c.targetline.text).data("jsonData",{targetline:ds.targetline}),c.total.bar.add(c.total.value).data("jsonData",{total:ds.total}),c.percentText.data("jsonData",{percentText:ds.percentText})}(),function updateBars(ds){var w;(ds=ds||dataset).completed&&(w=fixPercent(ds.completed.value,ds),updateWidth(c.completed.bar,w,ds)),ds.remaining&&(w=fixPercent(ds.completed.value,ds)+fixPercent(ds.remaining.value,ds),updateWidth(c.remaining.bar,w,ds),function setOverlap(){isTarget&&!isAchievment&&setTimeout((function(){var remaining=$(".remaining",self.element),total=$(".total",self.element),rect1=$(".completed .value",self.element)[0].getBoundingClientRect(),rect2=remaining.find(".value")[0].getBoundingClientRect();remaining.add(total)[rect1.right>rect2.left-20?"addClass":"removeClass"]("overlap")}),500)}()),ds.targetline&&(w=fixPercent(ds.targetline.value,ds),function updateTargetline(elem,value){var w=value>100?100:value<0?0:value;elem[0].style.left="".concat(w,"%")}(c.targetline.bar,w))}(),this},handleEvents:function handleEvents(){var _this2=this;return this.element.on("updated.".concat("completion-chart"),(function(){_this2.updated()})),this},updated:function updated(settings){var type=settings.type||this.settings.type;return this.settings=settings,this.settings.type=type,settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element.empty(),this.teardown().init()},teardown:function teardown(){return this.element.off("updated.".concat("completion-chart")),this},destroy:function destroy(){this.element.empty().removeClass("completion-chart"),charts.removeTooltip(),this.teardown(),$.removeData(this.element[0],"completion-chart"),$.removeData(this.element[0],"chart")}};var SPARKLINE_DEFAULTS={dataset:[],colors:null,isDots:!1,isPeakDot:!1,isMinMax:!1,isMedianRange:!1};function Sparkline(element,settings){this.settings=utils.mergeSettings(element,settings,SPARKLINE_DEFAULTS),this.element=$(element),this.init()}Sparkline.prototype={init:function init(){if(!this.settings.colors){var palette=theme.themeColors().palette;this.settings.colors=[],this.settings.colors[0]=palette.azure[theme.uplift?"80":"70"].value,this.settings.colors[1]=palette.graphite[40].value,this.settings.colors[2]=palette.graphite[30].value,this.settings.colors[3]=palette.graphite[20].value}return this.namespace=utils.uniqueId({classList:[this.settings.type,"chart"]}),this.sparklineColors=d3.scaleOrdinal().range(this.settings.colors),this.build().handleEvents()},build:function build(){var tooltipIntervalMedianRange,tooltipIntervalDots,i,self=this,isPersonalizable=this.element.closest(".is-personalizable").length>0,tooltipDataCacheMedianRange=[],tooltipDataCacheDots=[],tooltipData=self.settings.tooltip,max=0,min=0,len=0,dimensions=this.calculateAspectRatioFit({srcWidth:385,srcHeight:65,maxWidth:this.element.width(),maxHeight:600}),dotsize=dimensions.width>300?4:3,chartData=self.settings.dataset;for(i=0;i<chartData.length;i++)min=d3.min([d3.min(chartData[i].data),min]),max=d3.max([d3.max(chartData[i].data),max]),len=d3.max([chartData[i].data.length,len]);var w=dimensions.width,h=dimensions.height,x=d3.scaleLinear().domain([0,len]).range([10,w-10]),y=d3.scaleLinear().domain([min,max]).range([h-10,10]),line=d3.line().x((function(d,j){return x(j)})).y((function(d){return y(d)}));charts.appendTooltip();var svg=d3.select(this.element[0]).append("svg").attr("height",h).attr("width",w);if(self.settings.isMedianRange){max=d3.max(chartData[0].data),min=d3.min(chartData[0].data);var maxWidth=w-45,median=d3.median(chartData[0].data),range=max-min,scaleMedianRange=d3.scaleLinear().domain([min,max]).range([0,h]),top=h-scaleMedianRange(median>range?median:range),bot=h-scaleMedianRange(median<range?median:range);svg.append("g").attr("class","medianrange").attr("transform",(function(){return"translate(".concat(10,",").concat(top,")")})).append("rect").attr("width",maxWidth).attr("height",bot).style("opacity","0.06").on("mouseenter.".concat(self.namespace),(function(){var rect=this.getBoundingClientRect(),content='<p class="sparkline-tooltip">'+Locale.translate("Median")+": <b>"+median+"</b><br>"+Locale.translate("Range")+": <b>"+range+"</b>"+(self.settings.isPeakDot?"<br>"+Locale.translate("Peak")+": <b>"+max+"</b>":"")+"</p>",show=function show(){var size=charts.tooltipSize(content),posX=rect.left+(rect.width-size.width)/2,posY=rect.top-size.height-5;""!==content&&(charts.tooltip&&charts.tooltip.length&&charts.tooltip[isPersonalizable?"addClass":"removeClass"]("is-personalizable"),charts.showTooltip(posX,posY,content,"top"))};if(tooltipData&&"function"==typeof tooltipData&&!tooltipDataCacheMedianRange[i]){content="";var runInterval=!0;tooltipIntervalMedianRange=setInterval((function(){runInterval&&(runInterval=!1,tooltipData((function(data){content=data,tooltipDataCacheMedianRange[i]=data}))),""!==content&&(clearInterval(tooltipIntervalMedianRange),show())}),10)}else tooltipData="object"===_typeof(tooltipData)?"":tooltipData,content=tooltipDataCacheMedianRange[i]||tooltipData||chartData[0].tooltip||content||"",show()})).on("mouseleave.".concat(self.namespace),(function(){clearInterval(tooltipIntervalMedianRange),charts.hideTooltip()}))}for(i=0;i<chartData.length;i++){var set=chartData[i];svg.append("g").append("path").attr("d",line(set.data)).attr("stroke",self.settings.isMinMax?"#999999":this.sparklineColors(i)).attr("class","team connected-line")}return min=d3.min(chartData[0].data),svg.selectAll(".point").data(chartData[0].data).enter().append("circle").attr("r",(function(d){return self.settings.isMinMax&&max===d||self.settings.isMinMax&&min===d?dotsize+1:self.settings.isDots||self.settings.isPeakDot&&max===d?dotsize:0})).attr("class",(function(d){return self.settings.isPeakDot&&max===d&&!self.settings.isMinMax?"point peak":self.settings.isMinMax&&max===d?"point max":self.settings.isMinMax&&min===d?"point min":"point"})).style("fill",(function(d){return self.settings.isPeakDot&&max===d&&!self.settings.isMinMax?"#ffffff":self.settings.isMinMax&&max===d?"#56932E":self.settings.isMinMax&&min===d?"#941E1E":self.sparklineColors(0)})).style("stroke",(function(d){return self.settings.isPeakDot&&max===d&&!self.settings.isMinMax?self.sparklineColors(0):self.settings.isMinMax&&max===d||self.settings.isMinMax&&min===d?"none":"#ffffff"})).style("cursor","pointer").attr("cx",(function(d,m){return x(m)})).attr("cy",(function(d){return y(d)})).on("mouseenter.".concat(self.namespace),(function(d){var rect=this.getBoundingClientRect(),content="<p>".concat(chartData[0].name?"".concat(chartData[0].name,"<br> ").concat(self.settings.isMinMax&&max===d?"".concat(Locale.translate("Highest"),": "):self.settings.isMinMax&&min===d?"".concat(Locale.translate("Lowest"),": "):self.settings.isPeakDot&&max===d?"".concat(Locale.translate("Peak"),": "):""):"","<b>").concat(d,"</b></p>"),show=function show(){var size=charts.tooltipSize(content),posX=rect.left-size.width/2+6,posY=rect.top-size.height-8;""!==content&&(charts.tooltip&&charts.tooltip.length&&charts.tooltip[isPersonalizable?"addClass":"removeClass"]("is-personalizable"),charts.showTooltip(posX,posY,content,"top"))};if(tooltipData&&"function"==typeof tooltipData&&!tooltipDataCacheDots[i]){content="";var runInterval=!0;tooltipIntervalDots=setInterval((function(){runInterval&&(runInterval=!1,tooltipData((function(data){content=data,tooltipDataCacheDots[i]=data}))),""!==content&&(clearInterval(tooltipIntervalDots),show())}),10)}else tooltipData="object"===_typeof(tooltipData)?"":tooltipData,content=tooltipDataCacheDots[i]||tooltipData||chartData[0].tooltip||content||"",show();d3.select(this).attr("r",self.settings.isMinMax&&max===d||self.settings.isMinMax&&min===d?dotsize+2:dotsize+1)})).on("mouseleave.".concat(self.namespace),(function(d){clearInterval(tooltipIntervalDots),charts.hideTooltip(),d3.select(this).attr("r",self.settings.isMinMax&&max===d||self.settings.isMinMax&&min===d?dotsize+1:dotsize)})).on("contextmenu.".concat(self.namespace),(function(d){var data={value:d,name:chartData[0].name||""};self.settings.isMinMax&&max===d&&(data.highest=!0),self.settings.isMinMax&&min===d&&(data.lowest=!0),self.settings.isPeakDot&&max===d&&(data.peak=!0),charts.triggerContextMenu(self.element,d3.select(this).nodes()[0],data)})),this.element.trigger("rendered",svg),this},calculateAspectRatioFit:function calculateAspectRatioFit(d){var ratio=Math.min(d.maxWidth/d.srcWidth,d.maxHeight/d.srcHeight);return{width:d.srcWidth*ratio,height:d.srcHeight*ratio}},handleEvents:function handleEvents(){var _this=this;return this.element.on("updated.".concat("sparkline"),(function(e,settings){_this.updated(settings)})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){_this.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){_this.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){_this.updated()})),this},handleResize:function handleResize(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.element.empty(),this.teardown().init()},teardown:function teardown(){var _this2=this,events=function events(arr){return"".concat(arr.join(".".concat(_this2.namespace," ")),".").concat(_this2.namespace)};return this.element&&(this.element.find(".medianrange").off(events(["mouseenter","mouseleave"])),this.element.find(".point").off(events(["mouseenter","mouseleave","contextmenu"])),this.element.off(events(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function destroy(){this.teardown(),charts.removeTooltip(),this.element&&(this.element.empty().removeClass("sparkline"),$.removeData(this.element[0],"sparkline"),$.removeData(this.element[0],"chart"))}};var EMPTYMESSAGE_DEFAULTS={title:null,info:null,icon:null,button:null,color:"graphite"};function EmptyMessage(element,settings){this.settings=utils.mergeSettings(element,settings,EMPTYMESSAGE_DEFAULTS),this.element=$(element),this.init()}EmptyMessage.prototype={init:function init(){this.setup().build()},setup:function setup(){return this.element.addClass("empty-message"),this},build:function build(){var opts=this.settings;return opts.icon&&$('<div class="empty-icon">\n          <svg class="icon-empty-state is-'.concat(this.settings.color,'" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#').concat(opts.icon,'"></use>\n          </svg></div>')).appendTo(this.element),opts.title&&("[NoData]"===opts.title&&(opts.title=Locale?Locale.translate("NoData"):"No Data Available"),$('<div class="empty-title">'.concat(opts.title,"</div>")).appendTo(this.element)),opts.info&&$('<div class="empty-info">'.concat(opts.info,"</div>")).appendTo(this.element),opts.button&&($("".concat('<div class="empty-actions"><button type="button" class="btn-secondary hide-focus ').concat(opts.button.cssClass,'" id="').concat(opts.button.id,'">')+"<span>".concat(opts.button.text,"</span>")+"</button></div>").appendTo(this.element),opts.button.click&&this.element.on("click","button",opts.button.click)),this},updated:function updated(settings){this.settings=utils.mergeSettings(this.element,settings,this.settings),this.element.empty(),this.build()},destroy:function destroy(){$.removeData(this.element[0],"emptymessage"),this.element.empty(),this.element.removeClass("empty-message")}},$.fn.emptymessage=function(settings){return this.each((function(){var instance=$.data(this,"emptymessage");instance?instance.updated(settings):instance=$.data(this,"emptymessage",new EmptyMessage(this,settings))}))};var LINE_DEFAULTS={dataset:[],isArea:!1,isBubble:!1,isScatterPlot:!1,showLegend:!0,hideDots:!1,animate:!0,redrawOnResize:!0,emptyMessage:{title:Locale?Locale.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Line(element,settings){this.settings=utils.mergeSettings(element,settings,LINE_DEFAULTS),this.element=$(element),this.init()}Line.prototype={init:function init(){return this.namespace=utils.uniqueId({classList:[this.settings.type,"chart"]}),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function build(){var _s$xAxis,_s$xAxis2,self=this,s=this.settings,isPersonalizable=this.element.closest(".is-personalizable").length>0,isFormatter=!!s.formatterString;if(this.element.addClass("line-chart".concat(s.isBubble?" bubble":"")),this.element.addClass("line-chart".concat(s.isScatterPlot?" scatterplot":"")),0===s.dataset.length)return self.element.emptymessage(s.emptyMessage),this;var dots={radius:5,radiusOnHover:7,strokeWidth:2,class:"dot"};s.isBubble&&(dots.radius=0,dots.radiusOnHover=0,dots.strokeWidth=0),s.isScatterPlot&&(dots.radius=0,dots.strokeWidth=50),$.extend(!0,dots,s.dots),self.dots=dots;var tooltipInterval,i,l,isRTL=Locale.isRTL(),tooltipDataCache=[],tooltipData=s.tooltip,axisLabels={},isAxisLabels={atLeastOne:!1},axisArray=["left","top","right","bottom"];if(s.axisLabels&&$.extend(!0,axisLabels,s.axisLabels),!$.isEmptyObject(axisLabels))for(i=0,l=axisArray.length;i<l;i++){var thisAxis=axisLabels[axisArray[i]];thisAxis&&"string"==typeof thisAxis&&""!==$.trim(thisAxis)&&(isAxisLabels[axisArray[i]]=!0,isAxisLabels.atLeastOne=!0)}var longestLabel="",xRotateMarginBot=0,dataset=s.dataset,hideDots=s.hideDots,parent=this.element.parent(),isCardAction=!!$(".widget-chart-action",parent).length,isViewSmall=parent.width()<450,getRotateValue=function getRotateValue(v){return void 0!==v&&"function"!=typeof v&&null!==v?"boolean"==typeof v?v?"-45":null:v:null},xRotate={large:getRotateValue(null===(_s$xAxis=s.xAxis)||void 0===_s$xAxis||null==_s$xAxis?void 0:_s$xAxis.rotate),small:getRotateValue(null===(_s$xAxis2=s.xAxis)||void 0===_s$xAxis2||null==_s$xAxis2?void 0:_s$xAxis2.rotateOnSmallView)},isAxisXRotate=!!xRotate.large;isAxisXRotate&&(xRotate.use=xRotate.large),isViewSmall&&xRotate.small&&(isAxisXRotate=!0,xRotate.use=xRotate.small);var getMaxes=function getMaxes(d,option){return d3.max(d.data,(function(maxData){return option?maxData.value[option]:maxData.value}))};if(isAxisXRotate){dataset[0].data.map((function(d){d.name.length>longestLabel.length&&(longestLabel=d.name)}));var angle=Math.abs(xRotate.use);angle=isNaN(angle)?0:angle,xRotateMarginBot=longestLabel.length*(angle>50?5:2)}var margin={top:isAxisLabels.top?isCardAction?15:40:isCardAction?5:30,right:isAxisLabels.right?65:55,bottom:isAxisLabels.bottom?isAxisXRotate?60:50:xRotateMarginBot+35,left:isAxisLabels.right?75:65},width=parent.width()-margin.left-margin.right,height=parent.height()-margin.top-margin.bottom-30;isCardAction&&(height-=40),self.svg=d3.select(this.element[0]).append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate(".concat(margin.left,",").concat(margin.top,")"));var names=dataset[0].data.map((function(d){return d.name})),valueFormatterString={};dataset[0]&&dataset[0].valueFormatterString&&$.extend(!0,valueFormatterString,dataset[0].valueFormatterString);var maxes,formatValue=function formatValue(str,value){return!$.isEmptyObject(valueFormatterString)&&str?d3.format(str)("0.0%"===str?value/100:value):value},labels={name:"Name",value:{x:"Value.x",y:"Value.y",z:"Value.z"}};dataset[0]&&dataset[0].labels&&$.extend(!0,labels,dataset[0].labels);var entries,x=(s.xAxis&&s.xAxis.scale?s.xAxis.scale:d3.scaleLinear()).range([0,width]),y=d3.scaleLinear().range([height,0]),z=d3.scaleLinear().range([1,25]);maxes=s.isBubble?{x:dataset.map((function(d){return getMaxes(d,"x")})),y:dataset.map((function(d){return getMaxes(d,"y")})),z:dataset.map((function(d){return getMaxes(d,"z")}))}:s.isScatterPlot?{x:dataset.map((function(d){return getMaxes(d,"x")})),y:dataset.map((function(d){return getMaxes(d,"y")}))}:dataset.map((function(d){return getMaxes(d)})),entries=d3.max(dataset.map((function(d){return d.data.length})))<=1?d3.max(dataset.map((function(d){return d.data.length}))):d3.max(dataset.map((function(d){return d.data.length})))-1;var _s$xAxis3,_s$xAxis4,xScale=x.domain(s.xAxis&&s.xAxis.domain?s.xAxis.domain:[0,s.isBubble||s.isScatterPlot?d3.max(maxes.x):entries]),yScale=y.domain([0,d3.max(s.isBubble||s.isScatterPlot?maxes.y:maxes)]).nice(),zScale=z.domain([0,d3.max(s.isBubble?maxes.z:maxes)]).nice(),numTicks=entries;(s.xAxis&&s.xAxis.ticks&&(numTicks="auto"===s.xAxis.ticks?Math.max(width/85,2):s.xAxis.ticks,(s.isBubble||s.isScatterPlot&&isViewSmall)&&(numTicks=Math.round(entries/2))),isViewSmall)&&((null===(_s$xAxis3=s.xAxis)||void 0===_s$xAxis3||null==_s$xAxis3?void 0:_s$xAxis3.numTicksOnSmallView)&&(numTicks=null===(_s$xAxis4=s.xAxis)||void 0===_s$xAxis4||null==_s$xAxis4?void 0:_s$xAxis4.numTicksOnSmallView));var xAxis=d3.axisBottom(xScale).ticks(numTicks).tickPadding(10).tickSize(s.isBubble||s.isScatterPlot?-(height+10):0).tickFormat((function(d,j){if(s.xAxis){if(s.xAxis.formatter)return s.xAxis.formatter(d,j);if("auto"===s.xAxis.ticks)return names[d]}return s.isBubble||s.isScatterPlot?d:names[d]})),yAxis=d3.axisLeft(yScale).ticks(8).tickSize(-(width+20)).tickPadding(isRTL?-18:20);if(s.yAxis&&s.yAxis.formatter&&yAxis.tickFormat((function(d,k){return"function"==typeof s.yAxis.formatter?s.yAxis.formatter(d,k):d})),s.yAxis&&s.yAxis.ticks&&yAxis.ticks(s.yAxis.ticks.number,s.yAxis.ticks.format),isAxisLabels.atLeastOne){var axisLabelsGroup=self.svg.append("g").attr("class","axis-labels"),place={top:"translate(".concat(width/2,",").concat(-10,")"),right:"translate(".concat(width+28,",").concat(height/2,")rotate(90)"),bottom:"translate(".concat(width/2,",").concat(height+40,")"),left:"translate(".concat(-40,",").concat(height/2,")rotate(-90)")},placeStyle={top:"rotate(0deg) scaleX(-1) translate(-".concat(width/2,"px, ").concat(-10,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(height/2+5,"px, -").concat(width+28,"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(width/2,"px, ").concat(height+40,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(height/2-5,"px, ",55,"px)")},addAxis=function addAxis(pos){isAxisLabels[pos]&&axisLabelsGroup.append("text").attr("class","axis-label-".concat(pos)).attr("text-anchor","middle").attr("transform",isRTL?"":place[pos]).style("font-size","1.25em").style("transform",isRTL?placeStyle[pos]:"").text(axisLabels[pos])};for(i=0,l=axisArray.length;i<l;i++)addAxis(axisArray[i])}self.svg.append("g").attr("class","x axis").attr("transform","translate(0,".concat(height,")")).call(xAxis),self.svg.append("g").attr("class","y axis").call(yAxis),self.svg.selectAll(".tick line").attr("x1","-10"),(s.isBubble||s.isScatterPlot)&&(self.svg.selectAll(".x.axis .tick line, .y.axis .tick line").style("opacity",0),self.svg.select(".x.axis .tick line").attr("x2","-10").style("opacity",1),self.svg.select(".y.axis .tick line").style("opacity",1)),isRTL&&(self.svg.selectAll("text").attr("transform","scale(-1, 1)"),self.svg.selectAll(".y.axis text").style("text-anchor","end")),isAxisXRotate&&self.svg.selectAll(".x.axis .tick text").attr("y",0).attr("x",(function(){return-(this.getBBox().width+10)})).attr("dy","1em").attr("transform","rotate(".concat(xRotate.use,")")).style("text-anchor","start"),s.xAxis&&s.xAxis.formatText&&self.svg.selectAll(".x.axis .tick text").each((function(m){var elem=d3.select(this),text=d3.select(this).text(),markup=s.xAxis.formatText(text,m);DOM.html(elem.node(),markup,"<tspan><text><glyph>")}));var line=d3.line().x((function(d,n){return s.xAxis&&s.xAxis.parser?xScale(s.xAxis.parser(d,n)):xScale(s.isBubble||s.isScatterPlot?d.value.x:n)})).y((function(d){return yScale(s.isBubble||s.isScatterPlot?d.value.y:d.value)}));dataset.forEach((function(d,lineIdx){var lineGroups=self.svg.append("g").attr("data-group-id",lineIdx).attr("class","line-group");if(s.isArea){var area=d3.area().x((function(dc,p){return xScale(p)})).y0(height).y1((function(db){return yScale(s.isBubble||s.isScatterPlot?db.value.y:db.value)}));lineGroups.append("path").datum(d.data).attr("fill",(function(){return charts.chartColor(lineIdx,"line",d)})).style("opacity",".2").attr("class","area").attr("d",area)}var path=lineGroups.append("path").datum(d.data).attr("d",line(d.data)).attr("stroke",(function(){return s.isBubble||s.isScatterPlot?"":charts.chartColor(lineIdx,"line",d)})).attr("stroke-width",2).attr("fill","none").attr("class","line").on("click.".concat(self.namespace),(function(){charts.selectElement(d3.select(this.parentNode),self.svg.selectAll(".line-group"),d,self.element)})).on("contextmenu.".concat(self.namespace),(function(){charts.triggerContextMenu(self.element,d3.select(this).nodes()[0],d)})),totalLength=path.node().getTotalLength();path.attr("stroke-dasharray","".concat(totalLength," ").concat(totalLength)).attr("stroke-dashoffset",totalLength).transition().duration(s.animate?600:0).ease(d3.easeCubic).attr("stroke-dashoffset",0);var handleMouseEnter=function handleMouseEnter(elem,mouseEnterData){var rect=elem.getBoundingClientRect(),content="<p><b>".concat(mouseEnterData.name," </b> ").concat(function format(value){return isFormatter?d3.format(s.formatterString)(value):value}(mouseEnterData.value),"</p>"),show=function show(){var size=charts.tooltipSize(content),posX=rect.left-size.width/2+6,posY=rect.top-size.height-18;posX=s.isBubble||s.isScatterPlot?rect.left+rect.width/2-size.width/2:posX,""!==content&&(charts.tooltip&&charts.tooltip.length&&charts.tooltip[isPersonalizable?"addClass":"removeClass"]("is-personalizable"),charts.showTooltip(posX,posY,content,"top"))};if(s.isBubble||s.isScatterPlot){for(var key in content='<div class="chart-swatch line"><div class="swatch-caption"><span class="indicator-box"></span>\n            <b>'.concat(mouseEnterData.name,"</b></div>"),mouseEnterData)if(mouseEnterData.hasOwnProperty(key))if("object"!==_typeof(mouseEnterData[key]))labels[key]&&(content+="".concat('<div class="swatch-row"><span>').concat(labels[key],"</span>")+"<b>".concat(d.name,"</b>")+"</div>");else{var obj2=mouseEnterData[key];for(var key2 in obj2)obj2.hasOwnProperty(key2)&&(content+="".concat('<div class="swatch-row"><span class="text-capitalize">').concat(labels[key][key2],"</span>")+"<b>".concat(formatValue(valueFormatterString[key2],obj2[key2]),"</b>")+"</div>")}content+="</div>"}if(tooltipData&&"function"==typeof tooltipData&&!tooltipDataCache[i]){content="";var runInterval=!0;tooltipInterval=setInterval((function(){runInterval&&(runInterval=!1,tooltipData((function(data){content=data,tooltipDataCache[i]=data}))),""!==content&&(clearInterval(tooltipInterval),show())}),10)}else{tooltipData="object"===_typeof(tooltipData)?"":tooltipData,content=tooltipDataCache[i]||tooltipData||mouseEnterData.tooltip||d.tooltip||content||"",show();for(var spans=document.querySelectorAll("#svg-tooltip .swatch-caption span"),k=0;k<spans.length;k++)spans[k].style.backgroundColor=charts.chartColor(s.isBubble||s.isScatterPlot?mouseEnterData.lineIdx:k,"line",mouseEnterData)}d3.select(this).attr("r",(function(df){return s.isBubble?2+zScale(df.value.z):dots.radiusOnHover}))};hideDots||(s.isScatterPlot||lineGroups.selectAll("circle").data(d.data).enter().append("circle").attr("class",dots.class).attr("cx",(function(dd,p){return s.xAxis&&s.xAxis.parser?xScale(s.xAxis.parser(dd,p)):xScale(s.isBubble||s.isScatterPlot?dd.value.x:p)})).attr("cy",(function(de){return yScale(s.isBubble||s.isScatterPlot?0:de.value)})).attr("r",dots.radius).style("stroke-width",dots.strokeWidth).style("fill",(function(){return charts.chartColor(lineIdx,"line",d)})).style("opacity",s.isBubble||s.isScatterPlot?".7":"1").on("mouseenter.".concat(self.namespace),(function(mouseEnterData){mouseEnterData.lineIdx=lineIdx,handleMouseEnter(this,mouseEnterData)})).on("mouseleave.".concat(self.namespace),(function(){clearInterval(tooltipInterval),charts.hideTooltip(),d3.select(this).attr("r",(function(dg){return s.isBubble?zScale(dg.value.z):dots.radius}))})).on("click.".concat(self.namespace),(function(dh){charts.selectElement(d3.select(this.parentNode),self.svg.selectAll(".line-group"),dh,self.element)})).on("contextmenu.".concat(self.namespace),(function(di){charts.triggerContextMenu(self.element,d3.select(this).nodes()[0],di)})),s.isScatterPlot&&lineGroups.selectAll(".symbol").data(d.data).enter().append("path").attr("class","symbol").attr("transform",(function(ds){return"translate(".concat(xScale(ds.value.x),",").concat(yScale(ds.value.y),")")})).attr("d",d3.symbol().size(dots.strokeWidth).type((function(){return d3.symbols[lineIdx]}))).style("opacity",0).style("fill",(function(){return charts.chartColor(lineIdx,"line",d)})).on("mouseenter.".concat(self.namespace),(function(mouseEnterData){mouseEnterData.lineIdx=lineIdx,handleMouseEnter(this,mouseEnterData)})).on("mouseleave.".concat(self.namespace),(function(){clearInterval(tooltipInterval),charts.hideTooltip(),d3.select(this).attr("r",(function(){return dots.radius}))})).on("click.".concat(self.namespace),(function(dh){charts.selectElement(d3.select(this.parentNode),self.svg.selectAll(".line-group"),dh,self.element)})).on("contextmenu.".concat(self.namespace),(function(di){charts.triggerContextMenu(self.element,d3.select(this).nodes()[0],di)})),s.isBubble&&lineGroups.selectAll("circle").attr("cy",(function(di){return yScale(di.value.y)})).transition().duration(s.animate?750:0).ease(d3.easeCubic).attr("r",(function(dj){return zScale(dj.value.z)})),s.isScatterPlot&&lineGroups.selectAll(".symbol").transition().duration(s.animate?750:0).ease(d3.easeCubic).style("opacity",1))})),self.svg.selectAll(".y.axis .tick").attr("class",(function(di){return"tick".concat(0===di?" tick0":"")}));var series=dataset.map((function(d){return{color:d.color,name:d.name,selectionObj:self.svg.selectAll(".line-group"),selectionInverse:self.svg.selectAll(".line-group"),data:d}}));return s.showLegend&&charts.addLegend(series,s.isScatterPlot?"scatterplot":"line",s,this.element),charts.appendTooltip(),charts.setSelected=function(o,isToggle){var selector,selectorData,elem,selected=0,equals=utils.equals,setSelected=function setSelected(d,i1,d2,i2){d2?(elem=self.svg.select('[data-group-id="'.concat(i1,'"]')).select(".dot:nth-child(".concat(i2+2,")")),("number"==typeof o.groupIndex&&void 0!==o.fieldName&&void 0!==o.fieldValue&&o.groupIndex===i1&&o.fieldValue===d2[o.fieldName]||void 0!==o.index&&"number"==typeof o.groupIndex&&o.groupIndex===i1&&o.index===i2||o.elem&&$(elem.node()).is(o.elem)||o.data&&equals(o.data,d2))&&(selected++,selectorData=d2,selector=self.svg.select('[data-group-id="'.concat(i1,'"]')))):(elem=self.svg.select('[data-group-id="'.concat(i1,'"]')),(void 0!==o.groupName&&void 0!==o.groupValue&&o.groupValue===d[o.groupName]||void 0!==o.groupIndex&&o.groupIndex===i1||o.elem&&$(elem.node()).is(o.elem)||o.data&&equals(o.data,d))&&(selected++,selectorData=d,selector=elem))};dataset.forEach((function(d,i3){selected<1&&d&&d.data&&(d.data.forEach((function(d2,i2){selected<1&&d2&&setSelected(d,i3,d2,i2)})),selected<1&&setSelected(d,i3))})),selected>0&&(isToggle||!selector.classed("is-selected"))&&charts.selectElement(selector,self.svg.selectAll(".line-group"),selectorData,self.element)},this.setInitialSelected(),this.element.trigger("rendered"),this},setInitialSelected:function setInitialSelected(){var selector,selectorData,self=this,selected=0,setInitialSelected=function setInitialSelected(node,d,selectedIdx){node.selected&&selected<1&&(selected++,selector=d3.select(self.svg.selectAll(".line-group").nodes()[selectedIdx]),selectorData=d)};this.settings.dataset.forEach((function(d,setIdx){d&&setInitialSelected(d,d,setIdx)})),this.settings.dataset.forEach((function(d,setIdx){(d||d.data)&&d.data.forEach((function(d2){setInitialSelected(d2,d,setIdx)}))})),selected>0&&charts.selectElement(selector,self.svg.selectAll(".line-group"),selectorData,self.element)},handleEvents:function handleEvents(){var _this=this;return this.element.on("updated.".concat(this.namespace),(function(){_this.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){_this.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){_this.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){_this.updated()})),this},width:0,getSelected:function getSelected(){return charts.selected},setSelected:function setSelected(options,isToggle){var internals={svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1};charts.setSelected(options,isToggle,internals)},toggleSelected:function toggleSelected(options){this.setSelected(options,!0)},handleResize:function handleResize(){var _this2=this,resize=function resize(){_this2.width!==_this2.element.width()&&(_this2.width=_this2.element.width(),_this2.element.is(":visible")&&_this2.updated())};this.element.closest(".homepage").length?setTimeout((function(){return resize()}),300):resize()},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),this.element.empty(),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.build()},teardown:function teardown(){var _this3=this,events=function events(arr){return"".concat(arr.join(".".concat(_this3.namespace," ")),".").concat(_this3.namespace)};return this.element&&(this.element.find(".line-group .line").off(events(["click","contextmenu"])),this.element.find(".line-group .symbol").off(events(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(events(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),this.dots&&this.element&&(this.element.find(".line-group .".concat(this.dots.class)).off(events(["mouseenter","mouseleave","click","contextmenu"])),delete this.dots),delete this.namespace,this},destroy:function destroy(){this.teardown(),charts.removeTooltip(),this.element&&(this.element.empty().removeClass("line-chart"),$.removeData(this.element[0],"line"),$.removeData(this.element[0],"chart"))}};var COLUMN_DEFAULTS={dataset:[],isStacked:!1,showLegend:!0,animate:!0,format:null,redrawOnResize:!0,ticks:9,emptyMessage:{title:Locale?Locale.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Column(element,settings){this.settings=utils.mergeSettings(element,settings,COLUMN_DEFAULTS),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element=$(element),this.init()}Column.prototype={init:function init(){return this.namespace=utils.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function build(){var datasetStacked,self=this,isPersonalizable=this.element.closest(".is-personalizable").length>0,isFormatter=!!this.settings.formatterString,format=function format(value){return isFormatter?d3.format(self.settings.formatterString)(value):value},dataset=this.settings.dataset;if(this.dataset=dataset,0===dataset.length)return self.element.emptymessage(self.settings.emptyMessage),this;var parent=this.element.parent(),isRTL=Locale.isRTL(),isPositiveNegative="column-positive-negative"===this.settings.type||"positive-negative"===this.settings.type,isSingle=1===dataset.length;this.isSingle=isSingle;var isGrouped=!(isSingle||!isSingle&&self.settings.isStacked);this.isGrouped=isGrouped;var yMinTarget,yMaxTarget,series,seriesStacked,pnColors,pnPatterns,pnLegends,pnSeries,tooltipInterval,margin_top=40,margin_right=40,margin_bottom=isSingle&&void 0===dataset[0].name?self.settings.isStacked?20:50:35,margin_left=45,width=parent.width()-margin_left-margin_right-10,height=parent.height()-margin_top-margin_bottom-(isSingle&&void 0===dataset[0].name?self.settings.isStacked||isPositiveNegative?30:0:40),yMin=d3.min(dataset,(function(group){return d3.min(group.data,(function(d){return d.value}))})),yMax=d3.max(dataset,(function(group){return d3.max(group.data,(function(d){return d.value}))}));isPositiveNegative&&(yMinTarget=d3.min(dataset,(function(group){return d3.min(group.data,(function(d){return d.target}))})),yMaxTarget=d3.max(dataset,(function(group){return d3.max(group.data,(function(d){return d.target}))})),yMin=d3.min([yMin,yMinTarget]),yMax=d3.max([yMax,yMaxTarget]),pnLegends={target:"Target",positive:"Positive",negative:"Negative"},pnColors={target:"neutral",positive:"good",negative:"error"},pnPatterns={},dataset[0]&&(dataset[0].colors&&$.extend(!0,pnColors,dataset[0].colors),dataset[0].legends&&$.extend(!0,pnLegends,dataset[0].legends),dataset[0].patterns&&$.extend(!0,pnPatterns,dataset[0].patterns)),pnSeries=[],$.each(pnLegends,(function(key,val){pnSeries.push({name:val,color:pnColors[key],pattern:pnPatterns[key],option:key})}))),this.element.addClass("column-chart");var tooltipDataCache=[],tooltipData=self.settings.tooltip,x0=d3.scaleBand().range([0,width]).round(!0).padding(.1),x1=d3.scaleBand(),y=d3.scaleLinear().range([height,0]),xScale=null,yScale=null;if(self.settings.isStacked){var yStack={y1:[],y2:[]};datasetStacked=isSingle?dataset[0].data.map((function(d,i){var y0=0;return 0===i?(yStack.y1.push(d.value),yStack.y2.push(0)):(y0=yStack.y1[0]+yStack.y2[0],yStack.y1[0]=d.value,yStack.y2[0]=y0),[$.extend({},d,{y0:y0,y:d.value,x:d.name,color:d.color,pattern:d.pattern,parentName:d.name,tooltip:d.tooltip})]})):dataset.map((function(d,i){return d.data.map((function(o,i2){var y0=0;return 0===i?(yStack.y1.push(o.value),yStack.y2.push(0)):(y0=yStack.y1[i2]+yStack.y2[i2],yStack.y1[i2]=o.value,yStack.y2[i2]=y0),$.extend({},o,{y0:y0,y:o.value,x:o.name,color:o.color,pattern:o.pattern,parentName:d.name,tooltip:d.tooltip})}))})),d3.stack()(datasetStacked),xScale=d3.scaleBand().domain(d3.range(datasetStacked[0].length)).rangeRound([0,width],.05),isSingle&&self.settings.isStacked&&xScale.paddingInner(.095),yScale=d3.scaleLinear().domain([0,d3.max(datasetStacked,(function(d){return d3.max(d,(function(d1){return d1.y0+d1.y}))}))]).range([0,height])}var xAxisValues=dataset[0].data.map((function(d){return d.name})),xAxis=d3.axisBottom(x0).tickSize(0).tickPadding(12),yAxis=d3.axisLeft(y).tickSize(-width).tickPadding(isRTL?-12:12).ticks(self.settings.ticks||9,d3.format(self.settings.format||"s"));self.settings.yAxis&&(self.settings.yAxis.formatter&&yAxis.tickFormat((function(d,k){return"function"==typeof self.settings.yAxis.formatter?self.settings.yAxis.formatter(d,k):d})),self.settings.yAxis.ticks&&self.settings.yAxis.ticks.number>1&&self.settings.yAxis.ticks.format&&yAxis.ticks(self.settings.yAxis.ticks.number,self.settings.yAxis.ticks.format));var svg=d3.select(this.element[0]).append("svg").attr("width",width+margin_left+margin_right).attr("height",height+margin_top+margin_bottom).append("g").attr("transform","translate(".concat(margin_left,",").concat(margin_top,")"));this.svg=svg;var maxesStacked,names=dataset.map((function(d){return d.name})),maxes=dataset.map((function(d){return d3.max(d.data,(function(maxD){return isPositiveNegative?maxD.target:maxD.value}))}));if(self.settings.isStacked&&(maxesStacked=datasetStacked.map((function(maxesD){return d3.max(maxesD,(function(d){return d.y+d.y0}))}))),isSingle&&(names=dataset[0].data.map((function(d){return d.name}))),isPositiveNegative&&(yMin+=yMin/y.ticks().length,maxes[0]+=maxes[0]/(y.ticks().length/2)),function(){if(self.settings.isStacked&&isSingle)series=dataset[0].data;else for(var lm,i=dataset.length-1;i>-1;i--)lm=dataset[i].data.map((function(d){return d})),$.extend(!0,series,lm),series=$.map(series,(function(d){return d}))}(),self.settings.isStacked&&!isSingle&&(seriesStacked=names.map((function(d,i){return dataset[i]}))),x0.domain(self.settings.isStacked?xAxisValues:names),x1.domain(xAxisValues).rangeRound([0,isSingle||self.settings.isStacked?width:x0.bandwidth()]),y.domain([yMin<0?yMin:self.settings.minValue||0,d3.max(self.settings.isStacked?maxesStacked:maxes)]).nice(),(!isSingle||isSingle&&!self.settings.isStacked)&&svg.append("g").attr("class","x axis").attr("transform","translate(0,".concat(height+(isPositiveNegative?10:0),")")).call(xAxis),svg.append("g").attr("class","y axis").call(yAxis),isRTL&&yMin<0){var tempLength,yMaxLength=0;svg.selectAll(".axis.y text").attr("class",(function(d){return tempLength=d3.select(this).text().length,yMaxLength=tempLength>yMaxLength?tempLength:yMaxLength,d<0?"negative-value":"positive-value"})).attr("x",(function(d){return yMaxLength*(d<0?9:5)}))}var targetBars,pnBars,dataArray=[];dataset.forEach((function(d){dataArray.push($.extend({},d,{values:d.data}))})),isSingle&&(dataArray=[],names=dataset[0].data.forEach((function(d){dataArray.push(d)})));var barsInGroup=dataArray[0]&&dataArray[0].values?dataArray[0].values.length:0,isGroupSmaller=width/dataArray.length>35*(barsInGroup+1),color=function color(colorStr){return charts.chartColor(0,"",{color:colorStr})},onEndAllTransition=function onEndAllTransition(transition,callback){var n;transition.empty()?callback():(n=transition.size(),transition.on("end.".concat(self.namespace),(function(){0===--n&&callback()})))},drawBars=function drawBars(isTargetBars){var bars;if(isTargetBars=isPositiveNegative&&isTargetBars,isSingle||isPositiveNegative){if(bars=self.svg.selectAll("rect".concat(isTargetBars?".target-bar":".bar")).data(self.settings.isStacked?datasetStacked:dataArray).enter().append("rect").attr("class",(function(d,i){var classStr="bar series-".concat(i);return isPositiveNegative&&(classStr=(isTargetBars?"target-bar series-".concat(i):classStr)+(d.value>0?" positive":" negative")),classStr})).attr("width",Math.min.apply(null,[x1.bandwidth()-2,35])).attr("x",(function(d){return self.settings.isStacked?xScale(0):x1(d.name)+(x1.bandwidth()-35)/2})).attr("y",(function(){return y(0)>height?height:y(0)})).attr("height",(function(){return 0})).attr("mask",(function(d){return isPositiveNegative?isTargetBars?pnPatterns.target?"url(#".concat(pnPatterns.target,")"):null:d.value<0?pnPatterns.negative?"url(#".concat(pnPatterns.negative,")"):null:pnPatterns.positive?"url(#".concat(pnPatterns.positive,")"):null:null})).style("fill",(function(d){return isPositiveNegative?color(isTargetBars?pnColors.target:d.value<0?pnColors.negative:pnColors.positive):null})),isPositiveNegative){svg.selectAll(isTargetBars?".target-bartext":".bartext").data(dataArray).enter().append("text").attr("class",(function(d){return(isTargetBars?"target-bartext":"bartext")+(d.value>0?" positive":" negative")})).attr("text-anchor","middle").attr("x",(function(d){return(x1(d.name)+x1.bandwidth()/2)*(isRTL?-1:1)})).attr("y",(function(d){return isTargetBars?y(d.target)-6:y(d.value>0?0:d.value)+12})).style("opacity",0).style("fill",(function(d){return isTargetBars?"":d.value<0?color(pnColors.negative):color(pnColors.positive)})).style("font-weight","bold").text((function(d){return format(isTargetBars?d.target:d.value)}))}bars.transition().duration(self.settings.animate?1e3:0).call(onEndAllTransition,(function(){svg.selectAll(".target-bartext, .bartext").transition().duration(self.settings.animate?300:0).style("opacity",1)})).attr("y",(function(d){var r=self.settings.isStacked?height-yScale(d[0].y)-yScale(d[0].y0):d.value<0?y(0):y(d.value);return isTargetBars?y(d.target):d.value<0?r:r>height-3?height-2:r})).attr("height",(function(d){var r;return r=self.settings.isStacked?yScale(d[0].y):d.value<0?height-y(0)-(height-y(d.value)):height-y(d.value)-(height-y(0)),r=d.value<0?r:r<3?2:r>height?height-y(d.value):r,isTargetBars?height-y(d.target)-(height-y(0)):r}))}else{(bars=svg.selectAll(".x-value").data(self.settings.isStacked?datasetStacked:dataArray).enter().append("g").attr("class","series-group g").attr("data-group-id",(function(d,i){return i})).attr("transform",(function(d){var x=x0(self.settings.isStacked?xAxisValues[0]:d.name),bandwidth=x0.bandwidth();(!self.settings.isStacked&&isGroupSmaller&&bandwidth>35*dataArray.length*2&&(x+=x0.bandwidth()/2/dataArray.length/2),self.isGrouped&&!self.settings.isStacked)&&(x-=35/(x0.bandwidth()>150?2:4));return"translate(".concat(x,",0)")})).selectAll("rect").data((function(d){return self.settings.isStacked?d:d.values})).enter().append("rect").attr("class",(function(d,i){return"series-".concat(i," bar")})).attr("width",Math.min.apply(null,[x1.bandwidth()-2,35])).attr("x",(function(d,i){var width=Math.min.apply(null,[x1.bandwidth()-2,35]);return self.settings.isStacked?xScale(i):x1.bandwidth()/2+(width+2)*i-(1===dataArray[0].values.length||5===dataArray[0].values.length||4===dataArray[0].values.length?width/2:0)})).attr("y",(function(){return y(0)>height?height:y(0)})).attr("height",(function(){return 0}))).transition().duration(self.settings.animate?600:0).attr("y",(function(d){var r=self.settings.isStacked?height-yScale(d.y)-yScale(d.y0):d.value<0?y(0):y(d.value);return d.value<0?r:r>height-3?height-2:r})).attr("height",(function(d){var r;return r=self.settings.isStacked?yScale(d.y):d.value<0?height-y(0)-(height-y(d.value)):height-y(d.value)-(height-y(0)),d.value<0?r:r<3?2:r>height?height-y(d.value):r}))}return bars};isPositiveNegative&&(targetBars=drawBars(!0));var bars=drawBars();return isPositiveNegative&&(pnBars=d3.selectAll([].concat(_toConsumableArray(targetBars.nodes()),_toConsumableArray(bars.nodes())))),isPositiveNegative||(self.settings.isStacked?self.settings.isStacked&&!isSingle?bars.style("fill",(function(){var thisGroup=d3.select(this.parentNode).attr("data-group-id");return charts.chartColor(thisGroup,"bar",dataset[thisGroup])})).attr("mask",(function(){var thisGroup=d3.select(this.parentNode).attr("data-group-id");return dataset[thisGroup].pattern?"url(#".concat(dataset[thisGroup].pattern,")"):null})):self.settings.isStacked&&isSingle&&bars.style("fill",(function(d,i){return charts.chartColor(i,"bar",d[0])})).attr("mask",(function(d){return d[0].pattern?"url(#".concat(d[0].pattern,")"):null})):bars.style("fill",(function(d,i){return isSingle?charts.chartColor(i,"column-single",dataset[0].data[i]):charts.chartColor(i,"bar",series[i])})).attr("mask",(function(d,i){return isSingle?dataset[0].data[i].pattern?"url(#".concat(dataset[0].data[i].pattern,")"):null:series[i].pattern?"url(#".concat(series[i].pattern,")"):null}))),$.extend(charts.settings,{svg:svg,chartType:"Column",isSingle:isSingle,isGrouped:isGrouped,isStacked:self.settings.isStacked}),(isPositiveNegative?pnBars:bars).on("mouseenter.".concat(self.namespace),(function(d,i){var x,y,j,l,hexColor,size,isTooltipBottom,thisShape=this,shape=$(this),content="",ePageY=d3.event.pageY,setPattern=function setPattern(pattern,hexColor){return pattern&&hexColor?"".concat('<svg width="12" height="12"><rect style="fill: ').concat(hexColor,'" mask="url(#').concat(pattern,')" height="12" width="12" />')+"</svg>":""},show=function show(isTooltipBottom){size=charts.tooltipSize(content),x=shape[0].getBoundingClientRect().left-size.width/2+shape.attr("width")/2,self.settings.isStacked?y=shape[0].getBoundingClientRect().top-size.height-10:(y=ePageY-charts.tooltip.outerHeight()-25,dataset.length>1&&(x=thisShape.parentNode.getBoundingClientRect().left-size.width/2+thisShape.parentNode.getBoundingClientRect().width/2,isTooltipBottom?(y+=charts.tooltip.outerHeight()+50)>thisShape.parentNode.getBoundingClientRect().bottom+10&&(y=thisShape.parentNode.getBoundingClientRect().bottom+10):y=thisShape.parentNode.getBoundingClientRect().top-charts.tooltip.outerHeight()+25)),""!==content&&(charts.tooltip&&charts.tooltip.length&&charts.tooltip[isPersonalizable?"addClass":"removeClass"]("is-personalizable"),charts.showTooltip(x,y,content,isTooltipBottom?"bottom":"top"))},replaceMatchAndSetType=function replaceMatchAndSetType(){"string"==typeof content?content=function replaceMatch(str,callback,expr){if(null==expr?expr=/{{(\w+)}}/g:"string"==typeof expr&&(expr=new RegExp(expr,"g")),"string"==typeof str&&"function"==typeof callback&&expr instanceof RegExp)for(var max=9999;expr.test(str)&&max>0;)str=str.replace(expr,(function(match,key){return callback(match,key)})),max--;return str}(content,(function(match,key){return format(d[key])})):"number"==typeof content&&(content=content.toString())},setCustomTooltip=function setCustomTooltip(method){content="";var args={index:i,data:d},req=function req(res){"string"!=typeof res&&"number"!=typeof res||(content=res,replaceMatchAndSetType(),tooltipDataCache[i]=content)},runInterval=!0;tooltipInterval=setInterval((function(){runInterval&&(runInterval=!1,method(req,args)),""!==content&&(clearInterval(tooltipInterval),show())}),10)};if(self.settings.isStacked){if(isSingle)content="<p><b>".concat(format(d[0].value),"</b> ").concat(d[0].name,"</p>");else{for(content="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(datasetStacked[0][i].name,"</b></div>"),j=datasetStacked.length-1,l=0;j>=l;j--)hexColor=charts.chartColor(j,"bar",dataset[j]),content+="".concat('<div class="swatch-row"><div style="background-color:').concat(dataset[j].pattern?"transparent":hexColor,';">').concat(setPattern(dataset[j].pattern,hexColor),"</div>")+"<span>".concat(datasetStacked[j][i].parentName,"</span><b>").concat(format(datasetStacked[j][i].value),"</b>")+"</div>";content+="</div>"}size=charts.tooltipSize(content),x=shape[0].getBoundingClientRect().left-size.width/2+shape.attr("width")/2,y=shape[0].getBoundingClientRect().top-size.height-10}else{if(isPositiveNegative)content="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(d.name,"</b></div>")+'<div class="swatch-row">'+'<div style="background-color:'.concat(pnPatterns.target?"transparent":color(pnColors.target),';">').concat(setPattern(pnPatterns.target,color(pnColors.target)),"</div>")+"<span>".concat(pnLegends.target,"</span><b>").concat(format(d.target),"</b>")+'</div><div class="swatch-row">'+'<div style="background-color:'.concat(d.value<0?pnPatterns.negative?"transparent":color(pnColors.negative):pnPatterns.positive?"transparent":color(pnColors.positive),';">').concat(d.value<0?setPattern(pnPatterns.negative,color(pnColors.negative)):setPattern(pnPatterns.positive,color(pnColors.positive)),"</div>")+"<span>".concat(pnLegends[d.value<0?"negative":"positive"],"</span><b>").concat(format(d.value),"</b>")+"</div></div>";else if(1===dataset.length)content="<p><b>".concat(format(d.value),"</b> ").concat(d.name,"</p>");else{var data=d3.select(this.parentNode).datum().values;for(content='<div class="chart-swatch">',j=0,l=data.length;j<l;j++)hexColor=charts.chartColor(j,"bar",series[j]),content+="".concat('<div class="swatch-row"><div style="background-color:').concat(series[j].pattern?"transparent":hexColor,';">').concat(setPattern(series[j].pattern,hexColor),"</div>")+"<span>".concat(data[j].name,"</span><b>").concat(format(data[j].value),"</b>")+"</div>";content+="</div>",isTooltipBottom=data.length>6}size=charts.tooltipSize(content),x=shape[0].getBoundingClientRect().left-size.width/2+shape.attr("width")/2,y=ePageY-charts.tooltip.outerHeight()-25,dataset.length>1&&(x=this.parentNode.getBoundingClientRect().left-size.width/2+this.parentNode.getBoundingClientRect().width/2,y=this.parentNode.getBoundingClientRect().top-charts.tooltip.outerHeight()+25)}tooltipData&&"function"==typeof tooltipData&&void 0===d.tooltip&&!tooltipDataCache[i]?setCustomTooltip(tooltipData):(content=tooltipDataCache[i]||tooltipData||content||"",tooltipDataCache[i]||!1===d.tooltip||void 0===d.tooltip||null===d.tooltip||("function"==typeof d.tooltip?setCustomTooltip(d.tooltip):(content=d.tooltip.toString(),replaceMatchAndSetType(),tooltipDataCache[i]=content)),"string"==typeof content&&""!==content&&show(isTooltipBottom))})).on("mouseleave.".concat(self.namespace),(function(){clearInterval(tooltipInterval),charts.hideTooltip()})).on("click.".concat(self.namespace),(function(d,i,clickedLegend){var isTargetBar=this&&d3.select(this).classed("target-bar"),isSelected=this&&d3.select(this).classed("is-selected"),thisGroupId=parseInt(d3.select(this.parentNode).attr("data-group-id"),10);if(isTargetBar)for(var allBars=d3.selectAll(".bar").nodes(),len=allBars.length,j=0;j<len;j++){var bar=allBars[j];if(d3.select(bar).classed("is-selected")){isSelected=!1;break}}charts.setSelectedElement({task:isSelected?"unselected":"selected",container:self.element,selector:this,isTrigger:!isSelected,isTargetBar:isTargetBar,triggerGroup:isGrouped,d:d,i:i,type:self.settings.type,dataset:self.dataset,isSingle:self.isSingle,isGrouped:self.isGrouped,isStacked:self.settings.isStacked,svg:self.svg,clickedLegend:!0===clickedLegend}),isSelected&&self.element.triggerHandler("selected",[d3.select(this).nodes(),{},isGrouped?thisGroupId:i])})).on("contextmenu.".concat(self.namespace),(function(d){charts.triggerContextMenu(self.element,d3.select(this).nodes()[0],d)})),self.settings.isGrouped=isGrouped,self.settings.isSingle=isSingle,self.settings.svg=this.svg,self.settings.showLegend&&(isSingle&&dataset[0].name?charts.addLegend(dataset,"column-single",self.settings,self.element):isPositiveNegative?charts.addLegend(pnSeries,self.settings.type,self.settings,self.element):self.settings.isStacked&&isSingle?charts.addLegend(series,self.settings.type,self.settings,self.element):isSingle||charts.addLegend(self.settings.isStacked?seriesStacked:series,self.settings.type,self.settings,self.element)),self.settings.xAxis&&self.settings.xAxis.formatText&&self.svg.selectAll(".x.axis .tick text").each((function(m){var elem=d3.select(this),text=d3.select(this).text(),markup=self.settings.xAxis.formatText(text,m);DOM.html(elem.node(),markup,"<tspan>")})),charts.isRTL&&charts.isIE&&(svg.selectAll("text").attr("transform","scale(-1, 1)"),svg.selectAll(".y.axis text").style("text-anchor","start"),isPositiveNegative&&svg.selectAll(".negative-value").style("text-anchor","end")),svg.selectAll(".y.axis .tick").attr("class",(function(d){return"tick".concat(0===d?" tick0":"")})),charts.appendTooltip(),charts.labelsColide(svg)&&charts.applyAltLabels(svg,dataArray,"shortName"),charts.labelsColide(svg)&&charts.applyAltLabels(svg,dataArray,"abbrName"),charts.labelsColide(svg)&&(charts.applyAltLabels(svg,dataArray,null,null,!0),isPositiveNegative&&svg.selectAll(".target-bartext, .bartext").attr("x",(function(){return+d3.select(this).attr("x")-(isRTL?-6:6)}))),charts.setSelected=function(o,isToggle){var barIndex,selector,isStackedGroup,xGroup,selected=0,equals=utils.equals,legendsNode=svg.node().parentNode.nextSibling,legends=d3.select(legendsNode),isLegends=legends.node()&&legends.classed("chart-legend"),setSelectedBar=function setSelectedBar(g,gIdx){var isGroup=!!g;g=isGroup?d3.select(g):svg,gIdx=void 0!==gIdx?gIdx:0,g.selectAll(".bar").each((function(d,i){d&&selected<1&&(void 0!==o.fieldName&&void 0!==o.fieldValue&&o.fieldValue===(isSingle&&self.settings.isStacked?d[0][o.fieldName]:d[o.fieldName])||void 0!==o.index&&o.index===i||o.data&&equals(o.data,dataset[gIdx].data[i])||o.elem&&$(this).is(o.elem))&&(selected++,selector=d3.select(this),barIndex=i,isGroup&&!self.settings.isStacked&&(isStackedGroup=!0))}))};isGrouped||self.settings.isStacked&&!isSingle&&!isGrouped?(dataset.forEach((function(d,i){selected<1&&(xGroup=$(svg.select('[data-group-id="'.concat(i,'"]')).node()),(void 0!==o.groupName&&void 0!==o.groupValue&&o.groupValue===d[o.groupName]||void 0!==o.groupIndex&&o.groupIndex===i||o.data&&equals(o.data,d)||o.elem&&xGroup.is(o.elem))&&void 0===o.fieldName&&void 0===o.fieldValue&&void 0===o.index&&(selected++,selector=svg.select('[data-group-id="'.concat(i,'"]')).select(".bar"),barIndex=i,self.settings.isStacked&&!isGrouped&&(isStackedGroup=!0)))})),selected<1&&function setSelectedGroup(){var groups=svg.selectAll(".series-group");groups.nodes().length&&groups.each((function(d,i){setSelectedBar(this,i)}))}()):setSelectedBar(),selected>0&&(isToggle||!selector.classed("is-selected"))&&(isStackedGroup?isLegends&&$(legends.selectAll(".chart-legend-item")[0][barIndex]).trigger("click.chart"):selector.on("click.".concat(self.namespace)).call(selector.node(),selector.datum(),barIndex))},this.setInitialSelected(),this.element.trigger("rendered"),this},setInitialSelected:function setInitialSelected(){var barIndex,selector,isStackedGroup,selected=0,self=this,legendsNode=self.svg.node().parentNode.nextSibling,legends=d3.select(legendsNode),isLegends=legends.node()&&legends.classed("chart-legend"),setSelectedBar=function setSelectedBar(g){(g=g?d3.select(g):self.svg).selectAll(".bar").each((function(d,i){d&&(self.isSingle&&self.settings.isStacked?d[0].selected:d.selected)&&selected<1&&(selected++,selector=d3.select(this),barIndex=i)}))};self.isGrouped||self.settings.isStacked&&!self.isSingle&&!self.isGrouped?(self.dataset.forEach((function(d,i){d.selected&&selected<1&&(selected++,selector=self.svg.select('[data-group-id="'.concat(i,'"]')).select(".bar"),barIndex=i,!self.settings.isStacked||self.isSingle||self.isGrouped||(isStackedGroup=!0))})),selected<1&&function setSelectedGroup(){var groups=self.svg.selectAll(".series-group");groups.nodes().length&&groups.each((function(){setSelectedBar(this)}))}()):setSelectedBar(),selected>0&&(isStackedGroup?isLegends&&$(legends.selectAll(".chart-legend-item")[0][barIndex]).trigger("click.chart"):selector.on("click.".concat(self.namespace)).call(selector.node(),selector.datum(),barIndex))},handleEvents:function handleEvents(){var _this=this;return this.element.on("updated.".concat(this.namespace),(function(){_this.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){_this.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){_this.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){_this.updated()})),this},getSelected:function getSelected(){return charts.selected},setSelected:function setSelected(options,isToggle){var internals={svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1};charts.setSelected(options,isToggle,internals)},toggleSelected:function toggleSelected(options){this.setSelected(options,!0)},handleResize:function handleResize(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element.empty(),this.build()},teardown:function teardown(){var _this2=this,events=function events(arr){return"".concat(arr.join(".".concat(_this2.namespace," ")),".").concat(_this2.namespace)};return this.element&&(this.element.find(".target-bartext, .bartext").off("end.".concat(self.namespace)),this.element.find(".bar, .target-bar").off(events(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(events(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function destroy(){this.teardown(),charts.removeTooltip(),this.element&&(this.element.empty().removeClass("column-chart"),$.removeData(this.element[0],"column"),$.removeData(this.element[0],"chart"))}};var BAR_DEFAULTS={dataset:[],isStacked:!0,isNormalized:!1,isGrouped:!1,showLegend:!0,animate:!0,longText:!1,format:null,redrawOnResize:!0,tooltip:null,useLogScale:!1,ticks:null,showLines:!0,labelFactor:1.27,wrapWidth:60,emptyMessage:{title:Locale?Locale.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Bar(element,settings){this.settings=utils.mergeSettings(element,settings,BAR_DEFAULTS),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element=$(element),this.init()}Bar.prototype={init:function init(){return this.namespace=utils.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function build(){var maxTextWidth,yMap,gindex,totalBarsInGroup,totalGroupArea,totalHeight,gap,barHeight,tooltipInterval,self=this,isRTL=Locale.isRTL(),isPersonalizable=this.element.closest(".is-personalizable").length>0,isFormatter=!!this.settings.formatterString,format=function format(value){return isFormatter?d3.format(self.settings.formatterString)(value):value},legendMap=[],tooltipDataCache=[],tooltipData=self.settings.tooltip,barSpace=0,maxBarHeight=30,isViewSmall=this.element.parent().width()<450,smallViewport=innerWidth<=480,mediumViewport=innerWidth>=481&&innerWidth<=992,largeViewport=innerWidth>992,dataset=this.settings.dataset,margins={top:20,left:30,right:30,bottom:1===dataset.length?5:30};if(self.settings.isGrouped&&1===dataset.length&&(margins.bottom=30,barSpace=2),this.element.addClass("bar-chart"),this.settings.isGrouped&&this.element.addClass("bar-chart-grouped"),this.settings.isStacked&&this.element.addClass("bar-chart-stacked"),0===dataset.length)return self.element.emptymessage(self.settings.emptyMessage),this;var height=parseInt(this.element.parent().height(),10)-margins.top-margins.bottom-30,series=dataset.map((function(d){return{name:d.name,color:d.color,pattern:d.pattern}})),yStack={y1:[],y2:[]};dataset=dataset.map((function(d,i){return d.data.map((function(o,i2){var y0=0;return 0===i?(yStack.y1.push(o.value),yStack.y2.push(0)):(y0=yStack.y1[i2]+yStack.y2[i2],yStack.y1[i2]=o.value,yStack.y2[i2]=y0),$.extend({},o,{y0:y0,y:o.value,x:o.name,color:o.color,pattern:o.pattern})}))})),maxTextWidth=0,dataset=dataset.map((function(group,i){return self.settings.isStacked||series[i]&&(maxTextWidth=series[i].name.length>maxTextWidth?series[i].name.length:maxTextWidth),group.map((function(d){return self.settings.isStacked&&(maxTextWidth=d.x.length>maxTextWidth?d.x.length:maxTextWidth),$.extend({},d,{x:d.y,y:d.x,x0:d.y0,color:d.color,pattern:d.pattern})}))}));var textWidth,isLongText=this.settings.longText,h=parseInt(this.element.parent().height(),10)-margins.bottom-(self.settings.isStacked?0:15),w=parseInt(this.element.parent().width(),10)-margins.left;smallViewport?textWidth=margins.left+1*maxTextWidth:mediumViewport?textWidth=margins.left+4*maxTextWidth:largeViewport&&(textWidth=margins.left+6*maxTextWidth),isLongText||(textWidth=margins.left+6*maxTextWidth),self.svg=d3.select(this.element[0]).append("svg").attr("width",w).attr("height",h).append("g").attr("class","group").attr("transform","translate(".concat(textWidth,",").concat(margins.top,")"));var xMin=d3.min(dataset,(function(group){return d3.min(group,(function(d){return self.settings.isStacked?d.x+d.x0:d.x}))})),xMax=d3.max(dataset,(function(group){return d3.max(group,(function(d){return self.settings.isStacked?d.x+d.x0:d.x}))}));if(self.settings.isStacked&&self.settings.isNormalized){var gMax=[];dataset.forEach((function(d){d.forEach((function(d,i){gMax[i]=(void 0===gMax[i]?0:gMax[i])+d.x}))})),dataset.forEach((function(d){d.forEach((function(d,i){var xDif=gMax[i]/100;d.x/=xDif,d.x0/=xDif}))})),xMax=100}var xScale,barWith=w-textWidth-margins.left;xScale=self.settings.useLogScale?d3.scaleLog().domain([xMin>0?xMin:1,xMax]).range([1,barWith]).nice():d3.scaleLinear().domain([xMin<0?xMin:0,xMax]).range([0,barWith]).nice(),self.settings.isStacked?(yMap=dataset[0].map((function(d){return d.y})),barHeight=.32):(yMap=series.map((function(d){return d.name})),function(){var i,lm;for(i=dataset.length-1,-1;i>-1;i--)lm=dataset[i].map((function(d){return d})),$.extend(!0,legendMap,lm),legendMap=$.map(legendMap,(function(d){return d}))}(),gindex=0,totalBarsInGroup=legendMap.length,barHeight=(totalGroupArea=height/yMap.length)/totalBarsInGroup,gap=totalGroupArea-(totalHeight=totalBarsInGroup>1?totalGroupArea-.6*barHeight:maxBarHeight),maxBarHeight=totalHeight/totalBarsInGroup,barHeight=0);var yScale=d3.scaleBand().domain(yMap).rangeRound([0,height]).padding(barHeight,barHeight),xAxis=d3.axisBottom().scale(xScale).tickSize(-height);isViewSmall&&xAxis.ticks(textWidth<100?5:3),self.settings.isStacked&&self.settings.isNormalized&&xAxis.tickFormat((function(d){return"".concat(d,"%")})),self.settings.useLogScale&&(xAxis.ticks(10,",.1s"),!1===self.settings.showLines&&xAxis.tickSize(0)),self.settings.ticks&&!self.settings.useLogScale&&(smallViewport?xAxis.ticks(self.settings.ticks.smallNumber,self.settings.ticks.format):mediumViewport?xAxis.ticks(self.settings.ticks.mediumNumber,self.settings.ticks.format):largeViewport&&xAxis.ticks(self.settings.ticks.largeNumber,self.settings.ticks.format));var yAxis=d3.axisLeft().scale(yScale).tickPadding(15).tickSize(0);self.svg.append("g").attr("class","axis x").attr("transform","translate(0,".concat(height,")")).call(xAxis),self.svg.append("g").attr("class","axis y").call(yAxis);var groups=self.svg.selectAll("g.group").data(dataset).enter().append("g").attr("class","series-group").attr("data-group-id",(function(d,i){return i}));if(self.settings.isGrouped=self.svg.selectAll(".series-group").nodes().length>1&&!self.settings.isStacked||self.settings.isGrouped&&1===dataset.length,self.settings.isSingle=1===self.svg.selectAll(".series-group").nodes().length&&self.settings.isStacked,groups.selectAll("rect").data((function(d,i){return d.forEach((function(d3){d3.index=i,self.settings.isStacked||(d3.gindex=gindex++)})),d})).enter().append("rect").attr("class",(function(d,i){return"bar series-".concat(i)})).style("fill",(function(d,i){return self.settings.isStacked?1===series.length?charts.chartColor(i,"bar-single",d):charts.chartColor(d.index,"bar",series[d.index]):charts.chartColor(i,"bar",legendMap[i])})).attr("mask",(function(d,i){return 1===dataset.length&&dataset[0][i].pattern?"url(#".concat(dataset[0][i].pattern,")"):self.settings.isStacked&&series[d.index].pattern?"url(#".concat(series[d.index].pattern,")"):!self.settings.isStacked&&legendMap[i]&&legendMap[i].pattern?"url(#".concat(legendMap[i].pattern,")"):""})).attr("x",(function(d){return self.settings.useLogScale?0:self.settings.isStacked&&!self.settings.isSingle?xScale(d.x0)+1:xScale(0)+1})).attr("y",(function(d){return self.settings.isStacked?yScale(d.y):(totalGroupArea-totalHeight)/2+(d.gindex*maxBarHeight+d.gindex*barSpace)+d.index*gap})).attr("height",(function(){return self.settings.isStacked?yScale.bandwidth():maxBarHeight})).attr("width",0).on("mouseenter.".concat(self.namespace),(function(d,i){var j,l,hexColor,total=0,totals=[],content="",data=d3.select(this.parentNode).datum(),mid=Math.round(data.length/2),shape=d3.select(this),setPattern=function setPattern(pattern,hexColor2){return pattern&&hexColor2?'<svg width="12" height="12"><rect mask="url(#'.concat(pattern,')" height="12" width="12" /></svg>'):""},show=function show(xPosS,yPosS,isTooltipBottom){var size=charts.tooltipSize(content),x=xPosS+parseFloat(shape.attr("width"))/2-size.width/2,y=isTooltipBottom?yPosS:yPosS-size.height-13;""!==content&&(charts.tooltip&&charts.tooltip.length&&charts.tooltip[isPersonalizable?"addClass":"removeClass"]("is-personalizable"),charts.showTooltip(x,y,content,isTooltipBottom?"bottom":"top"))},replaceMatchAndSetType=function replaceMatchAndSetType(){"string"==typeof content?content=function replaceMatch(str,callback,expr){if(null==expr?expr=/{{(\w+)}}/g:"string"==typeof expr&&(expr=new RegExp(expr,"g")),"string"==typeof str&&"function"==typeof callback&&expr instanceof RegExp)for(var max=9999;expr.test(str)&&max>0;)str=str.replace(expr,(function(match,key){return callback(match,key)})),max--;return str}(content,(function(match,key){return format(d[key])})):"number"==typeof content&&(content=content.toString())};if(1===dataset.length)content="<p><b>".concat(d.y," </b>").concat(d.x,"</p>");else{if(content='<div class="chart-swatch">',self.settings.isStacked)for(j=0,l=dataset.length;j<l;j++){total=0,hexColor=charts.chartColor(j,"bar",series[j]);for(var k=0,kl=dataset.length;k<kl;k++)total+=dataset[k][i].x,totals[k]=dataset[k][i].x;content+='<div class="swatch-row">\n                  <div class="swatch-color">'.concat(setPattern(series[j].pattern,hexColor),"</div>\n                  <span>").concat(series[j].name,"</span>\n                  <b> ").concat(isFormatter?format(totals[j]):"".concat(Math.round(totals[j]/total*100),"%")," </b>\n                </div>")}else for(mid>1&&(shape=d3.select(this.parentNode).select(".series-".concat(mid))),j=0,l=data.length;j<l;j++)hexColor=charts.chartColor(j,"bar",legendMap[j]),content+='<div class="swatch-row">\n                    <div class="swatch-color">'.concat(setPattern(legendMap[j].pattern,hexColor),"</div>\n                  <span>").concat(data[j].name,"</span><b>").concat(format(data[j].value),"</b>\n                </div>");content+="</div>"}total>0&&(content='<span class="chart-tooltip-total"><b>'.concat(total,"</b> ").concat(Locale.translate("Total"),"</span>").concat(content));var yPosS=shape.nodes()[0].getBoundingClientRect().top+$(window).scrollTop(),xPosS=shape.nodes()[0].getBoundingClientRect().left+$(window).scrollLeft(),isTooltipBottom=!self.settings.isStacked&&data.length>6;if(tooltipData&&"function"==typeof tooltipData&&!tooltipDataCache[i]){content="";var runInterval=!0;tooltipInterval=setInterval((function(){runInterval&&(runInterval=!1,tooltipData((function(data2){content=data2,tooltipDataCache[i]=data2}))),""!==content&&(clearInterval(tooltipInterval),show(xPosS,yPosS,isTooltipBottom))}),10)}else if(content=tooltipDataCache[i]||tooltipData||content||"",tooltipDataCache[i]||!1===d.tooltip||void 0===d.tooltip||null===d.tooltip||("function"==typeof d.tooltip?function setCustomTooltip(method){content="";var args={index:i,data:d},req=function req(res){"string"!=typeof res&&"number"!=typeof res||(content=res,replaceMatchAndSetType(),tooltipDataCache[i]=content)},runInterval=!0;tooltipInterval=setInterval((function(){runInterval&&(runInterval=!1,method(req,args)),""!==content&&(clearInterval(tooltipInterval),show())}),10)}(d.tooltip):(content=d.tooltip.toString(),replaceMatchAndSetType(),tooltipDataCache[i]=content)),"string"==typeof content&&""!==content&&show(xPosS,yPosS,isTooltipBottom),self.settings.isStacked)for(j=0,l=dataset.length;j<l;j++){hexColor=charts.chartColor(j,"bar",series[j]);var row=$("#svg-tooltip").find(".swatch-row").eq(j);series[j].pattern||row.find("div").css("background-color",hexColor),row.find("rect").css("fill",hexColor)}else for(j=0,l=data.length;j<l;j++){hexColor=charts.chartColor(j,"bar",legendMap[j]);var _row=$("#svg-tooltip").find(".swatch-row").eq(j);legendMap[j].pattern||_row.find("div").css("background-color",hexColor),_row.find("rect").css("fill",hexColor)}})).on("mouseleave.".concat(self.namespace),(function(){clearInterval(tooltipInterval),charts.hideTooltip()})).on("click",(function(d,i){var isSelected=this&&d3.select(this).classed("is-selected");parseInt(d3.select(this.parentNode).attr("data-group-id"),10);charts.setSelectedElement({task:isSelected?"unselected":"selected",container:self.element,selector:this,isTrigger:!isSelected,triggerGroup:self.settings.isGrouped,d:d,i:i,type:self.settings.type,dataset:dataset,isSingle:self.isSingular,isGrouped:self.settings.isGrouped,isStacked:self.settings.isStacked,svg:self.svg,clickedLegend:self.settings.clickedLegend}),isSelected&&self.element.triggerHandler("selected",[d3.select(this).nodes(),{},i])})).on("contextmenu.".concat(self.namespace),(function(d){charts.triggerContextMenu(self.element,d3.select(this).nodes()[0],d)})),self.svg.selectAll(".axis.y text").attr("x",(function(){return isRTL?15:-15})),self.svg.selectAll(".axis.x text").attr("class",(function(d){return d<0?"negative-value":"positive-value"})),isRTL&&(charts.isIE||charts.isIEEdge)&&(self.svg.selectAll("text").attr("transform","scale(-1, 1)"),self.svg.selectAll(".y.axis text").style("text-anchor","start")),isViewSmall&&self.settings.useLogScale){var ticks=d3.selectAll(".x .tick text"),foundMid=!1;ticks.attr("class",(function(d,i){var middleTick=Math.round(ticks.size()/2);i>=middleTick&&!foundMid&&d.toString().startsWith("1")&&(foundMid=!0,middleTick=d),0!==i&&i!==ticks.size()-1&&(self.settings.useLogScale?d!==middleTick:i!==middleTick)&&d3.select(this).remove()}))}return self.svg.selectAll(".x.axis .tick").attr("class",(function(d){return"tick".concat(0===d?" tick0":"")})),self.svg.selectAll(".bar").transition().duration(self.settings.animate?600:0).attr("width",(function(d){var scale=xScale(d.x),scale0=xScale(0);return!isNaN(scale)&&math.isFinite(scale)||(scale=0),!isNaN(scale0)&&math.isFinite(scale0)||(scale0=0),Math.abs(scale-scale0)})).attr("x",(function(d){return self.settings.useLogScale?0:self.settings.isStacked&&!self.settings.isSingle?xScale(d.x0)+1:d.x<0?xScale(d.x)+1:xScale(0)+1})),self.settings.svg=self.svg,self.settings.showLegend&&charts.addLegend(self.settings.isStacked?series:legendMap,self.settings.type,self.settings,this.element),charts.appendTooltip(),this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},setTextValues:function setTextValues(){if(!this.settings.isGrouped)for(var elems=this.element[0].querySelectorAll(".bar-chart .axis.y .tick text"),dataset=this.settings.dataset,_loop=function _loop(i){Object.keys(dataset[i]).map((function(e){return dataset[i][e]})).forEach((function(key){if(key&&key.constructor===Array)for(var j=0;j<key.length;j++)innerWidth<=480?elems[j].textContent=key[j].shortName||key[j].name:innerWidth>=481&&innerWidth<=992?elems[j].textContent=key[j].abbrName||key[j].name:innerWidth>992&&(elems[j].textContent=key[j].name)}))},i=0;i<dataset.length;i++)_loop(i)},setInitialSelected:function setInitialSelected(){var barIndex,selector,isStackedGroup,selected=0,self=this,legendsNode=self.svg.node().parentNode.nextSibling,legends=d3.select(legendsNode),isLegends=legends.node()&&legends.classed("chart-legend"),setSelectedBar=function setSelectedBar(g){(g=g?d3.select(g):self.svg).selectAll(".bar").each((function(d,i){d&&d.selected&&selected<1&&(selected++,selector=d3.select(this),barIndex=i)}))};self.settings.isGrouped||self.settings.isStacked&&!self.settings.isSingle?(self.settings.dataset.forEach((function(d,i){d.selected&&selected<1&&(selected++,selector=self.svg.select('[data-group-id="'.concat(i,'"]')).select(".bar"),barIndex=i,self.settings.isStacked&&!self.settings.isGrouped&&(isStackedGroup=!0))})),selected<1&&function setSelectedGroup(){var groups=self.svg.selectAll(".series-group");groups.nodes().length&&groups.each((function(){setSelectedBar(this)}))}()):setSelectedBar(),selected>0&&(isStackedGroup?isLegends&&$(legends.selectAll(".chart-legend-item")[0][barIndex]).trigger("click.chart"):selector.on("click").call(selector.node(),selector.datum(),barIndex))},handleEvents:function handleEvents(){var _this=this;return this.element.on("updated.".concat(this.namespace),(function(){_this.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){_this.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){_this.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){_this.updated()})),this},getSelected:function getSelected(){return charts.selected},setSelected:function setSelected(options,isToggle){var internals={svg:this.svg,chartData:this.settings.dataset,isStacked:this.settingsisStacked,isGrouped:this.settings.isGrouped,isSingle:this.settings.isSingle};charts.setSelected(options,isToggle,internals)},toggleSelected:function toggleSelected(options){this.setSelected(options,!0)},handleResize:function handleResize(){var _this2=this,resize=function resize(){_this2.width!==_this2.element.width()&&(_this2.width=_this2.element.width(),_this2.element.is(":visible")&&_this2.updated())};this.element.closest(".homepage").length?setTimeout((function(){return resize()}),300):resize()},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},teardown:function teardown(){var _this3=this,events=function events(arr){return"".concat(arr.join(".".concat(_this3.namespace," ")),".").concat(_this3.namespace)};return this.element&&(this.element.find(".group .series-group .bar").off(events(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(events(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function destroy(){this.teardown(),charts.removeTooltip(),this.element&&(this.element.empty().removeClass("bar-chart"),$.removeData(this.element[0],"bar"),$.removeData(this.element[0],"chart"))}};var PIE_DEFAULTS={dataset:[],isDonut:!1,redrawOnResize:!0,hideCenterLabel:!1,showLines:!0,showLinesMobile:!1,lines:{show:"value",formatter:".0f"},showLegend:!0,legendPlacement:"right",legend:{show:"label (percent)",formatter:".0f"},showTooltips:!0,tooltip:{show:"label (value)",formatter:".0f"},emptyMessage:{title:Locale?Locale.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Pie(element,settings){this.settings=utils.mergeSettings(element,settings,PIE_DEFAULTS),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element=$(element),this.init()}Pie.prototype={init:function init(){return this.namespace=utils.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.isFirefox="firefox"===Environment.browser.name,0===this.settings.dataset.length?(this.element.emptymessage(this.settings.emptyMessage),this):(this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this)},build:function build(){var self=this;self.svg=d3.select(this.element[0]).append("svg"),self.mainGroup=self.svg.append("g"),self.mainGroup.append("g").attr("class","slices"),self.mainGroup.append("g").attr("class","labels"),self.mainGroup.append("g").attr("class","lines"),this.element.addClass("chart-pie"),this.settings.showMobile&&(this.settings.legendPlacement="bottom"),self.settings.legendPlacement&&this.element.addClass("has-".concat(self.settings.legendPlacement,"-legend"));var w=parseInt(this.element.width(),10),h=parseInt(this.element.height(),10),dims={height:h,width:w};("label"===this.settings.lines.show&&"bottom"===this.settings.legendPlacement||"label"===this.settings.lines.show&&"false"===this.settings.showLegend)&&self.mainGroup.attr("transform","translate(".concat(.67777*dims.width,", ").concat(dims.height/2,")")),"right"===self.settings.legendPlacement&&(dims.width=.75*w),this.settings.showMobile&&(dims.height=.8*h,this.element.addClass("is-mobile")),dims.radius=Math.min(dims.width,dims.height)/2,self.dims=dims,self.pie=d3.pie().sort(null).value((function(d){return d.value})),self.arc=d3.arc().outerRadius(.75*dims.radius).innerRadius(self.settings.isDonut?.5*dims.radius:0),self.outerArc=d3.arc().innerRadius(.75*dims.radius).outerRadius(.75*dims.radius+20),self.svg.attr("width","right"===self.settings.legendPlacement?"75%":"100%").attr("height",self.settings.showMobile?"80%":"100%"),self.mainGroup.attr("transform","translate(".concat(dims.width/2,",").concat(dims.height/2,")")),dims.center={x:dims.width/2,y:dims.height/2},self.key=function(d){return d.data.name};var isEmpty=!self.settings.dataset||0===self.settings.dataset.length;this.chartData=isEmpty?[]:self.settings.dataset[0].data,this.sum=d3.sum(this.chartData,(function(d){return d.value}));var values=this.chartData.map((function(d){return d.value/self.sum*100})),rounded=this.roundLargestRemainer(values);this.chartData=this.chartData.map((function(d,i){return d.percent=d.value/self.sum,d.percentRound=rounded[i],d}));var sum=0;if(this.chartData.map((function(d){sum+=d.percentRound})),isEmpty||0===sum||isNaN(sum)){var palette=theme.themeColors().palette;this.chartData.push({data:{},color:palette.graphite[30].value,name:"Empty-Pie",value:100,percent:1,percentRound:100})}if(self.updateData(self.chartData),self.settings.showTooltips&&charts.appendTooltip("is-pie"),this.settings.showLegend){var series=self.chartData.map((function(d){var name=charts.formatToSettings(d,self.settings.legend);return self.settings.legendFormatter&&(name="".concat(d.name," (").concat(d3.format(self.settings.legendFormatter)(d.value),")")),"Empty-Pie"===d.name&&(name=""),{name:name,display:"twocolumn",placement:self.settings.legendPlacement,color:d.color}}));this.settings.svg=self.svg,charts.addLegend(series,"pie",this.settings,this.element)}return this.setInitialSelected(),this.addCenterLabel(),this.element.trigger("rendered"),this},randomize:function randomize(toZero){var self=this;this.chartData=this.chartData.map((function(d){return d.value=toZero?0:Math.random(),d})),this.sum=d3.sum(this.chartData,(function(d){return d.value}));var values=this.chartData.map((function(d){return d.value/self.sum*100})),rounded=this.roundLargestRemainer(values);return this.chartData=this.chartData.map((function(d,i){return d.percent=d.value/self.sum,d.percentRound=rounded[i],d})),this.chartData},addCenterLabel:function addCenterLabel(){if(this.settings.isDonut&&!this.settings.hideCenterLabel){var centerLabel=this.settings.dataset[0].centerLabel,arcs=this.svg.selectAll(".slices");if(arcs.append("text").attr("dy",".35em").style("text-anchor","middle").attr("class","chart-donut-text").html(centerLabel),charts.isIE&&!charts.isIEEdge)if(utils.isHTML(centerLabel)){var text=arcs.select(".chart-donut-text"),tmp=document.createElement("text");tmp.innerHTML=centerLabel,Array.prototype.slice.call(tmp.childNodes).forEach((function(node){text.append("tspan").attr("style",node.getAttribute&&node.getAttribute("style")).attr("x",node.getAttribute&&node.getAttribute("x")).attr("dy",node.getAttribute&&node.getAttribute("dy")).text(node.textContent)}))}else arcs.select(".chart-donut-text").text(centerLabel)}},updateData:function updateData(data){var tooltipInterval,self=this,isPersonalizable=this.element.closest(".is-personalizable").length>0,isEmpty=!self.settings.dataset||0===self.settings.dataset.length,slice=self.svg.select(".slices").selectAll("path.slice").data(self.pie(data),self.key);if(self.isRTL=Locale.isRTL(),slice.enter().insert("path").style("fill",(function(d,i){return charts.chartColor(i,"pie",d.data)})).attr("class","slice").on("contextmenu.".concat(self.namespace),(function(d){charts.triggerContextMenu(self.element,d3.select(this).nodes()[0],d)})).on("click.".concat(self.namespace),(function(d,i){clearTimeout(tooltipInterval);var isSelected=this&&d3.select(this).classed("is-selected");charts.setSelectedElement({task:isSelected?"unselected":"selected",container:self.element,selector:isSelected?".chart-container .is-selected":this,isTrigger:!isSelected,d:d.data,i:i,type:self.settings.type,dataset:self.settings.dataset,svg:self.svg}),isSelected&&self.element.triggerHandler("selected",[d3.select(this).nodes(),{},i])})).on("mouseenter.".concat(self.namespace),(function(d,i){if(self.settings.showTooltips){var offset=function getOffset(node){var rect,body=document.body;if(self.isFirefox&&0===self.settings.dotSize){var dot=d3.select(node);dot.attr("r",2),rect=node.getBoundingClientRect(),dot.attr("r",self.settings.dotSize)}else rect=node.getBoundingClientRect();return{top:rect.top+body.scrollTop,left:rect.left+body.scrollLeft}}(self.svg.selectAll("circle").nodes()[i]),rads=self.midAngle(d),isTop=rads<=Math.PI/4&&rads>=0||rads>7*Math.PI/4,isRight=rads<=3*Math.PI/4&&rads>=Math.PI/4,isBottom=rads<=5*Math.PI/4&&rads>=3*Math.PI/4,isLeft=rads<=7*Math.PI/4&&rads>=5*Math.PI/4,content="",value=charts.formatToSettings(d,self.settings.tooltip);-1===(content=(content=(content=(content=(content=d.data.tooltip||value).replace("{{percent}}","".concat(d.data.percentRound,"%"))).replace("{{value}}",d.value)).replace("%percent%","".concat(d.data.percentRound,"%"))).replace("%value%",d.value)).indexOf("<b>")&&(content=(content=content.replace("(","<b>")).replace(")","</b>")),null!=tooltipInterval&&clearTimeout(tooltipInterval),tooltipInterval=setTimeout((function(){!function show(){if(""!==content){var size=charts.tooltipSize(content),x=offset.left,y=offset.top;charts.tooltip&&charts.tooltip.length&&(isTop||isRight||isBottom||isLeft)&&charts.tooltip[isPersonalizable?"addClass":"removeClass"]("is-personalizable"),isTop&&(x-=size.width/2,y-=size.height-5,charts.showTooltip(x,y,content,"top")),isRight&&(y-=size.height/2,charts.showTooltip(x,y,content,"right")),isBottom&&(x-=size.width/2,charts.showTooltip(x,y,content,"bottom")),isLeft&&(x-=size.width-5,y-=size.height/2,charts.showTooltip(x,y,content,"left"))}}()}),300)}})).on("mouseleave.".concat(self.namespace),(function(){clearTimeout(tooltipInterval),charts.hideTooltip()})).merge(slice).transition().duration(self.settings.animationSpeed).attrTween("d",(function(d){this.current=this.current||d;var interpolate=d3.interpolate(this.current,d);return this.current=interpolate(0),function(t){return self.arc(interpolate(t))}})),slice.exit().remove(),!isEmpty){var isMobile=self.element.parent().width()<520,shouldShow=self.settings.showLines;if(!self.settings.showLinesMobile&&shouldShow&&(shouldShow=!isMobile),self.settings.dotSize=shouldShow?2:0,shouldShow){var text=self.svg.select(".labels").selectAll("text").data(self.pie(data),self.key);text.enter().append("text").attr("dy",".35em").text((function(d){return isMobile?d.data.shortName:charts.formatToSettings(d,self.settings.lines)})).merge(text).transition().duration(self.settings.animationSpeed).attrTween("transform",(function(d){this.current=this.current||d;var interpolate=d3.interpolate(this.current,d);return this.current=interpolate(0),function(t){var d2=interpolate(t),pos=self.outerArc.centroid(d2);return pos[0]=self.dims.radius*(self.midAngle(d2)<Math.PI?1:-1),pos[0]-=self.midAngle(d2)<Math.PI?20:-20,"translate(".concat(pos,")")}})).styleTween("text-anchor",(function(d){this.current=this.current||d;var interpolate=d3.interpolate(this.current,d);return this.current=interpolate(0),function(t){var d2=interpolate(t);return self.isRTL?self.midAngle(d2)>Math.PI?"start":"end":self.midAngle(d2)<Math.PI?"start":"end"}})),text.exit().remove();var polyline=self.svg.select(".lines").selectAll("polyline").data(self.pie(data),self.key);polyline.enter().append("polyline").merge(polyline).transition().duration(self.settings.animationSpeed).attrTween("points",(function(d){this.current=this.current||d;var interpolate=d3.interpolate(this.current,d);return this.current=interpolate(0),function(t){var d2=interpolate(t),pos=self.outerArc.centroid(d2);return pos[0]=.85*self.dims.radius*(self.midAngle(d2)<Math.PI?1:-1),[self.outerArc.centroid(d2),self.outerArc.centroid(d2),pos]}})),polyline.exit().remove()}var dots=self.svg.select(".lines").selectAll("circle").data(self.pie(data),self.key);dots.enter().append("circle").attr("class","circles").attr("r",self.settings.dotSize).merge(dots).transition().duration(self.settings.animationSpeed).attrTween("transform",(function(d){this.current=this.current||d;var interpolate=d3.interpolate(this.current,d);return this.current=interpolate(0),function(t){var d2=interpolate(t);return"translate(".concat(self.outerArc.centroid(d2)," )")}})),dots.exit().remove()}},setInitialSelected:function setInitialSelected(){var selector,self=this,selected=0;this.svg.selectAll(".slice").each((function(d,i){d&&d.data&&d.data.selected&&selected<1&&(selected++,(selector=d3.select(this)).on("click.".concat(self.namespace)).call(selector.node(),selector.datum(),i))}))},handleEvents:function handleEvents(){var _this=this;return this.element.on("updated.".concat(this.namespace),(function(){_this.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){_this.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){_this.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){_this.updated()})),this},getSelected:function getSelected(){return charts.selected},setSelected:function setSelected(o,isToggle){var selector,arcIndex,self=this,selected=0,equals=utils.equals;this.svg.selectAll(".slice").each((function(d,i){d&&d.data&&selected<1&&(void 0!==o.fieldName&&void 0!==o.fieldValue&&o.fieldValue===d.data[o.fieldName]||void 0!==o.index&&o.index===i||o.data&&equals(o.data,self.chartData[i].data)||o.elem&&$(this).is(o.elem))&&(selected++,selector=d3.select(this),arcIndex=i)})),selected>0&&(isToggle||!selector.classed("is-selected"))&&selector.on("click.".concat(self.namespace)).call(selector.node(),selector.datum(),arcIndex)},toggleSelected:function toggleSelected(options){this.setSelected(options,!0)},handleResize:function handleResize(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},roundLargestRemainer:function roundLargestRemainer(values){for(var sum=0,count=0,dVala=0,order=[],i=0;i<values.length;i++)sum+=parseInt(values[i],10),order[i]=i;var diff=100-sum;order.sort((function(a,b){return dVala=values[a]-parseInt(values[a],10),values[b]-parseInt(values[b],10)-dVala})),values.sort((function(a,b){return dVala=a-parseInt(a,10),b-parseInt(b,10)-dVala}));for(var j=0;j<values.length;j++)count=j,values[j]=count<diff?parseInt(values[j],10)+1:parseInt(values[j],10);for(var unsorted=[],_i=0;_i<values.length;_i++)unsorted[order[_i]]=values[_i];return unsorted},teardown:function teardown(){var _this2=this,events=function events(arr){return"".concat(arr.join(".".concat(_this2.namespace," ")),".").concat(_this2.namespace)};return this.element&&(this.element.find(".slice").off(events(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(events(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},midAngle:function midAngle(d){return d.startAngle+(d.endAngle-d.startAngle)/2},destroy:function destroy(){this.teardown(),charts.removeTooltip(),this.element&&(this.element.empty().removeClass("pie-chart"),$.removeData(this.element[0],"pie"),$.removeData(this.element[0],"chart"))}};var RADAR_DEFAULTS={dataset:[],redrawOnResize:!0,margin:{top:0,right:0,bottom:0,left:0},levels:4,maxValue:0,labelFactor:1.27,wrapWidth:60,opacityArea:.2,dotRadius:3,opacityCircles:0,strokeWidth:1,roundStrokes:!0,showCrosslines:!0,showAxisLabels:!0,colors:null,showTooltips:!0,tooltip:{show:"value",formatter:".0%"},axisFormatter:".0%",showLegend:!0,legendPlacement:"right",emptyMessage:{title:Locale?Locale.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Radar(element,settings){this.settings=utils.mergeSettings(element,settings,RADAR_DEFAULTS),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element=$(element),this.init()}Radar.prototype={init:function init(){return this.namespace=utils.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.setupColors().build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function build(){return this.updateData(this.settings.dataset),this.setInitialSelected(),this},setupColors:function setupColors(){return this.settings.colors&&!this.useBuiltInColors||(this.settings.colors=charts.colorRange(),this.useBuiltInColors=!0),this},updateData:function updateData(data){var self=this,s=this.settings,isPersonalizable=this.element.closest(".is-personalizable").length>0;if(this.element.addClass("chart-radar"),0!==data.length){var parent=this.element.parent(),dims={w:parent.width(),h:parent.height(),extra:.957};"right"===s.legendPlacement&&(dims.w*=.75),dims.transform={x:dims.w/2+(s.margin.left+s.margin.right)/2,y:dims.h/2*dims.extra+(s.margin.top+s.margin.bottom)/2};var tooltipInterval,colors=d3.scaleOrdinal(s.colors),maxValue=Math.max(s.maxValue,d3.max(data,(function(i){return d3.max(i.data.map((function(o){return o.value})))}))),allAxes=data[0].data.map((function(d){return function getNameText(d){var size_min=328,size_max=469,text="";return dims.w<=size_min?text=d.shortName||d.abbrName||d.name||"":dims.w>=size_min+1&&dims.w<=size_max?text=d.abbrName||d.name||"":dims.w>size_max&&(text=d.name||""),text}(d)})),total=allAxes.length,angleSlice=2*Math.PI/total,radius=Math.min(dims.w/3,dims.h/3)*dims.extra,rScale=d3.scaleLinear().range([0,radius]).domain([0,maxValue]),elem=this.element[0];d3.select(elem).select("svg").remove();var svg=d3.select(elem).append("svg").attr("width",dims.w+s.margin.left+s.margin.right).attr("height",dims.h+s.margin.top+s.margin.bottom).attr("class","chart-radar");this.svg=svg;var g=svg.append("g").attr("transform","translate(".concat(dims.transform.x,",").concat(dims.transform.y,")"));if(s.opacityCircles>0){var filter=g.append("defs").append("filter").attr("id","glow");filter.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur");var feMerge=filter.append("feMerge");feMerge.append("feMergeNode").attr("in","coloredBlur"),feMerge.append("feMergeNode").attr("in","SourceGraphic")}var axisGrid=g.append("g").attr("class","chart-radar-axis-wrapper");axisGrid.selectAll(".levels").data(d3.range(1,s.levels+1).reverse()).enter().append("circle").attr("class","chart-radar-grid-circle").attr("r",(function(d){return radius/s.levels*d})).style("fill-opacity",s.opacityCircles).style("filter",s.opacityCircles>0?"url(#glow)":""),s.showAxisLabels&&axisGrid.selectAll(".axis-label").data(d3.range(1,s.levels+1).reverse()).enter().append("text").attr("class","axis-label").attr("x",4).attr("y",(function(d){return-d*radius/s.levels})).attr("dy","0.4em").style("font-size",theme.uplift?"12px":"10px").attr("fill","#737373").text((function(d){var roundedVal=Math.round(10*maxValue)/10;return s.axisFormatter.indexOf("%")>-1?d3.format(s.axisFormatter)(roundedVal*d/s.levels):d3.format(s.axisFormatter)(d/s.levels)}));var axis=axisGrid.selectAll(".axis").data(allAxes).enter().append("g").attr("class","axis");s.showCrosslines&&axis.append("line").attr("x1",0).attr("y1",0).attr("x2",(function(d,i){return rScale(1.05*maxValue)*Math.cos(angleSlice*i-Math.PI/2)})).attr("y2",(function(d,i){return rScale(1.05*maxValue)*Math.sin(angleSlice*i-Math.PI/2)})).attr("class","chart-radar-crossline").style("stroke-width","1px"),axis.append("text").attr("class","legend").style("font-size",theme.uplift?"14px":"12px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",(function(d,i){return rScale(maxValue*s.labelFactor)*Math.cos(angleSlice*i-Math.PI/2)})).attr("y",(function(d,i){return rScale(maxValue*s.labelFactor)*Math.sin(angleSlice*i-Math.PI/2)})).text((function(d){return d})),this.element[dims.w<420?"addClass":"removeClass"]("is-small"),dims.w>456&&svg.selectAll(".chart-radar-axis-wrapper .axis .legend").each((function(){charts.wrap(d3.select(this),s.wrapWidth,s.labelFactor)}));var radarLine=d3.lineRadial().curve(d3.curveBasisClosed).radius((function(d){return rScale(d.value)})).angle((function(d,i){return i*angleSlice}));s.roundStrokes&&radarLine.curve(d3.curveCardinalClosed);var blobWrapper=g.selectAll(".radarWrapper").data(data.map((function(i){return i.data}))).enter().append("g").attr("class","chart-radar-wrapper");if(blobWrapper.append("path").attr("class","chart-radar-area").attr("d",(function(d){return radarLine(d)})).style("fill",(function(d,i){return colors(i)})).style("fill-opacity",s.opacityArea).on("click.".concat(self.namespace),(function(d,i){clearTimeout(tooltipInterval);var selectElem=d3.select(this),isSelected=selectElem.classed("is-selected");svg.selectAll(".is-selected").classed("is-selected",!1),svg.selectAll(".is-not-selected").classed("is-not-selected",!1),isSelected||(svg.selectAll(".chart-radar-area").classed("is-not-selected",!0),selectElem.classed("is-selected",!0).classed("is-not-selected",!1),selectElem.style("fill-opacity",s.opacityArea));var triggerData={elem:selectElem.nodes(),data:d,index:i};self.element.triggerHandler(isSelected?"deselected":"selected",triggerData),charts.selected=isSelected?[]:triggerData})).on("contextmenu.".concat(self.namespace),(function(d){charts.triggerContextMenu(self.element,d3.select(this).nodes()[0],d)})),blobWrapper.append("path").attr("class","chart-radar-stroke").attr("d",(function(d){return radarLine(d)})).style("stroke-width","".concat(s.strokeWidth,"px")).style("stroke",(function(d,i){return colors(i)})).style("fill","none").style("filter",s.opacityCircles>0?"url(#glow)":""),blobWrapper.selectAll(".chart-radar-circle").data((function(d){return d})).enter().append("circle").attr("class","chart-radar-circle").attr("r",s.dotRadius).attr("cx",(function(d,i){return rScale(d.value)*Math.cos(angleSlice*i-Math.PI/2)})).attr("cy",(function(d,i){return rScale(d.value)*Math.sin(angleSlice*i-Math.PI/2)})).style("fill",(function(){return colors($(this.parentNode).index()-1)})).style("fill-opacity",.6),g.selectAll(".radar-circle-wrapper").data(data.map((function(i){return i.data}))).enter().append("g").attr("class","radar-circle-wrapper").selectAll(".radar-invisible-circle").data((function(d){return d})).enter().append("circle").attr("class","radar-invisible-circle").attr("r",1.5*s.dotRadius).attr("cx",(function(d,i){return rScale(d.value)*Math.cos(angleSlice*i-Math.PI/2)})).attr("cy",(function(d,i){return rScale(d.value)*Math.sin(angleSlice*i-Math.PI/2)})).style("fill","none").style("pointer-events","all").on("mouseenter.".concat(self.namespace),(function(d){if(s.showTooltips){var offset=$(this).offset(),content=charts.formatToSettings(d,s.tooltip);-1===content.indexOf("<b>")&&(content=(content=content.replace("(","<b>")).replace(")","</b>"));var size=charts.tooltipSize(content),x=offset.left,y=offset.top;x-=size.width/2-6,y-=size.height+6,null!=tooltipInterval&&clearTimeout(tooltipInterval),tooltipInterval=setTimeout((function(){charts.tooltip&&charts.tooltip.length&&charts.tooltip[isPersonalizable?"addClass":"removeClass"]("is-personalizable"),charts.showTooltip(x,y,content,"top")}),300)}})).on("mouseleave.".concat(self.namespace),(function(){clearTimeout(tooltipInterval),charts.hideTooltip()})).on("contextmenu.".concat(self.namespace),(function(d){charts.triggerContextMenu(self.element,d3.select(this).nodes()[0],d)})),s.showTooltips&&charts.appendTooltip("is-pie"),s.showLegend){s.legendPlacement&&this.element.addClass("has-".concat(s.legendPlacement,"-legend"));var series=s.dataset.map((function(d,i){return{name:d.name,display:"twocolumn",placement:s.legendPlacement,color:colors(i)}}));s.svg=self.svg,charts.addLegend(series,"pie",s,this.element)}}else self.element.emptymessage(s.emptyMessage)},setInitialSelected:function setInitialSelected(){},handleEvents:function handleEvents(){var _this=this;return this.element.on("updated.".concat(this.namespace),(function(){_this.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){_this.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){_this.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){_this.updated()})),this},getSelected:function getSelected(){return charts.selected},setSelected:function setSelected(o,isToggle){var selector,arcIndex,selected=0,self=this;this.svg.selectAll(".chart-radar-area").each((function(d,i){var set=self.settings.dataset[i];set&&set.data&&selected<1&&(void 0!==o.fieldName&&void 0!==o.fieldValue&&o.fieldValue===set[o.fieldName]||void 0!==o.index&&o.index===i||o.elem&&$(this).is(o.elem))&&(selected++,selector=d3.select(this),arcIndex=i)})),selected>0&&(isToggle||!selector.classed("is-selected"))&&selector.on("click.".concat(self.namespace)).call(selector.node(),selector.datum(),arcIndex)},toggleSelected:function toggleSelected(options){this.setSelected(options,!0)},handleResize:function handleResize(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),settings&&settings.dataset?(this.element.find(".chart-legend").remove(),this.settings.dataset=settings.dataset,this.updateData(this.settings.dataset),this):(this.element.empty(),this.setupColors().build())},teardown:function teardown(){var _this2=this,events=function events(arr){return"".concat(arr.join(".".concat(_this2.namespace," ")),".").concat(_this2.namespace)};return this.element&&(this.element.find(".chart-radar-area").off(events(["click","contextmenu"])),this.element.find(".radar-invisible-circle").off(events(["mouseenter","mouseleave","contextmenu"])),this.element.off(events(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function destroy(){this.teardown(),charts.removeTooltip(),this.element&&(this.element.empty().removeClass("radar-chart"),$.removeData(this.element[0],"radar"),$.removeData(this.element[0],"radar"))}},$.fn.chart=function(settings){var instance=null;switch(this.empty(),settings.type){case"targeted-achievement":case"completion":case"completion-target":if(instance=this.data(settings.type))return instance.updated(settings),this;var chartComponent=new CompletionChart(this,settings);this.data("completion-chart",chartComponent),this.data("chart",chartComponent),this.data(settings.type,chartComponent);break;case"bullet":if(instance=this.data("bullet"))return instance.updated(settings),this;var _chartComponent=new Bullet(this,settings);this.data("bullet",_chartComponent),this.data("chart",_chartComponent);break;case"radar":if(instance=this.data("radar"))return instance.updated(settings),this;var _chartComponent2=new Radar(this,settings);this.data("radar",_chartComponent2),this.data("chart",_chartComponent2);break;case"sparkline":if(instance=this.data("sparkline"))return instance.updated(settings),this;var _chartComponent3=new Sparkline(this,settings);this.data("sparkline",_chartComponent3),this.data("chart",_chartComponent3);break;case"sparkline-dots":if(settings.isDots=!0,instance=this.data("sparkline"))return instance.updated(settings),this;var _chartComponent4=new Sparkline(this,settings);this.data("sparkline",_chartComponent4),this.data("chart",_chartComponent4);break;case"sparkline-peak":if(settings.isPeakDot=!0,instance=this.data("sparkline"))return instance.updated(settings),this;var _chartComponent5=new Sparkline(this,settings);this.data("sparkline",_chartComponent5),this.data("chart",_chartComponent5);break;case"sparkline-dots-n-peak":if(settings.isPeakDot=!0,settings.isDots=!0,instance=this.data("sparkline"))return instance.updated(settings),this;var _chartComponent6=new Sparkline(this,settings);this.data("sparkline",_chartComponent6),this.data("chart",_chartComponent6);break;case"sparkline-minmax":if(settings.isMinMax=!0,instance=this.data("sparkline"))return instance.updated(settings),this;var _chartComponent7=new Sparkline(this,settings);this.data("sparkline",_chartComponent7),this.data("chart",_chartComponent7);break;case"sparkline-medianrange":if(settings.isMedianRange=!0,instance=this.data("sparkline"))return instance.updated(settings),this;var _chartComponent8=new Sparkline(this,settings);this.data("sparkline",_chartComponent8),this.data("chart",_chartComponent8);break;case"sparkline-medianrange-n-peak":if(settings.isMedianRange=!0,settings.isPeakDot=!0,instance=this.data("sparkline"))return instance.updated(settings),this;var _chartComponent9=new Sparkline(this,settings);this.data("sparkline",_chartComponent9),this.data("chart",_chartComponent9);break;case"line":if(instance=this.data("line"))return instance.updated(settings),this;var _chartComponent10=new Line(this,settings);this.data("line",_chartComponent10),this.data("chart",_chartComponent10);break;case"area":if(settings.isArea=!0,instance=this.data("line"))return instance.updated(settings),this;var _chartComponent11=new Line(this,settings);this.data("line",_chartComponent11),this.data("chart",_chartComponent11);break;case"bubble":if(settings.isBubble=!0,instance=this.data("line"))return instance.updated(settings),this;var _chartComponent12=new Line(this,settings);this.data("line",_chartComponent12),this.data("chart",_chartComponent12);break;case"scatterplot":if(settings.isScatterPlot=!0,instance=this.data("line"))return instance.updated(settings),this;var _chartComponent13=new Line(this,settings);this.data("line",_chartComponent13),this.data("chart",_chartComponent13);break;case"column":case"column-grouped":case"positive-negative":case"column-positive-negative":if(instance=this.data("column"))return instance.updated(settings),this;var _chartComponent14=new Column(this,settings);this.data("column",_chartComponent14),this.data("chart",_chartComponent14);break;case"column-stacked":if(settings.isStacked=!0,instance=this.data("column"))return instance.updated(settings),this;var _chartComponent15=new Column(this,settings);this.data("column",_chartComponent15),this.data("chart",_chartComponent15);break;case"bar":if(settings.isStacked=!0,instance=this.data("bar"))return instance.updated(settings),this;var _chartComponent16=new Bar(this,settings);this.data("bar",_chartComponent16),this.data("chart",_chartComponent16);break;case"bar-stacked":if(settings.isStacked=!0,instance=this.data("bar"))return instance.updated(settings),this;var _chartComponent17=new Bar(this,settings);this.data("bar",_chartComponent17),this.data("chart",_chartComponent17);break;case"bar-normalized":if(settings.isNormalized=!0,instance=this.data("bar"))return instance.updated(settings),this;var _chartComponent18=new Bar(this,settings);this.data("bar",_chartComponent18),this.data("chart",_chartComponent18);break;case"bar-grouped":if(settings.isStacked=!1,settings.isGrouped=!0,instance=this.data("bar"))return instance.updated(settings),this;var _chartComponent19=new Bar(this,settings);this.data("bar",_chartComponent19),this.data("chart",_chartComponent19);break;case"pie":if(instance=this.data("pie"))return instance.updated(settings),this;var _chartComponent20=new Pie(this,settings);this.data("pie",_chartComponent20),this.data("chart",_chartComponent20);break;case"donut":if(settings.isDonut=!0,instance=this.data("pie"))return instance.updated(settings),this;var _chartComponent21=new Pie(this,settings);this.data("pie",_chartComponent21),this.data("chart",_chartComponent21);break;default:instance=null}return this};var dateUtils={isToday:function splice(date){var today=new Date;return date.getDate()===today.getDate()&&date.getMonth()===today.getMonth()&&date.getFullYear()===today.getFullYear()},firstDayOfWeek:function firstDayOfWeek(date){var startsOn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,dayOfWeek=date.getDay(),firstDay=new Date(date),diff=dayOfWeek>=startsOn?dayOfWeek-startsOn:6-dayOfWeek;return firstDay.setDate(date.getDate()-diff),firstDay.setHours(0,0,0,0),firstDay},lastDayOfWeek:function lastDayOfWeek(date){var startsOn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lastDay=this.firstDayOfWeek(date,startsOn);return lastDay.setDate(lastDay.getDate()+6),lastDay.setHours(23,59,59,999),lastDay},dateDiff:function(first,second,useHours){var dtoday=new Date;return Math.round((second-first)/(36e5*(useHours?1:Math.abs(dtoday.getTimezoneOffset()))))}},calendarShared={addCalculatedFields:function addCalculatedFields(event,locale,language,eventTypes){var formatDate=function formatDate(d,o){return Locale.formatDate(d,utils.extend(!0,{locale:locale.name},o))},parseDateOpts={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:locale.name},parseDate=function parseDate(dtStr){return Locale.parseDate(dtStr,parseDateOpts)},translate=function translate(str){return Locale.translate(str,{locale:locale.name,language:language})};event.color=this.getEventTypeColor(event.type,eventTypes),event.duration=Math.abs(dateUtils.dateDiff(new Date(event.ends),new Date(event.starts),!1));var today=new Date,dateTodayUTC=Date.UTC(today.getUTCFullYear(),today.getUTCMonth(),today.getUTCDate()),eventStart=new Date(event.starts),eventStartUTC=Date.UTC(eventStart.getUTCFullYear(),eventStart.getUTCMonth(),eventStart.getUTCDate()),eventStartFormatted="".concat(eventStart.getDate(),"-").concat(eventStart.getMonth()+1,"-").concat(eventStart.getFullYear()),todayFormatted="".concat(today.getDate(),"-").concat(today.getMonth()+1,"-").concat(today.getFullYear());event.durationUnits=translate(event.duration>1?"Days":"Day"),event.daysUntil=event.starts?dateUtils.dateDiff(eventStartUTC,dateTodayUTC):0;var diff=(new Date(event.ends)-new Date(event.starts))/36e5;if(event.durationHours=diff>0&&diff<.5?1:Math.round(diff),event.isDays=!0,dateTodayUTC>eventStartUTC&&eventStartFormatted!==todayFormatted&&(event.daysUntil=1),void 0===event.isAllDay&&(event.isAllDay=!0),event.durationHours<24&&(event.isDays=!1,event.isAllDay=!1,event.durationUnits=translate(event.durationHours>1?"Hours":"Hour")),"true"===event.isAllDay.toString()){event.duration=function dayDiff(d1,d2){return Math.abs(Math.round((d2-d1)/864e5))}(new Date(event.starts),new Date(event.ends))||1,event.durationUnits=translate(event.duration>1?"Days":"Day"),event.isDays=!0,delete event.durationHours}if(event.starts){var startsLocale=parseDate(event.starts);event.startsLocale=formatDate(startsLocale),event.startsHourLocale=formatDate(startsLocale,{date:"hour"}),Array.isArray(startsLocale)?event.startsHour=parseFloat(startsLocale[3]+startsLocale[4]/60):event.startsHour=parseFloat(startsLocale.getHours()+startsLocale.getMinutes()/60)}if(event.ends){var endsLocale=parseDate(event.ends);event.endsLocale=formatDate(endsLocale),event.endsHourLocale=formatDate(endsLocale,{date:"hour"}),Array.isArray(endsLocale)?event.endsHour=parseFloat(endsLocale[3]+endsLocale[4]/60):event.endsHour=parseFloat(endsLocale.getHours()+endsLocale.getMinutes()/60)}if(event.eventTypes=eventTypes,event.isAllDay=event.isAllDay.toString(),"false"===event.isAllDay.toString()&&delete event.isAllDay,!event.isAllDay&&event.durationHours>=24&&(event.isAllDay=!1,event.durationUnits=translate("Hours"),event.isDays=!1,delete event.duration),event.starts&&event.ends){var diffInSeconds=this.timeDiffInSeconds(parseDate(event.starts),parseDate(event.ends));event.durationInTime=this.timeBySeconds(diffInSeconds)}else event.durationInTime&&delete event.durationInTime;return event},timeDiffInSeconds:function timeDiffInSeconds(starts,ends){var diff=Math.abs(ends.getTime()-starts.getTime());return Math.ceil(diff/1e3)},timeBySeconds:function timeBySeconds(seconds){return seconds=Number(seconds),{days:Math.floor(seconds/86400),hours:Math.floor(seconds%86400/3600),minutes:Math.floor(seconds%3600/60),seconds:Math.floor(seconds%60)}},formateTimeString:function formateTimeString(event,locale,language){if(event.durationInTime){var translate=function translate(str){return Locale.translate(str,{locale:locale.name,language:language})},d=event.durationInTime,text="";if(d.days){var label=translate(d.days>1?"Days":"Day");text+="".concat(d.days," ").concat(label)}if(d.hours){var _label=translate(d.hours>1?"Hours":"Hour");d.days&&(text+="".concat(d.minutes||d.seconds?", ":" ".concat(translate("And")," "))),text+="".concat(d.hours," ").concat(_label)}if(d.minutes){var _label2=translate(d.minutes>1?"Minutes":"Minute");(d.days||d.hours)&&(text+="".concat(d.seconds?", ":" ".concat(translate("And")," "))),text+="".concat(d.minutes," ").concat(_label2)}if(d.seconds){var _label3=translate(d.seconds>1?"Seconds":"Second");text+="".concat(d.days||d.hours||d.minutes?" ".concat(translate("And")," "):""),text+="".concat(d.seconds," ").concat(_label3)}""!==text&&(event.duration="",event.durationUnits="",event.durationHours=text)}},getEventTypeColor:function getEventTypeColor(id,eventTypes){var color="azure";if(!id)return color;var eventInfo=eventTypes.filter((function(eventType){return eventType.id===id}));return 1===eventInfo.length&&(color=eventInfo[0].color||"azure"),color},cleanEventData:function cleanEventData(event,addPlaceholder,currentDate,locale,language,events,eventTypes){var formatDateOptions={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:locale.name},formatDate=function formatDate(d){return Locale.formatDate(d,formatDateOptions)},parseDate=function parseDate(d,o){return Locale.parseDate(d,utils.extend(!0,{locale:locale.name},o))},isAllDay="on"===event.isAllDay||"true"===event.isAllDay||event.isAllDay,startDate=currentDate,endDate=currentDate;if(event.startsLocale&&event.endsLocale&&(startDate=new Date(parseDate(event.startsLocale)),endDate=new Date(parseDate(event.endsLocale))),"string"!=typeof event.starts||event.startsLocale||(startDate=new Date(event.starts)),"string"!=typeof event.ends||event.endsLocale||(endDate=new Date(event.ends)),Locale.isValidDate(startDate)||(startDate=currentDate),Locale.isValidDate(endDate)||(endDate=currentDate),isAllDay)startDate.setHours(0,0,0,0),event.starts=formatDate(new Date(startDate)),endDate.setHours(23,59,59,999),event.ends=formatDate(new Date(endDate)),event.duration=event.starts===event.ends?1:null,event.isAllDay=!0;else{if(startDate===endDate)endDate.setHours(endDate.getHours()+parseInt(event.durationHours,10)),event.ends=formatDate("safari"===Environment.browser.name?endDate:endDate.toISOString()),event.duration=null;else if(event.endsHourLocale&&event.startsHourLocale){var startsHours=parseDate(event.startsHourLocale,{date:"hour"}),endsHours=parseDate(event.endsHourLocale,{date:"hour"});startDate.setHours(startsHours.getHours(),startsHours.getMinutes(),startsHours.getSeconds(),startsHours.getMilliseconds()),endDate.setHours(endsHours.getHours(),endsHours.getMinutes(),endsHours.getSeconds(),endsHours.getMilliseconds()),"safari"===Environment.browser.name?(event.starts=formatDate(startDate),event.ends=formatDate(endDate)):(event.starts=formatDate(startDate.toISOString()),event.ends=formatDate(endDate.toISOString())),event.duration=dateUtils.dateDiff(new Date(event.starts),new Date(event.ends))}else event.ends=formatDate(new Date(endDate));event.starts=formatDate(new Date(startDate)),event.isAllDay=!1}if(void 0===event.comments&&addPlaceholder&&(event.comments=Locale.translate("NoCommentsEntered",{locale:locale.name,language:language}),event.noComments=!0),!event.subject&&addPlaceholder&&(event.subject=Locale.translate("NoTitle",{locale:locale.name,language:language})),event.type||(event.type=eventTypes[0].id),void 0===event.id&&addPlaceholder){var lastId=0===events.length?0:parseInt(events[events.length-1].id,10);event.id=(lastId+1).toString()}"NewEvent"===event.title&&(event.title=Locale.translate("NewEvent",{locale:locale.name,language:language}))}},COMPONENT_DEFAULTS={month:(new Date).getMonth(),year:(new Date).getFullYear(),locale:null,showToday:!0,onOpenCalendar:null,onChangeView:null,isAlternate:!1,isMenuButton:!0,showViewChanger:!1,viewChangerValue:"month",isMonthPicker:!1};function CalendarToolbar(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,COMPONENT_DEFAULTS),this.init()}CalendarToolbar.prototype={init:function init(){this.setLocale().build().handleEvents()},build:function build(){if(this.element[0].classList.add("flex-toolbar"),this.element[0].setAttribute("data-init","false"),this.settings.isAlternate){this.element[0].classList.add("is-alternate");this.element[0].innerHTML='\n        <div class="toolbar-section">\n          '.concat(this.settings.isMenuButton?'<button type="button" class="btn btn-monthyear-pane expandable-area-trigger" id="btn-monthyear-pane">\n        <span class="month">november</span>\n        <span class="year">2019</span>\n        <svg class="icon icon-closed" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n        <svg class="icon icon-opened" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </button>':'<span class="month">november</span><span class="year">2015</span>','\n        </div>\n        <div class="toolbar-section buttonset l-align-').concat(this.isRTL?"left":"right",'">\n          ').concat(this.settings.showToday?'<a class="hyperlink today" href="#">'.concat(Locale.translate("Today",{locale:this.locale.name,language:this.language}),"</a>"):"",'\n          <button type="button" class="btn-icon prev">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-left"></use></svg>\n            <span>').concat(Locale.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),'</span>\n            </button>\n          <button type="button" class="btn-icon next">\n              <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n              <span>').concat(Locale.translate("NextMonth",{locale:this.locale.name,language:this.language}),"</span>\n          </button>\n        </div>\n      ")}else this.element[0].innerHTML='\n        <div class="toolbar-section">\n          <button type="button" class="btn-icon prev">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-left"></use></svg>\n            <span>'.concat(Locale.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),'</span>\n            </button>\n          <button type="button" class="btn-icon next">\n              <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n              <span>').concat(Locale.translate("NextMonth",{locale:this.locale.name,language:this.language}),'</span>\n          </button>\n          <span class="monthview-datepicker">\n            <span class="hidden month" data-month="9">9</span>\n            <span class="hidden year">2019</span>\n            <span class="audible">').concat(Locale.translate("SelectDay"),'</span>\n            <span tabindex="0" aria-label="').concat(Locale.translate("Today",{locale:this.locale.name,language:this.language}),'" id="monthview-datepicker-field" class="datepicker input-auto" data-validation="">October 2019</span>\n          </span>\n          ').concat(this.settings.showToday?'<a class="hyperlink today" href="#">'.concat(Locale.translate("Today",{locale:this.locale.name,language:this.language}),"</a>"):"",'\n        </div>\n        <div class="toolbar-section buttonset l-align-right">\n          ').concat(this.settings.showViewChanger?'<label for="calendar-view-changer" class="label audible">'.concat(Locale.translate("ChangeView",{locale:this.locale.name,language:this.language}),'</label>\n            <select id="calendar-view-changer" name="calendar-view-changer" class="dropdown">\n              <option value="month"').concat("month"===this.settings.viewChangerValue?" selected":"",">").concat(Locale.translate("Month",{locale:this.locale.name,language:this.language}),'</option>\n              <option value="week"').concat("week"===this.settings.viewChangerValue?" selected":"",">").concat(Locale.translate("Week",{locale:this.locale.name,language:this.language}),'</option>\n              <option value="day" ').concat("day"===this.settings.viewChangerValue?" selected":"",">").concat(Locale.translate("Day",{locale:this.locale.name,language:this.language}),"</option>\n            </select>\n          </div>"):"","\n        </div>\n      ");return this.element.toolbarflex({allowTabs:!0}),this.monthPicker=this.element.find("#monthview-datepicker-field").datepicker({dateFormat:Locale.calendar(this.locale.name,this.settings.language,this.settings.calendarName).dateFormat.year,locale:this.settings.locale,language:this.settings.language,onOpenCalendar:this.settings.onOpenCalendar,isMonthPicker:this.settings.isMonthPicker,showToday:this.settings.showToday}),this.settings.showViewChanger&&(this.viewChanger=this.element.find("#calendar-view-changer").dropdown()),this.todayLink=this.element.find(".hyperlink.today"),this.monthPickerApi=this.monthPicker.data("datepicker"),this.element.find("button, a").hideFocus(),this.setInternalDate(new Date(this.settings.year,this.settings.month,1)),this},setInternalDate:function setInternalDate(date){this.currentYear=date.getFullYear(),this.currentMonth=date.getMonth(),this.currentDay=date.getDate(),this.currentDate=date,this.monthPicker.text(Locale.formatDate(new Date(this.currentYear,this.currentMonth,this.currentDay),{date:"year",locale:this.locale.name,language:this.settings.language})),this.currentCalendar&&this.currentCalendar.months||(this.currentCalendar=Locale.calendar(this.locale.name,this.settings.language,this.settings.calendarName));var monthName=this.currentCalendar.months?this.currentCalendar.months.wide[this.currentMonth]:"";if(this.element.find("span.month").attr("data-month",this.currentMonth).text(monthName),this.element.find("span.year").text(" ".concat(this.currentYear)),this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1)){var justYear=Locale.formatDate(this.currentDate,{date:"year",locale:this.locale.name}).split(" ")[0];this.element.find("span.year").text("".concat(justYear," ")),this.element.find("span.year").insertBefore(this.element.find("span.month"))}return this},setCurrentCalendar:function setCurrentCalendar(){return this.currentCalendar=Locale.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},setLocale:function setLocale(){var _this=this;return this.settings.language?(Locale.getLocale(this.settings.language),this.language=this.settings.language):this.language=Locale.currentLanguage.name,!this.settings.locale||this.locale&&this.locale.name===this.settings.locale?this.settings.locale||(this.locale=Locale.currentLocale,this.setCurrentCalendar()):Locale.getLocale(this.settings.locale).done((function(locale){_this.locale=Locale.cultures[locale],_this.language=_this.settings.language||_this.locale.language,_this.setCurrentCalendar()})),this},setViewChangerValue:function setViewChangerValue(viewChangerValue){this.settings.viewChangerValue=viewChangerValue,this.viewChanger.val(viewChangerValue).trigger("updated")},handleEvents:function handleEvents(){var _this2=this,self=this;return this.monthPicker.off("change.calendar-toolbar-p").on("change.calendar-toolbar-p",(function(){var picker=$(this).data("datepicker");self.setInternalDate(picker.currentDate),self.element.trigger("change-date",{selectedDate:picker.currentDate,isToday:!1})})),this.todayLink.off("click.calendar-toolbar-t").on("click.calendar-toolbar-t",(function(e){_this2.element.trigger("change-date",{selectedDate:_this2.currentDate,isToday:!0}),e.preventDefault()})),this.element.find(".prev").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",(function(){_this2.element.trigger("change-prev",{selectedDate:_this2.currentDate,isToday:!1})})),this.element.find(".next").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",(function(){_this2.element.trigger("change-next",{selectedDate:_this2.currentDate,isToday:!1})})),this.settings.onChangeView&&this.element.find("#calendar-view-changer").off("change.calendar-toolbar-v").on("change.calendar-toolbar-v",(function(e){_this2.settings.onChangeView({viewName:e.currentTarget.value,elem:e.currentTarget,api:_this2})})),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,COMPONENT_DEFAULTS)),this.teardown().init()},teardown:function teardown(){return this.element.off(),this.monthPicker.off(),this.todayLink.off(),this.element.find(".prev .next").off(),this},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"calendartoolbar")}};var COMPONENT_NAME_DEFAULTS={locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),activeDate:null,activeDateIslamic:null,isPopup:!1,headerStyle:"full",firstDayOfWeek:null,disable:{dates:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},legend:[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],hideDays:!1,showMonthYearPicker:!0,yearsAhead:5,yearsBack:4,range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1},selectable:!0,onSelected:null,onKeyDown:null,showToday:!0,onChangeView:null,isMonthPicker:!1};function MonthView(element,settings){this.settings=utils.mergeSettings(element,settings,COMPONENT_NAME_DEFAULTS),this.element=$(element),this.init()}MonthView.prototype={init:function init(){return this.setLocaleThenBuild()},setLocaleThenBuild:function setLocaleThenBuild(){var _this=this,languageDf=Locale.getLocale(this.settings.language),localeDf=Locale.getLocale(this.settings.locale);$.when(localeDf,languageDf).done((function(locale,lang){_this.locale=Locale.cultures[locale]||Locale.currentLocale,_this.language=lang||_this.settings.language||_this.locale.language,_this.settings.language=_this.language,_this.setCurrentCalendar(),_this.build().handleEvents()}))},build:function build(){var _this2=this;return"false"===this.settings.showMonthYearPicker&&(this.settings.showMonthYearPicker=!1),this.setCurrentCalendar(),this.prevButton=""+'<button type="button" class="btn-icon prev">\n        '.concat($.createIcon("caret-left"),"\n        <span>").concat(Locale.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.nextButton=""+'<button type="button" class="btn-icon next">\n        '.concat($.createIcon("caret-right"),"\n        <span>").concat(Locale.translate("NextMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.table=$('<table class="monthview-table" aria-label="'.concat(Locale.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$("<thead>\n        <tr>\n          <th>SU</th>\n          <th>MO</th>\n          <th>TU</th>\n          <th>WE</th>\n          <th>TH</th>\n          <th>FR</th>\n          <th>SA</th>\n        </tr>\n      </thead>").appendTo(this.table),this.days=$('<tbody>\n        <tr>\n          <td class="alternate">26</td>\n          <td class="alternate">27</td>\n          <td class="alternate">28</td>\n          <td class="alternate">29</td>\n          <td class="alternate" >30</td>\n          <td class="alternate">31</td>\n          <td>1</td>\n        </tr><tr>\n          <td>2</td>\n          <td>3</td>\n          <td>4</td>\n          <td>5</td>\n          <td>6</td>\n          <td>7</td>\n          <td>8</td>\n        </tr><tr>\n          <td>9</td>\n          <td>10</td>\n          <td>11</td>\n          <td>12</td>\n          <td>13</td>\n          <td>14</td>\n          <td>15</td>\n        </tr><tr>\n          <td>16</td>\n          <td>17</td>\n          <td>18</td>\n          <td>19</td>\n          <td class="is-today">20</td>\n          <td>21</td>\n          <td>22</td>\n        </tr><tr>\n          <td>23</td>\n          <td>24</td>\n          <td>25</td>\n          <td>26</td>\n          <td>27</td>\n          <td>28</td>\n          <td class="alternate">1</td>\n        </tr><tr>\n          <td class="alternate">2</td>\n          <td class="alternate">3</td>\n          <td class="alternate">4</td>\n          <td class="alternate">5</td>\n          <td class="alternate">6</td>\n          <td class="alternate">7</td>\n          <td class="alternate">8</td>\n        </tr>\n      </tbody>').appendTo(this.table),this.monthYearPane=$(this.settings.showMonthYearPicker?'<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",'">\n      <div class="expandable-pane">\n        <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>\n      </div>\n    </div>'):""),this.settings.hideDays&&(this.table=""),this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),"full"===this.settings.headerStyle?this.monthPicker=this.header.find("#monthview-datepicker-field"):this.settings.showToday&&this.header.find(".btn-icon.prev").before('<a class="hyperlink today" href="#">'.concat(Locale.translate("Today",{locale:this.locale.name,language:this.language}),"</a>")),this.showMonth(this.settings.month,this.settings.year),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,this.table),this.settings.isPopup||this.element.addClass("is-fullsize"),this.addLegend(),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new CalendarToolbar(this.calendarToolbarEl[0],{onOpenCalendar:function onOpenCalendar(){return _this2.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isMonthPicker:"full"===this.settings.headerStyle,isAlternate:"full"!==this.settings.headerStyle,isMenuButton:"full"!==this.settings.headerStyle&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView}),this.handleEvents(),this},setCurrentCalendar:function setCurrentCalendar(){this.currentCalendar=Locale.calendar(this.locale.name,this.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions},showMonth:function showMonth(month,year){var _this3=this,self=this,s=this.settings,now=new Date;now.setHours(0),now.setMinutes(0),now.setSeconds(0);var elementDate=s.activeDate&&s.activeDate.getDate()?s.activeDate:now;if(this.setCurrentCalendar(),this.isIslamic)if(s.activeDateIslamic)elementDate=s.activeDateIslamic;else{var gregorianDate=new Date;this.todayDateIslamic=Locale.gregorianToUmalqura(gregorianDate),s.activeDateIslamic=[],s.activeDateIslamic[0]=this.todayDateIslamic[0],s.activeDateIslamic[1]=this.todayDateIslamic[1],s.activeDateIslamic[2]=this.todayDateIslamic[2],year=s.activeDateIslamic[0],month=s.activeDateIslamic[1],elementDate=Locale.gregorianToUmalqura(now)}year.toString().length<4&&(year=(new Date).getFullYear()),12===month&&(year++,month=0,this.currentMonth=month,this.currentYear=year,this.currentDate.setFullYear(year),this.currentDate.setMonth(month)),month<0&&(year--,month=11,this.currentMonth=month,this.currentYear=year,this.currentDate.setFullYear(year),this.currentDate.setMonth(month)),this.currentDay=this.currentDay||this.settings.day,this.currentCalendar&&this.currentCalendar.days||(this.currentCalendar=Locale.calendar(this.locale.name,this.language,this.settings.calendarName));var days=this.currentCalendar.days.narrow;days=days||this.currentCalendar.days.abbreviated,s.isPopup||(days=this.currentCalendar.days.abbreviated);var monthName=this.currentCalendar.months.wide[month];this.currentMonth=month,this.currentYear=year;var firstDayofWeek=this.currentCalendar.firstDayofWeek||0;if(s.firstDayOfWeek&&(firstDayofWeek=s.firstDayOfWeek),this.dayNames.find("th").each((function(i){$(this).text(days[(i+firstDayofWeek)%7])})),this.yearFirst=this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1),this.header.find(".month").attr("data-month",month).text("".concat(xssUtils.stripTags(monthName)," ")),this.header.find(".year").text(" ".concat(year)),this.yearFirst&&!this.isIslamic&&!this.isRTL){elementDate.setFullYear(year);var justYear=Locale.formatDate(elementDate,{date:"year",locale:this.locale.name}).split(" ")[0];this.header.find(".year").text("".concat(justYear," ")),this.header.find(".year").insertBefore(this.header.find(".month"))}"full"===s.headerStyle&&this.calendarToolbarAPI&&this.calendarToolbarAPI.setInternalDate(new Date(year,month,1)),this.appendMonthYearPicker(month,year);var exYear,exMonth,exDay,leadDays=(this.firstDayOfMonth(year,month)-firstDayofWeek+7)%7,lastMonthDays=this.daysInMonth(year,month+(this.isIslamic?1:0)),thisMonthDays=this.daysInMonth(year,month+(this.isIslamic?0:1)),nextMonthDayCnt=1,dayCnt=1,foundSelected=!1,setSelected=function setSelected(el,isFound){foundSelected=isFound,el.addClass("is-selected".concat(s.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")};if(this.dayMap=[],this.days.find("td").each((function(i){var th=$(this).removeClass("alternate prev-month next-month is-selected range is-today");if(th.removeAttr("aria-selected"),th.removeAttr("tabindex"),i<leadDays&&(exDay=lastMonthDays-leadDays+1+i,exMonth=0===month?11:month-1,exYear=0===month?year-1:year,self.setDisabled(th,exYear,exMonth,exDay),self.setLegendColor(th,exYear,exMonth,exDay),self.dayMap.push({key:stringUtils.padDate(exYear,exMonth,exDay),elem:th}),th.addClass("alternate prev-month").html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(xssUtils.stripTags(exDay),"</span></span>")),th.attr("data-key",stringUtils.padDate(exYear,exMonth,exDay))),i>=leadDays&&dayCnt<=thisMonthDays){if(self.dayMap.push({key:stringUtils.padDate(year,month,dayCnt),elem:th}),th.html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(xssUtils.stripTags(dayCnt),"</span></span>")),th.attr("data-key",stringUtils.padDate(year,month,dayCnt)),self.isIslamic)year===elementDate[0]&&month===elementDate[1]&&dayCnt===elementDate[2]&&setSelected(th,!0);else{var tHours=elementDate.getHours(),tMinutes=elementDate.getMinutes(),tSeconds=self.isSeconds?elementDate.getSeconds():0,setHours=function setHours(el){return el?el.setHours(tHours,tMinutes,tSeconds,0):0},newDate=setHours(new Date(year,month,dayCnt));newDate!==setHours(elementDate)&&newDate!==setHours(self.currentDate)||setSelected(th,!0)}dayCnt===self.todayDay&&self.currentMonth===self.todayMonth&&self.currentYear===self.todayYear&&th.addClass("is-today"),th.attr("aria-label",Locale.formatDate(new Date(self.currentYear,self.currentMonth,dayCnt),{date:"full",locale:self.locale.name}));var startKey=stringUtils.padDate(self.currentYear,self.currentMonth,dayCnt);return th.attr("data-key",startKey),self.setDisabled(th,year,month,dayCnt),self.setLegendColor(th,year,month,dayCnt),th.attr("role","link"),void dayCnt++}dayCnt>=thisMonthDays+1&&(exDay=nextMonthDayCnt,exMonth=11===month?0:month+1,exYear=11===month?year+1:year,self.dayMap.push({key:stringUtils.padDate(exYear,exMonth,exDay),elem:th}),self.setDisabled(th,exYear,exMonth,exDay),self.setLegendColor(th,exYear,exMonth,exDay),th.addClass("alternate next-month").html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(nextMonthDayCnt,"</span></span>")),th.attr("data-key",stringUtils.padDate(exYear,exMonth,exDay)),nextMonthDayCnt++)})),!foundSelected&&!s.range.useRange){var firstDay=self.dayMap.filter((function(d){return d.key===stringUtils.padDate(year,month,_this3.settings.day)}));firstDay.length&&setSelected(firstDay[0].elem,!1)}var row=this.days.find("tr").eq(5);7===row.find("td.alternate").length?row.hide():row.show(),this.currentDate||(this.isIslamic?(this.currentIslamicDate=[this.currentYear,this.currentMonth,this.currentDay],this.currentDate=Locale.umalquraToGregorian(this.currentYear,this.currentMonth,this.currentDay)):this.currentDate=new Date(this.currentYear,this.currentMonth,this.currentDay)),this.setRangeSelection(),this.validatePrevNext(),s.range.useRange||0!==this.element.find("td.is-selected").length||(this.element.find("td[tabindex]").removeAttr("tabindex"),this.element.find("td:not(.alternate) .day-text").first().closest("td").attr("tabindex","0")),this.element.trigger("monthrendered",{year:year,month:month,elem:this.element,api:this})},setRangeSelection:function setRangeSelection(){if(this.settings.range.useRange){var range={};range.date=new Date(this.currentYear,this.currentMonth,1),range.date.setDate(range.date.getDate()-(this.days.find(".prev-month:visible").length+1)),range.formatedDate=Locale.formatDate(range.date,{date:"full",locale:this.locale.name}),range.cell=this.days.find('[aria-label="'.concat(range.formatedDate,'"]')),this.setRangeOnCell(!this.settings.range.second&&range.cell)}},appendMonthYearPicker:function appendMonthYearPicker(month,year){if(this.settings.showMonthYearPicker){var monthList='<ul class="picklist is-month">';this.currentCalendar.months.wide.map((function(monthMap,i){monthList+='<li class="picklist-item'.concat(i===month?" is-selected ":"",'"><a href="#" ').concat(i===month?'tabindex="0" ':'tabindex="-1" ','data-month="').concat(i,'">').concat(monthMap,"</a></li>")})),monthList+="</ul>",this.monthYearPane.find(".picklist-section.is-month").empty().append(monthList);var years=[],yearList='<ul class="picklist is-year">';yearList+='<li class="picklist-item up"><a href="#" tabindex="0"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>';for(var i=this.settings.yearsBack;i>=1;i--)years.push(parseInt(year,10)-i);years.push(year);for(var j=1;j<=this.settings.yearsAhead;j++)years.push(parseInt(year,10)+j);years.map((function(yearMap){yearList+='<li class="picklist-item'.concat(year===yearMap?" is-selected ":"",'"><a href="#" ').concat(year===yearMap?'tabindex="0" ':'tabindex="-1" ','data-year="').concat(yearMap,'">').concat(yearMap,"</a></li>")})),yearList+='<li class="picklist-item down"><a tabindex="0"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-down"></use></svg></a></li>',yearList+="</ul>",this.monthYearPane.find(".picklist-section.is-year").empty().append(yearList),this.yearFirst&&this.monthYearPane.addClass("is-yearfirst")}},firstDayOfMonth:function firstDayOfMonth(year,month){if(this.isIslamic){var firstDay=Locale.umalquraToGregorian(year,month,1);return null===firstDay?1:firstDay.getDay()}return new Date(year,month,1).getDay()},daysInMonth:function daysInMonth(year,month){if(this.isIslamic){for(var monthLengthBitmap=this.conversions.yearInfo[this.islamicYearIndex(year)][0],M=0;M<=month;M++){if(M===month)return 29+(1&monthLengthBitmap);monthLengthBitmap>>=1}return 0}return new Date(year,month,0).getDate()},islamicYearIndex:function islamicYearIndex(islamicYear){var yearIdx=islamicYear-1318;return yearIdx<0||yearIdx>=this.conversions.yearInfo.length?0:yearIdx},setDisabled:function setDisabled(elem,year,month,date){var s=this.settings,dateIsDisabled=this.isDateDisabled(year,month,date);elem.removeClass("is-disabled").removeAttr("aria-disabled"),(dateIsDisabled&&!s.disable.isEnable||!dateIsDisabled&&s.disable.isEnable)&&elem.addClass("is-disabled").attr("aria-disabled","true").removeClass("is-selected range").removeAttr("aria-selected")},isDateDisabled:function isDateDisabled(year,month,date){var s=this.settings,min=new Date(s.disable.minDate).setHours(0,0,0,0),max=new Date(s.disable.maxDate).setHours(0,0,0,0),d2=this.isIslamic?Locale.umalquraToGregorian(year,month,date):new Date(year,month,date);if(!d2)return!1;if(-1!==s.disable.dayOfWeek.indexOf(d2.getDay()))return!0;if((d2=d2.setHours(0,0,0,0))<=min||d2>=max)return!0;s.disable.dates.length&&"string"==typeof s.disable.dates&&(s.disable.dates=[s.disable.dates]);for(var i=0,l=s.disable.dates.length;i<l;i++){if(d2===new Date(s.disable.dates[i]).setHours(0,0,0,0))return!0}return!1},getDateRange:function getDateRange(startDate,endDate,includeDisabled){var dates=[],current=new Date(startDate);for(includeDisabled=void 0!==includeDisabled?includeDisabled:this.settings.range.includeDisabled;endDate.getTime()>=current.getTime();)(includeDisabled||!includeDisabled&&!this.isDateDisabled(current.getFullYear(),current.getMonth(),current.getDate()))&&dates.push(new Date(current)),current.setDate(current.getDate()+1);return dates},setLegendColor:function setLegendColor(elem,year,month,date){if(this.settings.showLegend&&elem[0]){var hex=this.getLegendColor(year,month,date);if(elem[0].style.backgroundColor="",elem.off("mouseenter.legend mouseleave.legend"),hex){if(-1===hex.indexOf("#")){var name=hex.replace(/[0-9]/g,""),number=10*hex.substr(hex.length-2,2);hex=theme.themeColors().palette[name][number].value}elem.addClass("is-colored"),elem[0].style.backgroundColor=colorUtils.hexToRgba(hex,.3);var normalColor=colorUtils.hexToRgba(hex,.3),hoverColor=colorUtils.hexToRgba(hex,.7);elem.on("mouseenter.legend",(function(){var thisElem=$(this);thisElem[0].style.backgroundColor=hoverColor,thisElem.find("span")[0].style.backgroundColor="transparent",thisElem.find(".day-text")[0].style.backgroundColor="transparent"})).on("mouseleave.legend",(function(){var thisElem=$(this);thisElem[0].style.backgroundColor=normalColor,thisElem.find("span")[0].style.backgroundColor="",thisElem.find(".day-text")[0].style.backgroundColor=""}))}}},getLegendColor:function getLegendColor(year,month,date){var s=this.settings;if(s.showLegend){for(var checkDate=new Date(year,month,date),checkHours=checkDate.setHours(0,0,0,0),i=0;i<s.legend.length;i++){var series=s.legend[i];if(series.dayOfWeek&&-1!==series.dayOfWeek.indexOf(checkDate.getDay()))return series.color;if(series.dates)for(var j=0;j<series.dates.length;j++){if(checkHours===new Date(series.dates[j]).setHours(0,0,0,0))return series.color}}return""}},handleEvents:function handleEvents(){var _this4=this,self=this,s=this.settings;return this.element.off("updated.".concat("monthview")).on("updated.".concat("monthview"),(function(){_this4.updated()})),this.header.off("click.monthview").on("click.monthview",".btn-icon",(function(){var isNext=$(this).is(".next"),range={},d={month:self.currentMonth,year:self.currentYear};s.range.useRange?(isNext?range.date=new Date(d.year,d.month+1,self.element.find(".next-month:visible").length+1):(range.date=new Date(d.year,d.month,1),range.date.setDate(range.date.getDate()-(self.days.find(".prev-month:visible").length+1))),d.month+=isNext?1:-1):(self.currentMonth+=isNext?1:-1,self.currentDate.setMonth(self.currentMonth),self.currentYear=parseInt(self.element[0].querySelector("span.year").innerText,10),self.currentDate.setFullYear(self.currentYear),d.month=self.currentMonth,d.year=self.currentYear),self.showMonth(d.month,d.year),s.range.useRange&&(range.formatedDate=Locale.formatDate(range.date,{date:"full",locale:self.locale.name}),range.cell=self.days.find('[aria-label="'.concat(range.formatedDate,'"]')),self.setRangeOnCell(!s.range.second&&range.cell))})),s.range.useRange&&(this.header.off("mouseover.datepicker").on("mouseover.datepicker","button",(function(){s.range.extra&&self.setRangeOnCell($(this).is(".next")?s.range.extra.maxCell:s.range.extra.minCell)})).off("focus.datepicker").on("focus.datepicker","button:not(.hide-focus)",(function(){s.range.extra&&self.setRangeOnCell($(this).is(".next")?s.range.extra.maxCell:s.range.extra.minCell)})),this.days.off("mouseover.datepicker").on("mouseover.datepicker","td",(function(){self.setRangeOnCell(this)}))),this.calendarToolbarEl&&this.calendarToolbarEl.off("change-date.monthview").on("change-date.monthview",(function(e,args){args.isToday&&_this4.settings.isPopup||(args.isToday?_this4.setToday():_this4.selectDay(args.selectedDate,!1,!0))})),s.selectable&&this.element.addClass("is-selectable").off("click.monthview-day").on("click.monthview-day","td",(function(e){var key=e.currentTarget.getAttribute("data-key");_this4.lastClickedKey=key,e.currentTarget.classList.contains("is-disabled")||_this4.selectDay(key,!1,!0)})),this.handleMonthYearPane().handleKeys(),this},handleMonthYearPane:function handleMonthYearPane(){var _this5=this,s=this.settings,appendYear=function appendYear(upDown){var yearContainer=_this5.monthYearPane[0].querySelector(".picklist.is-year"),yearList=yearContainer.children,year=yearList["up"===upDown?1:yearList.length-2].querySelector("a").getAttribute("data-year"),nextYear=parseInt(year,10)+("up"===upDown?-1:1);DOM.remove(yearList["up"===upDown?yearList.length-2:1]);var a=document.createElement("a");a.setAttribute("href","#"),a.setAttribute("tabindex","-1"),a.setAttribute("data-year",nextYear),a.innerHTML=nextYear;var li=document.createElement("li");DOM.addClass(li,"picklist-item"),li.appendChild(a),yearContainer.insertBefore(li,yearList["up"===upDown?1:yearList.length-1]),_this5.monthYearPane[0].querySelector(".picklist.is-year li.is-selected")||(DOM.addClass(li,"is-selected"),a.setAttribute("tabindex","0"))},intervalId=null;this.monthYearPane.off("touchstart.monthviewpane mousedown.monthviewpane").on("touchstart.monthviewpane mousedown.monthviewpane",".picklist.is-year li",(function(e){return intervalId=setInterval((function(){return e.currentTarget.classList.contains("up")&&appendYear("up"),e.currentTarget.classList.contains("down")&&appendYear("down"),e.stopImmediatePropagation(),e.stopPropagation(),!1}),200),!0})).off("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane").on("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane",".picklist.is-year li",(function(){return clearInterval(intervalId),!0}));var setMonthYearPane=function setMonthYearPane(target,cssClass){var elem=function elem(sel){return _this5.monthYearPane[0].querySelector(".is-".concat(sel," .is-selected a"))},d="is-month"===cssClass?{month:parseInt(target.getAttribute("data-month"),10),year:parseInt(elem("year").getAttribute("data-year"),10)}:{month:parseInt(elem("month").getAttribute("data-month"),10),year:parseInt(target.getAttribute("data-year"),10)};s.range.useRange||(_this5.currentMonth=d.month,_this5.currentDate.setMonth(_this5.currentMonth),_this5.currentYear=d.year,_this5.currentDate.setFullYear(_this5.currentYear),d.month=_this5.currentMonth,d.year=_this5.currentYear),function selectPicklistItem(target,cssClass){var selectedElem=_this5.monthYearPane[0].querySelector(".picklist.".concat(cssClass," .is-selected"));DOM.removeClass(selectedElem,"is-selected"),selectedElem.querySelector("a").setAttribute("tabindex","-1"),DOM.addClass(target.parentNode,"is-selected"),target.setAttribute("tabindex","0")}(target,cssClass),_this5.element.hasClass("".concat(cssClass,"only"))&&_this5.monthYearPane.parent().find("button.is-select-month").click()};this.monthYearPane.off("click.picklist-month").on("click.picklist-month",".picklist.is-month li",(function(e){setMonthYearPane(e.target,"is-month"),e.preventDefault()})),this.monthYearPane.off("click.picklist-month-a").on("click.picklist-month-a",".picklist.is-month li a",(function(e){e.preventDefault()})),this.monthYearPane.off("click.picklist-year").on("click.picklist-year",".picklist.is-year li",(function(e){e.currentTarget.classList.contains("up")?appendYear("up"):e.currentTarget.classList.contains("down")?appendYear("down"):(setMonthYearPane(e.target,"is-year"),e.preventDefault())})),this.monthYearPane.off("click.picklist-year-a").on("click.picklist-year-a",".picklist.is-year li a",(function(e){e.preventDefault()})),this.monthYearPane.on("expand.monthviewpane",(function(){s.hideDays||(_this5.element.find(".btn-icon, td.is-selected").attr("disabled","true"),_this5.element.find("td.is-selected").removeAttr("tabindex"),_this5.monthYearPane.find(".content").css("height",_this5.header.parent().height()-_this5.header.height()-55),_this5.element.find(".hyperlink.today").hide(),_this5.element.find(".is-select").removeClass("is-select").addClass("is-select-month-pane"),_this5.element.find(".is-cancel").removeClass("is-cancel").addClass("is-cancel-month-pane").text(Locale.translate("Cancel",{locale:_this5.locale.name,language:_this5.language}))),setTimeout((function(){_this5.monthYearPane.find(".is-month .is-selected a").focus(),_this5.monthYearPane.parent().hasClass("is-yearonly")&&_this5.monthYearPane.find(".is-year .is-selected a").focus()}))})).on("collapse.monthviewpane",(function(){s.hideDays||(_this5.element.find(".btn-icon").removeAttr("disabled"),_this5.element.find("td.is-selected").attr("tabindex","0"),_this5.element.find(".hyperlink.today").show(),_this5.element.find(".is-select-month-pane").addClass("is-select").removeClass("is-select-month-pane"),_this5.element.find(".is-cancel-month-pane").addClass("is-cancel").removeClass("is-cancel-month-pane").text(Locale.translate("Clear",{locale:_this5.locale.name,language:_this5.language})))}));var moveToItem=function moveToItem(e,nextPrev){var a=e.currentTarget,li=e.currentTarget.parentNode,adjacentLi="prev"===nextPrev?li.previousSibling:li.nextSibling;adjacentLi||(adjacentLi=li.parentNode.children["prev"===nextPrev?li.parentNode.children.length-1:0]);var adjacentA=adjacentLi.querySelector("a");a.setAttribute("tabindex","-1"),li.parentNode.querySelector(".is-selected").classList.remove("is-selected"),DOM.addClass(adjacentLi,"is-selected"),adjacentA.setAttribute("tabindex","0"),adjacentA.focus()};return this.monthYearPane.off("keydown.monthviewpane").on("keydown.monthviewpane",".picklist-item a",(function(e){var isUp=e.currentTarget.parentNode.classList.contains("up"),isDown=e.currentTarget.parentNode.classList.contains("down"),isYear=e.currentTarget.parentNode.parentNode.classList.contains("is-year"),isMonth=e.currentTarget.parentNode.parentNode.classList.contains("is-month"),handle=!1;"ArrowUp"===e.key&&(isYear||isMonth)?(moveToItem(e,"prev"),handle=!0):"ArrowDown"===e.key&&(isYear||isMonth)?(moveToItem(e,"next"),handle=!0):"Enter"===e.key&&(isUp||isDown?(appendYear(isUp?"up":"down"),handle=!0):(isYear||isMonth)&&(setMonthYearPane(e.target,isYear?"is-year":"is-month"),handle=!0)),handle&&e.preventDefault()})),this},selectDay:function selectDay(date,closePopup,insertDate){this.isIslamic&&"string"!=typeof date&&(this.currentIslamicDate=Locale.gregorianToUmalqura(date),date=stringUtils.padDate(this.currentIslamicDate[0],this.currentIslamicDate[1],this.currentIslamicDate[2])),this.isIslamic||"string"==typeof date||(date=stringUtils.padDate(date.getFullYear(),date.getMonth(),date.getDate()));var dayObj=this.dayMap.filter((function(dayFilter){return dayFilter.key===date})),year=parseInt(date.substr(0,4),10),month=parseInt(date.substr(4,2),10)-1,day=parseInt(date.substr(6,2),10);if(this.isIslamic?(this.currentIslamicDate=date,this.currentDate=Locale.umalquraToGregorian(year,month,day)):this.currentDate=new Date(year,month,day),this.currentYear=year,this.currentMonth=month,this.currentDay=day,(0===dayObj.length||dayObj[0].elem.hasClass("alternate"))&&(this.showMonth(month,year),dayObj=this.dayMap.filter((function(dayFilter){return dayFilter.key===date}))),0!==!dayObj.length){var node=dayObj[0].elem[0],args={node:node,key:date,day:day,month:month,year:year,close:closePopup};delete this.isKeyClick,this.element.find("td.is-selected").removeClass("is-selected").removeAttr("tabindex"),$(node).addClass("is-selected").attr("tabindex","0").focus(),(insertDate="full"===this.settings.headerStyle||insertDate)&&this.settings.onSelected&&this.settings.onSelected(node,args),insertDate&&this.element.trigger("selected",args)}},setToday:function setToday(){this.selectDay(new Date,!1,!0)},handleKeys:function handleKeys(){var _this6=this,s=this.settings;this.element.off("keydown.monthview").on("keydown.monthview",".monthview-table",(function(e){var key=e.keyCode||e.charCode||0,cell=$(e.target),allCell=_this6.days.find("td:visible"),allCellLength=allCell.length,idx=null,selector=null,handled=!1,minDate=new Date(s.disable.minDate),maxDate=new Date(s.disable.maxDate),resetRange=function resetRange(){_this6.datepickerApi&&s.range.useRange&&s.range.first&&s.range.first.date&&s.range.second&&s.range.second.date&&_this6.datepickerApi.resetRange({isData:!0})};if(_this6.settings.onKeyDown&&!1===_this6.settings.onKeyDown({e:e,key:key,cell:cell,node:_this6.element}))return e.stopPropagation(),e.preventDefault(),!1;if(40===key&&(handled=!0,s.range.useRange?(idx=allCell.index(e.target)+7,selector=allCell.eq(idx),idx<allCellLength&&(resetRange(),_this6.setRangeOnCell(selector.is(".is-selected")?null:selector),_this6.setRangeSelBeforeFirstSel(selector),_this6.activeTabindex(selector,!0))):s.disable.restrictMonths&&s.disable.minDate&&s.disable.maxDate?((_this6.currentDate.getMonth()<maxDate.getMonth()||maxDate.getDate()-1>=_this6.currentDate.getDate()+7)&&_this6.currentDate.setDate(_this6.currentDate.getDate()+7),_this6.selectDay(_this6.currentDate,!1,!1)):(_this6.currentDate.setDate(_this6.currentDate.getDate()+7),_this6.selectDay(_this6.currentDate,!1,!1))),38===key&&(handled=!0,s.range.useRange?(idx=allCell.index(e.target)-7,selector=allCell.eq(idx),idx>-1&&(resetRange(),_this6.setRangeOnCell(selector.is(".is-selected")?null:selector),_this6.setRangeSelBeforeFirstSel(selector),_this6.activeTabindex(selector,!0))):s.disable.restrictMonths&&s.disable.minDate&&s.disable.maxDate?((_this6.currentDate.getMonth()>minDate.getMonth()||minDate.getDate()+1<=_this6.currentDate.getDate()-7)&&_this6.currentDate.setDate(_this6.currentDate.getDate()-7),_this6.selectDay(_this6.currentDate,!1,!1)):(_this6.currentDate.setDate(_this6.currentDate.getDate()-7),_this6.selectDay(_this6.currentDate,!1,!1))),37===key&&(handled=!0,s.range.useRange?(idx=allCell.index(e.target)-1,selector=allCell.eq(idx),idx>-1&&(resetRange(),_this6.setRangeOnCell(selector.is(".is-selected")?null:selector),_this6.setRangeSelBeforeFirstSel(selector),_this6.activeTabindex(selector,!0))):s.disable.restrictMonths&&s.disable.minDate&&s.disable.maxDate?((_this6.currentDate.getMonth()>minDate.getMonth()||minDate.getDate()+1!==_this6.currentDate.getDate())&&_this6.currentDate.setDate(_this6.currentDate.getDate()-1),_this6.selectDay(_this6.currentDate,!1,!1)):(_this6.currentDate.setDate(_this6.currentDate.getDate()-1),_this6.selectDay(_this6.currentDate,!1,!1))),39===key&&(handled=!0,s.range.useRange?(idx=allCell.index(e.target)+1,selector=allCell.eq(idx),idx<allCellLength&&(resetRange(),_this6.setRangeOnCell(selector.is(".is-selected")?null:selector),_this6.setRangeSelBeforeFirstSel(selector),_this6.activeTabindex(selector,!0))):s.disable.restrictMonths&&s.disable.minDate&&s.disable.maxDate?((_this6.currentDate.getMonth()<maxDate.getMonth()||maxDate.getDate()-1!==_this6.currentDate.getDate())&&_this6.currentDate.setDate(_this6.currentDate.getDate()+1),_this6.selectDay(_this6.currentDate,!1,!1)):(_this6.currentDate.setDate(_this6.currentDate.getDate()+1),_this6.selectDay(_this6.currentDate,!1,!1))),33!==key||e.altKey||(handled=!0,resetRange(),s.disable.restrictMonths&&s.disable.minDate&&s.disable.maxDate?minDate.getMonth()!==_this6.currentDate.getMonth()&&(_this6.currentDate.setMonth(_this6.currentDate.getMonth()-1),_this6.selectDay(_this6.currentDate,!1,!1)):(_this6.currentDate.setMonth(_this6.currentDate.getMonth()-1),_this6.selectDay(_this6.currentDate,!1,!1))),34!==key||e.altKey||(handled=!0,resetRange(),s.disable.restrictMonths&&s.disable.minDate&&s.disable.maxDate?_this6.currentDate.getMonth()!==maxDate.getMonth()&&(_this6.currentDate.setMonth(_this6.currentDate.getMonth()+1),_this6.selectDay(_this6.currentDate,!1,!1)):(_this6.currentDate.setMonth(_this6.currentDate.getMonth()+1),_this6.selectDay(_this6.currentDate,!1,!1))),33===key&&e.ctrlKey&&(handled=!0,resetRange(),_this6.currentDate.setFullYear(_this6.currentDate.getFullYear()-1),_this6.selectDay(_this6.currentDate,!1,!1)),34===key&&e.ctrlKey&&(handled=!0,resetRange(),_this6.currentDate.setFullYear(_this6.currentDate.getFullYear()+1),_this6.selectDay(_this6.currentDate,!1,!1)),36===key){handled=!0;var firstDay,d=_this6.currentDate;resetRange(),s.disable.restrictMonths&&s.disable.minDate&&s.disable.maxDate?minDate.getMonth()!==_this6.currentDate.getMonth()?firstDay=new Date(d.getFullYear(),d.getMonth(),1):(firstDay=new Date(minDate.getFullYear(),minDate.getMonth(),minDate.getDate())).setDate(firstDay.getDate()+1):firstDay=new Date(d.getFullYear(),d.getMonth(),1),_this6.currentDate=firstDay,_this6.isIslamic&&(_this6.currentIslamicDate=Locale.gregorianToUmalqura(_this6.currentDate)),_this6.selectDay(_this6.currentDate,!1,!1)}if(35===key){handled=!0;var lastDay,_d=_this6.currentDate;resetRange(),s.disable.restrictMonths&&s.disable.minDate&&s.disable.maxDate?_this6.currentDate.getMonth()!==maxDate.getMonth()?lastDay=new Date(_d.getFullYear(),_d.getMonth()+1,0):(lastDay=new Date(maxDate.getFullYear(),maxDate.getMonth(),maxDate.getDate())).setDate(lastDay.getDate()-1):lastDay=new Date(_d.getFullYear(),_d.getMonth()+1,0),_this6.currentDate=lastDay,_this6.isIslamic&&(_this6.currentIslamicDate=Locale.gregorianToUmalqura(_this6.currentDate)),_this6.selectDay(_this6.currentDate,!1,!1)}if(84===key){if(s.range.useRange&&_this6.datepickerApi){resetRange();var keepFocus=!(s.range.first&&s.range.first.date&&(!s.range.second||s.range.second&&!s.range.second.date));_this6.datepickerApi.setToday(keepFocus),!keepFocus&&_this6.datepickerApi&&"function"==typeof _this6.datepickerApi.closeCalendar&&_this6.datepickerApi.closeCalendar()}else _this6.setToday();handled=!0}if(32===key||13===key){if(handled=!0,s.range.useRange)return(!s.range.first||s.range.first&&!s.range.first.date)&&allCell.removeClass("is-selected"),cell.focus().trigger("click"),!1;var _d2=_this6.getCellDate(cell);_this6.isIslamic?(_this6.currentIslamicDate=[_d2.year,_d2.month,_d2.day],_this6.currentDate=Locale.umalquraToGregorian(_this6.currentIslamicDate[0],_this6.currentIslamicDate[1],_this6.currentIslamicDate[2])):_this6.currentDate=new Date(_d2.year,_d2.month,_d2.day),_this6.selectDay(_this6.currentDate,!0,!0)}return!handled||(e.stopPropagation(),e.preventDefault(),!1)}))},validatePrevNext:function validatePrevNext(){if(this.settings.disable.restrictMonths&&this.settings.disable.minDate&&this.settings.disable.maxDate){var minDate=new Date(this.settings.disable.minDate),maxDate=new Date(this.settings.disable.maxDate);if(this.element.find(".prev").prop("disabled",!1),this.element.find(".next").prop("disabled",!1),minDate.getFullYear()>this.currentYear||this.currentYear>maxDate.getFullYear())return this.element.find(".prev").prop("disabled",!0),void this.element.find(".next").prop("disabled",!0);this.currentMonth-1<minDate.getMonth()&&this.element.find(".prev").prop("disabled",!0),this.currentMonth+1>maxDate.getMonth()&&this.element.find(".next").prop("disabled",!0)}},addLegend:function addLegend(){var s=this.settings;if(s.showLegend){this.legend&&this.legend.length&&this.legend.remove(),this.legend=$('<div class="monthview-legend"></div>');for(var i=0;i<s.legend.length;i++){var series=s.legend[i],hex=series.color;if(-1===hex.indexOf("#")){var name=hex.replace(/[0-9]/g,""),number=10*hex.substr(hex.length-2,2);hex=theme.themeColors().palette[name][number].value}var item=""+'<div class="monthview-legend-item">\n          <span class="monthview-legend-swatch" style="background-color: '.concat(colorUtils.hexToRgba(hex,.3),'"></span>\n          <span class="monthview-legend-text">').concat(series.name,"</span>\n        </div>");this.legend.append(item)}this.table.after(this.legend)}},setRangeOnCell:function setRangeOnCell(cell){var s=this.settings;if(s.range.useRange&&s.range.first&&!s.range.second){var first=s.range.first,extra=s.range.extra,len=extra.cellLength-1,firstCell=first.rowIdx+first.cellIdx+len*first.rowIdx;if((cell=$(cell)).length&&!cell.is(".is-disabled, .is-selected")){var row=cell.closest("tr"),cellIdx=cell.index(),rowIdx=row.index(),thisCell=rowIdx+cellIdx+len*rowIdx,d=this.getCellDate(cell),cellDate=new Date(d.year,d.month,d.day),max=this.getDifferenceToDate(s.range.first.date,s.range.maxDays);this.days.find("td:visible").each((function(i){var thisTd=$(this);cellDate>s.range.first.date&&!s.range.selectBackward&&(!s.range.maxDays||s.range.maxDays>0&&cellDate.getTime()<=max.aftertime)&&(i>firstCell&&i<=thisCell||cellDate>extra.max&&i<=thisCell)?thisTd.addClass("range-next"):cellDate<s.range.first.date&&!s.range.selectForward&&(!s.range.maxDays||s.range.maxDays>0&&cellDate.getTime()>=max.beforetime)&&(i<firstCell&&i>=thisCell||cellDate<extra.min&&i>=thisCell)?thisTd.addClass("range-prev"):thisTd.removeClass("range-next range-prev")}))}else cell.length||this.days.find("td").removeClass("range-next range-prev")}!cell&&s.range.second&&this.setRangeSelected()},getDifferenceToDate:function getDifferenceToDate(date,days,includeDisabled){var _this7=this,difference={},move=function move(d,daystomove,isNext){for(d=new Date(d);daystomove>0;)d.setDate(d.getDate()+(isNext?1:-1)),(includeDisabled||!includeDisabled&&!_this7.isDateDisabled(d.getFullYear(),d.getMonth(),d.getDate()))&&(daystomove--,difference[isNext?"after":"before"]=new Date(d));isNext&&difference.after?difference.aftertime=difference.after.getTime():difference.before&&(difference.beforetime=difference.before.getTime())};return includeDisabled=void 0!==includeDisabled?includeDisabled:this.settings.range.includeDisabled,move(date,days),move(date,days,!0),difference},setRangeSelected:function setRangeSelected(){var self=this,s=this.settings;s.range.useRange&&s.range.second&&s.range.second.date&&this.days&&this.days.length&&(this.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),this.days.find("td:visible").each((function(){var cell=$(this),isDisabled=cell.is(".is-disabled")&&!s.range.includeDisabled,includeDisableClass=cell.is(".is-disabled")&&s.range.includeDisabled?" include-disabled":"",getTime=function getTime(d){return(d=new Date(d)).setHours(0,0,0),d.getTime()},date=getTime(function dateObj(d){return new Date(d.year,d.month,d.day)}(self.getCellDate(cell))),d1=getTime(s.range.first.date),d2=getTime(s.range.second.date);date!==d1&&date!==d2||isDisabled?date>d1&&date<d2&&!isDisabled&&cell.addClass("range-selection".concat(includeDisableClass)):cell.addClass("is-selected".concat(includeDisableClass).concat(d1!==d2?" range-selection".concat(date===d2?" end-date":""):""))})))},setRangeSelByClick:function setRangeSelByClick(){var status=0,s=this.settings;if(s.range.useRange)if(s.range.first&&s.range.first.date&&s.range.second&&s.range.second.date){if(s.showTime&&this.datepickerApi){var getTime=function getTime(d){return new Date(d).getTime()},d={time1:getTime(s.range.first.date),time2:getTime(s.range.second.date),first:this.datepickerApi.setTime(s.range.first.date),second:this.datepickerApi.setTime(s.range.second.date)};d.time1!==getTime(d.first)&&(this.datepickerApi.setRangeToElem(d.first,!0),this.datepickerApi.setRangeToElem(d.second,!1),status=2)}status=0===status?1:status}else{var cell;if(!s.range.first||s.range.first&&!s.range.first.date)(cell=this.dayMap.filter((function(d){return d.elem.is(".is-selected")})))&&cell.length&&(this.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),cell[0].elem.focus().trigger("click"),status=3);else if(!s.range.second||s.range.second&&!s.range.second.date){if((cell=this.days.find("td.range-prev:visible").first()).length||(cell=this.days.find("td.range-next:visible").last()),cell.length||(cell=this.dayMap.filter((function(d){return d.elem.is(".is-selected")}))),cell&&cell.length)(cell[0].elem||cell).focus().trigger("click"),status=3}}return status},getCellDate:function getCellDate(cell){var day=parseInt(cell.text(),10),month=parseInt(this.header.find(".month").attr("data-month"),10),year=parseInt(this.header.find(".year").text(),10);return cell.hasClass("prev-month")?0===month?(month=11,year--):month--:cell.hasClass("next-month")&&(11===month?(month=0,year++):month++),{year:year,month:month,day:day}},setRangeSelBeforeFirstSel:function setRangeSelBeforeFirstSel(elem){var s=this.settings;s.range.useRange&&$("#monthview-popup:visible")&&(s.range.first||($("td",this.element).removeClass("is-selected"),elem.addClass("is-selected")))},activeTabindex:function activeTabindex(elem,isFocus){return $("td",this.element).removeAttr("tabindex"),elem.attr("tabindex",0),isFocus&&elem.focus(),elem},updated:function updated(){return this.teardown().init()},teardown:function teardown(){return this.header.off(),this.days.off(),this.element.off(),this.monthYearPane&&(this.monthYearPane.off(),this.monthYearPane=null),this},destroy:function destroy(){return this.teardown(),this.element&&(this.element.empty(),$.removeData(this.element[0],"monthview")),this}};var COMPONENT_NAME_DEFAULTS$1={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function click(){}}],filteredTypes:[],events:[],locale:null,language:null,firstDayOfWeek:0,startDate:null,endDate:null,showAllDay:!0,showTimeLine:!0,startHour:7,endHour:19,showToday:!0,showViewChanger:!0,onChangeView:null,onChangeWeek:null,onRenderWeek:null,eventTooltip:"overflow",iconTooltip:"overflow"};function WeekView(element,settings){this.settings=utils.mergeSettings(element,settings,COMPONENT_NAME_DEFAULTS$1),this.element=$(element),this.init()}WeekView.prototype={init:function init(){return this.settings.startDate||(this.settings.startDate=dateUtils.firstDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.settings.endDate||(this.settings.endDate=dateUtils.lastDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.setLocaleThenBuild()},setLocaleThenBuild:function setLocaleThenBuild(){var _this=this,languageDf=Locale.getLocale(this.settings.language),localeDf=Locale.getLocale(this.settings.locale);return $.when(localeDf,languageDf).done((function(locale,lang){_this.locale=Locale.cultures[locale]||Locale.currentLocale,_this.language=lang||_this.settings.language||_this.locale.language,_this.settings.language=_this.language,_this.setCurrentCalendar(),_this.build()})),this},setCurrentCalendar:function setCurrentCalendar(){return this.currentCalendar=Locale.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions,this},build:function build(){return this.addToolbar(),this.showWeek(this.settings.startDate,this.settings.endDate),this.handleEvents(),this},renderAllEvents:function renderAllEvents(isCallback){if(!this.settings.onRenderWeek||isCallback){var eventsSorted=this.settings.events.slice(0);eventsSorted.sort((function(a,b){return a.starts<b.starts?-1:a.starts>b.starts?1:0})),this.removeAllEvents();for(var i=0;i<eventsSorted.length;i++){var event=eventsSorted[i];this.settings.filteredTypes.indexOf(event.type)>-1||this.renderEvent(event)}}else this.callOnRenderWeek()},callOnRenderWeek:function callOnRenderWeek(){var self=this;this.settings.onRenderWeek(this.element,(function response(events,eventTypes){eventTypes&&eventTypes.length>0&&(self.settings.eventTypes=eventTypes),events&&events.length>0&&(self.settings.events=events,self.renderAllEvents(!0))}),{api:self,settings:this.settings})},removeAllEvents:function removeAllEvents(){for(var events=this.element[0].querySelectorAll(".calendar-event"),i=0;i<events.length;i++)events[i].parentNode.removeChild(events[i]);for(var _i=0;_i<this.dayMap.length;_i++)this.dayMap[_i].events=[]},renderEvent:function renderEvent(event){var startDate=new Date(event.starts),startKey=stringUtils.padDate(startDate.getFullYear(),startDate.getMonth(),startDate.getDate()),endDate=new Date(event.ends),endKey=stringUtils.padDate(endDate.getFullYear(),endDate.getMonth(),endDate.getDate()),days=this.dayMap.filter((function(day){return day.key>=startKey&&day.key<=endKey}));if(event.endKey=endKey,event.startKey=startKey,event=calendarShared.addCalculatedFields(event,this.locale,this.language,this.settings.eventTypes),1!==days.length||event.isAllDay||this.appendEventToHours(days[0].elem,event),1===days.length&&event.isAllDay&&this.appendEventToAllDay(days[0].elem,event),days.length>1)for(var i=0;i<days.length;i++){var cssClass=0===i?"calendar-event-start":"calendar-event-continue";i===days.length-1&&(cssClass="calendar-event-ends"),this.appendEventToAllDay(days[i].elem,event,cssClass)}},appendEventToAllDay:function appendEventToAllDay(container,event,cssClass){var allDayContainer=container.querySelector(".week-view-all-day-wrapper");if(allDayContainer){var node=document.createElement("a");DOM.addClass(node,"calendar-event",event.color,cssClass),node.setAttribute("data-id",event.id),node.setAttribute("data-key",event.startKey),node.setAttribute("href","#"),"calendar-event-continue"!==cssClass&&"calendar-event-ends"!==cssClass||node.setAttribute("tabindex","-1"),node.innerHTML='<div class="calendar-event-content">\n      '.concat(event.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(event.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(event.status,'"><use href="#').concat(event.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(event.shortSubject||event.subject,"</span>\n    </div>");var eventCount=allDayContainer.querySelectorAll(".calendar-event").length;if(eventCount>=1&&(node.style.top="".concat(22*eventCount,"px")),eventCount>2)for(var nodes=this.element[0].querySelectorAll(".week-view-all-day-wrapper"),i=0;i<nodes.length;i++)nodes[i].style.height="".concat(44+23*(eventCount-1),"px");allDayContainer.appendChild(node),this.attachTooltip(node,event)}},appendEventToHours:function appendEventToHours(container,event){for(var dayHourContainers=this.element[0].querySelectorAll("td:nth-child(".concat(container.cellIndex+1,")")),i=0;i<dayHourContainers.length;i++){var tdEl=dayHourContainers[i],hour=parseFloat(tdEl.parentNode.getAttribute("data-hour"),10),rStartsHour=Math.round(event.startsHour);if(rStartsHour>event.startsHour?hour===rStartsHour-.5:hour===rStartsHour){var duration=event.endsHour-event.startsHour,displayedTime="",node=document.createElement("a");if(DOM.addClass(node,"calendar-event",event.color),node.setAttribute("data-id",event.id),node.setAttribute("data-key",event.startKey),node.setAttribute("href","#"),duration<.5&&DOM.addClass(node,"reduced-padding",event.color),duration<1.5&&DOM.addClass(node,"is-ellipsis"),duration>2&&(displayedTime=" ".concat(Locale.formatHourRange(event.startsHour,event.endsHour,{locale:this.locale}))),event.startsHour+duration>this.settings.endHour&&(DOM.addClass(node,"is-cutoff",event.color),duration=this.settings.endHour+1-event.startsHour),duration<.25&&(duration=.25),event.startsHour>hour){var extra=event.startsHour-hour,height=tdEl.parentNode.offsetHeight;node.style.top="".concat(extra/.016666666666666784*(height/30),"px")}node.style.height="".concat(2*duration*25+1.5*duration,"px"),node.innerHTML='<div class="calendar-event-content">\n          '.concat(event.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(event.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(event.status,'"><use href="#').concat(event.icon,'"></use></svg></span>'):"",'\n          <span class="calendar-event-title">').concat(event.shortSubject||event.subject).concat(displayedTime,"</span>\n        </div>");var containerWrapper=tdEl.querySelector(".week-view-cell-wrapper"),containerEvents=tdEl.querySelectorAll(".calendar-event"),eventCount=containerEvents.length;if(eventCount>0){var width=100/(eventCount+1),j=0;for(j=0;j<eventCount;j++)containerEvents[j].style.width="".concat(width,"%"),j>0&&this.isRTL&&(containerEvents[j].style.right="".concat(width*j,"%")),j>0&&!this.isRTL&&(containerEvents[j].style.left="".concat(width*j,"%"));node.style.width="".concat(width,"%"),this.isRTL?node.style.right="".concat(width*j,"%"):node.style.left="".concat(width*j,"%")}containerWrapper.appendChild(node),this.attachTooltip(node,event)}}},attachTooltip:function attachTooltip(node,event){var _this2=this;if("overflow"!==this.settings.iconTooltip){var icon=node.querySelector(".calendar-event-icon");icon&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({settings:this.settings,event:event}):event[this.settings.iconTooltip]&&(icon.setAttribute("title",event[this.settings.iconTooltip]),$(icon).tooltip({content:icon.innerText})))}"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({settings:this.settings,event:event}):event[this.settings.eventTooltip]&&(node.setAttribute("title",event[this.settings.eventTooltip]),$(node).tooltip({content:node.innerText}))),event.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(node.setAttribute("title",event.subject),$(node).tooltip({beforeShow:function beforeShow(response,ui){var title=ui[0].querySelector(".calendar-event-title"),icon=ui[0].querySelector(".calendar-event-icon"),iconStatus=icon?icon.querySelector(".icon").getAttribute("data-status"):"";title.offsetWidth>ui[0].scrollWidth-(icon?icon.offsetWidth:0)?response("".concat(title.innerText).concat(iconStatus?" (".concat(Locale.translate(iconStatus,{locale:_this2.locale.name},!1),")"):"")):response(!1)}}))},showWeek:function showWeek(startDate,endDate){var _this3=this;this.numberOfDays=Math.round((endDate-startDate)/864e5),this.dayMap=[],this.isDayView=!1,this.element.removeClass("is-day-view"),0!==this.numberOfDays&&1!==this.numberOfDays||(this.element.addClass("is-day-view"),this.isDayView=!0,this.element.find("#calendar-view-changer").val("day").trigger("updated")),this.hasIrregularDays=7!==this.numberOfDays,this.weekHeader='<thead class="week-view-table-header"><tr><th><div class="week-view-header-wrapper"><span class="audible">'.concat(Locale.translate("Hour"),"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper">'.concat(Locale.translate("AllDay",this.locale.name),"</div>")),this.weekHeader+="</th>";for(var day=new Date(startDate.getTime());day<=endDate;day.setDate(day.getDate()+1)){var dayValue=Locale.formatDate(day,{pattern:"d",locale:this.locale.name}),dayNameValue=Locale.formatDate(day,{pattern:"EEE",locale:this.locale.name}),dayOfWeekSetting=this.currentCalendar.dateFormat.dayOfWeek,emphasis=dayOfWeekSetting?"EEE"===dayOfWeekSetting.split(" ")[0]:"d EEE";this.weekHeader+='<th data-key="'.concat(stringUtils.padDate(day.getFullYear(),day.getMonth(),day.getDate()),'"><div class="week-view-header-wrapper').concat(dateUtils.isToday(day)?" is-today":"",'"><span class="week-view-header-day-of-week').concat(emphasis?"":" is-emphasis",'">').concat(emphasis?dayNameValue:dayValue,'</span><span class="week-view-header-day-of-week').concat(emphasis?" is-emphasis":"",'">').concat(emphasis?dayValue:dayNameValue,"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper"></div>'),this.weekHeader+="</th>"}this.weekHeader+="</tr></thead>",this.weekBody="<tbody>";for(var hour=this.settings.startHour;hour<=this.settings.endHour;hour++){for(var weekRow='<tr class="week-view-hour-row" data-hour="'.concat(hour,'"><td><div class="week-view-cell-wrapper">').concat(Locale.formatHour(hour,{locale:this.locale}),"</div></td>"),halfHourRow='<tr class="week-view-half-hour-row" data-hour="'.concat(hour,'.5"><td><div class="week-view-cell-wrapper"></div></td>'),_day=new Date(startDate.getTime());_day<=endDate;_day.setDate(_day.getDate()+1))weekRow+='<td><div class="week-view-cell-wrapper"></div></td>',halfHourRow+='<td><div class="week-view-cell-wrapper"></div></td>';weekRow+="</tr>",halfHourRow+="</tr>",this.weekBody+=weekRow+halfHourRow}this.weekBody+="</tbody>",this.weekContainer='<div class="week-view-container"><table class="week-view-table">'.concat(this.weekHeader).concat(this.weekBody,"</table></div>"),this.element.find(".week-view-container").remove();var args={isDayView:this.isDayView,startDate:startDate,endDate:endDate,elem:this.element,api:this};this.element.append(this.weekContainer).trigger("weekrendered",args),this.settings.onChangeWeek&&this.settings.onChangeWeek(args),this.element.find("th").each((function(i,elem){var key=elem.getAttribute("data-key");key&&_this3.dayMap.push({key:key,elem:elem})})),this.addTimeLine(),this.showToolbarMonth(startDate,endDate),this.renderAllEvents(),this.settings.startDate=startDate,this.settings.endDate=endDate},showToolbarMonth:function showToolbarMonth(startDate,endDate){var startMonth=Locale.formatDate(startDate,{pattern:"MMMM",locale:this.locale.name}),endMonth=Locale.formatDate(endDate,{pattern:"MMMM",locale:this.locale.name}),startYear=Locale.formatDate(startDate,{pattern:"yyyy",locale:this.locale.name}),endYear=Locale.formatDate(endDate,{pattern:"yyyy",locale:this.locale.name}),monthStr=Locale.formatDate(endDate,{date:"year",locale:this.locale.name});endMonth!==startMonth&&(monthStr="".concat(Locale.formatDate(startDate,{pattern:"MMM",locale:this.locale.name})," - ").concat(Locale.formatDate(endDate,{pattern:"MMMM yyyy",locale:this.locale.name}))),endYear!==startYear&&(monthStr="".concat(Locale.formatDate(startDate,{pattern:"MMM yyyy",locale:this.locale.name})," - ").concat(Locale.formatDate(endDate,{pattern:"MMM yyyy",locale:this.locale.name}))),this.monthField.text(monthStr)},addTimeLine:function addTimeLine(){var _this4=this;if(this.settings.showTimeLine){var setTime=function setTime(){var now=new Date,hours=now.getHours(),mins=now.getMinutes(),diff=hours-_this4.settings.startHour+mins/60;_this4.markers.css("top",52*diff)};this.timeMarker||(this.element.find(".week-view-hour-row:nth-child(1) td").prepend('<div class="week-view-time-marker"></div>'),this.markers=$(".week-view-time-marker"),setTime(),this.timer=setInterval((function(){setTime()}),3e4))}},addToolbar:function addToolbar(){var _this5=this;this.header=$('<div class="week-view-header"><div class="calendar-toolbar"></div></div>').appendTo(this.element),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new CalendarToolbar(this.calendarToolbarEl[0],{onOpenCalendar:function onOpenCalendar(){return _this5.settings.startDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isAlternate:!1,isMenuButton:!0,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,viewChangerValue:this.isDayView?"day":"week"}),this.monthField=this.header.find("#monthview-datepicker-field")},handleEvents:function handleEvents(){var _this6=this;this.element.off("updated.".concat("weekview")).on("updated.".concat("weekview"),(function(){_this6.updated()})),this.element.off("change-date.".concat("weekview")).on("change-date.".concat("weekview"),(function(e,args){var startDate=args.isToday?new Date:args.selectedDate;_this6.isDayView?(_this6.settings.startDate=startDate,_this6.settings.endDate=startDate):(_this6.settings.startDate=_this6.hasIrregularDays?startDate:dateUtils.firstDayOfWeek(startDate,_this6.settings.firstDayOfWeek),_this6.settings.startDate.setHours(0,0,0,0),_this6.settings.endDate=new Date(_this6.settings.startDate),_this6.settings.endDate.setDate(_this6.settings.endDate.getDate()+_this6.numberOfDays-1),_this6.settings.endDate.setHours(23,59,59,59)),_this6.showWeek(_this6.settings.startDate,_this6.settings.endDate)})),this.element.off("change-next.".concat("weekview")).on("change-next.".concat("weekview"),(function(){_this6.advanceDays(!0)})),this.element.off("change-prev.".concat("weekview")).on("change-prev.".concat("weekview"),(function(){_this6.advanceDays(!1)}));var fireEvent=function fireEvent(target,eventName){var eventId=target.getAttribute("data-id"),eventData=_this6.settings.events.filter((function(event){return event.id===eventId}));eventData&&0!==eventData.length&&_this6.element.trigger(eventName,{settings:_this6.settings,event:eventData[0]})};return this.element.off("click.".concat("weekview")).on("click.".concat("weekview"),".calendar-event",(function(e){fireEvent(e.currentTarget,"eventclick"),e.preventDefault()})),this.element.off("dblclick.".concat("weekview")).on("dblclick.".concat("weekview"),".calendar-event",(function(e){fireEvent(e.currentTarget,"eventdblclick")})),this},advanceDays:function advanceDays(advance){var diff=this.isDayView?1:this.numberOfDays;advance||(diff=-diff),this.settings.startDate.setDate(this.settings.startDate.getDate()+diff),this.isDayView?(this.settings.endDate=new Date(this.settings.startDate),this.settings.startDate.setHours(0,0,0,0),this.settings.endDate.setHours(23,59,59,999)):this.settings.endDate.setDate(this.settings.endDate.getDate()+diff),this.showWeek(this.settings.startDate,this.settings.endDate)},addEvent:function addEvent(event){event.startsLocale||(event=calendarShared.addCalculatedFields(event,this.locale,this.language,this.settings.eventTypes)),calendarShared.cleanEventData(event,!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(event),this.renderEvent(event)},selectHeader:function selectHeader(d){var key=d instanceof Date?stringUtils.padDate(d.getFullYear(),d.getMonth(),d.getDate()):d,selector={all:".week-view-table-header th"};selector.current="".concat(selector.all,'[data-key="').concat(key,'"]'),[].slice.call(this.element[0].querySelectorAll(selector.all)).forEach((function(header){header.classList.remove("is-selected")}));var thisHeader=this.element[0].querySelector(selector.current);thisHeader&&thisHeader.classList.add("is-selected")},clearEvents:function clearEvents(){this.settings.events=[],this.renderAllEvents()},updateEvent:function updateEvent(event){for(var eventId=event.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===eventId&&(this.settings.events[i]=utils.extend(!0,this.settings.events[i],event),calendarShared.cleanEventData(this.settings.events[i],!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents()},deleteEvent:function deleteEvent(event){for(var eventId=event.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===eventId&&this.settings.events.splice(i,1);this.renderAllEvents()},updated:function updated(settings){return settings||(settings={}),settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),settings.locale?(this.destroy().init(),this):(this.renderAllEvents(),this)},teardown:function teardown(){return this.element.off(),clearInterval(this.timer),this.timer=null,this},destroy:function destroy(){return this.teardown(),this.element.empty(),$.removeData(this.element[0],"weekview"),this}};var COMPONENT_NAME_DEFAULTS$2={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function click(){}}],events:[],locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),showViewChanger:!0,onRenderMonth:null,template:null,upcomingEventDays:14,modalTemplate:null,menuId:null,menuSelected:null,eventTooltip:"overflow",iconTooltip:"overflow",newEventDefaults:{title:"NewEvent",subject:"",isAllDay:!0,comments:""},onChangeView:null,showToday:!0,weekViewSettings:{firstDayOfWeek:0,startHour:7,endHour:19,showAllDay:!0,showTimeLine:!0}};function Calendar(element,settings){this.settings=utils.mergeSettings(element,settings,COMPONENT_NAME_DEFAULTS$2),this.element=$(element),this.init()}Calendar.prototype={init:function init(){return this.setLocaleThenBuild()},build:function build(){return this.setCurrentCalendar().renderEventTypes().renderMonthView().renderWeekView().handleEvents(),this},setLocaleThenBuild:function setLocaleThenBuild(){var _this=this,languageDf=Locale.getLocale(this.settings.language),localeDf=Locale.getLocale(this.settings.locale);return $.when(localeDf,languageDf).done((function(locale,lang){_this.locale=Locale.cultures[locale]||Locale.currentLocale,_this.language=lang||_this.settings.language||_this.locale.language,_this.settings.language=_this.language,_this.setCurrentCalendar(),_this.build().handleEvents()})),this},setCurrentCalendar:function setCurrentCalendar(){return this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},renderEventTypes:function renderEventTypes(){if(this.eventTypeContainer=document.querySelector(".calendar-event-types"),!this.eventTypeContainer)return this;for(var eventTypeMarkup="",i=0;i<this.settings.eventTypes.length;i++){var eventType=this.settings.eventTypes[i];eventTypeMarkup+='<input type="checkbox" class="checkbox '.concat(eventType.color,'07" name="').concat(eventType.id,'" id="').concat(eventType.id,'" ').concat(eventType.checked?'checked="true"':""," ").concat(eventType.disabled?'disabled="true"':"",' />\n        <label for="').concat(eventType.id,'" class="checkbox-label">').concat(eventType.translationKey?Locale.translate(eventType.translationKey,{locale:this.locale.name,language:this.language}):eventType.label,"</label><br/>")}return this.eventTypeContainer.innerHTML=eventTypeMarkup,this},renderMonthView:function renderMonthView(){var _this2=this;return this.monthViewContainer=document.querySelector(".calendar .calendar-monthview"),this.activeView="month",this.onChangeToMonth=function(args){_this2.settings.onChangeView?_this2.settings.onChangeView(args):_this2.changeView(args.viewName)},this.monthView=new MonthView(this.monthViewContainer,{onRenderMonth:this.settings.onRenderMonth,onSelected:this.settings.onSelected,selectable:!0,locale:this.settings.locale,language:this.settings.language,month:this.settings.month,year:this.settings.year,day:this.settings.day,eventTooltip:this.eventTooltip,iconTooltip:this.iconTooltip,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToMonth}),this.monthViewHeader=document.querySelector(".calendar .monthview-header"),this.renderAllEvents(),this},renderWeekView:function renderWeekView(){var _this3=this;if(this.weekViewContainer=document.querySelector(".calendar .calendar-weekview"),!this.weekViewContainer)return this;this.weekViewContainer.classList.add("week-view"),this.weekViewContainer.classList.add("hidden"),this.onChangeToWeekDay=function(args){_this3.settings.onChangeView?_this3.settings.onChangeView(args):_this3.changeView(args.viewName)};var startDate=dateUtils.firstDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek),endDate=dateUtils.lastDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek);return startDate.setHours(0,0,0,0),endDate.setHours(23,59,59,999),this.weekView=new WeekView(this.weekViewContainer,{locale:this.settings.locale,language:this.settings.language,startDate:startDate,endDate:endDate,eventTypes:this.settings.eventTypes,events:this.settings.events,firstDayOfWeek:this.settings.weekViewSettings.firstDayOfWeek,showAllDay:this.settings.weekViewSettings.showAllDay,showTimeLine:this.settings.weekViewSettings.showTimeLine,startHour:this.settings.weekViewSettings.startHour,endHour:this.settings.weekViewSettings.endHour,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToWeekDay,eventTooltip:this.settings.eventTooltip,iconTooltip:this.settings.iconTooltip}),this.weekViewHeader=document.querySelector(".calendar .calendar-weekview .monthview-header"),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.settings.onChangeWeek=function(args){_this3.monthView.selectDay(args.startDate,!1,!0)},this.weekView.renderAllEvents(),this},changeView:function changeView(viewName){if(viewName!==this.activeView&&this.weekViewContainer){var currentDate=this.currentDate(),startDate=new Date(currentDate),endDate=new Date(currentDate);switch(startDate.setHours(0,0,0,0),endDate.setHours(23,59,59,999),viewName){case"day":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="day",this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(startDate,endDate),this.clearEventDetails(),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView);break;case"week":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="week",startDate=dateUtils.firstDayOfWeek(startDate,this.settings.firstDayOfWeek),endDate=dateUtils.lastDayOfWeek(startDate,this.settings.firstDayOfWeek),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(startDate,endDate),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.clearEventDetails(),this.monthView.selectDay(currentDate,!1,!0),this.weekView.selectHeader(currentDate);break;case"month":this.monthViewContainer.classList.remove("hidden"),this.weekViewContainer.classList.add("hidden"),this.activeView="month",this.monthView.showMonth(this.settings.month,this.settings.year),this.monthView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.monthView.selectDay(currentDate,!1,!0)}}},appendUpcomingEvent:function appendUpcomingEvent(event){if(this.upcomingEventsContainer=document.querySelector(".calendar-upcoming-events"),this.upcomingEventsContainer&&!(event.daysUntil>0)){var daysUntil=Math.abs(event.daysUntil);if(!(daysUntil<0||daysUntil>this.settings.upcomingEventDays)){var upcomingEvent=document.createElement("a");upcomingEvent.setAttribute("href","#"),upcomingEvent.setAttribute("data-key",event.startKey),DOM.addClass(upcomingEvent,"calendar-upcoming-event");var upcomingEventsMarkup="",startDay=Locale.formatDate(event.starts,{pattern:"d",locale:this.locale.name}),endDay=Locale.formatDate(event.ends,{pattern:"d",locale:this.locale.name}),dateRange="".concat(Locale.formatDate(event.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(startDay===endDay?startDay:"".concat(startDay,"-").concat(endDay),", ").concat(Locale.formatDate(event.starts,{pattern:"yyyy",locale:this.locale.name}));if(parseInt(endDay,10)<parseInt(startDay,10)){var nextMonth=new Date(event.starts);nextMonth.setDate(1),nextMonth.setMonth(nextMonth.getMonth()+1);var endYear=nextMonth.getFullYear();dateRange="".concat(Locale.formatDate(event.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(startDay," - ").concat(Locale.formatDate(nextMonth,{pattern:"MMMM",locale:this.locale.name})," ").concat(endDay,", ").concat(endYear)}upcomingEventsMarkup+='\n      <span class="calendar-upcoming-date">'.concat(dateRange,'</span>\n      <span class="calendar-upcoming-event-color ').concat(event.color||"",'">').concat(event.color||"",'</span>\n      <span class="calendar-upcoming-description">').concat(event.subject||"",'</span>\n      <span class="calendar-upcoming-status-text">').concat(event.status||"",'</span>\n      <span class="calendar-upcoming-duration">').concat(event.isDays?event.duration:event.durationHours," ").concat(event.durationUnits||"","</span>"),upcomingEvent.innerHTML=upcomingEventsMarkup,this.upcomingEventsContainer.appendChild(upcomingEvent)}}},renderEventDetails:function renderEventDetails(eventId,count){if(this.settings.events&&"month"===this.activeView){var eventData=this.settings.events.filter((function(event){return event.id===eventId}));if(eventData&&0!==eventData.length&&(this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsContainer)){var thisEvent=$.extend(!0,{},eventData[0]);thisEvent.durationHours&&!thisEvent.isDays&&calendarShared.formateTimeString(thisEvent,this.locale,this.language),this.renderTmpl(thisEvent,this.settings.template,this.eventDetailsContainer,count>1);var api=$(this.eventDetailsContainer).data("accordion");api&&api.destroy(),$(this.eventDetailsContainer).accordion(),DOM.hasClass(this.eventDetailsContainer,"has-only-one")&&$(this.eventDetailsContainer).find(".accordion-header, .accordion-header a").off("click")}}},renderSelectedEventDetails:function renderSelectedEventDetails(){var dayObj=this.getDayEvents();if(this.clearEventDetails(),dayObj.events&&0!==dayObj.events.length)for(var i=0;i<dayObj.events.length;i++)this.renderEventDetails(dayObj.events[i].id,dayObj.events.length)},renderDay:function renderDay(key){this.monthView.selectDay(key);var startDate=new Date(this.currentDate()),endDate=new Date(this.currentDate());startDate.setHours(0,0,0,0),endDate.setHours(23,59,59,999),"day"===this.activeView&&this.weekView.showWeek(startDate,endDate),"week"===this.activeView&&(startDate=dateUtils.firstDayOfWeek(startDate,this.settings.firstDayOfWeek),endDate=dateUtils.lastDayOfWeek(startDate,this.settings.firstDayOfWeek),this.weekView.showWeek(startDate,endDate))},clearEventDetails:function clearEventDetails(){this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML="")},clearUpcomingEvents:function clearUpcomingEvents(){this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML="")},filterEventTypes:function filterEventTypes(){var types=[];if(!this.eventTypeContainer)return types;for(var checkboxes=this.eventTypeContainer.querySelectorAll(".checkbox"),i=0;i<checkboxes.length;i++){var input=checkboxes[i];input.checked||types.push(input.getAttribute("id"))}return types},renderAllEvents:function renderAllEvents(isCallback){if(this.settings.onRenderMonth&&!isCallback)return this.callOnRenderMonth(),this;var filters=this.filterEventTypes();this.removeAllEvents(),this.clearUpcomingEvents(),this.clearEventDetails();var eventsSorted=this.settings.events.slice(0);eventsSorted.sort((function(a,b){return a.starts<b.starts?-1:a.starts>b.starts?1:0}));for(var i=0;i<eventsSorted.length;i++){var event=eventsSorted[i];filters.indexOf(event.type)>-1||this.renderEvent(event)}return this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.filteredTypes=filters,this.weekView.renderAllEvents()),this},renderEvent:function renderEvent(event){var startDate=Locale.newDateObj(event.starts),startKey=stringUtils.padDate(startDate.getFullYear(),startDate.getMonth(),startDate.getDate()),endDate=Locale.newDateObj(event.ends),endKey=stringUtils.padDate(endDate.getFullYear(),endDate.getMonth(),endDate.getDate()),days=this.monthView.dayMap.filter((function(day){return day.key>=startKey&&day.key<=endKey}));event.endKey=endKey,event.startKey=startKey,event=calendarShared.addCalculatedFields(event,this.locale,this.language,this.settings.eventTypes);for(var idx=-1,i=0;i<this.monthView.dayMap.length;++i)if(this.monthView.dayMap[i].key>=startKey&&this.monthView.dayMap[i].key<=endKey){idx=i;break}if(1===days.length&&this.appendEvent(days[0].elem[0],event,"event-day-start-end",idx),days.length>1)for(var l=0;l<days.length;l++){var cssClass=0===l?"event-day-start":"event-day-span";days.length-1===l&&(cssClass="event-day-end"),this.appendEvent(days[l].elem[0],event,cssClass,idx+l)}this.appendUpcomingEvent(event,days,idx)},removeAllEvents:function removeAllEvents(){for(var moreEvents=this.monthViewContainer.querySelectorAll(".calendar-event-more"),i=0;i<moreEvents.length;i++)moreEvents[i].parentNode.removeChild(moreEvents[i]);for(var calendarEvents=this.monthViewContainer.querySelectorAll(".calendar-event"),_i=0;_i<calendarEvents.length;_i++)calendarEvents[_i].parentNode.removeChild(calendarEvents[_i]);for(var _i2=0;_i2<this.monthView.dayMap.length;_i2++)this.monthView.dayMap[_i2].events=[]},appendEvent:function appendEvent(container,event,type,idx){var node,_this4=this,eventCnt=container.querySelectorAll(".calendar-event").length;if(idx>-1&&(this.monthView.dayMap[idx].events||(this.monthView.dayMap[idx].events=[]),this.monthView.dayMap[idx].events.push(event)),eventCnt>=2){var moreSpan=container.querySelector(".calendar-event-more"),setMoreSpan=function setMoreSpan(elem,count){elem.setAttribute("data-count",count),elem.innerHTML="<span>+ ".concat(count," ").concat(Locale.translate("More",{locale:_this4.locale.name,language:_this4.language}).replace("...",""),"</span>")};return moreSpan?setMoreSpan(moreSpan,parseInt(moreSpan.getAttribute("data-count"),10)+1):(node=document.createElement("span"),DOM.addClass(node,"calendar-event-more"),setMoreSpan(node,1),container.querySelector(".day-container").appendChild(node),$(container).off("click.".concat("calendar")).on("click.".concat("calendar"),".calendar-event-more span",(function(){var thisDate=_this4.monthView.dayMap[idx].key;_this4.monthView.selectDay(thisDate,!1,!0),_this4.changeView("day")}))),this}if(node=document.createElement("a"),DOM.addClass(node,"calendar-event",event.color,type),node.setAttribute("data-id",event.id),node.setAttribute("data-key",event.startKey),node.innerHTML='<div class="calendar-event-content">\n      '.concat(event.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(event.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(event.status,'"><use href="#').concat(event.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(event.shortSubject||event.subject,"</span>\n    </div>"),container.querySelector(".day-container").appendChild(node),"overflow"!==this.settings.iconTooltip){var icon=node.querySelector(".calendar-event-icon");icon&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({month:this.settings.month,year:this.settings.year,event:event}):event[this.settings.iconTooltip]&&(icon.setAttribute("title",event[this.settings.iconTooltip]),$(icon).tooltip({content:icon.innerText})))}return"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({month:this.settings.month,year:this.settings.year,event:event}):event[this.settings.eventTooltip]&&(node.setAttribute("title",event[this.settings.eventTooltip]),$(node).tooltip({content:node.innerText}))),event.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(node.setAttribute("title",event.subject),$(node).tooltip({beforeShow:function beforeShow(response,ui){var title=ui[0].querySelector(".calendar-event-title"),icon=ui[0].querySelector(".calendar-event-icon"),iconStatus=icon?icon.querySelector(".icon").getAttribute("data-status"):"";title.offsetWidth>ui[0].scrollWidth-(icon?icon.offsetWidth:0)?response("".concat(title.innerText).concat(iconStatus?" (".concat(Locale.translate(iconStatus,{locale:_this4.locale.name,language:_this4.language},!1),")"):"")):response(!1)}})),this},getEventTypeLabel:function getEventTypeLabel(id){var type="";if(!id)return type;var eventInfo=this.settings.eventTypes.filter((function(eventType){return eventType.id===id}));return 1===eventInfo.length&&(type=eventInfo[0].label),type},handleEvents:function handleEvents(){var _this5=this,self=this;this.element.off("updated.".concat("calendar")).on("updated.".concat("calendar"),(function(){_this5.updated()})),this.isSwitchingMonth=!1,this.element.off("monthrendered.".concat("calendar")).on("monthrendered.".concat("calendar"),(function(e,args){_this5.isSwitchingMonth=!0,_this5.modalVisible()&&_this5.removeModal(),_this5.settings.year=args.year,_this5.settings.month=args.month,_this5.renderAllEvents(),setTimeout((function(){_this5.isSwitchingMonth=!1}),500)})),this.element.off("change.".concat("calendar")).on("change.".concat("calendar"),".checkbox",(function(){_this5.renderAllEvents(!0)})),$(this.monthViewContainer).off("selected.".concat("calendar")).on("selected.".concat("calendar"),(function(){_this5.renderSelectedEventDetails()})),this.element.off("click.".concat("calendar","-upcoming")).on("click.".concat("calendar","-upcoming"),".calendar-upcoming-event",(function(e){var key=e.currentTarget.getAttribute("data-key");_this5.renderDay(key)})),this.element.off("contextmenu.".concat("calendar")).on("contextmenu.".concat("calendar"),".calendar-event",(function(e){e.stopPropagation();var hasMenu=function hasMenu(){return self.settings.menuId&&$("#".concat(self.settings.menuId)).length>0},eventId=e.currentTarget.getAttribute("data-id"),eventData=_this5.settings.events.filter((function(event){return event.id===eventId}));if(_this5.element.triggerHandler("contextmenu",{originalEvent:e,month:_this5.settings.month,year:_this5.settings.year,event:eventData[0]}),!self.isSubscribedTo(e,"contextmenu")&&!hasMenu())return!0;if(e.preventDefault(),self.closePrevPopupmenu(),!hasMenu())return!0;var event=$(e.currentTarget);return event.popupmenu({attachToBody:!0,menuId:_this5.settings.menuId,eventObj:e,trigger:"immediate",offset:{y:5}}),event.off("selected.calendar").on("selected.calendar",(function(evt,elem){if(self.settings.menuSelected&&self.settings.menuSelected(evt,elem,eventId),"delete-event"===elem.attr("data-action")&&self.deleteEvent({id:eventId}),"show-event"===elem.attr("data-action")){var key=this.getAttribute("data-key");self.monthView.selectDay(key)}})),!1}));var showModalWithCallback=function showModalWithCallback(eventData,isAdd,eventTarget){_this5.showEventModal(eventData,(function(elem,event){for(var inputs=elem.querySelectorAll("input, textarea, select"),i=0;i<inputs.length;i++)event[inputs[i].id]="checkbox"===inputs[i].getAttribute("type")?inputs[i].checked:inputs[i].value;isAdd?_this5.addEvent(event):_this5.updateEvent(event)}),eventTarget)},timer=0,prevent=!1;return this.element.off("click.".concat("calendar","-event")).on("click.".concat("calendar","-event"),".calendar-event",(function(e){timer=setTimeout((function(){if(!prevent){var eventId=e.currentTarget.getAttribute("data-id"),eventData=_this5.settings.events.filter((function(event){return event.id===eventId}));if(!eventData||0===eventData.length)return;var target=$(e.currentTarget),eventTarget=target.find(".calendar-event-title");(e.currentTarget.classList.contains("event-day-span")||e.currentTarget.classList.contains("event-day-end"))&&(eventTarget=self.element.find('.event-day-start[data-id="'.concat(target.attr("data-id"),'"] .calendar-event-title'))),showModalWithCallback(eventData[0],!1,eventTarget),_this5.element.triggerHandler("eventclick",{month:_this5.settings.month,year:_this5.settings.year,event:eventData[0]})}prevent=!1}),100)})),this.element.off("dblclick.".concat("calendar","-event")).on("dblclick.".concat("calendar","-event"),".calendar-event",(function(e){clearTimeout(timer),prevent=!0;var eventId=e.currentTarget.getAttribute("data-id"),eventData=_this5.settings.events.filter((function(event){return event.id===eventId}));eventData&&0!==eventData.length&&_this5.element.trigger("eventdblclick",{month:_this5.settings.month,year:_this5.settings.year,event:eventData[0]})})),this.element.off("dblclick.".concat("calendar")).on("dblclick.".concat("calendar"),"td",(function(e){var key=e.currentTarget.getAttribute("data-key");if(key&&!_this5.isSwitchingMonth){var day=new Date(key.substr(0,4),key.substr(4,2)-1,key.substr(6,2)),eventData=utils.extend({},_this5.settings.newEventDefaults);eventData.startKey=key,eventData.endKey=key,eventData.starts=day,eventData.ends=day,e.stopPropagation(),calendarShared.cleanEventData(eventData,!1,_this5.currentDate(),_this5.locale,_this5.language,_this5.settings.events,_this5.settings.eventTypes),showModalWithCallback(eventData,!0),_this5.element.triggerHandler("dblclick",{eventData:eventData,api:_this5})}})),this},isSubscribedTo:function isSubscribedTo(e,eventName){var calendarEvents=$._data(this.element[0]).events;for(var event in calendarEvents)if(event===eventName&&(1!==calendarEvents[event].length||"calendar"!==calendarEvents[event][0].namespace))return!0;return!1},closePrevPopupmenu:function closePrevPopupmenu(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach((function(node){var elem=$(node);elem.data("popupmenu")&&elem.trigger("close")}))},callOnRenderMonth:function callOnRenderMonth(){var self=this;this.settings.onRenderMonth(this.element,(function response(events,eventTypes){eventTypes&&eventTypes.length>0&&(self.settings.eventTypes=eventTypes,self.weekView&&(self.weekView.settings.eventTypes=eventTypes),self.renderEventTypes()),events&&events.length>0&&(self.settings.events=events,self.renderAllEvents(!0),self.weekView&&(self.weekView.settings.events=events,self.weekView.renderAllEvents(!0)))}),{api:self,month:this.settings.month,year:this.settings.year})},currentDate:function currentDate(){var ret=this.isIslamic?this.monthView.currentIslamicDate:this.monthView.currentDate;return Locale.isValidDate(ret)?ret:new Date},getDayEvents:function getDayEvents(date){date||(date=this.currentDate()),"string"==typeof date||this.isRTL||(date=stringUtils.padDate(date.getFullYear(),date.getMonth(),date.getDate())),this.isRTL&&(date=stringUtils.padDate(date[0],date[1],date[2]));var dayObj=this.monthView.dayMap.filter((function(dayFilter){return dayFilter.key===date}));"month"!==this.activeView&&(dayObj=this.weekView.dayMap.filter((function(dayFilter){return dayFilter.key===date})));var dayEvents={date:this.monthView.currentDate,events:[]};return 0===dayObj.length?[]:(dayEvents.events=dayObj[0].events,dayEvents.elem=dayObj[0].elem,dayEvents)},renderTmpl:function renderTmpl(event,template,container,append){if("object"===_typeof(Tmpl)&&template){template instanceof $?template="".concat(template.html()):"string"==typeof template&&(stringUtils.containsHTML(template)||(template=$("#".concat(template)).html())),event.color=calendarShared.getEventTypeColor(event.type,this.settings.eventTypes),event.startsLong=Locale.formatDate(event.starts,{date:"long",locale:this.locale.name}),event.endsLong=Locale.formatDate(event.ends,{date:"long",locale:this.locale.name}),event.startsHoursLong="".concat(Locale.formatDate(event.starts,{date:"long",locale:this.locale.name})," ").concat(Locale.formatDate(event.starts,{date:"hour",locale:this.locale.name})),event.endsHoursLong="".concat(Locale.formatDate(event.ends,{date:"long",locale:this.locale.name})," ").concat(Locale.formatDate(event.ends,{date:"hour",locale:this.locale.name})),event.typeLabel=this.getEventTypeLabel(event.type);var renderedTmpl=Tmpl.compile(template,{event:event});container.classList.remove("has-only-one"),append?DOM.append(container,renderedTmpl,"*"):(container.innerHTML=renderedTmpl,container.classList.add("has-only-one"))}},addEvent:function addEvent(event){calendarShared.cleanEventData(event,!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(event),this.renderEvent(event),this.renderSelectedEventDetails(),this.weekView&&this.weekView.addEvent(event)},updateEvent:function updateEvent(event){for(var eventId=event.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===eventId&&(this.settings.events[i]=utils.extend(!0,this.settings.events[i],event),calendarShared.cleanEventData(this.settings.events[i],!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents(),this.weekView&&this.weekView.updateEvent(event)},deleteEvent:function deleteEvent(event){for(var eventId=event.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===eventId&&this.settings.events.splice(i,1);this.renderAllEvents(),this.weekView&&this.weekView.deleteEvent(event)},clearEvents:function clearEvents(){this.settings.events=[],this.renderAllEvents(),this.weekView&&this.weekView.clearEvents()},showEventModal:function showEventModal(event,done,eventTarget){var _this6=this;if(this.settings.modalTemplate){this.modalVisible()&&this.removeModal(),this.modalContents=document.createElement("div"),DOM.addClass(this.modalContents,"calendar-event-modal","hidden"),document.getElementsByTagName("body")[0].appendChild(this.modalContents),event=calendarShared.addCalculatedFields(event,this.locale,this.language,this.settings.eventTypes),this.renderTmpl(event||{},this.settings.modalTemplate,this.modalContents);var dayObj=this.getDayEvents(),isCancel=!0;dayObj.elem=$(dayObj.elem);var placementArgs=6===dayObj.elem.index()?this.isRTL?"right":"left":this.isRTL?"left":"right";eventTarget||"day"!==this.activeView||(eventTarget=$(".week-view-header-wrapper"),placementArgs=this.isRTL?"left":"right"),eventTarget||(eventTarget=dayObj.elem);var modalOptions=this.settings.modalOptions||{content:$(this.modalContents),closebutton:!0,popover:!0,placementOpts:{parent:eventTarget,strategies:["flip","nudge","shrink-y"],parentXAlignment:"center",parentYAlignment:"center",placement:placementArgs},title:event.title||event.subject,trigger:"immediate",keepOpen:!0,extraClass:"calendar-popup",tooltipElement:"#calendar-popup",headerClass:event.color,initializeContent:!1};eventTarget.off("hide.calendar").on("hide.calendar",(function(){isCancel?_this6.removeModal():(done(_this6.modalContents,event),_this6.element.trigger("hidemodal",{elem:_this6.modalContents,event:event}),_this6.removeModal(),isCancel=!0)})).popover(modalOptions).off("show.calendar").on("show.calendar",(function(evt,elem){_this6.element.trigger("showmodal",{elem:_this6.modalContents,event:event}),elem.find("#isAllDay").off().on("click.calendar",(function(e){$(e.currentTarget).prop("checked")?(elem.find("#durationHours").prop("disabled",!0),elem.find("#endsHourLocale").prop("disabled",!0),elem.find("#startsHourLocale").prop("disabled",!0)):(elem.find("#durationHours").prop("disabled",!1),elem.find("#endsHourLocale").prop("disabled",!1),elem.find("#startsHourLocale").prop("disabled",!1))})),elem.find("#type").val(event.type).dropdown(),elem.find("#comments").val(event.comments),elem.find("#subject").focus(),elem.find("button").on("click",(function(e){var popupApi=eventTarget.data("tooltip"),action=e.currentTarget.getAttribute("data-action");isCancel="submit"!==action,popupApi&&popupApi.hide(!0)})),elem.find(".datepicker").datepicker({locale:_this6.settings.locale,language:_this6.settings.language}),elem.find(".timepicker").timepicker({locale:_this6.settings.locale,language:_this6.settings.language}),elem.find('[data-translate="text"]').each((function(i,item){var obj=$(item);obj.text(Locale.translate(obj.attr("data-translate-key")||obj.text(),{showAsUndefined:!1,showBrackets:!1,language:_this6.settings.language,locale:_this6.settings.locale}))}))})),$("#calendar-popup").one("tooltipafterplace.calendar",(function(e,args){var arrow=args.element.find(".arrow"),topValue=parseInt(arrow.css("margin-top"),10);if(dayObj.elem.parent().index()>=3){var offsetTop=parseInt(args.element.offset().top,10),diff=offsetTop+args.element.height(),height=$("html").height()+10;if(diff>height){var adjustment=offsetTop-(diff-height)-25;args.element.css("top","".concat(adjustment,"px")),arrow.css("margin-top","".concat(topValue+(offsetTop-adjustment)-18,"px"))}}else args.element.height()>580&&arrow.css("margin-top","".concat(topValue-18,"px"))})),this.activeElem=eventTarget}},modalVisible:function modalVisible(){return null!==document.querySelector(".calendar-event-modal")},removeModal:function removeModal(){this.modalContents=null,this.activeElem&&(this.activeElem.off(),this.activeElem.data("tooltip")&&this.activeElem.data("tooltip").destroy()),DOM.remove(document.getElementById("calendar-popup")),DOM.remove(document.querySelector(".calendar-event-modal")),$("#timepicker-popup").hide()},updated:function updated(){var settings=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return settings||(settings={}),settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),settings.locale||settings.template||settings.upcomingEventDays?(this.destroy().init(),this):(this.weekView&&settings.events&&(this.weekView.settings.events=settings.events),this.weekView&&settings.eventTypes&&(this.weekView.settings.events=settings.events),this.weekView&&settings.weekViewSettings&&(this.weekView.settings=utils.mergeSettings(this.element[0],settings.weekViewSettings,this.weekViews.settings)),this.monthView.showMonth(this.settings.month,this.settings.year),this.renderAllEvents(),this.weekView&&settings.weekViewSettings&&this.weekView.renderAllEvents(),this)},teardown:function teardown(){return this.element.off(),$(this.monthViewContainer).off(),this.monthView&&this.monthView.destroy(),this.weekView&&this.weekView.destroy(),this},destroy:function destroy(){return this.eventTypeContainer&&(this.eventTypeContainer.innerHTML=""),this.monthViewContainer&&(this.monthViewContainer.innerHTML=""),this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML=""),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.removeModal(),this.teardown(),$.removeData(this.element[0],"calendar"),this}},$.fn.calendar=function(settings){return this.each((function(){var instance=$.data(this,"calendar");instance?instance.updated(settings):instance=$.data(this,"calendar",new Calendar(this,settings))}))};var CIRCLEPAGER_DEFAULTS={slidesToShow:1,startingSlide:null,loop:!1};function CirclePager(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,CIRCLEPAGER_DEFAULTS),this.init()}CirclePager.prototype={init:function init(){this.setElements(),this.slides.length&&(this.createControls(),this.handleEvents(),this.initActiveSlide(),this.showCollapsedView())},setElements:function setElements(){var s=this.settings;this.container=$(".slides",this.element),this.slidesJQ=$(".slide",this.element),this.slidesToShow=s.slidesToShow,this.slides=[],this.isVisible=!0;for(var i=0,l=this.slidesJQ.length;i<l;i++)this.slides.push({node:$(this.slidesJQ[i])});this.activeIndex=null!==s.startingSlide&&s.startingSlide>-1&&s.startingSlide<this.slides.length?s.startingSlide:0},createControls:function createControls(){for(var slide,temp,href,text,buttonText,last,lastIndex,isSingle,isDisabled,len=this.slides.length,html='<div class="controls">',htmlContent="",numOfButtons=0,i=0,l=len;i<l;i+=this.slidesToShow){temp="",numOfButtons++,isSingle=1===this.slidesToShow||len-i==1,text=Locale.translate(isSingle?"SlideOf":"SlidesOf"),href=isSingle?"#slide {0} of {1}":"#slides {0} and {1} of {2}";for(var g=0;g<this.slidesToShow&&i+g<len;g++)temp+="".concat(i+g+1,", ");text=text.replace(isSingle?"{1}":"{2}",len),href=href.replace(isSingle?"{1}":"{2}",len),lastIndex=(temp=temp.slice(0,-2)).lastIndexOf(","),last=temp.substr(lastIndex+2),isSingle?(isDisabled="",(slide=this.slides[i].node).is(".is-disabled, [disabled]")&&!slide.is('[disabled="false"]')&&(isDisabled=' disabled tabindex="-1"',this.slides[i].isDisabled=!0),slide.is(".active")&&null===this.settings.startingSlide&&""===isDisabled&&(this.activeIndex=i),text=(buttonText=slide.attr("data-button-text"))&&buttonText.length?buttonText:text.replace("{0}",temp),href=href.replace("{0}",temp)):(temp=temp.substr(0,lastIndex),text=text.replace("{1}",last).replace("{0}",temp),href=href.replace("{1}",last).replace("{0}",temp)),href=href.toLowerCase().replace(/[\s,--]+/g,"-"),htmlContent+='<a href="'.concat(href,'" class="control-button hyperlink hide-focus"').concat(isDisabled,'><span class="audible">').concat(text,"</span></a>")}html+="".concat(htmlContent,"</div>"),this.isBulletsNav=this.element.width()>29*numOfButtons;var previousButton=$(".btn-previous",this.element),nextButton=$(".btn-next",this.element);this.isBulletsNav?previousButton.add(nextButton).remove():(previousButton.length||(html+=""+'<button class="btn-previous" type="button">\n            '.concat($.createIcon("left-arrow"),'\n            <span class="audible"> ').concat(Locale.translate("Previous"),"</span>\n          </button>")),nextButton.length||(html+=""+'<button class="btn-next" type="button">\n            '.concat($.createIcon("right-arrow"),'\n            <span class="audible">').concat(Locale.translate("Next"),"</span>\n          </button>"))),this.activeIndex>0&&this.activeIndex>numOfButtons-1&&(this.activeIndex=numOfButtons-1),numOfButtons>1&&this.element.append(html)},isVisibleInContainer:function isVisibleInContainer(element){if(element&&element[0]){var eRect=element[0].getBoundingClientRect(),cRect=this.element[0].getBoundingClientRect();return eRect.left>cRect.left&&eRect.left<cRect.left+cRect.width&&eRect.top>cRect.top&&eRect.top<cRect.top+cRect.height}return-1},updateSlidesToShow:function updateSlidesToShow(numOfSlides){if(this.isActive)return this.settings.slidesToShow=numOfSlides||1,this.updated(),this},responsiveSlidesToShow:function responsiveSlidesToShow(numOfSlides){var _this=this;this.isActive&&(this.slidesToShow=numOfSlides||this.settings.slidesToShow,this.unbind().slidesJQ.css("width",""),this.slides.length&&setTimeout((function(){_this.createControls(),_this.handleEvents(),_this.initActiveSlide(),_this.showCollapsedView()}),0))},show:function show(index){if(this.isActive){index=void 0!==index?index:this.activeIndex,this.activeIndex=index;var left=index>0?"".concat((Locale.isRTL()?"":"-")+100*index,"%"):0;this.controlButtons.removeClass("is-active").eq(index).addClass("is-active"),this.container[0].style.left=left,this.isBulletsNav?(this.element.removeClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible")):(this.element.addClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible").end().eq(index).find("span").removeClass("audible")),this.isFocus&&this.isBulletsNav&&(this.isFocus=!1,this.controlButtons.eq(index).focus())}},first:function first(){this.show(0)},last:function last(){this.show(Math.round(this.slides.length/this.slidesToShow)-1)},prev:function prev(){var prev,_this2=this;if(prev=this.activeIndex>0?this.activeIndex-1:this.settings.loop?Math.round(this.slides.length/this.slidesToShow)-1:0,this.slides[prev].isDisabled)return setTimeout((function(){_this2.prev()}),0),this.activeIndex=prev,!1;this.show(prev)},next:function next(){var next,_this3=this;if(next=this.activeIndex>=Math.round(this.slides.length/this.slidesToShow)-1?this.settings.loop?0:this.activeIndex:this.activeIndex+1,this.slides[next].isDisabled)return setTimeout((function(){_this3.next()}),0),this.activeIndex=next,!1;this.show(next)},showCollapsedView:function showCollapsedView(){if(this.isActive=!0,this.element.addClass("is-active"),this.container[0].style.width="".concat(100*this.slides.length,"%"),this.settings.slidesToShow>1&&this.slidesJQ.eq(0).width()*this.slidesToShow>this.element.width())this.responsiveSlidesToShow(this.slidesToShow-1);else{for(var i=0,l=this.slidesJQ.length;i<l;i++)this.slidesJQ[i].style.width="".concat(100/this.slidesToShow/this.slides.length,"%");this.show()}},showExpandedView:function showExpandedView(){this.isActive=!1,this.element.removeClass("is-active"),this.element&&this.element[0]&&(this.element[0].style.width=""),this.container&&this.container[0]&&(this.container[0].style.width="",this.container[0].style.left="")},initActiveSlide:function initActiveSlide(){if(this.slides[this.activeIndex].isDisabled)return this.next(),!1;this.show(),this.slidesJQ.addClass("is-visible")},unbind:function unbind(){return $("body").off("resize.circlepager"),this.element.off("focus.circlepager keydown.circlepager","*"),this.controlButtons&&this.controlButtons.off("click.circlepager keydown.circlepager"),$(".btn-previous, .btn-next",this.element).off("click.circlepager"),$(".controls",this.element).remove(),this.showExpandedView(),this.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager"),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,CIRCLEPAGER_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"circlepager")},handleEvents:function handleEvents(){var _this4=this,self=this;$(".btn-previous",this.element).on("click.circlepager",(function(e){_this4.prev(),e.stopImmediatePropagation()})),$(".btn-next",this.element).on("click.circlepager",(function(e){_this4.next(),e.stopImmediatePropagation()})),this.controlButtons=$(".control-button",this.element);for(var _loop=function _loop(i,l){var btn=$(_this4.controlButtons[i]);btn.hideFocus(),btn.on("click.circlepager",(function(e){e.preventDefault(),_this4.slides[i].isDisabled||_this4.show(i)}))},i=0,l=this.controlButtons.length;i<l;i++)_loop(i);this.element.on("focus.circlepager","*",(function(e){var handled=!1;if(!self.isVisibleInContainer($(this)))for(var canfocus=self.element.find(":focusable"),_i=0,_l=canfocus.length;_i<_l;_i++)if(self.isVisibleInContainer(canfocus.eq(_i))){canfocus.eq(_i).focus(),handled=!0;break}if(e.stopPropagation(),handled)return!1})),this.element.on("keydown.circlepager","*",(function(e){var handled=!1,key=e.which||e.keyCode||e.charCode||0,canfocus=$(":focusable"),index=canfocus.index(this);if(9===key)if(e.shiftKey){for(var _i2=index-1;_i2>=0;_i2--)if(self.element.has(canfocus.eq(_i2)).length<1||self.isVisibleInContainer(canfocus.eq(_i2))){canfocus.eq(_i2).focus(),handled=!0;break}}else self.isVisibleInContainer(canfocus.eq(index+1))||(self.controlButtons.first().focus(),handled=!0);if(e.stopPropagation(),handled)return!1})),this.controlButtons.on("keydown.circlepager",(function(e){var handled=!1,key=e.which||e.keyCode||e.charCode||0,isRTL=Locale.isRTL();if(-1!==[37,39].indexOf(key)&&(self.isFocus=!0,e.altKey?37===key&&!isRTL||39===key&&isRTL?self.first():self.last():(!isRTL&&37===key||isRTL&&39===key?self.prev():self.next(),handled=!0)),handled)return e.preventDefault(),e.stopPropagation(),!1})),$("body").on("resize.circlepager",(function(){self.responsiveSlidesToShow()})),self.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager").on("activated.circlepager",(function(){self.responsiveSlidesToShow()}))}},$.fn.circlepager=function(settings){return this.each((function(){var instance=$.data(this,"circlepager");instance?instance.updated(settings):instance=$.data(this,"circlepager",new CirclePager(this,settings))}))},$.fn.calendartoolbar=function(settings){return this.each((function(){var instance=$.data(this,"calendartoolbar");instance?instance.updated(settings):instance=$.data(this,"calendartoolbar",new CalendarToolbar(this,settings))}))};var COLORPICKER_DEFAULTS={themes:{light:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},dark:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},contrast:{border:"all",checkmark:{one:[1,3],two:[4,10]}}},customColors:!1,colors:[{label:"Slate",number:"10",value:"1a1a1a"},{label:"Slate",number:"09",value:"292929"},{label:"Slate",number:"08",value:"383838",border:"dark"},{label:"Slate",number:"07",value:"454545",border:"dark"},{label:"Slate",number:"06",value:"5C5C5C"},{label:"Slate",number:"05",value:"737373"},{label:"Slate",number:"04",value:"999999"},{label:"Slate",number:"03",value:"BDBDBD"},{label:"Slate",number:"02",value:"D8D8D8"},{label:"Slate",number:"01",value:"F0F0F0",border:"light, contrast"},{label:"Amber",number:"10",value:"D66221"},{label:"Amber",number:"09",value:"DE7223"},{label:"Amber",number:"08",value:"E68425"},{label:"Amber",number:"07",value:"EB9728"},{label:"Amber",number:"06",value:"EFAA30"},{label:"Amber",number:"05",value:"F2BC41"},{label:"Amber",number:"04",value:"F4C951"},{label:"Amber",number:"03",value:"F7D475"},{label:"Amber",number:"02",value:"F8E09C"},{label:"Amber",number:"01",value:"FBE9BF"},{label:"Ruby",number:"10",value:"880E0E"},{label:"Ruby",number:"09",value:"941E1E"},{label:"Ruby",number:"08",value:"A13030"},{label:"Ruby",number:"07",value:"AD4242"},{label:"Ruby",number:"06",value:"B94E4E"},{label:"Ruby",number:"05",value:"C65F5F"},{label:"Ruby",number:"04",value:"D26D6D"},{label:"Ruby",number:"03",value:"DE8181"},{label:"Ruby",number:"02",value:"EB9D9D"},{label:"Ruby",number:"01",value:"F4BCBC"},{label:"Turquoise",number:"10",value:"0E5B52"},{label:"Turquoise",number:"09",value:"206B62"},{label:"Turquoise",number:"08",value:"317C73"},{label:"Turquoise",number:"07",value:"448D83"},{label:"Turquoise",number:"06",value:"579E95"},{label:"Turquoise",number:"05",value:"69ADA3"},{label:"Turquoise",number:"04",value:"7BBFB5"},{label:"Turquoise",number:"03",value:"8ED1C6"},{label:"Turquoise",number:"02",value:"A9E1D6"},{label:"Turquoise",number:"01",value:"C0EDE3"},{label:"Emerald",number:"10",value:"397514"},{label:"Emerald",number:"09",value:"44831F"},{label:"Emerald",number:"08",value:"56932E"},{label:"Emerald",number:"07",value:"66A140"},{label:"Emerald",number:"06",value:"76B051"},{label:"Emerald",number:"05",value:"89BF65"},{label:"Emerald",number:"04",value:"9CCE7C"},{label:"Emerald",number:"03",value:"AFDC91"},{label:"Emerald",number:"02",value:"C3E8AC"},{label:"Emerald",number:"01",value:"D5F6C0"},{label:"Amethyst",number:"10",value:"4B2A5E"},{label:"Amethyst",number:"09",value:"5A3A6F"},{label:"Amethyst",number:"08",value:"6C4B81"},{label:"Amethyst",number:"07",value:"7D5F92"},{label:"Amethyst",number:"06",value:"8E72A4"},{label:"Amethyst",number:"05",value:"A189B8"},{label:"Amethyst",number:"04",value:"B59ECA"},{label:"Amethyst",number:"03",value:"C7B4DB"},{label:"Amethyst",number:"02",value:"DACCEC"},{label:"Amethyst",number:"01",value:"EDE3FC"},{label:"Azure",number:"10",value:"133C59"},{label:"Azure",number:"09",value:"134D71"},{label:"Azure",number:"08",value:"1D5F8A"},{label:"Azure",number:"07",value:"2876A8"},{label:"Azure",number:"06",value:"2578A9"},{label:"Azure",number:"05",value:"4EA0D1"},{label:"Azure",number:"04",value:"69B5DD"},{label:"Azure",number:"03",value:"8DC9E6"},{label:"Azure",number:"02",value:"ADD8EB"},{label:"Azure",number:"01",value:"C8E9F4"}],placeIn:null,showLabel:!1,editable:!0,disabled:!1,uppercase:!0,colorOnly:!1,clearable:!0,clearableText:null,popupmenuSettings:{}};function ColorPicker(element,settings){this.settings=utils.mergeSettings(element,settings,COLORPICKER_DEFAULTS),settings&&settings.colors&&(this.settings.colors=settings.colors),this.element=$(element),this.init()}ColorPicker.prototype={init:function init(){this.isIe="ie"===Environment.browser.name,this.isIeEdge="edge"===Environment.browser.name,this.isIe11=this.isIe&&"11"===Environment.browser.version,this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.settings.clearableText||(this.settings.clearableText=Locale?Locale.translate("None"):"None"),this.build(),this.handleEvents(),this.setCustomWidth()},build:function build(){this.isEditor="editor"===this.settings.placeIn;var colorpicker=this.element,initialValue=this.isEditor?this.element.attr("data-value"):this.element.val(),classList="swatch".concat(initialValue&&""!==$.trim(initialValue)?"":" is-empty");if(!this.isEditor)if(this.isInlineLabel?this.inlineLabel.addClass("colorpicker-container"):(this.container=$('<span class="colorpicker-container"></span>'),colorpicker.wrap(this.container)),this.container=colorpicker.parent(),this.swatch=$('<span class="'.concat(classList,'"></span>')).prependTo(this.container),this.settings.showLabel){var maskAPI=colorpicker.data("mask");maskAPI&&"function"==typeof maskAPI.destroy&&maskAPI.destroy()}else{colorpicker.mask({pattern:["#",/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/]})}var trigger=this.element.children(".trigger");this.container&&this.container.length&&(trigger=this.container.children(".trigger")),trigger&&trigger.length&&trigger.children(".icon").length||(this.icon=$.createIconElement("dropdown").appendTo(this.isEditor?this.element:this.container),this.icon.wrap('<span class="trigger"></span>')),initialValue&&this.setColor(initialValue),(this.element.is(":disabled")||this.settings.disabled)&&this.disable(),this.element.prop("readonly")&&this.readonly(),this.settings.editable||this.settings.disabled||this.readonly(),this.settings.colorOnly&&this.element.parent().addClass("color-only"),this.element.attr("autocomplete","off"),this.addAria()},getHexFromLabel:function getHexFromLabel(label){for(var i=0;i<this.settings.colors.length;i++){var data=this.settings.colors[i],translated=Locale.translate(data.label,!0);if(label===data.label+data.number||label===translated+data.number){var hex=data.value;return"#"!==hex.substr(0,1)&&(hex="#".concat(hex)),hex}}return""},getLabelFromHex:function getLabelFromHex(hex){if(!hex)return"";for(var i=0;i<this.settings.colors.length;i++){var data=this.settings.colors[i];if(hex.replace("#","")===data.value.replace("#",""))return this.translateColorLabel(data.label)+data.number}return""},setCustomWidth:function setCustomWidth(){if(this.element[0].style&&this.element[0].style.width){var w=parseInt(this.element[0].style.width,10);this.container.css({width:w}),this.element.css({width:w-4-this.swatch.width()})}},getHexValue:function getHexValue(){return this.element.attr("value")},getLabelValue:function getLabelValue(){return this.settings.showLabel?this.element.val():this.getLabelFromHex(this.element.val())},addAria:function addAria(){this.element.attr({role:"combobox","aria-autocomplete":"list"}),$('label[for="'.concat(this.element.attr("id"),'"]')).append('<span class="audible">'.concat(Locale.translate("UseArrow"),"</span>"))},toggleList:function toggleList(){var _this=this,menu=$("#colorpicker-menu");if(!(this.element.is(":disabled")||this.element.prop("readonly")&&this.settings.editable||menu.length&&this.isPickerOpen)){menu=this.updateColorMenu();var popupmenuOpts=utils.extend({},{ariaListbox:!0,menuId:"colorpicker-menu",trigger:"immediate",attachToBody:!0,placementOpts:{containerOffsetX:10,containerOffsetY:10,parentXAlignment:Locale.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},offset:{x:0,y:10}},this.settings.popupmenuSettings);this.element.popupmenu(popupmenuOpts).on("open.colorpicker",(function(){_this.element.parent().addClass("is-open"),_this.isPickerOpen=!0})).on("close.colorpicker",(function(){[].slice.call(_this.menu[0].querySelectorAll("a")).forEach((function(link){var tooltipApi=$(link).data("tooltip");tooltipApi&&tooltipApi.hide()})),menu.on("destroy.colorpicker",(function(){_this.element.off("open.colorpicker selected.colorpicker close.colorpicker"),_this.menu.off("destroy.colorpicker").remove()})),_this.element.parent().removeClass("is-open"),_this.isPickerOpen=!1,_this.element.trigger("listclosed","select")})).on("selected.colorpicker",(function(e,item){_this.isEditor||_this.setColor(item.data("value"),item.data("label")),_this.element.focus(),_this.element.trigger("change")})),this.menu=$("#colorpicker-menu"),setTimeout((function(){_this.menu.find(".is-selected").focus()}),1)}},setColor:function setColor(hex,label){hex=hex||"";var s=this.settings,colorHex=hex,colorLabel=label;"#"!==hex.substr(0,1)&&""!==hex&&(colorHex="#".concat(colorHex));var isValidHex=/(^#[0-9a-fA-F]{6}$)|(^#[0-9a-fA-F]{3}$)/i.test(colorHex);if(s.showLabel&&label===s.clearableText)this.setValueOnField({hex:colorHex,label:s.clearableText,isEmpty:!0});else{if(!isValidHex){if(!s.showLabel)return colorHex="#"!==colorHex?colorHex:"",void this.setValueOnField({hex:colorHex,invalid:!0});colorLabel=hex.replace("#",""),colorHex=this.getHexFromLabel(colorLabel)}colorLabel||(colorLabel=this.getLabelFromHex(colorHex)),this.setValueOnField({hex:colorHex,label:colorLabel})}},setValueOnField:function setValueOnField(o){var s=this.settings,targetAttr=this.isEditor?"data-value":"value",hex="";o.isEmpty||"string"!=typeof o.hex||(hex=s.uppercase?o.hex.toUpperCase():o.hex.toLowerCase()),this.swatch&&(o.isEmpty||o.invalid?(this.swatch.addClass(o.isEmpty?"is-empty":"is-invalid"),this.swatch[0].style.backgroundColor=""):(this.swatch.removeClass("is-empty is-invalid"),this.swatch[0].style.backgroundColor=hex)),this.element[0].value=s.showLabel?o.label:hex,this.element[0].setAttribute(targetAttr,hex),this.element[0].setAttribute("aria-describedby",o.label||"")},translateColorLabel:function translateColorLabel(colorText){return colorText?"string"==typeof Locale.translate(colorText,!0)?Locale.translate(colorText,!0):colorText:""},getThemeVariant:function getThemeVariant(activeTheme){var res=Object.keys(COLORPICKER_DEFAULTS.themes).filter((function(legacyTheme){return activeTheme.indexOf(legacyTheme)>-1})),variant="light";return res.length>0&&(variant=res[0]),variant},updateColorMenu:function updateColorMenu(){for(var _this2=this,s=this.settings,isMenu=!!$("#colorpicker-menu").length,menu=$('<ul id="colorpicker-menu" class="popupmenu colorpicker"></ul>'),activeTheme=personalization.currentTheme,themeVariant=this.getThemeVariant(activeTheme),isBorderAll="all"===s.themes[themeVariant].border,checkThemes=s.themes[themeVariant].checkmark,checkmarkClass="",_loop=function _loop(i,l){var li=$("<li></li>"),a=$('<a href="#"><span class="swatch"></span></a>').appendTo(li),colorText=(_this2.translateColorLabel(s.colors[i].label)||s.colors[i].label)+(s.colors[i].number||""),colorNum=parseInt(s.colors[i].number,10),regexp=new RegExp("\\b".concat(activeTheme,"\\b")),colorValue=s.colors[i].value,isBorder=!1,elemValue=_this2.isEditor?_this2.element.attr("data-value"):_this2.element.val();s.showLabel&&!_this2.isEditor&&(elemValue=_this2.getHexFromLabel(elemValue)),(isBorderAll||regexp.test(s.colors[i].border))&&(isBorder=!0),elemValue&&"".concat(elemValue).toLowerCase().replace("#","")==="".concat(colorValue).toLowerCase()&&(checkThemes&&$.each(checkThemes,(function(k,v){colorNum>=v[0]&&colorNum<=v[1]&&(checkmarkClass=" checkmark-".concat(k))})),a.addClass("is-selected".concat(checkmarkClass))),colorValue=s.uppercase?colorValue.toUpperCase():colorValue.toLowerCase();var swatch=a.find(".swatch");swatch[0]&&(swatch[0].style.backgroundColor="#".concat(colorValue)),swatch.addClass(isBorder?"is-border":""),a.data("label",colorText).data("value",colorValue).attr("title","".concat(colorText," #").concat(colorValue)).tooltip(),isMenu||menu.append(li)},i=0,l=s.colors.length;i<l;i++)_loop(i);if(!isMenu){if(s.clearable){var li=$("<li></li>"),resetColorValue="foreColor"===this.element.attr("data-action")?"000000":"";$('<a href="#" title="'.concat(s.clearableText,'"><span class="swatch is-empty').concat(isBorderAll?" is-border":"",'"></span></a>')).appendTo(li).data("label",s.clearableText).data("value",resetColorValue).tooltip(),menu.append(li)}$("body").append(menu)}return menu},enable:function enable(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.element.parent().removeClass("is-disabled is-readonly")},disable:function disable(){this.element.prop("disabled",!0),this.settings.placeIn||this.element.parent().addClass("is-disabled")},readonly:function readonly(){this.enable(),this.element.prop("readonly",!0),this.element.parent().addClass("is-readonly"),this.settings.editable||this.element.parent().addClass("is-not-editable")},isDisabled:function isDisabled(){return this.element.prop("disabled")},decimal2rgb:function decimal2rgb(n){return"number"!=typeof n?n:"rgb(".concat(255&n,", ").concat((65280&n)>>8,", ").concat((16711680&n)>>16,")")},rgb2hex:function rgb2hex(rgb){if(!rgb||-1===rgb.search("rgb"))return rgb;if("rgba(0, 0, 0, 0)"===rgb)return"transparent";var hex=function hex(x){return"0".concat(parseInt(x,10).toString(16)).slice(-2)},newRgb=rgb.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);return"#".concat(hex(newRgb[1])).concat(hex(newRgb[2])).concat(hex(newRgb[3]))},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),this.teardown(),this.init()},teardown:function teardown(){this.element.off(["keypress.".concat("colorpicker"),"keyup.".concat("colorpicker"),"blur.".concat("colorpicker"),"openlist.".concat("colorpicker"),"change.".concat("colorpicker"),"paste.".concat("colorpicker")].join(" ")),this.swatch&&this.swatch.length&&(this.swatch.off("click.".concat("colorpicker")),this.swatch.remove(),delete this.swatch);var maskAPI=this.element.data("mask");if(maskAPI&&maskAPI.destroy(),this.icon&&this.icon.length){var trigger=this.icon.parent(".trigger");this.icon.off().remove(),trigger.off().remove(),delete this.icon}this.container&&this.container.length&&(this.container.find(".trigger").remove(),this.element.unwrap(),delete this.container)},destroy:function destroy(){return this.teardown(),$.removeData(this.element[0],"colorpicker"),this},handleEvents:function handleEvents(){var originalVal,_this3=this,elem=this.element,elemParent=elem.parent();this.icon.parent().on("click.colorpicker",(function(){_this3.toggleList()})),elem.on("focus.colorpicker",(function(){originalVal=elem.val(),elemParent.addClass("is-focused")})).on("blur.colorpicker",(function(){elemParent.removeClass("is-focused"),_this3.isIeEdge&&!elem.is(".is-open")&&originalVal!==elem.val()&&elem.triggerHandler("change")})).on("openlist.colorpicker",(function(){_this3.toggleList()}));var eventStr="blur.colorpicker paste.colorpicker change.colorpicker";eventStr+=this.isIe11?"keypress.colorpicker":"keyup.colorpicker",elem.on(eventStr,(function(){var val=_this3.isEditor?elem.attr("data-value"):elem.val();_this3.settings.showLabel?_this3.setColor(elem.attr("value"),val):_this3.setColor(val)})),elem.on("keydown.colorpicker",(function(e){38!==e.keyCode&&40!==e.keyCode||_this3.toggleList(),13===e.keyCode&&_this3.setColor(elem.val())}))}},$.fn.colorpicker=function(settings){return this.each((function(){var instance=$.data(this,"colorpicker");instance?instance.updated(settings):instance=$.data(this,"colorpicker",new ColorPicker(this,settings))}))};var EXPANDABLEAREA_DEFAULTS={trigger:null,bottomBorder:!1,animationSpeed:300};function ExpandableArea(element,settings){this.settings=utils.mergeSettings(element,settings,EXPANDABLEAREA_DEFAULTS),this.element=$(element),this.init()}ExpandableArea.prototype={init:function init(){this.setup().build().handleEvents()},setup:function setup(){return this.id=this.element.attr("id"),this.id&&void 0!==this.id||(this.id="expandable-area-".concat($("body").find(".expandable-area").index(this.element))),this.element.prev(".expandable-area-trigger").length>0&&(this.expander=this.element.prev(".expandable-area-trigger"),this.settings.trigger=this.expander.attr("id")||"expandable-area-trigger-".concat($("body").find(".expandable-area").index(this.element))),this.header=this.settings.trigger?this.element:this.element.children(".expandable-header"),this.footer=this.element.children(".expandable-footer"),this.content=this.element.children(".expandable-pane"),this.isCard=this.element.is(".card, .widget"),this},build:function build(){var _this=this,expanded=this.element.hasClass("is-expanded");return this.header.attr({"aria-expanded":"".concat(expanded),"aria-controls":"".concat(this.id,"-content"),id:"".concat(this.id,"-header")}),this.content.attr({id:"".concat(this.id,"-content")}),this.isCard||this.footer.length||this.settings.trigger||(this.footer=$('<div class="expandable-footer"></div>').appendTo(this.element)),this.expander=function getExpander(instance,useHeaderExpander){var expander;return!0===useHeaderExpander?((expander=instance.header.find("expandable-expander")).length||(expander=$("".concat('<a href="#" target="_self" class="btn-expander"><svg class="chevron icon" focusable="false" aria-hidden="true" role="presenation"><use href="#icon-caret-down"></use></svg><span class="audible">').concat(Locale.translate("ShowMore"),"</span>")+"</a>").appendTo(instance.header)),expander):((expander=instance.footer.find(".expandable-expander")).length||(expander=$("".concat('<a href="#" target="_self" class="expandable-expander hyperlink"><span data-translated="true">').concat(Locale.translate("ShowMore"),"</span>")+"</a>").prependTo(instance.footer)),expander)}(this,this.isCard),this.expander.attr("href","#").hideFocus(),0===this.expander.length&&(this.expander=$("#".concat(this.settings.trigger))),this.settings.bottomBorder&&this.element.addClass("has-bottom-border"),expanded&&(this.content.addClass("no-transition"),this.element.one("afterexpand.expandable-area",(function(){_this.content.removeClass("no-transition")})),this.open()),expanded||(this.content.addClass("no-transition"),this.element.one("aftercollapse.expandable-area",(function(){_this.content.removeClass("no-transition")})),this.close()),this.resize(),this},isDisabled:function isDisabled(){return this.element.hasClass("is-disabled")},isExpanded:function isExpanded(){return this.element.is(".is-expanded")},toggleExpanded:function toggleExpanded(){this.isExpanded()?this.close():this.open()},open:function open(){var _this2=this;!1!==this.element.triggerHandler("beforeexpand",[this.element])&&(this.element.addClass("is-expanded"),this.header.attr("aria-expanded","true"),this.expander.addClass("active"),this.element.triggerHandler("expand",[this.element]),this.expander.find('span[data-translated="true"]').text(Locale.translate("ShowLess")?Locale.translate("ShowLess"):"Show Less"),this.isCard&&this.expander.find(".icon").addClass("active"),this.content[0]&&(this.content[0].style.display="block"),this.content.one("animateopencomplete",(function(){_this2.element.triggerHandler("afterexpand",[_this2.element])})).animateOpen({timing:this.settings.animationSpeed}),this.applyIE11Fix())},close:function close(){var _this3=this;!1!==this.element.triggerHandler("beforecollapse",[this.element])&&(this.expander.removeClass("active"),this.element.triggerHandler("collapse",[this.element]),this.expander.find('span[data-translated="true"]').text(Locale.translate("ShowMore")?Locale.translate("ShowMore"):"Show More"),this.isCard&&this.expander.find(".icon").removeClass("active"),this.content.one("animateclosedcomplete",(function(){_this3.element.removeClass("is-expanded"),_this3.header.attr("aria-expanded","false"),_this3.element.triggerHandler("aftercollapse",[_this3.element]),_this3.content[0].style.display="none"})).animateClosed({timing:this.settings.animationSpeed}),this.applyIE11Fix())},applyIE11Fix:function applyIE11Fix(){var self=this,isIE11=$("html").hasClass("ie11");setTimeout((function(){isIE11&&self.element.hasClass("is-expanded")?self.element.css("min-height",self.element.children(".expandable-pane").outerHeight(!0)+self.element.children(".expandable-footer").outerHeight(!0)):isIE11&&!self.element.hasClass("is-expanded")&&self.element.css("min-height","auto")}),300)},resize:function resize(){var self=this;$("body").on("resize.expandablearea",(function(){self.applyIE11Fix()}))},disable:function disable(){this.element.addClass("is-disabled")},enable:function enable(){this.element.removeClass("is-disabled")},destroy:function destroy(){this.header.children("a").off(),this.header.off(),this.header.removeAttr("aria-controls").removeAttr("aria-expanded").removeAttr("id"),this.content.removeAttr("id").removeClass("no-transition"),$.removeData(this.element[0],"expandablearea")},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),this},handleEvents:function handleEvents(){var self=this;return this.expander.on("click.expandablearea",(function(e){self.isDisabled()||(e.preventDefault(),self.toggleExpanded())})),this}},$.fn.expandablearea=function(settings){return this.each((function(){var instance=$.data(this,"expandablearea");instance?instance.updated(settings):instance=$.data(this,"expandablearea",new ExpandableArea(this,settings))}))};var COMPOSITEFORM_DEFAULTS={breakpoint:"phone-to-tablet",trigger:null,expandedText:Locale.translate("ShowLess"),collapsedText:Locale.translate("ShowMore")};function CompositeForm(element,settings){this.settings=utils.mergeSettings(element,settings,COMPOSITEFORM_DEFAULTS),this.element=$(element),this.init(),warnAboutRemoval("CompositeForm")}CompositeForm.prototype={init:function init(){return this.build().handleEvents()},build:function build(){var componentClassList=this.element[0].classList;componentClassList.contains("composite-form")||componentClassList.add("composite-form");var expandableArea=this.element.find(".expandable-area");return expandableArea.length?(this.hasSummary=!0,this.expandableArea=expandableArea,this.expandableAreaAPI=this.expandableArea.data("expandablearea"),this.expandableAreaAPI||(this.expandableArea.expandablearea({trigger:this.settings.trigger}),this.expandableAreaAPI=this.expandableArea.data("expandablearea")),this.expander=this.expandableAreaAPI.expander,this.setExpanderText(this.settings.expandedText)):this.hasSummary=!1,this.checkResponsive(),this},handleEvents:function handleEvents(){var self=this;function changeExpanderText(){var isExpanded=self.expandableAreaAPI.isExpanded();self.setExpanderText(self.settings[isExpanded?"expandedText":"collapsedText"])}return $("body").off("resize.".concat("compositeform")).on("resize.".concat("compositeform"),(function(e){self.checkResponsive(e)})),this.element.on("updated.".concat("compositeform"),(function(){self.updated()})),this.hasSummary&&this.expandableArea.on("expand.".concat("compositeform"),changeExpanderText).on("collapse.".concat("compositeform"),changeExpanderText),this},checkResponsive:function checkResponsive(){var cl=this.element[0].classList;breakpoints.isBelow(this.settings.breakpoint)?cl.add("is-in-responsive-mode"):(cl.remove("is-in-responsive-mode"),this.isSideOriented()&&!this.expandableAreaAPI.isExpanded()&&this.expandableAreaAPI.open())},setExpanderText:function setExpanderText(expanderText){if(this.hasSummary&&expanderText instanceof String&&expanderText.length){var textSpan=this.expander.find("span");textSpan||(textSpan=this.expander),textSpan.text(expanderText)}},isSideOriented:function isSideOriented(){return this.element[0].classList.contains("on-side")},updated:function updated(){return this.teardown().init()},teardown:function teardown(){return $("body").off("resize.".concat("compositeform")),this.element.off("updated.".concat("compositeform")),this.hasSummary&&this.expandableArea.off("expand.".concat("compositeform"," collapse.").concat("compositeform")),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"compositeform")}},$.fn.compositeform=function(settings){return this.each((function(){var instance=$.data(this,"compositeform");instance?instance.updated(settings):instance=$.data(this,"compositeform",new CompositeForm(this,settings))}))};var CONTEXTUALACTIONPANEL_DEFAULTS={content:null,initializeContent:!0,title:"Contextual Action Panel",modalSettings:{buttons:null,centerTitle:!1,id:"contextual-action-modal-".concat(parseInt($(".modal").length,10)+1),showCloseBtn:!1,trigger:"click",useFlexToolbar:!1}},CONTEXTUAL_MODAL_SETTINGS=["buttons","centerTitle","id","showCloseButton","trigger","useFlexToolbar"];function handleLegacyCAPSettings(settings){var conversionMap={showCloseButton:"showCloseBtn"};return CONTEXTUAL_MODAL_SETTINGS.forEach((function(setting){if(-1===[null,void 0].indexOf(settings[setting])){var targetSettingName=setting;settings.modalSettings||(settings.modalSettings={}),conversionMap[setting]?(targetSettingName=conversionMap[setting],settings.modalSettings[targetSettingName]=settings[setting]):settings.modalSettings[setting]=settings[setting],delete settings[setting],warnAboutDeprecation("settings.modalSettings.".concat(targetSettingName),"settings.".concat(setting))}})),settings}function ContextualActionPanel(element,settings){this.settings=utils.mergeSettings(element,settings,CONTEXTUALACTIONPANEL_DEFAULTS),this.settings=handleLegacyCAPSettings(this.settings),this.element=$(element),this.init()}ContextualActionPanel.prototype={get modalAPI(){var api;return this.panel&&this.panel.length&&(api=this.panel.data("modal")),api},init:function init(){this.setup().build().handleEvents()},setup:function setup(){var existingPanel=this.element.next(".contextual-action-panel"),dataModal=this.element.data("modal"),setPanel=function setPanel(id){var panelFromID=$("#".concat(id));panelFromID.length&&(existingPanel=panelFromID)};return"string"==typeof dataModal?setPanel(dataModal):"object"===_typeof(dataModal)&&setPanel(this.element.attr("data-modal")),1===this.element.closest(".popupmenu").length&&(existingPanel=this.element.closest(".popupmenu").next(".contextual-action-panel")),existingPanel[0]&&(existingPanel[0].style.display="none",existingPanel.addClass("is-animating"),this.panel=existingPanel),this},build:function build(){var self=this,modalContent=this.settings.content;if(!this.panel||!this.panel.length)if(modalContent instanceof jQuery){if(modalContent.is(".contextual-action-panel")?this.panel=modalContent:(modalContent.wrap('<div class="contextual-action-panel"></div>'),this.panel=modalContent.parent()),this.panel.addClass("modal").appendTo("body"),modalContent.is("iframe"))return modalContent.ready((function(){self.completeBuild(),modalContent.show()})),self;modalContent.show()}else this.panel=$('<div class="contextual-action-panel">'.concat(modalContent,"</div>")).appendTo("body"),this.panel.addClass("modal").attr("id",this.settings.modalSettings.id);return this.completeBuild(),this},completeBuild:function completeBuild(){var children,contents,isIframe=!1,hasSearchfield=!1,predefined=!0;this.panel.find("svg").icon(),0===this.panel.find(".modal-content").length&&((children=this.panel.children()).is("iframe")&&(contents=children.contents(),this.toolbar=contents.find(".toolbar, .flex-toolbar"),isIframe=!0),isIframe||(children.wrapAll('<div class="modal-content"></div>').wrapAll('<div class="modal-body"></div>'),this.panel.addClass("modal")));var modalHeader=this.panel.find(".modal-header");0===modalHeader.length&&(modalHeader=$('<div class="modal-header"></div>')).insertBefore(this.panel.find(".modal-body")),this.header=modalHeader;var buttonset=this.panel.find(".toolbar .buttonset, .flex-toolbar .buttonset");if(this.toolbar||(this.toolbar=this.panel.find(".toolbar, .flex-toolbar")),!this.toolbar.length)if(predefined=!1,this.settings.modalSettings.buttons&&this.settings.modalSettings.buttons.forEach((function(button){"input"===button.type&&(hasSearchfield=!0)})),this.settings.title&&this.settings.modalSettings.centerTitle){var toolbarSearchfieldSection=hasSearchfield?'<div class="toolbar-section search"></div>':"",toolbarHTML='<div class="flex-toolbar">\n          <div class="toolbar-section static"></div>\n          <div class="toolbar-section title center-text">\n            <h2>'.concat(this.settings.title,"</h2>\n          </div>\n          ").concat(toolbarSearchfieldSection,'\n          <div class="toolbar-section buttonset static"></div>\n        </div>');this.toolbar=$(toolbarHTML)}else if(!buttonset.length){var toolbarCSSClass=this.settings.modalSettings.useFlexToolbar?"flex-toolbar":"toolbar",toolbarTitleSection=this.settings.modalSettings.useFlexToolbar?'<div class="toolbar-section title"><h2>'.concat(this.settings.title,"</h2></div>"):"",toolbarButtonsetCSSClass=this.settings.modalSettings.useFlexToolbar?"toolbar-section buttonset":"buttonset",toolbarButtonsetSection='<div class="'.concat(toolbarButtonsetCSSClass,'"></div>'),_toolbarSearchfieldSection=this.settings.modalSettings.useFlexToolbar&&hasSearchfield?'<div class="toolbar-section search"></div>':"",_toolbarHTML='<div class="'.concat(toolbarCSSClass,'">\n          ').concat(toolbarTitleSection,"\n          ").concat(_toolbarSearchfieldSection,"\n          ").concat(toolbarButtonsetSection,"\n        </div>"),toolbar=$(_toolbarHTML);toolbar.appendTo(this.panel.find(".modal-header")),this.toolbar=toolbar,buttonset=toolbar.children(".buttonset")}if(this.toolbar.appendTo(this.header),!predefined){buttonset&&(buttonset.length||this.settings.modalSettings.centerTitle)||(buttonset=$('<div class="toolbar-section buttonset"></div>')).appendTo(this.toolbar);var toolbarTitle=this.toolbar.find(".title");if(!toolbarTitle.length){var centerTextCSS=this.settings.modalSettings.centerTitle?" center-text":"";toolbarTitle=$('\n          <div class="toolbar-section title'.concat(centerTextCSS,'">\n            <h2>').concat(this.settings.title,"</h2>\n          </div>\n        ")),buttonset?toolbarTitle.insertBefore(buttonset):this.toolbar.prepend(toolbarTitle)}toolbarTitle.length||(toolbarTitle=$('\n          <div class="title">\n            '.concat(this.settings.title,"\n          </div>\n        ")),this.toolbar.prepend(toolbarTitle))}if(isIframe||this.panel.detach().appendTo("body"),this.element.attr("data-modal",this.settings.modalSettings.id),this.panel.attr("id")||this.panel.attr("id",this.settings.modalSettings.id),this.panel.modal(this.settings.modalSettings),this.buttons=this.panel.find(".buttonset").children("button"),this.closeButton=this.panel.find(".modal-header").find('.btn-close, [name="close"], button.close-button'),this.settings.modalSettings.showCloseBtn&&!this.closeButton.length){var closeText=Locale.translate("Close");if(this.closeButton=$('\n        <button class="btn-close" type="button" title="'.concat(closeText,'">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(closeText,"</span>\n        </button>\n      ")),this.settings.modalSettings.useFlexToolbar){var standaloneSection=$('<div class="toolbar-section static"></div>').append(this.closeButton),more=this.toolbar.find(".toolbar-section.more");standaloneSection.insertAfter(more.length?more:buttonset)}else buttonset.append(this.closeButton)}return this.closeButton.length&&this.toolbar.addClass("has-close-button"),this.toolbar.is(".toolbar")&&this.toolbar.toolbar(),this.toolbar.is(".flex-toolbar")&&this.toolbar.toolbarflex(),utils.fixSVGIcons(this.element),this},handleEvents:function handleEvents(){var self=this;function passEvent(e){self.element.triggerHandler(e.type)}return this.panel.addClass("is-animating").off("open.contextualactionpanel").on("open.contextualactionpanel",(function(e){passEvent(e),self.panel.removeClass("is-animating")})).off("close.contextualactionpanel").on("close.contextualactionpanel",(function(e){passEvent(e)})).off("beforeopen.contextualactionpanel").on("beforeopen.contextualactionpanel",(function(e){self.settings.initializeContent&&$(this).initialize(),passEvent(e)})).off("afteropen.contextualactionpanel").on("afteropen.contextualactionpanel",(function(){if(self.toolbar&&self.toolbar.trigger("recalculate-buttons"),self.toolbar.length){var selected=self.toolbar.find(".buttonset > .is-selected");if(selected.length||(selected=self.toolbar.find(".buttonset > *:first-child")).is(".searchfield-wrapper")&&(selected=selected.children(".searchfield")),!selected.length&&self.toolbar.is(".flex-toolbar"))return void(selected=self.toolbar.find("button").first()).focus();var toolbarData=self.toolbar.data("toolbar");toolbarData&&toolbarData.setActiveButton(selected,!0)}self.panel.find(".modal-body-wrapper").find(":focusable").first().focus(),utils.fixSVGIcons(self.panel)})),self.closeButton&&self.closeButton.length&&self.closeButton.on("click.contextualactionpanel",(function(){self.handleToolbarSelected()})),this},handleToolbarSelected:function handleToolbarSelected(){this.close()},teardown:function teardown(){var buttonset=this.toolbar.children(".buttonset");this.panel.off("open.contextualactionpanel close.contextualactionpanel beforeopen.contextualactionpanel afterclose.contextualactionpanel"),buttonset.children("*:not(.searchfield)").off("click.contextualactionpanel"),buttonset.children(".btn-menu").each((function(){var popup=$(this).data("popupmenu");popup&&popup.destroy()})),this.header&&this.header.remove(),this.panel.find(".modal-body").children().first().unwrap().unwrap(),this.element.removeAttr("data-modal"),this.closeButton&&this.closeButton.length&&(this.closeButton.off("click.contextualactionpanel"),delete this.closeButton),this.element.trigger("afterteardown")},close:function close(){var destroy;"immediate"===this.settings.modalSettings.trigger&&(destroy=!0),this.modalAPI&&this.modalAPI.close(destroy)},disable:function disable(){this.element.prop("disabled",!0),this.panel.hasClass("is-visible")&&this.close()},enable:function enable(){this.element.prop("disabled",!1)},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),this.settings=handleLegacyCAPSettings(this.settings),this.setup(),this.modalAPI&&this.modalAPI.updated(this.settings.modalSettings),this},destroy:function destroy(){this.modalAPI&&this.modalAPI.isOpen&&this.modalAPI.close(!0),$.removeData(this.element[0],"contextualactionpanel")}},$.fn.contextualactionpanel=function(settings){return this.each((function(){var instance=$.data(this,"contextualactionpanel");instance?instance.updated(settings):instance=$.data(this,"contextualactionpanel",new ContextualActionPanel(this,settings))}))},$.fn.popover=$.fn.tooltip;var tagStyles=["default","neutral","secondary","error","alert","good","info"],TAG_DEFAULTS={audibleContent:void 0,clickable:!1,clickHandler:void 0,content:" ",disabled:!1,dismissible:!1,dismissHandler:void 0,href:void 0,id:void 0,parent:void 0,style:tagStyles[0],value:void 0};function Tag(element,settings){var span;if(this.settings=utils.mergeSettings(element,settings,TAG_DEFAULTS),element instanceof HTMLElement?element.querySelector(".tag-content")?span=element:((span=document.createElement("span")).className+="".concat(element.className),element.id&&element.id.length?(span.id=element.id,element.removeAttribute("id")):"string"==typeof this.settings.id&&this.settings.id.length&&(span.id=this.settings.id,delete this.settings.id),element.insertAdjacentElement("beforebegin",span),span.appendChild(element),span.classList.add("tag"),element.className="",element.classList.add("tag-content")):((span=document.createElement("span")).classList.add("tag"),this.settings&&this.settings.parent instanceof HTMLElement&&this.settings.parent.appendChild(span),"string"==typeof this.settings.id&&this.settings.id.length&&(span.id=this.settings.id,delete this.settings.id)),element){var audibleContent=element.querySelector(".audible");audibleContent&&span.insertAdjacentElement("afterbegin",audibleContent)}this.element=span,this.getSettingsFromElement(),this.init()}Tag.prototype={init:function init(){this.render(),this.handleEvents()},get contentElement(){return this.element.querySelector(".tag-content")},render:function render(){var elemClasses=this.element.classList,elemClassArr=utils.getArrayFromList(this.element.classList),currentState=this.settings.style;elemClassArr.forEach((function(cssClass){tagStyles.indexOf(cssClass)>-1&&elemClasses.remove(cssClass)})),-1===this.element.className.indexOf(currentState)&&"default"!==currentState&&elemClasses.add(currentState),this.settings.disabled&&elemClasses.add("is-disabled");var audibleContent="";this.settings.audibleContent&&(audibleContent='<span class="audible">'.concat(xssUtils.stripHTML(this.settings.audibleContent),"</span>"));var contentTagType="span",href="",linkableBtn="",tabIndex="",hasHref=this.settings.href&&this.settings.href.length;(hasHref||this.originallyAnchor)&&(contentTagType="a",this.settings.disabled&&(tabIndex=' tabIndex="-1"')),hasHref&&(href=' href="'.concat(this.settings.href,'"')),(this.settings.clickable||"function"==typeof this.settings.clickHandler)&&(elemClasses.add("is-linkable"),linkableBtn='<button class="linkable-btn" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("caret-right"),"\n      </button>"));var content="<".concat(contentTagType,' class="tag-content"').concat(href).concat(tabIndex,">").concat(xssUtils.sanitizeHTML(this.settings.content),"</").concat(contentTagType,">"),dismissibleBtn="";this.settings.dismissible&&(elemClasses.add("is-dismissible"),dismissibleBtn='<button class="dismissible-btn" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("close"),'\n        <span class="audible">').concat(Locale.translate("Close"),"</span>\n      </button>")),this.element.innerHTML="".concat(audibleContent).concat(content).concat(linkableBtn).concat(dismissibleBtn),$(this.element).hideFocus()},get dismissibleBtn(){return this.element.querySelector(".dismissible-btn")},getSettingsFromElement:function getSettingsFromElement(){var elemClasses=this.element.className,styleState="";tagStyles.forEach((function(style){elemClasses.indexOf(style)>-1&&(styleState=style)})),styleState&&(this.settings.style=styleState),this.settings.disabled=this.disabled;var dismissibleBtn=this.dismissibleBtn,hasDismissibleCss=this.element.className.indexOf("is-dismissible")>-1;(dismissibleBtn||hasDismissibleCss)&&(this.settings.dismissible=!0);var hyperlink=this.element.querySelector("a"),hasHyperlinkCss=this.element.className.indexOf("is-linkable")>-1,hasLinkableIcon=this.element.querySelector(".linkable-btn");if(hyperlink||hasHyperlinkCss||hasLinkableIcon){this.originallyAnchor=!0;var href=hyperlink.getAttribute("href");href&&href.length&&(href=xssUtils.stripTags(href),this.settings.href=href)}(hasHyperlinkCss||hasLinkableIcon)&&(this.settings.clickable=!0);var audibleContent=this.element.querySelector(".audible");audibleContent instanceof HTMLElement&&(this.settings.audibleContent=xssUtils.stripHTML(audibleContent.innerText));var contentElem=this.contentElement;contentElem&&(this.settings.content=xssUtils.sanitizeHTML(contentElem.innerText))},remove:function remove(){var thisNode=this.element,parentNode=thisNode.parentNode;this.settings.parentAPI&&(parentNode=this.settings.parentAPI.element),$(parentNode).triggerHandler("beforetagremove",[this]),this.destroy(),thisNode.remove(),$(parentNode).triggerHandler("aftertagremove",[this])},dismiss:function dismiss(e){if(!this.disabled){this.remove(e),"function"==typeof this.settings.dismissHandler&&this.settings.dismissHandler(this);var parentAPI=this.settings.parentAPI;parentAPI&&parentAPI.focusPreviousElement(this.element)}},get disabled(){return this.element.className.indexOf("is-disabled")>-1},disable:function disable(){this.disabled||("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=-1),this.settings.disabled=!0,this.element.classList.add("is-disabled"))},enable:function enable(){this.disabled&&("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=0),this.settings.disabled=!1,this.element.classList.remove("is-disabled"))},teardown:function teardown(){var $element=$(this.element);$element.off(["focusin.tag","focusout.tag","keydown.tag","click.tag"].join(" "));var dismissibleBtn=this.dismissibleBtn;dismissibleBtn&&dismissibleBtn.parentNode.removeChild(dismissibleBtn);var hideFocusAPI=$element.data("hidefocus");return hideFocusAPI&&"function"==typeof hideFocusAPI.destroy&&hideFocusAPI.destroy(),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,TAG_DEFAULTS)),this.teardown().init()},destroy:function destroy(){this.teardown(),$.removeData(this.element,"tag")},handleEvents:function handleEvents(){var _this=this;$(this.element).on("focusin.tag",(function(){_this.element.classList.add("is-focused")})).on("focusout.tag",(function(){_this.element.classList.remove("is-focused")}));var self=this;$(this.element).on("click.tag","a, .linkable-btn",(function(e){var handlerResult;return"function"==typeof self.settings.clickHandler&&(handlerResult=self.settings.clickHandler(self)),!(!1===handlerResult||self.settings.href&&"#"===self.settings.href)||(e.preventDefault(),!1)})),this.settings.dismissible&&($(this.element).on("click.tag",".dismissible-btn",(function(e){_this.dismiss(e)})),$(this.element).on("keydown.tag","a",(function(e){8===e.keyCode&&_this.dismiss(e)})))}};var TAG_LIST_DEFAULTS={tags:[]};function TagList(element,settings){var _this=this;if(!(element instanceof HTMLElement))throw new Error("TagList base element must be defined");this.settings=utils.mergeSettings(element,settings,TAG_LIST_DEFAULTS),this.element=element;var tags=utils.getArrayFromList(this.element.querySelectorAll(".tag"));tags.length&&(this.settings.tags=[],tags.forEach((function(tag){_this.settings.tags.push(new Tag(tag))}))),this.init()}TagList.prototype={get length(){return this.tags.length},get elements(){return this.tags.map((function(tag){return tag.element}))},init:function init(){var _this2=this;this.tags=[],Array.isArray(this.settings.tags)&&this.settings.tags.forEach((function(tag){_this2.add(tag)})),this.render()},getTargetProp:function getTargetProp(){return"content"},add:function add(tagObj){var tag,_this3=this;if(!tagObj)throw new Error("No object was provided");if(Array.isArray(tagObj)){var tags=[];return tagObj.forEach((function(thisTagObj){tags.push(_this3.add(thisTagObj))})),tags}if(objectUtils.isEmpty(tagObj))throw new Error("Provided object has no unique keys to use for creation of a Tag.");return tagObj instanceof Tag?(tag=tagObj,tagObj.settings.parentAPI=this):(tagObj.parent=this.element,tagObj.parentAPI=this,tag=new Tag(void 0,tagObj)),-1===this.tags.indexOf(tag)&&this.tags.push(tag),tag},remove:function remove(tagObj,doDestroy){tagObj instanceof Tag&&(tagObj=tagObj.settings);var removedTag,targetProp=this.getTargetProp(tagObj),updatedTagsList=this.tags.filter((function(tag){return tag.settings[targetProp]===tagObj[targetProp]||(removedTag=tag,!1)}));return updatedTagsList.length<this.tags.length&&(this.tags=updatedTagsList),doDestroy&&removedTag.remove(),removedTag},removeAll:function removeAll(){this.tags.forEach((function(tag){tag.remove()})),this.tags=[]},render:function render(){this.tags.forEach((function(tag){tag.render()})),this.element.classList[this.tags.length?"remove":"add"]("empty")},focusByIndex:function focusByIndex(){var tagIndex=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,elems=this.elements,min=0,max=elems.length;tagIndex<min&&(tagIndex=min),tagIndex>max&&(tagIndex=max);var targetElem=elems[tagIndex],targetAnchor=targetElem.querySelector("a");return targetAnchor&&targetAnchor.focus(),targetElem},focusPreviousElement:function focusPreviousElement(element){if(!(element instanceof HTMLElement))throw new Error("".concat(element," is not an HTMLElement"));var index=this.elements.indexOf(element);if(!(index>-1))throw new Error("".concat(element," does not exist within this TagList"));return this.focusByIndex(index-1)},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings),Array.isArray(settings.tags)&&(this.settings.tags=settings.tags)),this.removeAll(),this.init()},destroy:function destroy(){this.tags.forEach((function(tag){tag.remove()})),delete this.tags,$(this.element).data("taglist")&&$.removeData(this.element,"taglist")}};var moveSelectedOpts=["none","all","group"],DROPDOWN_DEFAULTS={closeOnSelect:!0,cssClass:null,filterMode:"contains",maxSelected:void 0,moveSelected:"none",moveSelectedToTop:void 0,multiple:!1,noSearch:!1,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,source:void 0,sourceArguments:{},reload:"none",empty:!1,delay:300,maxWidth:null,placementOpts:null,onKeyDown:null,tagSettings:{}};function Dropdown(element,settings){this.settings=utils.mergeSettings(element,settings,DROPDOWN_DEFAULTS),this.element=$(element),this.init()}Dropdown.prototype={get value(){var reload=this.settings.reload,multiple=this.settings.multiple;if("typeahead"===reload)return multiple?this.selectedValues:this.element.val();for(var opt,result=[],options=this.element[0].options,i=0;i<options.length;i++)(opt=options[i]).selected&&result.push(opt.value||opt.text);return multiple||1!==result.length?result:result[0]},get overflowed(){if(!this.isMobile()||this.isMobile()&&!this.isOpen()){var span=this.pseudoElem.find("span").css("max-width","");if(Math.round(span.width())>Math.round(this.pseudoElem.width()))return span.css("max-width","100%"),!0}return!1},get isFocused(){var active=document.activeElement;return!!(this.pseudoElem&&this.pseudoElem.length&&this.pseudoElem.is($(active)))||!!(this.list&&this.list.length&&this.list[0].contains(active))},get isShortField(){return this.element.closest(".field-short").length>0||this.element.closest(".form-layout-compact").length>0},get selectedValues(){return this.selectedOptions.map((function(opt){return opt.value}))},get selectedOptions(){return utils.getArrayFromList(this.element[0].querySelectorAll("option")).filter((function(opt){return opt.selected}))},init:function init(){var _this=this,orgId=this.element.attr("id");orgId=orgId?xssUtils.stripTags(orgId):"",this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.timer=null,this.filterTerm="",orgId||(orgId=utils.uniqueId(this.element,"dropdown"),DOM.setAttribute(this.element[0],"id",orgId),DOM.setAttribute(this.element.parent().find("label").first()[0],"for",orgId)),"ios"!==Environment.os.name&&"android"!==Environment.os.name||(this.settings.noSearch=!0);var elemClassList=this.element[0].classList;0===elemClassList.length&&(this.element[0].classList="dropdown");var pseudoClassString=elemClassList.contains("dropdown-xs")?"dropdown input-xs":elemClassList.contains("dropdown-sm")?"dropdown input-sm":elemClassList.contains("dropdown-lg")?"dropdown input-lg":"dropdown",style=this.element.attr("style");this.isHidden=style&&style.indexOf("display: none")>=0;var baseElement=this.isInlineLabel?this.inlineLabel:this.element;this.wrapper=baseElement.next(".dropdown-wrapper"),this.isWrapped=this.wrapper.length>0,this.isWrapped||(this.wrapper=$('<div class="dropdown-wrapper"></div>').insertAfter(baseElement)),this.isWrapped?(this.pseudoElem=this.wrapper.find(".".concat(pseudoClassString)),this.trigger=this.wrapper.find(".trigger")):this.pseudoElem=$("div#".concat(orgId,"-shdo")),elemClassList.contains("text-align-reverse")?pseudoClassString+=" text-align-reverse":elemClassList.contains("text-align-center")&&(pseudoClassString+=" text-align-center"),this.label=$('label[for="'.concat(xssUtils.stripTags(orgId),'"]')),this.pseudoElem.length?this.pseudoElem[0].setAttribute("class",pseudoClassString):this.pseudoElem=$('<div class="'.concat(pseudoClassString,'">')),this.isWrapped||this.pseudoElem.append($("<span></span>"));var attributes=DOM.getAttributes(this.element[0]),attributesToCopy=this.getDataAttributes(attributes,["data-validate"]);this.pseudoElem.attr(attributesToCopy.obj).attr({role:"button","aria-haspopup":"listbox"}),function handleStates(self){var disabled=self.element.prop("disabled"),readonly=self.element.prop("readonly");return disabled?self.disable():readonly?self.readonly():self.enable()}(this),this.isWrapped||this.wrapper.append(this.pseudoElem,this.trigger),this.icon=this.wrapper.find(".icon"),this.icon.length||(this.icon=$.createIconElement("dropdown"),this.wrapper.append(this.icon)),this.element.prop("multiple")&&!this.settings.multiple&&(this.settings.multiple=!0),this.settings.multiple&&!this.element.prop("multiple")&&this.element.prop("multiple",!0),this.settings.showTags&&(this.pseudoElem[0].classList.add("has-tags"),this.renderTagList());var dataSource=this.element.attr("data-source");dataSource&&"source"!==dataSource&&(this.settings.source=dataSource);var dataMaxselected=this.element.attr("data-maxselected");function getMoveSelectedSetting(incomingSetting,useText){switch(incomingSetting){case!useText||"true":return"all";case!!useText&&"false":return"none";default:return moveSelectedOpts.indexOf(incomingSetting)>-1?incomingSetting:"none"}}dataMaxselected&&!isNaN(dataMaxselected)&&(this.settings.maxSelected=parseInt(dataMaxselected,10)),void 0!==this.settings.moveSelectedToTop&&(this.settings.moveSelected=this.settings.moveSelectedToTop);var dataMoveSelected=this.element.attr("data-move-selected");this.settings.moveSelected=dataMoveSelected?getMoveSelectedSetting(dataMoveSelected,!0):getMoveSelectedSetting(this.settings.moveSelected),this.settings.reloadSourceOnOpen&&(this.settings.reload="open",delete this.settings.reloadSourceOnOpen);var dataCloseOnSelect=this.element.attr("data-close-on-select");dataCloseOnSelect&&!this.settings.closeOnSelect&&(this.settings.closeOnSelect="true"===dataCloseOnSelect);var dataNoSearch=this.element.attr("data-no-search");dataNoSearch&&!this.settings.noSearch&&(this.settings.noSearch="true"===dataNoSearch);for(var sizingStrings=["-xs","-sm","-mm","-md","-lg"],classString=this.element.attr("class"),s=null,i=0;i<sizingStrings.length;i++)s=sizingStrings[i],classString.match(s)&&this.pseudoElem.addClass("dropdown".concat(s));return this.dataset=[],this.listfilter=new ListFilter({filterMode:this.settings.filterMode}),this.setListIcon(),this.setDisplayedValues(),this.setInitial(),this.setWidth(),setTimeout((function(){_this.toggleTooltip()}),0),this.element.triggerHandler("rendered"),this.handleEvents()},renderTagList:function renderTagList(){var self=this;function dismissHandler(tag){self.settings.dismissHandler&&self.settings.dismissHandler(tag);var targets=self.selectedOptions.filter((function(el){return xssUtils.stripHTML(el.value)===tag.settings.value}));targets.length&&self.deselect(targets[0]),self.tagListAPI.element.classList[self.selectedOptions.length?"remove":"add"]("empty"),self.isOpen()&&self.updateList()}var tags=this.toTagData();tags.forEach((function(tag){tag.dismissHandler=dismissHandler,self.settings.clickHandler&&(tag.clickHandler=self.settings.clickHandler),self.isDisabled()&&(tag.disabled=!0)}));var span=this.pseudoElem.children("span")[0];this.tagListAPI?this.tagListAPI.updated({tags:tags}):(this.tagListAPI=new TagList(span,{tags:tags}),span.classList.add("tag-list")),this.tagListAPI.element.classList[this.selectedOptions.length?"remove":"add"]("empty"),this.isOpen()&&this.position()},inputTimer:function inputTimer(){if(this.inputTimeout)return!1;var self=this;return this.inputTimeout=setTimeout((function(){clearTimeout(self.inputTimeout),self.inputTimeout=null}),100),!0},setWidth:function setWidth(){var style=this.element[0].style;style.width&&(this.pseudoElem[0].style.width=style.width),"absolute"===style.position&&(this.pseudoElem[0].style.position="absolute",this.pseudoElem[0].style.left=style.left,this.pseudoElem[0].style.top=style.top,this.pseudoElem[0].style.bottom=style.bottom,this.pseudoElem[0].style.right=style.right)},setItemIcon:function setItemIcon(listIconItem){if(!listIconItem.icon)return listIconItem.isIcon=!1,listIconItem.html="",void this.listIcon.items.push(listIconItem);"object"===_typeof(listIconItem.icon)&&(listIconItem.obj=listIconItem.icon,listIconItem.icon=listIconItem.icon.icon,listIconItem.obj.color?0===listIconItem.obj.color.indexOf("#")?listIconItem.specColor=listIconItem.obj.color:listIconItem.classList=" ".concat(listIconItem.obj.color):listIconItem.obj.class&&(0===listIconItem.obj.class.indexOf("#")?listIconItem.specColor=listIconItem.obj.class:listIconItem.classList=" ".concat(listIconItem.obj.class)),listIconItem.obj.colorOver?0===listIconItem.obj.colorOver.indexOf("#")?listIconItem.specColorOver=listIconItem.obj.colorOver:listIconItem.classListOver=" ".concat(listIconItem.obj.colorOver):listIconItem.obj.classOver&&(0===listIconItem.obj.classOver.indexOf("#")?listIconItem.specColorOver=listIconItem.obj.classOver:listIconItem.classListOver=" ".concat(listIconItem.obj.classOver))),listIconItem.isIcon=listIconItem.icon&&listIconItem.icon.length,listIconItem.classList&&listIconItem.classList.length&&(listIconItem.isClassList=!0),listIconItem.classListOver&&listIconItem.classListOver.length&&(listIconItem.isClassListOver=!0),listIconItem.html=$.createIcon({icon:listIconItem.isIcon?listIconItem.icon:"",class:"listoption-icon".concat(listIconItem.isClassList?" ".concat(listIconItem.classList):"")}),"swatch"===listIconItem.icon&&(listIconItem.isSwatch=!0,listIconItem.html='<span class="swatch '.concat(listIconItem.isClassList?listIconItem.classList:"",'"></span>')),this.listIcon.items.push(listIconItem)},setListIcon:function setListIcon(){var self=this,hasIcons=!self.settings.multiple&&self.element.find("[data-icon]").length>0,opts=hasIcons?this.element.find("option"):[];if(self.listIcon={hasIcons:hasIcons,items:[]},hasIcons){var count=0;opts.each((function(i){var iconAttr=$(this).attr("data-icon"),icon=null;"string"==typeof iconAttr&&iconAttr.length&&(icon=0!==iconAttr.indexOf("{")?iconAttr:$.fn.parseOptions(this,"data-icon"),self.setItemIcon({html:"",icon:icon}),self.listIcon.items[i]&&self.listIcon.items[i].isIcon&&count++)})),hasIcons=count>0}hasIcons&&(self.pseudoElem.prepend($.createIcon({icon:"",class:"listoption-icon"})),self.listIcon.pseudoElemIcon=self.pseudoElem.find("> .listoption-icon"),self.listIcon.idx=-1),self.listIcon.hasIcons=hasIcons},toggleTooltip:function toggleTooltip(){this.overflowed?this.setTooltip():this.tooltipApi&&this.removeTooltip()},setTooltip:function setTooltip(){var _this2=this,opts=this.element.find("option:selected"),optText=this.getOptionText(opts);this.tooltipApi=this.pseudoElem.find("span").tooltip({content:xssUtils.escapeHTML(optText),parentElement:this.pseudoElem,trigger:this.isMobile()?"immediate":"hover"}).on("blur.dropdowntooltip",(function(){_this2.removeTooltip()})).data("tooltip")},removeTooltip:function removeTooltip(){this.tooltipApi&&(this.tooltipApi.element.off("blur.dropdowntooltip"),this.tooltipApi.destroy(),this.tooltipApi=null)},setItemIconOverColor:function setItemIconOverColor(target){var self=this;if(self.listIcon.hasIcons){var targetIcon=target?target.find(".listoption-icon"):null;self.list.find("li").each((function(i){var li=$(this),icon=li.find(".listoption-icon"),iconRef=self.listIcon.items[i];iconRef&&(li.is(".is-focused")&&iconRef.isClassListOver&&icon.removeClass(iconRef.classListOver).addClass(iconRef.classList),targetIcon&&li.is(target)&&iconRef.isClassListOver&&(targetIcon.removeClass(iconRef.classList),targetIcon.addClass(iconRef.classListOver)))}))}},updateItemIcon:function updateItemIcon(opt){if(this.listIcon.hasIcons){var target=this.listIcon.pseudoElemIcon,i=opt.index(),idx=this.listIcon.idx,iconRef=this.listIcon.items[i],icon=iconRef&&iconRef.isIcon?iconRef.icon:"";if(!iconRef)return;if(idx>-1){var iconAtIndex=this.listIcon.items[idx];iconAtIndex&&(target.removeClass("".concat(iconAtIndex.classList," ").concat(iconAtIndex.classListOver)),target[0].style.fill="")}this.listIcon.idx=i,target.changeIcon(icon),iconRef.isClassList&&target.addClass(iconRef.classList)}},updateList:function updateList(term){var self=this,isMobile=self.isMobile(),listExists=void 0!==self.list&&null!==self.list&&self.list.length>0,listContents="",ulContents="",upTopOpts=0,hasOptGroups=this.element.find("optgroup").length,reverseText="",isMultiselect=!0===this.settings.multiple,moveSelected="".concat(this.settings.moveSelected),showSelectAll=!0===this.settings.showSelectAll;this.element[0].classList.contains("text-align-reverse")?reverseText=" text-align-reverse":this.element[0].classList.contains("text-align-center")&&(reverseText=" text-align-center"),listExists||(listContents='<div class="dropdown-list'.concat(reverseText).concat(isMobile?" mobile":"").concat(this.settings.multiple?" multiple":"",'" id="dropdown-list" ').concat(this.settings.multiple?'aria-multiselectable="true"':"",'>\n        <label for="dropdown-search" class="audible">').concat(Locale.translate("TypeToFilter"),'</label>\n        <input type="text" class="dropdown-search').concat(reverseText,'" id="dropdown-search" autocomplete="off" />\n        <span class="trigger">').concat(isMobile?$.createIcon({icon:"close",classes:["close"]}):$.createIcon("dropdown"),'<span class="audible">').concat(isMobile?Locale.translate("Close"):Locale.translate("Collapse"),'</span></span>\n        <ul role="listbox" aria-label="').concat(Locale.translate("Dropdown"),'">'));var opts=this.element.find("option"),groups=this.element.find("optgroup"),selectedFilterMethod=":selected",groupsSelectedOpts=[];"typeahead"===this.settings.reload&&(selectedFilterMethod=function selectedFilterMethod(i,opt){return!!self.selectedValues&&self.selectedValues.indexOf(opt.value)>-1});var selectedOpts=opts.filter(selectedFilterMethod);function buildLiHeader(textContent){return'<li role="presentation" class="group-label" focusable="false">\n        '.concat(textContent,"\n      </li>")}function buildLiOption(option,index){var liMarkup="",text=option.innerHTML,attributes=DOM.getAttributes(option),value=attributes.getNamedItem("value"),title=attributes.getNamedItem("title"),hasTitle=title?'" title="'.concat(title.value,'"'):"",badge=attributes.getNamedItem("data-badge"),badgeColor=attributes.getNamedItem("data-badge-color"),badgeHtml="",isSelected=option.selected?" is-selected":"",isDisabled=option.disabled?" is-disabled":"",liCssClasses=option.className?" ".concat(option.className.value):"",aCssClasses=liCssClasses.indexOf("clear")>-1?' class="clear-selection"':"",tabIndex=' tabIndex="'.concat(index&&0===index?0:-1,'"'),copiedDataAttrs=" ".concat(self.getDataAttributes(attributes,["data-badge","data-badge-color","data-val","data-icon"]).str),trueValue=(value&&"value"in value?value.value:text).replace(/"/g,"/quot/"),iconHtml="";if(self.listIcon.hasIcons&&self.listIcon.items[index]&&(iconHtml=self.listIcon.items[index].html),badge&&(badgeHtml='<span class="badge '.concat(badgeColor?badgeColor.value:"azure07",'">').concat(badge.value,"</span>")),liCssClasses.indexOf("clear")>-1&&""===text&&(text=Locale.translate("ClearSelection")),term&&term.length>0){var exp=self.getSearchRegex(term);text=text.replace(exp,"<i>$1</i>").trim()}return self.listIcon.hasIcons&&self.listIcon.items[index]&&self.listIcon.items[index].isSwatch&&(liCssClasses+=" is-swatch"),liMarkup+='<li class="dropdown-option'.concat(isSelected).concat(isDisabled).concat(liCssClasses,'" ').concat(isSelected?'aria-selected="true"':"",' data-val="').concat(trueValue,'" ').concat(copiedDataAttrs).concat(tabIndex).concat(hasTitle,' role="option">\n        <a id="list-option-').concat(index,'" href="#" ').concat(aCssClasses,' role="option">').concat(iconHtml).concat(text).concat(badgeHtml,"</a></li>")}if("typeahead"===this.settings.reload&&selectedOpts.prop("selected",!0),isMultiselect&&showSelectAll){var allSelected=opts.not("[disabled], .hidden").length===selectedOpts.not("[disabled], .hidden").length;ulContents+='<li role="presentation" class="dropdown-select-all-list-item'.concat(allSelected?" is-selected":"",'">')+'<a role="option" href="#" id="dropdown-select-all-anchor" class="dropdown-select-all-anchor">'.concat(Locale.translate("SelectAll"),"</a>")+"</li>"}"group"===moveSelected&&(groups&&groups.length?groups.each((function(i,g){var els=selectedOpts.filter((function(){return $.contains(g,this)}));groupsSelectedOpts.push(els)})):moveSelected="all"),"all"===moveSelected&&(opts=opts.not(selectedOpts),selectedOpts.length>0&&(ulContents+=buildLiHeader("".concat(Locale.translate("Selected")," ").concat(self.isInlineLabel?self.inlineLabelText.text():this.label.text()))),selectedOpts.each((function(i){ulContents+=buildLiOption(this,i),upTopOpts++})),!hasOptGroups&&opts.length>0&&(ulContents+=buildLiHeader("".concat(Locale.translate("All")," ").concat(self.isInlineLabel?self.inlineLabelText.text():this.label.text())))),opts.each((function(i){var optgroupIndex,count=i+upTopOpts,option=$(this),parent=option.parent();parent.is("optgroup")&&groups.length&&(optgroupIndex=parent.index(),groups.index(parent)>-1&&(groups=groups.not(parent),ulContents+=buildLiHeader("".concat(parent.attr("label"))),"group"===moveSelected&&groupsSelectedOpts[optgroupIndex].each((function(j){ulContents+=buildLiOption(this,j),upTopOpts++})))),"none"!==moveSelected&&option.is(":selected")||(ulContents+=buildLiOption(this,count))})),listExists?this.listUl.html(ulContents):(listContents+="".concat(ulContents,"</ul>")+"</div>",this.list=$(listContents),this.listUl=this.list.find("ul"),this.searchInput=this.list.find("#dropdown-search")),this.listIcon.hasIcons&&(this.list.addClass("has-icons"),this.listIcon.pseudoElemIcon.clone().appendTo(this.list)),hasOptGroups&&this.listUl.addClass("has-groups"),$.fn.tooltip&&this.listUl.find("[title]").addClass("has-tooltip").tooltip(),this.isOpen()&&(this.position(),this.highlightOption(this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)").first()))},setDisplayedValues:function setDisplayedValues(){var opts=this.element.find("option:selected"),text=this.getOptionText(opts);if(opts.hasClass("clear")&&(text=""),this.settings.showTags&&this.tagListAPI)this.renderTagList();else{if(this.settings.empty&&0===opts.length){var _span=this.pseudoElem.find("span").first();return DOM.html(_span,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),_span=$("#".concat(this.element.attr("id"))).next().find("span").first(),DOM.html(_span,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),void this.setPlaceholder(text)}var maxlength=this.element.attr("maxlength");maxlength&&(text=text.substr(0,maxlength)),text=text.trim();var span=this.pseudoElem.find("span");span.length>0&&(span[0].innerHTML='<span class="audible">'.concat(this.label.text()," </span>").concat(xssUtils.escapeHTML(text)))}this.setPlaceholder(text),this.previousActiveDescendant=opts.first().val(),this.updateItemIcon(opts),this.setBadge(opts)},copyClass:function copyClass(from,to,prop){from.hasClass(prop)&&to.addClass(prop)},setInitial:function setInitial(){this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.isHidden&&(this.pseudoElem.hide().prev("label").hide(),this.pseudoElem.next("svg").hide())},setPlaceholder:function setPlaceholder(text){if(this.placeholder=this.placeholder||{text:this.element.attr("placeholder")},this.placeholder.text){var isEmpty="string"!=typeof text||"string"==typeof text&&""===text;this.placeholder.elem=this.placeholder.elem||this.pseudoElem.find("span:not(.audible)"),this.placeholder.elem.attr("data-placeholder-text",isEmpty?this.placeholder.text:"")}else delete this.placeholder},ignoreKeys:function ignoreKeys(input,e){var charCode=e.which;if(e.altKey&&38===charCode)return e.stopPropagation(),e.preventDefault(),!1;if(!input.is(":disabled")&&!input.hasClass("is-readonly")){if(e.ctrlKey)if(this.settings.onKeyDown)if(!1===this.settings.onKeyDown(e))return e.stopPropagation(),e.preventDefault(),!1;return!0}},handleSearchEvents:function handleSearchEvents(){var _this3=this;this.settings.noSearch&&this.searchInput.prop("readonly",!0),this.filterTerm||(this.searchKeyMode=!1),this.searchInput.on("keydown.".concat("dropdown"),(function(e){var searchInput=$(_this3);return!!_this3.ignoreKeys(searchInput,e)&&_this3.handleKeyDown(searchInput,e)})).on("input.".concat("dropdown"),(function(e){_this3.isFiltering=!0,_this3.handleAutoComplete(e)}))},filterList:function filterList(term){var typeahead=!1;this.settings.source&&"typeahead"===this.settings.reload&&(typeahead=!0,this.callSource());var results,self=this,selected=!1,list=$(".dropdown-option",this.listUl),headers=$(".group-label",this.listUl),hasIcons=!1;list.length&&this.list&&(!this.list||this.list.length)&&(term||(term=""),results=!typeahead&&term&&term.length?this.listfilter.filter(list,term):list,this.list.addClass("search-mode"),this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.searchInput.removeAttr("aria-activedescendant"),this.unhighlightOptions(),results&&(results.length||term)?(results.removeClass("hidden"),list.not(results).add(headers).addClass("hidden"),list.filter(results).each((function(i){var li=$(this),a=li.children("a");li.attr("tabindex",0===i?"0":"-1"),selected||(self.highlightOption(li),selected=!0);var exp=self.getSearchRegex(term),text=li.text();text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=xssUtils.escapeHTML(text)).replace(/&lt;/g,"&#16;")).replace(/&gt;/g,"&#17;")).replace(/&apos;/g,"&#18;")).replace(/&quot;/g,"&#19;")).replace(/&amp;/g,"&")).replace(exp,'<span class="dropdown-highlight">$1</span>').trim()).replace(/&#16;/g,"&lt;")).replace(/&#17;/g,"&gt;")).replace(/&#18;/g,"&apos;")).replace(/&#19;/g,"&quot;");var icon=0!==li.children("a").find("svg").length?(new XMLSerializer).serializeToString(li.children("a").find("svg")[0]):"",swatch=li.children("a").find(".swatch"),swatchHtml=0!==swatch.length?swatch[0].outerHTML:"";icon&&(hasIcons=!0),a[0]&&(a[0].innerHTML=swatchHtml+icon+text)})),headers.each((function(){var children=$(this).nextUntil(".group-label, .selector").not(".hidden");(self.settings.showEmptyGroupHeaders||children.length)&&$(this).removeClass("hidden")})),term="",this.position(),hasIcons&&this.list.find("svg").length>2&&this.list.find("svg").last().changeIcon("icon-empty-circle")):this.resetList())},resetList:function resetList(){if(this.settings.source&&"typeahead"===this.settings.reload)return this.filterTerm="",this.searchKeyMode=!1,void this.callSource(null,!0);if(this.list&&(!this.list||this.list.length)){this.list.removeClass("search-mode");var lis=this.listUl.find("li"),hasIcons=!1;lis.removeAttr("style").each((function(){var a=$(this).children("a"),li=$(this),text=xssUtils.escapeHTML(a.text()),icon=0!==li.children("a").find("svg").length?(new XMLSerializer).serializeToString(li.children("a").find("svg")[0]):"",swatch=li.children("a").find(".swatch"),swatchHtml=0!==swatch.length?swatch[0].outerHTML:"";icon&&(hasIcons=!0),a[0]&&(a[0].innerHTML=swatchHtml+icon+text)})),this.list.hasClass("is-ontop")&&(this.list[0].style.top="".concat(this.pseudoElem.offset().top-this.list.height()+this.pseudoElem.outerHeight()-2,"px")),this.settings.multiple&&this.updateList(),lis.removeClass("hidden"),this.position(),hasIcons&&this.list.find("svg").length>2&&this.list.find("svg").last().changeIcon("icon-empty-circle"),2===this.list.find("svg").length&&this.list.find("svg").last().remove()}},selectBlank:function selectBlank(){var blank=this.element.find("option").filter((function(){return!this.value||0===$.trim(this.value).length}));blank.length&&(blank[0].selected=!0,blank[0].setAttribute("selected",!0),this.element.triggerHandler("updated"),this.element.triggerHandler("change"))},handleKeyDown:function handleKeyDown(input,e){var next,selectedIndex=this.element[0].selectedIndex||-1,options=this.element[0].options,key=e.which;if(!this.isLoading()){if(this.settings.onKeyDown)if(!1===this.settings.onKeyDown(e))return e.stopPropagation(),e.preventDefault(),!1;switch(this.isOpen()&&(options=this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)"),selectedIndex=-1,$(options).each((function(index){$(this).is(".is-focused")&&(selectedIndex=index)}))),key){case 37:case 8:case 46:if(!this.isOpen())return this.selectBlank(),e.stopPropagation(),e.preventDefault(),!1;break;case 9:return this.isOpen()&&(this.closeList("tab"),this.activate()),!0;case 27:if(this.isOpen()){this.element.closest(".modal.is-visible").data("listclosed",!0);var tdContainer=this.pseudoElem?this.pseudoElem.parents("td"):null;return this.closeList("cancel"),this.activate(),tdContainer&&tdContainer.focus(),e.stopPropagation(),!1}break;case 32:case 13:if(this.isOpen()){if(32===key&&!0===this.searchKeyMode)break;e.preventDefault(),options.length&&selectedIndex>-1&&this.selectOption(this.correctValue($(options[selectedIndex]))),this.settings.closeOnSelect&&(this.closeList("select"),this.activate())}return e.stopPropagation(),!1;case 38:if(e.shiftKey)return;return this.searchKeyMode=!1,selectedIndex>0&&(next=$(options[selectedIndex-1]),this.highlightOption(next),this.setItemIconOverColor(next),next.parent().find(".is-focused").removeClass("is-focused"),next.addClass("is-focused")),e.stopPropagation(),e.preventDefault(),!1;case 40:if(e.shiftKey)return;return this.searchKeyMode=!1,selectedIndex<options.length-1&&(next=$(options[selectedIndex+1]),this.highlightOption(next),this.setItemIconOverColor(next),next.parent().find(".is-focused").removeClass("is-focused"),next.addClass("is-focused")),e.stopPropagation(),e.preventDefault(),!1;case 35:this.searchKeyMode=!1;var last=$(options[options.length-1]);return this.highlightOption(last),e.stopPropagation(),!1;case 36:this.searchKeyMode=!1;var first=$(options[0]);return this.highlightOption(first),e.stopPropagation(),!1}return this.isOpen()||this.isControl(key)||this.settings.source||this.settings.noSearch||(this.isFiltering=!0,this.filterTerm=$.actualChar(e),this.searchInput&&this.searchInput.length&&this.searchInput.val($.actualChar(e)),this.toggle()),this.searchKeyMode=!0,this.searchInput&&this.searchInput.attr("aria-activedescendant",""),!0}},handlePseudoElemKeydown:function handlePseudoElemKeydown(e){var target=$(e.target),key=e.key;if(target.is(".is-readonly"))return!0;var isEscapeKey="Esc"===key||"Escape"===key;if(["Alt","Shift","Control","Meta"].indexOf(key)>-1)return!1;if(!this.ignoreKeys(target,e))return!1;if(this.settings.onKeyDown&&!1===this.settings.onKeyDown(e))return e.stopPropagation(),e.preventDefault(),!1;if(["ArrowDown","ArrowUp","Down","Up","Enter","Spacebar"," "].indexOf(key)>-1)return this.isOpen()||this.open(),this.settings.noSearch&&!e.ctrlKey&&this.handleKeyDown(target,e),!1;var isOSX="Mac OS X"===Environment.os.name;return!isOSX&&"Delete"===key||isOSX&&"Backspace"===key?(this.selectBlank(),"Backspace"===key&&(e.stopPropagation(),e.preventDefault()),!0):isEscapeKey||"Tab"===key?!this.settings.noSearch||!this.isOpen()||this.handleKeyDown(target,e):(this.handleAutoComplete(e),!0)},handleAutoComplete:function handleAutoComplete(e){var _this4=this;if(!this.isLoading()){var self=this;if(this.timer&&clearTimeout(this.timer),"input"===e.type)this.filterTerm=this.searchInput.val();else{if(this.filterTerm+=$.actualChar(e).toLowerCase(),""===this.filterTerm)return;e.key===this.filterTerm||e.key.toLowerCase()!==this.filterTerm||self.settings.noSearch||(this.filterTerm=e.key)}this.timer=setTimeout((function(){self.settings.noSearch?self.selectStartsWith(self.filterTerm):(_this4.searchKeyMode=!0,self.isOpen()?filter():self.open(filter))}),self.settings.delay)}function filter(){""===self.filterTerm?self.resetList():self.filterList(self.filterTerm.toLowerCase())}},isControl:function isControl(keycode){return keycode>7&&keycode<48||keycode>90&&keycode<94||keycode>111&&keycode<146},activate:function activate(useSearchInput){var self=this,input=this.pseudoElem;(useSearchInput||self.isMobile())&&(input=this.searchInput),this.currentlyScrolledPos&&(this.listUl.scrollTop(this.currentlyScrolledPos),delete this.currentlyScrolledPos),useSearchInput&&input&&(input.hasClass("is-readonly")||!0===input.prop("readonly"))||(!function selectText(){self.isMobile()||self.filterTerm||!input||(input[0].setSelectionRange?input[0].setSelectionRange(0,input[0].value.length):"INPUT"===input[0].tagName&&input[0].select())}(),input&&input[0].focus())},getSearchRegex:function getSearchRegex(term){var regex;try{regex=new RegExp("(".concat(stringUtils.escapeRegExp(term),")"),"i")}catch(e){regex=/[\s\S]*/i}return regex},getOptionText:function getOptionText(opts){var text="";return opts||(opts=this.element.find("option:selected")),opts.each((function(){text.length>0&&(text+=", "),text+=$(this).text().trim()})),text},open:function open(callback){var self=this;function completeOpen(){self.isMobile()&&$(".tooltip:not(.is-hidden)").hide(),self.updateList(),self.openList(),callback&&"function"==typeof callback&&callback.call(this)}this.inputTimer()&&(this.element.is(":disabled")||this.pseudoElem.hasClass("is-disabled")||this.pseudoElem.hasClass("is-readonly")||self.callSource(completeOpen)||completeOpen())},openList:function openList(){var pos,current=this.previousActiveDescendant?this.list.find('.dropdown-option[data-val="'.concat(this.previousActiveDescendant.replace(/"/g,"/quot/"),'"]')):this.list.find(".is-selected"),self=this;if(this.touchPrevented=!1,$("select").each((function(){var data=$(this).data();data.dropdown&&data.dropdown.closeList("cancel")})),$(".popupmenu.is-open").filter((function(){return 0===$(this).parents(".popupmenu").length})).each((function(){var trigger=$(this).data("trigger");if(trigger&&trigger.length){var api=$(this).data("trigger").data("popupmenu");api&&"function"==typeof api.close&&api.close()}})),this.isOpen()||this.list.appendTo("body"),this.list.show(),this.isShortField&&this.list[0].classList.add("dropdown-short"),this.pseudoElem.attr("aria-expanded","true").addClass("is-open"),this.searchInput.attr("aria-activedescendant",current.children("a").attr("id")),this.settings.showTags&&this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.isInGrid=1===this.pseudoElem.closest(".datagrid-row").length,this.pseudoElem.parent().hasClass("is-inline")&&(this.isInGrid=!1),this.isInGrid){var rowHeight=this.pseudoElem.closest(".datagrid").attr("class").replace("datagrid","");this.list.addClass("datagrid-dropdown-list ".concat(rowHeight))}1===this.pseudoElem.closest(".datagrid-filter-wrapper").length&&this.list.addClass("datagrid-filter-dropdown");var cssClass=this.settings.cssClass;if(cssClass&&"string"==typeof cssClass&&this.list.addClass(cssClass),this.position(),this.settings.maxWidth&&this.list.css("max-width","".concat(this.settings.maxWidth,"px")),"string"==typeof this.filterTerm&&this.filterTerm.length>0)this.searchInput.val(this.filterTerm);else if(!this.settings.showTags){var selectedOpts=$(this.selectedOptions),text=this.getOptionText(selectedOpts);this.searchInput.val(text)}var noScroll=this.settings.multiple;function isDropdownElement(target){return target.closest(".dropdown, .multiselect").length>0||target.closest(".dropdown-list").length>0||!0===self.touchmove}function clickDocument(e){var target=$(e.target);if(self.touchPrevented||isDropdownElement(target)&&!target.is(".icon"))return e.preventDefault(),void(self.touchPrevented=!1);self.closeList("cancel")}this.highlightOption(current,noScroll),this.settings.multiple&&this.listUl.find(".is-selected").length>0&&(this.highlightOption(this.listUl.find(".dropdown-option").eq(0)),setTimeout((function(){self.listUl.scrollTop(0)}),0)),this.handleSearchEvents(),this.activate(!0),this.element.trigger("listopened"),this.isMobile()&&self.searchInput.on("keypress.dropdown",(function(e){13===e.which&&self.closeList("select")})),self.list.removeClass("dropdown-tall").on("touchend.list click.list","li",(function(e){if(!self.touchPrevented){var itemSelected=self.selectListItem($(this));e.preventDefault(),itemSelected&&e.stopPropagation()}})).on("mouseenter.list","li",(function(){self.highlightOption($(this),!0)})),setTimeout((function(){self.list.addClass("is-closable")}),100),$(document).on("touchstart.dropdown",(function touchStartCallback(e){self.touchPrevented=!1,pos={x:e.originalEvent.touches[0].pageX,y:e.originalEvent.touches[0].pageY},$(document).on("touchmove.dropdown",(function(evt){var newPos_x=evt.originalEvent.touches[0].pageX,newPos_y=evt.originalEvent.touches[0].pageY;(newPos_x>=pos.x+10||newPos_x<=pos.x-10||newPos_y>=pos.y+10||newPos_y<=pos.y-10)&&(self.touchPrevented=!0)}))})).on("touchend.dropdown touchcancel.dropdown",(function touchEndCallback(e){if($(document).off("touchmove.dropdown"),e.preventDefault(),self.touchPrevented)return e.stopPropagation(),!1;clickDocument(e)})).on("click.dropdown",clickDocument);var parentScrollableArea=$(".modal.is-visible .modal-body-wrapper"),subScrollableSection=self.element.closest(".scrollable, .scrollable-x, .scrollable-y",".datagrid-wrapper");subScrollableSection.length&&(parentScrollableArea=subScrollableSection),parentScrollableArea.length&&(this.parentScrollableArea=parentScrollableArea,this.parentScrollableArea.on("scroll.dropdown",(function scrollDocument(e){var focus=$("*:focus");self.touchPrevented||isDropdownElement($(e.target))||focus.is(".timepicker")?self.touchPrevented=!1:self.closeList("cancel")}))),$("body").on("resize.dropdown",(function(){self.position(),void 0===window.orientation&&self.closeList("cancel")})),void 0!==window.orientation&&$(window).on("orientationchange.dropdown",(function(){self.closeList("cancel")}))},position:function position(){var self=this,positionOpts={parentXAlignment:"left",placement:"bottom",strategies:["flip","shrink-y"]};this.list[0].removeAttribute("style"),this.listUl[0].removeAttribute("style");var parentElement=this.pseudoElem;this.isInGrid&&(parentElement=this.element.closest(".datagrid-cell-wrapper"));var parentElementStyle=window.getComputedStyle(parentElement[0]),parentElementBorderWidth=2*parseInt(parentElementStyle.borderLeftWidth,10),parentElementWidth=Math.round(parseInt(parentElement[0].clientWidth,10)+parentElementBorderWidth);this.searchInput[0].style.cssText="width: ".concat(parentElementWidth,"px !important");var useParentWidth=Math.round(this.list.width())<=parentElementWidth;if(this.searchInput[0].style.width="",positionOpts.parent=parentElement,positionOpts.useParentWidth=useParentWidth,!this.settings.showTags){var isRetina=window.devicePixelRatio>1,isChrome="chrome"===Environment.browser.name;positionOpts.y=-(parseInt(parentElement[0].clientHeight,10)+parseInt(parentElementStyle.borderTopWidth,10)+parseInt(parentElementStyle.borderBottomWidth,10)-(!isChrome&&isRetina?1:0)),positionOpts.x=0}self.settings.placementOpts&&self.settings.placementOpts.x&&(positionOpts.x=self.settings.placementOpts.x),this.list.one("afterplace.dropdown",(function dropdownAfterPlaceCallback(e,placementObj){!0===placementObj.wasFlipped&&(self.list.addClass("is-ontop"),self.listUl.prependTo(self.list));var listStyle=window.getComputedStyle(self.list[0]),listStyleTop=listStyle.top?parseInt(listStyle.top,10):0,browserOffset=0;"firefox"===Environment.browser.name&&(browserOffset=4);var adjustedUlHeight,ulHeight=parseInt(self.listUl[0].offsetHeight,10),listHeight=parseInt(self.list[0].offsetHeight,10)+5,searchInputHeight=parseInt(self.searchInput[0].offsetHeight,10),isToBottom=parseInt(self.list[0].offsetTop,10)+parseInt(self.list[0].offsetHeight,10)>=window.innerHeight;return searchInputHeight<listHeight-2*searchInputHeight&&ulHeight+searchInputHeight>=listHeight&&(adjustedUlHeight="".concat(listHeight-searchInputHeight-5,"px"),isToBottom&&(self.list[0].style.height="".concat(parseInt(listHeight,10)-10,"px"))),placementObj.wasFlipped&&(adjustedUlHeight="".concat(listHeight-searchInputHeight-browserOffset-5,"px"),self.isShortField||(self.list[0].style.top="".concat(listStyleTop,"px"))),adjustedUlHeight&&(self.listUl[0].style.height=adjustedUlHeight),placementObj})).place(positionOpts),this.list.data("place").place(positionOpts)},selectListItem:function selectListItem(target){var ddOption=target.closest("li");if(ddOption.length&&(target=ddOption),target.is(".separator, .group-label"))return!1;if(target.is(".dropdown-select-all-anchor")&&(target=target.parent()),this.settings.multiple&&target[0].classList.contains("dropdown-select-all-list-item")){var doSelectAll=!target[0].classList.contains("is-selected");return target[0].classList[doSelectAll?"add":"remove"]("is-selected"),doSelectAll?target[0].setAttribute("aria-selected","true"):target[0].removeAttribute("aria-selected"),this.selectAll(doSelectAll),!0}var cur=this.correctValue(target);if(cur.is(":disabled"))return!1;if(this.selectOption(cur),this.settings.closeOnSelect&&this.closeList("select"),this.isMobile())return!0;if(this.activate(!this.settings.closeOnSelect),this.settings.showSelectAll&&this.list){var opts=this.element.find("option"),selectedOpts=opts.filter(":selected");opts.length>selectedOpts.length?this.list.find(".dropdown-select-all-list-item").removeClass("is-selected").removeAttr("aria-selected"):this.list.find(".dropdown-select-all-list-item").addClass("is-selected").attr("aria-selected","true")}return!0},correctValue:function correctValue(option){var val=option.attr("data-val").replace(/"/g,"/quot/"),cur=this.element.find('option[value="'.concat(val,'"]'));return(0===cur.length||cur.length>1)&&(cur=this.element.find("option").filter((function(){var elem=$(this),attr=elem.attr("value");return elem.text()===val||attr&&attr.replace(/"/g,"/quot/")===val}))),cur},close:function close(){return this.closeList("cancel")},closeList:function closeList(action){this.list&&this.list.is(":visible")&&this.isListClosable()&&this.inputTimer()&&(this.touchmove&&(this.touchmove=!1),this.filterTerm="",this.searchKeyMode=!1,this.setDisplayedValues(),this.searchInput.off(["input.".concat("dropdown"),"keydown.".concat("dropdown")].join(" ")),this.listUl.find(".has-tooltip").each((function(){var api=$(this).data("tooltip");api&&api.destroy()})),this.list.off(["click.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown"),"mousewheel.".concat("dropdown"),"mouseenter.".concat("dropdown")].join(" ")).remove(),this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.searchInput.removeAttr("aria-activedescendant"),$(document).off(["click.".concat("dropdown"),"scroll.".concat("dropdown"),"touchstart.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown")].join(" ")),this.parentScrollableArea&&(this.parentScrollableArea.off("scroll.dropdown"),delete this.parentScrollableArea),$("body").off("resize.dropdown"),$(window).off("orientationchange.dropdown"),this.element.trigger("listclosed",action),this.activate(),this.toggleTooltip(),this.list=null,this.searchInput=null,this.listUl=null)},scrollToOption:function scrollToOption(current){current&&0!==current.length&&(this.listUl.scrollTop(0),this.listUl.scrollTop(current.offset().top-this.listUl.offset().top-this.listUl.scrollTop()-40))},handleBlur:function handleBlur(){return this.closeList("cancel"),!0},isLoading:function isLoading(){return this.element.is(".is-loading")&&this.element.is(".is-blocked")},isOpen:function isOpen(){return!!this.pseudoElem.hasClass("is-open")},toggle:function toggle(){this.isOpen()||this.isLoading()?this.closeList("cancel"):this.open()},toggleList:function toggleList(){return deprecateMethod(this.toggle,this.toggleList).apply(this)},highlightOption:function highlightOption(listOption,noScroll){if(listOption&&(0===listOption.length&&(listOption=this.list.find(".dropdown-option").eq(0)),!listOption.is(".separator, .group-label"))){var option=this.element.find('option[value="'.concat(listOption.attr("data-val"),'"]'));option.hasClass(".is-disabled")||option.is(":disabled")||this.isOpen()&&(this.setItemIconOverColor(),this.list.find(".is-focused").removeClass("is-focused").attr({tabindex:"-1"}),option.hasClass("clear")||(this.setItemIconOverColor(listOption),listOption.addClass("is-focused").attr({tabindex:"0"})),this.searchInput.attr("aria-activedescendant",listOption.children("a").attr("id")),noScroll&&!1!==noScroll&&void 0!==noScroll||this.scrollToOption(listOption))}},unhighlightOptions:function unhighlightOptions(listOptions,noScroll){listOptions&&listOptions.length||(listOptions=this.list.find(".is-selected")),this.setItemIconOverColor(),listOptions.removeClass("is-focused").attr({tabindex:"-1"}),this.searchInput.removeAttr("aria-activedescendant"),noScroll&&!1!==noScroll&&void 0!==noScroll||this.scrollToOption(listOptions.first())},renderListItem:function renderListItem(optionEl){var optionVal=optionEl.value,selected=optionEl.selected,li=this.listUl.find('li[data-val="'.concat(optionVal,'"]'));if(selected)return li[0].classList.add("is-selected"),void li[0].setAttribute("aria-selected",!0);li[0].classList.remove("is-selected"),li[0].removeAttribute("aria-selected")},selectAll:function selectAll(doSelectAll){var selector_options="option:not(.is-disabled):not(:disabled)",selector_items="li.dropdown-option:not(.separator):not(.group-label):not(.is-disabled)",options=[].slice.call(this.element[0].querySelectorAll(selector_options)),items=[].slice.call(this.listUl[0].querySelectorAll(selector_items)),last=options[options.length-1],text="";if(doSelectAll){items.forEach((function(node){node.classList.add("is-selected"),node.setAttribute("aria-selected",!0)})),options.forEach((function(node){node.selected=!0,node.setAttribute("selected",!0)})),text=this.getOptionText($(options));var maxlength=this.element[0].getAttribute("maxlength");maxlength&&(text=text.substr(0,maxlength))}else items.forEach((function(node){node.classList.remove("is-selected"),node.removeAttribute("aria-selected")})),options.forEach((function(node){node.selected=!1,node.setAttribute("selected",!1),node.removeAttribute("selected")}));this.previousActiveDescendant=last.value||"",this.pseudoElem[0].querySelector("span").textContent=text,this.searchInput[0].value=text,this.updateItemIcon(last),this.list[0].classList.contains("search-mode")&&this.resetList(),this.activate(!0),this.setBadge(last),this.toggleTooltip(),this.element.trigger("change").triggerHandler("selected")},selectOptions:function selectOptions(options,noTrigger){Array.isArray(options)&&(options=$(options));var self=this;options.each((function(){self.selectOption($(this),noTrigger)})),self.element.trigger("change").triggerHandler("selected")},selectOption:function selectOption(option,noTrigger){var li;if(option&&option.length&&(!option.is("li")||(li=option,0===(option=this.element.find('option[value="'.concat(option.attr("data-val"),'"]'))).length&&(option=this.element.find("option").filter((function(){return $(this).text()===li.attr("data-val")}))),!option.prop("disabled")))){var optionVal=option.val();"string"==typeof option?(li=this.listUl.find('li[data-val="'.concat(option,'"]')),optionVal=option,option=this.element.find('option[value="'.concat(optionVal,'"]'))):"string"==typeof optionVal&&(optionVal=optionVal.replace(/"/g,"/quot/"),li=this.listUl.find('li[data-val="'.concat(optionVal,'"]')));var isAdded=!0,currentValue=this.selectedValues,clearSelection=!1;!option.hasClass("clear")&&li||(clearSelection=!0),clearSelection&&this.deselectAll(),this.settings.multiple&&(Array.isArray(currentValue)||(currentValue=[currentValue]),currentValue.indexOf(optionVal)>-1&&(isAdded=!1)),isAdded?(this.select(option[0]),this.previousActiveDescendant=optionVal):(this.deselect(option[0]),this.previousActiveDescendant=void 0);var listScrollTop=this.listUl[0].scrollTop;listScrollTop>0&&(this.currentlyScrolledPos=listScrollTop),this.renderListItem(option[0]),this.setDisplayedValues(),this.updateItemIcon(option),noTrigger||(this.element.trigger("change").triggerHandler("selected",[option,isAdded]),this.toggleTooltip()),this.settings.multiple&&this.activate(!0),this.setBadge(option);var id=this.element.attr("id");if(Environment.browser.isIE11()&&id){var ieHtml=$("#".concat(id)).html(),ieVal=$("#".concat(id)).val();ieHtml&&this.element.html(ieHtml),ieVal&&this.element.val(ieVal)}}},select:function select(optionEl){optionEl&&optionEl instanceof HTMLOptionElement&&(this.settings.multiple&&this.selectedValues.length>=this.settings.maxSelected||(optionEl.selected=!0))},selectValue:function selectValue(value){if("string"==typeof value){var option=this.element.find('option[value="'.concat(value,'"]'));option&&option.length&&(this.select(option[0]),this.updated())}},deselect:function deselect(optionEl){optionEl&&optionEl instanceof HTMLOptionElement&&(optionEl.selected=!1)},deselectValue:function deselectValue(value){if("string"==typeof value){var option=this.element.find('option[value="'.concat(value,'"]'));option&&option.length&&(this.deselect(option[0]),this.updated())}},deselectAll:function deselectAll(){var _this5=this;this.element.find("option").each((function(option){$(option).prop("selected",!1),_this5.deselectValue(option)}))},selectStartsWith:function selectStartsWith(char){if("string"==typeof char){var elem=this.element[0];this.filterTerm="";var newIdx=-1,totalMatches=0;this.searchMatches&&this.searchMatches[char]||(this.searchMatches={},this.searchMatches[char]=[]);for(var i=0;i<elem.options.length;i++){if(0===elem.options[i].innerText.toLowerCase().indexOf(char)){if(-1===this.searchMatches[char].indexOf(i)){this.searchMatches[char].push(i),newIdx=i;break}totalMatches++}else;}if(-1===newIdx){if(!this.searchMatches[char].length)return;totalMatches===this.searchMatches[char].length&&(newIdx=this.searchMatches[char][0],this.searchMatches[char].length=1)}elem.selectedIndex=newIdx,this.updated(),this.element.trigger("change")}},setBadge:function setBadge(option){if(this.badges){var badge=this.element.parent().find(".badge");0===badge.length&&(this.element.parent().find(".dropdown-wrapper").append('<span class="badge">1</span>'),badge=this.element.parent().find(".badge")),badge.attr("class","badge ".concat(option.attr("data-badge-color")?option.attr("data-badge-color"):"azure07")).text(option.attr("data-badge"))}},callSource:function callSource(callback,doReset){var self=this,searchTerm="";if(doReset||!this.isOpen()||this.element.hasClass("search-mode")||(searchTerm=this.searchInput.val()),!this.settings.source)return!1;this.isFiltering=!1;var sourceType=_typeof(this.settings.source),response=function response(data,isManagedByTemplate){var list="",val=self.element.val();function replaceDoubleQuotes(content){return content.replace(/"/g,"'")}function buildOption(option){if(null!=option){var id="",selected="",textContent="";"string"==typeof option&&(option={value:option}),void 0!==option.value&&(option.value=replaceDoubleQuotes(option.value)),void 0!==option.id&&(isNaN(option.id)||(option.id="".concat(option.id)),option.id=replaceDoubleQuotes(option.id),id=' id="'.concat(option.id,'"')),void 0!==option.label&&option.label.length&&(option.label=replaceDoubleQuotes(option.label),textContent=option.label);var hasSelectedValues=self.selectedValues.indexOf(val)>-1;self.settings.multiple?val.forEach((function(value){value===option.value&&(option.selected=!0,selected=" selected")})):(option.value===val||hasSelectedValues)&&(option.selected=!0,selected=" selected"),textContent.length||textContent===option.value||(textContent+=option.value),list+="<option".concat(id,' value="').concat(option.value,'"').concat(selected,">\n          ").concat(textContent,"\n        </option>")}}if(!self.isFiltering&&!utils.equals(data,self.dataset)){if(self.dataset=data,!isManagedByTemplate){self.element.empty();for(var i=0;i<data.length;i++){var opts=void 0;if(data[i].group){opts=data[i].options,list+='<optgroup label="'.concat(data[i].group,'">');for(var ii=0;ii<opts.length;ii++)buildOption(opts[ii]);list+="</optgroup>"}else buildOption(data[i])}self.element.append(list)}self.updateList(searchTerm)}self.element.triggerHandler("complete"),self.element.trigger("requestend",[searchTerm,data]),"function"==typeof callback&&callback()};if(self.element.triggerHandler("start"),self.element.trigger("requeststart"),"function"===sourceType)this.settings.source(response,searchTerm,this.settings.sourceArguments);else if("object"===sourceType){var sourceData=$.isArray(this.settings.source)?this.settings.source:[this.settings.source];response(sourceData)}else{var sourceURL=this.settings.source.toString();$.getJSON(sourceURL).done((function(data){response(data)})).fail((function(){response([])}))}return!0},getDataAttributes:function getDataAttributes(attr,attrToExclude){if(attr){"string"==typeof attr&&(attr=[attr]);var toExclude=attrToExclude||[];"string"==typeof toExclude&&(toExclude=[toExclude]);var attrToCopy={obj:{},str:"",isExclude:function isExclude(attrib){return $.inArray(attrib,toExclude)>-1}};for(var key in attr)attr.hasOwnProperty(key)&&(attrToCopy.name="".concat(attr[key].name),attrToCopy.isData="data-"===attrToCopy.name.substr(0,5),attrToCopy.isData&&!attrToCopy.isExclude(attrToCopy.name)&&(attrToCopy.obj[attrToCopy.name]=attr[key].value,attrToCopy.str+=" ".concat(attrToCopy.name,'="').concat(attr[key].value,'"')));return{str:attrToCopy.str,obj:attrToCopy.obj}}},setCode:function setCode(code){warnAboutDeprecation(this.setCode,this.element.val);var self=this,doSetting=function doSetting(){self.element.val(code),self.updated()};self.callSource(doSetting)||doSetting()},isMobile:function isMobile(){return["ios","android"].indexOf(Environment.os.name)>-1},isListClosable:function isListClosable(){return this.list.hasClass("is-closable")},toTagData:function toTagData(){var tagData=[],componentID=this.element[0].id;return componentID||(componentID=utils.uniqueId(this.element[0],this.element[0].className)),this.selectedOptions.forEach((function(opt){tagData.push({content:opt.innerText.trim(),dismissible:!0,href:"#",id:"".concat(componentID,"-tag-").concat(opt.value),style:"secondary",value:opt.value})})),tagData},disable:function disable(){this.element.prop("disabled",!0).prop("readonly",!1),this.pseudoElem.is($(document.activeElement))&&this.pseudoElem.blur(),this.pseudoElem.addClass("is-disabled").removeClass("is-readonly").attr("tabindex","-1").prop("readonly",!1).prop("disabled",!0),this.closeList("cancel"),this.settings.showTags&&this.pseudoElem.find(".tag").addClass("is-disabled")},isDisabled:function isDisabled(){return this.element.prop("disabled")},enable:function enable(){this.element.prop("disabled",!1).prop("readonly",!1),this.pseudoElem.prop("disabled",!1).prop("readonly",!1).attr("tabindex","0").removeClass("is-disabled").removeClass("is-readonly"),this.settings.showTags&&this.pseudoElem.find(".tag").removeClass("is-disabled")},readonly:function readonly(){this.element.prop("disabled",!1).prop("readonly",!0),this.pseudoElem.removeClass("is-disabled").addClass("is-readonly").attr("tabindex",this.element.attr("tabindex")||"0").prop("disabled",!1).prop("readonly",!0),this.closeList("cancel")},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),this.closeList("cancel"),this.pseudoElem&&this.pseudoElem.hasClass("is-open")&&this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.settings.multiple&&!0===this.settings.multiple?this.element.prop("multiple",!0):this.element.prop("multiple",!1),!0===this.element.prop("readonly")?this.readonly():this.pseudoElem.removeClass("is-readonly"),this.pseudoElem[this.element.prop("disabled")?"addClass":"removeClass"]("is-disabled"),this.updateList(),this.setDisplayedValues(),this.toggleTooltip(),this.element.trigger("has-updated"),this},destroy:function destroy(){this.placeholder&&delete this.placeholder,this.currentlyScrolledPos&&delete this.currentlyScrolledPos,$.removeData(this.element[0],"dropdown"),this.closeList("cancel"),this.pseudoElem.off().remove(),this.icon.remove(),this.wrapper.remove(),this.listfilter.destroy(),this.element.removeAttr("style"),this.element.closest("form").off("reset.dropdown"),this.element.off(),this.label.off();var list=document.body.querySelector("#dropdown-list");list&&this.isOpen()&&list.parentNode.removeChild(list)},handleEvents:function handleEvents(){var _this6=this,self=this;this.pseudoElem.on("keydown.dropdown",(function(e){return _this6.handlePseudoElemKeydown(e)})).on("click.dropdown",(function(e){e.originalEvent.ctrlKey&&e.originalEvent.shiftKey||e.stopPropagation()})).on("mouseup.dropdown",(function(e){if(2!==e.button){var containedByTag=$(e.target).parents(".tag").length>0,isTag=!1;e.target instanceof HTMLElement&&"string"==typeof e.target.className&&(isTag=e.target.classList.contains("tag")),isTag||containedByTag||self.toggle()}})).on("touchend.dropdown touchcancel.dropdown",(function(e){e.stopPropagation(),self.toggle(),e.preventDefault()})),self.element.on("activated.dropdown",(function(){self.label.trigger("click")})).on("updated.dropdown",(function(e){e.stopPropagation(),self.updated()})).on("openlist.dropdown",(function(){self.toggle()})),self.element.closest("form").on("reset.dropdown",(function(){setTimeout((function(){self.element.triggerHandler("updated")}),1)})),this.label.on("click",(function(){self.pseudoElem.focus()}))}},$.fn.dropdown=function(settings){return this.each((function(){var instance=$.data(this,"dropdown");instance?instance.updated(settings):instance=$.data(this,"dropdown",new Dropdown(this,settings))}))};var TIMEPICKER_MODES=["standard","range"],TIMEPICKER_DEFAULTS=function TIMEPICKER_DEFAULTS(){return{locale:null,language:null,timeFormat:void 0,minuteInterval:5,secondInterval:5,mode:TIMEPICKER_MODES[0],roundToInterval:!0,parentElement:null,returnFocus:!0}};function TimePicker(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,TIMEPICKER_DEFAULTS),this.init()}TimePicker.prototype={init:function init(){this.setLocaleThenBuild()},setLocaleThenBuild:function setLocaleThenBuild(){var _this=this,languageDf=Locale.getLocale(this.settings.language),localeDf=Locale.getLocale(this.settings.locale);return $.when(localeDf,languageDf).done((function(locale,lang){_this.locale=Locale.cultures[locale]||Locale.currentLocale,_this.language=lang||_this.settings.language||_this.locale.language||null,_this.settings.language=_this.language,_this.setCurrentCalendar(),_this.build().handleEvents()})),this},setCurrentCalendar:function setCurrentCalendar(){return this.currentCalendar=Locale.calendar(this.locale.name,this.settings.language,this.settings.calendarName),void 0===this.settings.timeFormat&&(this.settings.timeFormat=this.currentCalendar.timeFormat||"h:mm a"),this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.build(),this},setup:function setup(){function sanitizeIntervals(value,type){(!type||["minute","second"].indexOf(type)<0)&&(type="minute");var defaultInterval=TIMEPICKER_DEFAULTS()["".concat(type,"Interval")];if(void 0===value||isNaN(value))return defaultInterval;var intValue=parseInt(value,10);return intValue>0&&intValue<60?intValue:defaultInterval}function sanitizeRoundToInterval(value){return!0===value}return this.id="".concat(utils.uniqueId(this.element,"timepicker"),"-id"),this.hoursId="timepicker-hours-".concat(this.id.toString()),this.minutesId="timepicker-minutes-".concat(this.id.toString()),this.secondsId="timepicker-seconds-".concat(this.id.toString()),this.periodId="timepicker-period-".concat(this.id.toString()),this.element.is("[data-round-to-interval]")&&(this.settings.roundToInterval=sanitizeRoundToInterval(this.element.attr("data-round-to-interval"))),this.element.is("[data-minute-interval]")&&(this.settings.minuteInterval=sanitizeIntervals(this.element.attr("data-minute-interval"),"minute")),this.settings.timeFormat=function sanitizeTimeFormat(value){return value&&value.toUpperCase().match("H")&&value.match("mm")?value:TIMEPICKER_DEFAULTS().timeFormat}(24===parseInt(this.element.attr("data-force-hour-mode"),10)?"HH:mm":this.settings.timeFormat),this.settings.minuteInterval=sanitizeIntervals(this.settings.minuteInterval,"minute"),this.settings.secondInterval=sanitizeIntervals(this.settings.secondInterval,"second"),this.settings.mode=function sanitizeMode(value){return $.inArray(value,["standard","range"])>-1?value:TIMEPICKER_DEFAULTS().mode}(this.settings.mode),this.settings.roundToInterval=sanitizeRoundToInterval(this.settings.roundToInterval),this.dayPeriods=this.currentCalendar.dayPeriods,this},build:function build(){return this.setup(),this.settings.parentElement?(this.settings.parentElement.empty(),this.trigger=$(),this.buildStandardPopup(),this.setupStandardEvents(),this):(this.trigger=this.element.next("svg.icon"),0===this.trigger.length&&(this.trigger=$.createIconElement("clock").insertAfter(this.element)),this.addAria().addMask().handleEvents().roundMinutes(),this)},addAria:function addAria(){return this.element.attr({"aria-expanded":"false",role:"combobox"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.find(".audible").remove(),this.label.append('<span class="audible">'.concat(Locale.translate("UseArrow",{locale:this.locale.name,language:this.language}),"</span>")),this},handleKeys:function handleKeys(){var self=this;this.element.on("keydown.timepicker",(function(e){var handled=!1;return 27===e.which&&self.isOpen()&&(handled=!0,self.closeTimePopup()),40!==e.which||self.isOpen()||(handled=!0,self.openTimePopup()),!handled||(e.stopPropagation(),e.preventDefault(),!1)}))},handleBlur:function handleBlur(){var self=this;this.element.on("blur.timepicker",(function(){self.roundMinutes(),setTimeout((function(){self.isOpen()&&0===self.popup.find(":focus").length&&self.closeTimePopup()}),20)}))},is24HourFormat:function is24HourFormat(value){return value||(value=this.settings.timeFormat),!!value&&(value.match("H")||[]).length>0},hourText:function hourText(value){return((this.settings.timeFormat.toUpperCase().match("HH")||[]).length>0&&value<10?"0":"")+value},hasSeconds:function hasSeconds(value){return value||(value=this.settings.timeFormat),(value.match("ss")||[]).length>0},hasDayPeriods:function hasDayPeriods(value){return value||(value=this.settings.timeFormat),(value.match("a")||[]).length>0},getTimeSeparator:function getTimeSeparator(){return this.currentCalendar.dateFormat.timeSeparator},roundMinutes:function roundMinutes(){if(stringUtils.toBoolean(this.settings.roundToInterval)){var val=this.element.val(),timeSeparator=this.getTimeSeparator(),parts=val?val.split(timeSeparator):[],interval=this.settings.minuteInterval;if(parts[1]){if(!this.is24HourFormat(this.settings.timeFormat)){var periodParts=parts[1].split(" ");parts[1]=periodParts[0],periodParts[1]&&parts.push(periodParts[1])}if(parts[1]=parseInt(parts[1],10),parts[1]%interval!=0){parts[1]=Math.round(parts[1]/interval)*interval,parts[1]=parts[1].toString(),parts[1]=(parts[1].length<2?"0":"")+parts[1],"60"===parts[1]&&(parts[1]="00",parts[0]=(parseInt(parts[0],10)+1).toString());var newVal="".concat(parts[0]+timeSeparator+parts[1]," ").concat(parts[2]?parts[2]:"");this.element.val(newVal)}}}},addMask:function addMask(){this.element.data("mask")&&"object"===_typeof(this.element.data("mask"))&&this.element.data("mask").destroy(),this.element.data("mask",void 0);var maskOptions={keepCharacterPositions:!0,process:"date",patternOptions:{format:this.settings.timeFormat}};return this.element[0].getAttribute("data-validate")||this.element.attr("data-validate","time").attr("data-validation-events",JSON.stringify({time:"blur change enter"})).validate(),maskOptions&&this.element.mask(maskOptions),this},buildStandardPopup:function buildStandardPopup(){var selected,self=this,popupContent=$('<div class="timepicker-popup-content"></div>'),timeSeparator=this.getTimeSeparator(),textValue="";this.initValues=self.getTimeFromField();var timeParts=$('<div class="time-parts"></div>').appendTo(popupContent),is24HourFormat=this.is24HourFormat(),hasSeconds=this.hasSeconds(),hasDayPeriods=this.hasDayPeriods(),hourCounter=is24HourFormat?0:1,maxHourCount=is24HourFormat?24:13;for(this.hourSelect=$('<select id="'.concat(this.hoursId,'" data-options="{\'noSearch\': \'true\'}" class="hours dropdown"></select>'));hourCounter<maxHourCount;)selected="",parseInt(self.initValues.hours,10)===hourCounter&&(selected=" selected"),self.hourSelect.append($("<option".concat(selected,">").concat(self.hourText(hourCounter),"</option>"))),hourCounter++;timeParts.append($('<label for="'.concat(this.hoursId,'" class="audible">').concat(Locale.translate("Hours",{locale:this.locale.name,language:this.language}),"</label>"))),timeParts.append(this.hourSelect),timeParts.append($('<span class="label colons">'.concat(timeSeparator,"</span>")));var minuteCounter=0;for(this.minuteSelect=$('<select id="'.concat(this.minutesId,'" data-options="{\'noSearch\': \'true\'}" class="minutes dropdown"></select>'));minuteCounter<=59;)textValue=minuteCounter<10?"0".concat(minuteCounter):minuteCounter,selected="",parseInt(self.initValues.minutes,10)===minuteCounter&&(selected=" selected"),self.minuteSelect.append($("<option".concat(selected,">").concat(textValue,"</option>"))),minuteCounter+=self.settings.minuteInterval;if(this.minuteSelect.find("option[selected]").length||this.minuteSelect.prepend($("<option selected>".concat(self.initValues.minutes,"</option>"))),timeParts.append($('<label for="'.concat(this.minutesId,'" class="audible">').concat(Locale.translate("Minutes",{locale:this.locale.name,language:this.language}),"</label>"))),timeParts.append(this.minuteSelect),hasSeconds){var secondCounter=0;for(this.secondSelect=$('<select id="'.concat(this.secondsId,'" data-options="{\'noSearch\': \'true\'}" class="seconds dropdown"></select>'));secondCounter<=59;)textValue=secondCounter<10?"0".concat(secondCounter):secondCounter,selected="",(parseInt(self.initValues.seconds,10)===secondCounter||!self.initValues.seconds&&"00"===textValue)&&(selected=" selected"),this.secondSelect.append($("<option".concat(selected,">").concat(textValue,"</option>"))),secondCounter+=self.settings.secondInterval;this.secondSelect.find("option[selected]").length||this.secondSelect.prepend($("<option selected>".concat(self.initValues.seconds,"</option>"))),timeParts.append($('<span class="label colons">'.concat(timeSeparator,"</span>"))),timeParts.append($('<label for="'.concat(this.secondsId,'" class="audible">').concat(Locale.translate("Seconds",{locale:this.locale.name,language:this.language}),"</label>"))),timeParts.append(this.secondSelect)}if(!is24HourFormat&&hasDayPeriods){this.periodSelect=$('<select id="'.concat(this.periodId,'" data-options="{\'noSearch\': \'true\'}" class="period dropdown"></select>')),timeParts.append($('<span class="label colons"></span>'));for(var localeDays=this.currentCalendar.dayPeriods,localeCount=0,regexDay=new RegExp(self.initValues.period,"i");localeCount<2;)selected="",regexDay.test(localeDays[localeCount])&&(selected=" selected"),this.periodSelect.append($('<option value="'.concat(localeDays[localeCount],'"').concat(selected,">").concat(localeDays[localeCount],"</option>"))),localeCount++;timeParts.append($('<label for="'.concat(this.periodId,'" class="audible">').concat(Locale.translate("TimePeriod",{locale:this.locale.name,language:this.language}),"</label>"))),timeParts.append(this.periodSelect)}if(this.settings.parentElement)this.settings.parentElement.append(popupContent),self.popup=this.settings.parentElement.find(".timepicker-popup-content").addClass("timepicker-popup").attr("id","timepicker-popup");else{popupContent.append('<div class="modal-buttonset"><button type="button" class="btn-modal-primary set-time">'.concat(Locale.translate("SetTime",{locale:this.locale.name,language:this.language}),"</button></div>"));var placementParent=this.element,placementParentXAlignment=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(placementParentXAlignment="center",placementParent=this.element.next(".icon")),this.trigger.popover({content:popupContent,trigger:"immediate",placement:"bottom",placementOpts:{parent:placementParent,parentXAlignment:placementParentXAlignment,strategies:["flip","nudge","shrink"]},tooltipElement:"#timepicker-popup"}).on("show.timepicker",(function(e,ui){self.afterShow(ui)})).on("hide.timepicker",(function(){self.settings.returnFocus&&self.element.focus()}))}this.trigger.data("tooltip")&&(self.popup=this.trigger.data("tooltip").tooltip,self.popup.addClass("timepicker-popup"))},afterShow:function afterShow(ui){var self=this;ui.find("button").button(),this.hourSelect.val(this.initValues.hours),this.hourSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.hours),this.minuteSelect.val(this.initValues.minutes),this.minuteSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.minutes),this.secondSelect&&(this.secondSelect.val(this.initValues.seconds),this.secondSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.seconds)),self.hasDayPeriods()&&(this.periodSelect.val(this.initValues.period),this.periodSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.period)),ui.find("div.dropdown").first().focus(),ui.find(".set-time").off("click.timepicker").on("click.timepicker",(function(e){e.preventDefault(),self.setTimeOnField(),self.closeTimePopup()})),this.settings.parentElement||ui.on("keydown.timepicker","button, div.dropdown",(function(e){return 9!==(e.keyCode||e.charCode||0)||(self.containFocus(e),e.stopPropagation(),e.preventDefault(),!1)}))},containFocus:function containFocus(e){var reverse=e.shiftKey,focusables=this.popup.find(":focusable"),index=focusables.index($(":focus")),next=index+1>=focusables.length?0:index+1,prev=index-1<0?focusables.length:index-1;index=reverse?prev:next,focusables.eq(index).focus()},setupStandardEvents:function setupStandardEvents(){var self=this;self.popup.on("touchend.timepicker touchcancel.timepicker",".set-time",(function(e){e.preventDefault(),e.target.click()})).on("keydown.timepicker","input.dropdown",(function(e){var handled=!1;if(27===e.which&&(handled=!0,self.closeTimePopup(),self.element.focus()),32===e.which&&(handled=!0,self.popup.find(".set-time").click()),37===e.which||39===e.which){handled=!0;var inputs=self.popup.find('input[id$="-shdo"]');if(37===e.which){var prev=inputs.eq(inputs.index(this)-1);prev&&0!==prev.length||(prev=inputs.eq(inputs.length)),prev.focus()}if(39===e.which){var next=inputs.eq(inputs.index(this)+1);next&&0!==next.length||(next=inputs.eq(0)),next.focus()}}return!handled||(e.preventDefault(),e.stopPropagation(),!1)})),self.trigger.on("hide.timepicker",(function(){self.onPopupHide()}))},buildRangePopup:function buildRangePopup(){},setupRangeEvents:function setupRangeEvents(){},getTimeFromField:function getTimeFromField(value){var parts,endParts,self=this,val=value||this.element.val(),sep=this.getTimeSeparator(),timeparts={};parts=(val=(val=val.replace(/[T\s:.-]/g,sep).replace(/z/i,"")).replace("午","午".concat(sep))).split(sep);var aLoc=this.currentCalendar.timeFormat.toLowerCase().indexOf("a"),isAmFirst=-1!==aLoc&&aLoc<this.currentCalendar.timeFormat.toLowerCase().indexOf("h");function removeLeadingWhitespace(thisValue){return thisValue.replace(/^\s+|\s+$/g,"")}function addLeadingZero(thisValue){return!thisValue||isNaN(thisValue)?"00":thisValue=(thisValue=parseInt(thisValue,10))<10?"0".concat(thisValue):thisValue}return!this.is24HourFormat()&&isAmFirst&&(parts=[parts[1],parts[2],parts[0]]),this.is24HourFormat()||isAmFirst||(endParts=parts[parts.length-1].split(" "),parts.pop(),parts=parts.concat(endParts)),parts[0]&&parts[0].length&&!isNaN(parts[0])||(parts[0]="1"),parts[0]=parseInt(parts[0],10),isNaN(parts[0])||(parts[0]="".concat(parseInt(parts[0],10))),timeparts.hours=self.hourText(parts[0]),parts[1]?(parts[1]=removeLeadingWhitespace(parts[1]),parts[1]=addLeadingZero(parts[1]),timeparts.minutes=parts[1]):timeparts.minutes="00",function handleSlot2(thisValue){return thisValue?(thisValue=removeLeadingWhitespace(thisValue),self.hasSeconds()?(thisValue=addLeadingZero(thisValue),void(timeparts.seconds=thisValue)):(function isDayPeriod(thisValue){return self.dayPeriods.indexOf(thisValue)>-1}(thisValue)||(thisValue=self.translateDayPeriod("AM")),void(timeparts.period=thisValue))):(self.hasSeconds()&&(thisValue="00",timeparts.seconds=thisValue),void(self.is24HourFormat()||(thisValue=self.translateDayPeriod("AM"),timeparts.period=thisValue)))}(parts[2]),parts[3]?(parts[3]=removeLeadingWhitespace(parts[3]),timeparts.period=parts[3]):!this.is24HourFormat()&&this.hasSeconds()&&(timeparts.period=this.translateDayPeriod("AM")),timeparts},getTimeFromField2:function getTimeFromField2(value){function addLeadingZero(thisValue){return!thisValue||isNaN(thisValue)?"00":thisValue=(thisValue=parseInt(thisValue,10))<10?"0".concat(thisValue):thisValue}var formatString=this.hasSeconds()?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour,type=this.hasSeconds()?"timestamp":"hour",tempDate=Locale.parseDate(value||this.element.val(),{date:type}),hours=(tempDate?tempDate.getHours():"1").toString(),ampm=(hours>=12?this.translateDayPeriod("PM"):this.translateDayPeriod("AM")).toString();!this.is24HourFormat()&&hours>12&&(hours=(parseInt(hours,10)-12).toString()),this.is24HourFormat()||"0"!==hours||(hours="12");var period=formatString.indexOf("a")>-1?ampm:void 0,minutes=tempDate?tempDate.getMinutes():"00",seconds=tempDate?tempDate.getSeconds():"00";return{hours:addLeadingZero(hours),minutes:addLeadingZero(minutes),seconds:addLeadingZero(seconds),period:period}},translateDayPeriod:function translateDayPeriod(period){return/am|pm|AM|PM/i.test(period)?(this.currentCalendar.dayPeriods||["AM","PM"])[/AM|am/i.test(period)?0:1]:period},setTimeOnField:function setTimeOnField(){var hours=$("#".concat(this.hoursId)).val()||"",minutes=$("#".concat(this.minutesId)).val()||"",seconds=$("#".concat(this.secondsId)).val()||"",period=($("#".concat(this.periodId)).val()||"").toUpperCase(),sep=this.getTimeSeparator(),timeString="".concat(hours).concat(sep).concat(minutes).concat(this.hasSeconds()?sep+seconds:"");timeString+=(period=this.is24HourFormat()||""!==period?period:$("#".concat(this.periodId,"-shdo")).val())?" ".concat(this.translateDayPeriod(period)):"",this.element.val(timeString).trigger("change"),this.element.focus()},isOpen:function isOpen(){return!(!this.popup||!this.popup.is(":visible"))},openTimePopup:function openTimePopup(){this.setup(),this.element.is(":disabled")||this.element.attr("readonly")||(this.popup&&!this.popup.hasClass("is-hidden")&&this.closeTimePopup(),this.element.addClass("is-active is-open"),"range"===this.settings.mode?(this.buildRangePopup(),this.setupRangeEvents()):(this.buildStandardPopup(),this.setupStandardEvents()),this.element.attr({"aria-expanded":"true"}),this.popup.find("div.dropdown").first().focus())},closeTimePopup:function closeTimePopup(){this.trigger.data("tooltip")&&this.trigger.data("tooltip").hide()},onPopupHide:function onPopupHide(){if("standard"===this.settings.mode){var ddHours=$("#".concat(this.hoursId)),ddMinutes=$("#".concat(this.minutesId)),ddSeconds=$("#".concat(this.secondsId)),ddPeriod=$("#".concat(this.periodId));ddHours&&ddHours.data("dropdown")&&"function"==typeof ddHours.data("dropdown").destroy&&ddHours.data("dropdown").destroy(),ddMinutes&&ddMinutes.data("dropdown")&&"function"==typeof ddMinutes.data("dropdown").destroy&&ddMinutes.data("dropdown").destroy(),this.hasSeconds()&&ddSeconds&&ddSeconds.data("dropdown")&&"function"==typeof ddSeconds.data("dropdown").destroy&&ddSeconds.data("dropdown").destroy(),this.hasDayPeriods()&&ddPeriod&&ddPeriod.data("dropdown")&&"function"==typeof ddPeriod.data("dropdown").destroy&&ddPeriod.data("dropdown").destroy(),this.popup.off("click.timepicker touchend.timepicker touchcancel.timepicker keydown.timepicker")}this.element.attr({"aria-expanded":"false"}),this.trigger.off("hide.timepicker show.timepicker"),this.trigger.data("tooltip").destroy(),this.trigger.data("tooltip",void 0),$("#timepicker-popup").remove(),this.element.removeClass("is-active is-open")},toggleTimePopup:function toggleTimePopup(){this.isOpen()?this.closeTimePopup():this.openTimePopup()},value:function value(removePunctuation){var val=this.element.val();if(!removePunctuation||!1===removePunctuation)return val;var timeSeparator=this.currentCalendar.dateFormat.timeSeparator,sepRegex=new RegExp(timeSeparator,"g"),parts=(val=val.replace(sepRegex,"")).split(" ");return parts[0].length<4&&(val="0".concat(parts[0]).concat(parts[1]?parts[1]:"")),val},enable:function enable(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},readonly:function readonly(){this.enable(),this.element.attr("readonly","readonly")},disable:function disable(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled")},isDisabled:function isDisabled(){return this.element.prop("disabled")},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.teardown().init()},teardown:function teardown(){this.trigger.off("keydown.timepicker"),this.element.off("focus.timepicker blur.timepicker keydown.timepicker"),this.popup&&this.closeTimePopup(),this.trigger.remove();var mask=this.element.data("mask");return mask&&"function"==typeof mask.destroy&&mask.destroy(),$.removeData(this.element[0],"validate"),$.removeData(this.element[0],"validationEvents"),this.element.removeAttr("data-validate").removeData("validate validationEvents"),this.label.find(".audible").remove(),$("#timepicker-popup").remove(),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"timepicker")},handleEvents:function handleEvents(){var self=this;return this.trigger.off("click.timepicker").on("click.timepicker",(function(){self.toggleTimePopup()})),this.handleKeys(),this.handleBlur(),this}},$.fn.timepicker=function(settings){return this.each((function(){var instance=$.data(this,"timepicker");instance?instance.updated(settings):instance=$.data(this,"timepicker",new TimePicker(this,settings))}))};var Validation=new function ValidationRules(){var self=this;this.ValidationTypes=[],this.ValidationTypes.error={type:"error",titleMessageID:"Error",pagingMessageID:"ErrorOnPage",errorsForm:!0},this.ValidationTypes.alert={type:"alert",titleMessageID:"Alert",pagingMessageID:"AlertOnPage",errorsForm:!1},this.ValidationTypes.success={type:"success",titleMessageID:"Success",pagingMessageID:"SuccessOnPage",errorsForm:!1},this.ValidationTypes.confirm=this.ValidationTypes.success,this.ValidationTypes.info={type:"info",titleMessageID:"Info",pagingMessageID:"InfoOnPage",errorsForm:!1},this.ValidationTypes.icon={type:"icon",titleMessageID:"Icon",pagingMessageID:"IconOnPage",errorsForm:!1,icon:"user-profile"},this.rules={required:{isNotEmpty:function isNotEmpty(value,field){return!(!("placeholder"in document.createElement("input"))&&field&&(value===field.attr("placeholder")||value===Locale.translate("Required")))&&("string"==typeof value?(value=$.trim(value.replace(/<\/?[^>]*>/g,"")),0!==$.trim(value).length):"number"==typeof value?!isNaN(value):$.isArray(value)?value.length>0:!!value)},isRadioChecked:function isRadioChecked(field){var name=field.attr("name");return name&&name.length&&$('input[name="'.concat(name,'"]:radio:checked')).length},check:function check(value,field){this.message=Locale.translate("Required");return!(!$(field).is(".datepicker")||!$("#monthview-popup").is(":visible"))||(field.is(":radio")?this.isRadioChecked(field):this.isNotEmpty(value,field))},message:"Required",type:"error",id:"required"},date:{check:function check(value,field){if(this.message=Locale.translate("InvalidDate"),value instanceof Date)return value&&value.getTime&&!isNaN(value.getTime());var dateFormat=value.indexOf(":")>-1?Locale.calendar().dateFormat.datetime:Locale.calendar().dateFormat.short,dtApi=null;field&&field.data("datepicker")&&(dateFormat=(dtApi=field.data("datepicker")).pattern);var isStrict=!("MMMM"===dateFormat||"MMM"===dateFormat||"MM"===dateFormat||"MMMM d"===dateFormat||"yyyy"===dateFormat);return dtApi&&(dateFormat={locale:dtApi.locale.name,pattern:dateFormat,calendarName:dtApi.currentCalendar.name}),!(void 0===Locale.parseDate(value,dateFormat,isStrict)&&""!==value)},message:"Invalid Date",type:"error",id:"date"},availableDate:{check:function check(value,field){this.message=Locale.translate("UnavailableDate");var check=!0;if(""===value)return check;if(!self.rules.date.check(value,field))return check=!1,this.message="",check;var i,l,min,max,datepickerApi=field.data("datepicker"),options=datepickerApi?datepickerApi.settings:{},hasOptions=Object.keys(options).length>0,dateObj=value;if("string"==typeof dateObj){var format="locale"!==options.dateFormat?options.dateFormat:Locale.calendar().dateFormat.short;if(options.showTime){var timeFormat=options.timeFormat||Locale.calendar().timeFormat;format+=" ".concat(timeFormat)}datepickerApi&&datepickerApi.isIslamic&&(format={pattern:datepickerApi.pattern,locale:datepickerApi.locale.name}),dateObj=Locale.parseDate(dateObj,format)}datepickerApi&&datepickerApi.isIslamic&&dateObj instanceof Date&&(dateObj=Locale.umalquraToGregorian(dateObj.getFullYear(),dateObj.getMonth(),dateObj.getDate()));var d2=options.useUTC?Locale.dateToUTC(dateObj):dateObj;if(d2 instanceof Array)return check;if(d2&&hasOptions)for(min=options.useUTC?Locale.dateToUTC(new Date(options.disable.minDate)).setHours(0,0,0,0):new Date(options.disable.minDate).setHours(0,0,0,0),max=options.useUTC?Locale.dateToUTC(new Date(options.disable.maxDate)).setHours(0,0,0,0):new Date(options.disable.maxDate).setHours(0,0,0,0),-1!==options.disable.dayOfWeek.indexOf(d2.getDay())&&(check=!1),((d2=d2.setHours(0,0,0,0))<=min||d2>=max)&&(check=!1),options.disable.dates.length&&"string"==typeof options.disable.dates&&(options.disable.dates=[options.disable.dates]),i=0,l=options.disable.dates.length;i<l;i++)if(d2===(options.useUTC?Locale.dateToUTC(options.disable.dates[i]):new Date(options.disable.dates[i])).setHours(0,0,0,0)){check=!1;break}return hasOptions&&(check=!!(check&&!options.disable.isEnable||!check&&options.disable.isEnable)),check},message:"Unavailable Date",type:"error",id:"availableDate"},rangeDate:{check:function check(value,field){var _this=this;this.message=Locale.translate("rangeDate");var check=!0,api=field.data("datepicker");if(api){var s=api.settings,parts=value.split(s.range.separator),checkRule=function checkRule(rule,newvalue){field.val(newvalue),_this.message="".concat(self.rules[rule].message," (").concat(newvalue,")"),self.rules[rule].check(newvalue,field)||(check=!1)};if(value.indexOf(api.pattern)>-1){if(1===parts.length)checkRule("date",parts[0]);else if(2===parts.length){var part=parts[0]===api.pattern?1:0;checkRule("date",parts[part]),check&&checkRule("availableDate",parts[part])}}else 1===parts.length?(checkRule("date",parts[0]),check&&checkRule("availableDate",parts[0])):2===parts.length&&(checkRule("date",parts[0]),check&&checkRule("date",parts[1]),check&&checkRule("availableDate",parts[0]),check&&checkRule("availableDate",parts[1]))}return field.val(value),check},message:"Range Dates",type:"error",id:"rangeDate"},email:{check:function check(value){this.message=Locale.translate("EmailValidation");return!value.length||/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,16}(?:\.[a-z]{2})?)$/i.test(value)},message:"EmailValidation",type:"error",id:"email"},enableSubmit:{check:function check(value,field){var submit=field.closest(".signin").find('button[type="submit"]');return value.length&&(self.rules.email.check(value)||self.rules.passwordConfirm.check(value,field))?submit.enable():submit.disable(),!0},message:"",type:"error",id:"enableSubmit"},emailPositive:{check:function check(value,field){if($.trim(value).length&&!field.is("[readonly]")){self.rules.emailPositive.positive=!0,this.message=Locale.translate("EmailValidation");var isValid=self.rules.email.check(value,field);return isValid&&(this.message=""),isValid}return self.rules.emailPositive.positive=!1,!0},message:"EmailValidation",type:"error",id:"emailPositive"},passwordReq:{check:function check(value){this.message=Locale.translate("PasswordValidation");return!value.length||value.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{10,}$/)},message:"PasswordValidation",type:"error",id:"passwordReq"},passwordConfirm:{check:function check(value,field){this.message=Locale.translate("PasswordConfirmValidation");var passwordValue=$('input[type="password"]:not('.concat(field.attr("id"),")"),field.closest(".signin")).eq(0).val(),check=value===passwordValue&&self.rules.passwordReq.check(passwordValue);return!value.length||check},message:"PasswordConfirmValidation",type:"error",id:"passwordConfirm"},time:{check:function check(value,field){value=value.replace(/ /g,""),this.message=Locale.translate("InvalidTime");var timepicker=field&&field.data("timepicker"),timepickerSettings=timepicker?field.data("timepicker").settings:{},pattern=timepickerSettings&&timepickerSettings.timeFormat?timepickerSettings.timeFormat:Locale.calendar().timeFormat;if(field.attr("data-options")&&timepickerSettings&&!timepickerSettings.timeFormat){var settings=JSON.parse(field.attr("data-options"));settings.patternOptions&&settings.patternOptions.format&&(pattern=settings.patternOptions.format)}var timeparts,is24Hour=(pattern.match("HH")||pattern.match("H")||[]).length>0,maxHours=is24Hour?24:12,sep=value.indexOf(Locale.calendar().dateFormat.timeSeparator),valueHours=0,valueMins=0,valueSecs=0;if(""===value)return!0;if(valueHours=parseInt(value.substring(0,sep),10),valueMins=parseInt(value.substring(sep+1,sep+3),10),timepicker&&(valueHours=(timeparts=timepicker.getTimeFromField()).hours,valueMins=timeparts.minutes,timepicker.hasSeconds()&&(valueSecs=timeparts.seconds)),valueHours.toString().length<1||isNaN(valueHours)||parseInt(valueHours,10)<0||parseInt(valueHours,10)>maxHours)return!1;if(valueMins.toString().length<1||isNaN(valueMins)||parseInt(valueMins,10)<0||parseInt(valueMins,10)>59)return!1;if(valueSecs.toString().length<1||isNaN(valueSecs)||parseInt(valueSecs,10)<0||parseInt(valueSecs,10)>59)return!1;if(!is24Hour){if(parseInt(valueHours,10)<1)return!1;var period0=new RegExp(Locale.calendar().dayPeriods[0],"i"),period1=new RegExp(Locale.calendar().dayPeriods[1],"i");if(0===(value.match(period0)||value.match(period1)||[]).length)return!1}return!0},message:"Invalid Time",type:"error",id:"time"},test:{check:function check(value){return"1"===value},message:"Value is not valid (test).",type:"error",id:"test"}}},TOAST_DEFAULTS={title:"(Title)",message:"(Content)",position:"top right",audibleOnly:!1,progressBar:!0,timeout:6e3,allowLink:!1,draggable:!1,savePosition:!1,uniqueId:null};function Toast(element,settings){this.element=$(element),this.settings=utils.mergeSettings(element,settings,TOAST_DEFAULTS),this.init()}Toast.prototype={init:function init(){this.show()},show:function show(){var self=this,s=this.settings,maxHideTime=parseFloat(math.convertDelayToFPS(s.timeout)),message=s.allowLink?xssUtils.stripTags(s.message,"<a><br><p>"):xssUtils.stripHTML(s.message),isPausePlay=!1,percentage=100;this.uniqueId=s.uniqueid?this.generateUniqueId("usersettings-position"):"";var container=$("#toast-container".concat(this.uniqueId)),toast=$('\n      <div class="toast">\n        <span class="toast-title">'.concat(xssUtils.stripHTML(s.title),'</span>\n        <span class="toast-message">').concat(message,"</span>\n      </div>")),closeBtn=$('\n      <button type="button" class="btn-icon btn-close" title="'.concat(Locale.translate("Close"),'" aria-hidden="true">\n        ').concat($.createIcon("close"),'\n        <span class="audible">').concat(Locale.translate("Close"),"</span>\n      </button>\n    ")),progress=$('<div class="toast-progress"></div>');container.length||(container=$('<div id="toast-container'.concat(this.uniqueId,'" class="toast-container" aria-relevant="additions" aria-live="polite"></div>')).appendTo("body")),container.removeClass("toast-top-left toast-top-right toast-bottom-right toast-bottom-left").addClass("toast-".concat(s.position.replace(" ","-"))),s.timeout=s.audibleOnly?100:s.timeout,s.progressBar&&toast.append(progress);var timer=new RenderLoopItem({duration:math.convertDelayToFPS(s.timeout),timeoutCallback:function timeoutCallback(){self.remove(toast)},updateCallback:function updateCallback(data){percentage=(data.duration-data.elapsedTime)/maxHideTime*100,Locale.isRTL()&&(percentage=100-percentage),s.progressBar&&(progress[0].style.width="".concat(percentage,"%"))}});renderLoop.register(timer),container.append(toast),toast.addClass(s.audibleOnly?"audible":"effect-scale"),toast.append(closeBtn),self.createDraggable(toast,container),$(document).on("keydown.toast keyup.toast",(function(e){(e=e||window.event).ctrlKey&&e.altKey&&80===e.keyCode&&(isPausePlay="keydown"===e.type,timer[isPausePlay?"pause":"resume"]())})),toast.on("mousedown.toast touchstart.toast mouseup.toast touchend.toast",(function(e){isPausePlay=!!/mousedown|touchstart/i.test(e.type),timer[isPausePlay?"pause":"resume"]()})),closeBtn.on("click.toast",(function(){timer.destroy(),self.remove(toast)}))},createDraggable:function createDraggable(toast,container){var _this=this;if(this.settings.draggable&&toast[0]&&container[0]){var isTouch=Environment.features.touch,dropContainer=container.parent();container.css({top:"",left:"",right:""});var rect=container[0].getBoundingClientRect(),lsPosition=this.restorePosition(),posEl=rect;lsPosition&&((posEl={top:lsPosition.top,left:lsPosition.left,width:toast.outerWidth(),height:toast.outerHeight()}).right=posEl.left+posEl.width,posEl.bottom=posEl.top+posEl.height,this.isPosInViewport(posEl)||(posEl=rect));var rules={top:"".concat(posEl.top,"px"),left:"".concat(posEl.left,"px")};container.is(".toast-bottom-right, .toast-top-right")&&(rules.right="auto"),container.css(rules),container.addClass("is-draggable");toast.off("mousedown.toast touchstart.toast").on("mousedown.toast touchstart.toast",(function(e){isTouch||e.preventDefault(),$(e.target).is("a, .btn-close")||container.drag({containment:"document"}).off("dragstart.toast").on("dragstart.toast",(function(){e.stopImmediatePropagation(),container.attr("aria-grabbed","true"),dropContainer.attr("aria-dropeffect","move")})).off("dragend.toast").on("dragend.toast",(function(){container.removeAttr("aria-grabbed"),dropContainer.removeAttr("aria-dropeffect"),_this.savePosition({left:parseFloat(container.css("left")),top:parseFloat(container.css("top"))});var dragApi=container.data("drag");dragApi&&"function"==typeof dragApi.destroy&&dragApi.destroy()}))}));var isToastEl=function isToastEl(_ref){var dragApi=_ref.dragApi,x=_ref.x,y=_ref.y,underEl=dragApi.getElementsFromPoint(x,y)[0];return!$(underEl).closest(".toast").length},triggerRsume=function triggerRsume(elem){var keyup=$.Event("keyup");$.extend(keyup,{ctrlKey:!0,altKey:!0,keyCode:80}),elem.trigger(keyup)},doc=$(document);doc.off("mouseup.toast").on("mouseup.toast",(function(e){if(1===$("#toast-container".concat(_this.uniqueId," .toast")).length){var dragApi=container.data("drag");if(dragApi&&"function"==typeof dragApi.getElementsFromPoint){var args={dragApi:dragApi,x:e.pageX,y:e.pageY};isToastEl(args)&&triggerRsume(doc)}}})).off("touchend.toast").on("touchend.toast",(function(e){if(1===$("#toast-container".concat(_this.uniqueId," .toast")).length){var dragApi=container.data("drag");if(dragApi&&"function"==typeof dragApi.getElementsFromPoint){var orig=e.originalEvent;if(orig.targetTouches.length>1)return;var t=orig.changedTouches[0],args={dragApi:dragApi,x:t.pageX,y:t.pageY};isToastEl(args)&&triggerRsume(doc)}}}))}},savePosition:function savePosition(){var pos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.settings.savePosition&&this.canUseLocalStorage()&&!$.isEmptyObject(pos)&&(localStorage[this.uniqueId]=JSON.stringify(pos),this.element.triggerHandler("settingschanged",[pos]))},restorePosition:function restorePosition(){if(!this.settings.savePosition||!this.canUseLocalStorage())return null;var lsPosition=localStorage[this.uniqueId];return lsPosition?JSON.parse(lsPosition):null},canUseLocalStorage:function canUseLocalStorage(){try{if(localStorage.getItem)return!0}catch(exception){return!1}return!1},generateUniqueId:function generateUniqueId(suffix){return suffix=null==suffix?"":suffix,"toast-".concat(this.settings.uniqueid||"","-").concat(suffix).replace(/--/g,"-").replace(/-$/g,"")},isPosInViewport:function isPosInViewport(pos){return pos.top>=0&&pos.left>=0&&pos.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&pos.right<=(window.innerWidth||document.documentElement.clientWidth)},unbind:function unbind(toast){return toast.closest(".toast-container").off("dragstart.toast dragend.toast"),toast.off("mousedown.toast mouseup.toast touchstart.toast touchend.toast"),toast.find(".btn-close").off("click.toast"),this},remove:function remove(toast){var _this2=this,removeCallback=function removeCallback(){toast.remove(),!$("#toast-container".concat(_this2.uniqueId," .toast")).length&&_this2.destroy()};if(this.unbind(toast),this.settings.audibleOnly)removeCallback();else{toast.addClass("effect-scale-hide");var closeTimer=new RenderLoopItem({duration:20,updateCallback:function updateCallback(){},timeoutCallback:function timeoutCallback(){removeCallback()}});renderLoop.register(closeTimer)}},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element[0],settings,TOAST_DEFAULTS)),this.show()},destroy:function destroy(){var _this3=this,container=$("#toast-container".concat(this.uniqueId));container[0]&&[].slice.call(container[0].querySelectorAll(".toast")).forEach((function(toast){_this3.settings.audibleOnly=!0,_this3.remove($(toast))}));$(document).off("keydown.toast keyup.toast mouseup.toast touchend.toast"),container.remove(),delete this.uniqueId,$.removeData(this.element[0],"toast")}},$.fn.toast=function(settings){return this.each((function(){var instance=$.data(this,"toast");instance?instance.updated(settings):instance=$.data(this,"toast",new Toast(this,settings))}))};var VALIDATION_MESSAGE_DEFAULTS={inline:!0,message:"",type:"error",showTooltip:!1,isHelpMessage:!1};function Validator(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,VALIDATION_MESSAGE_DEFAULTS),this.init()}Validator.prototype={init:function init(){this.fields="input, textarea, select, div[data-validate], div[data-validation]",this.isPlaceholderSupport=!!("placeholder"in document.createElement("input")),this.inputs=this.element.find(this.fields),this.element.is(this.fields)&&(this.inputs=$().add(this.element)),this.timeout=null,this.attachEvents()},extractEvents:function extractEvents(events){if(events.indexOf("{")>-1&&(events=JSON.parse(events.replace(/'/g,'"'))),"object"===_typeof(events)){var e="";for(var k in events)-1===e.indexOf(events[k])&&(e+="".concat(events[k]," "));events=e=e.split(" ").join(".validate ")}return events},filterValidations:function filterValidations(events,type){var validations=[];if(!events)return[];if(events.indexOf("{")>-1&&(events=JSON.parse(events.replace(/'/g,'"'))),"object"===_typeof(events))for(var k in events)type&&events[k].indexOf(type)>-1&&validations.push(k);return validations},setErrorIconOpacity:function setErrorIconOpacity(field){if(field.is(":text")&&field.is('[data-error-type="tooltip"]')){var textWidth=this.calculateTextWidth(field.val()),fieldWidth=field.outerWidth()-35;field.closest(".field, .field-short").find(".icon-error")[textWidth>fieldWidth?"addClass":"removeClass"]("lower-opacity")}},calculateTextWidth:function calculateTextWidth(text,font){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var context=this.canvas.getContext("2d");return context.font=font||"14px arial",context.measureText(text).width},attachEvents:function attachEvents(){var self=this,attribs="[data-validate],[data-validation]";this.inputs.each((function(){var field=$(this),attr=field.attr("data-validate")||field.attr("data-validation");attr&&attr.indexOf("required")>-1&&field.addClass("required")})),this.inputs.filter("input, textarea, div").filter(attribs).not("input[type=file]").each((function(){var field=$(this),eventAttr=field.attr("data-validation-events"),events=self.extractEvents(eventAttr||"blur.validate change.validate keyup.validate");events.indexOf("enter.validate")>-1&&field.off("keypress.enter.validate").on("keypress.enter.validate",(function(e){var thisField=$(this);13===e.which&&self.validate(thisField,!0,e)})),field.off(events).on(events,(function(e){if("keyup"===e.type){if(9===e.keyCode)return;self.setErrorIconOpacity(field)}var thisField=$(this),handleEventData=thisField.data("handleEvent".concat([e.type||""]));thisField.is("[readonly]")&&!thisField.parent().is(".field-fileupload")||handleEventData&&handleEventData.type===e.type&&"validate"===e.handleObj.namespace&&!thisField.closest(".modal:visible").length||(thisField.data("handleEvent".concat([e.type||""]),e.handleObj),setTimeout((function(){thisField.closest(".modal-engaged").length&&!thisField.closest(".modal-body").length||self.validate(field,!0,e)}),300))}))})),this.inputs.filter("input[type=checkbox]").filter(attribs).off("click.validate").on("click.validate",(function(e){self.validate($(this),!0,e)})),this.inputs.filter(":radio").off("click.validate").on("click.validate",(function(e){var first=$(this).parent().find(".radio").first();self.validate(first,!0,e)}));var selects=this.inputs.filter("select").filter(attribs);if(selects.length&&(selects.off("change.validate listopened.validate listclosed.validate").on("change.validate",(function(e){self.validate($(this),!0,e)})).on("listopened.validate",(function(){var thisField=$(this),tooltip=thisField.data("tooltip");tooltip&&document.activeElement===thisField.data("dropdown").searchInput[0]&&tooltip.hide(),$("#validation-tooltip").hide()})).on("listclosed.validate",(function(){var thisField=$(this),tooltip=thisField.data("tooltip"),dropdownApi=thisField.data("dropdown");Environment.features.touch&&(dropdownApi.pseudoElem.focus(),setTimeout((function(){dropdownApi.pseudoElem.blur()}),100)),dropdownApi&&dropdownApi.wrapper&&(tooltip=dropdownApi.wrapper.find(".icon-error").data("tooltip")),tooltip&&document.activeElement!==thisField.data("dropdown").searchInput[0]&&tooltip.show()})),selects.filter((function(){return void 0!==$(this).data("dropdown")})).each((function(){$(this).data("dropdown").pseudoElem.off("blur.validate").on("blur.validate",(function(e){var select=$(this).closest(".field, .field-short").find("select");self.validate(select,!0,e)}))}))),this.element.is("form")&&this.element.attr("data-validate-on")){this.element.off("submit.validate").on("submit.validate",(function submitHandler(e){e.stopPropagation(),e.preventDefault(),self.validateForm((function(isValid){self.element.off("submit.validate"),self.element.triggerHandler("validated",isValid),self.element.data("isValid",isValid),self.element.on("submit.validate",submitHandler)}))}))}},validateForm:function validateForm(callback){var _$,self=this,deferreds=[];self.inputs=this.element.find(self.fields),self.inputs.each((function(e){var field=$(this);if(field.attr("data-validate")){if("true"===field.attr("data-disable-validation")||field.hasClass("disable-validation"))return;for(var dfds=self.validate(field,!1,e),i=0;i<dfds.length;i++)deferreds.push(dfds[i])}})),(_$=$).when.apply(_$,deferreds).then((function(){callback(!0)}),(function(){callback(!1)}))},setPrimaryBtn:function setPrimaryBtn(container,modalBtn){var fields=container.find("[data-validate]:visible, select[data-validate], :checkbox[data-validate]"),allValid=!0;fields.length>0&&fields.each((function(){var field=$(this);if(!(field.closest(".datagrid-filter-wrapper").length>0)){var isVisible=null!==field[0].offsetParent;field.is(".required")&&(isVisible&&field.is(".editor")&&!field.html()&&(allValid=!1),!isVisible&&!field.is("select, :checkbox")||field.val()||field.is(".editor")||(allValid=!1)),!isVisible&&!field.is("select, :checkbox")||field.isValid()||(allValid=!1)}})),allValid?modalBtn.removeAttr("disabled"):modalBtn.attr("disabled","disabled")},value:function value(field){return field.is("input[type=checkbox]")?field.prop("checked"):field.is("div")?field[0].innerHTML:field.val()},getTypes:function getTypes(field,e){var validations,filters=this.filterValidations(field.attr("data-validation-events"),e.type);return validations=field.is("input.dropdown")&&field.prev().prev("select").attr("data-validate")?field.prev().prev("select").attr("data-validate").split(" "):field.is("input.dropdown")&&field.prev().prev("select").attr("data-validation")?field.prev().prev("select").attr("data-validation").split(" "):field.attr("data-validation")?field.attr("data-validation").split(" "):field.attr("data-validate")?field.attr("data-validate").split(" "):[],filters.length>0&&(validations=validations.filter((function(n){return-1!==filters.indexOf(n)}))),"keyup"===e.type&&(validations=validations.filter((function(n){return"date"!==n&&"time"!==n}))),validations},setIconOnParent:function setIconOnParent(field,type){var iconContainer,dropdown,dropdownParent,errorIcon=$.createIcon({classes:["icon-".concat(type)],icon:"".concat(type,"-alert")}),parent=field.closest(".tab-panel, .expandable-pane"),flexRow=field.closest(".row.flex-align-bottom"),iconTarget=parent.attr("id"),parentContainer=field.closest(".tab-container, .tab-panel-container, .expandable-area");if(flexRow&&flexRow.length&&($(".".concat(type),flexRow).length?flexRow.addClass("has-messages"):flexRow.removeClass("has-messages")),parentContainer.is(".tab-panel-container")&&(parentContainer=parentContainer.prev(".tab-container")),parentContainer.is(".tab-container"))(iconContainer=$('.tab-list a[href="#'.concat(iconTarget,'"]'),parentContainer).closest(".tab")).length?$(".count",iconContainer).length&&(iconContainer=$(".count",iconContainer)):(iconTarget=$('a[href="#'.concat(iconTarget,'"]'),".popupmenu").closest(".popupmenu").attr("id"),iconContainer=$('.tab-list .tab[aria-controls="'.concat(iconTarget,'"]'),parentContainer),dropdown=iconTarget);else{if(!parentContainer.is(".expandable-area"))return;iconContainer=$('.expandable-header[aria-controls="'.concat(iconTarget,'"] .title'),parentContainer)}dropdown&&dropdown.length&&(dropdownParent=parent.add($($(dropdown).attr("href"))),$('a[role="menuitem"]',"#".concat(dropdown)).each((function(){dropdownParent=dropdownParent.add($($(this).attr("href")))})));var menuitem=$('a[href="#'.concat(parent.attr("id"),'"]'),"#".concat(iconTarget));parent&&$(".".concat(type),parent).length||dropdownParent&&$(".".concat(type),dropdownParent).length?($(".".concat(type),parent).length||(menuitem.removeClass("is-".concat(type)),$(".icon-".concat(type),menuitem).remove()),$(".".concat(type),parent).length&&$(".".concat(type),dropdownParent).length&&!$(".icon-".concat(type),menuitem).length&&menuitem.addClass("is-".concat(type)).append(errorIcon),$(".icon-".concat(type),iconContainer).length||iconContainer.addClass("is-".concat(type)).append(errorIcon)):((iconContainer=iconContainer.add(menuitem)).removeClass("is-".concat(type)),$(".icon-".concat(type),iconContainer).remove())},validate:function validate(field,showTooltip,e){if(field.data("handleEvent".concat([e.type||""]),null),"true"===field.attr("data-disable-validation")||field.hasClass("disable-validation")||field.is(":disabled"))return[];var rule,dfd,i,l,validationType,self=this,types=self.getTypes(field,e)||[],dfds=[],results=[],value=self.value(field),placeholder=field.attr("placeholder");function manageResult(result,showResultTooltip,type,dfrd){!1===(rule=Validation.rules[type]).positive&&self.removePositive(field),validationType=Validation.ValidationTypes[rule.type]||Validation.ValidationTypes.error;var isInline="tooltip"!==field.attr("data-".concat(validationType.type,"-type"));if(result)0===$.grep(results,(function(res){return res===validationType.type})).length?(dfrd.resolve(),rule.positive&&(self.addMessage(field,rule,isInline,showResultTooltip),self.removeMessage(field,rule,!0),dfrd.resolve(),self.addPositive(field))):validationType.errorsForm||dfrd.resolve();else{if(!self.isPlaceholderSupport&&value===placeholder&&rule.message!==Locale.translate("Required"))return;self.addMessage(field,rule,isInline,showResultTooltip),results.push(rule.type),validationType.errorsForm?dfrd.reject():dfrd.resolve()}self.setIconOnParent(field,rule.type);var data=self.getField(field).data("".concat(validationType.type,"message"));result&&data&&data.filter((function(rules){return rules.id===rule.id||rule.message})).length>0&&self.removeMessage(field,rule,!0);var modalBtn=field.closest(".modal").find(".btn-modal-primary").not(".no-validation");modalBtn.length&&self.setPrimaryBtn(field.closest(".modal"),modalBtn);var calendarPopupBtn=field.closest("#calendar-popup").find(".btn-modal-primary").not(".no-validation");calendarPopupBtn.length&&self.setPrimaryBtn(field.closest("#calendar-popup"),calendarPopupBtn),"error"===rule.type&&field.closest("form").triggerHandler("aftervalidate",{field:field,rule:rule,isValid:result})}for(i=0,l=types.length;i<l;i++)rule=Validation.rules[types[i]],dfd=$.Deferred(),rule&&(rule.async?rule.check(value,field,manageResult,dfd):manageResult(rule.check(value,field),showTooltip,types[i],dfd),dfds.push(dfd));return dfds},getField:function getField(field){return field.is("select")&&void 0!==field.data("dropdown")&&(field=field.data("dropdown").pseudoElem),field},hasError:function hasError(field){return this.getField(field).hasClass("error")},addMessage:function addMessage(field,rule,inline,showTooltip,isHelpMessage){if(!(""===rule.message||field.is(".dropdown, .multiselect")&&$("#dropdown-list").is(":visible"))){isHelpMessage=isHelpMessage||!1;var loc=this.getField(field),dataMsg=loc.data("".concat(rule.type,"message")),validationType=Validation.ValidationTypes[rule.type]||Validation.ValidationTypes.error;if(isHelpMessage||loc.addClass("icon"===rule.type?"custom-icon":rule.type),!(dataMsg&&dataMsg===rule.message||dataMsg&&dataMsg.filter((function(rules){return(rules.id||rules.message)===(rule.id||rule.message)&&rules.message===rule.message})).length>0)){var appendedMsg=rule.message;if(dataMsg){for(var i=0;i<dataMsg.length;i++)appendedMsg="• ".concat(dataMsg[i].message);appendedMsg+="<br>• ".concat(rule.message)}dataMsg||(dataMsg=[]),field.closest(".field, .field-short").find('[data-rule-id="'.concat(rule.id||rule.message,'"]')).remove(),(field.hasClass("dropdown")||field.hasClass("multiselect"))&&field.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(rule.id||rule.message,'"]')).off("click.validate").remove(),(dataMsg=dataMsg.filter((function(rules){return rules.id!==rule.id}))).push({id:rule.id,message:rule.message,type:rule.type}),loc.data("".concat(validationType.type,"message"),dataMsg),void 0!==$.fn.toast&&$("body").toast({title:Locale.translate(validationType.titleMessageID),audibleOnly:!0,message:appendedMsg}),inline?(field.data("isValid",!1),this.showInlineMessage(field,rule,isHelpMessage)):this.showTooltipMessage(field,appendedMsg,validationType.type,showTooltip)}}},showIcon:function showIcon(field,type){var loc=this.getField(field).addClass("icon"===type?"custom-icon":type),svg=$.createIconElement({classes:["icon-".concat(type)],icon:type}),closestField=loc.closest(".field, .field-short"),parent=field.parent();return 0===closestField.find("svg.icon-".concat(type)).length?(parent.is(".editor-container")&&field.parent().addClass("is-error"),1===field.parent(":not(.editor-container)").find(".btn-actions").length?parent.find(".btn-actions").before(svg):1===parent.find(".data-description").length?parent.find(".data-description").before(svg):1===parent.find(".field-info").length?parent.find(".field-info").before(svg):field.is("textarea")?field.after(svg):field.is(".dropdown, .multiselect")?parent.find(".dropdown-wrapper").append(svg):(field.is(".spinbox")||field.is(".lookup"),parent.append(svg)),$(".icon-success",closestField).remove()):svg=closestField.find("svg.icon-error"),svg},showTooltipMessage:function showTooltipMessage(field,message,type,showTooltip){if(!field.is(":radio")){var icon=this.showIcon(field,type),representationField=field;if(field.is(".dropdown, .multiselect")&&void 0!==field.data("dropdown")){var input=field.data("dropdown").pseudoElem;representationField=input,input.addClass("icon"===type?"custom-icon":type)}field.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===type?"custom-icon":type);var tooltipAPI=icon.data("tooltip");tooltipAPI?tooltipAPI.content=message:(icon.tooltip({content:message,placement:"bottom",placementOpts:{callback:function tooltipPositionCallback(placementObj){var fieldRect=representationField[0].getBoundingClientRect(),elRect=tooltipAPI.tooltip[0].getBoundingClientRect(),rtl=$("html").is('[dir="rtl"]'),currX=placementObj.x,xAdjustment=0;return rtl?elRect.left<fieldRect.left&&(xAdjustment+=fieldRect.left-elRect.left):elRect.right>fieldRect.right&&(xAdjustment+=-1*(elRect.right-fieldRect.right)),placementObj.setCoordinate("x",currX+xAdjustment),placementObj.nudges||(placementObj.nudges={}),placementObj.nudges.x=xAdjustment,placementObj}},trigger:"focus",isError:!0,tooltipElement:"#validation-tooltip"}),tooltipAPI=icon.data("tooltip")),field.on("focus.validate",(function(){tooltipAPI&&tooltipAPI.show()})).on("blur.validate",(function(){tooltipAPI&&tooltipAPI.hide()})),tooltipAPI&&field.attr("data-error-type","tooltip"),this.setErrorIconOpacity(field),showTooltip&&tooltipAPI&&tooltipAPI.show()}},toggleRadioMessage:function toggleRadioMessage(field,message,type,markup,isShow){var all,loc,name=field.attr("name");name&&name.length&&(all=$(':radio[name="'.concat(name,'"], :radio[name="').concat(name,'"] + label')),loc=field.parent().is(".inline")?$(':radio[name="'.concat(name,'"]:last')).parent():$(':radio[name="'.concat(name,'"]:last + label')),isShow?(all.addClass("icon"===type?"custom-icon":type),$(markup).addClass("radio-group-".concat(type)).insertAfter(loc)):(all.removeClass(type),loc.next(".radio-group-".concat(type)).remove()))},showInlineMessage:function showInlineMessage(field,rule,isHelpMessage){isHelpMessage=isHelpMessage||!1;var markup,loc=this.getField(field),validationType=Validation.ValidationTypes[rule.type]||Validation.ValidationTypes.error;rule.icon=rule.icon||validationType.icon;var icon=theme.currentTheme.id&&theme.currentTheme.id.indexOf("uplift")>-1?"".concat(validationType.type,"-alert"):"".concat(validationType.type);markup="icon"===rule.type?""+'<div class="custom-icon-message" data-rule-id="'.concat(rule.id||rule.message,'">\n          ').concat($.createIcon({classes:["icon-custom"],icon:rule.icon}),'\n          <pre class="audible">\n            ').concat(Locale.translate(validationType.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(rule.message,"</p>\n        </div>"):""+'<div class="'.concat(validationType.type,'-message" data-rule-id="').concat(rule.id||rule.message,'">\n          ').concat($.createIcon({classes:["icon-".concat(validationType.type)],icon:icon}),'\n          <pre class="audible">\n            ').concat(Locale.translate(validationType.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(rule.message,"</p>\n        </div>"),isHelpMessage||loc.addClass("icon"===rule.type?"custom-icon":rule.type),field.is(":radio")?this.toggleRadioMessage(field,rule.message,validationType.type,markup,!0):(loc.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===validationType.type?"custom-icon":validationType.type),loc.closest(".field, .field-short").append(markup),loc.closest(".field, .field-short").find(".colorpicker-container").addClass("icon"===validationType.type?"custom-icon":validationType.type)),field.is(".spinbox")&&loc.closest(".spinbox-wrapper").addClass("icon"===validationType.type?"custom-icon":validationType.type),"error"===validationType.type&&field.parent().find(".icon-success").remove(),field.triggerHandler(validationType.type,{field:field,message:rule.message}),field.closest("form").triggerHandler(validationType.type,{field:field,message:rule.message})},addPositive:function addPositive(field){var svg=$.createIcon({icon:"success",classes:"icon-success"});$(".icon-success",field.parent(".field, .field-short")).length||field.parent(".field, .field-short").append(svg)},removeMessage:function removeMessage(field,rule){var triggerEvents=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],loc=this.getField(field),oldData=loc.data("".concat(rule.type,"message")),ruleId=rule.id||rule.message;if(rule&&("error"!==rule.type||oldData)&&0!==oldData.filter((function(rules){return rules.id===ruleId})).length){var newData=oldData.filter((function(rules){return rules.id!==ruleId})),noMoreMessages=0===newData.length;if(noMoreMessages?loc.removeData("".concat(rule.type,"message")):loc.data("".concat(rule.type,"message"),newData),field.closest(".field, .field-short").find('[data-rule-id="'.concat(rule.id||rule.message,'"]')).remove(),(field.hasClass("dropdown")||field.hasClass("multiselect"))&&field.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(rule.id||rule.message,'"]')).off("click.validate").remove(),noMoreMessages&&"error"===rule.type&&triggerEvents&&(field.triggerHandler("valid",{field:field,message:""}),field.closest("form").triggerHandler("valid",{field:field,message:""})),noMoreMessages&&(field.removeClass("".concat(rule.type," custom-icon")).data("isValid",!0),(field.hasClass("dropdown")||field.hasClass("multiselect"))&&(field.next().next().removeClass("".concat(rule.type," custom-icon")),field.next().find("div.dropdown").removeClass("".concat(rule.type," custom-icon"))),field.is(":radio")&&this.toggleRadioMessage(field,"",rule.type,"",!1),field.hasClass("spinbox")&&field.closest(".spinbox-wrapper").removeClass("".concat(rule.type," custom-icon")),field.hasClass("colorpicker")&&field.parent(".colorpicker-container").removeClass(rule.type),field.closest(".field-fileupload").length>0&&field.closest(".field-fileupload").find("input.".concat(rule.type)).removeClass(rule.type),"tooltip"===field.attr("data-".concat(rule.type,"-type")))){var errorIcon=field.closest(".field, .field-short").find(".icon-error"),tooltipAPI=errorIcon.data("tooltip");tooltipAPI&&tooltipAPI.destroy(),this.inputs&&this.inputs.filter("input, textarea").off("focus.validate"),field.parent().find(".dropdown-wrapper > .icon-".concat(rule.type)).off("click.validate").remove(),field.parent().find(".icon-".concat(rule.type)).remove(),field.next(".icon-".concat(rule.type)).off("click.validate").remove(),field.parent(".field, .field-short").find(".icon-".concat(rule.type)).remove(),field.next(".inforCheckboxLabel").next(".icon-".concat(rule.type)).remove()}}},removePositive:function removePositive(field){$(".icon-success",field.parent(".field, .field-short")).remove()},resetForm:function resetForm(form){var formFields=form.find("input, select, textarea");formFields.removeClass("error"),form.find(".error").removeClass("error"),form.find(".icon-error").remove(),form.find(".icon-success").remove(),form.find(".error-message").remove(),formFields.removeClass("alert"),form.find(".alert").removeClass("alert"),form.find(".icon-alert").remove(),form.find(".alert-message").remove(),formFields.removeClass("info"),form.find(".info").removeClass("info"),form.find(".icon-info").remove(),form.find(".info-message").remove(),setTimeout((function(){$("#validation-errors").addClass("is-hidden")}),300),formFields.data("isDirty",!1).removeClass("isDirty"),form.find(".isDirty").removeClass("isDirty"),form.is("form")&&form[0].reset();var validationTypes=$.fn.validation.ValidationTypes;Object.keys(validationTypes).forEach((function(validationType){formFields.removeData("".concat(validationType,"message"))}))},isFormValid:function isFormValid(form){if($(form).find(".error-message").length>0)return!1;for(var formFields=$(form).find('[data-validate*="required"]'),i=0;i<formFields.length;i++){var field=$(formFields[i]),value=this.value(field);if((field.is(":visible")||field.is("select"))&&!value)return!1}return!0},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.init()}};var ERROR_MESSAGE_DEFAULTS={type:"error",inline:!0};$.fn.validation=Validation,$.fn.getMessage=function(settings){settings||(settings={type:"error"});var dataAttr="".concat(settings.type,"message"),messages=$.fn.getField($(this)).data(dataAttr),strMessages="";if(messages){if(1===messages.length)return messages[0].message;for(var i=0;i<messages.length;i++)strMessages+="• ".concat(messages[i].message)}return strMessages},$.fn.getMessages=function(settings){settings||(settings={type:"error"});var dataAttr="".concat(settings.type,"message"),messages=$.fn.getField($(this)).data(dataAttr);return messages||(messages=[]),messages},$.fn.getField=function(field){return field.is("select")&&void 0!==field.data("dropdown")&&(field=field.data("dropdown").pseudoElem),field},$.fn.getErrorMessage=function(settings){return warnAboutDeprecation("$.fn.getMessage","$.fn.getErrorMessage"),settings=utils.extend({},settings,ERROR_MESSAGE_DEFAULTS),$(this).getMessage(settings)},$.fn.scrollIntoView=function(alignToTop,settings){"boolean"!=typeof alignToTop&&(alignToTop=void 0);var elem=new Validator(this,settings).getField($(this));elem[0].scrollIntoView(alignToTop),elem.focus(),elem.is("input.checkbox")&&(elem=elem.next(".checkbox-label"))[0]&&elem[0].scrollIntoView(alignToTop)},$.fn.addMessage=function(settings){return this.each((function(){var instance=$.data(this,"Validator");instance||(instance=$.data(this,"Validator",new Validator(this,settings)));var rule={message:settings.message,type:settings.type,triggerEvents:settings.triggerEvents,icon:settings.icon,id:settings.id||settings.message},field=$(this);instance.addMessage(field,rule,settings.inline,settings.showTooltip,settings.isAlert),instance.setIconOnParent(field,settings.type)}))},$.fn.addError=function(settings){warnAboutDeprecation("$.fn.addMessage","$.fn.addError");var inline=!0;return"boolean"==typeof settings.inline&&!1===settings.inline&&(inline=!1),(settings=utils.extend({},settings,ERROR_MESSAGE_DEFAULTS)).inline=inline,this.each((function(){$(this).addMessage(settings)}))},$.fn.removeMessage=function(settings){return settings||(settings={type:"error"}),this.each((function(){var instance=$.data(this,"Validator");instance||(instance=$.data(this,"Validator",new Validator(this,settings)));var field=$(this),dataAttr="".concat(settings.type,"message"),errors=$.fn.getField(field).data(dataAttr);if(field.hasClass("error")&&"error"===settings.type&&field.removeClass("error"),errors){for(var i=0;i<errors.length;i++)instance.removeMessage(field,errors[i],settings.triggerEvents);instance.setIconOnParent(field,settings.type),$.removeData(this,"Validator")}}))},$.fn.removeError=function(settings){return warnAboutDeprecation("$.fn.removeMessage","$.fn.removeError"),settings=utils.extend({},settings,ERROR_MESSAGE_DEFAULTS),this.each((function(){return $(this).removeMessage(settings)}))},$.fn.validate=function(settings,args){var settingsAreAPIFunction="string"==typeof settings;return this.each((function(){var instance=$.data(this,"validate");if(instance&&"string"!=typeof instance){if(settingsAreAPIFunction)return void("function"==typeof instance[settings]&&instance[settings](args));instance.updated(settings)}else instance=$.data(this,"validate",new Validator(this,settings))}))},$.fn.isValid=function(){var isValidAttr=$(this).data("isValid");return null==isValidAttr||isValidAttr},$.fn.validateField=function(){var field=$(this),api=Soho.components.Validator.prototype;api&&api.validate&&api.validate(field,!1,0)},$.fn.resetForm=function(){Soho.components.Validator.prototype.resetForm(this)};var DATEPICKER_DEFAULTS={showTime:!1,useCurrentTime:!1,timeFormat:void 0,minuteInterval:void 0,secondInterval:void 0,mode:void 0,roundToInterval:void 0,dateFormat:"locale",placeholder:!1,firstDayOfWeek:0,disable:{dates:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},showLegend:!1,showMonthYearPicker:!0,hideDays:!1,yearsAhead:5,yearsBack:4,legend:[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1,selectWeek:!1},calendarName:null,locale:null,language:null,useUTC:!1,hideButtons:!1,showToday:!0,onOpenCalendar:null,isMonthPicker:!1};function DatePicker(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,DATEPICKER_DEFAULTS),this.init()}DatePicker.prototype={init:function init(){this.build(),this.handleEvents()},build:function build(){this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.element.attr("autocomplete","off"),this.element.next().is("svg")?this.trigger=this.element.next():this.trigger=$.createIconElement("calendar").insertAfter(this.element),this.element.hasClass("hidden")&&this.trigger.addClass("hidden"),this.settings.range.selectWeek&&(this.settings.selectForward=!0,this.settings.minDays=6,this.settings.maxDays=7),this.setLocale(),this.addAria(),this.settings.locale||this.settings.language||this.setCurrentCalendar()},setLocale:function setLocale(){var _this=this,s=this.settings;this.locale=Locale.currentLocale,this.settings.language?(Locale.getLocale(this.settings.language),this.language=this.settings.language):this.language=Locale.currentLanguage.name,s.locale&&Locale.getLocale(s.locale).done((function(locale){var similarApi=_this.getSimilarApi("locale",locale);similarApi.forEach((function(api){api.locale=Locale.cultures[locale],api.language=_this.settings.language||api.locale.language,api.setCurrentCalendar()})),0===similarApi.length&&(_this.locale=Locale.cultures[locale],_this.language=_this.settings.language||_this.locale.language,_this.setCurrentCalendar())})),s.language&&Locale.getLocale(s.language).done((function(){_this.getSimilarApi("language",s.language).forEach((function(api){api.language=s.language}))}))},getSimilarApi:function getSimilarApi(key,value){var elems=[].slice.call(document.querySelectorAll(".datepicker")),similarApi=[];return elems.forEach((function(node){var datepickerApi=$(node).data("datepicker");datepickerApi&&datepickerApi.settings[key]===value&&similarApi.push(datepickerApi)})),similarApi},setCurrentCalendar:function setCurrentCalendar(){this.currentCalendar=Locale.calendar(this.settings.locale||this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions,this.isFullMonth=this.settings.dateFormat.indexOf("MMMM")>-1,this.setFormat(),this.mask()},addAria:function addAria(){this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.append('<span class="audible">'.concat(Locale.translate("PressDown",{locale:this.locale.name,language:this.language}),"</span>"))},handleKeys:function handleKeys(elem){var _this2=this,s=this.settings;if(elem.is("#monthview-popup"))return elem.off("keydown.datepicker").on("keydown.datepicker",".monthview-table, .monthview-monthyear-pane",(function(e){var handled=!1,key=e.keyCode||e.charCode||0;return 9===key&&(_this2.containFocus(e),handled=!0),27===key&&(_this2.closeCalendar(),_this2.element.focus(),e.stopImmediatePropagation(),handled=!0),84===key&&(_this2.closeCalendar(),_this2.element.focus(),handled=!0),!handled||(e.stopPropagation(),e.preventDefault(),!1)})),void elem.off("keydown.datepicker-tab").on("keydown.datepicker-tab","td, input, div.dropdown, button",(function(e){return 9!==(e.keyCode||e.charCode||0)||(s.range.useRange&&$(e.target).is(".next")&&!s.range.selectWeek?_this2.calendarAPI.days.find("td:visible:last").attr("tabindex",0).focus():_this2.containFocus(e),e.stopPropagation(),e.preventDefault(),!1)}));elem.off("keydown.datepicker").on("keydown.datepicker",(function(e){var handled=!1,key=e.keyCode||e.charCode||0;return 40!==key||_this2.isOpen()||(handled=!0,_this2.openCalendar(),setTimeout((function(){_this2.setFocusAfterOpen()}),200)),84===key&&(handled=!0,_this2.setToday()),!handled||(e.stopPropagation(),e.preventDefault(),!1)}))},containFocus:function containFocus(e){var reverse=e.shiftKey,focusables=this.popup.find(":focusable"),target=$(e.currentTarget);(target.is(".monthview-monthyear-pane, #btn-monthyear-pane")||target.closest(".is-monthyear.is-monthonly").length>0)&&(focusables=this.popup.find(":focusable").not("td").not(".picklist-item a").add(".picklist-item.is-selected a:visible, .picklist-item.up a:visible, .picklist-item.down a:visible"));var index=focusables.index($(":focus"));index=reverse?index-1<0?focusables.length-1:index-1:index+1>=focusables.length?0:index+1,focusables.eq(index).focus()},setFormat:function setFormat(){var s=this.settings,localeDateFormat="object"===_typeof(Locale)&&this.currentCalendar.dateFormat?this.currentCalendar.dateFormat:null,localeTimeFormat="object"===_typeof(Locale)&&this.currentCalendar.timeFormat?this.currentCalendar.timeFormat:null;"object"===_typeof(Locale)&&this.settings.calendarName&&(localeDateFormat=Locale.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).dateFormat,localeTimeFormat=Locale.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).timeFormat),"object"===_typeof(localeDateFormat)&&void 0!==localeDateFormat.short&&(localeDateFormat=localeDateFormat.short),"locale"===s.dateFormat?(this.pattern=localeDateFormat+(s.showTime?" ".concat(s.timeFormat||localeTimeFormat):""),s.dateFormat=this.pattern):this.pattern=s.dateFormat+(s.showTime&&s.timeFormat?" ".concat(s.timeFormat):""),this.show24Hours=(this.pattern.match("H")||[]).length>0,this.isSeconds=(this.pattern.match("ss")||[]).length>0},mask:function mask(){this.setFormat();var s=this.settings,maskOptions={process:"date",keepCharacterPositions:!0,patternOptions:{format:this.pattern}},validation="date availableDate",events={date:"change blur enter",availableDate:"change blur"};s.range.useRange&&(maskOptions.process="rangeDate",maskOptions.patternOptions.delimeter=s.range.separator,validation="rangeDate",events={rangeDate:"change blur"}),maskOptions.processOnInitialize=!1,this.isFullMonth?this.pattern=this.settings.dateFormat:void 0===this.element.data("mask")&&this.element.mask(maskOptions),this.addedValidation=!1,this.element[0]&&this.element[0].getAttribute&&!this.element[0].getAttribute("data-validate")&&(this.addedValidation=!0,this.element.attr({"data-validate":validation,"data-validation-events":JSON.stringify(events)}).validate()),this.setPlaceholder()},setPlaceholder:function setPlaceholder(){var _this3=this,s=this.settings,placeholder=this.pattern;!s.placeholder||this.element.attr("placeholder")&&"M / D / YYYY"!==this.element.attr("placeholder")||(s.range.useRange&&(placeholder=s.range.first&&s.range.first.date?function formatDate(d){return Locale.formatDate(d,{pattern:_this3.pattern,locale:_this3.locale.name})}(s.range.first.date)+s.range.separator+this.pattern:this.pattern+s.range.separator+this.pattern),this.element[0].setAttribute("placeholder",placeholder))},isOpen:function isOpen(){return this.popup&&this.popup.is(":visible")&&!this.popup.hasClass("is-hidden")},openCalendar:function openCalendar(){var _this$currentDate,_this4=this,self=this,s=this.settings,timeOptions={};if(this.lastValue="string"==typeof this.currentDate?this.currentDate:null===(_this$currentDate=this.currentDate)||void 0===_this$currentDate||null==_this$currentDate?void 0:_this$currentDate.getTime(),!this.element.is(":disabled")&&!this.element.attr("readonly")||0!==this.element.closest(".monthview").length){$("#validation-tooltip").addClass("is-hidden"),this.element.addClass("is-active is-open").trigger("listopened"),this.timepickerContainer=$('<div class="datepicker-time-container"></div>');var clearButton='<button type="button" class="is-cancel btn-tertiary">\n      '.concat(Locale.translate(this.settings.isMonthPicker?"Cancel":"Clear",{locale:this.locale.name,language:this.language}),"\n    </button>"),applyButton=' <button type="button" class="is-select btn-primary">\n      '.concat(Locale.translate("Apply",{locale:this.locale.name,language:this.language}),"\n    </button>");if(this.footer=$(""+'<div class="popup-footer">\n        '.concat(this.isRTL?applyButton+clearButton:clearButton+applyButton,"\n      </div>")),s.hideDays&&(this.footer=$(""+'<div class="popup-footer">\n          <button type="button" class="is-cancel btn-tertiary">\n            '.concat(Locale.translate("Clear",{locale:this.locale.name,language:this.language}),'\n          </button>\n          <button type="button" class="is-select-month btn-primary">\n            ').concat(Locale.translate("Apply",{locale:this.locale.name,language:this.language}),"\n          </button>\n        </div>"))),s.hideButtons&&(this.footer=$("")),s.showTime&&(void 0===s.timeFormat?timeOptions.timeFormat=this.pattern.slice(this.pattern.indexOf(" ")).trim():timeOptions.timeFormat=s.timeFormat,void 0!==s.minuteInterval&&(timeOptions.minuteInterval=s.minuteInterval),void 0!==s.secondInterval&&(timeOptions.secondInterval=s.minuteInterval),void 0!==s.mode&&(timeOptions.mode=s.mode),void 0!==s.roundToInterval&&(timeOptions.roundToInterval=s.roundToInterval)),this.calendarContainer=$('<div class="monthview-container"></div>'),this.setValueFromField(),this.settings.showTime){""===this.element.val()&&this.currentDate&&this.currentDate.getDate()&&!this.settings.useCurrentTime&&(this.currentDate.setHours(0),this.currentDate.setMinutes(0),this.currentDate.setSeconds(0));var timeFormat=this.settings.timeFormat?this.settings.timeFormat:null;timeFormat||(timeFormat=this.isSeconds?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour),timeOptions.parentElement=this.timepickerContainer,timeOptions.locale=this.settings.locale,timeOptions.language=this.settings.language,this.time=Locale.formatDate(this.currentDate,{pattern:timeFormat,locale:this.locale.name,language:this.language}),this.timepicker=this.timepickerContainer.timepicker(timeOptions).data("timepicker"),this.timepickerContainer.find(".dropdown").dropdown(),this.timepickerContainer.on("change.datepicker",(function(){_this4.currentDate=_this4.setTime(_this4.currentDate),_this4.setValue(_this4.currentDate,!0,!0)})),setTimeout((function(){_this4.timepicker.initValues=_this4.timepicker.getTimeFromField(_this4.time),_this4.timepicker.afterShow(_this4.timepickerContainer)}),1)}this.todayDate=new Date,this.todayMonth=this.todayDate.getMonth(),this.todayYear=this.todayDate.getFullYear(),this.todayDay=this.todayDate.getDate(),this.isIslamic&&(this.todayDateIslamic=Locale.gregorianToUmalqura(this.todayDate),this.todayYear=this.todayDateIslamic[0],this.todayMonth=this.todayDateIslamic[1],this.todayDay=this.todayDateIslamic[2]),this.settings.month=this.currentMonth,this.settings.year=this.currentYear,this.isIslamic&&(this.settings.activeDateIslamic=this.activeDate instanceof Date?Locale.gregorianToUmalqura(this.activeDate):this.activeDate),this.settings.onOpenCalendar?(this.settings.activeDate=this.settings.onOpenCalendar(),this.settings.month=this.settings.activeDate.getMonth(),this.settings.year=this.settings.activeDate.getFullYear(),this.isIslamic&&(this.settings.activeDateIslamic=Locale.gregorianToUmalqura(this.settings.activeDate))):(this.settings.activeDate=this.currentDate||this.todayDate,this.settings.activeDateIslamic=this.currentIslamicDate||this.todayDateIslamic),this.settings.isPopup=!0,this.settings.headerStyle="simple",this.settings.onSelected=function(node,args){if(_this4.currentDate=new Date(args.year,args.month,args.day),self.settings.range.useRange&&self.settings.range.first&&self.settings.range.selectWeek){var first=dateUtils.firstDayOfWeek(new Date,_this4.settings.firstDayOfWeek),last=dateUtils.lastDayOfWeek(new Date,_this4.settings.firstDayOfWeek);return self.settings.range.first={},self.settings.range.second=void 0,self.setWeekRange({day:first.getDate(),month:first.getMonth(),year:first.getFullYear()},{day:last.getDate(),month:last.getMonth(),year:last.getFullYear()}),self.closeCalendar(),void self.element.focus()}self.settings.range.useRange&&self.settings.range.first&&!self.settings.range.selectWeek||(self.insertDate(_this4.currentDate),args.close&&(self.closeCalendar(),self.element.focus()))},this.settings.range.useRange&&this.settings.range.selectWeek&&(this.settings.onKeyDown=function(args){return 37!==args.key&&39!==args.key&&(38!==args.key&&40!==args.key&&13!==args.key)}),this.settings.language||(this.settings.language=this.language),this.calendarAPI=new MonthView(this.calendarContainer,this.settings),this.calendar=this.calendarAPI.element,s.showTime&&this.calendar.addClass("is-timepicker"),s.hideDays&&(this.calendar.addClass("is-monthyear"),"MMMM"!==s.dateFormat&&"MMM"!==s.dateFormat&&"MM"!==s.dateFormat||this.calendar.addClass("is-monthonly"),"yyyy"===s.dateFormat&&this.calendar.addClass("is-yearonly")),this.calendar.append(s.showTime?this.timepickerContainer:"",this.footer);var placementParent=this.element,placementParentXAlignment=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(placementParentXAlignment="center",placementParent=this.element.next(".icon"));var popoverOpts={content:this.calendar,placementOpts:{parent:placementParent,parentXAlignment:placementParentXAlignment,strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",extraClass:this.settings.range.selectWeek?"monthview-popup is-range-week":"monthview-popup",tooltipElement:"#monthview-popup",initializeContent:!1};this.trigger.popover(popoverOpts).off("show.datepicker").on("show.datepicker",(function(){if(window.innerHeight<400&&_this4.popupClosestScrollable&&(_this4.popup.find(".arrow").hide(),_this4.popup.css({"min-height":$("html").hasClass("theme-uplift-light")?"":"".concat(_this4.popupClosestScrollable[0].scrollHeight-521,"px"),height:""}),_this4.popupClosestScrollable.css("min-height","375px")),s.range.useRange&&s.range.first&&s.range.first.date&&s.range.second&&s.range.second.date&&_this4.popup.addClass("is-hidden"),_this4.settings.hideButtons&&_this4.popup.addClass("hide-buttons"),_this4.settings.showMonthYearPicker&&(_this4.popup.find(".expandable-area").expandablearea({animationSpeed:150,trigger:"btn-monthyear-pane"}),_this4.popup.find(".btn-monthyear-pane").button()),_this4.settings.range.selectWeek){var tableBody=_this4.popup.find("tbody");_this4.popup.find(".monthview-table tr").hover((function(e){var tr=$(e.currentTarget);tableBody.find("td").removeClass("is-selected range-selection end-date"),tr.find("td").addClass("range-selection")}))}})).off("hide.datepicker").on("hide.datepicker",(function(){_this4.popupClosestScrollable.add(_this4.popup).css("min-height",""),_this4.closeCalendar()})),this.handleKeys($("#monthview-popup")),$(".monthview-footer a",this.calendar).button(),this.popup=$("#monthview-popup"),this.popupClosestScrollable=this.popup.closest(".scrollable"),this.popup.attr("role","dialog"),this.originalDate=this.element.val(),this.calendarAPI.currentDate=this.currentDate,this.calendarAPI.currentIslamicDate=this.currentIslamicDate,this.calendarAPI.validatePrevNext(),this.calendarAPI.days.off("click.datepicker").on("click.datepicker","td",(function(){var td=$(this);if(td.hasClass("is-disabled"))self.calendarAPI.activeTabindex(td,!0);else{if(!s.range.useRange||s.range.first&&!s.range.second||s.range.selectWeek||self.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected"),s.range.useRange&&s.range.selectWeek){var first=self.calendarAPI.getCellDate(self.calendar.find("td.range-selection").first()),last=self.calendarAPI.getCellDate(self.calendar.find("td.range-selection").last());return void self.setWeekRange(first,last)}s.range.useRange||self.calendarAPI.days.find(".is-selected").removeClass("is-selected").removeAttr("aria-selected").removeAttr("tabindex");var cell=$(this);cell.addClass("is-selected".concat(s.range.useRange?" range":"")).attr("aria-selected","true"),self.insertSelectedDate(cell),s.range.useRange?self.isFocusAfterClose=!0:(self.closeCalendar(),self.element.focus())}})),this.footer.off("click.datepicker").on("click.datepicker","button",(function(e){var btn=$(this);if(btn.hasClass("is-cancel")&&(self.settings.isMonthPicker||(self.element.val("").trigger("change").trigger("input"),self.currentDate=null,self.clearRangeDates()),self.closeCalendar()),btn.hasClass("is-cancel-month-pane")&&self.calendarAPI.monthYearPane.data("expandablearea").close(),btn.hasClass("is-select-month")||btn.hasClass("is-select-month-pane")){var year=parseInt(self.calendarAPI.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),month=parseInt(self.calendarAPI.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);self.currentDate=new Date(year,month,1),self.isIslamic&&(self.currentDateIslamic[0]=year,self.currentDateIslamic[1]=month,self.currentDateIslamic[2]=1,self.currentYear=year,self.currentMonth=month,self.currentDay=1,self.currentDate=Locale.umalquraToGregorian(year,month,1)),s.range.useRange?self.isFocusAfterClose=!1:btn.hasClass("is-select-month")&&(self.insertDate(self.isIslamic?self.currentDateIslamic:self.currentDate),self.closeCalendar()),btn.hasClass("is-select-month-pane")&&self.calendarAPI.showMonth(month,year)}if(btn.hasClass("is-select")){var status=self.calendarAPI.setRangeSelByClick();if(1===status)self.closeCalendar();else if(2===status)self.element.trigger("change",[s.range.data]).trigger("input",[s.range.data]),self.closeCalendar();else{if(3===status)return void e.preventDefault();self.insertSelectedDate(),self.closeCalendar()}}self.element.focus(),e.preventDefault(),btn.hasClass("is-select-month-pane")&&self.calendarAPI.monthYearPane.data("expandablearea").close()})),this.popup.off("click.datepicker-today").on("click.datepicker-today",".hyperlink.today",(function(e){e.preventDefault(),s.range.useRange?(self.setToday(!0),(!s.range.second||s.range.second&&!s.range.second.date)&&e.preventDefault()):(self.setToday(),self.closeCalendar())})),setTimeout((function(){self.calendarAPI.validatePrevNext(),self.setFocusAfterOpen()}),50)}},clearRangeDates:function clearRangeDates(){var s=this.settings;s.range.useRange&&(s.range.start=DATEPICKER_DEFAULTS.range.start,s.range.end=DATEPICKER_DEFAULTS.range.end,s.range.data&&delete s.range.data)},insertSelectedDate:function insertSelectedDate(cell){var cellDate=this.calendarAPI.getCellDate(cell||this.calendar.find("td.is-selected").last()),day=cellDate.day,month=cellDate.month,year=cellDate.year;this.currentDate=new Date(year,month,day),this.isIslamic&&(this.currentDateIslamic[0]=year,this.currentDateIslamic[1]=month,this.currentDateIslamic[2]=day,this.currentYear=year,this.currentMonth=month,this.currentDay=day,this.currentDate=Locale.umalquraToGregorian(year,month,day)),this.insertDate(this.isIslamic?this.currentDateIslamic:this.currentDate)},setWeekRange:function setWeekRange(first,last){var s=this.settings;s.range.first.date=new Date(first.year,first.month,first.day),s.range.second=void 0,this.setValue(new Date(last.year,last.month,last.day)),this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected")},close:function close(){return deprecateMethod(this.closeCalendar,this.close).apply(this)},closeCalendar:function closeCalendar(){var cell=this.calendarAPI&&this.calendarAPI.days.length?this.calendarAPI.days.find("td.is-selected"):null;this.resetRange({cell:cell}),this.settings.showTime&&this.timepickerControl&&this.timepickerControl.isOpen()&&this.timepickerControl.closeTimePopup(),this.popup&&this.popup.length&&this.popup.hide().remove();var popoverAPI=this.trigger.data("tooltip");popoverAPI&&popoverAPI.destroy(),this.calendarAPI&&delete this.calendarAPI.datepickerApi,this.element.hasClass("is-active")&&(this.element.trigger("listclosed"),this.element.removeClass("is-active is-open"))},setFocusAfterOpen:function setFocusAfterOpen(){var s=this.settings;if(this.calendar){if(s.range.useRange&&(s.range.first&&s.range.first.label&&(!s.range.second||s.range.second&&!s.range.second.date)&&this.setRangeFirstPart(s.range.first.date),this.calendarAPI.setRangeSelected(),s.range.second&&s.range.first.date&&s.range.second.date&&this.element.val(this.getRangeValue()),this.popup.removeClass("is-hidden")),this.calendarAPI.datepickerApi=this,s.range.useRange&&s.range.selectWeek){var tr=this.calendar.find("td.is-selected").first().parent();return this.calendar.find("td[tabindex]").removeAttr("tabindex"),void tr.attr("tabindex","0").focus()}this.calendarAPI.activeTabindex(this.calendar.find("td.is-selected"),!0)}},setRangeFirstPart:function setRangeFirstPart(date){var _this5=this,s=this.settings,dateObj=function dateObj(d){return new Date(d.year,d.month,d.day)},minCell=this.calendarAPI.days.find("td:visible:first"),maxCell=this.calendarAPI.days.find("td:visible:last"),label=function labelDate(d){return Locale.formatDate(d,{date:"full",locale:_this5.locale.name})}(date),cell=this.calendarAPI.days.find('[aria-label="'.concat(label,'"]')),row=cell.closest("tr");this.currentDate=date,s.range.first={date:date,label:label,cell:cell,row:row,rowIdx:row.index(),cellIdx:cell.index()},s.range.extra={minCell:minCell,maxCell:maxCell,min:dateObj(this.calendarAPI.getCellDate(minCell)),max:dateObj(this.calendarAPI.getCellDate(maxCell)),cellLength:row.children("td").length},this.calendarAPI.settings.range.first=s.range.first,this.calendarAPI.settings.range.extra=s.range.extra},insertDate:function insertDate(date,isReset){var s=this.settings,year=date instanceof Array?date[0]:date.getFullYear(),month=date instanceof Array?date[1]:date.getMonth(),day=(date instanceof Array?date[2]:date.getDate()).toString();if(this.calendarAPI.currentMonth===month&&this.calendarAPI.currentYear===year||this.calendarAPI.showMonth(month,year),this.isOpen()){var dateTd=this.calendarAPI.days.find("td:not(.alternate)").filter((function(){return $(this).text().toLowerCase()===day}));dateTd.hasClass("is-disabled")||(this.settings.showTime&&(isReset?(this.time=Locale.formatDate(date,{pattern:this.currentCalendar.dateFormat.hour,locale:this.locale.name,language:this.language}),this.settings.roundToInterval&&($("#timepicker-minutes").val(""),date=this.setTime(date))):date=this.setTime(date)),this.setValue(date,!0),s.range.useRange?this.calendarAPI.days.find(".is-selected").removeAttr("aria-selected").removeAttr("tabindex"):this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected").removeAttr("tabindex"),dateTd.addClass("is-selected".concat(s.range.useRange?" range":"")).attr({"aria-selected":!0})),this.calendarAPI.activeTabindex(dateTd,!0)}},setValue:function setValue(date,trigger,isTime){var _this$currentDate2,s=this.settings;this.currentDate=date,date instanceof Array&&(this.currentIslamicDate=date,this.currentDate=Locale.umalquraToGregorian(date[0],date[1],date[2])),s.range.useRange?isTime||this.setRangeToElem(date,!1):this.element.val(Locale.formatDate(date,{pattern:this.pattern,locale:this.locale.name}));var newValue="string"==typeof this.currentDate?this.currentDate:null===(_this$currentDate2=this.currentDate)||void 0===_this$currentDate2||null==_this$currentDate2?void 0:_this$currentDate2.getTime(),isChanged=this.lastValue!==newValue;this.lastValue=newValue,trigger&&isChanged&&(s.range.useRange?isTime||this.element.trigger("change",[s.range.data]).trigger("input",[s.range.data]):this.element.trigger("change").trigger("input"))},setRangeToElem:function setRangeToElem(date,isSingleDate){var _this6=this,s=this.settings,formatDate=function formatDate(d){return Locale.formatDate(d,{pattern:_this6.pattern,locale:_this6.locale.name})},value=formatDate(date),handled=!1;if(this.isOpen()){var label=function labelDate(d){return Locale.formatDate(d,{date:"full",locale:_this6.locale.name})}(date),cell=this.calendarAPI.days.find('[aria-label="'.concat(label,'"]')),row=cell.closest("tr");s.range.second&&(s.range.second.date?this.resetRange({cell:cell}):(delete s.range.second.date,$.isEmptyObject(s.range.second)&&delete s.range.second));var time={};s.range.first&&(time.date=date.getTime(),time.firstdate=s.range.first.date.getTime(),time.min=this.calendarAPI.getDifferenceToDate(s.range.first.date,s.range.minDays),time.max=this.calendarAPI.getDifferenceToDate(s.range.first.date,s.range.maxDays)),!s.range.first||isSingleDate?(this.setRangeFirstPart(date),value=this.getRangeValue(),this.setPlaceholder()):!s.range.second&&s.range.selectBackward&&time.date>time.firstdate||s.range.selectForward&&time.date<time.firstdate||s.range.maxDays>0&&time.date>time.max.aftertime||time.date<time.max.beforetime?(this.resetRange({cell:cell}),this.setRangeFirstPart(date),value=this.getRangeValue(),this.setPlaceholder()):(handled=!0,this.currentDate=date,s.range.minDays>0&&(time.date>=time.firstdate&&time.date<time.min.aftertime?(date=time.min.after,time.date===time.firstdate&&(time.date=date.getTime())):time.date<time.firstdate&&time.date>time.min.beforetime&&(date=time.min.before),row=(cell=this.calendarAPI.days.find('[aria-label="'.concat(label,'"]'))).closest("tr")),time.date>time.firstdate?s.range.second={date:date,label:label,cell:cell,row:row,rowIdx:row.index(),cellIdx:cell.index()}:(s.range.second=s.range.first,s.range.first={date:date,label:label,cell:cell,row:row,rowIdx:row.index(),cellIdx:cell.index()}),value=this.getRangeValue())}else if(!isSingleDate){handled=!0;var d=date||new Date;this.currentMonth=d.getMonth(),this.currentYear=d.getFullYear(),this.currentDay=d.getDate(),this.currentDate=d,s.range.first=s.range.first||{},s.range.second=s.range.second||{},s.range.first.date=d,s.range.second.date=d,value=this.getRangeValue()}this.element.val(value),handled?(s.range.data={value:value,dates:this.calendarAPI?this.calendarAPI.getDateRange(s.range.first.date,s.range.second.date):[s.range.first.date],startDate:s.range.first.date,start:formatDate(s.range.first.date),endDate:s.range.second.date,end:formatDate(s.range.second.date)},this.closeCalendar(),this.isFocusAfterClose&&(delete this.isFocusAfterClose,this.element.focus())):s.range.data={value:value,dates:[s.range.first.date],startDate:s.range.first.date,start:formatDate(s.range.first.date)}},resetRange:function resetRange(options){options=options||{},this.settings.range.useRange&&(delete this.settings.range.first,delete this.settings.range.second,delete this.settings.range.extra,options.isData&&delete this.settings.range.data,this.calendarAPI&&(delete this.calendarAPI.settings.range.first,delete this.calendarAPI.settings.range.second,delete this.calendarAPI.settings.range.extra,options.isData&&delete this.calendarAPI.settings.range.data),this.calendarAPI&&this.calendarAPI.days.length&&this.calendarAPI.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),options.cell&&options.cell.addClass("is-selected"))},setRangeValueFromField:function setRangeValueFromField(){var dates,_this7=this,formatDate=function formatDate(d){return Locale.formatDate(d,{pattern:_this7.pattern,locale:_this7.locale.name})},parseDate=function parseDate(d){return Locale.parseDate(d,{pattern:_this7.pattern,locale:_this7.locale.name},!1)},getTime=function getTime(d){return d&&"function"==typeof d.getTime?d.getTime():(new Date).getTime()},alignDates=function alignDates(dates){var d1=parseDate(dates[0]),d2=parseDate(dates[1]);return d1&&d2?(d1=getTime(d1))>(d2=getTime(d2))?[dates[1],dates[0]]:[dates[0],dates[1]]:dates},s=this.settings,field={};(field.value=s.range.value||this.element.val().trim(),field.isEmpty=""===field.value,!field.isEmpty&&field.value.indexOf(s.range.separator)>-1?field.dates=alignDates(field.value.split(s.range.separator)):!field.isEmpty&&field.value.indexOf(s.range.separator.slice(0,-1))>-1?field.dates=field.value.split(s.range.separator.slice(0,-1)):field.isEmpty||-1!==field.value.indexOf(s.range.separator)||(field.dates=[formatDate(field.value)]),!s.range.data&&s.range.start&&s.range.end&&field.isEmpty)&&(dates="string"==typeof s.range.start&&"string"==typeof s.range.end?alignDates([s.range.start,s.range.end]):"string"!=typeof s.range.start&&"string"==typeof s.range.end?alignDates([formatDate(s.range.start),s.range.end]):"string"==typeof s.range.start&&"string"!=typeof s.range.end?alignDates([s.range.start,formatDate(s.range.end)]):alignDates([formatDate(s.range.start),formatDate(s.range.end)]),s.range.start=formatDate(dates[0]),s.range.end=formatDate(dates[1]));if(s.range.first=s.range.first||{},s.range.second=s.range.second||{},s.range.data&&s.range.data.startDate?s.range.first.date=s.range.data.startDate:s.range.start&&"string"==typeof s.range.start?s.range.first.date=parseDate(s.range.start):field.dates&&(s.range.first.date=parseDate(field.dates[0])),s.range.data&&s.range.data.endDate?s.range.second.date=s.range.data.endDate:s.range.end&&"string"==typeof s.range.end?s.range.second.date=parseDate(s.range.end):field.dates&&(s.range.second.date=parseDate(field.dates[1])),this.calendarAPI&&this.calendarAPI.setRangeSelected(),!field.isEmpty&&(field.isEmpty||s.range.data))return!1;var value=formatDate(s.range.first.date);return value&&this.element.val(value),!0},setValueFromField:function setValueFromField(){var _this8=this,s=this.settings;if(this.setCurrentCalendar(),s.range.useRange&&""===this.element.val().trim()&&this.resetRange({isData:!0}),s.range.useRange&&(""!==this.element.val().trim()||s.range.start&&s.range.end||s.range.data&&s.range.data.startDate&&s.range.data.endDate)&&!this.setRangeValueFromField())this.currentDate&&"function"==typeof this.currentDate.getMonth&&(this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate());else{var fieldValue=this.element.val(),gregorianValue=fieldValue;if(this.isIslamic&&fieldValue){var islamicValue=Locale.parseDate(this.element.val(),{pattern:this.pattern,locale:this.locale.name});islamicValue instanceof Date?gregorianValue=Locale.umalquraToGregorian(islamicValue.getFullYear(),islamicValue.getMonth(),islamicValue.getDate()):islamicValue instanceof Array&&(gregorianValue=Locale.umalquraToGregorian(islamicValue[0],islamicValue[1],islamicValue[2]))}var selectedDay=function getSelectedDay(){var day=(new Date).getDate();if(_this8.calendarAPI){var selected=_this8.calendarAPI.dayMap.filter((function(d){return d.elem.is(".is-selected")}));selected.length&&(day=parseInt(selected[0].key.substr(6),10))}return day}();this.currentDate=gregorianValue||new Date,"string"==typeof this.currentDate&&(this.currentDate=Locale.parseDate(this.currentDate,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1),this.pattern&&-1===this.pattern.indexOf("d")&&this.currentDate.setDate(selectedDay)),void 0===this.currentDate&&(this.currentDate=Locale.parseDate(gregorianValue,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1)),this.isIslamic?(this.currentDateIslamic=Locale.gregorianToUmalqura(this.currentDate),this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2],this.currentIslamicDate=this.currentDateIslamic):(this.currentDate=this.currentDate||new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate());var dateFormat=this.pattern,isStrict=!("MMMM d"===dateFormat||"yyyy"===dateFormat||"MMMM"===dateFormat),fieldValueTrimmed=this.element.val().trim();if(""!==fieldValueTrimmed&&!s.range.useRange){var parsedDate=Locale.parseDate(fieldValueTrimmed,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},isStrict),hours=parsedDate?parsedDate.getHours():0;parsedDate&&hours<12&&this.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&parsedDate.setHours(hours+12),this.pattern&&-1===this.pattern.indexOf("d")&&parsedDate.setDate(selectedDay),void 0===parsedDate||""===this.element.val().trim()||s.range.useRange||this.setValue(parsedDate)}s.range.useRange&&s.range.first&&s.range.first.date&&s.range.second&&(s.range.second.date?this.element.val(this.getRangeValue()):this.setRangeToElem(this.currentDate,!0))}},enable:function enable(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},disable:function disable(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled")},isDisabled:function isDisabled(){return this.element.prop("disabled")},readonly:function readonly(){this.enable(),this.element.attr("readonly","readonly")},setToday:function setToday(keepFocus){var s=this.settings;if(this.currentDate=new Date,this.settings.useCurrentTime||(this.currentDate=this.setTime(this.currentDate)),this.isIslamic){var islamicDateParts=Locale.gregorianToUmalqura(this.currentDate);this.currentDateIslamic=islamicDateParts}var currentDate=this.isIslamic?this.currentDateIslamic:this.currentDate;if(this.isOpen())if(s.range.useRange)if(!s.range.first||s.range.first&&!s.range.first.date){if(this.calendarAPI.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),this.insertDate(currentDate,!0),keepFocus&&this.calendarAPI){var cell=this.calendarAPI.dayMap.filter((function(d){return d.elem.is(".is-selected")}));cell&&cell.length&&setTimeout((function(){cell[0].elem.focus()}),0)}}else s.range.first&&s.range.first.date&&(!s.range.second||s.range.second&&!s.range.second.date)?this.setRangeToElem(currentDate,!1):s.range.first&&s.range.first.date&&s.range.second&&s.range.second.date&&(this.resetRange({isData:!0}),this.insertDate(currentDate,!0));else this.insertDate(currentDate,!0);else{if(s.range.useRange)this.setRangeToElem(this.currentDate);else{var options={pattern:this.pattern,locale:this.locale.name},islamicDateText=Locale.formatDate(currentDate,options);this.element.val(islamicDateText)}s.range.useRange?this.element.trigger("change",[s.range.data]).trigger("input",[s.range.data]):this.element.trigger("change").trigger("input")}},setTime:function setTime(date){var hasPopup=void 0!==this.popup;if(!this.timepicker||!hasPopup)return this.settings.useCurrentTime||date.setHours(0,0,0,0),date;var hours=this.popup.find(".dropdown.hours").val(),minutes=this.popup.find(".dropdown.minutes").val(),seconds=this.isSeconds?this.popup.find(".dropdown.seconds").val():0,period=this.popup.find(".dropdown.period"),periodValue=period.val();return hours=period.length&&periodValue===this.currentCalendar.dayPeriods[1]&&hours<12?parseInt(hours,10)+12:hours,hours=!period.length||periodValue!==this.currentCalendar.dayPeriods[0]&&periodValue||12!==parseInt(hours,10)?hours:0,(date=new Date(date)).setHours(hours,minutes,seconds),date},getCurrentDate:function getCurrentDate(){return this.currentDate},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,DATEPICKER_DEFAULTS)),this.teardown().init()},getRangeValue:function getRangeValue(){var _this9=this,s=this.settings,formatDate=function formatDate(d){return Locale.formatDate(d,{pattern:_this9.pattern,locale:_this9.locale.name})};return s.range.useRange&&s.range.first&&s.range.first.date&&s.range.second&&s.range.second.date?"".concat(formatDate(s.range.first.date)+s.range.separator+formatDate(s.range.second.date)):s.range.useRange&&s.range.first&&s.range.first.date?s.placeholder?"".concat(formatDate(s.range.first.date)+s.range.separator+this.pattern):formatDate(s.range.first.date):""},teardown:function teardown(){this.isOpen()&&this.closeCalendar(),this.element.off("blur.datepicker change.datepicker-rangeclear keyup.datepicker-rangeclear"),this.trigger.remove(),this.element.removeAttr("placeholder"),this.calendarAPI&&this.calendarAPI.destroy(),this.calendar&&this.calendar.length&&this.calendar.remove(),this.popup&&this.popup.length&&this.popup.remove();var maskApi=this.element.data("mask");return maskApi&&maskApi.destroy(),this.element.removeAttr("data-mask"),this.element.removeData("mask"),this.element.off("keydown.datepicker blur.validate change.validate keyup.validate focus.validate"),this.addedValidation&&(this.element.removeAttr("data-validate").removeData("validate validationEvents"),delete this.addedValidation),this},destroy:function destroy(){this.closeCalendar(),this.teardown(),this.element[0]&&$.removeData(this.element[0],"datepicker")},handleEvents:function handleEvents(){var _this10=this,self=this,s=this.settings;if(this.trigger.on("click.datepicker",(function(){self.isOpen()?self.closeCalendar():self.openCalendar()})),this.handleKeys(this.element),self.element.on("blur.datepicker",(function(){var _this10$currentDate;_this10.lastValue=null===(_this10$currentDate=_this10.currentDate)||void 0===_this10$currentDate||null==_this10$currentDate?void 0:_this10$currentDate.getTime,""!==_this10.element.val().trim()&&_this10.setValueFromField()})),this.element.on("change.datepicker-rangeclear keyup.datepicker-rangeclear",(function(){_this10.isOpen()||""!==_this10.element.val().trim()||self.clearRangeDates()})),!this.isOpen()&&s.range.useRange&&!s.range.first){this.setRangeValueFromField();var value=this.getRangeValue();value&&this.element.val(value)}}},$.fn.datepicker=function(settings){return this.each((function(){var instance=$.data(this,"datepicker");instance?instance.updated(settings):instance=$.data(this,"datepicker",new DatePicker(this,settings))}))};var validTagNames=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code","div"];function FontPickerStyle(id,displayName){var tagName=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"p",className=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",styleProps=arguments.length>4?arguments[4]:void 0;if(!id||"string"!=typeof id||!displayName.length)throw new Error('"id" property must be defined and unique.');if(this.id=id,!displayName||"string"!=typeof displayName||!displayName.length)throw new Error('"displayName" property must be defined.');return this.displayName=displayName,tagName=tagName.toLowerCase(),-1===validTagNames.indexOf(tagName)&&(tagName="p"),this.tagName=tagName,"string"==typeof className&&className.length&&(this.className=className),styleProps instanceof CSSStyleDeclaration&&(this.styleProps=styleProps),this}FontPickerStyle.prototype={render:function render(content){return content=xssUtils.stripHTML(content),"<".concat(this.tagName,">").concat(content,"</").concat(this.tagName,">")}};function fontpickerSettingsFactory(){return{popupmenuSettings:{offset:{y:10}},styles:[new FontPickerStyle("default",Locale.translate("FontPickerNormal")),new FontPickerStyle("header1",Locale.translate("FontPickerHeader").replace("{0}","1"),"h3"),new FontPickerStyle("header2",Locale.translate("FontPickerHeader").replace("{0}","2"),"h4")]}}function FontPicker(element,settings){if(!(element instanceof HTMLElement))throw new Error('Property "element" is not an HTMLElement type');this.settings=utils.mergeSettings(element,settings,fontpickerSettingsFactory()),settings&&Array.isArray(settings.styles)&&(this.settings.styles=settings.styles),this.element=element,this.init()}FontPicker.prototype={get menuAPI(){var api=$(this.element).data("popupmenu");if(api)return api},get selected(){var selected;return this.settings.styles.forEach((function(style){style.selected&&(selected=style)})),selected||(this.settings.styles[0].selected=!0,this.settings.styles[0])},getStyleById:function getStyleById(id){var targetStyle;if(this.settings.styles.forEach((function(style){style.id===id&&(targetStyle=style)})),!targetStyle)throw new Error('No FontPickerStyle available with id "'.concat(id,'"'));return targetStyle},getStyleByTagName:function getStyleByTagName(tagName){var targetStyle;if(this.settings.styles.forEach((function(style){style.tagName===tagName&&(targetStyle=style)})),!targetStyle)throw new Error('No FontPickerStyle available with tagName "'.concat(tagName,'"'));return targetStyle},get disabled(){return this.trueDisabled},set disabled(bool){this.trueDisabled=bool,this.element.disabled=!0===bool},get supportedTagNames(){var tagNames=[];return this.settings.styles.forEach((function(style){tagNames.push(style.tagName)})),tagNames},init:function init(){return Array.isArray(this.settings.styles)&&this.settings.styles.length||(this.settings.styles=fontpickerSettingsFactory().styles),this.build().handleEvents()},build:function build(){var $element=$(this.element),ddIcon=this.element.querySelector("svg.icon.icon-dropdown");ddIcon||(ddIcon=$.createIcon({icon:"dropdown",classes:["icon-dropdown"]}),this.element.insertAdjacentHTML("beforeend",ddIcon)),this.ddIcon=this.element.querySelector("svg.icon.icon-dropdown"),$element.button();var $menu=$element.next(".popupmenu");$menu&&$menu.length||($menu=$('<ul class="popupmenu fontpicker-menu"></ul>').insertAfter(this.element)),$menu.html(this.buildMenuHTML());var menuSettings=utils.extend({},this.settings.popupmenuSettings,{menu:$menu,stretchToWidestMenuItem:!0});return $element.popupmenu(menuSettings),this.render(),this},render:function render(){var selected=this.selected,spanElem=this.element.querySelector("span");$(spanElem).html(selected.displayName)},buildMenuHTML:function buildMenuHTML(){var menuHTML="";return this.settings.styles.forEach((function(style){var itemRender=style.render(style.displayName);menuHTML+='<li class="fontpicker-style">\n        <a href="#" data-val="'.concat(style.id,'">').concat(itemRender,"</a>\n      </li>")})),"".concat(menuHTML)},handleEvents:function handleEvents(){var _this=this,self=this;return $(this.element).on("selected.".concat("fontpicker"),(function(e,selectedItem){var val=selectedItem.attr("data-val");_this.select(val)})).on("updated.".concat("fontpicker"),(function(e,settings){self.updated(settings)})),this},select:function select(id,preventEvent){if(!id||"string"!=typeof id&&!(id instanceof FontPickerStyle))throw new Error('"id" property must be defined in order to select.');var style;style=id instanceof FontPickerStyle?id:this.getStyleById(id),this.settings.styles.forEach((function(thisStyle){thisStyle.selected=!1})),style.selected=!0,this.render(style),preventEvent||$(this.element).triggerHandler("font-selected",[style])},updated:function updated(settings){var incomingStyles;void 0!==settings&&(Array.isArray(settings.styles)&&(incomingStyles=settings.styles),this.settings=utils.mergeSettings(this.element,settings,this.settings),incomingStyles&&(this.settings.styles=incomingStyles));return this.teardown().init()},teardown:function teardown(){var ddIcon=this.element.querySelector("svg.icon.icon-dropdown");ddIcon.parentNode.removeChild(ddIcon);var menuAPI=this.menuAPI;menuAPI&&"function"==typeof menuAPI.destroy&&menuAPI.destroy();var buttonAPI=$(this.element).data("button");return buttonAPI&&"function"==typeof buttonAPI.destroy&&buttonAPI.destroy(),$(this.element).off(["selected.".concat("fontpicker"),"updated.".concat("fontpicker")].join(" ")),this},destroy:function destroy(){this.teardown(),$.removeData(this.element,"fontpicker")}};var TOOLBAR_ELEMENTS=[{type:"button",selector:'button:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button), input[type="button"]:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button)',filter:function buttonFilter(elem){return!$(elem).parents(".searchfield-wrapper, .toolbar-searchfield-wrapper").length}},{type:"menubutton",selector:".btn-menu"},{type:"actionbutton",selector:".btn-actions"},{type:"colorpicker",selector:".colorpicker-editor-button"},{type:"hyperlink",selector:"a[href]",filter:function hyperlinkFilter(elem){if("A"!==elem.nodeName)throw new Error("Unspecified error occured");return $(elem).parents(".popupmenu").length<1}},{type:"checkbox",selector:'input[type="checkbox"]'},{type:"radio",selector:'input[type="radio"]'},{type:"searchfield",selector:".searchfield"},{type:"toolbarsearchfield",selector:".toolbarsearchfield"}],TOOLBAR_COMPONENT_APIS={actionbutton:"popupmenu",colorpicker:"colorpicker",menubutton:"popupmenu",hyperlink:"hyperlink",searchfield:"searchfield",toolbarsearchfield:"searchfield"},TOOLBAR_FLEX_ITEM_DEFAULTS={disabled:!1,readOnly:!1,hidden:!1,componentSettings:void 0,allowTabs:!1};function ToolbarFlexItem(element,settings){this.element=element,this.settings=utils.mergeSettings(this.element,settings,TOOLBAR_FLEX_ITEM_DEFAULTS),this.init()}ToolbarFlexItem.prototype={type:void 0,isToolbarFlexItem:!0,init:function init(){this.type=function getToolbarItemType(element){var type=!1;if(TOOLBAR_ELEMENTS.forEach((function(elemObj){$(element).is(elemObj.selector)&&("function"!=typeof elemObj.filter||elemObj.filter(element))&&(type=elemObj.type)})),!type)throw new Error("Element ".concat(element," is not a valid Toolbar Item Type."));return type}(this.element),this.section=this.element.parentElement,this.toolbar=this.section.parentElement,this.trueSelected=!1},get focusable(){return!0!==this.disabled&&("searchfield"===this.type||("actionbutton"!==this.type||!0!==this.hasNoOverflowedItems)&&(!0!==this.overflowed&&this.visible))},get focused(){return 0===this.element.tabIndex},set focused(boolean){this.element.tabIndex=boolean?0:-1},get selected(){return this.trueSelected},set selected(boolean){if(boolean)return this.trueSelected=!0,this.element.classList.add("is-selected"),this.triggerSelectedEvent(),void(this.selectedAnchor&&delete this.selectedAnchor);this.trueSelected=!1,this.element.classList.remove("is-selected")},get componentAPI(){var $element=$(this.element),componentType=TOOLBAR_COMPONENT_APIS[this.type];if(componentType)return $element.data(componentType)},get toolbarAPI(){return this.settings.toolbarAPI?this.settings.toolbarAPI:$(this.toolbar).data("toolbar-flex")},triggerSelectedEvent:function triggerSelectedEvent(){if(!(["colorpicker","searchfield","toolbarsearchfield"].indexOf(this.type)>-1)){var eventArgs=[this];["menubutton","actionbutton"].indexOf(this.type)>-1&&this.selectedAnchor&&eventArgs.push(this.selectedAnchor),$(this.element).trigger("selected",eventArgs)}},show:function show(){this.visible=!0},hide:function hide(){this.visible=!1},set visible(boolean){var isSearchfield="searchfield"===this.type||"toolbarsearchfield"===this.type;if(boolean)return isSearchfield&&this.element.parentNode.classList.remove("hidden"),void this.element.classList.remove("hidden");isSearchfield&&this.element.parentNode.classList.add("hidden"),this.element.classList.add("hidden")},get visible(){return-1===this.element.className.indexOf("hidden")},enable:function enable(){this.disabled=!1,this.hasReadOnly&&(this.readOnly=!1)},get disabled(){return this.element.disabled},set disabled(boolean){if(boolean)return this.element.disabled=!0,this.element.setAttribute("aria-disabled",!0),void(this.element.readOnly=!1);this.element.disabled=!1,this.element.removeAttribute("aria-disabled")},get hasReadOnly(){return"readOnly"in this.element},get readOnly(){return!!this.hasReadOnly&&this.element.readOnly},set readOnly(boolean){if(this.hasReadOnly)return boolean?(this.disabled=!1,this.element.disabled=!1,void(this.element.readOnly=!0)):void(this.element.readOnly=!1)},get overflowed(){var isRTL=Environment.rtl,elemRect=this.element.getBoundingClientRect(),sectionRect=this.section.getBoundingClientRect();return isRTL?elemRect.left<sectionRect.left:elemRect.right>sectionRect.right},set hasNoOverflowedItems(isTrue){if("actionbutton"===this.type&&this.componentAPI){var menuIsEmpty=this.componentAPI.toData({noMenuWrap:!0}).length-this.predefinedItems.length<1;if(isTrue&&menuIsEmpty)return this.element.classList.add("no-overflowed-items"),this.trueHasNoOverflowedItems=!0,void(this.focused&&(this.toolbarAPI.focusedItem=this,this.toolbarAPI.navigate(-1,void 0)));this.trueHasNoOverflowedItems=!1,this.element.classList.remove("no-overflowed-items")}},get hasNoOverflowedItems(){return!this.componentAPI||this.trueHasNoOverflowedItems},handleEvents:function handleEvents(){var _this=this,self=this,$element=$(this.element);["menubutton","actionbutton","colorpicker"].indexOf(this.type)>-1&&$element.on("selected.".concat("toolbarflexitem"),(function(e,anchor){if(!_this.selectedAnchor){if(e.stopPropagation(),"actionbutton"===_this.type){var elementLink,li=$(anchor).parent(),itemLink=li.data("originalButton"),itemLinkAPI=$(itemLink).data("toolbarflexitem");if(li.parents("ul").length>1&&(elementLink=li.data("original-menu-element"),itemLink=li.parents("li").last().data("originalButton"),itemLinkAPI=$(itemLink).data("toolbarflexitem")),itemLinkAPI)return elementLink?(e.preventDefault(),itemLinkAPI.selectedAnchor=$(elementLink).children("a")):itemLinkAPI.selectedAnchor=anchor,void(itemLinkAPI.selected=!0)}self.selectedAnchor=anchor,self.selected=!0}})),"actionbutton"===this.type&&($element.on("beforeopen.".concat("toolbarflexitem"),this.handleActionButtonBeforeOpen.bind(this)),$("body").off("resize.".concat("toolbarflexitem")).on("resize.".concat("toolbarflexitem"),this.handleActionButtonResize.bind(this))),this.settings.allowTabs||$element.on("focus.".concat("toolbarflexitem"),this.handleFocus.bind(this))},handleActionButtonBeforeOpen:function handleActionButtonBeforeOpen(){this.refreshMoreActionsMenu()},handleActionButtonResize:function handleActionButtonResize(){this.refreshMoreActionsMenu()},handleFocus:function handleFocus(e){e.target&&e.target===this.element&&(this.toolbarAPI.focusedItem=this)},render:function render(){this.disabled=this.disabled,this.hasReadOnly&&(this.readonly=this.readonly);var $element=$(this.element),componentType=TOOLBAR_COMPONENT_APIS[this.type];if(componentType){var api=$element.data(componentType);api?api.updated(this.settings.componentSettings):$element[componentType](this.settings.componentSettings)}"actionbutton"===this.type&&(this.renderMoreActionsMenu(),this.refreshMoreActionsMenu()),this.handleEvents()},renderMoreActionsMenu:function renderMoreActionsMenu(){var menuAPI=this.componentAPI;if(menuAPI&&this.toolbarAPI){var $menu=menuAPI.menu;$menu&&$menu.length||($menu=$('<ul class="popupmenu"></ul>').insertAfter(this.element)),this.teardownPredefinedItems();var data=this.toolbarAPI.toPopupmenuData();!function removeMenuIds(item,isSubmenu){item.menuId&&delete item.menuId;var menuTarget=isSubmenu?"submenu":"menu";Array.isArray(item[menuTarget])&&item[menuTarget].forEach((function(subitem){removeMenuIds(subitem,!0)}))}(data);var menuItems=$(menuAPI.renderItem(data));this.predefinedItems=menuItems,this.linkToolbarItems(data),$menu.prepend(this.predefinedItems),menuAPI.updated({menu:$menu,predefined:menuItems}),this.menuRendered=!0}},refreshMoreActionsMenu:function refreshMoreActionsMenu(){if("actionbutton"===this.type){var menuAPI=this.componentAPI;if(menuAPI&&this.toolbarAPI&&!menuAPI.isOpen){this.hasNoOverflowedItems=!0,menuAPI.settings.beforeOpen||this.predefinedItems&&this.predefinedItems.length||!this.toolbarAPI.items.length||this.renderMoreActionsMenu();var hasNoOverflowedItems=!0;this.toolbarAPI.items.forEach((function(item){if(item.actionButtonLink){var itemData=item.toPopupmenuData();itemData.overflowed=item.overflowed,itemData.id&&delete itemData.id,menuAPI.refreshMenuItem(item.actionButtonLink,itemData,itemRefreshCallback)}})),this.hasNoOverflowedItems=hasNoOverflowedItems}}function itemRefreshCallback(menuItem,data){if(!data.isSubmenuItem){if(!0===data.overflowed)return menuItem.classList.add("is-overflowed"),data.visible&&menuItem.classList.remove("hidden"),void(hasNoOverflowedItems=!1);menuItem.classList.remove("is-overflowed"),menuItem.classList.add("hidden")}}},unlinkToolbarItems:function unlinkToolbarItems(){function doUnlinkSubmenuItem(actionMenuElement){var $originalMenuElement=$($(actionMenuElement).data("original-menu-element"));if($originalMenuElement.removeData("action-button-link"),$(actionMenuElement).removeData("original-menu-element"),$originalMenuElement.hasClass("submenu"))for(var submenuItems=actionMenuElement.querySelector(".popupmenu").children,j=0;j<submenuItems.length;j++)doUnlinkSubmenuItem(submenuItems[j])}"actionbutton"===this.type&&this.menuRendered&&this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.each((function doUnlinkToolbarItems(i,itemElement){var originalButton=$(itemElement).data("originalButton"),originalButtonAPI=$(originalButton).data("toolbarflexitem");if(originalButtonAPI.actionButtonLink=null,$(itemElement).removeData("original-button"),"menubutton"===originalButtonAPI.type)for(var submenuItems=itemElement.querySelector(".popupmenu").children,j=0;j<submenuItems.length;j++)doUnlinkSubmenuItem(submenuItems[j])}))},linkToolbarItems:function linkToolbarItems(popupmenuData){function doLinkSubmenuItem(menuItemData,actionMenuElement){var originalMenuElement=menuItemData.elementLink;$(originalMenuElement).data("action-button-link",actionMenuElement),$(actionMenuElement).data("original-menu-element",originalMenuElement);var submenu=menuItemData.submenu;if(submenu&&submenu.length)for(var submenuItems=actionMenuElement.querySelector(".popupmenu").children,j=0;j<submenuItems.length;j++)doLinkSubmenuItem(submenu[j],submenuItems[j])}"actionbutton"===this.type&&popupmenuData&&(Array.isArray(popupmenuData)||(popupmenuData=popupmenuData.menu),this.predefinedItems.each((function doLinkToolbarItems(i,itemElement){var originalButtonAPI=popupmenuData[i].itemLink;originalButtonAPI.actionButtonLink=itemElement,$(itemElement).data("original-button",originalButtonAPI.element);var submenu=popupmenuData[i].submenu;if(submenu&&submenu.length)for(var submenuItems=itemElement.querySelector(".popupmenu").children,j=0;j<submenuItems.length;j++)doLinkSubmenuItem(submenu[j],submenuItems[j])})))},toPopupmenuData:function toPopupmenuData(){if("searchfield"!==this.type&&"toolbarsearchfield"!==this.type&&"actionbutton"!==this.type){var itemData={itemLink:this,disabled:this.disabled,visible:this.visible},icon=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");if(icon&&icon.getAttribute("href")&&(itemData.icon=icon.getAttribute("href").replace("#icon-","")),icon&&icon.getAttribute("xlink:href")&&(itemData.icon=icon.getAttribute("xlink:href").replace("#icon-","")),"button"!==this.type&&"menubutton"!==this.type||(itemData.text=this.element.textContent.trim()),"menubutton"===this.type){var menuElem=this.componentAPI.menu;if(menuElem.length){var originalSubmenuData=this.componentAPI.toData({noMenuWrap:!0}),targetId=this.componentAPI.element[0].id;targetId&&(itemData.id="".concat(this.toolbarAPI.uniqueId,"-").concat(targetId)),itemData.submenu=function addMenuElementLinks(menu,data){var elems=menu.querySelectorAll("li:not(.heading)");return data.forEach((function(item,i){if(item.elementLink=elems[i],item.submenu){var submenu=elems[i].querySelector(".popupmenu");item.submenu=addMenuElementLinks(submenu,item.submenu)}})),data}(menuElem[0],originalSubmenuData)}else itemData.submenu=[]}return itemData}},toData:function toData(){var itemData={type:this.type,disabled:this.disabled,focused:this.focused,selected:this.selected,overflowed:this.overflowed,visible:this.visible};this.hasReadOnly&&(itemData.readOnly=this.readOnly),this.actionButtonLink&&(itemData.actionButtonLink=this.actionButtonLink),this.componentAPI&&(itemData.componentAPI=this.componentAPI);var icon=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");return icon&&icon.getAttribute("href")&&(itemData.icon=icon.getAttribute("href").replace("#icon-","")),icon&&icon.getAttribute("xlink:href")&&(itemData.icon=icon.getAttribute("xlink:href").replace("#icon-","")),"button"!==this.type&&"menubutton"!==this.type||(itemData.text=this.element.textContent.trim()),"actionbutton"===this.type&&(itemData.predefinedItems=this.predefinedItems),"menubutton"!==this.type&&"actionbutton"!==this.type||(itemData.submenu=this.componentAPI.toData({noMenuWrap:!0})),itemData},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),this.teardown(),this.init()},teardownPredefinedItems:function teardownPredefinedItems(){"actionbutton"===this.type&&(this.unlinkToolbarItems(),this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.remove())},teardown:function teardown(){$(this.element).off("selected.".concat("toolbarflexitem")).off("beforeopen.".concat("toolbarflexitem")).off("focus.".concat("toolbarflexitem")),$("body").off("resize.".concat("toolbarflexitem")),this.teardownPredefinedItems(),delete this.type,delete this.selected,delete this.focusable,delete this.visible,delete this.disabled,delete this.readOnly,delete this.section,delete this.toolbar,delete this.trueSelected,delete this.menuRendered}};var EDITOR_PARENT_ELEMENTS=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code"],EDITOR_DEFAULTS={buttons:{editor:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","source"],source:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","visual"]},excludeButtons:{editor:["backColor"],source:["backColor"]},rows:{editor:null,source:null},delay:200,placeholder:null,pasteAsPlainText:!1,anchor:{url:"http://www.example.com",class:"hyperlink",target:"NewWindow",isClickable:!1,showIsClickable:!1},image:{url:"/images/placeholder-80x80.png"},onLinkClick:null,showHtmlView:!1,preview:!1,paragraphSeparator:"p",useFlexToolbar:!1,useSourceFormatter:!1,formatterTabsize:4,fontpickerSettings:{popupmenuSettings:{showArrow:!1,offset:{y:0}}}};function Editor(element,settings){this.settings=utils.mergeSettings(element,settings,EDITOR_DEFAULTS),this.element=$(element),this.init()}Editor.prototype={get toolbarAPI(){var api;return this.toolbar&&this.toolbar.length&&(api=this.toolbar.data(this.settings.useFlexToolbar?"toolbar-flex":"toolbar")),api},init:function init(){var _this=this;if(this.id="".concat(utils.uniqueId(this.element,"editor"),"-id"),this.container=this.element.parent(".field, .field-short").addClass("editor-container"),this.label=this.element.prevAll(".label").first(),!this.previewRendered&&(this.element.hasClass("is-preview")||this.settings.preview))return this.container[0].classList.add("is-preview"),this.element[0].classList.remove("is-disabled","is-readonly","is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),void this.element[0].removeAttribute("role");var s=this.settings;if(s.anchor=$.extend({},EDITOR_DEFAULTS.anchor,s.anchor),s.image=$.extend({},EDITOR_DEFAULTS.image,s.image),s.anchor.defaultUrl=s.anchor.url,s.anchor.defaultClass=s.anchor.class,s.anchor.defaultTargetText=s.anchor.target,s.anchor.defaultIsClickable=s.anchor.isClickable,s.anchor.targets=s.anchor.targets||{SameWindow:"",NewWindow:"_blank"},$.each(this.settings.anchor.targets,(function(key,val){_this.settings.anchor.defaultTargetText.toLowerCase()===key.toLowerCase()&&(_this.settings.anchor.target=val,_this.settings.anchor.defaultTarget=val)})),(this.settings.firstHeader||this.settings.secondHeader)&&(Array.isArray(this.settings.fontpickerSettings.styles)||(this.settings.fontpickerSettings.styles=[]),this.settings.fontpickerSettings.styles.length||this.settings.fontpickerSettings.styles.push(new FontPickerStyle("legacyDefault","Default")),this.settings.firstHeader&&(warnAboutDeprecation("`fontpickerSettings.styles` setting","`firstHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new FontPickerStyle("legacyHeader1","Header 1",this.settings.firstHeader)),delete this.settings.firstHeader),this.settings.secondHeader&&(warnAboutDeprecation("`fontpickerSettings.styles` setting","`secondHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new FontPickerStyle("legacyHeader2","Header 2",this.settings.secondHeader)),delete this.settings.secondHeader)),s.buttons&&s.buttons.editor){for(var foundOldSettings=!1,styles=[new FontPickerStyle("default","Default","p")],headers=s.buttons.editor.filter((function(el){return"header"===el.substr(0,6)})),i=0;i<headers.length;i++){var hLevel=headers[i].substr(6,1);foundOldSettings=!0,styles.push(new FontPickerStyle("header".concat(hLevel),"Header ".concat(hLevel),"h".concat(hLevel)))}foundOldSettings&&(s.buttons.editor=s.buttons.editor.filter((function(el){return"header"!==el.substr(0,6)})),s.fontpickerSettings={styles:styles}),"seperator"===s.buttons.editor[0]&&s.buttons.editor.splice(0,1),foundOldSettings&&(s.buttons.editor=["fontPicker"].concat(s.buttons.editor))}return s.anchor.defaultTarget||(s.anchor.target&&$.trim(s.anchor.target).length?s.anchor.defaultTarget=s.anchor.target:(s.anchor.defaultTargetText=Locale.translate("SameWindow"),s.anchor.defaultTarget=s.anchor.targets[s.anchor.defaultTargetText])),this.setup(),"string"==typeof s.paragraphSeparator&&/^(p|br|div)$/.test(s.paragraphSeparator)&&document.execCommand("defaultParagraphSeparator",!1,s.paragraphSeparator),this.element.hasClass("is-readonly")&&this.readonly(),this.settings.showHtmlView&&this.toggleSource(),this.setRowsHeight(),this},setup:function setup(){this.isActive=!0,this.modals={},this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions().setupKeyboardEvents().onPasteTriggered()},initElements:function initElements(){return this.element.attr({contentEditable:!0,"aria-multiline":!0,role:"textbox"}),this.element.attr("data-editor",!0),this.initTextarea(),this.bindParagraphCreation().bindTab(),this.createToolbar().bindButtons().bindModals().bindAnchorPreview(),this},sourceViewActive:function sourceViewActive(){return this.element.hasClass("source-view-active")},setPlaceholders:function setPlaceholders(){return this.settings.placeholder?(this.element.attr("placeholder",this.settings.placeholder),this):this},getCurrentElement:function getCurrentElement(){return this.sourceViewActive()?this.textarea:this.element},bindParagraphCreation:function bindParagraphCreation(){var _this2=this;return this.getCurrentElement().on("keyup.editor",(function(e){var tagName,node=_this2.getSelectionStart();node&&node.getAttribute("data-editor")&&0===node.children.length&&document.execCommand("formatBlock",!1,"p"),13===e.which&&("li"===(tagName=(node=_this2.getSelectionStart()).tagName.toLowerCase())||_this2.isListItemChild(node)||(e.shiftKey||document.execCommand("formatBlock",!1,"p"),"a"===tagName&&document.execCommand("unlink",!1,null)))})),this},bindTab:function bindTab(){var _this3=this;return this.getCurrentElement().on("keydown.editor",(function(e){if(9===e.which){var tag=_this3.getSelectionStart().tagName.toLowerCase();"pre"===tag&&(e.preventDefault(),document.execCommand("insertHtml",null,"    ")),"li"===tag&&(e.preventDefault(),document.execCommand(e.shiftKey?"outdent":"indent",e))}if(8===e.which){var text=_this3.element.text().toString().trim().replace(/\s/g,"");window.getSelection().toString().trim().replace(/\s/g,"")===text&&_this3.element.html("")}})),this},setExcludedButtons:function setExcludedButtons(){var _this4=this,excludeButtons=function excludeButtons(elements,toExclude){var separatorIndex=-1,numOfExcluded=0;return elements.filter((function(x,i){var r=!0;return toExclude.indexOf(x)>-1&&"separator"!==x?(numOfExcluded++,r=!1):"separator"===x&&i-numOfExcluded-1===separatorIndex&&(numOfExcluded=0,r=!1),"separator"===x&&(separatorIndex=i),r}))};return function setButtons(){var s=_this4.settings,btns=s.buttons,exBtns=s.excludeButtons;return _this4.sourceViewActive()?exBtns&&exBtns.source&&exBtns.source.length?excludeButtons(btns.source,exBtns.source):btns.source:exBtns&&exBtns.editor&&exBtns.editor.length?excludeButtons(btns.editor,exBtns.editor):btns.editor}()},createToolbar:function createToolbar(){if(this.toolbar)return this;var toolbarCssClasses=[this.settings.useFlexToolbar?"flex-toolbar":"toolbar","editor-toolbar","formatter-toolbar"].join(" "),sectionCss="",moreButtonHTML="";this.settings.useFlexToolbar&&(sectionCss="toolbar-section ",moreButtonHTML='<div class="toolbar-section more">\n        <button class="btn-actions btn-editor">\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-more"></use>\n          </svg>\n        </button>\n      </div>');for(var btns=this.setExcludedButtons(),buttonsHTML="",i=0,l=btns.length;i<l;i+=1){var btn=this.buttonTemplate(btns[i]);btn&&this.element.hasClass("source-view-active")&&"visual"!==btns[i]&&(btn=btn.replace('type="button"','type="button" disabled')),btn&&(buttonsHTML+=btn)}var toolbar='<div class="'.concat(toolbarCssClasses,'" id="editor-toolbar-').concat(this.id,'">\n      <div class="').concat(sectionCss,'buttonset">\n        ').concat(buttonsHTML,"\n      </div>\n      ").concat(moreButtonHTML,"\n    </div>");this.element.parent().find(".icon-dirty").length?this.toolbar=$(toolbar).insertBefore(this.element.parent().find(".icon-dirty")):this.toolbar=$(toolbar).insertBefore(this.sourceViewActive()?this.element.prev():this.element);var fpElement=this.toolbar.find('[data-action="fontStyle"]').first();fpElement&&fpElement.length&&(fpElement.fontpicker(this.settings.fontpickerSettings),this.fontPickerElem=fpElement);var cpElements=this.toolbar.find('[data-action="foreColor"], [data-action="backColor"]');return cpElements.colorpicker({placeIn:"editor",popupmenuSettings:{offset:{y:0},showArrow:!1}}),$(".trigger",cpElements).off("click.colorpicker"),this.toolbar[this.settings.useFlexToolbar?"toolbarflex":"toolbar"]({moreMenuSettings:{offset:{y:0},showArrow:!1}}),this.toolbar.find("button[title]").tooltip(),this},switchToolbars:function switchToolbars(){this.destroyToolbar(),this.setupTextareaEvents(),this.createToolbar(),this.bindButtons().bindModals().bindAnchorPreview(),this.bindSelect().bindPaste().setupKeyboardEvents(),this.toolbar.find("button").button()},initTextarea:function initTextarea(){var _this5=this;return this.textarea&&!this.settings.showHtmlView?this:(this.textarea=this.createTextarea(),this.textarea.text(xssUtils.sanitizeHTML(this.element.html().toString())),this.container.on("input.editor keyup.editor",".editor",debounce((function(e){_this5.textarea.text(xssUtils.sanitizeHTML(_this5.element.html().toString())),_this5.resetEmptyEditor(e),_this5.element.trigger("change")}),300)),$("html").on("themechanged.".concat("editor"),(function(){_this5.setRowsHeight(),_this5.sourceView.hasClass("hidden")||_this5.adjustSourceLineNumbers()})),this.setupTextareaEvents(),this.textarea)},setRowsHeight:function setRowsHeight(){var _this$settings,_this$settings$rows,_this$settings3,_this$settings3$rows,_this$settings2,_this$settings2$rows,_this$settings4,_this$settings4$rows,isUplift=theme.currentTheme.id&&theme.currentTheme.id.indexOf("uplift")>-1;(null===(_this$settings=this.settings)||void 0===_this$settings||null===(_this$settings$rows=null==_this$settings?void 0:_this$settings.rows)||void 0===_this$settings$rows||null==_this$settings$rows?void 0:_this$settings$rows.editor)&&this.element.height((null===(_this$settings2=this.settings)||void 0===_this$settings2||null===(_this$settings2$rows=null==_this$settings2?void 0:_this$settings2.rows)||void 0===_this$settings2$rows||null==_this$settings2$rows?void 0:_this$settings2$rows.editor)*(isUplift?26:22.2));(null===(_this$settings3=this.settings)||void 0===_this$settings3||null===(_this$settings3$rows=null==_this$settings3?void 0:_this$settings3.rows)||void 0===_this$settings3$rows||null==_this$settings3$rows?void 0:_this$settings3$rows.source)&&this.element.parent().find(".editor-source").height(26*(null===(_this$settings4=this.settings)||void 0===_this$settings4||null===(_this$settings4$rows=null==_this$settings4?void 0:_this$settings4.rows)||void 0===_this$settings4$rows||null==_this$settings4$rows?void 0:_this$settings4$rows.source)+15)},resetEmptyEditor:function resetEmptyEditor(){this.savedSelection=this.saveSelection();var sep="p"===this.settings.paragraphSeparator?"p":"div",html=this.element.html().toString().trim();"<br>"!==(html=this.element.html().toString().trim())&&html!=="<".concat(sep,"><br></").concat(sep,">")||this.element.html(""),this.element.contents().filter((function(){return 3===this.nodeType&&""!==this.textContent.trim()})).wrap("<".concat(sep,"></").concat(sep,">")),html=this.element.html().toString().trim(),this.textarea.html(xssUtils.sanitizeHTML(html)),this.restoreSelection(this.savedSelection)},removeWhiteSpace:function removeWhiteSpace(){var html=this.element.html().toString().trim();(function count(str){return((str||"").match(/>\s+</g)||[]).length})(html)>0&&this.element.html(html.replace(/>\s+</g,"><"))},createTextarea:function createTextarea(){this.sourceView=$("<div></div>").attr({class:"editor-source editable hidden",id:"editor-source-".concat(this.id)}).insertBefore(this.element),$("<ul></ul>").addClass("line-numbers").appendTo(this.sourceView);var textareaContainer=$('<div class="text-container"></div>').appendTo(this.sourceView),newTextareaID="source-textarea-".concat($('[id^="source-textarea-"]').length+1),labelContents="".concat(this.element.prev(".label").addClass("audible").text()," - HTML Source View");return $('<label class="audible" for="'.concat(newTextareaID,'">').concat(labelContents,"</label>")).appendTo(textareaContainer),$('<textarea id="'.concat(newTextareaID,'" class="editable"></textarea>')).appendTo(textareaContainer)},triggerClick:function triggerClick(e,btn){$('button[data-action="'.concat(btn,'"]'),this.toolbar).trigger("click.editor")},setupKeyboardEvents:function setupKeyboardEvents(){var _this6=this,currentElement=this.getCurrentElement(),keys={b:66,e:69,h:72,i:73,l:76,bl:55,n:56,q:81,r:82,u:85,h3:51,h4:52,space:32,sv:192};return currentElement.on("keydown.editor",(function(e){switch((e=e||window.event).which?keys.charCode=e.which:e.keyCode?keys.charCode=e.keyCode:keys.charCode=!1,e.ctrlKey&&keys.charCode){case keys.h3:_this6.triggerClick(e,"append-".concat(_this6.settings.firstHeader));break;case keys.h4:_this6.triggerClick(e,"append-".concat(_this6.settings.secondHeader));break;case keys.b:_this6.triggerClick(e,"bold"),e.preventDefault();break;case keys.e:_this6.triggerClick(e,"justifyCenter");break;case keys.h:_this6.triggerClick(e,"anchor"),e.preventDefault();break;case keys.i:_this6.triggerClick(e,e.shiftKey?"image":"italic"),e.shiftKey||e.preventDefault();break;case keys.bl:e.shiftKey&&_this6.triggerClick(e,"insertunorderedlist"),e.preventDefault();break;case keys.l:e.shiftKey||_this6.triggerClick(e,"justifyLeft"),e.preventDefault();break;case keys.n:e.shiftKey&&_this6.triggerClick(e,"insertorderedlist");break;case keys.q:_this6.triggerClick(e,"append-blockquote");break;case keys.r:_this6.triggerClick(e,"justifyRight");break;case keys.u:_this6.triggerClick(e,"underline"),e.preventDefault();break;case keys.space:_this6.triggerClick(e,"clearFormatting");break;case keys.sv:_this6.triggerClick(e,currentElement===_this6.element?"source":"visual")}})),this.element.on("mousedown.editor","a",(function(e){var href=$(this).attr("href");"firefox"!==Environment.browser.name&&"Mac OS X"===Environment.os.name&&(e.metaKey||e.ctrlKey)&&(window.open(href,"_blank"),e.preventDefault())})),this.element.on("updated.editor",(function(){_this6.updated()})),this},setupTextareaEvents:function setupTextareaEvents(){var _this7=this;return this.textarea.off(".editor").on("input.editor keyup.editor",(function(){_this7.sourceView.hasClass("hidden")||_this7.adjustSourceLineNumbers()})).on("focus.editor",(function(){_this7.sourceView.addClass("is-focused")})).on("blur.editor",(function(e){_this7.sourceView.removeClass("is-focused"),_this7.element.empty().html(xssUtils.sanitizeHTML(_this7.textarea.val())),_this7.element.data("validate")&&_this7.element.data("validate").validate(_this7.element,!0,e)})),this},adjustSourceLineNumbers:function adjustSourceLineNumbers(){var container=this.textarea.parent(),lineHeight=parseInt(getComputedStyle(this.textarea[0]).lineHeight,10),YPadding=this.textarea.innerHeight()-this.textarea.height();this.textarea[0].style.height="";var scrollHeight=this.textarea[0].scrollHeight,lineNumberCount=Math.floor((scrollHeight-YPadding)/lineHeight),numberList=this.sourceView.find(".line-numbers"),lastIdx=numberList.find("li").length,list="",i=0;if(!this.lineNumbers||lineNumberCount!==this.lineNumbers){if(this.lineNumbers)if(this.lineNumbers<lineNumberCount){for(;i<lineNumberCount-this.lineNumbers;)list+='<li role="presentation"><span>'.concat(lastIdx+i+1,"</span></li>"),i++;numberList.append(list)}else this.lineNumbers>lineNumberCount&&(i=this.lineNumbers-lineNumberCount,numberList.find("li").slice(-i).remove());else{for(this.lineNumbers=lineNumberCount;i<this.lineNumbers;)list+='<li role="presentation"><span>'.concat(i+1,"</span></li>"),i++;numberList.append(list)}this.lineNumbers=lineNumberCount}container[0].style.width="calc(100% - ".concat(numberList.outerWidth()+2,"px)"),scrollHeight===this.textarea[0].scrollHeight?this.textarea[0].style.height="".concat(numberList[0].scrollHeight-13,"px"):this.adjustSourceLineNumbers()},wrapTextInTags:function wrapTextInTags(insertedText,selectedText,action){var tags,finalText;switch(action){case"bold":tags=["<b>","</b>"];break;case"italic":tags=["<i>","</i>"];break;case"underline":tags=["<u>","</u>"];break;case"strikethrough":tags=["<strike>","</strike>"];break;case"append-blockquote":tags=["<blockquote>","</blockquote>"];break;default:tags=["",""]}if("anchor"===action){var alink=$('<a href="'.concat(insertedText,'">').concat(selectedText,"</a>"));this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&alink.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&alink.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?alink.attr("contenteditable",!1):alink.removeAttr("contenteditable"),finalText=alink[0].outerHTML}else finalText=tags[0]+insertedText+selectedText+tags[1];return finalText},insertTextAreaContent:function insertTextAreaContent(text,action){var sel,startPos,endPos,scrollTop,el=this.textarea[0],val=el.value;text=text||"",document.selection&&"TEXTAREA"===el.tagName?($(el).focus(),(sel=document.selection.createRange()).text=this.wrapTextInTags(text,sel.text,action),$(el).focus()):el.selectionStart||"0"===el.selectionStart?(startPos=el.selectionStart,endPos=el.selectionEnd,scrollTop=el.scrollTop,sel=this.wrapTextInTags(text,val.substring(startPos,endPos),action),el.value=val.substring(0,startPos)+sel+val.substring(endPos,val.length),$(el).focus(),el.selectionStart=startPos+sel.length,el.selectionEnd=startPos+sel.length,el.scrollTop=scrollTop):(el.value+=this.wrapTextInTags(text,el.value,action),$(el).focus(),el.value=el.value)},buttonTemplate:function buttonTemplate(btnType){var buttonLabels=this.getButtonLabels(this.settings.buttonLabels);return{bold:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("ToggleBold"),'" data-action="bold" data-element="b">').concat(buttonLabels.bold,"</button>"),italic:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("ToggleItalic"),'" data-action="italic" data-element="i">').concat(buttonLabels.italic,"</button>"),underline:'<button type="button" class="btn btn-editor underline" title="'.concat(Locale.translate("ToggleUnderline"),'" data-action="underline" data-element="u">').concat(buttonLabels.underline,"</button>"),strikethrough:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("StrikeThrough"),'" data-action="strikethrough" data-element="strike">').concat(buttonLabels.strikethrough,"</button>"),foreColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(Locale.translate("TextColor"),'" data-action="foreColor" data-element="foreColor">').concat(buttonLabels.foreColor,"</button>"),backColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(Locale.translate("BackgroundColor"),'" data-action="backColor" data-element="backColor">').concat(buttonLabels.backColor,"</button>"),superscript:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("Superscript"),'" data-action="superscript" data-element="sup">').concat(buttonLabels.superscript,"</button>"),subscript:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("Subscript"),'" data-action="subscript" data-element="sub">').concat(buttonLabels.subscript,"</button>"),separator:'<div class="separator"></div>',anchor:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("InsertAnchor"),'" data-action="anchor" data-modal="modal-url-').concat(this.id,'" data-element="a">').concat(buttonLabels.anchor,"</button>"),image:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("InsertImage"),'" data-action="image" data-modal="modal-image-').concat(this.id,'" data-element="img">').concat(buttonLabels.image,"</button>"),header1:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("ToggleH3"),'" data-action="append-').concat(this.settings.firstHeader,'" data-element="').concat(this.settings.firstHeader,'">').concat(buttonLabels.header1,"</button>"),header2:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("ToggleH4"),'" data-action="append-').concat(this.settings.secondHeader,'" data-element="').concat(this.settings.secondHeader,'">').concat(buttonLabels.header2,"</button>"),quote:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("Blockquote"),'" data-action="append-blockquote" data-element="blockquote">').concat(buttonLabels.quote,"</button>"),orderedlist:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("OrderedList"),'" data-action="insertorderedlist" data-element="ol">').concat(buttonLabels.orderedlist,"</button>"),unorderedlist:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("UnorderedList"),'" data-action="insertunorderedlist" data-element="ul">').concat(buttonLabels.unorderedlist,"</button>"),fontPicker:'<button type="button" class="btn btn-editor fontpicker" data-action="fontStyle"><span>'.concat("FontPicker","</span></button>"),justifyLeft:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("JustifyLeft"),'" data-action="justifyLeft" >').concat(buttonLabels.justifyLeft,"</button>"),justifyCenter:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("JustifyCenter"),'" data-action="justifyCenter">').concat(buttonLabels.justifyCenter,"</button>"),justifyRight:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("JustifyRight"),'" data-action="justifyRight" >').concat(buttonLabels.justifyRight,"</button>"),clearFormatting:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("ClearFormatting"),'" data-action="clearFormatting" >').concat(buttonLabels.clearFormatting,"</button>"),source:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("ViewSource"),'" data-action="source" >').concat(buttonLabels.source,"</button>"),visual:'<button type="button" class="btn btn-editor" title="'.concat(Locale.translate("ViewVisual"),'" data-action="visual" >').concat(buttonLabels.visual,"</button>")}[btnType]||!1},getIcon:function getIcon(textName,iconName,className){return'<span class="audible">'.concat(Locale.translate(textName),"</span>").concat($.createIcon({classes:className||"",icon:iconName}))},getButtonLabels:function getButtonLabels(buttonLabelType){var customButtonLabels,buttonLabels={bold:this.getIcon("Bold","bold"),italic:this.getIcon("Italic","italic"),underline:this.getIcon("Underline","underline"),superscript:'<span aria-hidden="true"><b>x<sup>1</sup></b></span>',subscript:'<span aria-hidden="true"><b>x<sub>1</sub></b></span>',strikethrough:this.getIcon("StrikeThrough","strike-through"),foreColor:this.getIcon("TextColor","fore-color"),backColor:this.getIcon("BackgroundColor","back-color"),anchor:this.getIcon("InsertAnchor","link"),image:this.getIcon("InsertImage","insert-image"),header1:this.getIcon("ToggleH3","h3"),header2:this.getIcon("ToggleH4","h4"),quote:this.getIcon("Blockquote","quote"),orderedlist:this.getIcon("OrderedList","number-list"),unorderedlist:this.getIcon("UnorderedList","bullet-list"),pre:'<span aria-hidden="true"><b>0101</b></span>',indent:'<span aria-hidden="true"><b>&rarr;</b></span>',outdent:'<span aria-hidden="true"><b>&larr;</b></span>',justifyLeft:this.getIcon("JustifyLeft","left-text-align"),justifyCenter:this.getIcon("JustifyCenter","center-text"),justifyRight:this.getIcon("JustifyRight","right-text-align"),clearFormatting:this.getIcon("ClearFormatting","clear-formatting"),source:this.getIcon("ViewSource","html","html-icon"),visual:this.getIcon("ViewSource","visual","visual-icon")};if("object"===_typeof(buttonLabelType)&&(customButtonLabels=buttonLabelType),"object"===_typeof(customButtonLabels))for(var attrname in customButtonLabels)customButtonLabels.hasOwnProperty(attrname)&&(buttonLabels[attrname]=customButtonLabels[attrname]);return buttonLabels},activateButton:function activateButton(tag){this.toolbar.find('[data-element="'.concat(tag,'"]')).addClass("is-active")},bindButtons:function bindButtons(){var _this8=this,self=this;function editorButtonActionHandler(e,item){var btn=$(item instanceof ToolbarFlexItem?item.element:e.target);if(!btn.is(".btn-actions")){var action=btn.attr("data-action"),currentElem=self.getCurrentElement();return e.preventDefault(),currentElem.focus(),void 0===self.selection&&self.checkSelection(),self.sourceViewActive()||btn.toggleClass("is-active"),action&&self.execAction(action,e),("ie"===Environment.browser.name||Environment.browser.isEdge())&&currentElem.trigger("change"),!btn[0].classList.contains("longpress-target")&&void 0}}return this.settings.useFlexToolbar?(this.toolbar.on("selected.editor",editorButtonActionHandler),this.toolbar.on("click.editor",".colorpicker-editor-button",editorButtonActionHandler)):this.toolbar.on("click.editor","button",editorButtonActionHandler),this.fontPickerElem&&this.fontPickerElem.on("font-selected",(function(e,fontPickerStyle){_this8.execFormatBlock(fontPickerStyle.tagName)})),this},bindModals:function bindModals(){var self=this;return this.modals={url:this.createURLModal(),image:this.createImageModal()},$('[name="em-target-'.concat(this.id,'"]')).dropdown(),$("#modal-url-".concat(this.id,", #modal-image-").concat(this.id)).modal({noRefocus:!0}).on("beforeopen",(function(){self.savedSelection=self.saveSelection(),$(this).attr("id")!=="modal-url-".concat(self.id)||self.selectionRange})).off("open").on("open",(function(){var isTouch=Environment.features.touch,id=$(this).attr("id"),input=$("input:first",this),button=$(".modal-buttonset .btn-modal-primary",this);$('[name="em-url-'.concat(self.id,'"]')).val(self.settings.anchor.url),$('[name="em-class-'.concat(self.id,'"]')).val(self.settings.anchor.class),$('[name="em-target-'.concat(self.id,'"]')).val(self.settings.anchor.target).trigger("updated"),$('[name="em-isclickable-'.concat(this.id,'"]')).prop("checked",self.settings.anchor.isClickable),setTimeout((function(){isTouch&&id==="modal-image-".concat(self.id)?button.focus():input.focus().select()}),10)})).off("close").on("close",(function(e,isCancelled){if(self.restoreSelection(self.savedSelection),!isCancelled)if($(this).attr("id")==="modal-url-".concat(self.id)){var currentLink=$(self.findElementInSelection("a",self.element[0]));currentLink.length?self.updateCurrentLink(currentLink):self.createLink($('[name="em-url-'.concat(self.id,'"]'),this))}else self.insertImage($("#image-".concat(self.id)).val())})),this},createURLModal:function createURLModal(){var _this9=this,s=this.settings,urlModal=$("#modal-url-".concat(this.id));if(urlModal.length>0)return urlModal;var targetOptions="",isTargetCustom=!0;return $.each(s.anchor.targets,(function(key,val){targetOptions+='<option value="'.concat(val,'">').concat(Locale.translate(key),"</option>"),_this9.settings.anchor.defaultTargetText.toLowerCase()===key.toLowerCase()&&(isTargetCustom=!1)})),isTargetCustom&&(targetOptions+='<option value="'.concat(s.anchor.target,'">').concat(s.anchor.target,"</option>")),$('<div class="modal editor-modal-url" id="modal-url-'.concat(this.id,'"></div>')).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(Locale.translate("InsertAnchor"),'</h1>\n        </div>\n        <div class="modal-body">\n          <div class="field">\n            <label for="em-url-').concat(this.id,'" class="required">').concat(Locale.translate("Url"),'</label>\n            <input id="em-url-').concat(this.id,'" name="em-url-').concat(this.id,'" data-validate="required" type="text" value="').concat(s.anchor.url,'">\n          </div>\n          ').concat(s.anchor.showIsClickable?'<div class="field">\n            <input type="checkbox" class="checkbox" id="em-isclickable-'.concat(this.id,'" name="em-isclickable-').concat(this.id,'" checked="').concat(s.anchor.isClickable,'">\n            <label for="em-isclickable-').concat(this.id,'" class="checkbox-label"> ').concat(Locale.translate("Clickable"),"</label>\n          </div>"):"",'\n          <div class="field">\n            <label for="em-class-').concat(this.id,'">').concat(Locale.translate("CssClass"),'</label>\n            <input id="em-class-').concat(this.id,'" name="em-class-').concat(this.id,'" type="text" value="').concat(s.anchor.class,'">\n          </div>\n          <div class="field">\n            <label for="em-target-').concat(this.id,'" class="label"> ').concat(Locale.translate("Target"),'</label>\n            <select id="em-target-').concat(this.id,'" name="em-target-').concat(this.id,'" class="dropdown">\n              ').concat(targetOptions,'\n            </select>\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel"> ').concat(Locale.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary"> ').concat(Locale.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>")).appendTo("body")},createImageModal:function createImageModal(){var imageModal=$("#modal-image-".concat(this.id));return imageModal.length>0?imageModal:$('<div class="modal editor-modal-image" id="modal-image-'.concat(this.id,"\"></div>'")).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(Locale.translate("InsertImage"),'</h1>\n        </div>\n        <div class="modal-body no-scroll">\n          <div class="field">\n            <label for="image-').concat(this.id,'" class="required">').concat(Locale.translate("Url"),'</label>\n            <input id="image-').concat(this.id,'" name="image-').concat(this.id,'" type="text" data-validate="required" value="').concat(this.settings.image.url,'">\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel">\n              ').concat(Locale.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary">\n              ').concat(Locale.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>")).appendTo("body")},bindAnchorPreview:function bindAnchorPreview(){this.element.find("a").tooltip({content:function content(){return $(this).attr("href")}})},updateCurrentLink:function updateCurrentLink(alink){var emUrl=xssUtils.stripTags($('[name="em-url-'.concat(this.id,'"]')).val()),emClass=xssUtils.stripTags($('[name="em-class-'.concat(this.id,'"]')).val()),emTarget=xssUtils.stripTags($('[name="em-target-'.concat(this.id,'"]')).val()),emIsClickable=this.settings.anchor.showIsClickable?$('[name="em-isclickable-'.concat(this.id,'"]')).is(":checked"):this.settings.anchor.isClickable;alink&&(alink[0].setAttribute("href",this.fixLinkFormat(emUrl&&$.trim(emUrl).length?emUrl:this.settings.anchor.defaultUrl)),alink[0].setAttribute("class",emClass&&$.trim(emClass).length?emClass:this.settings.anchor.defaultClass),alink[0].setAttribute("data-url",(emUrl&&$.trim(emUrl).length?emUrl:this.settings.anchor.defaultUrl).replace("http://",""))),emIsClickable?alink.attr("contenteditable",!1):alink.removeAttr("contenteditable"),emTarget&&$.trim(emTarget).length?alink.attr("target",emTarget):alink.removeAttr("target")},createLink:function createLink(input){var _this10=this;this.restoreSelection(this.savedSelection);var cleanValue=xssUtils.stripTags(this.fixLinkFormat(input[0].value));input.val(cleanValue),this.settings.anchor.url=input.val(),this.settings.anchor.class=$('[name="em-class-'.concat(this.id,'"]')).val(),this.settings.anchor.target=$('[name="em-target-'.concat(this.id,'"]')).val(),this.settings.anchor.isClickable=this.settings.anchor.showIsClickable?$('[name="em-isclickable-'.concat(this.id,'"]')).is(":checked"):this.settings.anchor.isClickable;var alink=$('<a data-url="'.concat(cleanValue,'" href="').concat(cleanValue,'">').concat(cleanValue,"</a>"));if(this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&alink.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&alink.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?alink.attr("contenteditable",!1):alink.removeAttr("contenteditable"),this.sourceViewActive())this.insertTextAreaContent(input.val(),"anchor");else{var sel,range,rangeChildren,rangeStr,rangeImg;if(!this.selection.isCollapsed||Environment.browser.isIE11()){if(window.getSelection&&(sel=window.getSelection()).getRangeAt&&sel.rangeCount){range=sel.getRangeAt(0),""!==(rangeStr="".concat(range)).trim()&&alink.html(rangeStr);for(var len=(rangeChildren=range.commonAncestorContainer.children)?rangeChildren.length:0,i=0;i<len;i++){var rangeChild=rangeChildren[i];rangeChild instanceof HTMLImageElement&&(rangeImg=rangeChild)}rangeImg&&alink.html(rangeImg.outerHTML),range.deleteContents();var el=document.createElement("div");el.innerHTML=alink[0].outerHTML;for(var node,lastNode,frag=document.createDocumentFragment();node=el.firstChild;)lastNode=frag.appendChild(node);range.insertNode(frag),lastNode&&((range=range.cloneRange()).setStartAfter(lastNode),range.collapse(!0),sel.removeAllRanges(),sel.addRange(range))}}else document.execCommand("insertHtml",null,alink[0].outerHTML),setTimeout((function(){_this10.getCurrentElement().focus()}),1);this.bindAnchorPreview()}},fixLinkFormat:function fixLinkFormat(value){return value.match(/^https?:\/\//)?value:"http://".concat(value)},bindSelect:function bindSelect(){var _this11=this,selectionTimer="";return this.selectionHandler=function(){clearTimeout(selectionTimer),selectionTimer=setTimeout((function(){_this11.checkSelection()}),_this11.settings.delay)},this.getCurrentElement().off("mouseup.editor keyup.editor").on("mouseup.editor keyup.editor",this.selectionHandler),this},checkSelection:function checkSelection(){var newSelection;if(void 0===this.selection&&this.sourceViewActive())return newSelection=this.textarea.val().substring(this.textarea[0].selectionStart,this.textarea[0].selectionEnd).toString().trim(),void this.hideToolbarActions();newSelection=window.getSelection();var selectionElement=this.getSelectionElement();return selectionElement?this.checkSelectionElement(newSelection,selectionElement):this.hideToolbarActions(),this},getSelectionElement:function getSelectionElement(){var current,parent,result,selection=window.getSelection(),getElement=function getElement(e){var localParent=e;try{for(;!localParent.getAttribute("data-editor");)localParent=localParent.parentNode}catch(errb){return!1}return localParent};try{parent=(current=selection.getRangeAt(0).commonAncestorContainer).parentNode,result=current.getAttribute("data-editor")?current:getElement(parent)}catch(err){result=getElement(parent)}return result},checkSelectionElement:function checkSelectionElement(newSelection,selectionElement){var currentElement=this.sourceViewActive()?this.sourceView[0]:this.element[0];this.selection=newSelection,this.selectionRange=this.selection.getRangeAt(0),currentElement!==selectionElement?this.hideToolbarActions():this.setToolbarButtonStates()},setToolbarButtonStates:function setToolbarButtonStates(){return this.toolbar.find("button").removeClass("is-active"),this.checkActiveButtons(),this},checkActiveButtons:function checkActiveButtons(){this.checkButtonState("bold"),this.checkButtonState("italic"),this.checkButtonState("underline"),this.checkButtonState("strikethrough"),this.checkColorButtonState("foreColor"),this.toolbar.find('.buttonset [data-action="backColor"]').length&&this.checkColorButtonState("backColor"),this.fontPickerElem&&this.checkButtonState("fontStyle");for(var parentNode=this.getSelectedParentElement();void 0!==parentNode.tagName&&-1===EDITOR_PARENT_ELEMENTS.indexOf(parentNode.tagName.toLowerCase)&&(this.activateButton(parentNode.tagName.toLowerCase()),!this.element.is(parentNode));)parentNode=parentNode.parentNode},checkButtonState:function checkButtonState(command){if(document.queryCommandState)if(this.fontPickerElem&&"fontStyle"===command){for(var targetElemTag,fontStyle,fontpickerAPI=this.fontPickerElem.data("fontpicker"),fontpickerSupportedTags=fontpickerAPI.supportedTagNames,selectedElem=this.getSelectionParentElement(),searchElems=$(selectedElem).add($(selectedElem).parentsUntil(this.element)),i=0;i<searchElems.length&&void 0===fontStyle;i++)if(targetElemTag=searchElems[i].tagName.toLowerCase(),fontpickerSupportedTags.indexOf(targetElemTag)>-1){fontStyle=fontpickerAPI.getStyleByTagName(targetElemTag),fontpickerAPI.select(fontStyle,!0);break}}else document.queryCommandState(command)?this.toolbar.find('[data-action="'.concat(command,'"]')).addClass("is-active"):this.toolbar.find('[data-action="'.concat(command,'"]')).removeClass("is-active")},rangeSelectsSingleNode:function rangeSelectsSingleNode(range){var startNode=range.startContainer;return startNode===range.endContainer&&startNode.hasChildNodes()&&range.endOffset===range.startOffset+1},getSelectedParentElement:function getSelectedParentElement(){var range=this.selectionRange;return this.rangeSelectsSingleNode(range)?range.startContainer.childNodes[range.startOffset]:3===range.startContainer.nodeType?range.startContainer.parentNode:range.startContainer},hideToolbarActions:function hideToolbarActions(){void 0!==this.toolbar&&this.toolbar.removeClass("is-active")},bindPaste:function bindPaste(){var self=this,currentElement=self.getCurrentElement();return this.pasteWrapper=function(e){var paste,p,paragraphs;paste=e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData?e.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var html="";if(self.sourceViewActive())return this;if(paste&&!e.defaultPrevented){for(e.preventDefault(),paragraphs=paste.split(/[\r\n]/g),p=0;p<paragraphs.length;p+=1)""!==paragraphs[p]&&(navigator.userAgent.match(/firefox/i)&&0===p?html+="<p>".concat(self.htmlEntities(paragraphs[p]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(paragraphs[p])?html+='<img src="'.concat(self.htmlEntities(paragraphs[p]),'" />'):html+="<p>".concat(self.htmlEntities(paragraphs[p]),"</p>"));if(document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,html),!1;self.pasteHtmlAtCaret(html)}},this.pasteWrapperHtml=function(e){if(self.sourceViewActive())return this;var types,clipboardData,pastedData,p,paragraphs;if((e.clipboardData||e.originalEvent)&&(e.clipboardData&&e.clipboardData.types?clipboardData=e.clipboardData:e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(clipboardData=e.originalEvent.clipboardData)),clipboardData&&clipboardData.types)((types=clipboardData.types)instanceof DOMStringList&&types.contains("text/html")||types.indexOf&&-1!==types.indexOf("text/html")||Environment.browser.isEdge())&&(pastedData=e.originalEvent.clipboardData.getData("text/html")),types instanceof DOMStringList&&types.contains("text/plain")&&(pastedData=e.originalEvent.clipboardData.getData("text/plain")),"object"===_typeof(types)&&types[0]&&"text/plain"===types[0]&&!types[1]&&(pastedData=e.originalEvent.clipboardData.getData("text/plain"));else for(paragraphs=(window.clipboardData?window.clipboardData.getData("Text"):"").split(/[\r\n]/g),pastedData="",p=0;p<paragraphs.length;p+=1)""!==paragraphs[p]&&(navigator.userAgent.match(/firefox/i)&&0===p?pastedData+="<p>".concat(self.htmlEntities(paragraphs[p]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(paragraphs[p])?pastedData+='<img src="'.concat(self.htmlEntities(paragraphs[p]),'" />'):pastedData+="<p>".concat(self.htmlEntities(paragraphs[p]),"</p>"));return self.pastedData=Environment.browser.isIE11()?pastedData:self.getCleanedHtml(pastedData),$.when(self.element.triggerHandler("beforepaste",[{pastedData:self.pastedData}])).done((function(){if(self.pastedData&&!e.defaultPrevented){if(Environment.browser.isIE11()||Environment.browser.isEdge()||e.preventDefault(),document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,self.pastedData),!1;self.pasteHtmlAtCaret(self.pastedData)}self.element.triggerHandler("afterpaste",[{pastedData:self.pastedData}]),self.pastedData=null})),!!Environment.browser.isIE11()&&void 0},currentElement.on("paste.editor",self.settings.pasteAsPlainText?self.pasteWrapper:self.pasteWrapperHtml),this},pasteHtmlAtCaret:function pasteHtmlAtCaret(html){var sel,range,self=this,templIE11="x-text-content-templ-x";if(window.getSelection){if((sel=window.getSelection()).getRangeAt&&sel.rangeCount){(range=sel.getRangeAt(0)).deleteContents(),Environment.browser.isIE11()&&(html=templIE11);var el=document.createElement("div");el.innerHTML=html;for(var node,lastNode,frag=document.createDocumentFragment();node=el.firstChild;)lastNode=frag.appendChild(node);if(range.insertNode(frag),lastNode&&((range=range.cloneRange()).setStartAfter(lastNode),range.collapse(!0),sel.removeAllRanges(),sel.addRange(range)),Environment.browser.isIE11()){for(var maxRun=50,deferredIE11=$.Deferred(),savedContent=document.createDocumentFragment();self.element[0].childNodes.length>0;)savedContent.appendChild(self.element[0].childNodes[0]);!function waitForPastedData(elem,savedContent){--maxRun<0?deferredIE11.reject():elem.childNodes&&elem.childNodes.length>0?(html=elem.innerHTML,elem.innerHTML="",elem.appendChild(savedContent),deferredIE11.resolve()):setTimeout((function(){waitForPastedData(elem,savedContent)}),5)}(self.element[0],savedContent),$.when(deferredIE11).done((function(){var str="",thisNode=self.element.find(":contains(+ ".concat(templIE11,")")).filter((function(){return this.textContent===templIE11}));thisNode.length||(thisNode=self.element.find(":contains(+ ".concat(templIE11,")")).filter((function(){return this.textContent.indexOf(templIE11)>-1&&"UL"!==this.tagName}))),html=self.getCleanedHtml(html);var pasteHtml="";/(^(\s+?)?<li)/gi.test(html)?/((\s+?)?<\/li>(\s+?)?$)/gi.test(html)?(thisNode.is("li")||(html="<ul>".concat(html,"</ul>")),pasteHtml=html):pasteHtml=thisNode.is("li")?"".concat(html,"</li>"):(str=html.match(/<\/ul|<\/ol/gi)||[]).length?html:"".concat(html,"</li></ul>"):/((\s+?)?<\/li>(\s+?)?$)/gi.test(html)&&(thisNode.is("li")?pasteHtml="<li>".concat(html):((str=html.match(/<ul|<ol/gi)||[]).length?html+=str[str.length-1].replace(/<(ul|ol)/gi,"<$1>"):html="<ul>".concat(html,"</ul>"),pasteHtml=html)),pasteHtml&&DOM.html(thisNode,pasteHtml,"*"),(str=self.element[0].innerHTML).indexOf(templIE11)>-1&&(str=str.replace(templIE11,html)),self.element[0].innerHTML=self.getCleanedHtml(str)}))}}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(html)},getCleanedHtml:function getCleanedHtml(pastedData){var attributeStripper,s=pastedData||"",badAttributes=["start","xmlns","xmlns:o","xmlns:w","xmlns:x","xmlns:m","onmouseover","onmouseout","onmouseenter","onmouseleave","onmousemove","onload","onfocus","onblur","onclick","style"];this.isWordFormat(s)&&(s=this.cleanWordHtml(s));for(var i=0,l=badAttributes.length;i<l;i++)attributeStripper=new RegExp(" ".concat(badAttributes[i],'="(.*?)"'),"gi"),s=this.stripAttribute(s,badAttributes[i],attributeStripper),attributeStripper=new RegExp(" ".concat(badAttributes[i],"='(.*?)'"),"gi"),s=this.stripAttribute(s,badAttributes[i],attributeStripper);return(s=(s=(s=(s=(s=(s=(s=(s=(s=s.replace(/\sng-[a-z-]+/,"")).replace(/<!--(.*?)-->/gm,"")).replace(/\s\s+/g," ").replace(/\s>+/g,">")).replace(/<(ul|ol)(.*?)>/gi,"<$1>")).replace(/<li><\/li>/gi,"")).replace(/<(ul|ol)><\/(ul|ol)>/gi,"")).replace(/<\/?(html|body)(.*?)>/gi,"")).replace(/<head\b[^>]*>(.*?)<\/head>/gi,"")).replace(/<[^/>]+>[\s]*<\/[^>]+>/gi,"")).indexOf("·")>-1&&(s=[(s=[(s=(s=(s=s.replace(/<\/p>/gi,"</li>")).replace(/<p><span><span>·<\/span><\/span>/gi,"<li>")).replace(/<\/li>\s<li>/gi,"</li><li>")).slice(0,s.indexOf("<li>")),"<ul>",s.slice(s.indexOf("<li>"))].join("")).slice(0,s.lastIndexOf("</li>")),"</ul>",s.slice(s.lastIndexOf("</li>"))].join("")),s},htmlEntities:function htmlEntities(str){return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindWindowActions:function bindWindowActions(){var _this12=this,editorContainer=this.container,currentElement=this.getCurrentElement(),self=this;return this.element.on("DOMNodeInserted",(function(e){var target=$(e.target),helper=$("<b>helper</b>");"IMG"===e.target.tagName?target.removeAttr("id style srcset"):"SPAN"===e.target.tagName&&(target.before(helper),helper.after(target.contents()),helper.add(target).remove())})),this.container.on("focusin.".concat("editor"),".editor, .editor-source",(function containerFocusHandler(){var elem=$(this);editorContainer.addClass("is-active"),setTimeout((function(){elem.hasClass("error")&&(editorContainer.parent().find(".editor-toolbar").addClass("error"),editorContainer.parent().find(".editor-source").addClass("error"))}),100)})).on("focusout.".concat("editor"),".editor, .editor-source",(function containerBlurHandler(){editorContainer.removeClass("is-active"),editorContainer.parent().find(".editor-toolbar").removeClass("error"),editorContainer.parent().find(".editor-source").removeClass("error")})),this.container.on("mouseenter.".concat("editor"),(function(){_this12.element.hasClass("error")||_this12.container.addClass("is-hover")})).on("mouseleave.".concat("editor"),(function(){_this12.container.removeClass("is-hover")})),self.settings.onLinkClick&&editorContainer.on("click.editorlinks","a",(function(e){self.settings.onLinkClick(e,{elem:_this12,url:e.currentTarget.getAttribute("data-url")}),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()})),this.label.on("click.editor",(function(){currentElement.focus()})),currentElement.attr("aria-label",this.label.text()),this},restoreSelection:function restoreSelection(savedSel){var sel=window.getSelection();if(savedSel||(savedSel=this.savedSelection),savedSel){sel.removeAllRanges();for(var i=0,len=savedSel.length;i<len;i+=1)sel.addRange(savedSel[i])}},saveSelection:function saveSelection(){var ranges,sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){ranges=[];for(var i=0,len=sel.rangeCount;i<len;i+=1)ranges.push(sel.getRangeAt(i));return ranges}return null},getSelectionStart:function getSelectionStart(){var node=document.getSelection().anchorNode;return node&&3===node.nodeType?node.parentNode:node},getrange:function getrange(){return window.getSelection().getRangeAt(0)},findElementInSelection:function findElementInSelection(tagname,container){var el,comprng,selparent,rng=this.getrange();if(rng){for(el=selparent=rng.commonAncestorContainer||rng.parentElement();el!==container;el=el.parentNode)if(el&&el.tagName&&el.tagName.toLowerCase()===tagname)return el;if(!rng.collapsed&&(void 0===rng.text||rng.text)&&selparent.getElementsByTagName){el=selparent.getElementsByTagName(tagname),comprng=document.createRange?document.createRange():document.body.createTextRange();for(var i=0,len=el.length;i<len;i++)if(document.createRange){if(comprng.selectNodeContents(el[i]),rng.compareBoundaryPoints(Range.END_TO_START,comprng)<0&&rng.compareBoundaryPoints(Range.START_TO_END,comprng)>0)return el[i]}else if(comprng.moveToElementText(el[i]),rng.compareEndPoints("StartToEnd",comprng)<0&&rng.compareEndPoints("EndToStart",comprng)>0)return el[i]}}},restoreLinkSelection:function restoreLinkSelection(){var currentLink=$(this.findElementInSelection("a",this.element[0]));if(this.settings.anchor.url=this.settings.anchor.defaultUrl,this.settings.anchor.class=this.settings.anchor.defaultClass,this.settings.anchor.target=this.settings.anchor.defaultTarget,this.settings.anchor.isClickable=this.settings.anchor.defaultIsClickable,currentLink.length){this.settings.anchor.url=currentLink.attr("href"),this.settings.anchor.class=currentLink.attr("class"),this.settings.anchor.target=currentLink.attr("target");var contenteditable=currentLink.attr("contenteditable");!1!==contenteditable&&"false"!==contenteditable||(this.settings.anchor.isClickable=!0)}},execAction:function execAction(action){if(this.getCurrentElement()===this.element)action.indexOf("append-")>-1?this.execFormatBlock(action.replace("append-","")):"anchor"===action?(this.restoreLinkSelection(),this.modals.url.data("modal").open()):"image"===action?this.modals.image.data("modal").open():"foreColor"===action||"backColor"===action?this.execColorActions(action):"clearFormatting"===action?this.clearFormatting():"source"===action||"visual"===action?this.toggleSource():document.execCommand(action,!1,null);else switch(action){case"visual":this.toggleSource();break;case"anchor":this.modals.url.data("modal").open();break;default:this.insertTextAreaContent(null,action)}this.checkSelection()},insertImage:function insertImage(url){document.execCommand("insertImage",!1,url)},toggleSource:function toggleSource(forceToSourceMode){var _this13=this,isFalse=function isFalse(v){return"string"==typeof v&&"false"===v.toLowerCase()||"boolean"==typeof v&&!1===v||"number"==typeof v&&0===v};if(this.sourceViewActive()&&!forceToSourceMode){var content=this.textarea.val();$.when(this.element.triggerHandler("beforepreviewmode",content)).done((function(res){isFalse(res)||function doPreviewMode(res){var content=res||_this13.textarea.val();content=xssUtils.sanitizeHTML(content),content=_this13.getCleanedHtml(content),_this13.element.empty().removeClass("source-view-active hidden"),_this13.sourceView.addClass("hidden").removeClass("is-focused"),_this13.element.trigger("focus.editor"),_this13.switchToolbars(),_this13.textarea.off("input.editor-firechange"),setTimeout((function(){_this13.element.html(content),content=_this13.element.html(),_this13.element.triggerHandler("afterpreviewmode",content),_this13.element.focus()}),0)}(res)}))}else{var _content=this.element.html();$.when(this.element.triggerHandler("beforesourcemode",_content)).done((function(res){isFalse(res)||function doSourceMode(res){var content=res||_this13.element.html().trim().replace(/\s+/g," ").replace(/<br( \/)?>/g,"<br>\n").replace(/<\/p> /g,"</p>\n\n").replace(/<\/blockquote>( )?/g,"</blockquote>\n\n");_this13.settings.useSourceFormatter&&(content=_this13.formatHtml(content)),_this13.element.addClass("source-view-active"),_this13.switchToolbars(),_this13.textarea.val(content).focus(),_this13.sourceView.removeClass("hidden"),_this13.element.addClass("hidden"),_this13.adjustSourceLineNumbers(),_this13.textarea.focus(),content=_this13.textarea.val(),_this13.textarea.off("input.editor-firechange").on("input.editor-firechange",(function(){_this13.element.trigger("change")})),_this13.element.triggerHandler("aftersourcemode",content)}(res)}))}},clearFormatting:function clearFormatting(){var _this14=this,parentEl=this.getSelectionParentElement(),parentTag=parentEl.tagName,align={};parentEl&&parentTag&&(parentTag=parentTag.toLowerCase(),align=function getTextAlign(){for(var isFound=function isFound(el){return el&&el.style&&""!==el.style.textAlign},elem=parentEl,found=isFound(elem),max=9999;!found&&max>0;)max--,found=(elem=elem?elem.parentNode:null)&&elem===_this14.element[0]||isFound(elem);var r={found:elem&&elem!==parentEl&&elem!==_this14.element[0]};return r.found&&(r.elem=elem,r.textAlign=elem.style.textAlign),r}(),function clearLists(){var normalizeList=function normalizeList(list){var items=[].slice.call(list.querySelectorAll("li"));if(items.length>0){var fragment=document.createDocumentFragment();items.forEach((function(item){var textNode=document.createTextNode(item.textContent);fragment.appendChild(textNode),fragment.appendChild(document.createElement("br"))}));var target=items[0].parentNode;target.parentNode.insertBefore(fragment,target.nextSibling),target.parentNode.removeChild(target)}};if("li"===parentTag)normalizeList(parentEl.parentNode);else if(/ul|ol/.test(parentTag))normalizeList(parentEl);else{var elem=parentEl.classList.contains("editor")?parentEl:function setEl(){return $(parentEl).closest(".editor").length?parentEl.parentNode:null}();if(elem)[].slice.call(elem.querySelectorAll("ul, ol")).forEach((function(list){return normalizeList(list)}))}}(),function clearFormatedTags(){var replaceTag=function replaceTag(elem){var parent=elem.parentNode,p=document.createElement("p");p.innerHTML=elem.innerHTML,parent.replaceChild(p,elem)};EDITOR_PARENT_ELEMENTS.indexOf(parentTag)>-1?"p"!==parentTag&&(document.execCommand("removeFormat",!1,null),replaceTag(parentEl)):EDITOR_PARENT_ELEMENTS.forEach((function(el){"p"!==el&&[].slice.call(parentEl.querySelectorAll(el)).forEach((function(node){return replaceTag(node)}))}));for(var nodes=[].slice.call(_this14.element[0].querySelectorAll("blockquote, pre")),_loop=function _loop(i,l){var found=!1;!function checkChildren(childrenNodes){for(var i2=0,l2=childrenNodes.length;i2<l2;i2++){var child=childrenNodes[i2],childChildren=[].slice.call(child.children);child===parentEl&&(found=!0),childChildren.length&&!found&&checkChildren(childChildren)}}([].slice.call(nodes[i].children)),found&&(document.execCommand("removeFormat",!1,null),replaceTag(nodes[i]))},i=0,l=nodes.length;i<l;i++)_loop(i)}(),function hyperlinksToText(){var toText=function toText(a){var parent=a.parentNode,text=a.firstChild;parent.insertBefore(text,a),parent.removeChild(a),parent.normalize()};"a"===parentTag?toText(parentEl):[].slice.call(parentEl.querySelectorAll("a")).forEach((function(a){(function containsNodeInSelection(node){var sel=window.getSelection(),r=!1;if(Environment.browser.isIE11()){var rangeAt=sel.getRangeAt(0),range=document.createRange();range.selectNode(node);var s2s=rangeAt.compareBoundaryPoints(Range.START_TO_END,range),s2e=rangeAt.compareBoundaryPoints(Range.START_TO_START,range),e2s=rangeAt.compareBoundaryPoints(Range.END_TO_START,range),e2e=rangeAt.compareBoundaryPoints(Range.END_TO_END,range);r=s2s!==s2e||e2s!==e2e||s2s!==e2e}else r=sel.containsNode(node,!0);return r})(a)&&toText(a)}))}());var gParentEl=parentEl.parentNode;gParentEl&&gParentEl!==this.element[0]&&[].slice.call(gParentEl.querySelectorAll("[align]")).forEach((function(el){return el.removeAttribute("align")}));document.execCommand("removeFormat",!1,null),align.found&&(align.elem.style.textAlign=align.textAlign)},getSelectionParentElement:function getSelectionParentElement(){var sel,parentEl=null;return window.getSelection?(sel=window.getSelection()).rangeCount&&1!==(parentEl=sel.getRangeAt(0).commonAncestorContainer).nodeType&&(parentEl=parentEl.parentNode):(sel=document.selection)&&"Control"!==sel.type&&(parentEl=sel.createRange().parentElement()),parentEl},checkColorButtonState:function checkColorButtonState(action){var cpBtn=$('[data-action="'.concat(action,'"]'),this.toolbar),cpApi=cpBtn.data("colorpicker"),color=document.queryCommandValue(action);return cpApi&&"rgb(0, 0, 0)"!==color&&("firefox"===Environment.browser.name&&"backColor"===action&&(color=$(window.getSelection().focusNode.parentNode).css("background-color")),"number"==typeof color&&(color=cpApi.decimal2rgb(color)),color=color?cpApi.rgb2hex(color):"",cpBtn.attr("data-value",color).find(".icon").css("color",["transparent","#1a1a1a","#f0f0f0","#ffffff","#313236"].indexOf(color.toLowerCase())>-1?"":color)),{cpBtn:cpBtn,cpApi:cpApi,color:color}},execColorActions:function execColorActions(action){var _this15=this,state=this.checkColorButtonState(action),cpBtn=state.cpBtn,cpApi=state.cpApi;cpBtn.one("selected.editor",(function(e,item){var target=item;void 0===target||target instanceof $||!target.element||(target=$(item.element));var value="".concat(target.data("value")).toLowerCase();if(-1===(value="#"!==value?value:"").indexOf("#")&&(value="#".concat(value)),"#"===value&&(value=""),cpBtn.attr("data-value",value).find(".icon").css("color",value),"ie"===Environment.browser.name||"foreColor"===action)value?document.execCommand(action,!1,value):document.execCommand("removeFormat",!1,action);else{document.execCommand("fontSize",!1,"2");for(var els=_this15.getSelectionParentElement().parentNode.getElementsByTagName("font"),i=0,j=els.length;i<j;i++)els[i].hasAttribute("style")&&(els[i].style.backgroundColor="");setTimeout((function(){for(var _i=0,l=els.length;_i<l;_i++)els[_i].hasAttribute("size")&&(els[_i].style.backgroundColor=value,els[_i].removeAttribute("size"))}),0)}setTimeout((function(){_this15.getCurrentElement().focus()}),0)})),cpApi.toggleList()},execFormatBlock:function execFormatBlock(el){if(void 0===this.selection&&this.checkSelection(),this.selection&&this.selection instanceof Selection){var selectionData=this.getSelectionData(this.selection.anchorNode);if("blockquote"===el&&selectionData.el&&"blockquote"===selectionData.el.parentNode.tagName.toLowerCase())return document.execCommand("outdent",!1,null);if(selectionData.tagName===el&&(el="p"),"ie"===Environment.browser.name){if("blockquote"===el)return document.execCommand("indent",!1,el);el="<".concat(el,">")}return document.queryCommandState("bold")&&document.execCommand("bold",!1,el),document.queryCommandState("italic")&&document.execCommand("italic",!1,el),document.queryCommandState("underline")&&document.execCommand("underline",!1,el),document.queryCommandState("strikethrough")&&document.execCommand("strikethrough",!1,el),selectionData.el&&selectionData.el.innerHTML&&selectionData.el.innerHTML.indexOf("<font")>-1&&(document.execCommand("removeFormat",!1,"foreColor"),document.execCommand("removeFormat",!1,"backColor")),selectionData.el&&selectionData.el.innerHTML&&"<ul>"===selectionData.el.innerHTML.substr(0,4)&&(document.execCommand("insertunorderedlist",!1,el),document.execCommand("removeFormat",!1,el)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"UL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertunorderedlist",!1,el),document.execCommand("removeFormat",!1,el)),selectionData.el&&selectionData.el.innerHTML&&"<ol>"===selectionData.el.innerHTML.substr(0,4)&&(document.execCommand("insertorderedlist",!1,el),document.execCommand("removeFormat",!1,el)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"OL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertorderedlist",!1,el),document.execCommand("removeFormat",!1,el)),this.checkActiveButtons(),document.execCommand("formatBlock",!1,el)}},getSelectionData:function getSelectionData(el){var tagName;for(el&&el.tagName&&(tagName=el.tagName.toLowerCase());el&&-1===EDITOR_PARENT_ELEMENTS.indexOf(tagName);)(el=el.parentNode)&&el.tagName&&(tagName=el.tagName.toLowerCase());return{el:el,tagName:tagName}},isListItemChild:function isListItemChild(node){for(var parentNode=node.parentNode,tagName=parentNode.tagName.toLowerCase();-1===EDITOR_PARENT_ELEMENTS.indexOf(tagName)&&"div"!==tagName;){if("li"===tagName)return!0;if(!(parentNode=parentNode.parentNode)||!parentNode.tagName)return!1;tagName=parentNode.tagName.toLowerCase()}return!1},destroyToolbar:function destroyToolbar(){var checkJQ=function checkJQ(el){return el||$()};this.toolbar=checkJQ(this.toolbar),this.element=checkJQ(this.element),this.textarea=checkJQ(this.textarea);var toolbarApi=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex");toolbarApi&&toolbarApi.destroy();for(var buttons=this.toolbar.find("button"),i=0,l=buttons.length;i<l;i++){var tooltip=$(buttons[i]).data("tooltip");tooltip&&"function"==typeof tooltip.destroy&&tooltip.destroy();var button=$(buttons[i]).data("button");button&&"function"==typeof button.destroy&&button.destroy()}for(var colorpickers=$('[data-action="foreColor"], [data-action="backColor"]',this.element),_i2=0,_l=colorpickers.length;_i2<_l;_i2++){var colorpicker=$(colorpickers[_i2]).data("colorpicker");colorpicker&&"function"==typeof colorpicker.destroy&&colorpicker.destroy()}if(this.fontPickerElem){this.fontPickerElem.off("font-selected.".concat("editor"));var fontpickerAPI=this.fontPickerElem.data("fontpicker");fontpickerAPI&&fontpickerAPI.destroy(),delete this.fontPickerElem}this.toolbar.off(["click.".concat("editor"),"selected.".concat("editor")].join(" ")),this.toolbar.remove(),delete this.toolbar;var boundEventNames=["blur","DOMNodeInserted","focus","input.".concat("editor"),"keydown.".concat("editor"),"keypress.".concat("editor"),"keyup.".concat("editor"),"mouseup.".concat("editor"),"mousedown.".concat("editor"),"paste.".concat("editor")].join(" ");this.element.off(boundEventNames),this.textarea.off(boundEventNames),this.element.prev(".label").off("click.editor"),this.container.closest(".editor-container").off("focus.editor blur.editor click.editorlinks");var state=this.checkColorButtonState("foreColor"),cpBtn=state.cpBtn;if(cpBtn.off("selected.editor"),(cpBtn=(state=this.checkColorButtonState("backColor")).cpBtn).off("selected.editor"),delete this.pasteWrapper,delete this.pasteWrapperHtml,delete this.selectionHandler,$(window).off("resize.editor"),this.modals)for(var modalTypes=Object.keys(this.modals),_i3=0,_l2=modalTypes.length;_i3<_l2;_i3++){var modal=$("#modal-".concat(modalTypes[_i3],"-").concat(this.id)),modalApi=modal.data("modal");modal.off("beforeclose.editor close.editor open.editor beforeopen.editor"),modalApi&&"function"==typeof modalApi.destroy&&modalApi.destroy(),modal.remove()}delete this.modals,this.element.trigger("destroy.toolbar.editor")},setPreviewMode:function setPreviewMode(){var containerClassList=this.container[0].classList,elementClassList=this.element[0].classList;if(!containerClassList.contains("is-preview")){if(!this.isEditable()){var classes=["is-disabled","is-readonly","is-preview"];containerClassList.remove.apply(containerClassList,classes),elementClassList.remove.apply(elementClassList,classes)}this.sourceViewActive()&&this.toggleSource(),containerClassList.add("is-preview"),elementClassList.remove("is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),this.element[0].removeAttribute("role"),[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(link){var tooltipApi=$(link).data("tooltip");tooltipApi&&"function"==typeof tooltipApi.destroy&&tooltipApi.destroy()}))}},destroyPreviewMode:function destroyPreviewMode(){if(this.container[0]){var classList=this.container[0].classList;classList.contains("is-preview")&&(classList.remove("is-preview"),this.previewRendered?(this.element[0].setAttribute("aria-multiline",!0),this.element[0].setAttribute("role","textbox"),this.bindAnchorPreview()):(this.previewRendered=!0,this.init()))}},isPreview:function isPreview(){return!!this.container[0]&&this.container[0].classList.contains("is-preview")},isEditable:function isEditable(){var _this16=this,isEnabled=!0,isContains=function isContains(el,className){return el.classList.contains(className)};return["is-disabled","is-readonly","is-preview"].forEach((function(className){(isContains(_this16.container[0],className)||isContains(_this16.element[0],className))&&(isEnabled=!1)})),isEnabled},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,EDITOR_DEFAULTS)),this.teardown().init()},teardown:function teardown(){return this.destroyToolbar(),this.sourceView&&(this.sourceView.off(".editor"),this.sourceView.remove(),delete this.sourceView),delete this.textarea,this.lineNumbers&&delete this.lineNumbers,this.selection&&delete this.selection,this.selectionRange&&delete this.selectionRange,this.container.off(["focusin.".concat("editor"),"focusout.".concat("editor"),"mouseneter.".concat("editor"),"mouseleave.".concat("editor"),"input.".concat("editor"),"keyup.".concat("editor")].join(" ")),this.container.removeClass("editor-container"),delete this.container,this.label.off("click.".concat("editor")),delete this.label,this.element.attr("contenteditable","false"),this.element.off(["mousedown.".concat("editor"),"updated.".concat("editor")].join(" ")),$("html").off("themechanged.".concat("editor")),delete this.id,delete this.isActive,this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"editor")},disable:function disable(){this.destroyPreviewMode(),this.element.addClass("is-disabled").attr("contenteditable","false"),this.container.addClass("is-disabled")},enable:function enable(){this.destroyPreviewMode(),this.element.removeClass("is-disabled is-readonly").attr("contenteditable","true"),this.container.removeClass("is-disabled is-readonly")},readonly:function readonly(){this.destroyPreviewMode(),this.element.removeClass("is-readonly").attr("contenteditable","false"),this.container.addClass("is-readonly")},editable:function editable(){this.enable()},preview:function preview(){this.container[0].classList.contains("is-preview")||this.setPreviewMode()},onPasteTriggered:function onPasteTriggered(){"firefox"!==Environment.browser.name&&document.addEventListener&&document.addEventListener("paste",(function(e){if(void 0!==e.clipboardData){var copiedData=e.clipboardData.items[0];if(0===copiedData.type.indexOf("image")){var imageFile=copiedData.getAsFile(),reader=new FileReader;reader.onload=function(evt){var result=evt.target.result;document.execCommand("insertImage",!1,result)},reader.readAsDataURL(imageFile)}}}),!1)},isWordFormat:function isWordFormat(content){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(content)||/class="OutlineElement/.test(content)||/id="?docs\-internal\-guid\-/.test(content)},cleanWordHtml:function cleanWordHtml(content){var s=content;s=(s=(s=(s=(s=(s=s.replace(/<!--[\s\S]+?-->/gi,"")).replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,"")).replace(/<(\/?)s>/gi,"<$1strike>")).replace(/&nbsp;/gi," ")).replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,(function(str,spaces){return spaces.length>0?spaces.replace(/./," ").slice(Math.floor(spaces.length/2)).split("").join(" "):""}))).replace(/(\n|\r| class=(\'|")?Mso[a-zA-Z]+(\'|")?)/g," ");for(var badTags=["style","script","applet","embed","noframes","noscript"],i=0,l=badTags.length;i<l;i++){var re=new RegExp("<".concat(badTags[i],".*?").concat(badTags[i],"(.*?)>"),"gi");s=s.replace(re,"")}return s},stripAttribute:function stripAttribute(s,attribute,attributeStripper){return"style"===attribute?this.stripStyles(s,attributeStripper):s.replace(attributeStripper,"")},stripStyles:function stripStyles(s,styleStripper){var stylesToKeep=["color","background","font-weight","font-style","text-decoration","text-align"];return s.replace(styleStripper,(function(m){for(var attributes=(m=m.replace(/( style=|("|\'))/gi,"")).split(";"),strStyle="",i=0;i<attributes.length;i++){var entry=attributes[i].split(":");strStyle+=stylesToKeep.indexOf(entry[0])>-1?"".concat(entry[0],":").concat(entry[1],";"):""}return""!==strStyle?' style="'.concat(strStyle,'"'):""}))},formatHtml:function formatHtml(html){html=html.trim();var s=this.settings,tokens=html.split(/</),indentLevel=0,result="";function getIndent(level){var indentation="",i=level*("number"==typeof s.formatterTabsize?s.formatterTabsize:4);if(level>-1)for(;i--;)indentation+=" ";return indentation}for(var i=0,l=tokens.length;i<l;i++){var parts=tokens[i].split(/>/);2===parts.length?("/"===tokens[i][0]&&indentLevel--,result+=getIndent(indentLevel),"/"!==tokens[i][0]&&indentLevel++,i>0&&(result+="<"),result+="".concat(parts[0].trim(),">\n"),""!==parts[1].trim()&&(result+="".concat(getIndent(indentLevel)+parts[1].trim().replace(/\s+/g," "),"\n")),parts[0].match(/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/)&&indentLevel--):result+="".concat(getIndent(indentLevel)+parts[0],"\n")}return result.trim()},clear:function clear(){this.element.empty(),this.textarea.empty(),this.sourceView.find(".line-numbers").empty(),this.sourceView.find(".textarea-print").empty()}},$.fn.editor=function(settings){return this.each((function(){var instance=$.data(this,"editor");instance?instance.updated(settings):instance=$.data(this,"editor",new Editor(this,settings))}))};var HIERARCHY_DEFAULTS={legend:[],legendKey:"",dataset:[],newData:[],templateId:"",leafHeight:null,leafWidth:null,beforeExpand:null,renderSubLevel:!1,layout:"horizontal",rootId:null,emptyMessage:{title:Locale?Locale.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Hierarchy(element,settings){this.settings=utils.mergeSettings(element,settings,HIERARCHY_DEFAULTS),this.element=$(element),this.init()}Hierarchy.prototype={init:function init(){var s=this.settings;if(null===this.rootId&&void 0===this.element.attr("id")?this.rootId="hierarchyChart":this.element.attr("id")?this.settings.rootId=this.element.attr("id"):this.rootId="hierarchyChart",s.colorClass=["azure08","turquoise02","amethyst06","slate06","amber06","emerald07","ruby06"],this.handleEvents(),void 0!==s.dataset&&0!==s.dataset.length&&Array.isArray(s.dataset)){if(s.dataset[0]&&s.dataset[0].children&&s.dataset[0].children.length>0||this.isStackedLayout()?this.render(s.dataset[0]):s.dataset&&s.dataset.children.length>0&&this.render(s.dataset),null!==s.leafHeight&&null!==s.leafWidth){var style="'body .hierarchy .leaf,body .hierarchy .sublevel .leaf,body .hierarchy .container .root.leaf { width: ".concat(s.leafWidth,"px;  height: ").concat(s.leafHeight,"px;  }'");$('<style type="text/css" id="hierarchyLeafStyles">'.concat(style,"</style>")).appendTo("body")}s.layout&&this.setLayout(s.layout)}else this.element.emptymessage(s.emptyMessage)},setLayout:function setLayout(layout){switch(this.isPagingLayout()&&(layout="paging"),this.isMobileOnly()&&(layout="mobile-only"),layout){case"horizontal":this.element.addClass("layout-is-horizontal");break;case"stacked":this.element.addClass("layout-is-stacked");break;case"paging":this.element.addClass("layout-is-paging");break;case"mobile-only":this.element.addClass("layout-is-mobile-only");break;default:this.element.addClass("layout-is-horizontal")}},handleEvents:function handleEvents(){var _this=this,self=this,s=this.settings;self.element.off("click.hierarchy").on("click.hierarchy",".btn",(function(e){if(!self.isStackedLayout()){s.newData.length>0&&(s.newData=[]);var nodeId=$(this).closest(".leaf").attr("id"),nodeData=$("#".concat(nodeId)).data(),domObject={branch:$(this).closest("li"),leaf:$(this).closest(".leaf"),button:$(this)};nodeData.isExpanded?self.collapse(e,nodeData,domObject):self.expand(e,nodeData,domObject)}})),this.element.on("keypress",".leaf",(function(e){var nodeId=$(this).attr("id"),nodeData=$("#".concat(nodeId));13===e.which&&(nodeData.isExpanded?self.collapse(e,nodeData):self.expand(e,nodeData))})),self.element.off("dblclick.hierarchy").on("dblclick.hierarchy",".leaf",(function(e){var nodeId=e.currentTarget.id,dblClickEvent={event:e,data:$("#".concat(nodeId)).data()};e.stopImmediatePropagation(),_this.element.trigger("dblclick",dblClickEvent)})),self.element.on("mouseup",".leaf, .back button",(function(e){var leaf=$(this),target=$(e.target),hierarchy=leaf.closest(".hierarchy").data("hierarchy"),nodeData=leaf.data(),nodeId=$(this).attr("id"),targetInfo={target:e.target,pageX:e.pageX,pageY:e.pageY},isButton=target.is("button"),isNotBack=!target.hasClass("btn-back"),isBack=target.is(".btn-back"),svgHref=target.find("use").prop("href"),isCollapseButton=!!svgHref&&"#icon-caret-up"===svgHref.baseVal,isExpandButton=!!svgHref&&"#icon-caret-down"===svgHref.baseVal,isForward=!!svgHref&&"#icon-caret-right"===svgHref.baseVal,isActions=target.hasClass("btn-actions"),isAction=target.is("a")&&target.parent().parent().is("ul.popupmenu"),isAncestor=leaf.hasClass("ancestor"),eventType="selected";if(e.stopImmediatePropagation(),(!isAction||!$(target).parent().data("disabled"))&&($(".is-selected").removeClass("is-selected"),$("#".concat(nodeId)).addClass("is-selected"),isButton&&isCollapseButton&&isNotBack&&(eventType=isAncestor?"back":"collapse"),isButton&&isExpandButton&&isNotBack&&(eventType="expand"),isBack&&(eventType="back"),isActions&&(eventType="actions",hierarchy.buildActionsMenu(nodeData,leaf)),isAction&&(eventType="action"),isButton&&isForward&&isNotBack&&(eventType="forward"),3===e.which&&(eventType="rightClick"),hierarchy)){var eventInfo={id:nodeId,data:nodeData,actionReference:isAction?target.data("actionReference"):null,targetInfo:targetInfo,eventType:eventType,isForwardEvent:hierarchy.isForwardEvent(eventType),isBackEvent:hierarchy.isBackEvent(eventType),isAddEvent:hierarchy.isAddEvent(eventType),isExpandEvent:hierarchy.isExpandEvent(eventType),isCollapseEvent:hierarchy.isCollapseEvent(eventType),isSelectedEvent:hierarchy.isSelectedEvent(eventType),isActionsEvent:hierarchy.isActionsEvent(eventType),isActionEvent:hierarchy.isActionEvent(eventType),allowLazyLoad:hierarchy.allowLazyLoad(nodeData,eventType)};leaf.trigger("selected",eventInfo)}}))},selectLeaf:function selectLeaf(nodeId){var leaf=$("#".concat(nodeId));$(".is-selected").removeClass("is-selected"),leaf.addClass("is-selected");var eventInfo={data:leaf.data(),actionReference:null,isForwardEvent:!1,isBackEvent:!1,isAddEvent:!1,isExpandEvent:!1,isCollapseEvent:!1,isSelectedEvent:!0,isActionsEvent:!1,isActionEvent:!1,allowLazyLoad:!1};leaf.trigger("selected",eventInfo)},updateActions:function updateActions(eventInfo,updatedActions){var leaf=$(eventInfo.targetInfo.target).closest(".leaf"),nodeData=eventInfo.data,popupMenu=$(leaf).find(".popupmenu"),lineItemsToRemove=popupMenu.find("li").not(":eq(0)");$(lineItemsToRemove).each((function(idx,item){$(item).remove()})),nodeData.menu.actions=updatedActions,popupMenu.append(this.getActionMenuItems(nodeData))},buildActionsMenu:function buildActionsMenu(data,leaf){var popupMenu=$(leaf).find(".popupmenu"),template=[];void 0!==data.menu&&(popupMenu.empty(),data.menu.details&&(popupMenu.addClass("has-detail-fields"),template.push('<li><div class="detail-fields">'.concat(data.menu.details.map((function(v){return'<div class="dt-fields-row"><div class="dt-fields-cell">'.concat(v.key,'</div><div class="dt-fields-cell">').concat(v.value,"</div></div>")})).join(""),"</div></li>"))),data.menu.actions&&template.push(this.getActionMenuItems(data)),template.forEach((function(i){popupMenu.append(i)})))},getActionMenuItems:function getActionMenuItems(data){var actions=data.menu.actions.map((function(a){return void 0===a.disabled&&(a.disabled=!1),a}));return"".concat(actions.map((function(a){return"\n      <li data-disabled='".concat(a.disabled,"' class='").concat(a.menu?"submenu":"","'>\n        <a href='").concat(a.url,"' data-action-reference='")+JSON.stringify(a.data)+"'>\n          ".concat(a.value,"\n          ").concat(a.menu?'<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg>':"","\n        </a>\n        ").concat(a.menu?'<div class="wrapper" role="application" aria-hidden="true">\n          <ul class="popupmenu">\n            '.concat(a.menu.map((function(i){return"\n            <li data-disabled='".concat(a.disabled,"'>\n              <a href='").concat(a.url,"' data-action-reference='")+JSON.stringify(a.data)+"'>".concat(i.value,"</a>\n            </li>")})).join(""),"\n          </ul>\n        </div>"):"","\n      </li>")})).join(""))},isBackEvent:function isBackEvent(eventType){return"back"===eventType},isForwardEvent:function isForwardEvent(eventType){return"forward"===eventType},isAddEvent:function isAddEvent(eventType){return"add"===eventType},isExpandEvent:function isExpandEvent(eventType){return"expand"===eventType},isCollapseEvent:function isCollapseEvent(eventType){return"collapse"===eventType},isSelectedEvent:function isSelectedEvent(eventType){return"selected"===eventType},isActionsEvent:function isActionsEvent(eventType){return"actions"===eventType},isActionEvent:function isActionEvent(evenType){return"action"===evenType},allowLazyLoad:function allowLazyLoad(data,eventType){return void 0!==data&&void 0!==eventType&&(!data.isLoaded&&!data.isLeaf&&"expand"===eventType)},data:function data(nodeId,currentDataObject,newDataObject,params){void 0===params&&(params={});var s=this.settings,obj=currentDataObject.isRootNode?currentDataObject:currentDataObject[0],nodeData=[];function checkForChildren(self,thisObj,thisNewDataObject){Object.keys(thisObj).forEach((function(prop){"id"===prop&&nodeId===thisObj.id&&(thisObj.isLoaded||thisObj.isRootNode||function addChildrenToObject(thisObj,thisParams){thisParams.insert&&(delete thisObj.isLeaf,thisObj.isExpanded=!0),0!==newDataObject.length&&thisParams.insert?thisObj.children=[newDataObject]:thisObj.children=newDataObject}(thisObj,params),nodeData.push(thisObj))})),thisObj.children&&processData(self,thisObj.children)}function processData(self,thisObj,thisNewDataObject){if(void 0===thisObj.length)checkForChildren(self,thisObj);else for(var i=0,l=thisObj.length;i<l;i++)checkForChildren(self,thisObj[i])}return s.newData.length>0&&(s.newData=[]),void 0!==newDataObject&&processData(this,obj),0!==nodeData.length&&$("#".concat(nodeData[0].id)).data(nodeData[0]),nodeData[0]},add:function add(nodeId,currentDataObject,newDataObject){var s=this.settings,id=void 0!==currentDataObject.id?currentDataObject.id:nodeId,node=$("#".concat(id)),parentContainer=node.parent().hasClass("leaf-container")?node.parent().parent():node.parent(),selectorObject={},isSubLevelChild="sub-level"!==parentContainer.parent().attr("class"),subListExists=1===parentContainer.children(".sublist").length;if(isSubLevelChild?subListExists?selectorObject.element=parentContainer.children(".sublist"):(selectorObject.el=parentContainer.append("<ul class='sublist'></ul>"),selectorObject.element=$(selectorObject.el).find(".sublist")):(selectorObject.el=parentContainer.children("ul"),selectorObject.element=$(selectorObject.el)),0===selectorObject.element.length&&(selectorObject.el=parentContainer.append("<ul></ul>"),selectorObject.element=$(selectorObject.el).find("ul")),!currentDataObject.isRootNode){for(var i=0,l=newDataObject.length;i<l;i++)s.newData.push(newDataObject[i]);this.createLeaf(newDataObject,selectorObject.element)}this.updateState(node,!1,null,"add")},closePopupMenu:function closePopupMenu(node){var actionButton=node.find(".btn-actions");0!==actionButton.length&&actionButton.data("popupmenu").close()},expand:function expand(event,nodeData,domObject){var s=this.settings,node=domObject.leaf,nodeTopLevel=node.next();this.closePopupMenu(node),nodeTopLevel.animateOpen(),this.element.trigger("expanded",[nodeData,s.dataset]),node.hasClass("root")&&(nodeTopLevel=nodeTopLevel.next("ul")).animateOpen(),node.parent().removeClass("branch-collapsed").addClass("branch-expanded"),this.updateState(node,!1,null,"expand")},collapse:function collapse(event,nodeData,domObject){var _this2=this,s=this.settings,node=domObject.leaf,nodeTopLevel=node.next();this.closePopupMenu(node),nodeTopLevel.animateClosed().on("animateclosedcomplete",(function(){_this2.element.trigger("collapsed",[nodeData,s.dataset])})),node.hasClass("root")&&(nodeTopLevel=nodeTopLevel.next("ul")).animateClosed(),node.parent().removeClass("branch-expanded").addClass("branch-collapsed"),this.updateState(node,!1,null,"collapse")},render:function render(data){var _this3=this,s=this.settings,thisLegend=s.legend,thisChildren=data.children,rootNodeHTML=[],structure={legend:"<legend><ul></ul></legend>",chart:'<ul class="container"><li class="chart"></li></ul>',toplevel:this.isPagingLayout()?'<ul class="child-nodes"></ul>':'<ul class="top-level"></ul>',sublevel:this.isPagingLayout()?"":'<ul class="sub-level"></ul>'};$("#".concat(this.settings.rootId)).append(structure.chart);var chart=$("#".concat(this.settings.rootId," .chart"));if(0!==thisLegend.length){$("#".concat(this.settings.rootId)).prepend(structure.legend);var element=$("#".concat(this.settings.rootId," legend"));this.createLegend(element)}if(this.isSingleChildWithChildren()&&$(chart).addClass("has-single-child"),this.setColor(data),this.isPagingLayout()&&data.parentDataSet){var backButton=$('<div class="back"><button type="button" class="btn-icon hide-focus btn-back"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-left"></use></svg><span>Back</span></button></div>').appendTo(chart);setTimeout((function(){return backButton.next($(".leaf")).addBack($(".back")).wrapAll('<div class="back-container"></div>')})),backButton.children("button").data(data),$(chart).addClass("has-back")}if(data.isMultiRoot){var multiRootHTML='<div class="leaf multiRoot"><div><h2>'.concat(data.multiRootText,"</h2></div></div>");multiRootHTML=xssUtils.sanitizeHTML(multiRootHTML),rootNodeHTML.push(multiRootHTML),$(rootNodeHTML[0]).addClass("root").appendTo(chart)}else if(null!==data.ancestorPath&&void 0!==data.ancestorPath){data.ancestorPath.push(data.centeredNode);var ancestorHTML="".concat(data.ancestorPath.map((function(a){return" ".concat(_this3.getTemplate(a)," ")})).join(""));ancestorHTML=xssUtils.sanitizeHTML(ancestorHTML),rootNodeHTML.push(ancestorHTML),$(rootNodeHTML[0]).addClass("root ancestor").appendTo(chart);var roots=this.element.find(".leaf.root");roots.each((function(index,root){_this3.updateState(root,!1,data.ancestorPath[index],"add"),index===roots.length-1&&$(root).addClass("is-selected")}))}else{var leaf,centeredNode=data.centeredNode;this.isStackedLayout()&&null!==centeredNode?leaf=this.getTemplate(centeredNode):this.isStackedLayout()||(leaf=this.getTemplate(data)),leaf&&(leaf=xssUtils.sanitizeHTML(leaf),rootNodeHTML.push(leaf),$(rootNodeHTML[0]).addClass("root is-selected").appendTo(chart)),centeredNode&&null!==centeredNode?this.updateState(this.element.find(".leaf.root"),!0,centeredNode,void 0):this.updateState(this.element.find(".leaf.root"),!0,data,void 0)}function renderSubChildren(self,subArray,thisData){if(null!=subArray)for(var i=0,l=subArray.length;i<l;i++){subArrayChildren(self,subArray[i])}}if(thisChildren&&thisChildren.length>0)for(var i=0,l=thisChildren.length;i<l;i++){var childObject=data.children[i].children;if(this.isLeaf(thisChildren[i])&&!this.isPagingLayout()&&s.renderSubLevel||this.isPagingLayout()?this.createLeaf(data.children[i],$(structure.toplevel)):this.createLeaf(data.children[i],$(structure.sublevel)),null!=childObject){renderSubChildren(this,data.children[i].children)}}function subArrayChildren(self,obj,thisData){Object.keys(obj).forEach((function(prop){if("children"===prop){var nodeId=obj.id,currentDataObject=obj,newDataObject=obj.children;return null!=newDataObject&&newDataObject.length>0&&self.add(nodeId,currentDataObject,newDataObject),renderSubChildren(self,newDataObject)}return!0}))}var center=(this.element.find(".container").outerWidth()-$(window).width())/2;this.element.scrollLeft(center);var topLevel=this.element.find(".top-level");0===this.element.find(".sub-level").length&&1===topLevel.length&&topLevel.addClass("no-sublevel")},isPagingLayout:function isPagingLayout(){return this.settings.layout&&"paging"===this.settings.layout},isMobileOnly:function isMobileOnly(){return this.settings.layout&&"mobile-only"===this.settings.layout},isStackedLayout:function isStackedLayout(){return this.settings.layout&&"stacked"===this.settings.layout},isSingleChildWithChildren:function isSingleChildWithChildren(){if(this.isStackedLayout())return!1;var s=this.settings;if(s.dataset&&s.dataset[0]&&s.dataset[0].children){for(var i=s.dataset[0].children.length,count=0;i--;)s.dataset[0].children[i].isLeaf||count++;return 1===count}return!1},getTemplate:function getTemplate(data){var template=Tmpl.compile("{{#dataset}}".concat($("#".concat(xssUtils.stripTags(this.settings.templateId))).html(),"{{/dataset}}"),{dataset:data});return setTimeout((function(){var actionButton=$("#btn-".concat(xssUtils.stripTags(data.id)));0!==actionButton.length&&actionButton.hideFocus().popupmenu({attachToBody:!1})}),1),$(template).prop("outerHTML")},createLegend:function createLegend(element){for(var s=this.settings,index=0,i=0,l=s.legend.length;i<l;i++){var thislabel=s.legend[i].label,color=s.colorClass[i];i-1+1==4&&(element.append("<ul></ul>"),index++),element.children("ul").eq(index).append(""+'<li>\n          <span class="key '.concat(color,'"></span>\n          <span>').concat(thislabel,"</span>\n        </li>"))}},createLeaf:function createLeaf(nodeData,container){var self=this,chart=$("#".concat(self.settings.rootId," .chart"),self.container),elClassName=container.attr("class"),el=void 0!==elClassName?$("#".concat(self.settings.rootId," .").concat(elClassName)):container;function processDataForLeaf(thisNodeData){self.setColor(thisNodeData);var leaf=self.getTemplate(thisNodeData),rootId=self.settings.rootId,parent=1===el.length?el:container,branchState=thisNodeData.isExpanded||void 0===thisNodeData.isExpanded?"branch-expanded":"branch-collapsed";if(thisNodeData.isLeaf&&(branchState=""),1!==$("#".concat(rootId," #").concat(thisNodeData.id)).length&&(parent.append("<li class=".concat(branchState,">").concat($(leaf)[0].outerHTML,"</li>")),thisNodeData.children)){for(var childrenNodes="",j=0,l=thisNodeData.children.length;j<l;j++){self.setColor(thisNodeData.children[j]);var childLeaf=self.getTemplate(thisNodeData.children[j]);thisNodeData.children.length,childrenNodes+="<li>".concat($(childLeaf)[0].outerHTML,"</li>")}(parent=$("#".concat(rootId," #").concat(xssUtils.stripTags(thisNodeData.id))).parent()).append("<ul>".concat(childrenNodes,"</ul>"));for(var childLength=thisNodeData.children.length;childLength--;){var lf=$("#".concat(rootId," #").concat(xssUtils.stripTags(thisNodeData.children[childLength].id)));self.updateState(lf,!1,thisNodeData.children[childLength],void 0)}}}if(el.length<1&&("top-level"===elClassName?container.insertAfter(".root"):container.appendTo(chart)),nodeData.length)for(var i=0,l=nodeData.length;i<l;i++){nodeData.length;processDataForLeaf(nodeData[i]),self.updateState($("#".concat(self.settings.rootId," #").concat(xssUtils.stripTags(nodeData[i].id))),!1,nodeData[i],void 0)}else processDataForLeaf(nodeData),self.updateState($("#".concat(self.settings.rootId," #").concat(xssUtils.stripTags(nodeData.id))),!1,nodeData,void 0)},setColor:function setColor(data){var _this4=this,s=this.settings;if(this.setRootColor(data),this.isStackedLayout()&&(data.ancestorPath&&null!==data.ancestorPath&&data.ancestorPath.forEach((function(d){_this4.setRootColor(d)})),data.centeredNode&&null!==data.centeredNode&&this.setRootColor(data.centeredNode)),data.children&&!data.isRootNode)for(var k=0,ln=data.children.length;k<ln;k++)for(var j=0,x=s.legend.length;j<x;j++)data.children[k][s.legendKey]===s.legend[j].value&&(data.children[k].colorClass=s.colorClass[j])},setRootColor:function setRootColor(data){for(var s=this.settings,i=0,l=s.legend.length;i<l;i++){if(data[s.legendKey]===s.legend[i].value){data.colorClass=s.colorClass[i];break}""===data[s.legendKey]&&(data.colorClass="default-color")}},isLeaf:function isLeaf(dataNode){var s=this.settings;return dataNode.isLeaf||s.beforeExpand?dataNode.isLeaf:!(dataNode.children&&dataNode.children.length>0)},updateState:function updateState(leaf,isRoot,nodeData,eventType){if($.isEmptyObject($(leaf).data())&&nodeData){var d=void 0===nodeData?{}:nodeData;$(leaf).data(d)}var s=this.settings,btn=$(leaf).find(".btn"),expandCaret=this.isPagingLayout()?"caret-right":"caret-up",data=$(leaf).data();void 0===data&&void 0!==nodeData&&(data=nodeData),(data.children&&0!==data.children.length||"add"===eventType)&&(data.isExpanded=!0,data.isLoaded=!0),isRoot&&(data.isRootNode=!0,data.isLoaded=!0),(void 0===data.isExpanded&&data.children||"expand"===eventType)&&(data.isExpanded=!0),void 0!==data.isExpanded&&"collapse"!==eventType||(data.isExpanded=!1),data.isExpanded?(btn.find("svg.icon").changeIcon(expandCaret),btn.addClass("btn-expand").removeClass("btn-collapse")):(btn.find("svg.icon").changeIcon("caret-down"),btn.addClass("btn-collapse").removeClass("btn-expand")),(data.isLeaf||data.isRootNode)&&btn.addClass("btn-hidden"),data.isLeaf&&(data.isLoaded=!1,data.isExpanded=!1),this.isPagingLayout()&&(data.parentDataSet=s.dataset),$(leaf).data(data)},reload:function reload(options){this.destroy(),this.element.hierarchy(options)},unbind:function unbind(){this.element.empty()},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,HIERARCHY_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),this.element.removeData("hierarchy")}},$.fn.hierarchy=function(settings){return this.each((function(){var instance=$.data(this,"hierarchy");instance?instance.updated(settings):instance=$.data(this,"hierarchy",new Hierarchy(this,settings))}))};var FIELDFILTER_DEFAULTS={dataset:[],dropdownOpts:{},template:""+"<label>".concat(Locale.translate("FieldFilter"),'</label>\n    <select class="dropdown no-init field-filter-dropdown">\n      {{#dataset}}\n        <option\n          {{#value}} value="{{value}}"{{/value}}\n          {{#selected}} selected{{/selected}}\n          {{#disabled}} class="is-disabled" disabled{{/disabled}}\n          {{#icon}} data-icon="{{icon}}"{{/icon}}\n        >{{text}}</option>\n      {{/dataset}}\n    </select>')};function FieldFilter(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,FIELDFILTER_DEFAULTS),this.init()}FieldFilter.prototype={init:function init(){this.render(),this.handleEvents(),this.setFiltered()},render:function render(dataset){var s=this.settings;if(dataset=dataset||s.dataset,"object"===_typeof(Tmpl)&&dataset&&s.template){s.template instanceof $?s.template="".concat(s.template.html()):"string"==typeof s.template&&(stringUtils.containsHTML(s.template)||(s.template=$("#".concat(s.template)).html()));var renderedTmpl=Tmpl.compile(s.template,{dataset:s.dropdownOpts.source?[]:dataset}),emptyTmpl=""+'<label for="ffdropdown-empty" class="audible">\n          '.concat(Locale.translate("FieldFilter"),'\n        </label>\n        <select id="ffdropdown-empty" name="ffdropdown-empty" class="dropdown no-init field-filter-dropdown"></select>');dataset.length>0?this.element.before(renderedTmpl):0===dataset.length&&this.element.before(renderedTmpl||emptyTmpl);var id=this.element.attr("id")||this.element.attr("name");void 0===id&&(id=utils.uniqueId(this.element,"fieldfilter-"),this.element[0].setAttribute("id",id));var ffId="".concat(id,"-ff");this.field=this.element.closest(".field, .field-short");var isRTL=Locale.isRTL();s.dropdownOpts=s.dropdownOpts||{},isRTL&&"object"===_typeof(s.dropdownOpts)&&(s.dropdownOpts.placementOpts?s.dropdownOpts.placementOpts.x=this.element.outerWidth():s.dropdownOpts.placementOpts={x:this.element.outerWidth()}),s.dropdownOpts.cssClass=s.dropdownOpts.cssClass?"".concat(s.dropdownOpts.cssClass," ffdropdown"):"ffdropdown",s.dropdownOpts.noSearch=!0,this.ffdropdown=this.field.find("select.dropdown.field-filter-dropdown"),this.ffdropdown.dropdown(s.dropdownOpts).prev("label").addClass("audible"),this.ffdropdown[0].setAttribute("id",ffId),this.ffdropdown[0].setAttribute("name",ffId),this.ffdropdown.prev("label")[0].setAttribute("for",ffId);var labelText=this.ffdropdown.prev("label").prev("label").text();this.field.addClass("fieldfilter-wrapper"),this.field.find("div.dropdown span.audible").text(labelText),this.field.find("div.dropdown span").addClass("audible"),this.ddApi=this.ffdropdown.data("dropdown"),this.ddApi&&this.ddApi.icon&&this.ddApi.icon.addClass("ffdropdown-icon")}},setFiltered:function setFiltered(){if(this.ddApi){var item=this.ddApi.element.find("option:selected");this.filtered=this.getTriggerData(item)}return this},getTriggerData:function getTriggerData(args){var s=this.settings,dataset=s.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:s.dataset;return{idx:args.index(),item:args,data:dataset[args.index()]}},getFilterType:function getFilterType(){return this.setFiltered(),this.filtered},setFilterType:function setFilterType(value){if(this.ddApi){var newIdx=-1,s=this.settings,dataset=s.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:s.dataset;if("number"==typeof value&&value>-1&&value<dataset.length)newIdx=value;else if("string"==typeof value){var option=this.ffdropdown.find('option[value="'.concat(value,'"]'));option.length||(option=this.ffdropdown.find("option").filter((function(){return $(this).text()===value}))),option.length&&(newIdx=option.index())}-1!==newIdx&&newIdx!==this.ffdropdown[0].selectedIndex&&(this.ffdropdown[0].selectedIndex=newIdx,this.ddApi.updated(),this.ffdropdown.triggerHandler("change"),this.setFiltered(),this.element.triggerHandler("filtered",[this.filtered]))}},handleEvents:function handleEvents(){var _this=this;return this.ffdropdown.on("listopened.".concat("fieldfilter"),(function(){var extra=_this.field.is(".field-short")?42:52;$("#dropdown-list ul").width(_this.element.outerWidth()+extra)})).on("selected.".concat("fieldfilter"),(function(e,args){var triggerData=_this.getTriggerData(args);_this.element.triggerHandler("filtered",[triggerData])})),this},readonly:function readonly(){return this.ffdropdown.readonly(),this},enable:function enable(){return this.ffdropdown.enable(),this},disable:function disable(){return this.ffdropdown.disable(),this},unbind:function unbind(){return this.ffdropdown.off(".".concat("fieldfilter")),this.ddApi&&"function"==typeof this.ddApi.destroy&&this.ddApi.destroy(),this.ffdropdown.add(this.ffdropdown.prev("label")).remove(),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element[0],settings,FIELDFILTER_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"fieldfilter")}},$.fn.fieldfilter=function(settings){return this.each((function(){var instance=$.data(this,"fieldfilter");instance?instance.updated(settings):instance=$.data(this,"fieldfilter",new FieldFilter(this,settings))}))};var FIELDOPTIONS_DEFAULTS={};function FieldOptions(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,FIELDOPTIONS_DEFAULTS),this.init(),warnAboutRemoval("FieldOptions")}FieldOptions.prototype={init:function init(){this.setElements(),this.handleEvents()},setElements:function setElements(){var _this=this;this.isFirefox="firefox"===Environment.browser.name,this.isSafari=Environment.browser.isSafari(),this.field=this.element.closest(".field, .radio-group"),this.targetElem=this.element;var label=this.field.find("label");return label&&(this.label=label),this.element[0].className.match(/(dropdown|multiselect)/)&&(this.targetElem=this.element.data("dropdown").pseudoElem),this.element[0].className.match(/(fileupload)/)&&(this.targetElem=this.field.find('.fileupload[type="text"]')),this.field.addClass("is-fieldoptions"),this.fieldParent=this.element.closest(".field").parent(),this.trigger=this.field.find(".btn-actions"),this.isFirefox&&this.trigger.length&&(this.trigger[0].contentEditable=!0,this.trigger.on("keydown.".concat("fieldoptions"),(function(e){9!==(e.which||e.keyCode||e.charCode||0)&&(e.preventDefault(),e.stopPropagation())}))),setTimeout((function(){_this.popupmenuApi=_this.trigger.data("popupmenu"),_this.popupmenuApi&&(_this.popupmenuApi.settings.returnFocus=!1,_this.popupmenuApi.settings.offset.y=10)}),100),this},handleEvents:function handleEvents(){var _this2=this,self=this,datepicker=this.element.data("datepicker"),timepicker=this.element.data("timepicker"),dropdown=this.element.data("dropdown"),lookup=this.element.data("lookup")||this.element.hasClass("lookup"),isCheckbox=this.element.is(".checkbox"),isFileupload=this.element.is(".fileupload"),isSearchfield=this.element.is(".searchfield"),isColorpicker=this.element.is(".colorpicker"),isRadio=this.element.closest(".radio-group").length>0,isFieldset=this.element.is(".data")&&this.element.closest(".summary-form").length>0,isFocus=function isFocus(elem){return $(":focus").is(elem)},addFocused=function addFocused(elem){(elem||_this2.element).addClass("is-focused")},removeFocused=function removeFocused(elem){(elem||_this2.element).removeClass("is-focused")},doActive=function doActive(){self.element.add(self.trigger).add(self.field).add(self.fieldParent).addClass("is-active")},doUnactive=function doUnactive(){self.element.add(self.trigger).add(self.field).add(self.fieldParent).removeClass("is-active")},canUnactive=function canUnactive(e){var r=!isFocus(_this2.element);return r=!_this2.trigger.is(e.relatedTarget)&&r,r=!_this2.trigger.is(".is-open")&&r,r=(!datepicker||!datepicker.isOpen())&&r,r=(!timepicker||!timepicker.isOpen())&&r,r=!$(e.relatedTarget).prev().is(_this2.element)&&r,r=(!dropdown||!dropdown.isOpen())&&r,r=!(lookup&&lookup.modal&&lookup.modal.isOpen())&&r,r=(!isColorpicker||!_this2.element.is(".is-open"))&&r},onPopupToggle=function onPopupToggle(elem){elem.trigger&&elem.trigger.off("show.".concat("fieldoptions")).on("show.".concat("fieldoptions"),(function(){doActive()})).off("hide.".concat("fieldoptions")).on("hide.".concat("fieldoptions"),(function(e){canUnactive(e)&&(doUnactive(),_this2.element.removeClass("is-open"))}))},getTriggerTopVal=function getTriggerTopVal(){var returns,height=_this2.element.height();if(isFieldset){var lineHeight=parseInt(_this2.element.css("line-height"),10);height>lineHeight?(_this2.element.css({"margin-bottom":"","padding-bottom":""}),returns=(height-lineHeight)/2*-1):(_this2.element.css({"margin-bottom":"8px","padding-bottom":"12px"}),returns=6)}else isRadio&&(returns=(height-_this2.trigger.height())/2*-1);return returns},setTriggerCssTop=function setTriggerCssTop(){_this2.trigger.css({top:"".concat(getTriggerTopVal()-1,"px")})};return Environment.features.touch?(this.field.addClass("visible"),this.trigger.on("beforeopen.".concat("fieldoptions"),(function(e){(function canActive(){var r=isFocus(_this2.element);return r=(!datepicker||!datepicker.isOpen())&&r,r=(!timepicker||!timepicker.isOpen())&&r,r=(!dropdown||!dropdown.isOpen())&&r})()&&doActive()})).on("close.".concat("fieldoptions"),(function(e){canUnactive(e)&&doUnactive()}))):(this.field.removeClass("visible"),this.field.on("mouseover.".concat("fieldoptions"),(function(){self.element.prop("disabled")||self.element.closest("is-disabled").length||self.field[0].className.indexOf("visible")<0&&self.field[0].classList.add("visible")})).on("mouseout.".concat("fieldoptions"),(function(){self.field[0].className.indexOf("visible")>-1&&self.field[0].classList.remove("visible")}))),dropdown&&setTimeout((function(){var popupmenu=_this2.trigger.data("popupmenu");popupmenu&&popupmenu.menu.closest(".popupmenu-wrapper").css({"z-index":"4502"})}),0),(datepicker||timepicker)&&onPopupToggle(datepicker||timepicker),timepicker&&(timepicker.settings.returnFocus=!1),(lookup||isColorpicker)&&(this.field.on("click.".concat("fieldoptions"),".lookup-wrapper .trigger, .colorpicker-container .trigger",(function(){doActive()})),isColorpicker&&this.element.on("beforeopen.".concat("fieldoptions"),(function(){doActive()}))),isCheckbox&&(this.trigger.addClass("is-checkbox"),!Environment.features.touch&&this.isSafari&&this.field.on("click.".concat("fieldoptions"),".checkbox-label",(function(){doActive()})).on("mouseout.".concat("fieldoptions"),".checkbox-label",(function(){doUnactive()}))),isFileupload&&(this.element.on("change.".concat("fieldoptions"),(function(){_this2.targetElem.focus()})),this.field.on("click.".concat("fieldoptions"),".trigger, .trigger-close",(function(){doActive()}))),isSearchfield&&setTimeout((function(){_this2.trigger.add(_this2.trigger.next(".popupmenu")).appendTo(_this2.element.closest(".searchfield-wrapper"))}),0),isFieldset&&(setTriggerCssTop(),this.targetElem.add(this.trigger).on("keydown.".concat("fieldoptions"),(function(e){13===(e.which||e.keyCode||e.charCode||0)&&setTimeout((function(){doActive()}),0)})),this.targetElem.attr("tabindex",0).on("click.".concat("fieldoptions"),(function(){doActive()})),$(document).on("click.".concat("fieldoptions"),(function(e){$(e.target).is(_this2.element)||doUnactive()})),$("body").on("resize.".concat("fieldoptions"),(function(){setTriggerCssTop()}))),isRadio&&(setTriggerCssTop(),this.element.on("focusin.".concat("fieldoptions"),".radio",(function(){var delay=_this2.isSafari?200:0;addFocused(),setTimeout((function(){doActive()}),delay)})).on("focusout.".concat("fieldoptions"),".radio",(function(){removeFocused()})),$("body").on("resize.".concat("fieldoptions"),(function(){setTriggerCssTop()}))),this.targetElem.on("focusin.".concat("fieldoptions"),(function(){doActive(),isRadio&&_this2.isSafari&&addFocused()})).on("focusout.".concat("fieldoptions"),(function(e){var delay=_this2.isSafari?200:0;isRadio&&_this2.isSafari&&removeFocused(),setTimeout((function(){canUnactive(e)&&doUnactive()}),delay)})),this.trigger.on("focusin.".concat("fieldoptions"," click.").concat("fieldoptions"),(function(){doActive()})).on("focusout.".concat("fieldoptions"),(function(e){canUnactive(e)&&doUnactive()})).on("selected.".concat("fieldoptions"),(function(){_this2.popupmenuApi.settings.returnFocus=!0})).on("close.".concat("fieldoptions"),(function(e){canUnactive(e)&&doUnactive()})),(this.isSafari||isFileupload)&&(isRadio&&this.element.attr("tabindex",0),this.targetElem.on("keydown.".concat("fieldoptions"),(function(e){9!==(e.which||e.keyCode||e.charCode||0)||e.shiftKey||(isRadio?(_this2.targetElem.find(":checked, .radio:first").not(":disabled").focus(),_this2.targetElem.find(".radio").off("keydown.".concat("fieldoptions")).on("keydown.".concat("fieldoptions"),(function(e2){9!==(e2.which||e2.keyCode||e2.charCode||0)||e.shiftKey||setTimeout((function(){_this2.trigger.focus()}),0)}))):_this2.trigger.focus(),doActive(),e.preventDefault(),e.stopPropagation())}))),this.element.on("listopened.".concat("fieldoptions"),(function(){doActive()})).on("listclosed.".concat("fieldoptions"),(function(){doUnactive()})),this},enable:function enable(){return this.trigger.prop("disabled",!1),this},disable:function disable(){return this.trigger.prop("disabled",!0),this},unbind:function unbind(){return this.field.off(["click.".concat("fieldoptions"),"mouseover.".concat("fieldoptions"),"mouseout.".concat("fieldoptions")].join(" ")),this.element.off(["beforeopen.".concat("fieldoptions"),"change.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"listclosed.".concat("fieldoptions"),"listopened.".concat("fieldoptions")].join(" ")),this.trigger.off(["beforeopen.".concat("fieldoptions"),"click.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"selected.".concat("fieldoptions"),"close.".concat("fieldoptions")].join(" ")),this.targetElem.off(["click.".concat("fieldoptions"),"keydown.".concat("fieldoptions")].join(" ")),$("body").off(["resize.".concat("fieldoptions")].join(" ")),$(document).off(["click.".concat("fieldoptions")].join(" ")),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,FIELDOPTIONS_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"fieldoptions")}},$.fn.fieldoptions=function(settings){return this.each((function(){var instance=$.data(this,"fieldoptions");instance?instance.updated(settings):instance=$.data(this,"fieldoptions",new FieldOptions(this,settings))}))};var FILEUPLOAD_DEFAULTS={};function FileUpload(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,FILEUPLOAD_DEFAULTS),this.init()}FileUpload.prototype={init:function init(){this.build()},build:function build(){var _this=this,self=this,elem=this.element,hasInlineLabel=!elem.is("input.fileupload");this.fileInput=hasInlineLabel?elem.find("input"):elem,elem.closest(".field, .field-short").addClass("field-fileupload");var id=elem.find("input").attr("name");hasInlineLabel||(id=elem.attr("id")||elem.attr("name"));var elemClass=hasInlineLabel?elem.find("input").attr("class"):elem.attr("class");elemClass=elemClass?" ".concat(elemClass):"";var instructions=Locale.translate("FileUpload"),label=$('<label for="'.concat(id,'-filename">').concat(elem.text(),' <span class="audible">').concat(instructions,"</span></label>")),shadowField=$('<input readonly id="'.concat(id,'-filename" class="fileupload-background-transparent').concat(elemClass,'" type="text">')),svg='<span class="trigger">'.concat($.createIcon("folder"),"</span>"),svgClose='<span class="trigger-close" tabindex="-1">'.concat($.createIcon("close"),"</span>");if(!hasInlineLabel){var orgLabel=elem.prev("label");0===orgLabel.length&&(orgLabel=elem.parent().prev("label")),label.html("".concat(orgLabel.text(),' <span class="audible">').concat(instructions,"</span>")),orgLabel.addClass("audible").add(this.fileInput).attr("tabindex","-1")}elem.before(label,shadowField),this.fileInput.after(svg,svgClose);var fileInputValue=this.fileInput.attr("value");fileInputValue&&fileInputValue.length>0&&(shadowField.val(fileInputValue),this.fileInput.attr("value","")),this.textInput=shadowField,this.svg=elem.parent().find(".trigger"),this.svgClose=elem.parent().find(".trigger-close"),this.textInput.on("keydown.fileupload",(function(e){var handle=!1;13===e.which||32===e.which?(elem.parent().find('[type="file"]').trigger("click"),handle=!0):8===e.which&&(Environment.browser.isIE11()&&e.preventDefault(),_this.clearUploadFile(),handle=!0),handle&&e.stopPropagation()})),this.svg.on("click.fileupload",(function(e){_this.fileInput.trigger("click"),hasInlineLabel&&_this.fileInput.data("handleEvent".concat([e.type||""]),e.handleObj)})),this.svgClose.on("click.fileupload",(function(e){_this.clearUploadFile(),hasInlineLabel&&_this.fileInput.data("handleEvent +".concat([e.type||""]),e.handleObj)})),this.fileInput.is(":disabled")&&this.textInput.prop("disabled",!0),elem.hasClass("required")&&(label.addClass("required"),elem.removeClass("required")),this.fileInput.attr("data-validate")&&(this.textInput.attr("data-validate",this.fileInput.attr("data-validate")),this.textInput.validate()),this.fileInput.attr("readonly")&&(this.textInput.prop("disabled",!1),this.textInput[0].classList.remove("fileupload-background-transparent"),this.fileInput.attr("disabled","disabled")),this.fileInput.on("change.fileupload",(function(){this.files.length>0?(self.textInput.val(this.files[0].name).trigger("change"),self.svgClose.show().addClass("is-visible")):self.clearing||self.clearUploadFile()})),this.fileInput.on("click.fileupload",(function(e){var handleEventData=_this.fileInput.data("handleEvent".concat([e.type||""]));handleEventData&&handleEventData.type===e.type&&"fileupload"===e.handleObj.namespace&&(_this.fileInput.data("handleEvent".concat([e.type||""]),null),e.preventDefault())})),self.fileInput.css({position:"static",left:0}),setTimeout((function(){self.fileInput.css({position:"fixed",left:"-10000px"})}),0)},clearUploadFile:function clearUploadFile(){this.clearing=!0,this.fileInput.add(this.textInput).val(""),this.svgClose.hide().removeClass("is-visible"),this.fileInput.triggerHandler("change"),this.clearing=!1},unbind:function unbind(){return this.svg.add(this.svgClose).off("click.fileupload"),this.fileInput.off("change.fileupload"),this.textInput.off("keydown.fileupload"),this.element.closest(".field-fileupload").removeClass("field-fileupload").find('>label:first, >[type="text"]:first, .trigger, .trigger-close, .icon-dirty, .msg-dirty').remove(),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,FILEUPLOAD_DEFAULTS)),this},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"fileupload")},disable:function disable(){this.textInput.prop("disabled",!0),this.fileInput.prop("disabled",!0)},enable:function enable(){this.textInput.prop("disabled",!1).prop("readonly",!1),this.fileInput.removeAttr("disabled")},readonly:function readonly(){this.textInput.prop("readonly",!0),this.fileInput.prop("disabled",!0),this.textInput.prop("disabled",!1),this.textInput.removeClass("fileupload-background-transparent")}},$.fn.fileupload=function(settings){return this.each((function(){var instance=$.data(this,"fileupload");instance?instance.updated(settings):instance=$.data(this,"fileupload",new FileUpload(this,settings))}))};var FILEUPLOADADVANCED_DEFAULTS={isStandalone:!0,standaloneClass:"standalone",allowedTypes:"*",maxFilesInProcess:99999,maxFileSize:-1,fileName:"myfile",isDisabled:!1,showBrowseButton:!0,send:null,textDropArea:null,textDropAreaWithBrowse:null,textBtnCancel:null,textBtnCloseError:null,textBtnRemove:null,errorAllowedTypes:null,errorMaxFileSize:null,errorMaxFilesInProcess:null};function FileUploadAdvanced(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,FILEUPLOADADVANCED_DEFAULTS),this.init()}FileUploadAdvanced.prototype={init:function init(){return this.build(),this.handleEvents(),this},build:function build(){var html,s=this.settings,cssClassList=s.isStandalone?s.standaloneClass:"";if(s.textDropArea=s.textDropArea||Locale.translate("TextDropArea"),s.textDropAreaWithBrowse=s.textDropAreaWithBrowse||Locale.translate("TextDropAreaWithBrowse"),s.textBtnCancel=s.textBtnCancel||Locale.translate("TextBtnCancel"),s.textBtnCloseError=s.textBtnCloseError||Locale.translate("TextBtnCloseError"),s.textBtnRemove=s.textBtnRemove||Locale.translate("TextBtnRemove"),s.errorAllowedTypes=s.errorAllowedTypes||"<em>".concat(Locale.translate("Error"),"</em>: ").concat(Locale.translate("ErrorAllowedTypes")),s.errorMaxFileSize=s.errorMaxFileSize||"<em>".concat(Locale.translate("Error"),"</em>: ").concat(Locale.translate("ErrorMaxFileSize")),s.errorMaxFilesInProcess=s.errorMaxFilesInProcess||"<em>".concat(Locale.translate("Error"),"</em>: ").concat(Locale.translate("ErrorMaxFilesInProcess")),this.element.is(".is-disabled")&&(s.isDisabled=!0),s.isDisabled&&(cssClassList+=" is-disabled"),s.showBrowseButton){var types="",id=utils.uniqueId(this.element,"fileupload-adv-"),fileExtensions=s.allowedTypes.split(/[\s|]+/g),isExtra=s.maxFilesInProcess>1?" multiple":"";if(isExtra+=s.isDisabled?" disabled":"",1===fileExtensions.length)"*"!==fileExtensions[0]&&(types=".".concat(fileExtensions[0]));else for(var i=0,l=fileExtensions.length;i<l;i++)types+=".".concat(fileExtensions[i]+(i!==l-1?",":""));html=""+'<div class="fileupload-wrapper '.concat(cssClassList,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),'\n            <label class="fileupload-adv-browse-lbl">\n              <span>').concat(s.textDropAreaWithBrowse,'</span>\n              <input type="file" name="').concat(id,'" accept="').concat(types,'"').concat(isExtra," />\n            </label>\n          </div>\n        </div>")}else html=""+'<div class="fileupload-wrapper '.concat(cssClassList,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),"\n            <p>").concat(s.textDropArea,"</p>\n          </div>\n        </div>");DOM.append(this.element,html,"<div><svg><use><label><span><input>"),this.dropArea=$(".drop-area",this.element)},handleEvents:function handleEvents(){var _this=this,self=this,s=this.settings;if(this.dropArea.on("dragenter.fileuploadadvanced",(function(e){self.element.triggerHandler("filesdragenter"),e.stopPropagation(),e.preventDefault(),s.isDisabled||$(this).addClass("hover")})).on("dragover.fileuploadadvanced",(function(e){e.stopPropagation(),e.preventDefault()})).on("drop.fileuploadadvanced",(function(e){var files=e.originalEvent.dataTransfer.files;e.preventDefault(),s.isDisabled||(self.element.triggerHandler("filesdroped",[files]),$(this).removeClass("hover is-focus"),$("span.msg",this.element).closest(".error").remove(),files.length+$(".progress",this.element).length>s.maxFilesInProcess?self.showError(s.errorMaxFilesInProcess):self.handleFileUpload(files))})),s.showBrowseButton&&!s.isDisabled){var label=this.dropArea.find(".fileupload-adv-browse-lbl"),input=label.find('input[type="file"]');label.click((function(e){$(e.target).is('.hyperlink, input[type="file"]')||e.preventDefault()})),input.hideFocus(),input.on("hidefocusremove.fileuploadadvanced",(function(e){e.stopPropagation(),_this.dropArea.addClass("is-focus")})).on("hidefocusadd.fileuploadadvanced",(function(e){e.stopPropagation(),_this.dropArea.removeClass("is-focus")})).on("change.fileuploadadvanced",(function(e){e.stopPropagation(),self.handleFileUpload(this.files)}))}$(document).on("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced",(function(e){e.stopPropagation(),e.preventDefault(),"dragover"===e.type&&self.dropArea.removeClass("hover")}))},handleFileUpload:function handleFileUpload(files){for(var s=this.settings,fileName=s.fileName.replace("[]",""),i=0,l=files.length;i<l;i++)if(this.isFileTypeAllowed(files[i].name))if(-1!==s.maxFileSize&&files[i].size>s.maxFileSize)this.showError(s.errorMaxFileSize,files[i]);else{this.element.triggerHandler("beforecreatestatus",[files[i]]);var fd=new FormData;fd.append("".concat(fileName,"[]"),files[i]);var status=this.createStatus(files[i]);status.container.find(".status-icon .action").focus(),this.element.triggerHandler("aftercreatestatus",[files[i]]),"function"==typeof s.send?s.send(fd,status):this.sendFileToServer(fd,status)}else this.showError(s.errorAllowedTypes,files[i]);s.showBrowseButton&&this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').val("")},createStatus:function createStatus(file){var _this2=this,self=this,s=this.settings,container=$(""+'<div class="container">\n        <div class="file-row">\n          <span class="status-icon">\n            <button type="button" class="btn-icon action">\n              '.concat($.createIcon({icon:"close",classes:["icon-close"]}),"\n              <span>").concat(s.textBtnCancel,'</span>\n            </button>\n          </span>\n          <span class="description">').concat(file.name,'</span>\n          <div class="l-pull-right">\n            <span class="size">').concat(this.formatFileSize(file.size),'</span>\n          </div>\n        </div>\n        <div class="progress-row">\n          <span class="progress">\n            <span class="progress-bar" data-value="0"></span>\n          </span>\n        </div>\n      </div>')),btnCancel=$(".action",container).button(),rightSide=$(".l-pull-right",container),progressBar=$(".progress-bar",container).progress({animationLength:10});this.dropArea.after(container);return{file:file,container:container,setProgress:function setProgress(progress){_this2.element.triggerHandler("fileprogress",[{file:file,progress:progress}]),progressBar.attr("data-value",progress).triggerHandler("updated")},setAbort:function setAbort(jqxhr){btnCancel.on("click.fileuploadadvanced",(function(){_this2.element.triggerHandler("fileaborted",[file]),jqxhr.abort(),btnCancel.off("click.fileuploadadvanced"),container.remove()}))},setCompleted:function setCompleted(data){container.addClass("completed"),btnCancel.after($.createIcon("check")),rightSide.append(""+'<button type="button" class="btn-icon action">\n          '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n          <span>").concat(s.textBtnRemove,"</span>\n        </button>")),$(".action",rightSide).button().on("click.fileuploadadvanced",(function(){$(this).off("click.fileuploadadvanced"),container.remove(),data.remove()})),btnCancel.off("click.fileuploadadvanced"),btnCancel.add(progressBar.closest(".progress-row")).remove(),self.element.triggerHandler("filecompleteuploading",[file])}}},sendFileToServer:function sendFileToServer(formData,status){var tempData={remove:function remove(){}},percent=0,total=parseFloat(status.file.size),timer=new $.fn.timer((function(){status.setCompleted(tempData)}),total);$(timer.event).on("update",(function(e,data){percent=Math.ceil(data.counter/total*100),status.setProgress(percent)})),status.setAbort({abort:function abort(){}})},showError:function showError(error,file){var container,s=this.settings;container=error===s.errorMaxFilesInProcess?$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon">\n              <button type="button" class="btn-icon action">\n                '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n                <span>").concat(s.textBtnCloseError,'</span>\n              </button>\n            </span>\n            <span class="msg">').concat(error,"</span>\n          </div>\n        </div>")):$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon">\n              <button type="button" class="btn-icon action">\n                '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n                <span>").concat(s.textBtnCloseError,'</span>\n              </button>\n            </span>\n            <span class="description">').concat(file.name,'</span>\n            <div class="l-pull-right">\n              <span class="size">').concat(this.formatFileSize(file.size),'</span>\n            </div>\n          </div>\n          <div class="msg">\n            <p>').concat(error,"</p>\n          </div>\n        </div>")),$(".action",container).button().on("click.fileuploadadvanced",(function(){container.remove()})),this.dropArea.after(container)},isFileTypeAllowed:function isFileTypeAllowed(fileName){var fileExtensions=this.settings.allowedTypes.toLowerCase().split(/[\s|]+/g),ext=fileName.split(".").pop().toLowerCase();return!("*"!==this.settings.allowedTypes&&$.inArray(ext,fileExtensions)<0)},formatFileSize:function formatFileSize(bytes){var scale_GB=1e9,scale_MB=1e6,scale_KB=1e3;return"number"!=typeof bytes?"":bytes>=scale_GB?"".concat((bytes/scale_GB).toFixed(2)," GB"):bytes>=scale_MB?"".concat((bytes/scale_MB).toFixed(2)," MB"):"".concat((bytes/scale_KB).toFixed(2)," KB")},enable:function enable(){this.settings.isDisabled=!1,this.unbind(),this.element.find(".fileupload-wrapper").removeClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').removeAttr("disabled"),this.handleEvents()},disable:function disable(){this.settings.isDisabled=!0,this.unbind(),this.element.find(".fileupload-wrapper").addClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').attr("disabled","disabled"),this.handleEvents()},unbind:function unbind(){return this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').off("hidefocusremove.fileuploadadvanced hidefocusadd.fileuploadadvanced change.fileuploadadvanced"),this.dropArea.off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(document).off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(".action",this.element).off("click.fileuploadadvanced"),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,FILEUPLOADADVANCED_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$(".fileupload-wrapper",this.element).remove(),$.removeData(this.element[0],"fileuploadadvanced")}},$.fn.fileuploadadvanced=function(settings){return this.each((function(){var instance=$.data(this,"fileuploadadvanced");instance?instance.updated(settings):instance=$.data(this,"fileuploadadvanced",new FileUploadAdvanced(this,settings))}))},$.fn.fontpicker=function(settings){return this.each((function(){var instance=$.data(this,"fontpicker");instance?instance.updated(settings):instance=$.data(this,"fontpicker",new FontPicker(this,settings))}))};var HOMEPAGE_DEFAULTS={animate:!0,columns:3,editing:!1,easing:"blockslide",gutterSize:20,widgetWidth:360,widgetHeight:370,timeout:100};function Homepage(element,settings){this.settings=utils.mergeSettings(element,settings,HOMEPAGE_DEFAULTS),this.element=$(element),this.init()}Homepage.prototype={get state(){var rows=this.rowsAndCols.length,cols=rows?this.rowsAndCols[0].length:0,settings=this.settings;return-1===this.rowsAndCols[rows-1].indexOf(!1)&&(rows-=1),void 0===this.editing&&(this.editing=settings.editing),{rows:rows,cols:cols,containerHeight:function getContainerHeight(){return settings.gutterSize+(settings.gutterSize+settings.widgetHeight)*rows}(),matrix:this.rowsAndCols,blocks:this.blocks,editing:this.editing}},init:function init(){this.isTransitionsSupports=this.supportsTransitions(),this.initHeroWidget(),this.handleEvents(),this.initEdit(),this.resize(this,!1)},initColumns:function initColumns(row){row=row||0,this.rowsAndCols[row]=[];for(var i=0,l=this.settings.columns;i<l;i++)this.rowsAndCols[row][i]=!0},initHeroWidget:function initHeroWidget(){var heroWidget=$(".hero-widget");heroWidget.length>1&&(heroWidget=heroWidget.not(":first").remove()),this.heroWidget=heroWidget},initRowsAndCols:function initRowsAndCols(){this.rowsAndCols=[],this.initColumns()},initEdit:function initEdit(){var _this=this,homepage=this,cards=homepage.element.find(".card, .widget");homepage.editing?(cards.attr("draggable",!0),cards.css("cursor","move"),homepage.guide=$("<div>").addClass("drop-indicator").append("\n      <div class='edge'></div>\n      <div class='line'></div>\n      <div class='edge'></div>\n      "),cards.each((function(index,element){var card=$(element),removeButton=$("<button>").addClass("card-remove").append('\n        <span class="audible">Remove Widget</span>\n          <svg icon="close" soho-icon="" class="icon" aria-hidden="true" focusable="false" role="presentation">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-close"></use>\n          </svg>\n        ');if(!card.hasClass("no-remove")){var header=card.children(".widget-header");removeButton.insertBefore(header).on("click.card-remove",(function(){if(_this.settings&&"function"==typeof _this.settings.onBeforeRemoveCard){var result=_this.settings.onBeforeRemoveCard(card);result&&result.then&&"function"==typeof result.then?result.then((function(){card.remove(),homepage.refresh(!1),homepage.element.triggerHandler("removecard",[card,homepage.state])})):result&&(card.remove(),homepage.refresh(!1),homepage.element.triggerHandler("removecard",[card,homepage.state]))}else card.remove(),homepage.refresh(!1),homepage.element.triggerHandler("removecard",[card,homepage.state])}))}})),cards.on("mouseenter.card",(function(){var card=$(this),eastHandle=$("<div>").addClass("ui-resizable-handle ui-resizable-e").drag({axis:"x"}).on("dragstart.handle",(function(dragevent){dragevent.preventDefault(),card.addClass("ui-resize-passive"),card.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",(function(mouseevent){var width=mouseevent.clientX-card.offset().left;width<homepage.settings.widgetWidth/2?eastHandle.css({left:homepage.settings.widgetWidth/2}):card.width(width)})).on("mouseup.handle",(function(){card.removeClass("ui-resize-passive"),card.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),card.removeClass("double-width triple-width quad-width");var widthUnits=card.width()/homepage.settings.widgetWidth;widthUnits>3.5?card.addClass("quad-width"):widthUnits>2.5?card.addClass("triple-width"):widthUnits>1.5&&card.addClass("double-width"),$(".ui-resizable-handle").remove(),card.css({opacity:1,width:""}),homepage.refresh(!1),homepage.element.triggerHandler("resizecard",[card,homepage.state])}))})),southHandle=$("<div>").addClass("ui-resizable-handle ui-resizable-s").drag({axis:"y"}).on("dragstart.handle",(function(dragevent){dragevent.preventDefault(),card.addClass("ui-resize-passive"),card.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",(function(mouseevent){var height=mouseevent.clientY-card.offset().top;height<homepage.settings.widgetHeight?southHandle.css({top:homepage.settings.widgetHeight}):card.height(height)})).on("mouseup.handle",(function(){card.removeClass("ui-resize-passive"),card.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),card.removeClass("double-height"),card.height()/homepage.settings.widgetHeight>1.5&&card.addClass("double-height"),$(".ui-resizable-handle").remove(),card.css({opacity:1,height:""}),homepage.refresh(!1),homepage.element.triggerHandler("resizecard",[card,homepage.state])}))}));0===card.has(".ui-resizable-handle").length&&card.append(eastHandle,southHandle),card.css({border:"1px solid #078cd9"})})).on("mouseleave.card",(function(){var card=$(this);card.hasClass("ui-resize-passive")||$(".ui-resizable-handle").remove(),card.css({border:"1px solid #bdbdbd"})})).on("dragstart.card",(function(){$(this).addClass("is-dragging")})).on("dragover.card",(function(event){event.preventDefault()})).on("dragenter.card",(function(event){event.preventDefault();var card=$(this),draggingCard=$(".is-dragging");card.is(draggingCard)&&0===$(".drop-indicator").length||(draggingCard.index()<card.index()?(homepage.guide.css("right","-14px"),homepage.guide.css("left","")):(homepage.guide.css("left","-14px"),homepage.guide.css("right","")),card.append(homepage.guide),homepage.refresh(!1))})).on("dragend.card",(function(){var card=$(this),cardOver=$(cards).has(".drop-indicator");card.index()<cardOver.index()?card.insertAfter(cardOver):card.insertBefore(cardOver),card.removeClass("is-dragging"),homepage.guide.remove(),homepage.refresh(!1),homepage.element.triggerHandler("reordercard",[card,homepage.state])}))):(cards.attr("draggable",!1),cards.css("cursor","auto"),cards.children(".card-remove").remove(),cards.off("mouseenter.card mouseleave.card dragstart.card dragenter.card dragend.card"))},setEdit:function setEdit(edit){void 0!==edit&&(this.editing=edit,this.initEdit(),this.refresh(!1))},getAvailability:function getAvailability(block){for(var abort=!1,smallest={},rows=this.rowsAndCols.length,i=0,l=rows;i<l&&!abort;i++)for(var j=0,innerCheck=!0,cols=this.rowsAndCols[i].length;j<cols&&!abort;j++)if(this.rowsAndCols[i][j]&&block.w+j<=cols){if(block.w>1&&cols>j+1)for(var n=0;n<block.w;n++)if(!this.rowsAndCols[i][j+n]){innerCheck=!1;break}if(block.h>1&&rows>i+1)for(var _n=0;_n<block.h;_n++)if(!this.rowsAndCols[i+_n][j]){innerCheck=!1;break}innerCheck&&(smallest.row=i,smallest.col=j,abort=!0)}return Object.getOwnPropertyNames(smallest).length||(this.initColumns(rows),smallest.row=rows,smallest.col=0),smallest},fitBlock:function fitBlock(r,c,block){var addRow=!0;if(block.x=c,block.y=r,1===block.w&&1===block.h)this.rowsAndCols[r][c]=!1;else if(1!==block.w)for(var i=r,l=block.h+r;i<l;i++)for(var j=c,l2=block.w+c;j<l2;j++)this.rowsAndCols[i]||this.initColumns(i),this.rowsAndCols[i][j]=!1;else for(var _i=r,_l=block.h+r;_i<_l;_i++)for(var _j=c,_l2=block.h+c;_j<_l2;_j++)this.rowsAndCols[_i]||this.initColumns(_i),this.rowsAndCols[_i][c]=!1;for(var _i2=0,_l3=this.rowsAndCols[r].length;_i2<_l3;_i2++)this.rowsAndCols[r][_i2]&&(addRow=!1);addRow&&(this.rowsAndCols[r+1]||this.initColumns(r+1))},setBlocks:function setBlocks(){var cards=this.element.find(".card, .widget");this.blocks=[];for(var i=0,l=cards.length;i<l;i++){var card=$(cards[i]),h=card.hasClass("double-height")?2:1,w=void 0;w=card.hasClass("quad-width")?4:card.hasClass("triple-width")?3:card.hasClass("double-width")?2:1,this.blocks.push({w:w,h:h,elem:card,text:card.text()})}if(this.settings.columns>1)for(var _i3=0,j=0,_w=0,_l4=this.blocks.length;_i3<_l4;_i3++)this.blocks[_i3].w>=this.settings.columns&&_i3&&_w&&_w<=this.settings.columns/2&&this.arrayIndexMove(this.blocks,_i3,j),(_w+=this.blocks[_i3].w)>=this.settings.columns&&(_w=0,j=this.blocks[j].w>=this.settings.columns?j+1:_i3)},arrayIndexMove:function arrayIndexMove(arr,from,to){arr.splice(to,0,arr.splice(from,1)[0])},resize:function resize(self,animate){var bpXL=4*self.settings.widgetWidth+3*self.settings.gutterSize,bpDesktop=3*self.settings.widgetWidth+2*self.settings.gutterSize,bpTablet=2*self.settings.widgetWidth+self.settings.gutterSize,bpPhone=self.settings.widgetWidth,bp=bpXL,elemWidth=self.element.outerWidth(),xl=elemWidth>=bpXL,desktop=elemWidth>=bpDesktop&&elemWidth<=bpXL,tablet=elemWidth>=bpTablet&&elemWidth<=bpDesktop,phone=elemWidth<=bpTablet,maxAttr=this.element.attr("data-columns"),content=self.element.find("> .content");this.settings.columns=parseInt(maxAttr||this.settings.columns,10),xl&&4===self.settings.columns&&(self.settings.columns=4,bp=bpXL),(desktop||xl&&3===self.settings.columns)&&(self.settings.columns=3,bp=bpDesktop),tablet&&(self.settings.columns=2,bp=bpTablet),phone&&(self.settings.columns=1,bp=bpPhone),content.length&&(content[0].style.marginLeft="-".concat(bp/2,"px")),this.setBlocks(),this.initRowsAndCols();for(var i=0,l=self.blocks.length;i<l;i++){var block=self.blocks[i];block.elem.removeClass("to-single to-double to-triple"),block.w>self.settings.columns&&(block.w=self.settings.columns,1===self.settings.columns?block.elem.addClass("to-single"):2===self.settings.columns?block.elem.addClass("to-double"):3===self.settings.columns&&block.elem.addClass("to-triple"));var available=self.getAvailability(block),box=self.settings.widgetWidth+self.settings.gutterSize,totalWidth=box*self.settings.columns,pos={left:Locale.isRTL()?totalWidth-(box*block.w+box*available.col):box*available.col,top:(self.settings.widgetHeight+self.settings.gutterSize)*available.row};if(animate&&!this.editing){var easing=self.settings.easing;"blockslide"===easing?self.isTransitionsSupports?(self.applyCubicBezier(block.elem,[.09,.11,.24,.91]),block.elem[0].style.left="".concat(pos.left,"px"),block.elem[0].style.top="".concat(pos.top,"px")):block.elem.animate(pos,self.settings.timeout):block.elem.animate(pos,self.settings.timeout,easing)}else self.isTransitionsSupports&&self.applyCubicBezier(block.elem,null),block.elem[0].style.left="".concat(pos.left,"px"),block.elem[0].style.top="".concat(pos.top,"px");self.fitBlock(available.row,available.col,block)}self.element.triggerHandler("resize",[self.settings.columns,self.state])},applyCubicBezier:function applyCubicBezier(el,cubicBezier){var value=cubicBezier?"all .3s cubic-bezier(".concat(cubicBezier,")"):"none";el[0].style["-webkit-transition"]=value,el[0].style["-moz-transition"]=value,el[0].style["-ms-transition"]=value,el[0].style["-o-transition"]=value,el[0].style.transition=value},supportsTransitions:function supportsTransitions(){var s=document.createElement("p").style,p="transition";if("string"==typeof s[p])return!0;var v=["Moz","webkit","Webkit","Khtml","O","ms"];p=p.charAt(0).toUpperCase()+p.substr(1);for(var i=0,l=v.length;i<l;i++)if("string"==typeof s[v[i]+p])return!0;return!1},refresh:function refresh(animate){animate=void 0!==animate?animate:this.settings.animate,this.resize(this,animate)},detachEvents:function detachEvents(){$("body").off("resize.homepage"),$(".application-menu").off("applicationmenuopen.homepage applicationmenuclose.homepage")},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,HOMEPAGE_DEFAULTS)),this.detachEvents().init()},destroy:function destroy(){this.detachEvents(),$.removeData(this.element[0],"homepage")},handleEvents:function handleEvents(){var _this2=this;$("body").on("resize.homepage",(function(){_this2.resize(_this2,_this2.settings.animate)})),$(".application-menu").on("applicationmenuopen.homepage applicationmenuclose.homepage",(function(){_this2.resize(_this2,_this2.settings.animate)}))}},$.fn.homepage=function(settings){return this.each((function(){var instance=$.data(this,"homepage");instance?instance.updated(settings):instance=$.data(this,"homepage",new Homepage(this,settings))}))};var FOCUSABLE_SELECTOR=[".pager-first > .btn-icon",".pager-prev > .btn-icon",".pager-next > .btn-icon",".pager-last > .btn-icon",".pager-no > .btn-icon",".pager-count input",".pager-pagesize button"].join(", "),PAGER_DEFAULTS={componentAPI:void 0,type:"list",position:"bottom",activePage:1,hideOnOnePage:!1,source:null,pagesize:15,pagesizes:[15,25,50,75],showPageSizeSelector:!0,smallPageSizeSelector:!1,pageSizeSelectorText:"RecordsPerPage",onPageSizeChange:null,showFirstButton:!0,enableFirstButton:!0,showPreviousButton:!0,enablePreviousButton:!0,showNextButton:!0,enableNextButton:!0,showLastButton:!0,enableLastButton:!0,indeterminate:!1,onFirstPage:null,onPreviousPage:null,onNextPage:null,onLastPage:null,firstPageTooltip:"FirstPage",previousPageTooltip:"PreviousPage",nextPageTooltip:"NextPage",lastPageTooltip:"LastPage",pageSizeMenuSettings:{attachToBody:!1}};function Pager(element,settings){this.settings=utils.mergeSettings(element,settings,PAGER_DEFAULTS),this.settings.dataset=settings.dataset,this.element=$(element),this.init()}Pager.prototype={get state(){var filteredPages,filteredTotal,grandTotal,total=0,pages=1,indeterminate=this.settings.indeterminate,pagesize=this.settings.pagesize,type=this.previousOperation,trigger=this.previousTrigger,ds=this.settings.dataset;if(isNaN(this.serverDatasetTotal)){if(ds&&ds.length){if(total=ds.length,this.isFilteredClientside)total=ds.filter((function(i){return!i._isFilteredOut})).length}}else total=this.serverDatasetTotal;return this.grandTotal&&(grandTotal=this.grandTotal),pages=indeterminate?999999999:total<1?1:Math.ceil(total/pagesize),isNaN(this.filteredTotal)||(filteredTotal=this.filteredTotal,indeterminate?pages=999999999:filteredPages=filteredTotal<1?1:Math.ceil(filteredTotal/pagesize)),{activePage:this.activePage,indeterminate:this.settings.indeterminate,grandTotal:grandTotal,pagesize:pagesize,pages:pages,trigger:trigger,total:total,type:type,filteredActivePage:this.filteredActivePage,filteredTotal:filteredTotal,filteredPages:filteredPages}},get pagingInfo(){return warnAboutDeprecation("state","pagingInfo"),this.state},get focusableElements(){return utils.getArrayFromList(this.pagerBar[0].querySelectorAll(FOCUSABLE_SELECTOR))},get numberButtons(){if(!this.isTable){var buttons=this.pagerBar[0].querySelectorAll("li:not(.pager-prev):not(.pager-next):not(.pager-first):not(.pager-last):not(.pager-pagesize)");return utils.getArrayFromList(buttons)}},get pageSelectorInput(){if(!this.isListView)return this.pagerBar[0].querySelector(".pager-count input")},get pageSizeSelectorButton(){if(this.settings.showPageSizeSelector)return this.pagerBar[0].querySelector(".pager-pagesize button")},get showSmallPageSizeSelector(){return!!this.settings.showPageSizeSelector&&(!0===this.settings.smallPageSizeSelector||this.isListView&&this.element.parents(".list-detail").length)},init:function init(){this.setup(),this.createPagerBar(),this.setActivePage(this.settings.activePage,!0),this.handleEvents()},setup:function setup(){if(this.element.attr("data-pagesize")){var pagesize=Number(this.element.attr("data-pagesize"));isNaN(pagesize)||(this.settings.pagesize=pagesize),this.element.removeAttr("data-pagesize")}if(-1===this.settings.pagesizes.indexOf(this.settings.pagesize)){this.settings.pagesizes.push(this.settings.pagesize),this.settings.pagesizes=this.settings.pagesizes.sort((function sortNumber(a,b){return a-b}))}this.handleDeprecatedSettings();var widgetContainer=this.element.parents(".card, .widget");return this.element.is("tbody")&&(this.isTable=!0,this.settings.type="table",this.mainContainer=this.element.closest(".datagrid-container"),this.settings.componentAPI||(this.settings.componentAPI=this.mainContainer.data("datagrid")),widgetContainer.length&&widgetContainer[0].classList.add("has-datagrid")),this.element.is(".listview")&&(this.isTable=!1,this.isListView=!0,this.mainContainer=this.element,this.settings.componentAPI||(this.settings.componentAPI=this.element.data("listview"))),this},createPagerBar:function createPagerBar(){if(!this.pagerBar&&(this.pagerBar=this.element.prev(".pager-toolbar"),0===this.pagerBar.length&&(this.pagerBar=$('<ul class="pager-toolbar"></ul>')),"standalone"===this.settings.type?(this.pagerBar.addClass("is-standalone"),this.isListView?this.mainContainer.after(this.pagerBar):this.element.append(this.pagerBar)):this.isTable?this.mainContainer.after(this.pagerBar):"bottom"===this.settings.position?this.element.after(this.pagerBar):this.element.before(this.pagerBar),this.isListView&&this.pagerBar.addClass("is-listview"),this.element.closest(".card, .widget").length)){var self=this;["widget","card"].forEach((function(type){var widgetContent=self.element.closest(".".concat(type,"-content"));if(widgetContent.length){var widgetFooter=widgetContent.next(".".concat(type,"-footer"));widgetFooter.length||(widgetFooter=$('<div class="'.concat(type,'-footer"></div>')).insertAfter(widgetContent)),self.pagerBar.appendTo(widgetFooter)}}))}},handleDeprecatedSettings:function handleDeprecatedSettings(){void 0!==this.settings.attachPageSizeMenuToBody&&(warnAboutDeprecation("pageSizeMenuSettings.attachToBody (setting)","attachPageSizeMenuToBody (setting)"),this.settings.pageSizeMenuSettings.attachToBody=this.settings.attachPageSizeMenuToBody,delete this.settings.attachPageSizeMenuToBody)},handleEvents:function handleEvents(){var self=this;this.pagerBar.on("click.pager",".btn-icon",(function(e){var btn=e.currentTarget,li=btn.parentNode;if(e.preventDefault(),$(this).attr("disabled"))return!1;var state=self.state,currentPage=state.activePage;if(state.filteredTotal&&(currentPage=state.filteredActivePage),DOM.hasClass(li,"pager-prev"))return self.setActivePage(currentPage-1,!1,"prev"),self.triggerPagingEvents(currentPage),!1;if(DOM.hasClass(li,"pager-next"))return self.setActivePage((-1===currentPage?1:currentPage)+1,!1,"next"),self.triggerPagingEvents(currentPage),!1;if(DOM.hasClass(li,"pager-first"))return self.setActivePage(1,!1,"first"),self.triggerPagingEvents(currentPage),!1;if(DOM.hasClass(li,"pager-last"))return self.setActivePage(self.pageCount(),!1,"last"),self.triggerPagingEvents(currentPage),!1;var activePageIdx=Number(btn.getAttribute("data-page"));return(isNaN(activePageIdx)||activePageIdx<1)&&(activePageIdx=1),self.setActivePage(activePageIdx,!1,"page"),self.triggerPagingEvents(currentPage),!1})),self.pagerBar.on("keydown.pager",$(self.focusableElements),(function(event){var key=(event=event||window.event).which||event.keyCode||event.charCode||!1,isLeft=37===key||40===key,isRight=39===key||38===key,elem=event.target;if("INPUT"===elem.nodeName&&(isLeft=40===key,isRight=38===key),!isLeft&&!isRight)return!0;var parent="INPUT"===elem.nodeName?elem.parentNode.parentNode:elem.parentNode,next=parent.nextSibling,prev=parent.previousSibling,isFirst=null===prev,isLast=null===next;if(event.preventDefault(),isLeft&&!isFirst){var link=prev.querySelector("button, input");return link.removeAttribute("tabindex"),elem.setAttribute("tabindex","-1"),link.focus(),!1}if(isLeft&&isFirst){var _link=parent.parentNode.lastChild.querySelector("button, input");return _link.removeAttribute("tabindex"),elem.setAttribute("tabindex","-1"),_link.focus(),!1}if(isRight&&!isLast){var _link2=next.querySelector("button, input");return _link2.removeAttribute("tabindex"),elem.setAttribute("tabindex","-1"),_link2.focus(),!1}if(isRight&&isLast){var _link3=parent.parentNode.firstChild.querySelector("button, input");_link3.removeAttribute("tabindex"),elem.setAttribute("tabindex","-1"),_link3.focus()}return!1}))},reset:function reset(operation,trigger){this.activePage=this.settings.activePage,this.previousOperation=operation,this.previousTrigger=trigger,this.teardown(),this.init()},showPageSizeSelector:function showPageSizeSelector(toggleOption){toggleOption="true"==="".concat(toggleOption).toLowerCase(),this.settings.showPageSizeSelector=toggleOption,toggleOption&&(this.isShowPageSizeSelectorCall=toggleOption)},showButton:function showButton(type,toggleOption){if(-1!==["first","last","next","previous"].indexOf(type)){var selector=".pager-".concat(type," .btn-icon");"previous"===type&&(selector=".pager-prev .btn-icon");var btn=this.pagerBar[0].querySelector(selector);toggleOption="true"==="".concat(toggleOption).toLowerCase(),this.settings["show".concat(stringUtils.capitalize(type),"Button")]=toggleOption,btn&&(toggleOption?btn.parentNode.classList.remove("hidden"):btn.parentNode.classList.add("hidden"))}},enableButton:function enableButton(type,toggleOption){if(-1!==["first","last","next","previous"].indexOf(type)){var selector=".pager-".concat(type," .btn-icon");"previous"===type&&(selector=".pager-prev .btn-icon");var btn=this.pagerBar[0].querySelector(selector);toggleOption="true"==="".concat(toggleOption).toLowerCase(),this.settings["enable".concat(stringUtils.capitalize(type),"Button")]=toggleOption,btn&&(toggleOption?(btn.disabled=!1,btn.parentNode.classList.remove("is-disabled"),$(btn).removeAttr("disabled")):(btn.disabled=!0,btn.parentNode.classList.add("is-disabled"),$(btn).attr("disabled","disabled")))}},setActivePage:function setActivePage(pagingInfo,force,op){var useFiltering="number"==typeof pagingInfo.searchActivePage||"number"==typeof pagingInfo.filteredActivePage||"number"==typeof this.filteredActivePage,pageNum=this.filteredActivePage||this.activePage||this.settings.activePage;return"object"===_typeof(pagingInfo)?pageNum=useFiltering?pagingInfo.filteredActivePage||pagingInfo.searchActivePage:pagingInfo.activePage?pagingInfo.activePage:1:isNaN(pagingInfo)||(pageNum=pagingInfo),useFiltering?this.filteredActivePage=pageNum:this.activePage=pageNum,this.previousOperation=op,this.render(),void 0===pageNum||0===pageNum||isNaN(pageNum)||pageNum===this.activePage&&!force?this.activePage:(this.settings.componentAPI&&this.settings.componentAPI.saveUserSettings&&this.settings.componentAPI.saveUserSettings(),pageNum)},adjustPageCount:function adjustPageCount(pageNum){var state=this.state,useFiltering="number"==typeof state.filteredActivePage||"number"==typeof this.filteredActivePage,totalPages=state.pages;return useFiltering&&state.filteredPages&&(totalPages=state.filteredPages),(pageNum<1||pageNum>totalPages)&&(pageNum=this.filteredActivePage||this.activePage),pageNum},pageCount:function pageCount(pages){var isShowPageSizeSelectorCall=this.isShowPageSizeSelectorCall;return delete this.isShowPageSizeSelectorCall,void 0===pages&&this.settings.indeterminate&&(this._pageCount=this.settings.pagesize),void 0!==pages||this.settings.source||isShowPageSizeSelectorCall?(void 0!==pages&&(this._pageCount=pages),this._pageCount=this._pageCount||1,this.settings.indeterminate?999999999:this._pageCount):this._pageCount},renderButtons:function renderButtons(){var activePage=this.activePage,totalPages=this.state.pages,buttonHTML="",doRenderFirstButton=!1,doRenderPreviousButton=!1,doRenderNextButton=!1,doRenderLastButton=!1,disableFirstButton=!this.settings.enableFirstButton,disablePreviousButton=!this.settings.enablePreviousButton,disableNextButton=!this.settings.enableNextButton,disableLastButton=!this.settings.enableLastButton,disableFirstIndeterminate=this.settings.indeterminate&&!0===this.firstPage,disableLastIndeterminate=this.settings.indeterminate&&!0===this.lastPage,hasDataset=this.settings.dataset&&this.settings.dataset.length;this.state.filteredPages&&(activePage=this.state.filteredActivePage,totalPages=this.state.filteredPages),this.settings.showFirstButton&&((disableFirstIndeterminate||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===activePage)&&(disableFirstButton=!0),doRenderFirstButton=!0),this.settings.showPreviousButton&&((disableFirstIndeterminate||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===activePage)&&(disablePreviousButton=!0),doRenderPreviousButton=!0),this.settings.showNextButton&&((disableLastIndeterminate||!this.settings.indeterminate&&"standalone"!==this.settings.type&&activePage===totalPages)&&(disableNextButton=!0),doRenderNextButton=!0),this.settings.showLastButton&&((disableLastIndeterminate||!this.settings.indeterminate&&"standalone"!==this.settings.type&&activePage===totalPages)&&(disableLastButton=!0),doRenderLastButton=!0);var buttonsToRender=[],pageSizeButtonSize=this.settings.showPageSizeSelector?190:0,availableButtonWidth=(this.pagerBar.width()-pageSizeButtonSize)/40,maxNumberButtons=Math.floor(availableButtonWidth);if((doRenderPreviousButton||doRenderNextButton)&&(maxNumberButtons-=1),(doRenderLastButton||doRenderFirstButton)&&(maxNumberButtons-=1),!this.isTable&&"standalone"!==this.settings.type&&hasDataset&&maxNumberButtons>=totalPages&&(disableFirstButton=!0,disableLastButton=!0),!this.settings.indeterminate){for(var maxDistanceFromCenter=Math.floor(maxNumberButtons/2),startIndex=activePage-maxDistanceFromCenter,endIndex=activePage+maxDistanceFromCenter;startIndex<1;)++startIndex,endIndex<totalPages&&++endIndex;for(;endIndex>totalPages;)startIndex>1&&--startIndex,--endIndex;for(var i=startIndex;i<endIndex+1;i++)buttonsToRender.push(i)}function renderButton(){var visibleContent=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",audibleContent=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",tooltipContent=arguments.length>2?arguments[2]:void 0,targetPageNum=arguments.length>3?arguments[3]:void 0,classAttr=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",selected=arguments.length>5&&void 0!==arguments[5]&&arguments[5],disabled=arguments.length>6&&void 0!==arguments[6]&&arguments[6],hidden=arguments.length>7&&void 0!==arguments[7]&&arguments[7],isAriaDisabled="",isControlDisabled="",isDisabledTooltip="",titleAttr="",pageAttr="";targetPageNum&&(pageAttr=' data-page="'.concat(targetPageNum,'"')),tooltipContent&&(titleAttr=' title="'.concat(tooltipContent,'"')),hidden&&(classAttr+=" hidden"),selected&&(classAttr+=" selected",isAriaDisabled=' aria-disabled="true"'),disabled&&(isControlDisabled=" disabled",isAriaDisabled=' aria-disabled="true"',isDisabledTooltip='<div class="disabled-tooltip"'.concat(titleAttr,"></div>"),targetPageNum||(titleAttr=""));var html='<li class="'.concat(classAttr,'">\n        <button type="button" class="btn-icon"').concat(titleAttr).concat(pageAttr).concat(isAriaDisabled).concat(isControlDisabled,">\n          ").concat(isDisabledTooltip,"<span>").concat(audibleContent,"</span>\n          ").concat(visibleContent,"\n        </button>\n      </li>");return html}if($(this.numberButtons).remove(),doRenderFirstButton&&(buttonHTML+=renderButton($.createIcon({icon:"first-page"}),Locale.translate("FirstPage"),this.settings.firstPageTooltip,null,"pager-first",!1,disableFirstButton,!1)),doRenderPreviousButton&&(buttonHTML+=renderButton($.createIcon({icon:"previous-page"}),Locale.translate("PreviousPage"),this.settings.previousPageTooltip,null,"pager-prev",!1,disablePreviousButton,!1)),!this.isTable&&hasDataset){var numberButtonHTML="";buttonsToRender.forEach((function(i){numberButtonHTML+=i===(activePage||1)?renderButton(i,Locale.translate("PageOn"),null,i,"pager-no",!0,!1,!1):renderButton(i,Locale.translate("Page"),null,i,"pager-no",!1,!1,!1)})),buttonHTML+=numberButtonHTML}doRenderNextButton&&(buttonHTML+=renderButton($.createIcon({icon:"next-page"}),Locale.translate("NextPage"),this.settings.nextPageTooltip,null,"pager-next",!1,disableNextButton,!1)),doRenderLastButton&&(buttonHTML+=renderButton($.createIcon({icon:"last-page"}),Locale.translate("LastPage"),this.settings.lastPageTooltip,null,"pager-last",!1,disableLastButton,!1)),this.pagerBar[0].innerHTML=buttonHTML,doRenderLastButton||doRenderFirstButton||this.settings.showPageSizeSelector?this.pagerBar[0].classList.remove("two-button"):this.pagerBar[0].classList.add("two-button"),this.pagerBar.children("li").find("> .btn-icon").button().tooltip(),this.pagerBar.children("li").find("> .btn-icon[disabled] .disabled-tooltip").tooltip()},renderPageSelectorInput:function renderPageSelectorInput(){if(this.isTable&&!this.settings.indeterminate){var activePage=this.activePage,totalPages=this.state.pages||1;if(this.state.filteredPages&&(activePage=this.state.filteredActivePage,totalPages=this.state.filteredPages),this.pageSelectorInput)totalPages>1&&this.pagerBar.find(".pager-total-pages").text(totalPages),this.pagerBar.find(".pager-count input").val(activePage);else{var text=Locale.translate("PageOf");text=(text=text.replace("{0}",'<input class="new-mask" name="pager-pageno" value="'.concat(activePage,'" autocomplete="off">'))).replace("{1}",'<span class="pager-total-pages">'.concat(totalPages,"</span>")),$('<li class="pager-count"><label>'.concat(text," </label>")).insertAfter(this.pagerBar.find(".pager-prev"))}var lastValue=null,pattern="".concat(totalPages).replace(/\d/g,"#"),self=this,maskSettings={pattern:pattern,mode:"number",processOnInitialize:!1};$(this.pageSelectorInput).mask(maskSettings).on("focus",(function(){lastValue=parseInt($(this).val(),10)})).on("blur",(function(){update($(this)),lastValue=null})).on("keydown",(function(e){return 13!==e.which||(update($(this)),e.stopPropagation(),e.preventDefault(),!1)}))}function update(elem){var newValue=self.adjustPageCount(parseInt(elem.val(),10));if(lastValue!==newValue){var currentPage=self.activePage;self.state.filteredPages&&(currentPage=self.state.filteredActivePage),elem.val(self.setActivePage(newValue,!1,"page")),self.triggerPagingEvents(currentPage)}else elem.val(lastValue)}},renderPageSizeSelectorButton:function renderPageSizeSelectorButton(){var _this=this;if(this.settings.showPageSizeSelector&&!(this.settings.pagesizes.length<2)){if(!this.pageSizeSelectorButton){var pageSizeLi=$('<li class="pager-pagesize"></li>'),dropdownIcon=$.createIcon({icon:"dropdown"}),translatedText=Locale.translate(this.settings.pageSizeSelectorText).replace("{0}",this.settings.pagesize),isAudible="",recordHtml="<span>".concat(translatedText,"</span>");this.showSmallPageSizeSelector&&(isAudible=' class="audible"',translatedText=Locale.translate(this.settings.pageSizeSelectorText).replace("{0}",""),recordHtml='<span class="record-count">'.concat(this.settings.pagesize,"</span>\n        <span").concat(isAudible,">").concat(translatedText,"</span>"));var pageSizeButton=$('<button type="button" class="btn-menu">\n        '.concat(recordHtml,"\n        ").concat(dropdownIcon,"\n      </button>")).appendTo(pageSizeLi);pageSizeLi.appendTo(this.pagerBar);var menuItems="";this.showSmallPageSizeSelector&&(menuItems='<li class="heading">'.concat(translatedText,"</li>"));for(var k=0;k<this.settings.pagesizes.length;k++){var size=this.settings.pagesizes[k];menuItems+='<li class="'.concat(size===this.settings.pagesize?" is-checked":"",'"><a href="#">').concat(size,"</a></li>")}var menu=$('<ul class="popupmenu is-selectable">'.concat(menuItems,"</ul>"));pageSizeButton.after(menu)}var $pageSizeSelectorButton=$(this.pageSizeSelectorButton),popupOpts=utils.extend({},{placementOpts:{parent:$pageSizeSelectorButton,parentXAlignment:Locale.isRTL()?"left":"right",strategies:["flip"]}},this.settings.pageSizeMenuSettings);$pageSizeSelectorButton.popupmenu(popupOpts),$pageSizeSelectorButton.on("selected.pager",(function(e,args){_this.changePageSize(args)}))}},render:function render(){var state=this.state,totalPages=state.pages;state.filteredPages&&(totalPages=state.filteredPages),this.pageCount(totalPages),this.pageSizeSelectorButton&&this.teardownPageSizeSelector(),this.renderButtons(),this.renderPageSelectorInput(),this.renderPageSizeSelectorButton(),this.renderBar()},renderBar:function renderBar(pagingInfo){var activePage=(pagingInfo=pagingInfo?utils.extend({},this.state,pagingInfo):this.state).activePage;pagingInfo.filteredActivePage&&(activePage=pagingInfo.filteredActivePage),this.settings.showFirstButton||this.showButton("first",!1),this.settings.enableFirstButton||this.enableButton("first",!1),this.settings.showPreviousButton||this.showButton("previous",!1),this.settings.enablePreviousButton||this.enableButton("previous",!1),this.settings.showNextButton||this.showButton("next",!1),this.settings.enableNextButton||this.enableButton("next",!1),this.settings.showLastButton||this.showButton("last",!1),this.settings.enableLastButton||this.enableButton("last",!1),this.settings.showPageSizeSelector&&this.showPageSizeSelector(!0),void 0!==pagingInfo.firstPage&&(!1===pagingInfo.firstPage&&(this.enableButton("first",!0),this.enableButton("previous",!0)),!0!==pagingInfo.firstPage&&1!==activePage||(this.enableButton("first",!1),this.enableButton("previous",!1))),void 0!==pagingInfo.lastPage&&(!1===pagingInfo.lastPage&&(this.enableButton("next",!0),this.enableButton("last",!0)),!0!==pagingInfo.lastPage&&activePage!==this.pageCount()||(this.enableButton("next",!1),this.enableButton("last",!1)));var classList=this.pagerBar[0]?this.pagerBar[0].classList:null;this.hidePagerBar(pagingInfo)&&classList?classList.add("hidden"):this.settings.hideOnOnePage&&classList&&classList.contains("hidden")&&classList.remove("hidden"),this.initTabIndexes()},initTabIndexes:function initTabIndexes(){var tabbables=$(this.focusableElements);tabbables.attr("tabindex","-1"),tabbables.filter(":not([disabled])").first().removeAttr("tabindex")},triggerPagingEvents:function triggerPagingEvents(previousActivePage){var state=this.state;previousActivePage||(previousActivePage=this.state.activePage),"first"===state.type&&(this.settings.onFirstPage&&this.settings.onFirstPage(this,state),this.element.trigger("firstpage",state)),"prev"===state.type&&(this.settings.onPreviousPage&&this.settings.onPreviousPage(this,state),this.element.trigger("previouspage",state)),"next"===state.type&&(this.settings.onNextPage&&this.settings.onNextPage(this,state),this.element.trigger("nextpage",state)),"last"===state.type&&(this.settings.onLastPage&&this.settings.onLastPage(this,state),this.element.trigger("lastpage",state)),"pageinfo"!==state.type&&this.element.trigger("page",state)},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),Array.isArray(settings.pagesizes)&&settings.pagesizes.length&&(this.settings.pagesizes=settings.pagesizes);var pagingInfo={activePage:this.settings.activePage,indeterminate:this.settings.indeterminate,pagesize:this.settings.pagesize};return this.handleDeprecatedSettings(),this.updatePagingInfo(pagingInfo),this},changePageSize:function changePageSize(anchor){var tag=anchor;tag.closest(".popupmenu").find(".is-checked").removeClass("is-checked"),tag.parent("li").addClass("is-checked"),this.settings.pagesize=parseInt(tag.text(),10),this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=this.settings.pagesize),this.setActivePage(1,!0,"first"),this.settings.onPageSizeChange&&this.settings.onPageSizeChange(this,{tag:anchor,pagesize:this.settings.pagesize,settings:this.settings}),this.element.trigger("pagesizechange",{tag:anchor,pagesize:this.settings.pagesize,settings:this.settings})},updatePagingInfo:function updatePagingInfo(pagingInfo,isResponse){if(pagingInfo){if(pagingInfo.pagesize&&(this.settings.pagesize=pagingInfo.pagesize,this.isTable&&this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=pagingInfo.pagesize)),pagingInfo.isFilteredClientside?(this.isFilteredClientside=!0,delete this.serverDatasetTotal):this.isFilteredClientside&&delete this.isFilteredClientside,delete this.firstPage,delete this.lastPage,void 0!==pagingInfo.firstPage&&(this.firstPage=pagingInfo.firstPage,this.settings.enableFirstButton=!pagingInfo.firstPage,this.settings.enablePreviousButton=!pagingInfo.firstPage),void 0!==pagingInfo.lastPage&&(this.lastPage=pagingInfo.lastPage,this.settings.enableNextButton=!pagingInfo.lastPage,this.settings.enableLastButton=!pagingInfo.lastPage),isNaN(pagingInfo.grandTotal)||(this.grandTotal=pagingInfo.grandTotal),this.isFilteredClientside||(this.serverDatasetTotal=pagingInfo.total),isNaN(pagingInfo.filteredTotal)?(this.filteredTotal||this.filteredActivePage)&&(delete this.filteredTotal,delete this.filteredActivePage):(this.filteredTotal=pagingInfo.filteredTotal,this.filteredActivePage=pagingInfo.searchActivePage||pagingInfo.filteredActivePage||1),pagingInfo.type||(pagingInfo.type="pageinfo"),this.settings.source||this.settings.dataset)return this.setActivePage(pagingInfo,!1,pagingInfo.type),void("initial"===pagingInfo.type||isResponse||this.triggerPagingEvents());this.teardown(),this.render(),this.handleEvents()}},hidePagerBar:function hidePagerBar(pagingInfo){return!!(this.settings.hideOnOnePage&&pagingInfo.total<=pagingInfo.pagesize)||!(!pagingInfo||!0!==pagingInfo.firstPage||!0!==pagingInfo.lastPage||!pagingInfo.hideDisabledPagers)},teardown:function teardown(){this.numberButtons&&this.numberButtons.forEach((function(li){var btn=li.querySelector(".btn-icon"),buttonAPI=$(btn).data("button"),tooltipAPI=$(btn).data("tooltip");buttonAPI&&buttonAPI.destroy(),tooltipAPI&&tooltipAPI.destroy()})),this.pagerBar.off(["click.".concat("pager"),"keydown.".concat("pager")].join(" ")),this.pageSelectorInput&&($(this.pageSelectorInput).off(["focus.".concat("pager"),"blur.".concat("pager"),"keydown.".concat("pager")].join(" ")),$(this.pageSelectorInput).data("mask").destroy()),this.pageSizeSelectorButton&&($(this.pageSizeSelectorButton).off("selected.".concat("pager")),this.teardownPageSizeSelector()),this.pagerBar[0].innerHTML="",delete this.firstPage,delete this.lastPage},teardownPageSizeSelector:function teardownPageSizeSelector(){var api=$(this.pageSizeSelectorButton).data("popupmenu");if(api&&api.menu){var pageSizeSelectorMenu=api.menu;api.destroy(),pageSizeSelectorMenu.remove()}},destroy:function destroy(){this.teardown(),this.pagerBar&&this.pagerBar.remove(),$.removeData(this.element[0],"pager")}},$.fn.pager=function(settings){return this.each((function(){var instance=$.data(this,"pager");instance?instance.updated(settings):instance=$.data(this,"pager",new Pager(this,settings))}))};var LISTVIEW_DEFAULTS={dataset:[],template:null,description:null,paging:!1,pagesize:10,searchable:!1,highlight:!0,selectable:"single",selectOnFocus:!0,showCheckboxes:!0,hoverable:!0,emptyMessage:null,source:null,forceToRenderOnEmptyDs:!1,disableItemDeactivation:!1,showPageSizeSelector:!1,listFilterSettings:null,pagerSettings:{showFirstButton:!1,showLastButton:!1},searchTermMinSize:1,initializeContents:!1};function ListView(element,settings){return this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,LISTVIEW_DEFAULTS),this.init(),this}ListView.prototype={get pagerAPI(){return this.element.data("pager")},get pagerSettings(){var pagerSettings={};this.settings.pagerSettings&&(pagerSettings=this.settings.pagerSettings),pagerSettings.dataset=this.settings.dataset,pagerSettings.source=this.settings.source,pagerSettings.type="list";for(var oldSettingTypes=["pagesize","showPageSizeSelector"],i=0;i<oldSettingTypes.length;i++)void 0===this.settings[oldSettingTypes[i]]||pagerSettings[oldSettingTypes[i]]||(pagerSettings[oldSettingTypes[i]]=this.settings[oldSettingTypes[i]]);return pagerSettings},init:function init(){this.setup(),this.handleEvents(),this.refresh(),this.selectedItems=[],this.lastSelectedItem=0,this.isSelectedAll=!1,this.sortInit("listview","click.listview","data-sortlist"),this.handleResize()},setup:function setup(){var _this=this,card=this.element.closest(".card, .widget"),selectable=this.element.attr("data-selectable"),selectOnFocus=this.element.attr("data-select-onfocus");if(this.element.attr("data-pagesize")){var pagesize=Number(this.element.attr("data-pagesize"));isNaN(pagesize)||(this.settings.pagesize=pagesize),this.element.removeAttr("data-pagesize")}if(!this.settings.dataset.length&&this.element.is("ul")&&this.element.children("li").length){var items=this.element.children("li");this.settings.template||(this.settings.template="{{#dataset}}<li>{{text}}</li>{{/dataset}}"),items.each((function(i,item){_this.settings.dataset.push({text:$(item).text()})})),items.remove()}if(this.settings.dataset&&"string"==typeof this.settings.dataset){var globalDataset=window[this.settings.dataset];globalDataset&&globalDataset.length&&(this.settings.dataset=globalDataset)}selectable&&selectable.length&&(this.settings.selectable=selectable),selectOnFocus&&selectOnFocus.length&&(this.settings.selectOnFocus=JSON.parse(selectOnFocus)),this.actionButton=card.find(".btn-actions"),this.actionButton.length>0&&(this.actionButton.data("popupmenu")||this.actionButton.popupmenu()),this.element.attr({tabindex:"-1","x-ms-format-detection":"none"}),(this.element.is(".paginated")||!0===this.settings.paging)&&this.element.pager(this.pagerSettings);var cardWidgetContent=this.element.parent(".card-content, .widget-content");if(cardWidgetContent[0]&&(cardWidgetContent[0].style.overflow="hidden"),this.settings.searchable){this.searchfield=this.element.parent().find(".searchfield, .autocomplete"),this.searchfield.length;var listFilterSettings={filterMode:"contains"};"object"===_typeof(this.settings.listFilterSettings)&&(listFilterSettings=utils.extend({},listFilterSettings,this.settings.listFilterSettings)),this.listfilter=new ListFilter(listFilterSettings)}this.settings.emptyMessage&&(this.emptyMessageContainer=$("<div>").emptymessage(this.settings.emptyMessage))},getTotals:function getTotals(dataset){var property,totals={count:dataset.length};if(dataset[0]){for(property in dataset[0])totals[property]=0;for(var i=0;i<dataset.length;i++)for(property in dataset[i])totals[property]+=parseFloat(dataset[i][property]);return totals}},render:function render(dataset,pagerInfo){var self=this,isServerSide="function"==typeof this.settings.source,totals={},displayedDataset=dataset,firstRecordIdx=0,lastRecordIdx=displayedDataset?displayedDataset.length:0,pagesize=this.settings.pagesize,setSize=dataset.length;if((pagerInfo&&(pagesize=pagerInfo.pagesize||pagesize,setSize=pagerInfo.filteredTotal||setSize),!isServerSide&&this.pagerAPI&&(this.renderPager(pagerInfo,!0),pagerInfo=this.pagerAPI.state),setSize>pagesize)&&(this.filteredDataset?pagerInfo.filteredPages:pagerInfo.pages)>1){var trueActivePage=pagerInfo.activePage>0?pagerInfo.activePage-1:0;this.filteredDataset&&(trueActivePage=pagerInfo.filteredActivePage-1),firstRecordIdx=pagerInfo.pagesize*trueActivePage,lastRecordIdx=pagerInfo.pagesize*(trueActivePage+1),displayedDataset=dataset.slice(firstRecordIdx,lastRecordIdx)}if("object"===_typeof(Tmpl)&&displayedDataset&&this.settings.template){this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):"string"==typeof this.settings.template&&(stringUtils.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())),this.settings.template.indexOf("{{#totals}}")>-1&&(totals=this.getTotals(dataset));var renderedTmpl=Tmpl.compile(this.settings.template,{dataset:displayedDataset,totals:totals});this.element.parent().is(".scrollable-flex-content")&&this.element.parent().find(".empty-message").remove(),displayedDataset.length>0||this.settings.forceToRenderOnEmptyDs?this.element.html(renderedTmpl):self.emptyMessageContainer&&this.element.parent().is(".scrollable-flex-content")?(this.element.empty(),DOM.append(this.element.parent(),this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):self.emptyMessageContainer?(this.element.empty(),DOM.append(this.element,this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):0===displayedDataset.length&&this.element.html(renderedTmpl||"<ul></ul>")}var card=this.element.closest(".card, .widget");$("ul",this.element).attr({role:"listbox","aria-label":this.settings.description||card.find(".card-title, .widget-title").text()||"List"});var first=this.element.find("li, tbody > tr").first(),items=this.element.find("li, tr"),isMultiselect="multiple"===this.settings.selectable||"mixed"===this.settings.selectable;this.focusItem=first.attr("tabindex",0),this.settings.selectable||1!==first.find("a").length||first.removeAttr("tabindex");var hideFlag=items.length>displayedDataset.length;items.each((function(i){var item=$(this);if(item.attr("role","option"),isMultiselect){self.element.addClass("is-multiselect");var selectedToolbar=self.element.prevAll(".toolbar");selectedToolbar.length&&selectedToolbar.data("toolbar")&&selectedToolbar.data("toolbar").toggleMoreMenu(),self.settings.showCheckboxes&&0===item.children(".listview-selection-checkbox").length&&item.prepend('<label class="listview-selection-checkbox l-vertical-center inline inline-checkbox">\n              <input tabindex="-1" type="checkbox" class="checkbox">\n              <span class="label-text" role="presentation">\n                <span class="audible">'.concat(Locale.translate("Checkbox")," ").concat(Locale.translate("NotSelected"),".</span>\n              </span>\n            </label>"))}if(hideFlag){var n=firstRecordIdx+i;if(n<self.settings.dataset.length){var data=self.settings.dataset[n];item.css("display",void 0===data._isFilteredOut||data._isFilteredOut?"":"none")}}else item.css("display","");item.attr({"aria-posinset":firstRecordIdx+i+1,"aria-setsize":setSize}),item.hasClass("is-disabled")&&item.attr("aria-disabled","true"),self.settings.highlight&&self.searchTerm&&item.highlight(self.searchTerm)})),self.settings.initializeContents&&this.element.find("ul").initialize(),this.element.trigger("rendered",[displayedDataset]),this.element.off("updated.listview").on("updated.listview",(function(e,settings){self.updated(settings)}))},renderPager:function renderPager(updatedPagerInfo,isResponse){this.pagerAPI&&this.pagerAPI.updatePagingInfo(updatedPagerInfo,isResponse)},getPageableElements:function getPageableElements(){var elements=this.element.children();return elements.is("ul")&&(elements=elements.children()),elements},refresh:function refresh(dataset,pagingInfo){this.loadData(dataset,pagingInfo),this.list&&this.render(this.list.data)},loadData:function loadData(ds,pagerInfo,isResponse){var ajaxDs=!1,self=this;if(ds=ds||this.settings.dataset,this.filteredDataset&&(ds=this.filteredDataset),pagerInfo||(this.pagerAPI?(ds.length!==this.pagerAPI.settings.dataset.length&&this.pagerAPI.updated({dataset:ds}),pagerInfo=this.pagerAPI.state):pagerInfo={activePage:1}),this.filteredDataset?pagerInfo.filteredTotal=ds.length:pagerInfo.total=ds.length,Array.isArray(ds)){var s=this.settings.source;if("string"!=typeof ds||0!==ds.indexOf("http")&&0!==ds.indexOf("/")||(s=ds,ajaxDs=!0),!s&&!ajaxDs||this.filteredDataset||isResponse)this.render(ds,pagerInfo);else switch(_typeof(s)){case"function":s(pagerInfo,done);break;case"string":return void(0!==s.indexOf("http")&&0!==s.indexOf("/")||$.getJSON(s,done));default:this.settings.dataset=s,ds=s,this.render(s,pagerInfo)}}function done(response,pagingInfo){self.settings.dataset=response,ds=response;var activePage=self.pagerAPI?self.pagerAPI.activePage:1;"string"==typeof pagingInfo&&(pagingInfo={activePage:activePage,pagesize:self.settings.pagesize,total:ds.length,type:pagingInfo}),self.pagerAPI&&(self.renderPager(pagingInfo,!0),pagingInfo=self.pagerAPI.state),self.render(ds,pagingInfo)}},toggleAll:function toggleAll(){this[this.isSelectedAll?"deselectItemsBetweenIndexes":"selectItemsBetweenIndexes"]([0,$("li, tbody tr",this.element).length-1]),this.isSelectedAll=!this.isSelectedAll},selectItemsBetweenIndexes:function selectItemsBetweenIndexes(indexes){this.clearSelection(),indexes.sort((function(a,b){return a-b}));for(var i=indexes[0];i<=indexes[1];i++){var item=$("li, tbody tr",this.element).eq(i);item.is(".is-disabled, .is-selected")||this.select(item)}},deselectItemsBetweenIndexes:function deselectItemsBetweenIndexes(indexes){indexes.sort((function(a,b){return a-b}));for(var i=indexes[0];i<=indexes[1];i++){var item=$("li, tbody tr",this.element).eq(i);!item.is(".is-disabled")&&item.is(".is-selected")&&this.select(item)}},clearSelection:function clearSelection(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},handleResize:function handleResize(){var items=$("li .listview-heading, tr .listview-heading",this.element),item1=items.eq(1),item1W=item1.width();item1.length&&item1W&&(items[0].style.width="".concat(item1W,"px")),this.pagerAPI&&this.pagerAPI.render()},handleSearch:function handleSearch(e,searchfield){this.filter(searchfield)},filter:function filter(searchfield){if(searchfield){var searchFieldVal=(searchfield=$(searchfield)).val().trim(),pagingInfo={searchActivePage:1};if(searchFieldVal){if(searchFieldVal.length<this.settings.searchTermMinSize)this.resetSearch();else if(this.searchTerm!==searchFieldVal){this.searchTerm=searchFieldVal,this.element.unhighlight(),this.settings.dataset.forEach((function(item){item._isFilteredOut=!1}));var results=this.listfilter.filter(this.settings.dataset,this.searchTerm);results.length||(results=[]),pagingInfo.filteredTotal=results.length,pagingInfo.searchActivePage=1,results.forEach((function(result){result._isFilteredOut=!0})),this.filteredDataset=results,this.loadData(null,pagingInfo),this.element.trigger("filtered",{elem:this.element,filteredResults:results,term:this.searchTerm})}}else{if(!this.searchTerm)return;this.resetSearch()}}},resetSearch:function resetSearch(){this.element.unhighlight(),this.settings.dataset.forEach((function(item){delete item._isFilteredOut})),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var pagingInfo={activePage:1,filteredTotal:void 0,searchActivePage:void 0};this.refresh(null,pagingInfo)},focus:function focus(item){item.is(":hidden")||item.is(".is-disabled")||(this.focusItem&&this.focusItem.removeAttr("tabindex"),this.focusItem=item.attr("tabindex",0).focus(),this.settings.selectable||1!==item.find("a").length||(item.find("a").focus(),item.removeAttr("tabindex")),this.settings.selectOnFocus&&"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&this.select(item))},remove:function remove(li){"number"==typeof li&&(li=$(this.element.children()[0]).children().eq(li)),li.is(".is-selected")&&this.select(li,!0),li.remove()},clear:function clear(){$(this.element.children()[0]).empty()},removeAllSelected:function removeAllSelected(){var self=this;$.each(this.selectedItems,(function(index,selected){self.remove(selected)}))},clearAllSelected:function clearAllSelected(){var self=this;$.each(this.selectedItems,(function(index,selected){self.select(selected)}))},sortInit:function sortInit(control,onEvent,attr){attr&&""!==$.trim(attr)&&$("[".concat(attr,"]")).each((function(){var element=$(this),options=$.fn.parseOptions(element,attr);element.on(onEvent,(function(e){$(options.list).data(control).setSortColumn(options),e.preventDefault()}))}))},setSortColumn:function setSortColumn(options){var field=options.orderBy||this.list.sort.field,reverse=options.order;if(this.list.data||field){reverse=reverse?"desc"===reverse:!(this.list.sort&&this.list.sort[field]&&this.list.sort[field].reverse),(options.reloadApi||options.reloadApiNoSort)&&this.loadData(),options.reloadApiNoSort&&(field=this.list.sort.field,reverse=this.list.sort[field].reverse);var sort=this.sortFunction(field,reverse);this.list.data.sort(sort),this.render(this.list.data),this.list.sort={field:field},this.list.sort[field]={reverse:reverse},this.element.trigger("sorted",[this.element,this.list.sort])}},sortFunction:function sortFunction(field,reverse,primer){primer||(primer=function primer(a){return"string"==typeof(a=null==a?"":a)&&(a=a.toUpperCase(),isNaN(parseFloat(a))||(a=parseFloat(a))),a});var key=primer?function(x){return primer(x[field])}:function(x){return x[field]};return reverse=reverse?-1:1,function(a,b){return a=key(a),b=key(b),reverse*((a>b)-(b>a))}},deselect:function deselect(li){"number"==typeof li&&(li=$(this.element.children()[0]).children().eq(li)),li.is(".is-selected")&&this.select(li)},unselect:function unselect(li){return deprecateMethod(this.deselect,this.unselect).apply(this,[li])},select:function select(li,noTrigger){var isChecked,self=this,isMixed="mixed"===self.settings.selectable;if(self.selectedItems=[],"number"==typeof li&&(li=$(this.element.children()[0]).children().eq(li)),isChecked=li.hasClass("is-selected"),li.is('[tabindex="0"]')||(this.focusItem&&this.focusItem.removeAttr("tabindex"),li.attr("tabindex",0)),!1!==this.settings.selectable&&"false"!==this.settings.selectable){if("multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&(li.parent().children().removeAttr("aria-selected"),li.parent().find(".is-selected").removeClass("is-selected"),self.selectedItems[0]=$(this)),isChecked?(self.selectedItems=[],li.removeClass("is-selected hide-selected-color")):this.settings.selectable&&(li.addClass("is-selected".concat(isMixed?" hide-selected-color":"")),self.lastSelectedItem=li.index()),li.parent().find(".is-selected").each((function(i){self.selectedItems[i]=$(this)})),li.find(".listview-selection-checkbox input").prop("checked",!isChecked),"multiple"===this.settings.selectable||"mixed"===this.settings.selectable){var operationText=isChecked?"NotSelected":"Selected";li.attr("aria-selected",!isChecked),li.find(".label-text .audible").text("".concat(Locale.translate("Checkbox")," ").concat(operationText,"."))}if(!noTrigger){for(var triggerStr=isChecked?"unselected":"selected",selectedData=[],i=0;i<this.selectedItems.length;i++){var posinset=this.selectedItems[i][0].getAttribute("aria-posinset");selectedData.push(this.settings.dataset[posinset-1])}this.element.triggerHandler(triggerStr,{selectedItems:this.selectedItems,elem:li,selectedData:selectedData}),"unselected"===triggerStr&&this.element.triggerHandler("deselected",{selectedItems:this.selectedItems,elem:li,selectedData:selectedData})}var parent=this.element.closest(".card, .widget");parent.length||(parent=this.element.parent());var toolbar=parent.find(".listview-toolbar, .contextual-toolbar"),toolbarControl=toolbar.data("toolbar");if(self.selectedItems.length>0){toolbarControl&&toolbarControl.toggleMoreMenu(),toolbar.one("animateopencomplete",(function(){self.element.addClass("is-toolbar-open"),toolbar.trigger("recalculate-buttons").removeClass("is-hidden")})),toolbar[0]&&(toolbar[0].style.display="block"),toolbar.animateOpen({distance:40});var title=toolbar.find(".title, .selection-count");title&&title.length||(title=$('<div class="title selection-count"></div>'),toolbar.prepend(title)),title.text("".concat(self.selectedItems.length," ").concat(Locale?Locale.translate("Selected"):"Selected"))}else toolbar.addClass("is-hidden").one("animateclosedcomplete",(function(e){e.stopPropagation(),this.style.display="none",self.element.removeClass("is-toolbar-open")})).animateClosed()}},toggleItemActivation:function toggleItemActivation(li){li.hasClass("is-activated")?this.settings.disableItemDeactivation||this.deactivateItem(li):this.activateItem(li)},activateItem:function activateItem(li){var idx="number"==typeof li?li:li.index(),active=this.element.find("li.is-activated");"number"==typeof li&&(li=this.element.find("ul").children().eq(li)),this.deactivateItem(active),!1!==this.element.triggerHandler("beforeactivate",[{index:idx,elem:li,data:this.settings.dataset[idx]}])&&(li.addClass("is-activated"),this.element.triggerHandler("itemactivated",[{index:idx,elem:li,data:this.settings.dataset[idx]}]))},activatedItem:function activatedItem(){var active=this.element.find("li.is-activated"),idx=active.index();return{index:idx,elem:active,data:this.settings.dataset[idx]}},deactivateItem:function deactivateItem(li){"number"==typeof li&&(li=this.element.find("ul").children().eq(li)),void 0===li&&(li=this.element.find("li.is-activated")),li.removeClass("is-activated");var idx=li.index();idx<0||this.element.triggerHandler("itemdeactivated",[{index:idx,elem:li,data:this.settings.dataset[idx]}])},getSelected:function getSelected(){return this.element.find(".is-selected")},updateSearch:function updateSearch(){if(this.settings.searchable&&this.filteredDataset){delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var searchfieldApi=this.searchfield.data("searchfield");searchfieldApi&&searchfieldApi.xButton&&searchfieldApi.xButton.trigger("click")}},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings),settings&&settings.dataset&&(this.settings.dataset=settings.dataset)),this.updateSearch(),this.refresh(settings&&settings.dataset?settings.dataset:null),this},disable:function disable(){this.element.addClass("is-disabled")},enable:function enable(){this.element.removeClass("is-disabled")},teardown:function teardown(){return $("body").off("resize.listview"),this.element.prev(".listview-header").off("click.listview"),this.searchfield&&this.searchfield.off(["contents-checked.searchable-listview","cleared.searchable-listview"].join(" ")),this.element.off("change.selectable-listview",".listview-checkbox input"),this.element.off("contextmenu.listview dblclick.listview","li, tr"),this.element.off("click.listview","li, tr, input[checkbox]"),this.element.off("keydown.listview","li, tr, a"),this.element.off("focus.listview","li, tbody tr"),this.element.off("focus.listview click.listview touchend.listview keydown.listview change.selectable-listview updated.listview").empty(),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm,this},destroy:function destroy(){this.teardown(),this.element.removeData("listview")},handleEvents:function handleEvents(){var self=this,isSelect=!1,isFocused=!1,isMultiple="multiple"===self.settings.selectable||"mixed"===self.settings.selectable;if(this.element.off("focus.listview","li, tbody tr").on("focus.listview","li, tbody tr",(function(evt){var item=$(this);if(!(evt.originalEvent&&evt.originalEvent.target&&$(evt.originalEvent.target).is(".icon-favorite"))){if(item.is(":first-child")&&item.hasClass("is-disabled")){var e=$.Event("keydown.listview");e.keyCode=40,isSelect=!0,item.trigger(e)}isSelect||item.hasClass("is-disabled")||!self.settings.selectOnFocus||"multiple"===self.settings.selectable||"mixed"===self.settings.selectable||(self.select(item),isSelect=!0,isFocused=!0)}})),this.element.off("keydown.listview","li, tr, a").on("keydown.listview","li, tr, a",(function(e){var elem=$(this),item=elem.is("a")?elem.closest("li"):$(this),list=item.is("a")?item.closest("ul"):item.parent(),key=e.keyCode||e.charCode||0,metaKey=e.metaKey;if(0===item.index()&&38===e.keyCode)return!1;if((40===key||38===key)&&!metaKey){var newItem=40===e.keyCode?item.nextAll(":not(.is-disabled):visible:first"):item.prevAll(":not(.is-disabled):visible:first");newItem.length&&($(e.target).is(item)||e.shiftKey||elem.is("a"))&&self.focus(newItem),e.preventDefault(),e.stopPropagation()}if(35===key||40===key&&metaKey){var last=list.children().last();return self.focus(last),e.stopPropagation(),!1}if(36===key||38===key&&metaKey){var first=list.children().first();return self.focus(first),e.stopPropagation(),!1}return 32===key&&$(e.target).is(item)&&(isMultiple&&e.shiftKey?self.selectItemsBetweenIndexes([self.lastSelectedItem,item.index()]):self.select(item),e.preventDefault()),isMultiple&&(e.ctrlKey||e.metaKey)&&65===key&&(self.toggleAll(),self.focus(item),e.preventDefault()),!0})),this.settings.selectable){this.element.addClass("is-selectable");var pattern=$(this.element).closest(".list-detail, .builder");this.element.off("click.listview","li, tr, input[checkbox]").on("click.listview","li, tr, input[checkbox]",(function(e){var item=$(this),isCheckbox=$(e.target).closest(".listview-selection-checkbox").length>0,isMixed="mixed"===self.settings.selectable,target=$(e.target);target.hasClass("icon-favorite")||target.hasClass("hyperlink")||(isFocused||item.hasClass("is-disabled")||isMixed&&!isCheckbox||(isSelect=!0,isMultiple&&e.shiftKey?(self.selectItemsBetweenIndexes([self.lastSelectedItem,item.index()]),e.preventDefault()):self.select(item),item.focus()),item.hasClass("is-disabled")||!isMixed||isCheckbox||(item.focus(),self.toggleItemActivation(item)),pattern.length>0&&$(window).outerWidth()<767&&!item.hasClass("is-disabled")&&!isCheckbox&&self.element.trigger("drilldown",[item]),isFocused=!1,e.preventDefault(),e.stopPropagation(),self.element.trigger("click",[{elem:item,data:self.settings.dataset[item.attr("aria-posinset")-1],index:item.index(),originalEvent:e}]))})),this.element.off("dblclick.listview","li, tr").on("dblclick.listview","li, tr",(function(e){var item=$(this);return e.preventDefault(),e.stopPropagation(),self.element.trigger("dblclick",[{elem:$(this),data:self.settings.dataset[item.attr("aria-posinset")-1],index:item.index(),originalEvent:e}]),!1})),this.element.off("contextmenu.listview","li, tr").on("contextmenu.listview","li, tr",(function(e){var item=$(this);return e.preventDefault(),e.stopPropagation(),self.element.trigger("contextmenu",[{elem:$(this),data:self.settings.dataset[item.attr("aria-posinset")-1],index:item.index(),originalEvent:e}]),!1}))}this.settings.hoverable&&"false"!==this.settings.hoverable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),this.settings.selectable&&"false"!==this.settings.selectable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable||this.element.off("change.selectable-listview",".listview-checkbox input").on("change.selectable-listview",".listview-checkbox input",(function(e){$(this).parent().trigger("click"),e.stopPropagation()})),this.settings.searchable&&this.searchfield.off("contents-checked.searchable-listview").on("contents-checked.searchable-listview",(function(e){self.handleSearch(e,$(this))})).off("cleared.searchable-listview").on("cleared.searchable-listview",(function(){self.resetSearch(),self.element.trigger("filtered",{elem:self.element,filteredResults:[],term:""})})),this.pagerAPI&&this.element.off("page.listview").on("page.listview",(function(e,pagingInfo){self.handlePageChange(pagingInfo)})).off("pagesizechange.listview").on("pagesizechange.listview",(function(e,pagingInfo){self.handlePageSizeChange(pagingInfo)})),$("body").off("resize.listview").on("resize.listview",(function(e){self.handleResize(e)})),self.element.prev(".listview-header").off("click.listview").on("click.listview",(function(){var icon=$(this).find(".plus-minus");icon.hasClass("active")?(icon.removeClass("active"),self.element.animateClosed()):(icon.addClass("active"),self.element.animateOpen())}))},handlePageSizeChange:function handlePageSizeChange(pagingOpts){pagingOpts.activePage=1,this.loadData(void 0,pagingOpts)},handlePageChange:function handlePageChange(pagingOpts){this.loadData(void 0,pagingOpts)}},$.fn.listview=function(settings){var cs=$(this),attr=cs.attr("data-dataset"),tmpl=cs.attr("data-tmpl"),inlineOpts=utils.parseOptions(this)||{};inlineOpts.dataset=inlineOpts.dataset||attr,inlineOpts.template=inlineOpts.template||tmpl,window[inlineOpts.dataset]&&(inlineOpts.dataset=window[inlineOpts.dataset]),inlineOpts.template&&inlineOpts.template.length&&(inlineOpts.template=$("#".concat(inlineOpts.template)).html());var combinedSettings=utils.extend({},settings,inlineOpts);return this.each((function(){var instance=$.data(this,"listview");instance?instance.updated(combinedSettings):instance=$.data(this,"listview",new ListView(this,combinedSettings))}))};var LISTBUILDER_DEFAULTS={dataset:[],handle:".handle",btnAdd:"add",btnEdit:"edit",btnDelete:"delete",btnGoUp:"goup",btnGoDown:"godown",template:'<ul data-handle=".handle">{{#dataset}}{{#text}}<li{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>',templateNewItem:'<li data-value="{{text}}" role="option"><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>',templateItemContent:"<p>{{text}}</p>"};function ListBuilder(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,LISTBUILDER_DEFAULTS),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.init()}ListBuilder.prototype={init:function init(){var _this=this;this.loadListview().initDataset().setElements().handleEvents(),setTimeout((function(){_this.setSelected()}),0)},loadListview:function loadListview(){var s=this.settings,lv=$(".listview",this.element);return!s.dataset.length&&lv.length&&$("li",lv).length?this.listApi=lv.listview({selectable:"single"}).data("listview"):lv.length&&(this.listApi=lv.listview({dataset:s.dataset,template:s.template,selectable:"single"}).data("listview")),this},initDataset:function initDataset(){var s=this.settings,nodes=$(".listview li",this.element);this.dataset=[];for(var i=0,l=nodes.length;i<l;i++){var data=void 0,li=$(nodes[i]);s.dataset?(data=JSON.parse(JSON.stringify(s.dataset[i]))).node=li:data=this.extractNodeData(li),this.dataset.push(data)}return this},extractNodeData:function extractNodeData(node){var data={node:node,text:$.trim($(".item-content",node).text())},value=node.attr("data-value");return void 0!==value&&(data.value=value),data},setElements:function setElements(){var _this2=this,s=this.settings,setAction=function setAction(selector){return _this2.isjQuery(selector)?selector:"string"==typeof selector?$('[data-action="'.concat(selector,'"]'),_this2.element):null};return s.btnAdd=setAction(s.btnAdd),s.btnGoUp=setAction(s.btnGoUp),s.btnGoDown=setAction(s.btnGoDown),s.btnEdit=setAction(s.btnEdit),s.btnDelete=setAction(s.btnDelete),this.topButtons=s.btnAdd.add(s.btnGoUp).add(s.btnGoDown).add(s.btnEdit).add(s.btnDelete),this.topButtons.tooltip(),this.ul=$(".listview ul",this.element),this.arrangeApi=this.ul.arrange({handle:s.handle,placeholder:s.templateNewItem}).data("arrange"),this},handleEvents:function handleEvents(){var data,_this3=this,self=this,s=self.settings,topButtonsClick=function topButtonsClick(btn,method){btn.off("click.listbuilder").on("click.listbuilder",(function(){self[method]()}))};return topButtonsClick(s.btnAdd,"addItem"),topButtonsClick(s.btnGoUp,"moveItemUp"),topButtonsClick(s.btnGoDown,"moveItemDown"),topButtonsClick(s.btnEdit,"editItem"),topButtonsClick(s.btnDelete,"deleteItem"),this.arrangeApi.element.on("beforearrange.listbuilder",(function(e,status){var d=_this3.getDataByNode(status.start),str=s.templateItemContent.replace(/{{text}}/g,d.data.text);_this3.arrangeApi.placeholders.attr("data-value",d.data.text).find(".item-content").html(str)})).on("arrangeupdate.listbuilder",(function(e,status){_this3.updateAttributes(),_this3.arrayIndexMove(_this3.dataset,status.startIndex,status.endIndex),(data=_this3.getDataByNode(status.end)).indexBeforeMove=status.startIndex,_this3.element.triggerHandler("arrangeupdate",[data])})),$("li:not(.is-disabled) ".concat(this.arrangeApi.handle),this.ul).on("mousedown.listbuilder touchstart.listbuilder",(function(){var li=$(this);li.is(".is-selected")||li.trigger("click")})),$(".listview",this.element).off("selected.listbuilder").on("selected.listbuilder",(function(e,args){data=_this3.getDataByNode(args.elem[0]),_this3.element.triggerHandler("selected",[data])})),this.updatedEventsStr="arrangeupdate.listbuilder aftergoup.listbuilder aftergodown.listbuilder exiteditmode.listbuilder",this.element.off(this.updatedEventsStr).on(this.updatedEventsStr,(function(e,updatedData){_this3.element.triggerHandler("updated",[updatedData])})),this},addItem:function addItem(){var self=this,s=this.settings;$.when(this.element.triggerHandler("beforeadd")).done((function(){var li,data,index=0,node=self.listApi.selectedItems[0],str=s.templateNewItem.replace(/{{text}}/g,Locale.translate("NewItem"));node&&node.length>0?(index=(data=self.getDataByNode(node)).index+1,$(str).insertAfter(node),li=$("li",self.ul).eq(index)):(self.ul.prepend(str),li=$("li:first-child",self.ul)),self.dataset.push(self.extractNodeData(li)),self.arrayIndexMove(self.dataset,self.dataset.length-1,index),self.updateAttributes(),li.trigger("click"),self.arrangeApi.updated(),self.editItem(!0),data={index:index,data:self.dataset[index]},self.element.triggerHandler("afteradd",[data])}))},moveItemUp:function moveItemUp(){var self=this,node=self.listApi.selectedItems[0];if(node&&node.length>0){var data=self.getDataByNode(node);void 0!==data.index&&data.index>0&&$.when(self.element.triggerHandler("beforegoup",[data])).done((function(){var prev=node.prev();node.insertBefore(prev),self.updateAttributes(),self.arrayIndexMove(self.dataset,data.index,data.index-1),data.indexBeforeMove=data.index,data.index--,self.element.triggerHandler("aftergoup",[data])}))}},moveItemDown:function moveItemDown(){var self=this,node=self.listApi.selectedItems[0];if(node&&node.length>0){var data=self.getDataByNode(node);void 0!==data.index&&data.index<self.dataset.length-1&&$.when(self.element.triggerHandler("beforegodown",[data])).done((function(){var next=node.next();node.insertAfter(next),self.updateAttributes(),self.arrayIndexMove(self.dataset,data.index,data.index+1),data.indexBeforeMove=data.index,data.index++,self.element.triggerHandler("aftergodown",[data])}))}},editItem:function editItem(isNewItem){var node=this.listApi.selectedItems[0];node&&node.length>0&&(node.is(".is-editing")?this.commitEdit(node,isNewItem):this.makeEditable(node,isNewItem))},makeEditable:function makeEditable(node,isNewItem){var self=this,data=self.getDataByNode(node),container=$(".item-content",node);void 0!==data.index&&data.index<self.dataset.length&&$.when(self.element.triggerHandler("beforeedit",[data])).done((function(){var origValue=xssUtils.escapeHTML((container.text().trim()||"").toString()),editInput=$('<input name="edit-input" class="edit-input" type="text" value="'.concat(origValue,'" />'));node.addClass("is-editing"),container.html(editInput),setTimeout((function(){editInput.focus().select()}),0),editInput.on("click.listbuilder",(function(){return!1})).on("blur.listbuilder",(function(){return self.commitEdit(node,isNewItem)})).on("keypress.listbuilder",(function(e){13===(e.keyCode||e.charCode||0)&&(self.commitEdit(node,isNewItem),node.focus())})),self.element.triggerHandler("entereditmode",[data])}))},commitEdit:function commitEdit(node,isNewItem){var s=this.settings,data=this.getDataByNode(node),container=$(".item-content",node),editInput=$(".edit-input",container);editInput.val(xssUtils.escapeHTML((editInput.val()||"").toString())),isNewItem&&(data.data.value=editInput.val()),data.data.text=editInput.val(),editInput.off("click.listbuilder blur.listbuilder keypress.listbuilder"),container.html(s.templateItemContent.replace(/{{text}}/g,editInput.val())),node.removeClass("is-editing"),this.element.triggerHandler("exiteditmode",[data])},deleteItem:function deleteItem(){var self=this,node=self.listApi.selectedItems[0];if(node&&node.length>0){var data=self.getDataByNode(node);void 0!==data.index&&$.when(self.element.triggerHandler("beforedelete",[data])).done((function(){self.listApi.removeAllSelected(),self.updateAttributes(),self.dataset.splice(data.index,1),self.element.triggerHandler("afterdelete",[data])}))}},getDataByNode:function getDataByNode(node){for(var data={},i=0,l=this.dataset.length;i<l;i++){var d=this.dataset[i];if($(d.node).is(node)){data={index:i,data:d};break}}return data},arrayIndexMove:function arrayIndexMove(arr,from,to){arr.splice(to,0,arr.splice(from,1)[0])},isjQuery:function isjQuery(obj){return obj&&(obj instanceof jQuery||obj.constructor.prototype.jquery)},moveCursorToEnd:function moveCursorToEnd(el){setTimeout((function(){if("number"==typeof el.selectionStart)el.selectionEnd=el.value.length,el.selectionStart=el.value.length;else if(void 0!==el.createTextRange){var range=el.createTextRange();range.collapse(!1),range.select()}}),100)},updateAttributes:function updateAttributes(){for(var nodes=$("li",this.ul),i=0,l=nodes.length;i<l;i++)$(nodes[i]).attr({"aria-posinset":i+1,"aria-setsize":l})},updateDataset:function updateDataset(ds){var _this4=this,nodes=$("li",this.ul),lv=$(".listview",this.element).data("listview");lv.deselectItemsBetweenIndexes([0,nodes.length-1]),this.settings.dataset=ds,lv.loadData(this.settings.dataset),this.initDataset().setElements().handleEvents(),setTimeout((function(){_this4.setSelected()}),0)},setSelected:function setSelected(){for(var nodes=$("li[selected]",this.ul),i=0,l=nodes.length;i<l;i++){var li=$(nodes[i]);li.removeAttr("selected"),li.is(".is-selected")||li.trigger("click")}return this},select:function select(selector){var li=this.getListItem(selector);li&&!li.is(".is-selected")&&li.trigger("click")},unselect:function unselect(selector){var li=this.getListItem(selector);li&&li.is(".is-selected")&&li.trigger("click")},getListItem:function getListItem(selector){var li=$();if(this.isElement(selector)&&$.contains(this.ul,selector))li=this.isjQuery(selector)?selector:$(selector);else{var idx=parseInt(selector,10),items=$("li",this.ul);!isNaN(idx)&&idx>-1&&idx<items.length?li=items.eq(idx):"first"==="".concat(selector).toLowerCase()?li=items.first():"last"==="".concat(selector).toLowerCase()&&(li=items.last())}return li.length<1?null:li.length>1?li.eq(0):li},isElement:function isElement(obj){return this.isjQuery(obj)&&obj.get(0)instanceof Element||obj instanceof Element},enable:function enable(){this.element.removeClass("is-disabled").find(".toolbar .buttonset button").removeAttr("disabled").end().find(".toolbar .buttonset button[data-original-disabled]").attr("disabled","disabled").removeAttr("data-original-disabled"),this.ul.find("li").removeClass("is-disabled").end().find("li[data-original-disabled]").addClass("is-disabled").removeAttr("data-original-disabled")},disable:function disable(){this.element.addClass("is-disabled").find(".toolbar .buttonset button[disabled]").attr("data-original-disabled","disabled").end().find(".toolbar .buttonset button").attr("disabled","disabled"),this.ul.find("li.is-disabled").attr("data-original-disabled","is-disabled").end().find("li").addClass("is-disabled")},unbind:function unbind(){if(this.element.off(this.updatedEventsStr),$(".listview",this.element).off("selected.listbuilder"),$("li ".concat(this.arrangeApi.handle),this.ul).off("mousedown.listbuilder touchstart.listbuilder"),this.arrangeApi.element.off("beforearrange.listbuilder arrangeupdate.listbuilder").destroy(),this.topButtons.off("click.listbuilder"),this.topButtons)for(var i=0,l=this.topButtons.length;i<l;i++){var tooltipApi=$(this.topButtons[i]).data("tooltip");tooltipApi&&"function"==typeof tooltipApi.destroy&&tooltipApi.destroy()}return this.listApi&&"function"==typeof this.listApi.destroy&&this.listApi.destroy(),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,LISTBUILDER_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"listbuilder")}},$.fn.listbuilder=function(settings){return this.each((function(){var instance=$.data(this,"listbuilder");instance?instance.updated(settings):instance=$.data(this,"listbuilder",new ListBuilder(this,settings))}))};var MODAL_TRIGGER_SETTINGS=["click","immediate"],MODAL_FULLSIZE_SETTINGS=[!1,"responsive","always"],MODAL_DEFAULTS={trigger:"click",buttons:null,isAlert:!1,content:null,cssClass:null,autoFocus:!0,id:null,frameHeight:180,frameWidth:46,beforeShow:null,useFlexToolbar:!1,showCloseBtn:!1,maxWidth:null,fullsize:MODAL_FULLSIZE_SETTINGS[0],breakpoint:"phone-to-tablet",overlayOpacity:.7,noRefocus:!1,triggerButton:null};function handleModalDefaults(settings){return settings.trigger&&-1===MODAL_TRIGGER_SETTINGS.indexOf(settings.trigger)&&(settings.trigger=MODAL_DEFAULTS.trigger),settings.fullsize&&-1===MODAL_FULLSIZE_SETTINGS.indexOf(settings.fullsize)&&(settings.fullsize=MODAL_DEFAULTS.fullsize),settings.breakpoint&&-1===breakpoints.available.indexOf(settings.breakpoint)&&(settings.breakpoint=MODAL_DEFAULTS.breakpoint),settings}function Modal(element,settings){this.settings=utils.mergeSettings(element,settings,MODAL_DEFAULTS),this.settings=handleModalDefaults(this.settings),this.element=$(element),this.init(),this.reStructure()}Modal.prototype={get isCAP(){return this.element.is(".contextual-action-panel")},get capAPI(){var api;return this.trigger&&this.trigger.length?api=this.trigger.data("contextualactionpanel"):this.mainContent&&this.mainContent.length&&this.mainContent.is("body")&&(api=this.mainContent.data("contextualactionpanel")),api},get isAttachedToBody(){return this.trigger.length&&this.trigger.is("body")},get visible(){return this.element.is(".is-visible")},get isOnTop(){var max=0,dialog=this.element;return $(".modal.is-visible").each((function(){max<this.style.zIndex&&(max=this.style.zIndex)})),max===dialog[0].style.zIndex},get currentlyNeedsFullsize(){return"always"===this.settings.fullsize||"responsive"===this.settings.fullsize&&breakpoints.isBelow(this.settings.breakpoint)},get closeBtn(){var capAPI=this.capAPI;return capAPI&&capAPI.element instanceof $?capAPI.closeButton[0]:this.element[0].querySelector(".modal-content > button.btn-close")},init:function init(){var self=this;if(this.id=this.element.attr("id")||parseInt($(".modal").length,10)+1,this.namespace="".concat("modal","-").concat(this.id),this.trigger=$('[data-modal="'.concat(this.element.attr("id"),'"]')),this.element.is("body")&&(this.trigger=this.element),this.overlay||(this.overlay=$('<div class="overlay" style="opacity: '.concat(self.settings.overlayOpacity,';"></div>'))),this.oldActive=this.settings.triggerButton?this.useJqEl(this.settings.triggerButton):this.trigger,"click"!==this.settings.trigger||this.isAttachedToBody||this.trigger.on("click.".concat(self.namespace),(function(e){$(e.currentTarget).is(self.trigger)&&self.open()})),"immediate"===this.settings.trigger){var triggerImmediateTimer=new RenderLoopItem({duration:1,timeoutCallback:function timeoutCallback(){self.open()}});renderLoop.register(triggerImmediateTimer)}if(self.isCancelled=!1,this.settings.content){this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent();var renderFromContentTimer=new RenderLoopItem({duration:1,timeoutCallback:function timeoutCallback(){self.open()}});renderLoop.register(renderFromContentTimer)}else{if(this.settings.beforeShow)return this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent(),void this.callSource();this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset(),this.element.appendTo("body"),this.element[0].style.display="none"}},appendContent:function appendContent(){var _this=this,isAppended=!1,maxWidth=this.settings.maxWidth?' style="max-width: '.concat(this.settings.maxWidth,'px;"'):"";if(this.element=$('\n      <div class="modal">\n        <div class="modal-content"'.concat(maxWidth,'>\n          <div class="modal-header"><h1 class="modal-title"></h1></div>\n          <div class="modal-body-wrapper">\n            <div class="modal-body"></div>\n          </div>\n        </div>\n      </div>\n    ')),this.settings.showCloseBtn&&!this.isCAP){var closeBtn=$('\n        <button type="button" class="btn-icon btn-close" title="'.concat(Locale.translate("Close"),'" aria-hidden="true">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(Locale.translate("Close"),"</span>\n        </button>\n      "));this.element.find(".modal-content").append(closeBtn),closeBtn.on("click.".concat(this.namespace),(function(){return _this.close()})).tooltip()}this.settings.id&&this.element.attr("id",this.settings.id),$(this.settings.content).is(".modal")?(this.element=$(this.settings.content),isAppended=this.element.parent().hasClass("modal-wrapper")):this.settings.content&&this.settings.content.length>0&&(this.settings.content instanceof jQuery&&this.settings.content.parent().is(".modal-body")?(isAppended=!0,this.element=this.settings.content.closest(".modal")):this.element.find(".modal-body").append(this.settings.content),this.settings.content instanceof jQuery&&!this.settings.beforeShow&&(this.settings.content.removeClass("hidden is-hidden"),this.settings.content.show())),this.settings.beforeShow&&(this.busyIndicator=$('<div class="overlay busy"></div><div class="busy-indicator-container blocked-ui" aria-live="polite" role="status"><div class="busy-indicator active"><div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div></div><span>Loading...</span></div>'),$("body").append(this.busyIndicator)),isAppended||this.element.appendTo("body"),this.settings.cssClass&&this.element.addClass(this.settings.cssClass),this.settings.title&&(this.element.find(".modal-title")[0].innerHTML=xssUtils.stripTags(this.settings.title,"<div><span><a><small><img><svg><i><b><use><br><strong><em>")),isAppended||(this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset()),utils.fixSVGIcons(this.element)},reStructure:function reStructure(){var body=$(".modal-body",this.element),hr=$("hr:first-child",body),buttonset=$(".modal-buttonset",this.element);body&&body.length&&!body.parent().hasClass("modal-body-wrapper")&&body.wrap('<div class="modal-body-wrapper"></div>'),hr&&hr.length&&!hr.parent().hasClass("modal-content")&&hr.insertAfter(this.element.find(".modal-header")),buttonset&&buttonset.length&&!buttonset.parent().hasClass("modal-content")&&buttonset.insertAfter(this.element.find(".modal-body-wrapper"))},disableSubmit:function disableSubmit(){var body=this.element,primaryButton=body.find(".modal-buttonset button").filter(".btn-modal-primary").not(".no-validation"),dropdowns=body.find("select.dropdown[data-validate]"),fields=body.find("[data-validate]:visible");if(dropdowns.each((function(){$(this).next(".dropdown-wrapper").is(":visible")&&(fields=fields.add(this))})),fields.length>0){primaryButton.removeAttr("disabled");var allValid=!0;fields.each((function(){var field=$(this);if(!(field.closest(".datagrid-filter-wrapper").length>0)){var isVisible=field.is(".dropdown")&&field.next(".dropdown-wrapper").is(":visible")||null!==field[0].offsetParent;field.is(".required")?isVisible&&!field.val()&&(allValid=!1):(field.validateField(),isVisible&&!field.isValid()&&(allValid=!1)),isVisible&&field.is(".error")&&(allValid=!1),allValid&&primaryButton.removeAttr("disabled")}})),allValid||primaryButton.is(":disabled")||primaryButton.attr("disabled","true")}},renderButtonset:function renderButtonset(){var buttons=this.settings.buttons,targetSettings={style:"modal"},self=this;if(!this.buttonsetElem){var buttonsetElem=this.element.find(".modal-buttonset");if(buttonsetElem&&buttonsetElem.length)targetSettings.detectHTMLButtons=!0;else{if(!Array.isArray(buttons)||!buttons.length)return;var bodywrapper=this.element.find(".modal-body").parent(),flexText=this.settings.useFlexToolbar?"toolbar-section ":"",buttonsetTmpl='<div class="'.concat(flexText,'modal-buttonset"></div>');(buttonsetElem=$(buttonsetTmpl)).insertAfter(bodywrapper),targetSettings.buttons=buttons}this.buttonsetElem=buttonsetElem,buttonsetElem.buttonset(targetSettings),this.buttonsetAPI=buttonsetElem.data("buttonset"),buttons=this.buttonsetAPI.toData().buttons}var buttonAPIs=this.buttonsetAPI.buttons,$buttons=$(),btnPercentWidth=100/buttonAPIs.length;buttonAPIs.forEach((function(btn,i){var settingsJSON=Array.isArray(buttons)&&buttons.length?buttons[i]:void 0,triggeredFunc=!1;settingsJSON&&(btn.element[0].setAttribute("id",buttons[i].id||utils.uniqueId(btn.element,"button","modal")),$(btn.element).on("click.".concat(self.namespace),(function(e){var func=settingsJSON.click;func&&(func.apply(self.element[0],[e,self]),triggeredFunc=!0)})),$(btn.element).not(["[data-ng-click]","[ng-click]","[onclick]",":submit",".btn-menu",".btn-actions",".colorpicker",".fontpicker"].join(", ")).on("click.".concat(self.namespace),(function(e){triggeredFunc||($(e.target).is(".btn-cancel")&&(self.isCancelled=!0),self.close())})),settingsJSON.validate&&btn.element[0].classList.add("no-validation"));btn.element[0].style.width="".concat(btnPercentWidth,"%"),$buttons.add(btn)}))},addButtons:function addButtons(buttons){var buttonset,self=this,bodywrapper=this.element.find(".modal-body").parent(),flexToolbar=this.element.find(".flex-toolbar"),btnWidth=100,isPanel=!1;if(this.modalButtons=buttons,!buttons){var inlineBtns=this.element.find(".modal-buttonset button");btnWidth=100/inlineBtns.length;for(var i=0,l=inlineBtns.length;i<l;i++)inlineBtns[i].style.width="".concat(btnWidth,"%");return inlineBtns.button(),void inlineBtns.not("[data-ng-click], [ng-click], [onclick], :submit").on("click.".concat(self.namespace),(function(e){$(e.target).is(".btn-cancel")&&(self.isCancelled=!0),self.close()}))}this.isCAP?(isPanel=!0,buttonset=this.element.find(".buttonset")):(buttonset=this.element.find(".modal-buttonset")).length||(buttonset=$('<div class="modal-buttonset"></div>').insertAfter(bodywrapper)),btnWidth=100/buttons.length,buttons&&buttonset.empty();for(var decorateButtons=function decorateButtons(props,cnt){var btn=$('<button type="button">\n        <span></span>\n      </button>'),span=btn.find("span");span.text(props.text),btn.attr("type",props.type||"button"),"separator"===props.cssClass&&(btn=$('<div class="separator"></div>')),props.cssClass?btn.attr("class",props.cssClass):props.isDefault?btn.addClass("btn-modal-primary"):btn.addClass("btn-modal"),props.disabled&&(btn[0].disabled=!0===props.disabled),props.audible&&span.addClass("audible"),void 0===props.validate||props.validate||btn.addClass("no-validation");for(var attrs={},attrTypes=["id","name","text"],k=0;k<attrTypes.length;k++)props[attrTypes[k]]&&(attrs[attrTypes[k]]=props[attrTypes[k]]);if("input"===props.type){var label=$('<label class="audible" for="filter">'.concat(props.text,"</label>")),input=$('<input class="searchfield">').attr(attrs);return flexToolbar.length?flexToolbar.find(".toolbar-section.search").append(label,input):buttonset.append(label,input),void input.searchfield(props.searchfieldSettings)}props.icon&&"#"===props.icon.charAt(0)&&$.createIconElement({classes:["#icon-close"===props.icon?"icon-close":""],icon:props.icon.substr("#icon-".length)}).prependTo(btn),btn[0].setAttribute("id",props.id||utils.uniqueId(self.element,"button","modal"));var func=buttons[cnt].click;btn.on("click.".concat(self.namespace),(function(e){func?func.apply(self.element[0],[e,self]):self.close()})),isPanel||(btn[0].style.width="".concat(btnWidth,"%")),btn.button(),(self.settings.useFlexToolbar||self.settings.centerTitle)&&props.align?("left"===props.align&&flexToolbar.find(".toolbar-section").eq(0).append(btn),"center"===props.align&&flexToolbar.find(".toolbar-section").eq(1).find("h2").append(btn),"right"===props.align&&flexToolbar.find(".toolbar-section").eq(2).append(btn)):buttonset.append(btn)},cnt=0;cnt<buttons.length;cnt++)decorateButtons(buttons[cnt],cnt)},sizeInner:function sizeInner(){var messageArea=this.element.find(".detailed-message"),h=$(window).height()-messageArea.offset().top-150;messageArea[0].style.maxHeight="".concat(h,"px"),messageArea[0].style.overflow="auto",messageArea[0].style.width="".concat(messageArea.width(),"px")},callSource:function callSource(){if("function"==typeof this.settings.beforeShow){var self=this;this.settings.beforeShow((function response(content){return!1!==content&&($("#modal-busyindicator").trigger("complete.busyindicator"),!0===content?(self.busyIndicator&&(self.busyIndicator.remove(),delete self.busyIndicator),!0):(content instanceof jQuery||(content=$(content)),self.open(!0),self.element.find(".modal-body").empty(),self.element.find(".modal-body").append(content),content.show(),!0))}),{})}},open:function open(ajaxReturn){var elemCanOpen,_this2=this;if($("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden"),this.busyIndicator&&(this.busyIndicator.remove(),delete this.busyIndicator),this.settings.triggerButton?this.oldActive=this.useJqEl(this.settings.triggerButton):this.trigger&&0!==this.trigger.length&&!this.trigger.is("body")||(this.oldActive=$(":focus")),this.element.next().is(".overlay")||this.element.after(this.overlay),this.element&&!this.element.parent().hasClass("modal-wrapper")&&this.element.wrap('<div class="modal-page-container"><div class="modal-wrapper"></div>'),this.root=this.element.closest(".modal-page-container"),1===this.element.find(".detailed-message").length&&($("body").on("resize.".concat(this.namespace),(function(){_this2.sizeInner()})),this.sizeInner()),elemCanOpen=this.element.triggerHandler("beforeopen",[this]),$("body").triggerHandler("beforeopen",[this]),this.isCancelled=!1,!1===elemCanOpen)return this.overlay.remove(),void(this.root[0].style.display="none");if(ajaxReturn||(this.callSource(),!this.settings.beforeShow)){var currentModalApi=this,modals=$(".modal"),lastModalIndex=modals.length-1;if(modals.each((function(i){var modal=$(this);if(this.style.zIndex=(1020+(i+1)).toString(),modal.data("modal")&&modal.data("modal").overlay&&(modal.data("modal").overlay[0].style.zIndex=(1020+i).toString()),!modal.data("modal")){var overlay=modal.closest(".modal-page-container").next(".overlay");overlay&&overlay[0]&&(overlay[0].style.zIndex=(1020+i).toString())}if(i===lastModalIndex){var zIndex={element:parseInt(currentModalApi.element[0].style.zIndex,10),overlay:parseInt(currentModalApi.overlay[0].style.zIndex,10)};zIndex.overlay||(currentModalApi.overlay[0].style.zIndex=zIndex.element-1)}})),$("body > *").not(this.element).not(".modal, .overlay, .modal-page-container").attr("aria-hidden","true"),this.settings.isAlert)this.element.attr("aria-labelledby","message-title"),this.element.attr("aria-describedby","message-text");else{var h1=this.element.find("h1:first"),id=h1.attr("id");id||(id="".concat(this.element.attr("id")?this.element.attr("id"):"h1","-title"),h1.attr("id",id));var body=this.element.find(".modal-body"),descById="".concat(this.element.attr("id")?this.element.attr("id"):"message","-text");this.element.attr("aria-labelledby",id),this.element.find(".toolbar .title").length?(this.element.find(".toolbar .title").attr("id",descById),this.element.attr("aria-describedby",descById)):(body.attr("id",descById),this.element.attr("aria-describedby",descById))}this.mainContent=$("body").children(".scrollable-container"),this.mainContent.length||(this.mainContent=$("body")),this.removeNoScroll=!this.mainContent.hasClass("no-scroll"),this.mainContent.addClass("no-scroll"),$("body").on("resize.".concat(this.namespace),(function(){_this2.resize()})),this.root[0].style.display="",this.element[0].style.display="";var self=this,resizeTimer=new RenderLoopItem({duration:1,timeoutCallback:function timeoutCallback(){self.resize(),self.element.attr("role",self.settings.isAlert?"alertdialog":"dialog"),self.root.removeAttr("aria-hidden"),self.overlay.attr("aria-hidden","true"),self.element.attr("aria-modal","true")}}),displayTimer=new RenderLoopItem({duration:2,timeoutCallback:function timeoutCallback(){self.element.addClass("is-visible")}});renderLoop.register(resizeTimer),renderLoop.register(displayTimer),$("body").addClass("modal-engaged"),$(this.element).on("keypress.".concat(this.namespace),(function(e){var target=$(e.target);target.is(".editor, .searchfield, textarea, :button")||target.closest(".tab-list").length||$("#dropdown-list").length||13===e.which&&_this2.isOnTop&&!target.closest("form").find(":submit").length&&_this2.element.find(".btn-modal-primary:enabled").length&&(e.stopPropagation(),e.preventDefault(),(!target.hasClass("fileupload")&&!$(target).is(":input")||target.hasClass("colorpicker"))&&_this2.element.find(".btn-modal-primary:enabled").trigger("click"))})),$(".skip-link").on("focus.".concat(this.namespace),(function(e){e.preventDefault(),_this2.element.find(":focusable").first().focus()})),this.element.find(".paginated").on("afterpaging.".concat(this.namespace),(function(){_this2.resize()}));var disableSubmitTimer=new RenderLoopItem({duration:5,timeoutCallback:function timeoutCallback(){self.disableSubmit()}});renderLoop.register(disableSubmitTimer),this.element.find("[data-validate]").removeClass("disable-validation");var focusElementTimer=new RenderLoopItem({duration:20,timeoutCallback:function timeoutCallback(){!function focusElement(thisElem){var selected,tabParent,focusElem=thisElem.element.find(":focusable").not(".modal-header .searchfield").first();if(thisElem.keepFocus(),self.element.trigger("open",[thisElem]),0===focusElem.length&&(focusElem=thisElem.element.find(".btn-modal-primary")),1===focusElem.length&&focusElem.is(".btn-modal")&&(focusElem=thisElem.element.find(".btn-modal-primary")),1===focusElem.length&&focusElem.is("button")&&!focusElem.is(":disabled")&&focusElem.addClass("hide-focus"),self.settings.autoFocus)return focusElem.is(".tab:not(.is-selected) a")&&(selected=(tabParent=focusElem.closest(".tab-container")).find(".is-selected")).length?(focusElem=selected,void tabParent.data("tabs").select(selected.children("a").attr("href"))):void focusElem.focus()}(self)}});renderLoop.register(focusElementTimer);var afterOpenTimer=new RenderLoopItem({duration:30,timeoutCallback:function timeoutCallback(){self.element.trigger("afteropen")}});renderLoop.register(afterOpenTimer)}},resize:function resize(){var calcHeight,calcWidth,currentlyNeedsFullsize=this.currentlyNeedsFullsize;currentlyNeedsFullsize?this.element[0].classList.add("display-fullsize"):(this.element[0].classList.remove("display-fullsize"),calcHeight=.9*$(window).height()-this.settings.frameHeight,calcWidth=1*$(window).width()-this.settings.frameWidth);var wrapper=this.element.find(".modal-body-wrapper");if(wrapper.length&&(currentlyNeedsFullsize?(wrapper[0].style.maxHeight="",wrapper[0].style.maxWidth=""):(wrapper[0].style.maxHeight="".concat(calcHeight,"px"),wrapper[0].style.maxWidth="".concat(calcWidth,"px"))),this.element.hasClass("lookup-modal")){var table=this.element.find(".datagrid-wrapper"),hasPager=this.element.find(".pager-toolbar"),container=table.closest(".datagrid-container");calcHeight=calcHeight-(container.prev().is(".toolbar")?130:67)-(container.next().is(".pager-toolbar")?35:0)+(hasPager.length?-15:0),currentlyNeedsFullsize?(table[0].style.maxHeight="",table[0].style.maxWidth=""):(table[0].style.maxHeight="".concat(calcHeight,"px"),table[0].style.maxWidth="".concat(calcWidth,"px"))}this.element.hasClass("datagrid-columns-dialog")&&(wrapper[0].style.overflow="hidden",calcHeight>220?(this.element.find(".modal-body")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.maxHeight="",this.element.find(".listview.alternate-bg")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.minHeight=""):(this.element.find(".modal-body")[0].style.height="".concat(calcHeight,"px"),this.element.find(".listview.alternate-bg")[0].style.maxHeight="".concat(calcHeight-41,"px"),this.element.find(".listview.alternate-bg")[0].style.height="".concat(calcHeight-41,"px"),this.element.find(".listview.alternate-bg")[0].style.minHeight=0));var toolbars=this.element.find(".toolbar");toolbars.length&&toolbars.triggerHandler("recalculate-buttons")},isOpen:function isOpen(){return warnAboutDeprecation("visible","isOpen"),this.visible},get isFocused(){var componentHasFocus=!1,activeElem=document.activeElement;DOM.focusableElems(this.element[0]).forEach((function(elem){if(!componentHasFocus){var _$elem$parent$prev$da,_$elem$data,_$elem$data2,$elem=$(elem);if(($elem.is($(activeElem))||elem.contains(activeElem))&&(componentHasFocus=!0),$elem.is("div.dropdown, div.multiselect"))componentHasFocus=null===(_$elem$parent$prev$da=$elem.parent().prev("select").data("dropdown"))||void 0===_$elem$parent$prev$da||null==_$elem$parent$prev$da?void 0:_$elem$parent$prev$da.isFocused;if($elem.is(".lookup"))componentHasFocus=null===(_$elem$data=$elem.data("lookup"))||void 0===_$elem$data||null==_$elem$data?void 0:_$elem$data.isFocused;if($elem.is(".searchfield"))componentHasFocus=null===(_$elem$data2=$elem.data("searchfield"))||void 0===_$elem$data2||null==_$elem$data2?void 0:_$elem$data2.isFocused}}));var tooltipParents=$(activeElem).parents(".tooltip, .popover");return tooltipParents.length&&tooltipParents.each((function(i,elem){var api=$(elem).data("tooltip");api&&api.isFocused&&(componentHasFocus=!0)})),componentHasFocus},keepFocus:function keepFocus(){var self=this;$(document).off("keydown.".concat(self.namespace)).on("keydown.".concat(self.namespace),(function(e){if(27===(e.which||e.keyCode)){var modals=$(".modal.is-visible");if(self.isCancelled=!0,modals.length>1){modals.not(":last").on("beforeclose.".concat(self.namespace),(function(){return!1})),modals.on("afterclose.".concat(self.namespace),(function(){modals.off("beforeclose.".concat(self.namespace))}));var apiModal=modals.last().data("modal");apiModal&&apiModal.close&&apiModal.close()}else self.close()}}));var selector=":focusable, [contenteditable], iframe",tabbableElements=self.element.find(selector),firstTabbable=tabbableElements.first(),lastTabbable=tabbableElements.last();this.changeObserver=new MutationObserver((function(){tabbableElements=self.element.find(selector),firstTabbable=tabbableElements.first(),lastTabbable=tabbableElements.last()})),this.changeObserver.observe(self.element[0],{childList:!0,subtree:!0}),$(self.element).off("keypress.".concat(self.namespace," keydown.").concat(self.namespace)).on("keypress.".concat(self.namespace," keydown.").concat(self.namespace),(function(e){if(9===(e.which||e.keyCode)){var field=$(e.target);!e.shiftKey&&field.is(lastTabbable)?(e.preventDefault(),tabbableElements.first().removeClass("hide-focus").focus()):e.shiftKey&&field.is(firstTabbable)&&(e.preventDefault(),tabbableElements.last().removeClass("hide-focus").focus())}})),this.settings.autoFocus&&$("body").on("focusin.".concat(self.namespace),(function(e){if(!self.dontCheckFocus&&self.isOnTop&&1!==$(e.target).closest(self.element).length&&!self.isFocused){self.dontCheckFocus=!0;var ignoreFocusCheckTimer=new RenderLoopItem({duration:20,timeoutCallback:function timeoutCallback(){delete self.dontCheckFocus}});renderLoop.register(ignoreFocusCheckTimer),firstTabbable.removeClass("hide-focus").focus()}}))},close:function close(destroy){if(!this.visible)return!0;this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver);var elemCanClose=this.element.triggerHandler("beforeclose"),self=this,fields=this.element.find("[data-validate]");if(this.root=this.element.closest(".modal-page-container"),fields.addClass("disable-validation"),!1===elemCanClose)return!1;this.isCAP&&this.element.addClass("is-animating"),this.mainContent&&this.removeNoScroll&&this.mainContent.removeClass("no-scroll"),$("body").off("resize.".concat(this.namespace," focusin.").concat(self.namespace)),this.element.off("keypress.".concat(this.namespace," keydown.").concat(this.namespace)),this.element.removeClass("is-visible"),this.overlay.attr("aria-hidden","true"),this.root&&this.root.attr("aria-hidden","true");var modalContainers=$(".modal-page-container");modalContainers.filter((function(i,elem){var ariaHidden=$(elem).is("[aria-hidden]"),displayNone="none"===$(elem).css("display");return!ariaHidden&&!displayNone})).length<1&&($("body").removeClass("modal-engaged"),modalContainers.not(this.root).removeAttr("aria-hidden"),$(".overlay:not(.busy)").remove()),delete this.dontCheckFocus,self.element.trigger("close",self.isCancelled),this.settings.noRefocus||(this.isFocused&&document.activeElement.blur(),!this.oldActive&&this.settings.triggerButton&&(this.oldActive=this.useJqEl(this.settings.triggerButton)),this.oldActive&&$(this.oldActive).is("a:visible, button:visible, input:visible, textarea:visible")?this.oldActive.focus():this.trigger.parents(".toolbar, .formatter-toolbar").length<1&&this.trigger.focus()),$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden");var closeBtnTooltipAPI=$(this.closeBtn).data("tooltip");closeBtnTooltipAPI&&(closeBtnTooltipAPI.hide(),closeBtnTooltipAPI.reopenDelay=!0),$(".skip-link").off("focus.".concat(this.namespace));var afterCloseTimer=new RenderLoopItem({duration:20,timeoutCallback:function timeoutCallback(){self.overlay.remove(),self.root[0].style.display="none",self.element.trigger("afterclose"),closeBtnTooltipAPI&&delete closeBtnTooltipAPI.reopenDelay,("immediate"===self.settings.trigger||destroy)&&(!self.isCAP||self.isCAP&&!self.capAPI)&&self.destroy()}});return renderLoop.register(afterCloseTimer),!1},useJqEl:function useJqEl(option){return option instanceof jQuery?option:$(option)},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings),this.settings=handleModalDefaults(this.settings)),"immediate"===this.settings.trigger&&this.open(),this},destroy:function destroy(){var self=this,canDestroy=this.element.trigger("beforedestroy");function destroyCallback(){self.trigger.off("click.".concat(self.namespace)),self.element.off("keypress.".concat(self.namespace," keydown.").concat(self.namespace," beforeclose.").concat(self.namespace," afterclose.").concat(self.namespace)),self.element.find("button, .btn-close").off("click.".concat(self.namespace)),self.element.find(".paginated").off("afterpaging.".concat(self.namespace)),$(".skip-link").off("focus.".concat(self.namespace)),$("body").off("resize.".concat(self.namespace)),$(document).off("keydown.".concat(self.namespace)),1===self.element.find(".detailed-message").length&&$("body").off("resize.".concat(self.namespace)),self.isCAP&&self.capAPI&&self.capAPI.destroy(),self.buttonsetAPI&&(self.buttonsetAPI.buttons.forEach((function(button){$(button.element).off("click.".concat(self.namespace))})),self.buttonsetAPI.destroy(),self.buttonsetElem.remove(),delete self.buttonsetAPI,delete self.buttonsetElem),self.trigger.off("click.".concat(self.namespace)),self.root&&self.root.length?self.root.remove():self.element.closest(".modal-page-container").remove(),self.element[0].removeAttribute("data-modal");var destroyTimer=new RenderLoopItem({duration:21,timeoutCallback:function timeoutCallback(){var elem=null,modalApi=self.element?self.element.data("modal"):null;modalApi?elem=self.element[0]:(modalApi=self.trigger?self.trigger.data("modal"):null)&&(elem=self.trigger[0]),elem&&modalApi&&modalApi.overlay&&(modalApi.overlay.remove(),$.removeData(elem,"modal"))}});renderLoop.register(destroyTimer),$.removeData(self.element[0],"modal")}this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),canDestroy&&(this.visible?(this.element.one("afterclose.".concat(self.namespace),(function(){destroyCallback()})),this.close(!0)):destroyCallback())}};var MESSAGE_DEFAULTS={title:"Message Title",status:"",message:"Message Summary",width:"auto",buttons:null,cssClass:null,returnFocus:null,allowedTags:"<a><b><br><br/><del><em><i><ins><mark><small><strong><sub><sup>",audibleLabel:"",overlayOpacity:.7};function Message(element,settings){this.element=$(element),this.settings=utils.mergeSettings(element,settings,MESSAGE_DEFAULTS),this.init()}Message.prototype={init:function init(){var content,self=this,tags=this.settings.allowedTags,allowTags=!0;this.settings.allowedTags.length>0||(allowTags=!1),this.message=$('<div class="modal message"></div>'),this.messageContent=$('<div class="modal-content"></div>'),this.title=$('<h1 class="modal-title" id="message-title">'.concat(allowTags?xssUtils.stripTags(this.settings.title,tags):xssUtils.stripHTML(this.settings.title),"</h1>")).appendTo(this.messageContent).wrap('<div class="modal-header"></div>'),this.content=$('<div class="modal-body"><p class="message" id="message-text">'.concat(allowTags?xssUtils.stripTags(this.settings.message,tags):xssUtils.stripHTML(this.settings.message),"</p></div>")).appendTo(this.messageContent),""!==this.settings.audibleLabel&&this.title.prepend('<span class="audible">'.concat(Locale.translate(this.settings.audibleLabel),"</span>")),this.element.is("body")||(content=this.element,this.content.empty().append(content.show())),this.message.append(this.messageContent).appendTo("body"),this.message.modal({trigger:"immediate",buttons:this.settings.buttons,resizable:this.settings.resizable,close:this.settings.close,isAlert:!0,overlayOpacity:this.settings.overlayOpacity}),"auto"!==this.settings.width&&(this.content.closest(".modal")[0].style.maxWidth="none",this.content.closest(".modal")[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px")),this.settings.cssClass&&this.message.addClass(this.settings.cssClass),this.message.on("beforeclose.message",(function(){return self.element.triggerHandler("beforeclose")})).on("beforeopen.message",(function(){return self.element.triggerHandler("beforeopen")})).on("open.message",(function(){self.element.trigger("open")})).on("afterclose.message",(function(){self.destroy(),self.settings.returnFocus&&self.settings.returnFocus.focus(),$(document).off("keypress.message keydown.message")})),$(document).on("keypress.message keydown.message",(function(e){27===(e.which||e.keyCode)&&setTimeout((function(){var modalData=self.message.data("modal");void 0!==modalData&&modalData.close()}),0)})),"error"===this.settings.status?this.title.addClass("has-status is-error").prepend($.createIconElement("error")):"alert"===this.settings.status?this.title.addClass("has-status is-alert").prepend($.createIconElement("alert")):"success"===this.settings.status?this.title.addClass("has-status is-success").prepend($.createIconElement("success")):this.title.removeClass("has-status is-error is-alert is-success").find("svg").remove()},destroy:function destroy(){var modalData=this.message.data("modal");void 0!==modalData&&modalData.destroy(),this.message.off("beforeclose.message beforeopen.message open.message afterclose.message").remove()}},$.fn.message=function(settings){return this.each((function(){return new Message(this,settings)}))},$.fn.modal=function(settings){return this.each((function(){var instance=$.data(this,"modal"),elem=$(this);if(elem.is(".modal")||(instance=elem.closest(".modal").data("modal")),instance&&settings)return instance.updated(settings),void("function"==typeof instance[settings]&&instance[settings]());instance&&!settings||(instance=$.data(this,"modal",new Modal(this,settings)))}))},$.fn.monthview=function(settings){return this.each((function(){var instance=$.data(this,"monthview");instance?instance.updated(settings):instance=$.data(this,"monthview",new MonthView(this,settings))}))};var MULTISELECT_DEFAULTS={closeOnSelect:!1,empty:!0,filterMode:"contains",maxSelected:void 0,moveSelected:"all",multiple:!0,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,source:void 0};function MultiSelect(element,settings){this.settings=utils.mergeSettings(element,settings,MULTISELECT_DEFAULTS),this.element=$(element),this.init()}MultiSelect.prototype={init:function init(){this.build()},build:function build(){return this.element.dropdown(this.settings),this.dropdown=this.element.data("dropdown"),this},enable:function enable(){this.dropdown.enable()},disable:function disable(){this.dropdown.disable()},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),this.build()},destroy:function destroy(){this.dropdown.destroy(),this.element.off(),$.removeData(this.element[0],"multiselect")}},$.fn.multiselect=function(settings){return this.each((function(){var instance=$.data(this,"multiselect");instance?instance.updated(settings):instance=$.data(this,"multiselect",new MultiSelect(this,settings))}))};var NOTIFICATION_DEFAULTS={message:"Hi! Im a notification message.",type:"alert",parent:".header",link:"#",linkText:"Click here to view."};function Notification(element,settings){this.settings=utils.mergeSettings(element,settings,NOTIFICATION_DEFAULTS),this.element=$(element),this.init()}Notification.prototype={init:function init(){return this.build().handleEvents()},build:function build(){this.notificationEl=document.createElement("div"),this.notificationEl.classList.add("notification"),this.notificationEl.classList.add(this.settings.type);var htmlIcon='\n      <svg class="icon notification-icon icon-'.concat(this.settings.type,'" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-').concat(this.settings.type,'"></use>\n      </svg>'),htmlText='<p class="notification-text">'.concat(this.settings.message);this.settings.linkText&&(htmlText+='<a class="notification-link" href="'.concat(this.settings.link,'">').concat(this.settings.linkText,"</a>")),htmlText+="</p>";var htmlButton='\n      <button type="text" class="notification-close">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-close"></use>\n        </svg>\n        <span class="audible">'.concat(Locale.translate("Close"),"</span>\n      </button>");this.notificationEl.innerHTML=htmlIcon.concat(htmlText,htmlButton);var parentEl=document.querySelector(this.settings.parent);return parentEl.parentNode.insertBefore(this.notificationEl,parentEl.nextSibling),$(this.notificationEl).animateOpen(),this},handleEvents:function handleEvents(){var self=this;return this.element.off("updated.".concat("notification")).on("updated.".concat("notification"),(function(){self.updated()})),$(this.notificationEl).off("click.".concat("notification")).on("click.".concat("notification"),".notification-close",(function(){self.destroy()})),this},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,NOTIFICATION_DEFAULTS)),this.teardown().init()},teardown:function teardown(){return this.element.off("updated.".concat("notification")),this.element.off("click.".concat("notification"),".notification-close"),this},destroy:function destroy(){this.notificationEl&&this.notificationEl.parentNode&&this.notificationEl.parentNode.removeChild(this.notificationEl),this.teardown(),$.removeData(this.element[0],"notification")}},$.fn.notification=function(settings){return this.each((function(){$.data(this,"notification",new Notification(this,settings))}))};var PROGRESS_DEFAULTS={value:0};function Progress(element,settings){this.settings=utils.mergeSettings(element,settings,PROGRESS_DEFAULTS),this.element=$(element),this.init()}Progress.prototype={init:function init(){var _this=this;return this.update(this.settings.value||this.element.attr("data-value")),this.element.off("updated.progress").on("updated.progress",(function(e){e.stopPropagation(),_this.update()})),this},updateAria:function updateAria(value){this.element.attr({role:"progressbar","aria-valuenow":value,"aria-valuemax":"100"});var container=this.element.parent();container.data("tooltip")?container.data("tooltip").content="".concat(value,"%"):(container[0].setAttribute("title","".concat(value,"%")),container.tooltip())},unbind:function unbind(){return this.element.off("updated.progress"),this},update:function update(){var value=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.element.attr("data-value",value),this.element[0].style.width="".concat(value.toString(),"%"),this.updateAria(value)},updated:function updated(settings){return void 0!==settings&&settings.value&&(this.settings.value=settings.value),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"progress")}},$.fn.progress=function(settings){return this.each((function(){var instance=$.data(this,"progress");instance?instance.updated(settings):instance=$.data(this,"progress",new Progress(this,settings))}))};var POPDOWN_DEFAULTS={keepOpen:!1,trigger:void 0,autoFocus:!1,toggleOnFocus:!1,firstLastTab:null};function Popdown(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,POPDOWN_DEFAULTS),this.init(),warnAboutDeprecation("Popover","Popdown")}Popdown.prototype={init:function init(){return this.setup().build().handleEvents()},setup:function setup(){var self=this;function tryPopdownElement(elem){return!!elem&&("string"==typeof elem&&(elem.match("#")&&0===elem.indexOf("#")||(elem="#".concat(elem)),elem=$(elem)),!!elem.length&&(self.popdown=elem,!0))}return this.popdown=$(),this.trigger=this.element,(this.settings.trigger instanceof $||DOM.isElement(this.settings.trigger))&&(this.trigger=$(this.settings.trigger)),this.trigger.is(".dropdown, .multiselect")&&(this.trigger=$("#".concat(this.element.attr("id"),"-shdo"))),tryPopdownElement(this.trigger.attr("data-popdown"))||tryPopdownElement(this.trigger.next(".popdown")),this.id=this.popdown.attr("id"),this.id||(this.id="popdown-".concat($("body").find(".popdown").index(this.popdown)),this.popdown.attr("id",this.id)),this},build:function build(){this.popdown.addClass("popdown").removeClass("hidden"),this.popdown.children(".popdown-contents").length||this.popdown.children().wrap('<div class="popdown-contents"></div>'),this.arrow=$('<div class="arrow"></div>').prependTo(this.popdown),this.place();var ariaExpanded=this.trigger.attr("aria-expanded");return ariaExpanded&&void 0!==ariaExpanded||this.trigger.attr("aria-expanded",""),"true"===ariaExpanded&&this.open(),this.trigger&&this.trigger[0].setAttribute("aria-controls",this.id),this},handleEvents:function handleEvents(){var _this=this,self=this;return this.trigger.on("click.popdown",(function(){self.toggle()})).on("updated.popdown",(function(){self.updated()})),this.setFirstLastTab(),this.settings.toggleOnFocus&&this.trigger.on("focus.popdown",(function(){_this.toggle()})),this},hasValidTriggerSetting:function hasValidTriggerSetting(){return this.settings.trigger instanceof $||DOM.isElement(this.settings.trigger)},hasFocus:function hasFocus(target){var active=target||document.activeElement;if(this.trigger.is(active))return!0;if(this.popdown[0].contains(active))return!0;var dds=this.popdown[0].querySelectorAll(".dropdown, .multiselect"),isOpen=!1;return dds.forEach((function(dd){var api=$(dd).data("dropdown");api&&api.list&&api.list.length&&api.list[0].contains(active)&&(isOpen=!0)})),isOpen},setFirstLastTab:function setFirstLastTab(){var _this2=this,s=this.settings;if(s.firstLastTab&&/function|boolean|object/.test(_typeof(s.firstLastTab))){var first=null,last=null,callback=null;if("object"===_typeof(s.firstLastTab)?(s.firstLastTab.first&&((first=s.firstLastTab.first instanceof jQuery?s.firstLastTab.first:$(s.firstLastTab.first)).first(),this.popdown[0].contains(first[0])||(first=null)),s.firstLastTab.last&&((last=s.firstLastTab.last instanceof jQuery?s.firstLastTab.last:$(s.firstLastTab.last)).first(),this.popdown[0].contains(last[0])||(last=null)),"function"==typeof s.firstLastTab.callback&&(callback=s.firstLastTab.callback)):"function"==typeof s.firstLastTab?callback=s.firstLastTab:("boolean"==typeof s.firstLastTab||s.firstLastTab)&&(callback=this.closeAndContinue),callback){if(!first||!last||first&&!first.length||last&&!last.length){var focusableElem=this.popdown.find('input:not(:disabled):not([tabindex^="-"]),\n            select:not(:disabled):not([tabindex^="-"]),\n            textarea:not(:disabled):not([tabindex^="-"]),\n            [tabindex]:not(:disabled):not([tabindex^="-"])');(!first||first&&!first.length)&&(first=focusableElem.first()),(!last||last&&!last.length)&&(last=focusableElem.last())}this.focusableElem={first:first,last:last},first.on("keydown.popdown",(function(e){9===e.keyCode&&e.shiftKey&&(e.preventDefault(),callback({e:e,self:_this2,first:first}))})),last.on("keydown.popdown",(function(e){9!==e.keyCode||e.shiftKey||(e.preventDefault(),callback({e:e,self:_this2,last:last}))}))}}},closeAndContinue:function closeAndContinue(args){var focusable=$(document).find(":focusable"),index=focusable.index(args.self.trigger);-1!==(index=args.e.shiftKey?index-1<0?-1:index-1:index+1>=focusable.length?-1:index+1)&&focusable.eq(index).focus(),args.self.close()},isOpen:function isOpen(){return"true"===this.trigger.attr("aria-expanded")},open:function open(){if(!this.isAnimating){var self=this;if(this.isAnimating=!0,this.trigger.attr("aria-expanded","true"),this.position(),this.popdown.addClass("visible"),this.settings.autoFocus)(this.focusableElem?this.focusableElem.first:this.popdown.find(":focusable").first()).focus();setTimeout((function(){$("body").on("resize.popdown",(function(){self.hasFocus()||self.close()})),self.settings.keepOpen||$(document).on("click.popdown",handleFocusOut).on("focusin.popdown",handleFocusOut),self.isAnimating=!1}),400)}function handleFocusOut(e){self.hasFocus(e.target)||self.close()}},close:function close(){if(!this.isAnimating){var self=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","false"),this.popdown.removeClass("visible"),$("body").off("resize.popdown"),$(document).off("click.popdown focusin.popdown"),setTimeout((function(){self.popdown[0].style.display="none",self.isAnimating=!1}),400)}},toggle:function toggle(){this.isOpen()?this.close():this.open()},place:function place(){this.scrollparent=$("body"),this.popdown.detach().appendTo(this.scrollparent)},position:function position(){var parent={offset:{left:0,top:0},scrollDistance:{left:0,top:0}},winH=window.innerHeight+$(document).scrollTop(),winW=window.innerWidth-2+$(document).scrollLeft();this.popdown.removeAttr("style"),this.arrow.removeAttr("style"),this.scrollparent.length&&(parent.offset=this.scrollparent.offset(),parent.scrollDistance.top=this.scrollparent.scrollTop(),parent.scrollDistance.left=this.scrollparent.scrollLeft(),winH-=parent.offset.top+parent.scrollDistance.top,winW-=parent.offset.left+parent.scrollDistance.left);var po,adjustX=!1,adjustY=!1,t=this.trigger,to=t.offset(),XoffsetFromTrigger=0,YoffsetFromTrigger=0;this.popdown.addClass("bottom"),this.popdown[0].style.left="".concat(to.left,"px"),this.popdown[0].style.top="".concat(to.top+t.outerHeight(!0)+11,"px"),this.arrow[0].style.left="".concat(t.outerWidth(!0)/2,"px"),this.arrow[0].style.top="".concat(-11,"px"),(po=this.popdown.offset()).left<0&&(adjustX=!0,XoffsetFromTrigger=0-po.left);var rightEdgePos=po.left+this.popdown.outerWidth(!0);if(rightEdgePos>winW&&(adjustX=!0,XoffsetFromTrigger=rightEdgePos-winW+(Locale.isRTL()?20:0)),adjustX){this.popdown[0].style.left="".concat(po.left+-1*XoffsetFromTrigger,"px");var popdownRect=this.popdown[0].getBoundingClientRect(),triggerRect=t[0].getBoundingClientRect(),deltaRightEdge=popdownRect.right-triggerRect.right+10;this.arrow[0].style.left="auto",this.arrow[0].style.right="".concat(deltaRightEdge,"px"),po=this.popdown.offset()}po.top<0&&(adjustY=!0,YoffsetFromTrigger=0-po.top);var bottomEdgePos=po.top+this.popdown.outerHeight(!0);bottomEdgePos>winH&&(adjustY=!0,YoffsetFromTrigger=bottomEdgePos-winH),adjustY&&(this.arrow[0].style.display="none",this.popdown[0].style.top="".concat(po.top+-1*YoffsetFromTrigger,"px"),this.arrow[0].style.top="".concat(parseInt(this.arrow[0].style.top,10)- -1*YoffsetFromTrigger,"px"),po=this.popdown.offset()),(po.top<0||po.top+this.popdown.outerHeight(!0)>winH)&&(this.popdown[0].style.top=0,bottomEdgePos=(po=this.popdown.offset()).top+this.popdown.outerHeight(!0),this.popdown[0].style.height="".concat(parseInt(this.popdown[0].style.height,10)-(bottomEdgePos-winH),"px"))},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.hasValidTriggerSetting()&&(this.trigger=$(this.settings.trigger)),this},teardown:function teardown(){return this.isOpen()&&this.close(),this.trigger.off("updated.popdown click.popdown focus.popdown").removeAttr("aria-controls").removeAttr("aria-expanded"),this.focusableElem&&(this.focusableElem.first.off("keydown.popdown"),this.focusableElem.last.off("keydown.popdown"),delete this.focusableElem),this.originalParent&&this.originalParent.length&&this.popdown.detach().appendTo(this.originalParent),this.arrow.remove(),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"popdown")}},$.fn.popdown=function(settings){return this.each((function(){var instance=$.data(this,"popdown");instance?instance.updated(settings):instance=$.data(this,"popdown",new Popdown(this,settings))}))};var RATING_DEFAULTS={};function Rating(element,settings){this.settings=utils.mergeSettings(element,settings,RATING_DEFAULTS),this.element=$(element),this.init()}Rating.prototype={init:function init(){this.handleEvents(),this.allInputs=this.element.find("input"),this.readonly()},handleEvents:function handleEvents(){for(var _this=this,inputs=$("input",this.element),_loop=function _loop(i,l){$(inputs[i]).on("change.".concat("rating"),(function(){_this.element.hasClass("is-readonly")||_this.val(i+1)}))},i=0,l=inputs.length;i<l;i++)_loop(i)},fillStar:function fillStar(inpt,svg){$(inpt).addClass("is-filled").removeClass("is-half").next(svg).find("svg").changeIcon("star-filled")},emptyStar:function emptyStar(inpt,svg){$(inpt).removeClass("is-filled").removeClass("is-half").next(svg).find("svg").changeIcon("star-outlined")},halfStar:function halfStar(inpt,svg){$(inpt).addClass("is-half").removeClass("is-filled").next(svg).find("svg").changeIcon("star-half")},val:function val(value){if(0===arguments.length||""===value||isNaN(value)||-1===math.sign(value))return this.currentValue;this.currentValue=parseFloat(value,10);for(var chkIdx=Math.floor(this.currentValue),i=0,l=this.allInputs.length;i<l;i++){var input=$(this.allInputs[i]),svgSelector=input.parent().is(".inline")?"svg":"label",valNotAWholeNumber=value%1!=0&&chkIdx===i;valNotAWholeNumber?this.halfStar(input,svgSelector):i<value?this.fillStar(input,svgSelector):this.emptyStar(input,svgSelector),i+1===chkIdx&&input.prop("checked",!0)}return chkIdx<=0&&value>0&&$(this.allInputs[0]).prop("checked",!0),this.currentValue},readonly:function readonly(){var elem=$(this.element);elem.hasClass("is-readonly")&&elem.find("input").attr("disabled","")},enable:function enable(){$(this.element).removeClass("is-readonly").find("input").removeAttr("disabled")},unbind:function unbind(){return this.element.find("input").off("change.".concat("rating")),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,RATING_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"rating")}},$.fn.rating=function(settings){return this.each((function(){var instance=$.data(this,"rating");instance?instance.updated(settings):instance=$.data(this,"rating",new Rating(this,settings))}))};var SIGNIN_DEFAULTS={};function SignIn(element,settings){this.settings=utils.mergeSettings(element,settings,SIGNIN_DEFAULTS),this.element=$(element),this.init()}SignIn.prototype={init:function init(){this.handleKeys()},isCapslock:function isCapslock(e){var charCode=!1,shifton=!1;return(e=e||window.event).which?charCode=e.which:e.keyCode&&(charCode=e.keyCode),e.shiftKey?shifton=e.shiftKey:e.modifiers&&(shifton=!!(4&e.modifiers)),!!(charCode>=97&&charCode<=122&&shifton)||charCode>=65&&charCode<=90&&!shifton},unbind:function unbind(){return $("body").off("keypress.signin blur.signin change.signin"),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,SIGNIN_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"signin")},handleKeys:function handleKeys(){var self=this,cssIcon=$.createIconElement({classes:"icon-capslock",icon:"capslock"});document.msCapsLockWarningOff=!0,this.element.on("keypress.signin",'[type="password"]',(function(e){var field=$(this),fieldParent=field.parent(".field"),iconCapslock=$(".icon-capslock",fieldParent);self.isCapslock(e)&&!field.hasClass("error")?iconCapslock.length||(fieldParent.append(cssIcon),$("body").toast({audibleOnly:!0,message:Locale.translate("CapsLockOn")})):iconCapslock.remove()})).on("blur.signin change.signin",'[type="password"]',(function(){var field=$(this),fieldParent=field.closest(".field"),iconCapslock=$(".icon-capslock",fieldParent);setTimeout((function(){iconCapslock&&iconCapslock.length&&(field.hasClass("error")?iconCapslock.remove():fieldParent.append(cssIcon))}),150)}))}},$.fn.signin=function(settings){return this.each((function(){var instance=$.data(this,"signin");instance?instance.updated(settings):instance=$.data(this,"signin",new SignIn(this,settings))}))};var SLIDER_DEFAULTS={value:[50],min:0,max:100,range:!1,step:void 0,ticks:[],tooltipContent:void 0,persistTooltip:!1};function Slider(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,SLIDER_DEFAULTS),this.init()}function isInt(n){return n%1==0}function roundToIncrement(number,increment){return increment&&!isNaN(increment)&&0!==increment||(increment=1),Math.round(number/increment)*increment}function getDistance(pointA,pointB){var aX=pointA[0],aY=pointA[1],bX=pointB[0],bY=pointB[1];return Math.sqrt(Math.pow(bX-aX,2)+Math.pow(bY-aY,2))}Slider.prototype={init:function init(){return this.buildSettings().addMarkup().bindEvents()},buildSettings:function buildSettings(){var parsedTicks,self=this;if(this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.settings||(this.settings={}),this.settings.value=void 0!==this.element.attr("value")?this.element.attr("value"):this.settings.value,this.settings.min=void 0!==this.element.attr("min")?parseInt(this.element.attr("min"),10):this.settings.min,this.settings.max=void 0!==this.element.attr("max")?parseInt(this.element.attr("max"),10):this.settings.max,this.settings.range=void 0!==this.element.attr("data-range")?"true"===this.element.attr("data-range"):this.settings.range,this.settings.step=isNaN(this.element.attr("step"))?this.settings.step:Number(this.element.attr("step")),""===this.settings.value&&(this.settings.value=this.settings.min),void 0!==this.element.attr("data-ticks")){try{parsedTicks=JSON.parse(self.element.attr("data-ticks"))}catch(e){parsedTicks=[]}$.isArray(parsedTicks)&&(this.settings.ticks=parsedTicks)}var isTooltipPersist="true"===this.element.attr("data-tooltip-persist")||!0===this.element.attr("data-tooltip-persist");if(this.settings.persistTooltip=void 0!==this.element.attr("data-tooltip-persist")?isTooltipPersist:this.settings.persistTooltip,this.settings.tooltip=this.settings.tooltipContent,void 0!==this.element.attr("data-tooltip-content"))try{self.settings.tooltip=JSON.parse(self.element.attr("data-tooltip-content"))}catch(e){self.settings.tooltip=["",""]}if("string"==typeof this.settings.tooltip)if(-1===this.settings.tooltip.indexOf(","))this.settings.tooltip=[this.settings.tooltip,""];else{var strings=this.settings.tooltip.split(",");this.settings.tooltip=[strings[0]],this.settings.tooltip.push(strings[1]?strings[1]:"")}this.settings.tooltip&&1===this.settings.tooltip.length&&this.settings.tooltip.push(""),this.ticks=[];var minTick={value:this.settings.min,description:self.getModifiedTextValue(this.settings.min)},maxTick={value:this.settings.max,description:self.getModifiedTextValue(this.settings.max)};if(this.settings.ticks){var ticks=self.settings.ticks||[];if($.isArray(ticks)&&ticks.length>0){var equalsMin=ticks.filter((function(obj){return obj.value===self.settings.min})),equalsMax=ticks.filter((function(obj){return obj.value===self.settings.max}));equalsMin.length>0&&(minTick.description=equalsMin[0].description,minTick.color=equalsMin[0].color,ticks=$.grep(ticks,(function(val){return val!==equalsMin[0]}))),equalsMax.length>0&&(maxTick.description=equalsMax[0].description,maxTick.color=equalsMax[0].color,ticks=$.grep(ticks,(function(val){return val!==equalsMax[0]})))}self.ticks.push(minTick);for(var i=0;i<ticks.length;i++){var tick={};void 0!==ticks[i].value&&(tick.value=ticks[i].value,tick.description=void 0!==ticks[i].description?ticks[i].description:"",tick.color=ticks[i].color,self.ticks.push(tick))}self.ticks.push(maxTick)}else this.ticks.push(minTick,maxTick);if($.isArray(this.settings.value))this.settings.value[0]=isNaN(this.settings.value[0])?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value[0],10);else if("number"==typeof this.settings.value)this.settings.value=[this.settings.value];else if(-1===this.settings.value.indexOf(","))this.settings.value=[isNaN(this.settings.value)?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value,10)];else{var vals=this.settings.value.split(",");vals[0]=isNaN(vals[0])?this.settings.min:parseInt(vals[0],10),vals[1]=isNaN(vals[1])?this.settings.max:parseInt(vals[1],10),this.settings.value=vals}return this.settings.range&&!this.settings.value[1]&&this.settings.value.push(this.settings.max),this},addMarkup:function addMarkup(){var self=this,isVertical=!1;if("INPUT"!==self.element[0].tagName)throw new Error('Element with ID "'.concat(self.element.id,"\" cannot invoke a slider;  it's not an Input element."));self.originalElement={type:self.element.attr("type")},self.element.attr("type","hidden"),self.wrapper=$('<div class="slider-wrapper"></div>').attr("id","".concat(self.element.attr("id"),"-slider")).insertAfter(self.element),self.hitarea=$('<div class="slider-hit-area"></div>').appendTo(self.wrapper),self.range=$('<div class="slider-range"></div>').appendTo(self.wrapper),this.element.hasClass("vertical")&&(this.wrapper.addClass("vertical"),isVertical=!0),this.isRtlHorizontal=Locale.isRTL()&&!isVertical,this.isRtlVertical=Locale.isRTL()&&isVertical;var style=this.element.attr("style");style&&(style.match(/min-height/)&&(this.wrapper[0].style.minHeight=this.element[0].style.minHeight,style=style.replace("min-height","")),style.match(/height/)&&(this.wrapper[0].style.height=this.element[0].style.height),style.match(/min-width/)&&(this.wrapper[0].style.minWidth=this.element[0].style.minWidth,style=style.replace("min-width","")),style.match(/width/)&&(this.wrapper[0].style.width=this.element[0].style.width)),self.handles=[];var labelText=self.element.prev("label").text(),handleLower=$('<div class="slider-handle'.concat(self.settings.range?" lower":"",'" tabindex="0"></div>')).attr("aria-label","".concat(self.settings.range?Locale.translate("SliderMinimumHandle"):Locale.translate("SliderHandle")," ").concat(labelText));if(self.handles.push(handleLower),self.settings.range){var handleHigher=$('<div class="slider-handle higher" tabindex="0"></div>').attr("aria-label","".concat(Locale.translate("SliderMaximumHandle")," ").concat(labelText));self.handles.push(handleHigher)}return $.each(self.handles,(function(i,handle){handle.attr({role:"slider","aria-orientation":isVertical?"vertical":"horizontal","aria-valuemin":self.settings.min,"aria-valuemax":self.settings.max}).hideFocus(),handle.appendTo(self.wrapper)})),self.ticks.forEach((function(tick){!function positionTick(tick){var convertValueToPercentage=self.isRtlHorizontal?100-self.convertValueToPercentage(tick.value):self.convertValueToPercentage(tick.value),pos="calc(".concat(convertValueToPercentage,"% - 4px)");tick.element=$('<div class="tick" data-value="'.concat(tick.value,'"></div>')),tick.label=$('<span class="label">'.concat(tick.description,"</span>")),tick.element[0].style[isVertical?"bottom":"left"]=pos,tick.element.append(tick.label),self.wrapper.append(tick.element),isVertical||(tick.label[0].style.left="".concat(-(tick.label.outerWidth()/2-tick.element.width()/2),"px"))}(tick)})),self.value(self.settings.value),self.updateRange(),$.each(self.handles,(function(i,handle){self.settings.tooltip&&(handle.tooltip({content:function content(){return"".concat(self.getModifiedTextValue(Math.floor(self.value()[i])))},placement:isVertical?"right":"bottom",trigger:"focus",keepOpen:self.settings.persistTooltip}),handle.removeAttr("aria-describedby"))})),!0===this.element.prop("readonly")?this.readonly():!0===this.element.prop("disabled")&&this.disable(),self},handleRangeClick:function handleRangeClick(e){if(e.preventDefault(),!this.isDisabled()){var self=this,isVertical=this.wrapper.hasClass("vertical"),pageX="click"!==e.originalEvent.type?e.originalEvent.changedTouches[0].pageX:e.pageX,pageY="click"!==e.originalEvent.type?e.originalEvent.changedTouches[0].pageY:e.pageY,mouseX=pageX-self.wrapper.offset().left-$(document).scrollLeft(),mouseY=pageY-self.wrapper.offset().top-$(document).scrollTop(),clickCoords=[mouseX,mouseY],firstHandleCoords=[self.handles[0].offset().left+self.handles[0].width()/2-self.wrapper.offset().left-$(document).scrollLeft(),self.handles[0].offset().top+self.handles[0].height()/2-self.wrapper.offset().top-$(document).scrollTop()],oldVals=self.value(),dLower=getDistance(clickCoords,firstHandleCoords),targetOldVal=oldVals[0],targetHandle=self.handles[0];targetHandle.addClass("hide-focus");var val=function conversion(){if(isVertical){var wh=self.wrapper.height();return(wh-mouseY)/wh*100}return mouseX/self.wrapper.width()*100}(),rangeVal=self.convertPercentageToValue(val);self.handles[1]&&dLower>getDistance(clickCoords,[self.handles[1].offset().left+self.handles[1].width()/2-self.wrapper.offset().left-$(document).scrollLeft(),self.handles[1].offset().top+self.handles[1].height()/2-self.wrapper.offset().top-$(document).scrollTop()])?(self.value([void 0,rangeVal]),targetHandle=self.handles[1],targetOldVal=oldVals[1]):self.value([rangeVal]),self.checkHandleDifference(targetHandle,targetOldVal,rangeVal);var moveBy=self.settings.step?self.settings.step:0;rangeVal<targetOldVal?self.decreaseValue(e,targetHandle,rangeVal,moveBy):self.increaseValue(e,targetHandle,rangeVal,moveBy),self.settings.tooltip||targetHandle.focus()}},activateHandle:function activateHandle(handle){handle.addClass("is-active")},deactivateHandle:function deactivateHandle(handle){handle.removeClass("is-active")},enableHandleDrag:function enableHandleDrag(handle){if(!this.isDisabled()){var self=this,draggableOptions={containment:"parent",axis:this.isVertical()?"y":"x",clone:!1};handle.drag(draggableOptions).on("drag.slider",(function(e,args){!function updateHandleFromDraggable(e,thisHandle,args){if(!self.isDisabled()){var val=function conversion(){if(self.isVertical()){var adjustedHeight=self.wrapper.height()-thisHandle.outerHeight();return(adjustedHeight-args.top)/adjustedHeight*100}return args.left/(self.wrapper.width()-thisHandle.outerWidth())*100}(),rangeVal=self.convertPercentageToValue(val);if(self.settings.range){var originalVal=self.value();thisHandle.hasClass("higher")&&rangeVal<=originalVal[0]&&(rangeVal=originalVal[0]),thisHandle.hasClass("lower")&&rangeVal>=originalVal[1]&&(rangeVal=originalVal[1])}self.settings.step&&(rangeVal=Math.round(rangeVal/self.settings.step)*self.settings.step),e.defaultPrevented||(self.value(thisHandle.hasClass("higher")?[void 0,rangeVal]:[rangeVal]),self.updateRange(),self.updateTooltip(thisHandle),self.element.trigger("sliding",thisHandle,rangeVal))}}(e,$(e.currentTarget),args)})).on("dragstart",(function(){$(this).addClass("is-dragging"),self.range.addClass("is-dragging"),self.element.trigger("slidestart",handle)})).on("dragend",(function(){$(this).removeClass("is-dragging"),self.range.removeClass("is-dragging"),self.element.trigger("slidestop",handle)}))}},disableHandleDrag:function disableHandleDrag(handle){handle.off("drag.slider dragstart dragend"),this.range.removeClass("is-dragging"),handle.removeClass("is-dragging");var dragAPI=handle.data("drag");dragAPI&&dragAPI.destroy()},convertValueToPercentage:function convertValueToPercentage(value){return(value-this.settings.min)/(this.settings.max-this.settings.min)*100},convertPercentageToValue:function convertPercentageToValue(percentage){var val=percentage/100*(this.settings.max-this.settings.min)+this.settings.min;return this.isRtlHorizontal?this.settings.max-val+this.settings.min:val},getIncrement:function getIncrement(){var increment=.1*(this.settings.max-this.settings.min);return void 0!==this.settings.step&&increment<=this.settings.step&&(increment=this.settings.step),increment},handleKeys:function handleKeys(e,self){if(!self.isDisabled()){var key=e.which,handle=$(e.currentTarget);switch(handle.removeClass("hide-focus"),key){case 33:self.increaseValue(e,handle,void 0,this.getIncrement());break;case 34:self.decreaseValue(e,handle,void 0,this.getIncrement());break;case 35:self.increaseValue(e,handle,this.settings.max);break;case 36:self.decreaseValue(e,handle,this.settings.min);break;case 38:case 39:self.isRtlHorizontal&&39===key?self.decreaseValue(e,handle):self.increaseValue(e,handle);break;case 37:case 40:self.isRtlHorizontal&&37===key?self.increaseValue(e,handle):self.decreaseValue(e,handle)}}},increaseValue:function increaseValue(e,handle,value,increment){e.preventDefault(),clearTimeout(handle.data("animationTimeout"));var testVal,updatedVal,finalVal,val=this.value().slice(0),incrementBy=void 0!==increment?increment:void 0!==this.settings.step?this.settings.step:1;if(handle.hasClass("higher"))finalVal=(updatedVal=(testVal=void 0!==value?value:val[1])+(incrementBy=isInt(testVal)?incrementBy:isNaN(testVal%incrementBy)?0:testVal%incrementBy)<this.settings.max?testVal+incrementBy:this.settings.max)%incrementBy?updatedVal:roundToIncrement(updatedVal,incrementBy),this.value([void 0,finalVal]);else{testVal=void 0!==value?value:val[0];var maxValue=void 0===val[1]?this.settings.max:val[1];finalVal=(updatedVal=testVal+(incrementBy=isInt(testVal)?incrementBy:isNaN(testVal%incrementBy)?0:incrementBy-testVal%incrementBy)<maxValue?testVal+incrementBy:maxValue)%incrementBy?updatedVal:roundToIncrement(updatedVal,incrementBy),this.value([finalVal])}this.checkHandleDifference(handle,testVal,finalVal),this.updateRange(),this.updateTooltip(handle)},decreaseValue:function decreaseValue(e,handle,value,decrement){e.preventDefault(),clearTimeout(handle.data("animationTimeout"));var testVal,updatedVal,finalVal,val=this.value(),decrementBy=void 0!==decrement?decrement:void 0!==this.settings.step?this.settings.step:1;if(handle.hasClass("higher")){testVal=void 0!==value?value:val[1];var minValue=void 0===val[0]?this.settings.min:val[0];finalVal=(updatedVal=testVal-(decrementBy=isInt(testVal)?decrementBy:isNaN(testVal%decrementBy)?0:decrementBy-testVal%decrementBy)>minValue?testVal-decrementBy:minValue)%decrementBy?updatedVal:roundToIncrement(updatedVal,decrementBy),this.value([void 0,finalVal])}else finalVal=(updatedVal=(testVal=void 0!==value?value:val[0])-(decrementBy=isInt(testVal)?decrementBy:isNaN(testVal%decrementBy)?0:testVal%decrementBy)>this.settings.min?testVal-decrementBy:this.settings.min)%decrementBy?updatedVal:roundToIncrement(updatedVal,decrementBy),this.value([finalVal]);this.checkHandleDifference(handle,testVal,finalVal),this.updateRange(),this.updateTooltip(handle)},updateRange:function updateRange(){for(var self=this,newVal=this.value(),percentages=[],color=this.getColorClosestToValue(),isVertical=self.wrapper.hasClass("vertical"),i=0;i<this.ticks.length;i++){(this.settings.range?newVal[0]<this.ticks[i].value&&this.ticks[i].value<=newVal[1]:this.ticks[i].value<=newVal[0])?(this.ticks[i].element.addClass("complete"),color&&(this.ticks[i].element[0].style.backgroundColor=color,this.ticks[i].element.addClass("inherit"))):(this.ticks[i].element.removeClass("complete"),color&&(this.ticks[i].element[0].style.backgroundColor="",this.ticks[i].element.removeClass("inherit")))}color&&(this.range[0].style.backgroundColor=color,$.each(this.handles,(function(i,handle){handle[0].style.backgroundColor=color,handle[0].style.borderColor=color}))),$.each(self.ticks,(function(i){self.ticks[i].label[0].style.color=""})),percentages[0]=this.convertValueToPercentage(newVal[0]),void 0!==newVal[1]&&(percentages[1]=this.convertValueToPercentage(newVal[1]));var posAttrs=function getPosAttrs(){return isVertical?["bottom","top"]:self.isRtlHorizontal?["right","left"]:["left","right"]}(),cssProps={};function positionHandle(handle,percentage){var basePosition=isVertical?posAttrs[1]:posAttrs[0],realPercentage=isVertical?100-percentage:percentage;handle.css(basePosition,"calc(".concat(realPercentage,"% - ").concat(handle.outerWidth()/2,"px)"))}this.handles[1]?(cssProps[posAttrs[0]]="".concat(percentages[0],"%"),cssProps[posAttrs[1]]="".concat(100-percentages[1],"%")):(cssProps[posAttrs[0]]="0%",cssProps[posAttrs[1]]="".concat(100-percentages[0],"%")),this.range.css(cssProps),this.handles[0].hasClass("is-animated")&&this.handles[0].data("animationTimeout",setTimeout((function(){self.handles[0].removeClass("is-animated").trigger("slide-animation-end"),self.range.removeClass("is-animated")}),201)),positionHandle(this.handles[0],percentages[0]),this.handles[1]&&(this.handles[1].hasClass("is-animated")&&this.handles[1].data("animationTimeout",setTimeout((function(){self.handles[1].removeClass("is-animated").trigger("slide-animation-end"),self.range.removeClass("is-animated")}),201)),positionHandle(this.handles[1],percentages[1]),this.handles[0].attr("aria-valuemax",newVal[1]),this.handles[1].attr("aria-valuemin",newVal[0]))},checkHandleDifference:function checkHandleDifference(handle,originalVal,updatedVal){if(!$("html").hasClass("ie9")){var origPercent=this.convertValueToPercentage(originalVal),updatedPercent=this.convertValueToPercentage(updatedVal);Math.abs(origPercent-updatedPercent)>3&&(handle.addClass("is-animated"),this.range.addClass("is-animated"))}},updateTooltip:function updateTooltip(handle){if(this.settings.tooltip){if(!handle){var tooltipHigh,tooltipLow=this.handles[0].data("tooltip");return this.handles[1]&&(tooltipHigh=this.handles[1].data("tooltip")),tooltipLow.hide(),void(tooltipHigh&&tooltipHigh.hide())}var tooltip=handle.data("tooltip");handle.hasClass("is-animated")?(tooltip.hide(),handle.one("slide-animation-end",(function(){update()}))):update()}function update(){tooltip.position(),handle.focus()}},getColorClosestToValue:function getColorClosestToValue(){for(var highestTickColor,c,themeColors={light:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},dark:{default:"#ffffff","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},contrast:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#e4882b",good:"#76b051","very-good":"#56932e",superior:"#397514"}}[theme.currentTheme.id.split("-")[2]],val=this.value()[0],i=0;i<this.ticks.length;i++)(c=this.ticks[i].color)&&val>=this.ticks[i].value&&(highestTickColor=c,highestTickColor=c.indexOf("#")>-1?c:themeColors[c]||themeColors.default);return highestTickColor},value:function value(minVal,maxVal){var self=this;return void 0===minVal&&void 0===maxVal||(minVal&&$.isArray(minVal)&&(void 0!==minVal[1]&&(maxVal=minVal[1]),minVal=minVal[0]),void 0===minVal&&$.isArray(self._value)&&void 0!==self._value[0]&&(minVal=self._value[0]),void 0===maxVal&&$.isArray(self._value)&&void 0!==self._value[1]&&(maxVal=self._value[1]),self._value=[minVal,maxVal],self.element.val(void 0!==maxVal?self._value:self._value[0]),$.each(self.handles,(function(i,handle){var value=self._value[i],valueText=self.getModifiedTextValue(value);$.each(self.ticks,(function(a,tick){tick.value===value&&(valueText=tick.description)})),handle.attr({"aria-valuenow":self._value[i],"aria-valuetext":valueText})})),self.element.trigger("change")),self._value},getModifiedTextValue:function getModifiedTextValue(content){return this.settings.tooltip?this.settings.tooltip[0]+content+this.settings.tooltip[1]:content},enable:function enable(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),this.wrapper.removeClass("is-disabled");var self=this;return $.each(this.handles,(function(i,handle){self.enableHandleDrag(handle)})),this},disable:function disable(){this.element.prop("disabled",!0),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),this.wrapper.addClass("is-disabled");var self=this;return $.each(this.handles,(function(i,handle){self.disableHandleDrag(handle)})),this},readonly:function readonly(){var _this=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!0),this.wrapper.removeClass("is-disabled"),this.wrapper.addClass("is-readonly"),$.each(this.handles,(function(i,handle){_this.disableHandleDrag(handle)})),this},isDisabled:function isDisabled(){return this.element.prop("disabled")},isVertical:function isVertical(){return this.wrapper.hasClass("vertical")},setValue:function setValue(lowVal,highVal){var oldVals=this.value();this.checkHandleDifference(this.handles[0],oldVals[0],lowVal),this.handles[1]&&this.checkHandleDifference(this.handles[1],oldVals[1],highVal);var vals=this.value(lowVal,highVal);return this.updateRange(),this.updateTooltip(),vals},refresh:function refresh(lowVal,highVal){return deprecateMethod(this.setValue,this.refresh).apply(this,[lowVal,highVal])},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.element.removeAttr("value"),this.teardown().init()},teardown:function teardown(){var self=this;return $.each(self.handles,(function(i,handle){self.disableHandleDrag(handle),handle.off("mousedown.slider click.slider blur.slider keydown.slider keyup.slider")})),this.wrapper.off("click.slider touchend.slider touchcancel.slider").remove(),this.element.attr("type",xssUtils.ensureAlphaNumeric(this.originalElement.type)),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"slider")},bindEvents:function bindEvents(){var self=this;return $.each(self.handles,(function(i,handle){handle.on("mousedown.slider",(function(){self.isDisabled()||$(this).focus()})).on("click.slider",(function(e){e.preventDefault()})).on("keydown.slider",(function(e){self.activateHandle(handle),self.handleKeys(e,self)})).on("keyup.slider blur.slider",(function(){self.deactivateHandle(handle)})),self.enableHandleDrag(handle)})),self.wrapper.on("click.slider touchend.slider touchcancel.slider",(function(e){self.handleRangeClick(e)})),self.element.on("updated.slider",(function(){self.updated()})),self}},$.fn.slider=function(settings){return this.each((function(){var instance=$.data(this,"slider");instance?instance.updated(settings):instance=$.data(this,"slider",new Slider(this,settings))}))};var SPINBOX_DEFAULTS={autocorrectOnBlur:!1,min:-2147483647,max:2147483647,step:null,validateOnInput:!0};function Spinbox(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,SPINBOX_DEFAULTS),this.init()}Spinbox.prototype={get isTouch(){return Environment.features.touch},get isWrapped(){return this.element.parent().is(".spinbox-wrapper")},get isInlineLabel(){return this.element.parent().is(".inline")},init:function init(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.setInitialValue().addMarkup().bindEvents().setWidth()},setWidth:function setWidth(){var style=this.element[0].style;return style.width&&(this.element.parent()[0].style.width="".concat(parseInt(style.width,10)+2*this.element.parent().find(".down").outerWidth(),"px")),this},setInitialValue:function setInitialValue(){var val=this.checkForNumeric(this.element.val());return this.element.val(val),this.element.attr("data-trackdirty")&&this.element.data("original",val),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&this.element.attr("pattern","\\d*"),this.element.attr("max")?this.settings.max=this.element.attr("max"):this.settings.max&&this.element.attr("max",this.settings.max),this.element.attr("step")?this.settings.max=this.element.attr("step"):this.settings.step&&this.element.attr("step",this.settings.step),this.element.attr("min")?this.settings.max=this.element.attr("min"):this.settings.min&&this.element.attr("min",this.settings.min),this},addMarkup:function addMarkup(){var _this=this;if(this.isInlineLabel)this.inlineLabel.addClass("spinbox-wrapper");else if(!this.isWrapped){if(this.element.is(".field-options")){var fieldOptionsTrigger=this.element.closest(".field").find(".btn-actions");this.element.add(fieldOptionsTrigger).add(fieldOptionsTrigger.next(".popupmenu")).wrapAll('<span class="spinbox-wrapper"></span>')}else this.element.wrap('<span class="spinbox-wrapper"></span>')}this.isWrapped&&(this.buttons={down:this.element.parent().find(".down"),up:this.element.parent().find(".up")}),this.buttons.up.length||(this.buttons.up=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control up">+</span>')).insertAfter(this.element),this.buttons.up.button()),this.buttons.down.length||(this.buttons.down=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control down">-</span>')).insertBefore(this.element),this.buttons.down.button());var elemClasses=this.element[0].className;["input-xs","input-sm","input-mm","input-md","input-lg"].forEach((function(size){if(elemClasses.indexOf(size)>-1){var spinboxSize=size.replace("input","spinbox");_this.isWrapped?_this.element.parent(".spinbox-wrapper").addClass(spinboxSize):_this.isInlineLabel&&_this.inlineLabel.addClass(spinboxSize)}}));var min=this.element.attr("min"),max=this.element.attr("max"),mask=this.element.attr("data-mask"),maskValue="",attributes={role:"spinbutton"},i=0;if(min||max||mask||(max="9999999"),(min||max)&&!mask){var newMask="",tempMin=min||"",tempMax=max||"",longerVal=tempMin.length>tempMax.length?tempMin:tempMax;for(i=0;i<=longerVal.length;)newMask+="#",i++;-1===tempMin.indexOf("-")&&-1===tempMax.indexOf("-")||(newMask="-".concat(newMask.substring(0,newMask.length-1))),attributes["data-mask"]=newMask,mask=newMask}var maskSize=mask.length;for(i=0;i<=maskSize;)maskValue+="9",i++;return-1===mask.indexOf("-")?(attributes.min=min||0,attributes.max=max||maskValue):(attributes.min=min||maskValue,attributes.max=max||maskValue.substring(0,maskValue.length-1)),this.element.attr("data-mask-mode")&&"number"===this.element.attr("data-mask-mode")||(attributes["data-mask-mode"]="number"),this.element.data("mask")&&"object"===_typeof(this.element.data("mask"))&&this.element.data("mask").destroy(),attributes["aria-valuemin"]=min||0,attributes["aria-valuemax"]=max||0,this.element.attr(attributes),this.updateAria(this.element.val()),this.element.mask(),this.isDisabled()&&this.disable(),this.element.attr("readonly")&&this.readonly(),this},enableLongPress:function enableLongPress(e,self){self.addButtonStyle(e),self.longPressInterval=setInterval((function(){$(e.currentTarget).is(":hover")&&self.handleClick(e)}),250)},disableLongPress:function disableLongPress(e,self){self.removeButtonStyle(e),clearInterval(self.longPressInterval),self.longPressInterval=null},handleClick:function handleClick(e){(e.preventDefault(),this.isDisabled()||1!==e.which||this.isReadonly())||($(e.currentTarget).hasClass("up")?this.increaseValue():this.decreaseValue(),this.element.focus())},handleKeyDown:function handleKeyDown(e,self){var key=e.which;if(-1!==$.inArray(key,[35,36,37,38,39,40])&&!this.isReadonly())switch(key){case 35:self.element.attr("min")&&self.element.val(self.element.attr("min"));break;case 36:self.element.attr("max")&&self.element.val(self.element.attr("max"));break;case 38:self.addButtonStyle(self.buttons.up),self.increaseValue();break;case 40:self.addButtonStyle(self.buttons.down),self.decreaseValue()}},handleKeyPress:function handleKeyPress(e,self){var key=e.which;if(!(key<48||key>57&&key<96||key>105))return this.handleInput(e,self)},handleInput:function handleInput(e,self){if(!self.isDisabled()&&!this.isReadonly()&&!this.settings.autocorrectOnBlur)return this.correctValue(e)},handleKeyup:function handleKeyup(e,self){if(!self.isDisabled()&&!this.isReadonly()){var key=e.which;switch(key){case 38:case 39:Locale.isRTL()&&39===key?self.removeButtonStyle(self.buttons.down):self.removeButtonStyle(self.buttons.up);break;case 37:case 40:Locale.isRTL()&&39===key?self.removeButtonStyle(self.buttons.up):self.removeButtonStyle(self.buttons.down)}self.updateAria(self.element.val())}},handleAfterPaste:function handleAfterPaste(self){var min=Number(self.element.attr("min")),max=Number(self.element.attr("max")),val=Number(self.element.val());val<min&&(val=min),val>max&&(val=max),self.updateVal(val)},correctValue:function correctValue(e){var num=Number(this.element.val()),min=this.element.attr("min"),max=this.element.attr("max");return num<min?(e&&e.preventDefault(),this.updateVal(min)):num>max?(e&&e.preventDefault(),this.updateVal(max)):void 0},increaseValue:function increaseValue(){var max=this.element.attr("max"),val=this.checkForNumeric(this.element.val())+Number(this.element.attr("step")||1);return max&&val>max?this.updateVal(max):this.updateVal(val)},decreaseValue:function decreaseValue(){var min=this.element.attr("min"),val=this.checkForNumeric(this.element.val())-Number(this.element.attr("step")||1);return min&&val<min?this.updateVal(min):this.updateVal(val)},updateVal:function updateVal(newVal){this.element.val(newVal).trigger("change"),this.updateAria(newVal)},checkForNumeric:function checkForNumeric(val){return""===val?val:$.isNumeric(val)?Number(val):(val=parseInt(val,10),$.isNumeric(val)?Number(val):0)},updateAria:function updateAria(val){var min=this.element.attr("min"),max=this.element.attr("max");val=this.checkForNumeric(val),this.element[0].setAttribute("aria-valuenow",val||"0"),this.element[0].setAttribute("autocomplete","off"),this.setIsDisabled(this.buttons.up,""!==val&&max&&val>=max?"disable":"enable"),this.setIsDisabled(this.buttons.down,""!==val&&min&&val<=min?"disable":"enable")},addButtonStyle:function addButtonStyle(e){if(!this.isDisabled()&&!this.isReadonly()){var target=e;e.currentTarget&&(target=$(e.currentTarget)),target.addClass("is-active")}},removeButtonStyle:function removeButtonStyle(e){if(!this.isDisabled()&&!this.isReadonly()){var target=e;e.currentTarget&&(target=$(e.currentTarget)),target.removeClass("is-active")}},enable:function enable(){this.element.prop("disabled",!1),this.element.parent(".spinbox-wrapper").removeClass("is-disabled is-readonly"),this.element.prop("readonly",!1)},disable:function disable(){this.element.prop("disabled",!0),this.element.parent(".spinbox-wrapper").addClass("is-disabled")},readonly:function readonly(){this.element.prop("readonly",!0),this.element.parent(".spinbox-wrapper").addClass("is-readonly")},isReadonly:function isReadonly(){return this.element.prop("readonly")},isDisabled:function isDisabled(){return this.element.prop("disabled")},setIsDisabled:function setIsDisabled(button,isDisabled){button[(isDisabled=void 0===isDisabled||!(!isDisabled||"enable"===isDisabled))?"addClass":"removeClass"]("is-disabled")},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this},destroy:function destroy(){var mask=this.element.data("mask");for(var button in mask&&"function"==typeof mask.destroy&&mask.destroy(),this.buttons){var buttonAPI=$(button).data("button");buttonAPI&&buttonAPI.destroy()}this.buttons.up.off("click.spinbox mousedown.spinbox"),this.buttons.up.remove(),this.buttons.down.off("click.spinbox mousedown.spinbox"),this.buttons.down.remove(),this.element.off("focus.spinbox blur.spinbox keydown.spinbox keyup.spinbox"),this.element.unwrap(),$.removeData(this.element[0],"spinbox")},bindEvents:function bindEvents(){var self=this,preventClick=!1;return this.element.on("focus.spinbox",(function(){self.element.parent(".spinbox-wrapper").addClass("is-focused")})).on("blur.spinbox",(function(){self.element.parent(".spinbox-wrapper").removeClass("is-focused"),self.settings.autocorrectOnBlur&&self.correctValue()})).on("keydown.spinbox",(function(e){self.handleKeyDown(e,self)})).on("input.spinbox",(function(e){self.handleInput(e,self)})).on("keyup.spinbox",(function(e){self.handleKeyup(e,self)})).on("afterpaste.mask",(function(){self.handleAfterPaste(self)})),this.buttons.up.add(this.buttons.down[0]).on("touchstart.spinbox mousedown.spinbox",(function(e){if(1===e.which){if(preventClick||self.handleClick(e),self.isTouch)return;preventClick=!0,self.enableLongPress(e,self),$(document).one("mouseup",(function(){self.disableLongPress(e,self),preventClick=!1,self.element.focus()}))}})),this}},$.fn.spinbox=function(settings){return this.each((function(){var instance=$.data(this,"spinbox");instance?instance.updated(settings):instance=$.data(this,"spinbox",new Spinbox(this,settings))}))};var SPLITTER_DEFAULTS={axis:"x",side:"left",resize:"immediate",containment:null,save:!0,maxWidth:{left:"auto",right:"auto"}};function Splitter(element,settings){this.settings=utils.mergeSettings(element,settings,SPLITTER_DEFAULTS),this.element=$(element),this.init()}Splitter.prototype={init:function init(){return this.build().handleEvents()},build:function build(){var parentHeight,self=this,s=this.settings,splitter=this.element,parent=splitter.parent(),direction="x"===s.axis?"left":"top",thisSide=parent.is(".content")?parent.parent():parent,w=parent.width();if(setTimeout((function(){parentHeight=parent.height()}),0),this.docBody=$("body"),this.isSplitterRightSide=splitter.is(".splitter-right")||"x"===s.axis&&"right"===s.side,this.isSplitterHorizontal=splitter.is(".splitter-horizontal")||"y"===s.axis,s.uniqueId=utils.uniqueId(this.element,"splitter"),this.isSplitterRightSide){var thisPrev=thisSide.prev();if(thisPrev.is(".main")?(this.leftSide=thisPrev,w=thisSide.parent().outerWidth()-w):(this.leftSide=thisSide,splitter.addClass("splitter-right")),thisSide.addClass("is-right-side").next().addClass("flex-grow-shrink is-right-side").parent().addClass("splitter-container"),s.collapseButton){var savedOffset=0;this.splitterCollapseButton=$('<button type="button" class="splitter-btn" id="splitter-collapse-btn"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-double-chevron"></use></svg></button>'),this.splitterCollapseButton.appendTo(splitter),splitter[0].offsetLeft>10&&this.splitterCollapseButton.addClass("rotate"),this.splitterCollapseButton.click((function(){savedOffset<=0?splitter[0].offsetLeft<=10?(self.splitTo(299,parentHeight),$(this).addClass("rotate")):(savedOffset=splitter[0].offsetLeft,self.splitTo(0,parentHeight),$(this).removeClass("rotate")):splitter[0].offsetLeft>10?(savedOffset=splitter[0].offsetLeft,self.splitTo(0,parentHeight),$(this).removeClass("rotate")):(self.splitTo(savedOffset,parentHeight),$(this).addClass("rotate"),savedOffset=0)}))}}else this.isSplitterHorizontal?(this.topPanel=splitter.prev(),w=this.topPanel.height(),parent.addClass("splitter-container is-horizontal"),splitter.next().addClass("flex-grow-shrink"),splitter.addClass("splitter-horizontal")):(this.rightSide=thisSide,this.leftSide=thisSide.prev().parent(),thisSide.prev().addClass("flex-grow-shrink").parent().addClass("splitter-container"));return localStorage&&s.save&&!isNaN(parseInt(localStorage[s.uniqueId],10))&&(w=localStorage[s.uniqueId]),w=parseInt(w,10),this.isSplitterHorizontal?splitter[0].style.top="".concat(w,"px"):splitter[0].style.top=0,this.splitTo(w,parentHeight),w<=10&&this.splitterCollapseButton&&this.splitterCollapseButton.removeClass("rotate"),this.documentWidth=0,this.element.drag({axis:s.axis,containment:s.containment||"x"===s.axis?"document":"parent",containmentOffset:{left:0,top:0}}).on("dragstart.splitter",(function(){var iframes=$("iframe");if(self.documentWidth=$(document).width(),iframes.length>0)for(var i=0,l=iframes.length;i<l;i++){var frame=$(iframes[i]),width="".concat(parseInt(getComputedStyle(frame.parent()[0]).width,10)-40,"px"),overlay=$('<div class="overlay splitter-overlay"></div>');overlay.css("width",width),frame.before(overlay)}})).on("dragend.splitter",(function(e,args){$(".overlay").remove(),s.collapseButton&&(args[direction]<=10?$("#splitter-collapse-btn").removeClass("rotate"):$("#splitter-collapse-btn").addClass("rotate")),"end"===s.resize&&self.splitTo(args[direction],parentHeight)})).on("drag.splitter",(function(e,args){return!(args.left<=0)&&("immediate"===s.resize&&self.splitTo(args[direction],parentHeight),!0)})),"y"===s.axis&&this.element.addClass("splitter-horizontal"),this.element.attr({"aria-dropeffect":"move",tabindex:"0","aria-grabbed":"false"}),this},toggleSelection:function toggleSelection(){this.element.toggleClass("is-dragging")},resizeTop:function resizeTop(splitter,top,parentHeight){(top>parentHeight||top<0)&&(top=parseInt(parentHeight,10)/2),this.topPanel[0].style.height="".concat(top,"px")},resizeLeft:function resizeLeft(splitter,leftArg){var left=this.leftSide.outerWidth()-leftArg;this.rightSide[0].style.width="".concat(left,"px"),splitter[0].style.left=""},resizeRight:function resizeRight(splitter,w){this.leftSide[0].style.width="".concat(w,"px"),splitter[0].style.left="".concat(w-1,"px")},splitTo:function splitTo(split,parentHeight){var s=this.settings,splitter=this.element;this.isSplitterRightSide?(split>s.maxWidth.right&&(split=s.maxWidth.right),this.resizeRight(splitter,split)):this.isSplitterHorizontal?this.resizeTop(splitter,split,parentHeight):(split>s.maxWidth.left&&(split=s.maxWidth.left),this.resizeLeft(splitter,split)),this.element.trigger("split",[split]),this.docBody.triggerHandler("resize",[this]),localStorage&&(localStorage[this.settings.uniqueId]=split),this.split=split,this.parentHeight=parentHeight},unbind:function unbind(){return this.element.off("updated.".concat("splitter")),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,SPLITTER_DEFAULTS)),this.destroy().init()},destroy:function destroy(){this.unbind(),this.splitterCollapseButton&&this.splitterCollapseButton.remove(),$.removeData(this.element[0],"splitter")},handleEvents:function handleEvents(){var _this=this;return this.element.on("updated.".concat("splitter"),(function(){_this.updated()})).on("keydown.".concat("splitter"),(function(e){32===e.which&&(_this.toggleSelection(),e.preventDefault()),37===e.which&&_this.splitTo(_this.split-15,_this.parentHeight),39===e.which&&_this.splitTo(_this.split+15,_this.parentHeight)})),this}},$.fn.splitter=function(settings){return this.each((function(){var instance=$.data(this,"splitter");instance?instance.updated(settings):instance=$.data(this,"splitter",new Splitter(this,settings))}))};var SWAPLIST_DEFAULTS={searchable:!1,available:null,selected:null,additional:null,availableClass:".available",selectedClass:".selected",additionalClass:".full-access",availableBtn:".btn-moveto-selected",selectedBtnLeft:".btn-moveto-left",selectedBtnRight:".btn-moveto-right",additionalBtn:".btn-moveto-selected",draggable:{available:!0,selected:!0,additional:!0},template:'<ul data-swap-handle=".handle">{{#dataset}}{{#text}}<li data-id="{{id}}"{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="swaplist-item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>'};function SwapList(element,settings){this.settings=utils.mergeSettings(element,settings,SWAPLIST_DEFAULTS),this.element=$(element),this.init()}SwapList.prototype={init:function init(){var _this=this,s=this.settings;s.draggable=$.extend(!0,SWAPLIST_DEFAULTS.draggable,s.draggable),this.isTouch=Environment.features.touch,this.isAdditional=$("".concat(s.additionalClass," .listview"),this.element).length>0,this.isTouch&&this.element.addClass("is-touch"),this.loadListview(),this.initDataset(),this.setElements(),this.isMultiSelectClass(),setTimeout((function(){_this.makeDraggable(),_this.handleEvents(),_this.initSelected(s.availableClass),_this.initSelected(s.additionalClass)}),0)},loadListview:function loadListview(){for(var s=this.settings,containers=[{dataset:s.available,class:s.availableClass,draggable:s.draggable.available},{dataset:s.selected,class:s.selectedClass,draggable:s.draggable.selected},{dataset:s.additional,class:s.additionalClass,draggable:s.draggable.additional}],i=0,l=containers.length;i<l;i++){var c=containers[i],lv=$("".concat(c.class," .listview"),this.element),list=lv.data("listview"),options={dataset:c.dataset||[],selectable:"multiple",showCheckboxes:!1};(!0===s.searchable||"true"===s.searchable)&&$("".concat(c.class," .searchfield"),this.element).length>0&&(options.searchable=!0),!c.dataset&&lv.length&&$("li",lv).length?lv.listview(options):lv.length&&(list&&list.destroy(),-1===s.template.indexOf('data-id="{{id}}"')&&(s.template=s.template.replace("<li",'<li data-id="{{id}}"')),options.template=s.template,options.dataset=c.dataset||[],options.dataset.forEach((function(node){/string|number/.test(_typeof(node.id))&&""!==node.id||(node.id="sw".concat((Date.now().toString(36)+Math.round(Math.random()*Math.pow(36,12)).toString(36).substr(2,5)).toLowerCase()))})),0===options.dataset.length&&(options.forceToRenderOnEmptyDs=!0),lv.listview(options)),c.draggable||$("ul",lv).addClass("is-not-droppable")}},setElements:function setElements(){var s=this.settings,disabledBtnStr="";this.offset=null,this.containers=$("".concat(s.availableClass,",").concat(s.selectedClass,",").concat(s.additionalClass),this.element),this.actionButtons=$("".concat(s.availableBtn,",").concat(s.additionalBtn,",").concat(s.selectedBtnLeft,",").concat(s.selectedBtnRight),this.element),this.selectedButtons=$("".concat(s.selectedBtnLeft,",").concat(s.selectedBtnRight),this.element),this.tabButtonsStr="".concat(s.availableBtn,", ").concat(s.additionalBtn,", ").concat(this.selectedButtons.length>1?s.selectedBtnRight:s.selectedBtnLeft),this.dragElements="ul:not(.is-not-droppable), ul:not(.is-not-droppable) li:not(.is-disabled)",this.dragStart="dragstart.swaplist touchstart.swaplist gesturestart.swaplist",this.dragEnterWhileDragging="dragenter.swaplist",this.dragOverWhileDragging="dragover.swaplist touchmove.swaplist gesturechange.swaplist",this.dragEnd="dragend.swaplist touchend.swaplist touchcancel.swaplist gestureend.swaplist",this.selections={items:[],owner:null,related:null,droptarget:null,isInSelection:null,isHandle:null,placeholder:null,placeholderTouch:null,dragged:null,draggedIndex:null},s.numOfSelectionsClass="num-of-selections",s.itemContentClass="swaplist-item-content",s.itemContentTempl=$('<div><p><span class="'.concat(s.numOfSelectionsClass,'">###</span> ').concat(Locale?Locale.translate("ItemsSelected"):" Items Selected ","</p><div/>")),s.draggable.available||(disabledBtnStr="".concat(s.availableClass," ").concat(s.availableBtn,",").concat(s.selectedBtnLeft),$(disabledBtnStr,this.element).prop("disabled",!0)),s.draggable.selected||(disabledBtnStr="".concat(s.selectedBtnLeft,",").concat(s.selectedBtnRight),s.draggable.available||(disabledBtnStr+=",".concat(s.additionalClass," ").concat(s.additionalBtn)),this.isAdditional&&s.draggable.additional||(disabledBtnStr+=",".concat(s.availableClass," ").concat(s.availableBtn)),$(disabledBtnStr,this.element).prop("disabled",!0),$("".concat(s.additionalClass," ").concat(s.additionalBtn),this.element).addClass("is-rotate")),s.draggable.additional||$("".concat(s.additionalClass," ").concat(s.additionalBtn,",").concat(s.selectedBtnRight),this.element).prop("disabled",!0)},isMultiSelectClass:function isMultiSelectClass(){for(var s=this.settings,containers=[s.availableClass,s.selectedClass,s.additionalClass],i=0,l=containers.length;i<l;i++){var lv=$("".concat(containers[i]," .listview"),this.element);$("li",lv).length||lv.addClass("is-multiselect")}},initSelected:function initSelected(container){if((container=this.isjQuery(container)?container:$(container,this.element)).length){for(var list=$(".listview",container).data("listview"),selected=$("li[selected]",container),i=0,l=selected.length;i<l;i++){var li=$(selected[i]);li.removeAttr("selected"),list.select(li)}this.moveElements(container,this.settings.selectedClass)}},moveElements:function moveElements(from,to){if(null!==to){from="string"!=typeof from?from:$(from,this.element),to="string"!=typeof to?to:$(to,this.element);var list=$(".listview",from).data("listview");if(this.clearSelections(),this.selections.owner=from,this.selections.droptarget=to,this.isTouch){if(list.selectedItems)for(var i=0,l=list.selectedItems.length;i<l;i++)this.selections.items[i]=list.selectedItems[i].closest("li")}else this.selections.items=list.selectedItems;if(this.setSelectionsItems(this.selections.owner),this.unselectElements(list),this.selections.items.length){this.selections.move={items:this.selections.itemsData,from:this.getContainer(this.selections.itemsData)};var result=this.element.triggerHandler("beforeswap",[this.selections.move]);if("boolean"==typeof result&&!result||"string"==typeof result&&"false"===result.toLowerCase())return;var ul=$("ul",to),currentSize=$("li",ul).length,size=this.selections.items.length+currentSize;if(this.selections.items)for(var _i=0,_l=this.selections.items.length;_i<_l;_i++){var val=$(this.selections.items[_i]);val.attr({"aria-posinset":currentSize+_i+1,"aria-setsize":size}).find("mark.highlight").contents().unwrap(),ul.append(val)}this.afterUpdate($(".listview",to).data("listview"))}}},getContainer:function getContainer(items){var s=this.settings;if("object"===_typeof(items[0])&&items[0].node){var container=items[0].node.closest(".card"),cssClass="";return container.is(s.availableClass)?cssClass=s.availableClass:container.is(s.selectedClass)?cssClass=s.selectedClass:container.is(s.additionalClass)&&(cssClass=s.additionalClass),{container:container,class:cssClass}}return null},unselectElements:function unselectElements(list){if(list.selectedItems)for(var i=0,l=list.selectedItems.length;i<l;i++)list.select($(list.selectedItems[i]));list&&list.element&&list.element.find("li").attr("aria-selected",!1).removeClass("is-selected")},isDragAndDropSupports:function isDragAndDropSupports(){var div=document.createElement("div");return"draggable"in div||"ondragstart"in div&&"ondrop"in div},isMatchMediaSupports:function isMatchMediaSupports(){return void 0!==window.matchMedia||void 0!==window.msMatchMedia},viewport:function viewport(){var e=window,a="inner";return"innerWidth"in window||(a="client",e=document.documentElement||document.body),{width:e["".concat(a,"Width")],height:e["".concat(a,"Height")]}},isMaxWidth:function isMaxWidth(w){return this.isMatchMediaSupports()&&window.matchMedia("(max-width: ".concat(w,"px)")).matches||this.viewport().width<=w},makeDraggable:function makeDraggable(){var _this2=this,ul=$("ul",this.element);this.isDragAndDropSupports&&(this.handle=ul.first().attr("data-swap-handle"),this.handle=$(this.handle,ul).length>0?this.handle:null,$(this.handle,ul).addClass("draggable").off("mousedown.swaplist touchstart.swaplist").on("mousedown.swaplist touchstart.swaplist",(function(){_this2.selections.isHandle=!0})).off("mouseup.swaplist touchend.swaplist").on("mouseup.swaplist touchend.swaplist",(function(){_this2.selections.isHandle=!1})),this.targets=ul.attr({"aria-dropeffect":"none"}),this.items=$("li:not(.is-disabled)",this.element).not("a[href], img").off("selectstart.swaplist").on("selectstart.swaplist",(function(){return this.dragDrop&&this.dragDrop(),!1})).end().attr({draggable:!0}).addClass(this.handle?"":"draggable"))},getElementByTouchInList:function getElementByTouchInList(list,x,y){for(var returns=!1,listJq=$(list),i=0,l=listJq.length;i<l;i++){var item=$(listJq[i]),offset=item.offset();x<=offset.left||x>=offset.left+item.outerWidth()||y<=offset.top||y>=offset.top+item.outerHeight()||(returns=item)}return returns},draggTouchElement:function draggTouchElement(e,elm){var orig=e.originalEvent.changedTouches[0];elm[0].style.top="".concat(orig.pageY-this.offset.y,"px"),elm[0].style.left="".concat(orig.pageX-this.offset.x,"px")},hasModifier:function hasModifier(e){return e.ctrlKey||e.metaKey||e.shiftKey},addDropeffects:function addDropeffects(){if(this.targets)for(var i=0,l=this.targets.length;i<l;i++)$(this.targets[i]).attr({"aria-dropeffect":"move",tabindex:0});if(this.selections&&this.selections.items)for(var _i2=0,_l2=this.selections.items.length;_i2<_l2;_i2++)$(this.selections.items[_i2]).attr({"aria-grabbed":!0,tabindex:0})},clearDropeffects:function clearDropeffects(){if(this.targets.attr({"aria-dropeffect":"none"}).removeAttr("tabindex"),this.selections&&this.selections.items)for(var i=0,l=this.selections.items.length;i<l;i++){var val=$(this.selections.items[i]);val.removeAttr("aria-grabbed".concat(val.is(":focus")?"":" tabindex"))}},clearSelections:function clearSelections(){this.selections.items=[],this.selections.itemsData=[],this.selections.owner=null,this.selections.related=null,this.selections.droptarget=null,this.selections.isInSelection=null,this.selections.dragged=null,this.selections.placeholder=null,this.selections.placeholderTouch=null,$("ul, li",this.element).removeClass("over"),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove()},setSelectionsItems:function setSelectionsItems(container){container=this.isjQuery(container)?container:$(container,this.element);var nodes=$(".listview li",container),containerAPI=container.find(".listview").data("listview"),dataList=this.getDataList(container),isFiltered=!1;containerAPI&&containerAPI.filteredDataset&&(dataList=_toConsumableArray(containerAPI.filteredDataset),isFiltered=!0);for(var i=0,l=nodes.length;i<l;i++){var li=$(nodes[i]),itemData=dataList[i];isFiltered&&(itemData.node=li,delete itemData._isFilteredOut),li.is(".is-selected")&&this.selections.itemsData.push(itemData)}},initDataset:function initDataset(){var s=this.settings,containers=[{type:"available",dataset:s.available,class:s.availableClass},{type:"selected",dataset:s.selected,class:s.selectedClass},{type:"additional",dataset:s.additional,class:s.additionalClass}];this.dataset={available:[],selected:[]},this.isAdditional&&(this.dataset.additional=[]);for(var i=0,l=containers.length;i<l;i++)for(var c=containers[i],nodes=$("".concat(c.class," .listview li"),this.element),nodeIndex=0,l2=nodes.length;nodeIndex<l2;nodeIndex++){var data=void 0,value=void 0,li=$(nodes[nodeIndex]);c.dataset?delete(data=JSON.parse(JSON.stringify(c.dataset[nodeIndex]))).selected:(data={text:$.trim($(".swaplist-item-content",li).text())},(value=li.attr("data-value"))&&(data.value=value)),this.dataset[c.type]&&(data.node=li,this.dataset[c.type].push(data))}},getDataList:function getDataList(container){var s=this.settings,d=this.dataset;return(container=this.isjQuery(container)?container:$(container,this.element)).is(s.additionalClass)?d.additional:container.is(s.selectedClass)?d.selected:container.is(s.availableClass)?d.available:[]},arrayIndexMove:function arrayIndexMove(arr,from,to){arr.splice(to,0,arr.splice(from,1)[0])},syncDataset:function syncDataset(owner,droptarget){for(var droptargetNodes=$(".listview li",droptarget),ownerAPI=owner.find(".listview").data("listview"),dropTargetAPI=droptarget.find(".listview").data("listview"),ownerDataList=this.getDataList(owner),dtDataList=this.getDataList(droptarget),isMoved=function isMoved(mOwner,mItem){if(mOwner&&mItem){var id={owner:mOwner.getAttribute("data-id"),item:mItem.getAttribute("data-id")};return void 0!==id.owner&&void 0!==id.item&&id.owner===id.item}return!1},i=0,l=this.selections.items.length;i<l;i++)for(var item=this.selections.items[i],dtIndex=0,l2=droptargetNodes.length;dtIndex<l2;dtIndex++)if($(droptargetNodes[dtIndex]).is(item))for(var ownerIndex=0,l3=ownerDataList.length;ownerIndex<l3;ownerIndex++){var ownerItem=ownerDataList[ownerIndex];if(isMoved(ownerItem.node[0],item[0])){dtDataList.push(ownerItem),ownerDataList.splice(ownerIndex,1),this.arrayIndexMove(dtDataList,dtDataList.length-1,dtIndex);break}}ownerAPI.updated({dataset:ownerDataList}),dropTargetAPI.updated({dataset:dtDataList}),this.makeDraggable()},isjQuery:function isjQuery(obj){return obj&&(obj instanceof jQuery||obj.constructor.prototype.jquery)},updateAttributes:function updateAttributes(list){for(var items=$("li",list),i=0,l=items.length;i<l;i++)$(items[i]).attr({"aria-posinset":i+1,"aria-setsize":l})},afterUpdate:function afterUpdate(list){var focusIdx=this.selections.droptarget.find("li:focus").index(),focusClass=".card.".concat(this.selections.droptarget[0].classList[1]," li");list&&(this.selections.placeholder&&(list.select(this.selections.placeholder),this.selections.placeholder.focus()),this.unselectElements(list),this.syncDataset(this.selections.owner,this.selections.droptarget),this.updateAttributes($(".listview",this.selections.owner)),this.updateAttributes($(".listview",this.selections.droptarget)),this.selections.items.length&&(this.selections.move=$.extend(!0,this.selections.move,{to:this.getContainer([{node:this.selections.droptarget.find("li:first")}])}),this.element.triggerHandler("swapupdate",[this.selections.move]))),this.selections.items.forEach((function(elem){elem.show()})),this.clearDropeffects(),this.clearSelections(),this.items.removeClass("is-dragging is-dragging-touch"),focusIdx>=0&&this.element.find(focusClass).eq(focusIdx).focus()},getItems:function getItems(container){return container=this.isjQuery(container)?container:$(container,this.element),this.getDataList(container)},getAvailable:function getAvailable(){return this.getDataList(this.settings.availableClass)},getSelected:function getSelected(){return this.getDataList(this.settings.selectedClass)},getAdditional:function getAdditional(){return this.getDataList(this.settings.additionalClass)},draggedMakeSelected:function draggedMakeSelected(list,target){var isInSelection=!1;if(!this.selections.isInSelection){if(list.selectedItems)for(var i=0,l=list.selectedItems.length;i<l;i++)if(target.is(list.selectedItems[i]))return isInSelection=!0,!1;isInSelection||(list.select(target),this.selections.isInSelection=!0)}return!0},updateDataset:function updateDataset(ds){for(var s=this.settings,containers=[{type:"available",dataset:ds.available,class:s.availableClass},{type:"selected",dataset:ds.selected,class:s.selectedClass},{type:"additional",dataset:ds.additional,class:s.additionalClass}],i=0,l=containers.length;i<l;i++){var c=containers[i],lv=$("".concat(c.class," .listview"),this.element),api=lv.data("listview");api&&(api.deselectItemsBetweenIndexes([0,$("li",lv).length-1]),s[c.type]=c.dataset||[],api.loadData(s[c.type]))}this.initDataset(),this.makeDraggable(),this.initSelected(s.availableClass),this.initSelected(s.additionalClass)},unbind:function unbind(){return this.actionButtons.off("click.swaplist"),this.containers.off("keydown.swaplist",".listview"),this.selectedButtons.off("keydown.swaplist"),this.element.off("keydown.swaplist",this.tabButtonsStr),this.element.off("".concat(this.dragStart," ").concat(this.dragEnterWhileDragging," ").concat(this.dragOverWhileDragging," ").concat(this.dragEnd),this.dragElements),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove(),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,SWAPLIST_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"swaplist")},handleEvents:function handleEvents(){var self=this,settings=self.settings,selections=self.selections;self.actionButtons.off("click.swaplist").on("click.swaplist",(function(){var actionButton=$(this),container=actionButton.closest(".card"),moveTo=null;container.is(settings.availableClass)?(moveTo=settings.draggable.selected?settings.selectedClass:self.isAdditional&&settings.draggable.additional?settings.additionalClass:null,self.moveElements(settings.availableClass,moveTo)):container.is(settings.additionalClass)?(moveTo=settings.draggable.selected?settings.selectedClass:settings.draggable.available?settings.availableClass:null,self.moveElements(settings.additionalClass,moveTo)):container.is(settings.selectedClass)&&(actionButton.is(settings.selectedBtnLeft)?self.moveElements(settings.selectedClass,settings.availableClass):actionButton.is(settings.selectedBtnRight)&&self.moveElements(settings.selectedClass,settings.additionalClass))})),self.containers.on("keydown.swaplist",".listview",(function(e){var container=$(this).closest(self.containers);77===(e=e||window.event).keyCode&&self.hasModifier(e)&&(!container.is(settings.selectedClass)||container.is(settings.selectedClass)&&1===self.selectedButtons.length?container.find(self.actionButtons).trigger("click.swaplist"):self.selectedButtons.first().focus(),e.preventDefault())})),self.selectedButtons.on("keydown.swaplist",(function(e){var index,move,btn=$(this);13!==(e=e||window.event).keyCode&&32!==e.keyCode||(btn.trigger("click.swaplist"),e.preventDefault()),(37===e.keyCode||39===e.keyCode)&&self.selectedButtons.length>1&&(index=self.selectedButtons.index(this),move=37===e.keyCode?index>0?index-1:self.selectedButtons.length-1:index<self.selectedButtons.length-1?index+1:0,self.selectedButtons[move].focus())})),self.element.on("keydown.swaplist",self.tabButtonsStr,(function(e){var btn=$(this);if(9===(e.keyCode||e.which)&&!e.shiftKey){var card=btn.closest(".card")[0],items=[].slice.call(card.querySelectorAll("li[tabindex]")),itemsLen=items.length,found=!1;if(itemsLen&&items.forEach((function(item){-1!==parseInt(item.getAttribute("tabindex"),10)&&(found=!0)})),!found){var item=card.querySelector("li");item&&item.setAttribute("tabindex",0)}}})),self.containers.on("filtered.swaplist",".listview",(function(){self.makeDraggable()})),self.element.on("mousedown.swaplist",self.dragElements,(function(e){self.handle&&$(e.target).closest("li").attr({draggable:$(e.target).is(".draggable")});e.stopPropagation()})).on(self.dragStart,self.dragElements,(function(e){if(e.stopImmediatePropagation(),!self.handle||selections.isHandle){var rect,touch,target=$(e.target).closest("li"),list=$(".listview",target.closest(".card")).data("listview");if(list){self.isTouch||self.draggedMakeSelected(list,target),self.clearSelections(),selections.owner=target.closest(".card"),selections.dragged=target,selections.draggedIndex=target.index(),selections.placeholder=target.clone(!0),selections.placeholder.attr("id","sl-placeholder"),self.setSelectionsItems(selections.owner),selections.items=list.selectedItems,self.selections.move={items:self.selections.itemsData,from:self.getContainer(self.selections.itemsData)};var result=self.element.triggerHandler("beforeswap",[self.selections.move]);if("boolean"==typeof result&&!result||"string"==typeof result&&"false"===result.toLowerCase())selections.dragged=null;else{if($(".".concat(settings.numOfSelectionsClass),settings.itemContentTempl).html(selections.items.length),self.addDropeffects(),self.isTouch){rect=target[0].getBoundingClientRect(),touch=e.originalEvent.changedTouches[0],self.offset={x:touch.pageX-rect.left,y:touch.pageY-rect.top};for(var i=0,l=self.containers.length;i<l;i++)self.containers[i].style.zIndex="1";selections.placeholderTouch=selections.dragged.clone(!0),selections.items.length>1&&!$("#sl-placeholder-touch2").length&&selections.dragged.clone().addClass("is-dragging-touch").attr("id","sl-placeholder-touch2").insertBefore(selections.dragged).hide(),selections.placeholderTouch.attr("id","sl-placeholder-touch").removeClass("is-selected").hide(),(self.element.is(".one-third")&&self.isMaxWidth(766)?self.element.parent():self.element).prepend('<ul id="sl-placeholder-container"></ul>'),$("#sl-placeholder-container").append(selections.placeholderTouch),$("#sl-placeholder-container")[0].style.width="".concat(selections.owner.width(),"px"),$("#sl-placeholder-touch")[0].style.width="".concat(selections.owner.width(),"px"),self.draggTouchElement(e,selections.placeholderTouch)}else selections.dragged.addClass("is-dragging"),e.originalEvent.dataTransfer.setData("text",""),selections.items.length>1&&$(".".concat(settings.itemContentClass),selections.dragged).html(settings.itemContentTempl.html());e.stopPropagation()}}}else e.stopPropagation()})).on(self.dragEnterWhileDragging,self.dragElements,(function(e){selections.dragged&&(self.element.triggerHandler("draggingswap",[selections.move]),selections.related=e.target,$("ul, li",self.element).removeClass("over"),$(e.target).closest("ul, li").addClass("over"),selections.droptarget=$(selections.related).closest(".card"),$('[aria-grabbed="true"]',self.element).not(selections.dragged).slideUp(),e.stopPropagation())})).on(self.dragOverWhileDragging,self.dragElements,(function(e){if(selections.dragged){var touch,overItem=$(this),list=$(".listview",selections.dragged.closest(".card")).data("listview");if(self.isTouch){if(self.handle&&!selections.isHandle)return;selections.isInSelection||(self.draggedMakeSelected(list,selections.dragged),selections.items=list.selectedItems,$(".".concat(settings.numOfSelectionsClass),settings.itemContentTempl).html(selections.items.length)),touch=e.originalEvent.touches[0],overItem=self.getElementByTouchInList($("ul, li",self.element),touch.pageX,touch.pageY)||overItem,selections.dragged.addClass("is-dragging"),selections.placeholderTouch.addClass("is-dragging is-dragging-touch"),selections.placeholderTouch.show(),$('[aria-grabbed="true"]',self.element).not(selections.dragged).not(selections.placeholderTouch).not("#sl-placeholder-touch2").slideUp(),selections.items.length>1&&($(".".concat(settings.itemContentClass),selections.placeholderTouch.add("#sl-placeholder-touch2")).html(settings.itemContentTempl.html()),$("#sl-placeholder-touch2").show(),selections.dragged.hide()),self.draggTouchElement(e,selections.placeholderTouch),self.element.triggerHandler("draggingswap",[selections.move]),selections.related=overItem,$("ul, li",this.element).removeClass("over"),overItem.closest("ul, li").addClass("over"),selections.droptarget=selections.related.closest(".card")}e.preventDefault(),e.stopPropagation()}})).on(self.dragEnd,self.dragElements,(function(e){if(selections.dragged){var related=$(selections.related).closest("li"),ul=$("ul",selections.droptarget),currentSize=$("li",ul).length,size=selections.items.length+currentSize;if(self.unselectElements($(".listview",selections.owner).data("listview")),$.each(selections.items,(function(index,val){if((val=$(val)).find("mark.highlight").contents().unwrap(),currentSize&&!$(selections.related).is("ul")){var isLess=related.index()<selections.draggedIndex,el=isLess?val:$(selections.items[selections.items.length-1-index]),posinset=related.index()+(isLess?index+1:index+2);val.attr({"aria-posinset":posinset,"aria-setsize":size}),related[isLess?"before":"after"](el)}else val.attr({"aria-posinset":currentSize+index+1,"aria-setsize":size}),ul.append(val);val.focus()})),selections.items.length>1&&($(".".concat(settings.itemContentClass),selections.dragged).html($(".".concat(settings.itemContentClass),selections.placeholder).html()),self.isTouch&&selections.dragged.show()),self.isTouch)for(var i=0,l=self.containers.length;i<l;i++)self.containers[i].style.zIndex="";self.makeDraggable(),selections.isHandle=null,$('[aria-grabbed="true"]',self.element).show(),self.afterUpdate($(".listview",selections.droptarget).data("listview")),e.preventDefault(),e.stopPropagation()}}))}},$.fn.swaplist=function(settings){return this.each((function(){var instance=$.data(this,"swaplist");instance?instance.updated(settings):instance=$.data(this,"swaplist",new SwapList(this,settings))}))};var SCROLLACTION_DEFAULTS={scrollActionTarget:".js-scroll-target",classToAdd:"scrolled-down"};function ScrollAction(element,settings){this.settings=utils.mergeSettings(element,settings,SCROLLACTION_DEFAULTS),this.element=$(element),this.init()}ScrollAction.prototype={init:function init(){this.handleEvents()},unbind:function unbind(){var s=this.settings;return this.element.off("scroll.scrollaction"),s&&$(s.scrollActionTarget).removeClass(s.classToAdd),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,SCROLLACTION_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"scrollaction")},handleEvents:function handleEvents(){var _this=this,s=this.settings;this.lastScrollTop=0,this.element.on("scroll.scrollaction",(function(){var scrollTop=_this.element.scrollTop();scrollTop>_this.lastScrollTop?$(s.scrollActionTarget).addClass(s.classToAdd):$(s.scrollActionTarget).removeClass(s.classToAdd),_this.lastScrollTop=scrollTop}))}},$.fn.scrollaction=function(settings){return this.each((function(){var instance=$.data(this,"scrollaction");instance?instance.updated(settings):instance=$.data(this,"scrollaction",new ScrollAction(this,settings))}))};var DEFAULT_STEPCHART_OPTIONS={steps:null,completed:null,inProgress:null,iconType:null,completedText:null,extraText:"",completedColor:null,allCompletedColor:null,inProgressColor:null};function StepChart(element,settings){return this.init(element,settings)}StepChart.prototype={init:function init(element,settings){if(!this.element&&element instanceof HTMLElement&&(this.element=$(element)),"object"===_typeof(settings)||void 0===this.settings){var previousSettings=this.settings||DEFAULT_STEPCHART_OPTIONS;this.settings=utils.mergeSettings(this.element[0],settings,previousSettings)}return this.render()},render:function render(){var container=$('<div class="step-chart-steps"></div>'),icon='\n      <svg class="icon {icon-name}" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-success"></use>\n      </svg>\n    ',isEmpty=null===this.settings.completed&&null===this.settings.steps;if(isEmpty&&(this.settings.completed=0,this.settings.steps=1),this.element.attr("data-options")&&(this.settings=utils.parseSettings(this.element)),this.element.children().length>0)return this;for(var i=0;i<this.settings.steps;i++){var step=$('<div class="step-chart-step"></div>');i<this.settings.completed&&(step.addClass("is-complete"),this.settings.completedColor&&step.css("background-color",this.settings.completedColor)),i===this.settings.inProgress-1&&(step.addClass("is-inprogress"),this.settings.inProgressColor&&step.css("background-color",this.settings.inProgressColor)),container.append(step)}var completedText=this.settings.completedText||Locale.translate("StepsCompleted");completedText=(completedText=completedText.replace("{0}",this.settings.completed)).replace("{1}",this.settings.steps),isEmpty&&(completedText=Locale?Locale.translate("NoData"):"No Data Available");var label=$('<span class="step-chart-label">'.concat(completedText,"</span>"));if(this.settings.steps===this.settings.completed&&(container.addClass("is-complete"),label.append(icon.replace("{icon-name}","icon-success"))),this.settings.iconType&&label.append(icon.replace("{icon-name}",this.settings.iconType)),this.settings.extraText){var extraText=this.settings.extraText;extraText=(extraText=(extraText="{1} Days Overdue"===(extraText="{0} Days Remaining"===extraText?Locale.translate("DaysRemaining"):extraText)?Locale.translate("DaysOverdue"):extraText).replace("{0}",this.settings.steps-this.settings.completed)).replace("{1}",this.settings.completed),label.append('<span class="step-chart-label-small">'.concat(extraText,"</span>"))}return this.element.append(label,container),this.settings.steps===this.settings.completed&&this.settings.allCompletedColor&&(container.find(".step-chart-step").css("background-color",this.settings.allCompletedColor),label.find(".icon").attr("style","fill: ".concat(this.settings.allCompletedColor,"!important"))),this},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),this.element.empty(),this.render()},destroy:function destroy(){return this.element.empty(),this.settings=null,$.removeData(this.element[0],"stepchart"),this}},$.fn.stepchart=function(settings){return this.each((function(){var instance=$.data(this,"stepchart");instance?instance.updated(settings):(instance=$.data(this,"stepchart",new StepChart(this,settings))).destroy=function destroy(){this.teardown(),$.removeData(this,"stepchart")}}))};var tabContainerTypes=["horizontal","vertical","module-tabs","header-tabs"],TABS_DEFAULTS={addTabButton:!1,addTabButtonCallback:null,appMenuTrigger:!1,appMenuTriggerText:void 0,ajaxOptions:null,beforeActivate:void 0,containerElement:null,changeTabOnHashChange:!1,hashChangeCallback:null,lazyLoad:!0,moduleTabsTooltips:!1,multiTabsTooltips:!1,source:null,sourceArguments:{},tabCounts:!1,verticalResponsive:!1};function Tabs(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,TABS_DEFAULTS),this.init()}Tabs.prototype={init:function init(){return this.setup().build().setupEvents()},setup:function setup(){return this.tabsIndex=$(".tab-container").index(this.element),this.settings.multiTabsTooltips=this.element.closest(".multitabs-container").length>0,this},build:function build(){var tabPanelContainer,_this=this,self=this,moveTabPanelContainer=!1;(tabPanelContainer=this.element.next(".tab-panel-container")).length||(tabPanelContainer=this.element.children(".tab-panel-container"),this.isVerticalTabs()||(moveTabPanelContainer=!0));var bodyPageContainer=$("body > .page-container, .application-menu + .page-container");this.element.closest(".header").length>0&&bodyPageContainer.length&&(tabPanelContainer=bodyPageContainer),this.element.next(".application-menu").length&&(tabPanelContainer=this.element.next().next(".page-container"),moveTabPanelContainer=!1),this.settings.containerElement&&$(this.settings.containerElement).length&&(tabPanelContainer=$(this.settings.containerElement),moveTabPanelContainer=!1),tabPanelContainer&&tabPanelContainer.length||(tabPanelContainer=$('<div class="tab-panel-container"></div>'),moveTabPanelContainer=!0),tabPanelContainer[0].classList.contains("tab-panel-container")||tabPanelContainer[0].classList.add("tab-panel-container"),moveTabPanelContainer&&tabPanelContainer.insertAfter(this.element),this.container=tabPanelContainer;var tablistContainer=this.element.children(".tab-list-container");!tablistContainer.length&&this.isScrollableTabs()&&(tablistContainer=$('<div class="tab-list-container"></div>').prependTo(this.element)),tablistContainer.length&&(this.tablistContainer=tablistContainer);var noClass=!0,closestHeader=this.element.closest(".header");tabContainerTypes.forEach((function(val,i){_this.element.hasClass(tabContainerTypes[i])&&(noClass=!1)})),noClass&&(closestHeader.length?self.element.addClass("header-tabs"):self.element.addClass("horizontal")),self.settings.tabCounts&&self.element.addClass("has-counts"),this.tablist=this.element.children(".tab-list"),this.tablist.length||(this.tablistContainer&&(this.tablist=this.tablistContainer.children(".tab-list")),this.tablist.length||(this.tablist=$('<ul class="tab-list"></ul>'),this.tablistContainer?this.tablist.appendTo(this.tablistContainer):this.tablist.appendTo(this.element))),this.tablistContainer&&(this.tablist.parent().is(this.tablistContainer)||this.tablistContainer.append(this.tablist),this.tablistContainer.on("mousewheel.tabs",(function(e){e.deltaY&&(this.scrollLeft+=e.deltaY)}))),self.tablist.attr({class:"tab-list",role:"tablist","aria-multiselectable":"false"}),this.checkResponsive(!1),this.renderHelperMarkup(),self.anchors=self.tablist.children("li:not(.separator)").children("a"),self.anchors.each((function prepareAnchor(){var a=$(this);a.attr({role:"tab","aria-expanded":"false","aria-selected":"false",tabindex:"-1"}).parent().attr("role","presentation").addClass("tab"),a.parent().hasClass("dismissible")&&!a.parent().children(".icon").length&&$.createIconElement({icon:"close",classes:"icon close"}).insertAfter(a);var dd=a.nextAll("ul").first();dd.length>0&&(dd.addClass("dropdown-tab"),a.parent().addClass("has-popupmenu").popupmenu({menu:dd,trigger:"click",attachToBody:!0}),a.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected"),a.parent().children(".icon.icon-more").length||$.createIconElement({classes:"icon-more",icon:"dropdown"}).insertAfter(a));self.settings.tabCounts&&0===$(this).find(".count").length&&$(this).prepend('<span class="count">0 </span>'),(self.settings.moduleTabsTooltips||self.settings.multiTabsTooltips)&&a.on("beforeshow.toolbar",(function(){return"yes"===a.data("cutoffTitle")})).tooltip({content:"".concat(a.text().trim())})})),self.panels=$(),self.anchors.each((function associateAnchorWithPanel(){var panel,a=$(this),li=a.parent(),popup=li.data("popupmenu"),href=a.attr("href");if("#"===href.substr(0,1)){if("#/"===href.substr(0,2)&&(href=href.replace("#/","#")),void 0!==href&&"#"!==href){if(panel=$(href),li.is(":not(.has-popupmenu)")&&!panel.length)return;a.data("panel-link",panel),panel.data("tab-link",a),self.panels=self.panels.add(panel)}popup&&popup.menu.children("li").each((function(){var popupLi=$(this),popupA=popupLi.children("a"),popupHref=popupA.attr("href"),popupPanel=$(popupHref);if(popupA.data("panel-link",popupPanel),popupPanel.data("tab-link",popupA),self.panels=self.panels.add(popupPanel),self.anchors=self.anchors.add(popupA),popupLi.hasClass("dismissible")){var popupIcon=popupLi.children(".icon");popupIcon.length||(popupIcon=$.createIconElement({icon:"close",classes:"icon close"})),popupIcon.detach().appendTo(popupA)}})).on("click.popupmenu",".icon",(function iconClickHandler(e){var popupIcon=$(this),popupLi=popupIcon.closest("li");popupLi.is(".dismissible")&&popupIcon.is(".icon")&&(e.preventDefault(),e.stopPropagation(),self.closeDismissibleTab(popupLi.children("a").attr("href")))}))}})),self.panels.addClass("tab-panel").attr({role:"tabpanel"}).find("h3:first").attr("tabindex","0"),self.panels.appendTo(self.container);var hash,matchingTabs,excludes=":not(.separator):not(.is-disabled):not(.is-hidden)",tabs=this.tablist.children("li".concat(excludes)),selected=this.tablist.children("li.is-selected".concat(excludes)),selectedAnchor=selected.children("a");return self.nestedTabControls=self.panels.find(".tab-container"),tabs.length&&(this.settings.changeTabOnHashChange&&(hash=window.location.hash)&&hash.length&&(matchingTabs=tabs.find('a[href="'.concat(hash,'"]'))).length&&(selectedAnchor=(selected=matchingTabs.first().parent()).children("a")),selected.length||(selectedAnchor=(selected=tabs.not(".add-tab-button, .application-menu-trigger").first()).children("a")),selected.length&&this.activate(selectedAnchor.attr("href"),selectedAnchor)),this.isModuleTabs()&&this.element.children(".toolbar").length&&this.element.addClass("has-toolbar"),this.setOverflow(),this.positionFocusState(selectedAnchor),this.hasAnimatedBar()&&(this.animatedBar.addClass("no-transition"),this.focusBar(void 0,(function(){setTimeout((function(){_this.animatedBar.removeClass("no-transition")}),0)}))),this.tablistContainer&&(this.tablistContainer.on("scroll.tabs",(function(){_this.renderEdgeFading()})),this.renderEdgeFading()),this},renderHelperMarkup:function renderHelperMarkup(){var auxilaryButtonLocation=this.tablistContainer||this.tablist;this.isModuleTabs()&&(auxilaryButtonLocation=this.tablist),this.focusState=this.element.find(".tab-focus-indicator"),this.focusState.length||(this.focusState=$('<div class="tab-focus-indicator" role="presentation"></div>').insertBefore(this.tablist)),this.hasAnimatedBar()?(this.animatedBar=this.element.find(".animated-bar"),this.animatedBar.length||(this.animatedBar=$('<div class="animated-bar" role="presentation"></div>')),this.animatedBar.insertBefore(this.tablist)):this.animatedBar&&this.animatedBar.length&&(this.animatedBar.off().removeData().remove(),this.animatedBar=void 0),this.moreButton||(this.moreButton=$()),this.isVerticalTabs()?this.moreButton.length&&(this.moreButton.off().removeData().remove(),this.moreButton=$()):(this.moreButton.length||(this.moreButton=auxilaryButtonLocation.next(".tab-more")),this.moreButton.length||(this.moreButton=$("<div>").attr({class:"tab-more"}),this.moreButton.append($('<span class="more-text">').text(Locale.translate("More"))),this.moreButton.append($.createIconElement({classes:"icon-more",icon:"dropdown"}))),auxilaryButtonLocation.after(this.moreButton));var appMenuTrigger=this.tablist.find(".application-menu-trigger");return!0===this.settings.appMenuTrigger?this.isModuleTabs()?appMenuTrigger.length||(appMenuTrigger=$('\n            <li class="tab application-menu-trigger">\n              <a href="#">\n                <span class="icon app-header">\n                  <span class="one"></span>\n                  <span class="two"></span>\n                  <span class="three"></span>\n                </span>\n                <span>'.concat(this.settings.appMenuTriggerText||Locale.translate("AppMenuTriggerText"),"</span>\n              </a>\n            </li>\n          ")),this.tablist.prepend(appMenuTrigger)):this.isVerticalTabs()&&appMenuTrigger.length&&appMenuTrigger.off().removeData().remove():appMenuTrigger.length&&(this.isVerticalTabs()?appMenuTrigger.off().removeData().remove():this.tablist.prepend(appMenuTrigger)),this.settings.addTabButton?this.addTabButton&&this.addTabButton.length||(this.addTabButton=$('\n          <div class="add-tab-button" tabindex="0" role="button">\n            <span aria-hidden="true" role="presentation">+</span>\n            <span class="audible">'.concat(Locale.translate("AddNewTab"),"</span>\n          </div>\n        ")),this.addTabButton.insertAfter(this.moreButton),this.element.addClass("has-add-button")):this.addTabButton&&this.addTabButton.length&&(this.addTabButton.off().removeData().remove(),this.addTabButton=void 0,this.element.removeClass("has-add-button")),this},setupEvents:function setupEvents(){var _this2=this,self=this,modal=self.element.closest(".modal");return modal.length&&modal.on("afteropen.tabs",(function(){self.hasAnimatedBar()&&self.focusBar()})),this.tablist.on("mousedown.tabs","> li",(function(e){if(self.handleAddFocusData(e,$(this)),$(e.target).hasClass("close")&&$(e.target).parent().hasClass("has-popupmenu")){var menu=$(this).data("popupmenu").menu,hrefs=[];$.each(menu[0].children,(function(i,li){hrefs.push(li.children[0].href)})),self.closeDismissibleTabs(hrefs)}return 3!==e.which&&self.handleTabClick(e,$(this))})).on("click.tabs","a",(function routeAnchorClick(e){var a=$(e.currentTarget);!0!==this.wasTapped?("touchend"===e.type&&(this.wasTapped=!0),"#"===a.attr("href").substr(0,1)&&e.preventDefault()):this.wasTapped=!1})).on("click.tabs",".icon",(function handleIconClick(e){var elem=$(this);if(!elem.is("[disabled]")&&!elem.parent().hasClass("is-disabled")){var li=$(elem).parent();li.hasClass("dismissible")&&(e.preventDefault(),e.stopPropagation(),self.closeDismissibleTab(li.children("a").attr("href")))}})).on("focus.tabs","a",(function(e){return self.handleTabFocus(e,$(this))})).on("blur.tabs","a",(function handleTabBlur(){$(this).parent().removeClass("is-focused")})).on("keydown.tabs","a",(function(e){return _this2.handleTabKeyDown(e)})),self.tablist.find("li").filter(".has-popupmenu").each((function dropdownTabEvents(i,tab){var li=$(tab),a=li.children("a");function closeDropdownMenuItem(e){e.altKey&&li.is(".dismissible")&&self.closeDismissibleTab(a.attr("href"))}li.data("popupmenu").menu.on("keydown.popupmenu","a",(function(e){switch(e.which){case 27:li.addClass("is-selected"),a.focus();break;case 8:case 46:closeDropdownMenuItem(e)}})),li.on("selected.tabs",(function(e,anchor){var popupLi=$(this),href=$(anchor).attr("href");return!!self.activate(href,$(anchor))&&(self.positionFocusState(a),self.hasAnimatedBar()&&self.focusBar(popupLi),a.focus(),self.scrollTabList(popupLi),popupLi.addClass("is-selected"),!1)}))})),self.tablist.find("li").filter(".dismissible").each((function dismissibleTabEvents(i,tab){$(tab).children("a").on("keydown.tabs",(function(e){self.handleDismissibleTabKeydown(e)}))})),this.setupHelperMarkupEvents(),this.panels.on("keydown.tabs",(function(e){self.handlePanelKeydown(e)})),this.element.on("focusout.tabs",(function(){var noFocusedTabs=!$.contains(self.element[0],document.activeElement),noPopupMenusOpen=0===self.tablist.children(".has-popupmenu.is-open").length;noFocusedTabs&&noPopupMenusOpen&&!self.moreButton.is(".is-selected, .popup-is-open")&&self.hideFocusState()})).on("updated.tabs",(function(e,settings){self.updated(settings)})).on("activated.tabs",(function(e){e.stopPropagation()})).on("add.tabs",(function(e,newTabId,newTabOptions,newTabIndex){self.add(newTabId,newTabOptions,newTabIndex)})).on("remove.tabs",(function(e,tabId){self.remove(tabId)})),$("body").on("resize.tabs".concat(this.tabsIndex),(function(){self.handleResize()})),self.handleResize(!0),$(".tab-panel input").on("error.tabs, valid.tabs",(function(){var currentLi=$(".tab.is-selected");self.focusBar(currentLi)})),this},setupHelperMarkupEvents:function setupHelperMarkupEvents(){var self=this;this.moreButton.on("click.tabs",(function(e){self.handleMoreButtonClick(e)})).on("keydown.tabs",(function(e){self.handleMoreButtonKeydown(e)})).on("focus.tabs",(function(e){self.handleMoreButtonFocus(e)})).on("mousedown.tabs",(function(e){self.handleAddFocusData(e,$(this))})),this.settings.addTabButton&&this.addTabButton.on("click.tabs",(function(){self.handleAddButton()})).on("keydown.tabs",(function(e){self.handleAddButtonKeydown(e)})).on("focus.tabs",(function(e){self.handleAddButtonFocus(e)}))},removeHelperMarkupEvents:function removeHelperMarkupEvents(){return this.moreButton&&this.moreButton.length&&this.moreButton.off("click.tabs keydown.tabs focus.tabs mousedown.tabs"),this.addTabButton&&this.addTabButton.length&&this.addTabButton.off("click.tabs keydown.tabs focus.tabs"),this},handleAddFocusData:function handleAddFocusData(e,elem){var tab=elem;return tab.is(".is-disabled")?(e.preventDefault(),!1):(tab.is(this.moreButton)||(tab=tab.children("a")),this.hideFocusState(),tab.data("focused-by-click",!0),!0)},handleTabClick:function handleTabClick(e,li){if(this.element.is(".is-disabled")||li&&(li.is(".is-disabled")||li.is(".separator")))return e.stopPropagation(),e.preventDefault(),!1;if(!this.handleAppMenuTabKeydown(e))return!0;var a=li.children("a");if(a.data("focused-by-click",!0),this.popupmenu&&this.popupmenu.element.hasClass("is-open")&&this.popupmenu.close(),li.is(".has-popupmenu"))return this.positionFocusState(a),!0;var href=a.attr("href");return li.is(".add-tab-button")&&(li=(a=this.handleAddButton()).parent(),href=a.attr("href"),this.element.trigger("tab-added",[a])),2===e.which?(li.is(".dismissible")&&$(e.target).is(".close")&&this.closeDismissibleTab(href),e.preventDefault(),!0):!this.activate(href,a)||(this.changeHash(href),this.focusState.removeClass("is-visible"),a.focus(),this.isScrollableTabs()&&this.scrollTabList(li),this.focusBar(li),this.positionFocusState(a),!0!==this.settings.lazyLoad||!this.isURL(href))},handleMoreButtonClick:function handleMoreButtonClick(e){return this.element.is(".is-disabled")||this.moreButton.is(".is-disabled")?(e.preventDefault(),e.stopPropagation(),!1):(this.moreButton.data("focused-by-click",!0),this.hasMoreButton()||e.stopPropagation(),this.moreButton.hasClass("popup-is-open")?(this.popupmenu.close(),this.moreButton.removeClass("popup-is-open")):this.buildPopupMenu(),this.hideFocusState(),!0)},handleTabFocus:function handleTabFocus(e,a){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var li=a.parent(),dataFocusedClick=a.data("focused-by-click"),focusedByKeyboard=void 0===dataFocusedClick||dataFocusedClick&&!1===dataFocusedClick;return $.removeData(a[0],"focused-by-click"),this.isTabOverflowed(li)?(this.buildPopupMenu(a.attr("href")),this.moreButton.addClass("is-focused"),this.positionFocusState(this.moreButton)):(li.addClass("is-focused"),this.positionFocusState(a,focusedByKeyboard)),!0},handleMoreButtonFocus:function handleMoreButtonFocus(e){if(this.element.is(".is-disabled"))e.preventDefault();else{var dataFocusedClick=this.moreButton.data("focused-by-click"),focusedByKeyboard=dataFocusedClick&&!1===dataFocusedClick;$.removeData(this.moreButton[0],"focused-by-click"),this.focusState.removeClass("is-visible"),this.positionFocusState(this.moreButton,focusedByKeyboard)}},handleTabKeyDown:function handleTabKeyDown(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;if(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey&&8!==e.which)return!0;var self=this,passableKeys=[8,13,32];function isPassableKey(){return $.inArray(e.which,passableKeys)>-1}if(e.which<32&&!isPassableKey()||e.which>46)return!0;if(isPassableKey()&&!this.handleAppMenuTabKeydown(e))return!0;function openMenu(oldHref){e.preventDefault(),setTimeout((function(){self.buildPopupMenu(oldHref)}),0)}var targetLi,allExcludes=":not(.separator):not(.is-disabled):not(:hidden)",currentLi=$(e.currentTarget).parent(),currentA=currentLi.children("a"),tabs=self.tablist.children("li".concat(allExcludes)),isRTL=Locale.isRTL();function previousTab(){for(var i=tabs.index(currentLi)-1;i>-1&&!targetLi;){if(tabs.eq(i).is(allExcludes))return tabs.eq(i);i-=1}if(self.settings.addTabButton)return self.addTabButton;var last=self.tablist.children("li".concat(allExcludes)).last();return self.hasMoreButton()&&self.isScrollableTabs()&&openMenu(last.find("a").attr("href")),last}function nextTab(){for(var i=tabs.index(currentLi)+1;i<tabs.length&&!targetLi;){if(tabs.eq(i).is(allExcludes))return tabs.eq(i);i++}var first=self.tablist.children("li".concat(allExcludes)).first();return self.hasMoreButton()&&self.isScrollableTabs()?(openMenu(first.find("a").attr("href")),first):self.settings.addTabButton?self.addTabButton:first}function activate(){if(currentLi.hasClass("has-popupmenu"))currentLi.data("popupmenu").open();else{var href=currentA.attr("href");currentLi.is(".add-tab-button")&&(currentA=self.handleAddButton(),currentLi=currentA.parent(),href=currentA.attr("href"),self.element.trigger("tab-added",[currentA])),self.activate(href)&&(self.changeHash(href),self.focusBar(currentLi),function checkAngularClick(){(currentA.attr("ng-click")||currentA.attr("data-ng-click"))&&currentA.click()}(),currentA[0].focus(),self.hideFocusState(),self.handleOutboundLink(href))}}switch(e.which){case 8:return e.altKey&&currentLi.is(".dismissible")&&(e.preventDefault(),self.closeDismissibleTab(currentA.attr("href"))),!0;case 13:case 32:return activate(),!1;case 38:targetLi=previousTab(),e.preventDefault();break;case 37:targetLi=isRTL?nextTab():previousTab(),e.preventDefault();break;case 40:targetLi=nextTab(),e.preventDefault();break;case 39:targetLi=isRTL?previousTab():nextTab(),e.preventDefault()}if(targetLi){var isAddTabButton=targetLi.is(".add-tab-button"),focusStateTarget=isAddTabButton?targetLi:targetLi.children("a");if(this.isTabOverflowed(targetLi))return openMenu(targetLi.children("a").attr("href"));isAddTabButton?self.addTabButton.focus():focusStateTarget.focus(),this.isScrollableTabs()&&this.scrollTabList(focusStateTarget),self.positionFocusState(focusStateTarget,!0)}return!0},handleDismissibleTabKeydown:function handleDismissibleTabKeydown(e){var key=e.which,tab=$(e.target);if(tab.is("a")&&(tab=tab.parent()),e.altKey&&46===key){if(tab.children("a").is("[disabled]")||tab.hasClass("is-disabled"))return;e.preventDefault(),this.closeDismissibleTab(tab.children("a").attr("href"))}},handleAppMenuTabKeydown:function handleAppMenuTabKeydown(e){var target=$(e.target);if(!target.parent().is(".application-menu-trigger")&&!target.is(".application-menu-trigger"))return!0;var menu=$("#application-menu");return!!menu.length&&(e.preventDefault(),this.hideFocusState(),menu.hasClass("is-open")?(menu.trigger("close-applicationmenu"),!1):(menu.trigger("open-applicationmenu"),!1))},handleMoreButtonKeydown:function handleMoreButtonKeydown(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var self=this,isRTL=Locale.isRTL();function openMenu(){e.preventDefault(),self.buildPopupMenu(self.tablist.find(".is-selected").children("a").attr("href")),self.positionFocusState(self.moreButton,!0)}function lastTab(){e.preventDefault(),self.findLastVisibleTab()}switch(e.which){case 37:if(isRTL){openMenu();break}lastTab();break;case 38:lastTab();break;case 13:case 32:e.preventDefault();break;case 39:if(isRTL){lastTab();break}openMenu();break;case 40:openMenu()}return!0},handlePanelKeydown:function handlePanelKeydown(e){var key=e.which,panel=$(e.target),a=this.anchors.filter("#".concat(panel.attr("id")));return this.anchors.filter("#".concat(panel.attr("id"))).parent().is(".dismissible")&&e.altKey&&46===key?(e.preventDefault(),this.closeDismissibleTab(a.attr("href"))):e.ctrlKey&&38===key&&$.contains(document.activeElement,panel[0])?(e.preventDefault(),this.activate(a.attr("href"),a)):void 0},handleAddButton:function handleAddButton(){var self=this,cb=this.settings.addTabButtonCallback;if(cb&&"function"==typeof cb){var newTabId=cb();return this.anchors.filter('[href="#'.concat(newTabId,'"]'))}var newIndex=this.tablist.children().index(this.addTabButton),newId=function makeId(){return self.idCounter="number"==typeof self.idCounter?self.idCounter:-1,self.idCounter++,"new-tab-".concat(self.idCounter)}(),settings={name:function makeName(id){var nameParts=id.toString().split("-");return nameParts.forEach((function(val,i){nameParts[i]=val.charAt(0).toUpperCase()+val.slice(1)})),nameParts.join(" ")}(newId),content:"&nbsp;",isDismissible:!0};newIndex<0&&(newIndex=this.tablist.find("li:not(.separator)").length);var externalSettings=this.element.triggerHandler("before-tab-added",[newId,settings,newIndex]);return externalSettings?(externalSettings.newId&&externalSettings.newId.length&&"string"==typeof externalSettings.newId&&(newId=externalSettings.newId),externalSettings.settings&&"object"===_typeof(externalSettings.settings)&&(settings=externalSettings.settings),isNaN(externalSettings.newIndex)||(newIndex=externalSettings.newIndex),this.add(newId,settings,newIndex),this.anchors.filter('[href="#'.concat(newId,'"]'))):(this.add(newId,settings,newIndex),this.anchors.filter('[href="#'.concat(newId,'"]')))},handleAddButtonKeydown:function handleAddButtonKeydown(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var key=e.which;if([13,32,37,38,39,40].indexOf(key)<0)return!1;var targetLi,self=this,isRTL=Locale.isRTL(),filter="li:not(.separator):not(.is-disabled):not(:hidden)";function openMenu(){e.preventDefault(),targetLi=self.tablist.find(filter).last(),self.isTabOverflowed(targetLi)&&(self.buildPopupMenu(targetLi.children("a").attr("href")),self.positionFocusState(self.moreButton,!0))}function firstTab(){targetLi=self.tablist.find(filter).first()}switch(key){case 37:if(isRTL){firstTab();break}openMenu();break;case 38:openMenu();break;case 13:case 32:return e.preventDefault(),this.handleAddButton();case 39:if(isRTL){openMenu();break}firstTab();break;case 40:firstTab()}return targetLi.children("a").focus(),!0},handleAddButtonFocus:function handleAddButtonFocus(){this.tablist.find("li:not(.separator)").add(this.moreButton).removeClass("is-focused"),this.addTabButton.addClass("is-focused"),this.positionFocusState(this.addTabButton,!0)},handleResize:function handleResize(ignoreResponsiveCheck){ignoreResponsiveCheck||this.checkResponsive(!0),this.setOverflow();var selected=this.tablist.find(".is-selected");(!selected.length||this.moreButton.is(".is-selected")||this.isTabOverflowed(selected))&&(selected=this.moreButton),selected.length?(this.focusBar(selected),this.positionFocusState(selected)):(this.defocusBar(),this.hideFocusState()),this.handleVerticalTabResize(),this.renderVisiblePanel(),this.renderEdgeFading()},checkResponsive:function checkResponsive(handleRebuild){var self=this,classList=self.element[0].classList;function rebuild(){self.removeHelperMarkupEvents(),self.renderHelperMarkup(),self.setupHelperMarkupEvents()}function makeVertical(){classList.contains("is-in-responsive-mode")&&(classList.add("vertical"),classList.remove("is-in-responsive-mode"),classList.remove("header-tabs"),classList.remove("alternate"),handleRebuild&&rebuild())}this.isResponsiveVerticalTabs()&&breakpoints.isBelow("phone-to-tablet")?function makeResponsive(){classList.contains("is-in-responsive-mode")||(classList.add("is-in-responsive-mode"),classList.add("header-tabs"),classList.contains("is-personalizable")||classList.add("alternate"),classList.remove("vertical"),handleRebuild&&rebuild())}():makeVertical()},handleVerticalTabResize:function handleVerticalTabResize(){if(this.isVerticalTabs()&&this.isNested()&&!this.isNestedInLayoutTabs()&&!this.isHidden()){var elemStyle=window.getComputedStyle(this.element[0]),elemOuterHeight=elemStyle.getPropertyValue("height")+elemStyle.getPropertyValue("margin-top")+elemStyle.getPropertyValue("margin-bottom");this.tablist[0].style.height=elemOuterHeight}},handleOutboundLink:function handleOutboundLink(href,useRelativePath){"#"!==href.charAt(0)&&("/"!==href.charAt(0)||useRelativePath&&!1!==useRelativePath||(href=window.location.origin+href),window.location=href)},hasAnimatedBar:function hasAnimatedBar(){return!this.isModuleTabs()&&!this.isVerticalTabs()},hasMoreButton:function hasMoreButton(){return this.element[0].classList.contains("has-more-button")},isInResponsiveMode:function isInResponsiveMode(){return this.element[0].classList.contains("is-in-responsive-mode")},isModuleTabs:function isModuleTabs(){return this.element.hasClass("module-tabs")},isVerticalTabs:function isVerticalTabs(){return this.element.hasClass("vertical")},isResponsiveVerticalTabs:function isResponsiveVerticalTabs(){return!0===this.settings.verticalResponsive},isHeaderTabs:function isHeaderTabs(){return this.element.hasClass("header-tabs")},isScrollableTabs:function isScrollableTabs(){return!this.isModuleTabs()&&!this.isVerticalTabs()},isHidden:function isHidden(){return this.element.is(":hidden")},isNested:function isNested(){return this.element.closest(".tab-panel").length},isActive:function isActive(href){return!(!href||!href.length||1===href.length&&href.indexOf("#")<1)&&this.getPanel(href)[0].classList.contains("can-show")},isNestedInLayoutTabs:function isNestedInLayoutTabs(){var nestedInModuleTabs=this.element.closest(".module-tabs").length,nestedInHeaderTabs=this.element.closest(".header-tabs").length,hasTabContainerClass=this.element.closest(".tab-panel-container").length;return nestedInModuleTabs>0||nestedInHeaderTabs>0||hasTabContainerClass>0},isTab:function isTab(obj){return obj instanceof jQuery&&obj.length&&obj.is("li.tab")},isAnchor:function isAnchor(obj){return obj instanceof jQuery&&obj.length&&obj.is("a")},getAnchor:function getAnchor(href){return this.isAnchor(href)?href:(-1===href.indexOf("#")&&"/"!==href.charAt(0)&&(href="#".concat(href)),this.anchors.filter('[href="'.concat(href,'"]')))},getPanel:function getPanel(href){return this.isTab(href)&&(href=href.children("a")),this.isAnchor(href)&&(href=href.attr("href")),href&&""!==href&&"#"!==href?("#/"===href.substr(0,2)&&(href=href.replace("#/","#")),this.panels.filter('[id="'.concat(href.replace(/#/g,""),'"]'))):$()},getMenuItem:function getMenuItem(href){return this.isAnchor(href)&&(href=href.attr("href")),-1===href.indexOf("#")&&(href="#".concat(href)),this.moreMenu.children().children().filter('[data-href="'.concat(href,'"]')).parent()},getPreviousTab:function getPreviousTab(tabId){for(var tab=this.getTab(null,tabId),filter="li:not(.separator):not(:hidden):not(.is-disabled)",tabs=this.tablist.find(filter),idx=tabs.index(tab),target=tabs.eq(0===idx?1:idx-1);target.length&&!target.is(filter);)target=tabs.eq(tabs.index(target)-1);if(target.is(".has-popupmenu")){var menuAPI=target.data("popupmenu");menuAPI&&(target=menuAPI.menu.children("li").first())}return target},activateAdjacentTab:function activateAdjacentTab(e,tabId){var tab=this.doGetTab(e,tabId);"string"==typeof e&&(tabId=e),tab.is(".is-selected")?tab.prevAll("li.tab").not(".hidden").not(".is-disabled").length>0?this.select($(tab.prevAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):tab.nextAll("li.tab").not(".hidden").length>0&&this.select($(tab.nextAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash,!0)},activatePreviousTab:function activatePreviousTab(tabId,target){var tab=this.getTab(null,tabId);if(target&&target instanceof jQuery||(target=this.getPreviousTab(tabId)),!target.length)return this.hideFocusState(),this.defocusBar(),target;var a=target.children("a");if(tab.is(".is-selected")){if(!this.activate(a.attr("href"),a))return target;a.focus()}return this.positionFocusState(a),this.focusBar(target),target},isURL:function isURL(href){return!(!href||0===href.indexOf("#"))},activate:function activate(href,anchor){var self=this;if(self.isURL(href))return this.callSource(href,anchor,!0);for(var oldPanel,selectedStateTarget,activeStateTarget,a=self.getAnchor(href),targetTab=a.parent(),targetPanel=self.getPanel(href),targetPanelElem=targetPanel[0],oldTab=self.anchors.parents().filter(".is-selected"),i=0;i<self.panels.length;i++)self.panels[i].classList.contains("is-visible")&&(oldPanel=$(self.panels[i]));if(oldPanel||(oldPanel=self.panels),!self.element.trigger("beforeactivated",[a]))return!1;function completeActivate(vetoResult){if(targetPanel.length<1){if(self.settings.source)return self.callSource(href,a),!0}else{oldPanel[0].classList.remove("can-show"),oldPanel[0].classList.remove("is-visible"),oldPanel.closeChildren(),self.element.trigger("activated",[a]),targetPanelElem.classList.add("can-show"),self.renderVisiblePanel(),targetPanelElem.offsetHeight;var timer=new RenderLoopItem({duration:math.convertDelayToFPS(150),timeoutCallback:function timeoutCallback(){self.element.trigger("afteractivated",[a])}});renderLoop.register(timer),targetPanelElem.classList.add("is-visible")}self.updateAria(a),oldTab.add(self.moreButton).removeClass("is-selected"),targetTab[0]&&targetTab[0].classList.contains("tab")&&(selectedStateTarget=targetTab,activeStateTarget=targetTab);var ddTab,ddMenu=targetTab.parents(".popupmenu");ddMenu.length&&(ddTab=ddMenu.data("trigger")).length&&(selectedStateTarget=ddTab,activeStateTarget=ddTab),self.isTabOverflowed(activeStateTarget)&&(activeStateTarget=self.moreButton,selectedStateTarget=self.moreButton),self.focusBar(activeStateTarget),selectedStateTarget&&selectedStateTarget.addClass("is-selected");var childToolbars=targetPanel.find(".toolbar");return childToolbars.length&&childToolbars.each((function(){var api=$(this).data("toolbar");api&&"function"==typeof api.handleResize&&api.handleResize()})),utils.fixSVGIcons(targetPanel[0]),vetoResult||!1}return this.settings.beforeActivate&&"function"==typeof this.settings.beforeActivate?this.settings.beforeActivate(oldTab,targetTab,completeActivate):completeActivate(!0)},renderEdgeFading:function renderEdgeFading(){if(this.isScrollableTabs()&&this.tablistContainer){var isRTL=Locale.isRTL(),tablistContainerElem=this.tablistContainer[0],scrollLeft=tablistContainerElem.scrollLeft,scrollWidth=tablistContainerElem.scrollWidth,containerWidth=parseInt(window.getComputedStyle(tablistContainerElem).getPropertyValue("width"),10);isRTL?(this.element[0].classList[scrollLeft>0?"add":"remove"]("scrolled-left"),this.element[0].classList[scrollWidth-scrollLeft<=containerWidth?"remove":"add"]("scrolled-right")):(this.element[0].classList[scrollLeft>0?"add":"remove"]("scrolled-right"),this.element[0].classList[scrollWidth-scrollLeft<=containerWidth?"remove":"add"]("scrolled-left"))}},callSource:function callSource(href,anchor,isURL){var _this3=this;if((null==isURL||!1===isURL)&&!this.settings.source)return!1;if(!0!==this.settings.lazyLoad)return!1;var sourceType=_typeof(this.settings.source),response=function response(htmlContent){if(null!=htmlContent){if(htmlContent=xssUtils.sanitizeHTML(htmlContent),isURL){var containerId=_this3.element[0].id||"",id=utils.uniqueId(anchor,"tab",containerId);href="#".concat(id),anchor[0].setAttribute("href",href)}_this3.createTabPanel(href,htmlContent,!0),_this3.activate(href),_this3.element.triggerHandler("complete"),_this3.element.trigger("requestend",[href,htmlContent])}};function handleStringSource(url,options){var opts=$.extend({dataType:"html"},options,{url:url}),request=$.ajax(opts);return request.done(response),request}if(this.container.triggerHandler("start"),this.container.trigger("requeststart"),isURL)return handleStringSource(href,this.ajaxOptions);if("function"===sourceType)return this.settings.source(response,href,this.settings.sourceArguments);if("string"===sourceType){var safeHref=href.replace(/#/g,""),sourceURL=this.settings.source.toString();if(!(sourceURL.indexOf(safeHref)>-1)){var param="tab=".concat(safeHref),paramIndex=sourceURL.indexOf("?"),hashIndex=sourceURL.indexOf("#"),insertIndex=sourceURL.length;paramIndex<0?(param="?".concat(param),hashIndex>-1&&(insertIndex=hashIndex+1)):(param+="&",insertIndex=paramIndex+1),sourceURL=stringUtils.splice(sourceURL,insertIndex,0,param)}return handleStringSource(sourceURL,this.ajaxOptions)}return!1},renderVisiblePanel:function renderVisiblePanel(){this.resizeNestedTabs()},changeHash:function changeHash(href){if(this.settings.changeTabOnHashChange){href||(href=""),href.replace(/#/g,"");var cb=this.settings.hashChangeCallback;cb&&"function"==typeof cb?cb(href):window.location.hash=href,this.element.triggerHandler("hash-change",[href])}},updateAria:function updateAria(a){a&&(this.anchors.attr({"aria-selected":"false","aria-expanded":"false",tabindex:"-1"}),this.moreButton.attr({tabindex:"-1"}),a.length&&this.element.is(":not(.is-disabled)")&&(a.parent().removeClass("is-selected"),this.isTabOverflowed(a.parent())?this.moreButton.attr({tabindex:"0"}):a.attr({"aria-selected":"true","aria-expanded":"true",tabindex:"0"}).parent().addClass("is-selected")))},resizeNestedTabs:function resizeNestedTabs(){this.nestedTabControls.each((function(i,container){var api=$(container).data("tabs");api&&api.handleResize&&"function"==typeof api.handleResize&&api.handleResize(!0)}))},add:function add(tabId,options,atIndex){if(!tabId)return this;options||(options={});var startFromZero=0===this.tablist.find("li").not(".application-menu-trigger, .add-tab-button").length;function getObjectFromSelector(sourceString){switch(_typeof(sourceString)){case"string":if(null!==sourceString.match(/#/g)){var obj=$(sourceString);sourceString=obj.length?obj:sourceString}}return sourceString}tabId="".concat(tabId.replace(/#/g,"")),options.name=options.name?options.name.toString():"&nbsp;",options.isDismissible=!!options.isDismissible&&!0===options.isDismissible,options.isDropdown=!!options.isDropdown&&!0===options.isDropdown,options.content&&(options.content=getObjectFromSelector(options.content)),options.dropdown&&(options.dropdown=getObjectFromSelector(options.dropdown));var tabHeaderMarkup=$('<li role="presentation" class="tab"></li>'),anchorMarkup=$('<a href="#'.concat(tabId,'" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1">').concat(xssUtils.escapeHTML(options.name),"</a>")),tabContentMarkup=this.createTabPanel(tabId,options.content);if(tabHeaderMarkup.html(anchorMarkup),options.isDismissible&&(tabHeaderMarkup.addClass("dismissible"),tabHeaderMarkup.append($.createIconElement({icon:"close",classes:"close icon"}))),this.settings.tabCounts&&anchorMarkup.prepend('<span class="count">0 </span>'),options.dropdown,function insertIntoTabset(self,targetIndex){var method,tabs=self.tablist.children("li"),nonSpecialTabs=tabs.not(".application-menu-trigger, .add-tab-button"),finalIndex=tabs.length-1;if(!tabs.length)return tabHeaderMarkup.appendTo(self.tablist),void tabContentMarkup.appendTo(self.container);var addTabButton=tabs.filter(".add-tab-button"),appMenuTrigger=tabs.filter(".application-menu-trigger");(null==targetIndex||isNaN(targetIndex))&&(targetIndex=tabs.length),tabs.length>nonSpecialTabs.length&&(function pastEndOfTabset(index){return index>tabs.length-1}(targetIndex)&&addTabButton&&addTabButton.length&&(targetIndex-=1),function atBeginningOfTabset(index){return index<=0}(targetIndex)&&appMenuTrigger&&appMenuTrigger.length&&(targetIndex+=1));var conditionInsertTabBefore=tabs.eq(targetIndex).length>0;finalIndex=conditionInsertTabBefore?targetIndex:finalIndex,method="insertAfter",conditionInsertTabBefore&&(method="insertBefore"),tabHeaderMarkup[method](tabs.eq(finalIndex)),tabContentMarkup.appendTo(self.container)}(this,atIndex),this.panels=$(this.panels.add(tabContentMarkup)),this.anchors=$(this.anchors.add(anchorMarkup)),anchorMarkup.data("panel-link",tabContentMarkup),tabContentMarkup.data("tab-link",anchorMarkup),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&anchorMarkup.on("beforeshow.toolbar",(function(){return"yes"===anchorMarkup.data("cutoffTitle")})).tooltip({content:"".concat(anchorMarkup.text().trim())}),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),startFromZero){if(this.positionFocusState(anchorMarkup),this.focusBar(tabHeaderMarkup),!this.activate(anchorMarkup.attr("href")))return this;anchorMarkup.focus()}return options.doActivate&&this.activate(anchorMarkup.attr("href")),this},remove:function remove(tabId,disableBeforeClose){var self=this,targetLi=this.doGetTab(null,tabId);if(!targetLi||!targetLi.length)return!1;var targetAnchor=targetLi.children("a"),targetPanel=this.getPanel(tabId),hasTargetPanel=targetPanel&&targetPanel.length,targetLiIndex=this.tablist.children("li").index(targetLi),notATab=".application-menu-trigger, .separator, .is-disabled, :hidden",prevLi=targetLi.prev();if(!disableBeforeClose&&!1===this.element.triggerHandler("beforeclose",[targetLi]))return!1;var wasSelected=!1;targetLi.hasClass("is-selected")?wasSelected=!0:prevLi=$(this.tablist.children("li").not(notATab).filter(".is-selected")),hasTargetPanel&&(this.panels=$(this.panels.not(targetPanel))),this.anchors=$(this.anchors.not(targetAnchor)),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&targetAnchor.off("beforeshow.toolbar").data("tooltip").destroy();var popupAPI=targetLi.data("popupmenu");targetLi.hasClass("has-popupmenu")&&popupAPI&&(popupAPI.menu.children("li").each((function(){self.remove($(this).children("a").attr("href"))})),popupAPI.destroy());var parentMenu=targetLi.closest(".dropdown-tab"),trigger=parentMenu.data("trigger");targetLi.find(".icon").off().removeData().remove(),targetLi.off(),targetAnchor.off(),targetLi.removeData().remove(),hasTargetPanel&&targetPanel.removeData().remove();var menuItem=targetAnchor.data("moremenu-link");menuItem&&(menuItem.parent().off().removeData().remove(),targetAnchor.removeData()),function isLastDropdownTabItem(menu){return menu.length&&0===menu.children("li:not(.separator)").length}(parentMenu)&&(prevLi=this.getPreviousTab(trigger),setTimeout((function(){self.remove(trigger)}),1)),trigger&&trigger.length&&trigger.data("popupmenu").close(),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),this.element.trigger("close",[targetLi]);for(var count=targetLiIndex-1;count>-1;)count=-1,prevLi.is(notATab)&&(prevLi=this.tablist.children("li").not(notATab)[0],count-=1);if(prevLi.length||(prevLi=this.tablist.children("li").not(notATab).first()),!prevLi.length)return this.hideFocusState(),this.defocusBar(),this.element.trigger("afterclose",[targetLi]),this;var a=prevLi.children("a"),activateTargetA=a;return this.positionFocusState(a),wasSelected&&(prevLi.is(".has-popupmenu")&&prevLi.data("popupmenu")&&(activateTargetA=prevLi.data("popupmenu").menu.children().first().children("a")),!this.activate(activateTargetA.attr("href")))||(this.focusBar(prevLi),a.focus(),this.element.trigger("afterclose",[targetLi])),this},createTabPanel:function createTabPanel(tabId,content,doInsert){tabId=tabId.replace(/#/g,"");var markup=$('<div id="'.concat(xssUtils.stripTags(tabId),'" class="tab-panel" role="tabpanel"></div>'));return markup.append(content),!0===doInsert&&this.container.append(markup),this.panels=$(this.panels.add(markup)),markup},checkPopupMenuItems:function checkPopupMenuItems(tab){function getRemainingMenuItems(popupAPI){if(!popupAPI||!popupAPI.menu)return $();var items=popupAPI.menu.children("li");return items.length?items:(popupAPI.destroy(),$())}if(tab.is(".has-popupmenu"))return getRemainingMenuItems(tab.data("popupmenu"));var ddTab=tab.closest(".dropdown-tab");return ddTab.length?getRemainingMenuItems(ddTab.data("popupmenu")):$()},getTab:function getTab(e,tabId){var self=this,tab=$();return tabId instanceof $&&tabId.length>0?tabId.is("a")?tabId.parent():tabId:e?function getTabFromEvent(ev){var t=$(ev.currentTarget);return t.is(".tab")?t:t.closest(".tab").length?t.closest(".tab").first():null}(e):tabId?function getTabFromId(id){if(!id||""===id||"#"===id)return null;-1===id.indexOf("#")&&(id="#".concat(id));var anchor=self.anchors.filter('[href="'.concat(id,'"]'));return anchor.length?anchor.parent():null}(tabId):tab},doGetTab:function doGetTab(e,tabId){return(e||tabId)&&(!e||e instanceof $.Event||"string"==typeof e)?e?"string"!=typeof e?this.getTab(e):this.getTab(null,e):this.getTab(null,tabId):$()},hide:function hide(e,tabId){var tab=this.doGetTab(e,tabId);return this.activateAdjacentTab(e,tabId),tab.addClass("hidden"),this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash),this.focusBar(),this.positionFocusState(),this},show:function show(e,tabId){return this.doGetTab(e,tabId).removeClass("hidden"),this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash),this.focusBar(),this.positionFocusState(),this},disableTab:function disableTab(e,tabId){var tab=this.doGetTab(e,tabId);return this.activateAdjacentTab(e,tabId),tab.addClass("is-disabled"),this.focusBar(),this.positionFocusState(),this},enableTab:function enableTab(e,tabId){return this.doGetTab(e,tabId).removeClass("is-disabled"),this.focusBar(),this.positionFocusState(),this},rename:function rename(e,tabId,name){if(e&&"string"==typeof e&&(name=tabId,tabId=e),name){var count,tab=this.doGetTab(e,tabId),hasCounts=this.settings.tabCounts,hasTooltip=this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips,anchor=tab.children("a");hasCounts&&(count=anchor.find(".count").clone()),anchor.text(name.toString()),hasCounts&&anchor.prepend(count),hasTooltip&&anchor.data("tooltip").setContent(name.trim());var doesTabExist=this.tablist.children("li").length<2?tab:void 0;this.positionFocusState(doesTabExist),this.focusBar(doesTabExist)}},updateCount:function updateCount(e,tabId,count){if(e&&"string"==typeof e&&(count=tabId,tabId=e),this.settings.tabCounts&&count){var tab=this.doGetTab(e,tabId);tab.children("a").find(".count").text("".concat(count.toString()," "));var doesTabExist=this.tablist.children("li").length<2?tab:void 0;this.positionFocusState(doesTabExist),this.focusBar(doesTabExist)}},getActiveTab:function getActiveTab(){var visible=this.panels.filter(":visible");return this.anchors.filter('[href="#'.concat(visible.first().attr("id"),'"]'))},getVisibleTabs:function getVisibleTabs(){var self=this,tabHash=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each((function tabOverflowIterator(){var tab=$(this);self.isTabOverflowed(tab)||(tabHash=tabHash.add(tab))})),tabHash},getOverflowTabs:function getOverflowTabs(){var self=this,tabHash=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each((function tabOverflowIterator(){var tab=$(this);self.isTabOverflowed(tab)&&(tabHash=tabHash.add(tab))})),tabHash},setOverflow:function setOverflow(){var tablistStyle,tablistHeight,overflowCondition,self=this,elem=this.element[0],tablist=this.tablist[0],hasMoreIndex=this.hasMoreButton(),isScrollableTabs=this.isScrollableTabs();function checkModuleTabs(){self.isModuleTabs()&&self.adjustModuleTabs()}checkModuleTabs(),isScrollableTabs?overflowCondition=this.tablistContainer[0].scrollWidth>this.tablistContainer[0].offsetWidth:(tablistStyle=window.getComputedStyle(tablist,null),tablistHeight=parseInt(tablistStyle.getPropertyValue("height"),10)+1,overflowCondition=tablist.scrollHeight>tablistHeight),overflowCondition?hasMoreIndex||(elem.classList.add("has-more-button"),checkModuleTabs()):hasMoreIndex&&(elem.classList.remove("has-more-button"),checkModuleTabs()),this.adjustSpilloverNumber()},adjustModuleTabs:function adjustModuleTabs(){var self=this,sizeableTabs=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),appTrigger=this.tablist.find(".application-menu-trigger"),hasAppTrigger=appTrigger.length>0,tabContainerW=this.tablist.outerWidth(),visibleTabSize=120,appTriggerSize=hasAppTrigger?appTrigger.outerWidth():0;if(sizeableTabs.children("a").removeAttr("style"),sizeableTabs.removeAttr("style").each((function(){var t=$(this);self.isTabOverflowed(t)&&(sizeableTabs=sizeableTabs.not(t))})),!sizeableTabs.length)return visibleTabSize=tabContainerW-appTriggerSize+101,void(this.moreButton[0].style.width="".concat(visibleTabSize,"px"));var a,anchorStyle=window.getComputedStyle(sizeableTabs.eq(0).children()[0]),anchorPadding=parseInt(anchorStyle.paddingLeft,10)+parseInt(anchorStyle.paddingRight,10);this.moreButton[0].hasAttribute("style")&&this.moreButton[0].removeAttribute("style"),(visibleTabSize=(tabContainerW-appTriggerSize)/sizeableTabs.length-1)<120&&(visibleTabSize=120);for(var cutoff="no",isSideBySide=1===this.element.closest(".side-by-side").length,i=0;i<sizeableTabs.length;i++){(a=sizeableTabs.eq(i).children("a"))[0].style.width="",(!0===this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&(cutoff="no",parseInt(window.getComputedStyle(sizeableTabs[i]).width,10)>visibleTabSize-anchorPadding&&(cutoff="yes"),a.data("cutoffTitle",cutoff));var diff=0;"ios"===Environment.os.name&&Environment.devicespecs.isMobile&&isSideBySide&&(diff=25),sizeableTabs[i].style.width="".concat(visibleTabSize-diff,"px"),a[0].style.width="".concat(visibleTabSize-diff,"px")}this.adjustSpilloverNumber()},adjustSpilloverNumber:function adjustSpilloverNumber(){var moreDiv=this.moreButton.find(".more-text"),tabs=this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)"),overflowedTabs=this.getOverflowTabs();tabs.length<=overflowedTabs.length?moreDiv.text("".concat(Locale.translate("Tabs"))):moreDiv.text("".concat(Locale.translate("More")));var countDiv=this.moreButton.find(".count");countDiv.length||(countDiv=$('<span class="count"></span>'),this.moreButton.children("span").first().prepend(countDiv)),countDiv.text("".concat(overflowedTabs.length," "))},select:function select(href,noFocus){var modHref=href.replace(/#/g,""),anchor=this.getAnchor(modHref);this.positionFocusState(void 0,!1),this.focusBar(anchor.parent()),this.activate(anchor.attr("href"))&&(this.changeHash(modHref),noFocus||anchor.focus())},buildPopupMenu:function buildPopupMenu(startingHref){var self=this;self.popupmenu&&(self.popupmenu.destroy(),$("#tab-container-popupmenu").off("focus.popupmenu").removeData().remove(),$(document).off("keydown.popupmenu"));var menuHtml=$("#tab-container-popupmenu"),shouldBeSelectable="";this.isScrollableTabs()&&(shouldBeSelectable=" is-selectable"),0===menuHtml.length?menuHtml=$('<ul id="tab-container-popupmenu" class="tab-list-spillover'.concat(shouldBeSelectable,'">')).appendTo("body"):menuHtml.html("");var tabs=self.tablist.children("li"),isRTL=Locale.isRTL();function buildMenuItem(item){var $item=$(item),$itemA=$item.children("a");if(!$item.is(":hidden")&&(self.isScrollableTabs()||self.isTabOverflowed($item)))if($item.is(".separator"))$item.clone().appendTo(menuHtml);else{var popupLi=$item.clone(),popupA=popupLi.children("a");if(popupLi[0].classList.remove("tab"),popupLi[0].classList.contains("is-selected")&&(popupLi[0].classList.remove("is-selected"),self.isScrollableTabs()&&popupLi[0].classList.add("is-checked")),popupLi[0].removeAttribute("style"),popupLi.children(".icon").off().appendTo(popupA),popupLi.appendTo(menuHtml),$item.data("moremenu-link",popupA),popupA.find(".icon-more").removeData().remove(),popupA.data("original-tab",$itemA),popupA.onclick=void 0,$item.is(".has-popupmenu")){var submenu=$("#".concat(item.getAttribute("aria-controls"))),clone=submenu.clone(),cloneLis=clone.children("li");clone[0].classList.remove("has-popupmenu"),cloneLis.each((function(i){var a=$(this).children("a"),originalA=submenu.children("li").eq(i).children("a");a.data("original-tab",originalA),originalA.data("moremenu-link",a)})),clone.insertAfter(popupA)}}}for(var i=0;i<tabs.length;i++)buildMenuItem(tabs[i]);self.tablist.children("li:not(.separator)").removeClass("is-focused");var xOffset=1;this.isScrollableTabs()||(xOffset=3),self.moreButton.popupmenu({autoFocus:!1,attachToBody:!0,menu:"tab-container-popupmenu",trigger:"immediate",offset:{x:xOffset}}),self.moreButton.addClass("popup-is-open"),self.popupmenu=self.moreButton.data("popupmenu"),self.positionFocusState(self.moreButton),self.moreButton.on("close.tabs",(function closeMenu(){$(this).off("close.tabs selected.tabs"),self.moreButton.removeClass("popup-is-open"),self.positionFocusState(void 0),self.focusBar()})).on("selected.tabs",(function selectMenuOption(e,anchor){var href=anchor.attr("href"),id=href.substr(1,href.length),tab=self.doGetTab(id)||$(),a=tab?tab.children("a"):$(),originalTab=anchor.data("original-tab").parent();originalTab.is(".add-tab-button")&&(originalTab=(a=self.handleAddButton()).parent(),href=a.attr("href"),self.element.trigger("tab-added",[a])),self.activate(href),tab.length&&a.length&&"function"==typeof a[0].onclick&&a[0].onclick.apply(a[0]),self.moreButton.focus(),self.scrollTabList(tab)}));var menu=self.popupmenu.menu;function handleDismissibleIconClick(e){var icon=$(this),li=icon.closest("li");if(li.is(".dismissible")&&icon.is(".close")){if(e.preventDefault(),e.stopPropagation(),li.is(".dismissible")&&li.is(".has-popupmenu")&&li.is(".submenu")){var listMenu=li.find(".wrapper").children().children(),hrefs=[];$.each(listMenu,(function(i,item){hrefs.push(item.children[0].href)})),self.closeDismissibleTabs(hrefs)}else self.closeDismissibleTab(li.children("a").attr("href"));self.popupmenu.close()}}menu.on("destroy.popupmenu",(function handleDestroy(){menu.off(),self.hideFocusState(),$("#tab-container-popupmenu").removeData().remove()})).on("touchend.popupmenu touchcancel.popupmenu",".icon",handleDismissibleIconClick).on("click.popupmenu",".icon",handleDismissibleIconClick),startingHref?self.popupmenu.highlight(menu.find('a[href="'.concat(startingHref,'"]'))):self.tablist.children(".is-selected").length>0?self.popupmenu.highlight(menu.find('a[href="'.concat(self.tablist.children(".is-selected").children("a").attr("href"),'"]'))):self.popupmenu.highlight(menu.find("li:first-child > a")),$(document).bindFirst("keydown.popupmenu",(function(e){var pseudoKeycode,key=e.which,currentMenuItem=$(e.target);function isFocusedElement(){return this===document.activeElement}switch(key){case 8:case 46:!function closeDropdownMenuItem(){e.altKey&&currentMenuItem.parent().is(".dismissible")&&self.closeDismissibleTab(currentMenuItem.attr("href"))}();break;case 37:pseudoKeycode=isRTL?40:38,currentMenuItem.is("a")&&(currentMenuItem.parent().is(":not(:first-child)")&&e.preventDefault(),$(document).trigger({type:"keydown.popupmenu",which:pseudoKeycode}));break;case 38:!function prevMenuItem(){menu.find("li:first-child > a").filter(isFocusedElement).length>0&&(e.preventDefault(),$(document).off(e),self.popupmenu.close(),self.findLastVisibleTab())}();break;case 39:pseudoKeycode=isRTL?38:40,currentMenuItem.is("a")&&!currentMenuItem.parent(".submenu").length&&$(document).trigger({type:"keydown.popupmenu",which:pseudoKeycode});break;case 40:!function nextMenuItem(){var last=menu.find("li:last-child > a");if(last.filter(isFocusedElement).length>0&&last.parent().is(":not(.submenu)")){if(e.preventDefault(),$(document).off(e),self.popupmenu.close(),self.settings.addTabButton)return void self.addTabButton.focus();self.focusFirstVisibleTab()}}()}}))},isTabOverflowed:function isTabOverflowed(li){if(this.isVerticalTabs()||this.isScrollableTabs())return!1;this.tablist.scrollTop()>0&&this.tablist.scrollTop(0);var liTop=Math.round(li[0].getBoundingClientRect().top),tablistTop=Math.round(this.tablist[0].getBoundingClientRect().top+1);return this.isModuleTabs()&&(tablistTop+=1),liTop>tablistTop},findLastVisibleTab:function findLastVisibleTab(){var tabs=this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)"),targetFocus=tabs.first();if(this.isScrollableTabs())return tabs.last().find("a").focus();for(;!this.isTabOverflowed(targetFocus);)targetFocus=tabs.eq(tabs.index(targetFocus)+1);return tabs.eq(tabs.index(targetFocus)-1).find("a").focus()},focusFirstVisibleTab:function focusFirstVisibleTab(){this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)").eq(0).find("a").focus()},focusBar:function focusBar(li,callback){if(this.hasAnimatedBar()&&li instanceof $&&li.length){var tablistScrollWidth,tablistScrollLeft,anchorStyle,self=this,target=li,scrollingTablist=this.tablistContainer,isRTL=Locale.isRTL();if(this.animatedBar.removeClass("no-transition"),target&&void 0!==target&&target.length&&self.anchors.length){var targetStyle=window.getComputedStyle(target[0],null),paddingRight=parseInt(targetStyle.getPropertyValue("padding-right"),10)||0,width=parseInt(targetStyle.getPropertyValue("width"),10)||0;target.is(".tab")&&(anchorStyle=window.getComputedStyle(target.children("a")[0]),paddingRight+=parseInt(anchorStyle.getPropertyValue("padding-right"),10)||0);var left=isRTL?paddingRight+target.position().left+target.outerWidth(!0):target.position().left;clearTimeout(self.animationTimeout),this.animatedBar.addClass("visible"),function animationTimeout(cb){var style=self.animatedBar[0].style;tablistScrollLeft=scrollingTablist[0].scrollLeft,tablistScrollWidth=scrollingTablist[0].scrollWidth,isRTL?style.right="".concat(tablistScrollWidth+paddingRight-(left+tablistScrollLeft),"px"):style.left="".concat(left+tablistScrollLeft,"px"),style.width="".concat(width,"px"),cb&&"function"==typeof cb&&cb()}(callback)}else this.animatedBar.removeClass("visible")}},defocusBar:function defocusBar(){if(this.hasAnimatedBar()){var self=this,left=Locale.isRTL()?0:self.animatedBar.position().left+self.animatedBar.outerWidth()/2;clearTimeout(self.animationTimeout),this.animatedBar[0].style.left="".concat(left,"px"),this.animatedBar[0].style.width=0,this.animationTimeout=setTimeout((function(){self.animatedBar&&self.animatedBar.length&&self.animatedBar.removeClass("visible").removeAttr("style")}),350)}},scrollTabList:function scrollTabList(target){if(this.tablistContainer&&target&&target instanceof $&&target.length){var d,tabCoords=DOM.getDimensions(target[0]),tabContainerDims=DOM.getDimensions(this.tablistContainer[0]),adjustedLeft=tabCoords.left,adjustedRight=tabCoords.right;adjustedLeft<tabContainerDims.left+40&&(d=-1*Math.round(Math.abs(tabContainerDims.left-adjustedLeft))-40),adjustedRight>tabContainerDims.right-40&&(d=Math.round(Math.abs(adjustedRight-tabContainerDims.right))+40),0===d&&(d=void 0),this.tablistContainer.smoothScroll(d,250)}},hideFocusState:function hideFocusState(){this.focusState.removeClass("is-visible")},positionFocusState:function positionFocusState(target,unhide){if(void 0!==target?target=$(target):this.moreButton.hasClass("is-selected")?target=this.moreButton:this.tablist.children(".is-selected").length>0&&(target=this.tablist.children(".is-selected").children("a")),!target||void 0===target||!target.length||target.is(this.moreButton)&&this.isScrollableTabs())this.focusState.removeClass("is-visible");else{target.is("a")&&(target=target.parent()),target.is(".add-tab-button, .tab-more")?this.focusState.parent().is(this.element)||this.focusState.prependTo(this.element):this.focusState.parent().is(this.tablistContainer)||this.focusState.prependTo(this.tablistContainer);var focusStateElem=this.focusState[0],targetPos=DOM.getDimensions(target[0]),targetClassList=target[0].classList,isNotHeaderTabs=!this.isHeaderTabs()||this.isHeaderTabs()&&this.element[0].classList.contains("alternate"),isVerticalTabs=this.isVerticalTabs(),isRTL=Locale.isRTL(),tabMoreWidth=isVerticalTabs?0:this.moreButton.outerWidth(!0),parentContainer=this.element,scrollingTablist=this.tablistContainer,accountForPadding=scrollingTablist&&this.focusState.parent().is(scrollingTablist);targetPos=function adjustForParentContainer(targetRectObj,parentElement,tablistContainer){var parentPadding,tabLeftMargin,tablistScrollWidth,tablistScrollLeft,parentRect=parentElement[0].getBoundingClientRect();if(targetRectObj.top-=parentRect.top,isVerticalTabs&&(targetRectObj.top+=parentElement[0].scrollTop),isRTL?targetRectObj.right=parentRect.right-targetRectObj.right:targetRectObj.left-=parentRect.left,tablistContainer){if(tablistScrollLeft=tablistContainer?tablistContainer[0].scrollLeft:0,tablistScrollWidth=tablistContainer?tablistContainer[0].scrollWidth:0,isRTL&&!isVerticalTabs){var tmpLeft=targetRectObj.left;isNotHeaderTabs?(tabLeftMargin=parseInt(window.getComputedStyle(target[0]).marginLeft,10),targetRectObj.left=tablistScrollWidth-tabLeftMargin-targetRectObj.right+tablistScrollLeft,targetRectObj.right=tablistScrollWidth-tabLeftMargin-tmpLeft+tablistScrollLeft):(targetRectObj.left=tablistScrollWidth-(targetRectObj.right+tablistScrollLeft+tabMoreWidth+32),targetRectObj.right=tablistScrollWidth-(tmpLeft+tablistScrollLeft+tabMoreWidth+32))}else targetRectObj.left+=tablistScrollLeft,targetRectObj.right+=tablistScrollLeft;accountForPadding&&(parentPadding=parseInt(window.getComputedStyle(parentElement[0])["padding".concat(isRTL?"Right":"Left")],10),targetRectObj.left+=isRTL?parentPadding:-1*parentPadding,targetRectObj.right+=isRTL?parentPadding:-1*parentPadding)}return isNotHeaderTabs&&!isVerticalTabs&&(targetRectObj.height-=1),targetRectObj}(targetPos,parentContainer,scrollingTablist);var targetPosString="";Object.keys(targetPos).forEach((function(key){targetPosString.length&&(targetPosString+=" "),targetPosString+="".concat(key,": ").concat(targetPos[key],"px;")})),focusStateElem.style.cssText=targetPosString;var selected=targetClassList.contains("is-selected")?"add":"remove";focusStateElem.classList[selected]("is-selected");var doHide=!0===unhide?"add":"remove";focusStateElem.classList[doHide]("is-visible")}},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.teardown().init()},disableOtherTabs:function disableOtherTabs(){return this.disable(!0)},disable:function disable(isPartial){isPartial||this.element.prop("disabled",!0).addClass("is-disabled"),this.disabledElems||(this.disabledElems=[]);var self=this,tabs=this.tablist.children("li:not(.separator)");isPartial&&(tabs=tabs.filter(":not(.application-menu-trigger)")),tabs.each((function(){var li=$(this),a=li.children("a");if(!(isPartial&&self.isActive(a.attr("href"))||((li.is(".is-disabled")||!0===a.prop("disabled"))&&self.disabledElems.push({elem:li,originalTabindex:li.attr("tabindex"),originalDisabled:a.prop("disabled")}),li.addClass("is-disabled"),a.prop("disabled",!0),li.is(".application-menu-trigger")||li.is(".add-tab-button")))){var panel=$(a.attr("href"));panel.addClass("is-disabled"),panel.find("*").each((function(){var t=$(this);t.is("input.dropdown, input.multiselect")||(("-1"===t.attr("tabindex")||t.attr("disabled"))&&self.disabledElems.push({elem:t,originalTabindex:t.attr("tabindex"),originalDisabled:t.prop("disabled")}),t.disable())}))}})),this.moreButton.addClass("is-disabled"),this.isModuleTabs()&&!isPartial&&this.element.children(".toolbar").disable(),this.updateAria($())},enable:function enable(){this.element.prop("disabled",!1).removeClass("is-disabled");var self=this;this.tablist.children("li:not(.separator)").each((function(){var li=$(this),a=li.children("a");if(li.removeClass("is-disabled"),a.prop("disabled",!1),!li.is(".application-menu-trigger")&&!li.is(".add-tab-button")){var panel=$(a.attr("href"));panel.removeClass("is-disabled"),panel.find("*").each((function(){var t=$(this);t.enable&&"function"==typeof t.enable&&t.enable()})),$.each(self.disabledElems,(function(i,obj){var attrTarget=obj.elem.is(".tab")?obj.elem.children("a"):obj.elem;obj.elem.disable&&"function"==typeof obj.elem.disable&&obj.elem.disable(),obj.elem.is("li")?obj.elem.addClass("is-disabled"):obj.elem.is("input.dropdown, input.multiselect")||(obj.elem.attr("tabindex",obj.originalTabindex),attrTarget.prop("disabled",obj.originalDisabled))}))}})),this.moreButton.removeClass("is-disabled"),this.isModuleTabs()&&this.element.children(".toolbar").enable(),this.disabledElems=[],this.updateAria(this.tablist.find(".is-selected > a"))},closeDismissibleTab:function closeDismissibleTab(tabId){return this.remove(tabId)},closeDismissibleTabs:function closeDismissibleTabs(tabUrlArray){var _this4=this;tabUrlArray.forEach((function(tabUrl){var tabId=tabUrl.match(/#.*/);return _this4.remove(tabId[0])}))},teardown:function teardown(){this.panels.removeAttr("style"),this.tablist.off().removeAttr("role").removeAttr("aria-multiselectable");var tabs=this.tablist.children("li");if(tabs.off().removeAttr("role").removeClass("is-selected"),tabs.filter(".has-popupmenu").each((function(){var popup=$(this).data("popupmenu");popup&&(popup.menu.children("li:not(.separator)").each((function(){var a=$(this).children("a"),panel=a.data("panel-link");$.removeData(a[0],"panel-link"),panel&&panel.length&&$.removeData(panel[0],"tab-link")})),popup.destroy())})),this.panels.off(),this.anchors.off().removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabindex"),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&this.anchors.each((function(){var api=$(this).data("tooltip");api&&"function"==typeof api.destroy&&api.destroy()})),this.element.off("focusout.tabs updated.tabs activated.tabs"),$("body").off("resize.tabs".concat(this.tabsIndex)),this.tabsIndex=void 0,this.moreButton.data("popupmenu")){var popup=this.moreButton.data("popupmenu");popup.menu.find("li:not(.separator)").each((function(){var a=$(this).children("a");a.data("original-tab")&&$.removeData(a[0],"original-tab")})),popup.destroy()}return this.removeHelperMarkupEvents(),this.tablistContainer&&this.tablistContainer.off("mousewheel.tabs"),this.focusState.removeData().remove(),this.focusState=void 0,this.hasAnimatedBar()&&(this.animatedBar.removeData().remove(),this.animatedBar=void 0),$(".tab-panel input").off("error.tabs valid.tabs"),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"tabs")}},$.fn.tabs=function(settings){return this.each((function(){var instance=$.data(this,"tabs");instance?instance.updated(settings):instance=$.data(this,"tabs",new Tabs(this,settings))}))},$.fn.verticaltabs=$.fn.tabs,$.fn.tag=function(settings){return this.each((function(){var instance=$.data(this,"tag");instance?instance.updated(settings):instance=$.data(this,"tag",new Tag(this,settings))}))},$.fn.taglist=function(settings){return this.each((function(){var instance=$.data(this,"taglist");instance?instance.updated(settings):instance=$.data(this,"taglist",new TagList(this,settings))}))};var TEXTAREA_DEFAULTS={autoGrow:!1,autoGrowMaxHeight:null,characterCounter:!0,maxLength:null,printable:!0,charRemainingText:null,charMaxText:null};function Textarea(element,settings){this.settings=utils.mergeSettings(element,settings,TEXTAREA_DEFAULTS),this.element=$(element),this.init()}Textarea.prototype={init:function init(){this.isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),this.isSafari=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Android"),this.element.addClass(this.element.is(".textarea-xs")?"input-xs":this.element.is(".textarea-sm")?"input-sm":this.element.is(".textarea-lg")?"input-lg":""),this.settings.characterCounter&&this.getMaxLength()&&(this.counter=$('<span class="textarea-wordcount">Chars Left..</span>').insertAfter(this.element)),this.settings.printable&&(this.printarea=$('<span class="textarea-print"></span>').insertBefore(this.element)),this.element.hasClass("autogrow")&&(this.settings.autoGrow=!0),this.setupAutoGrow(),this.handleEvents(),this.updateCounter()},isSelected:function isSelected(input){return"number"==typeof input.selectionStart?0===input.selectionStart&&input.selectionEnd===input.value.length:void 0!==document.selection&&document.selection.createRange().text===input.value},isPrintable:function isPrintable(keycode,shiftKey){return shiftKey?keycode>64&&keycode<91||keycode>=33&&keycode<=38||keycode>=40&&keycode<=43||126===keycode||58===keycode||60===keycode||keycode>=123&&keycode<=125||94===keycode||95===keycode||keycode>=62&&keycode<=64:13===keycode||keycode>=48&&keycode<=57||keycode>=97&&keycode<=122||59===keycode||61===keycode||keycode>=44&&keycode<=47||96===keycode||keycode>=91&&keycode<=93||39===keycode},setupAutoGrow:function setupAutoGrow(){if(this.settings.autoGrow&&this.element.length){var elem=this.element[0];this.settings.autoGrowMaxHeight&&(elem.style.maxHeight="".concat(this.settings.autoGrowMaxHeight,"px")),elem.style.overflow="hidden",this.autoGrow()}},autoGrow:function autoGrow(){if(this.settings.autoGrow){var elem=this.element[0],oldHeight=elem.offSetHeight,maxHeight=this.settings.autoGrowMaxHeight||0,newHeight=elem.scrollHeight;if(maxHeight>0&&maxHeight<newHeight){if(newHeight=maxHeight,elem.style.overflow="",oldHeight===newHeight)return}else elem.style.overflow="hidden";elem.style.height="5px",elem.style.height="".concat(elem.scrollHeight+2,"px")}},countLinebreaks:function countLinebreaks(s){return(s.match(/\n/g)||[]).length},updateCounter:function updateCounter(){var value=this.element.val(),isExtraLinebreaks=this.isChrome||this.isSafari,length=value.length+(isExtraLinebreaks?this.countLinebreaks(value):0),max=this.getMaxLength(),remaining=parseInt(max,10)-length,text=(this.settings.charRemainingText?this.settings.charRemainingText:"CharactersLeft"===Locale.translate("CharactersLeft")?"Characters Left":Locale.translate("CharactersLeft")).replace("{0}",remaining.toString());this.counter&&(length>=max?(text=this.settings.charMaxText?this.settings.charMaxText.replace("{0}",max):Locale.translate("CharactersMax")+max,this.counter.text(text),this.counter.removeClass("almost-empty")):(this.counter.text(text),remaining<10?this.counter.addClass("almost-empty"):this.counter.removeClass("almost-empty"))),this.printarea.text(this.element.val())},enable:function enable(){this.element.prop("disabled",!1).prop("readonly",!1)},disable:function disable(){this.element.prop("disabled",!0)},isDisabled:function isDisabled(){return this.element.prop("disabled")},readonly:function readonly(){this.element.prop("readonly",!0)},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),this.destroy(),this.init()},getMaxLength:function getMaxLength(){return this.settings.maxLength?this.settings.maxLength:this.element.attr("maxlength")?parseInt(this.element.attr("maxlength"),10):void 0},destroy:function destroy(){this.printarea&&this.printarea.length&&this.printarea.remove(),this.counter&&this.counter.length&&this.counter.remove(),this.element.off()},handleEvents:function handleEvents(){var self=this;this.element.on("keyup.textarea",(function(e){var value=self.element.val(),isExtraLinebreaks=self.isChrome||self.isSafari,length=value.length+(isExtraLinebreaks?self.countLinebreaks(value):0),max=self.getMaxLength();return self.updateCounter(),length>=max?(e.preventDefault(),!1):(self.settings.autoGrow&&self.autoGrow(),!0)})).on("focus.textarea",(function(){self.counter&&self.counter.addClass("focus")})).on("updated.textarea",(function(){self.updated()})).on("keypress.textarea",(function(e){var value=self.element.val(),isExtraLinebreaks=self.isChrome||self.isSafari,length=value.length+(isExtraLinebreaks?self.countLinebreaks(value):0),max=self.getMaxLength();[97,99,118,120].indexOf(e.which)>-1&&(e.metaKey||e.ctrlKey)?self.updateCounter():self.isPrintable(e.which,e.shiftKey)&&length>=max&&!self.isSelected(this)&&e.preventDefault()})).on("blur.textarea",(function(){self.updateCounter(),self.counter&&self.counter.removeClass("focus")}))}},$.fn.textarea=function(settings){return this.each((function(){var instance=$.data(this,"textarea");instance?instance.updated(settings):instance=$.data(this,"textarea",new Textarea(this,settings))}))};var TOOLBAR_DEFAULTS={rightAligned:!1,maxVisibleButtons:3,resizeContainers:!0,favorButtonset:!0,moreMenuSettings:void 0,noSearchfieldReinvoke:!1};function Toolbar(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,TOOLBAR_DEFAULTS),this.init()}Toolbar.prototype={init:function init(){return this.setup().build().handleEvents()},setup:function setup(){return this.settings.maxVisibleButtons<=0&&(this.settings.maxVisibleButtons=TOOLBAR_DEFAULTS.maxVisibleButtons),this},build:function build(){var self=this;if(this.element.attr("role","toolbar"),this.settings.resizeContainers&&this.element.is(":not(:hidden)")&&this.element[0].classList.add("do-resize"),this.buildAriaLabel(),this.id||(this.id=parseInt($(".toolbar, .formatter-toolbar").index(this.element),10)),this.title=this.element.children(".title"),this.title.length?(this.element[0].classList.add("has-title"),this.cutoffTitle=!1,this.title.on("beforeshow.toolbar",(function(){return self.cutoffTitle})).tooltip({content:"".concat(this.title.text().trim())})):this.element[0].classList.remove("has-title"),this.buttonset=this.element.children(".buttonset"),this.buttonset.length||(this.buttonset=$('<div class="buttonset"></div>'),this.title.length?this.buttonset.insertAfter(this.title):this.buttonset.prependTo(this.element)),this.element[this.settings.rightAligned?"addClass":"removeClass"]("right-aligned"),this.more=this.element.find(".btn-actions"),0===this.more.length&&!this.element.hasClass("no-actions-button")){var moreContainer=this.element.find(".more");moreContainer.length||(moreContainer=$('<div class="more"></div>').appendTo(this.element)),this.more=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(Locale.translate("MoreActions"),"</span>")).attr("title",Locale.translate("More")).appendTo(moreContainer)}(this.buttonsetItems=this.buttonset.children("button").add(this.buttonset.find("input")),this.items=this.buttonsetItems.add(this.title.children("button")).add(this.more),this.items.filter('button, input[type="button"], [class^="btn"]').each((function(){$(this).data("button")||$(this).button(),!$(this).data("tooltip")&&$(this).attr("title")&&$(this).tooltip()})),this.settings.noSearchfieldReinvoke)||this.items.filter(".searchfield, .toolbar-searchfield-wrapper, .searchfield-wrapper").each((function(i,item){var sf=$(item);if(sf.is(".toolbar-searchfield-wrapper, .searchfield-wrapper")&&(sf=sf.children(".searchfield")),!sf.data("searchfield")){var searchfieldOpts=$.extend({},utils.parseSettings(sf[0]));sf.searchfield(searchfieldOpts)}}));var popupMenuInstance=this.more.data("popupmenu"),moreAriaAttr=this.more.attr("aria-controls");popupMenuInstance?this.moreMenu=popupMenuInstance.menu:(this.moreMenu=$("#".concat(moreAriaAttr)),this.moreMenu.length||(this.moreMenu=this.more.next(".popupmenu, .popupmenu-wrapper")),this.moreMenu.length||(this.moreMenu=$('<ul id="popupmenu-toolbar-'.concat(this.id,'" class="popupmenu"></ul>')).insertAfter(this.more)),this.moreMenu.is(".popupmenu-wrapper")&&(this.moreMenu=this.moreMenu.children(".popupmenu")));var menuItems=[];this.items.not(this.more).not(".ignore-in-menu").filter((function menuItemFilter(){return $(this).parent(".buttonset, .inline").length})).each((function(){menuItems.push(self.buildMoreActionsMenuItem($(this)))})),menuItems.reverse(),$.each(menuItems,(function(i,item){""!==item.text()&&item.prependTo(self.moreMenu)})),this.defaultMenuItems=this.moreMenu.children("li:not(.separator)"),this.hasDefaultMenuItems=this.defaultMenuItems.length>0;var menuButtonSettings=utils.extend({},this.settings.moreMenuSettings,{trigger:"click",menu:this.moreMenu},this.hasDefaultMenuItems?{predefined:this.defaultMenuItems}:{});popupMenuInstance?this.more.on("beforeopen.toolbar",(function(){self.refreshMoreActionsMenu(self.moreMenu)})).triggerHandler("updated",[menuButtonSettings]):this.more.popupmenu(menuButtonSettings).on("beforeopen.toolbar",(function(){self.refreshMoreActionsMenu(self.moreMenu)})),function setActiveToolbarItem(){self.items.attr("tabindex","-1");var active=self.items.filter(".is-selected");if(active.length)return self.activeButton=active.first().attr("tabindex","0"),void self.items.not(self.activeButton).removeClass("is-selected");active=self.items.filter(":visible:not(:disabled)").first().attr("tabindex","0"),self.activeButton=active,self.element.is(":hidden, .is-hidden")?self.activeButton=self.items.filter(":not(:disabled)").first().attr("tabindex","0"):self.isItemOverflowed(active)&&(active.attr("tabindex","-1"),self.activeButton=self.more.addClass("is-selected").attr("tabindex","0"))}(),this.adjustMenuItemVisibility(),this.handleResize(),this.element.triggerHandler("rendered");var searchfieldWrapper=this.buttonset.find(".searchfield-wrapper, .toolbar-searchfield-wrapper");return searchfieldWrapper.length&&searchfieldWrapper.trigger("reanimate"),this},buildMoreActionsMenuItem:function buildMoreActionsMenuItem(item){var popupLi;if(!0===item.data("skipit"))return item.data("skipit",void 0),popupLi;var a=item.data("action-button-link");a&&a.length?popupLi=a.parent():(popupLi=$("<li></li>"),a=$('<a href="#"></a>').appendTo(popupLi),item.data("action-button-link",a),a.data("original-button",item)),item.hasClass("hidden")&&popupLi.addClass("hidden"),item.is(":disabled")?(popupLi.addClass("is-disabled"),a.prop("disabled",!0)):(popupLi.removeClass("is-disabled"),a.prop("disabled",!1)),a.text(this.getItemText(item));var submenuDesignIcon=$.getBaseURL("#icon-dropdown"),icon=item.children(".icon").filter((function(){var iconName=$(this).getIconName();return iconName&&iconName!==submenuDesignIcon&&-1===iconName.indexOf("dropdown")}));icon&&icon.length&&(a.html("<span>".concat(a.text(),"</span>")),icon.clone().detach().prependTo(a));var linkspan=popupLi.find("b");if(linkspan.length&&(this.moreMenu.addClass("has-icons"),linkspan.detach().prependTo(popupLi)),item.is(".btn-menu")){item.data("popupmenu")?a.children(".icon.arrow").length||a.append($.createIcon({classes:"icon arrow icon-dropdown",icon:"dropdown"})):item.popupmenu();var menu=item.data("popupmenu").menu,diffMenu=menu.clone();!function addItemLinksRecursively(menu,diffMenu,parentItem){var appendTarget,children=menu.children("li"),id=diffMenu.attr("id");diffMenu.children("li").each((function(i,diffMenuItem){var dmi=$(diffMenuItem),omi=children.eq(i),dmiA=dmi.children("a"),omiA=omi.children("a"),dmiID=dmi.attr("id"),dmiAID=dmiA.attr("id");dmiID&&dmi.removeAttr("id").attr("data-original-menu-item",dmiID),dmiAID&&dmiA.removeAttr("id").attr("data-original-menu-anchor",dmiAID),omiA.data("action-button-link",dmiA),dmiA.data("original-button",omiA);var omiSubMenu=omi.children(".wrapper").children(".popupmenu"),dmiSubMenu=dmi.children(".wrapper").children(".popupmenu");omiSubMenu.length&&dmiSubMenu.length&&addItemLinksRecursively(omiSubMenu,dmiSubMenu,dmi)})),diffMenu.removeAttr("id").attr("data-original-menu",id),parentItem.addClass("submenu"),parentItem.is(popupLi)&&((appendTarget=parentItem.children(".wrapper"))&&appendTarget.length||(appendTarget=$('<div class="wrapper"></div>')),appendTarget.html(diffMenu),parentItem.append(appendTarget))}(menu,diffMenu,popupLi)}return item.is("[data-popdown]")&&item.popdown(),popupLi},refreshMoreActionsMenu:function refreshMoreActionsMenu(menu){var self=this;$("li > a",menu).each((function(){var submenu,a=$(this),li=a.parent(),item=a.data("originalButton"),text=self.getItemText(item);item&&(a.find("span").length?a.find("span").text(text.trim()):a.text(text.trim()),item.isHiddenAtBreakpoint()||item.parent().isHiddenAtBreakpoint()?li.addClass("hidden"):li.removeClass("hidden"),item.parent().is(".is-disabled")||item.is(":disabled")?(li.addClass("is-disabled"),a.prop("disabled",!0),a.attr("tabindex","-1")):(li.removeClass("is-disabled"),a.prop("disabled",!1)),item.is("a")&&(item.parent("li").is(".is-checked")?li.addClass("is-checked"):li.removeClass("is-checked")),item.is(".btn-menu")&&(submenu=a.parent().find(".popupmenu").first(),self.refreshMoreActionsMenu(submenu)))}))},getItemText:function getItemText(item){if(!item)return"";var popupLiText,span=item.find("span").first(),title=item.attr("title"),tooltip=item.data("tooltip"),tooltipText=tooltip&&"string"==typeof tooltip.content?tooltip.content:void 0;return popupLiText=""!==title&&void 0!==title?title:tooltipText||(span.length?span.text():item.text()),xssUtils.stripHTML(popupLiText)},handleEvents:function handleEvents(){var self=this;return this.items.on("keydown.toolbar",(function(e){self.handleKeys(e)})).on("click.toolbar",(function(e){self.handleClick(e)})),this.items.filter(".btn-menu, .btn-actions").on("close.toolbar",(function onClosePopup(){var last,el=$(this);el.is(".is-overflowed")?(last=self.getLastVisibleButton())&&last.length&&last[0].focus():document.activeElement&&"INPUT"===document.activeElement.tagName||(el&&el.focus(),self.buttonset.scrollTop(0))})),this.items.not(this.more).on("selected.toolbar",(function(e,anchor){e.stopPropagation(),self.handleSelected(e,anchor)})),this.more.on("keydown.toolbar",(function(e){self.handleKeys(e)})).on("beforeopen.toolbar",(function(){self.adjustMenuItemVisibility()})).on("selected.toolbar",(function(e,anchor){e.stopPropagation(),self.handleSelected(e,anchor)})),this.more.on("show-submenu.toolbar",(function(e,li){self.handleTransferToMenuButtonItem(e,li)})),this.element.on("updated.toolbar",(function(e,settings){e.stopPropagation(),self.updated(settings)})).on("recalculate-buttons.toolbar",(function(e,containerDims){self.handleResize(containerDims)})).on("scrollup.toolbar",(function(){var moduleTabsParent=self.element.parents(".tab-container.module-tabs");moduleTabsParent.length&&moduleTabsParent.scrollTop(0)})),$("body").on("resize.toolbar-".concat(this.id),(function(){self.handleResize()})),this.handleResize(),this},handleTransferToMenuButtonItem:function handleTransferToMenuButtonItem(e,li){var originalMenuButton=li.children("a").data("original-button");if(originalMenuButton){var popupAPI=originalMenuButton.data("popupmenu");popupAPI&&"function"==typeof popupAPI.settings.beforeOpen&&(popupAPI.callSource(e),this.buildMoreActionsMenuItem(originalMenuButton))}},handleSelected:function handleSelected(e,anchor){var itemEvts,toolbarEvts,popup,popupTrigger,itemLink=anchor.data("original-button");if(anchor.parent().is(".hidden, .is-disabled")||anchor.is("[readonly], [disabled]"))e.preventDefault();else{if(itemLink&&itemLink.length>0){if(itemEvts=itemLink.listEvents(),toolbarEvts=this.element.listEvents(),this.setActiveButton(itemLink),itemLink.is("[data-popdown]")&&(popupTrigger=itemLink.data("popdown"),this.isItemOverflowed(itemLink)&&(popupTrigger.settings.trigger=this.more,popupTrigger.updated())),itemLink.attr("ng-click")||itemLink.attr("data-ng-click"))return void itemLink.trigger("click");for(var evtTypes=["click","touchend","touchcancel"],i=0;i<evtTypes.length;i++){var type=evtTypes[i];if(toolbarEvts&&toolbarEvts[type]&&toolbarEvts[type].delegateCount>0){var el=this.element,evt=$.Event(type);return evt.target=el.find(itemLink)[0],void el.trigger(evt)}if(itemEvts&&itemEvts[type]||itemLink[0]["on".concat(type)])return void itemLink.trigger(type)}return popupTrigger=(popup=itemLink.parents(".popupmenu")).data("trigger"),popup.length&&popupTrigger instanceof $&&popupTrigger.length?void popupTrigger.triggerHandler("selected",[itemLink]):void this.triggerSelect(itemLink)}this.triggerSelect(anchor)}},handleClick:function handleClick(e){return this.setActiveButton($(e.currentTarget)),this.triggerSelect($(e.currentTarget)),!1},handleKeys:function handleKeys(e){var key=e.which,target=$(e.target),isActionButton=target.is(".btn-actions"),isRTL=Locale.isRTL();(37===key&&target.is(":not(input)")||38===key&&target.is(":not(input.is-open)"))&&(e.preventDefault(),isActionButton?this.setActiveButton(isRTL?this.getFirstVisibleButton():this.getLastVisibleButton()):this.navigate(isRTL?1:-1)),(39===key&&target.is(":not(input)")||40===key&&target.is(":not(input.is-open)"))&&(e.preventDefault(),isActionButton?this.setActiveButton(isRTL?this.getLastVisibleButton():this.getFirstVisibleButton()):this.navigate(isRTL?-1:1))},handleResize:function handleResize(containerDims){if(this.settings.resizeContainers){var title=containerDims?containerDims.title:void 0,buttonset=containerDims?containerDims.buttonset:void 0;this.sizeContainers(title,buttonset)}for(var buttons=this.getButtonsetButtons(),i=0;i<buttons.length;i++)buttons[i].removeClass("is-overflowed");this.element.is(":not(:hidden)")&&(this.adjustMenuItemVisibility(),this.toggleMoreMenu())},sizeContainers:function sizeContainers(titleSize,buttonsetSize){var containerElem=this.element[0],titleElem=this.title[0],buttonsetElem=this.buttonset[0],moreElem=this.more[0];if(this.title&&this.title.length){if(this.element.is(":hidden"))return buttonsetElem.style.width="",titleElem.style.width="",void containerElem.classList.remove("do-resize");buttonsetElem.style.width="",titleElem.style.width="",containerElem.classList.contains("do-resize")||containerElem.classList.add("do-resize");var toolbarDims=$(containerElem).getHiddenSize(),buttonsetDims=$(buttonsetElem).getHiddenSize(),titleDims=$(titleElem).getHiddenSize(),moreDims=$(moreElem).getHiddenSize(),toolbarPadding=parseInt(toolbarDims.padding.left,10)+parseInt(toolbarDims.padding.right,10);isNaN(moreDims.width)&&(moreDims.width=50),(isNaN(buttonsetDims.width)||buttonsetDims.width<0)&&(buttonsetDims.width=0);var d,self=this,hasTitleSizeGetter=void 0!==titleSize&&!isNaN(titleSize),hasButtonsetSizeGetter=void 0!==buttonsetSize&&!isNaN(buttonsetSize);this.cutoffTitle=!1;var targetTitleWidth=function getTargetTitleWidth(){return hasTitleSizeGetter?parseInt(titleSize,10):!0===self.settings.favorButtonset?toolbarDims.width-(toolbarPadding+(hasButtonsetSizeGetter?parseInt(buttonsetSize,10):buttonsetDims.width)+moreDims.width):titleDims.scrollWidth}(),targetButtonsetWidth=function getTargetButtonsetWidth(){return hasButtonsetSizeGetter?parseInt(buttonsetSize,10):!0===self.settings.favorButtonset?buttonsetDims.width:toolbarDims.width-(toolbarPadding+(hasTitleSizeGetter?parseInt(titleSize,10):titleDims.scrollWidth)+moreDims.width)}();if(this.settings.favorButtonset)return targetTitleWidth<74&&(this.cutoffTitle=!0,d=Math.abs(targetTitleWidth-74),targetTitleWidth=74,targetButtonsetWidth-=d),buttonsetElem.style.width=addPx(targetButtonsetWidth+2),titleElem.style.width=addPx(targetTitleWidth-2),titleElem.textContent&&targetTitleWidth<stringUtils.textWidth(titleElem.textContent.trim())&&(this.cutoffTitle=!0),void(targetTitleWidth>stringUtils.textWidth($(titleElem).find("h1").text().trim())&&(this.cutoffTitle=!1));targetButtonsetWidth<0&&(this.cutoffTitle=!0,d=Math.abs(targetButtonsetWidth-0),targetButtonsetWidth=0,targetTitleWidth-=d),titleElem.style.width=addPx(targetTitleWidth+2),buttonsetElem.style.width=addPx(targetButtonsetWidth-2)}function addPx(val){return"".concat(val,"px")}},navigate:function navigate(direction){var target,items=this.items.filter(":visible:not(:disabled)"),next=items.index(this.activeButton)+direction;next>=0&&next<items.length&&(target=items.eq(next)),next>=items.length&&(target=items.first()),-1===next&&(target=items.last()),this.isItemOverflowed(target)&&(target=this.more),this.setActiveButton(target)},getLastVisibleButton:function getLastVisibleButton(){for(var target,elem,items=$(this.items.get().reverse()).not(this.more),i=0;!target&&i<items.length;){if(elem=$(items[i]),!this.isItemOverflowed(elem)){target=elem;break}i++}for(target&&0!==target.length||(target=items.first());target.length&&target.is(".separator, *:disabled, *:hidden");)target=target.prev();return target},getFirstVisibleButton:function getFirstVisibleButton(){for(var i=0,items=this.items,target=items.eq(i);target.is(".separator, *:disabled, *:hidden");)i++,target=items.eq(i);return target},setActiveButton:function setActiveButton(activeButton,noFocus){if(activeButton[0]!==this.activeButton[0]){var self=this;this.items.add(this.more).attr("tabindex","-1").removeClass("is-selected"),this.activeButton=function getActiveButton(){if(activeButton.is("a"))return getMoreOrLast();var tooltip=self.more.data("tooltip");return activeButton[0]===self.more[0]?(tooltip&&tooltip.tooltip.is(":not(.hidden)")&&tooltip.hide(),getMoreOrLast()):self.isItemOverflowed(activeButton)&&!activeButton.is(".searchfield")?getMoreOrLast():activeButton}(),this.activeButton.addClass("is-selected").attr("tabindex","0"),!noFocus&&this.activeButton[0]&&(this.activeButton[0].focus(),this.element.triggerHandler("navigate",[this.activeButton]))}function getMoreOrLast(){return self.moreButtonIsDisabled()||!self.element.hasClass("has-more-button")?self.getLastVisibleButton():self.more}},triggerSelect:function triggerSelect(element){var elem=$(element);elem.is(this.more)||elem.is(".btn-menu, li.submenu")||this.element.triggerHandler("selected",[elem])},getButtonsetButtons:function getButtonsetButtons(){for(var item,buttons=[],items=this.buttonsetItems,i=0;i<items.length;i++)void 0!==(item=items.eq(i)).data("action-button-link")&&item.is(":not(.searchfield)")&&buttons.push(item);return buttons},getVisibleButtons:function getVisibleButtons(buttons){var button,self=this,hiddenButtons=[],visibleButtons=[];buttons&&Array.isArray(buttons)||(buttons=this.getButtonsetButtons());for(var i=0;i<buttons.length;i++)buttons[i][0].classList.remove("is-overflowed");for(var _i=0;_i<buttons.length;_i++)button=buttons[_i],self.isItemOverflowed(button)?hiddenButtons.push(button):visibleButtons.push(button);return{visible:visibleButtons,hidden:hiddenButtons}},adjustMenuItemVisibility:function adjustMenuItemVisibility(items){var iconDisplay="removeClass";function toggleClass($elem,doHide){var elem=$elem[0],li=$elem.data("action-button-link").parent()[0],elemIsHidden=$elem.isHiddenAtBreakpoint();if(doHide)return li.classList.add("hidden"),void elem.classList.remove("is-overflowed");elemIsHidden||li.classList.remove("hidden"),elem.classList.add("is-overflowed"),$elem.find(".icon").length&&(iconDisplay="addClass")}items||(items=this.getVisibleButtons());for(var i=0;i<items.visible.length;i++)toggleClass(items.visible[i],!0);for(i=0;i<items.hidden.length;i++)toggleClass(items.hidden[i],!1);var numIcons=0;this.moreMenu.find(".icon").each((function(){$(this).parent().parent().hasClass("hidden")||$(this).hasClass("icon-dropdown")||numIcons++})),numIcons>0&&(iconDisplay="addClass"),this.moreMenu[iconDisplay]("has-icons")},isItemOverflowed:function isItemOverflowed(item){if(this.moreButtonIsDisabled())return!1;if(!item||0===item.length)return!0;var itemIndexInButtonset=this.buttonsetItems.filter(":not(.hidden)").index(item),maxVisibleButtons=this.settings.maxVisibleButtons;if(this.moreButtonIsVisible()&&(maxVisibleButtons-=1),this.title.length&&itemIndexInButtonset>=maxVisibleButtons)return!0;this.buttonset.scrollTop()>0&&this.buttonset.scrollTop(0),item instanceof $&&item.length&&(item=item[0]);var classList=item.classList,style=window.getComputedStyle(item);if(classList.contains("btn-actions"))return!0;if(classList.contains("searchfield"))return!1;if("none"===style.display)return!0;var isRTL=Locale.isRTL(),itemRect=item.getBoundingClientRect(),buttonsetRect=this.buttonset[0].getBoundingClientRect(),itemOutsideXEdge=isRTL?itemRect.left<=buttonsetRect.left:itemRect.right>=buttonsetRect.right;return!0===itemRect.bottom>=buttonsetRect.bottom||!0===itemOutsideXEdge},moreButtonIsDisabled:function moreButtonIsDisabled(){return this.element[0].classList.contains("no-actions-button")},hasNoMoreButton:function hasNoMoreButton(){return deprecateMethod(this.moreButtonIsDisabled,this.hasNoMoreButton).apply(this)},moreButtonIsVisible:function moreButtonIsVisible(){return this.element[0].classList.contains("has-more-button")},toggleMoreMenu:function toggleMoreMenu(){if(!this.moreButtonIsDisabled()){var method="removeClass";this.moreMenu.children("li:not(.separator)").not(".hidden").length>0&&(method="addClass"),this.element[method]("has-more-button");var popupAPI=this.more.data("popupmenu");if("removeClass"===method){if(!popupAPI)return;popupAPI.close();var menuItems=popupAPI.menu.find("li:not(.separator)").children("a"),shouldFocus=!1;if(menuItems.add(this.more).each((function(){document.activeElement===this&&(shouldFocus=!0)})),shouldFocus){var lastVisibleButton=this.getLastVisibleButton()[0];lastVisibleButton&&lastVisibleButton.focus()}}}},buildAriaLabel:function buildAriaLabel(){if(!this.element.attr("aria-label")){var isHeader=1===this.element.closest(".header").length,id=this.element.attr("id")||"",title=this.element.children(".title"),prevLabel=this.element.prev("label"),prevSpan=this.element.prev(".label"),labelText=function getLabelText(){return isHeader?$("header.header").find("h1").text():title.length?title.filter("div").text():prevLabel.length?prevLabel.text():prevSpan.length?prevSpan.text():"".concat(id," ").concat(Locale.translate("Toolbar"))}();this.element.attr("aria-label",labelText.replace(/\s+/g," ").trim())}},updated:function updated(settings){this.settings.noSearchfieldReinvoke&&(this.keepSearchfield=!0),settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.teardown().init()},enable:function enable(){this.element.prop("disabled",!1),this.items.prop("disabled",!1),this.more.prop("disabled",!1)},disable:function disable(){this.element.prop("disabled",!0),this.items.prop("disabled",!0),this.more.prop("disabled",!0).data("popupmenu").close()},teardown:function teardown(){var self=this;$("body").off("resize.toolbar-".concat(this.id));var moreMenuChildren=this.moreMenu.children("li");if(moreMenuChildren.each((function(){self.teardownMoreActionsMenuItem($(this),!0)})),moreMenuChildren.not(this.defaultMenuItems).remove(),delete this.defaultMenuItems,delete this.hasDefaultMenuItems,this.items.each((function(i,item){var tooltipAPI=$(item).data("tooltip");tooltipAPI&&"function"==typeof tooltipAPI.destroy&&tooltipAPI.destroy();var buttonAPI=$(item).data("button");buttonAPI&&"function"==typeof buttonAPI.destroy&&buttonAPI.destroy(),item.classList.remove("is-overflowed"),item.removeAttribute("tabindex")})),this.items.off(["keydown.".concat("toolbar"),"click.".concat("toolbar"),"focus.".concat("toolbar"),"blur.".concat("toolbar"),"close.".concat("toolbar"),"selected.".concat("toolbar")].join(" ")),delete this.items,this.title&&this.title.length){var dataTooltip=this.title.off("beforeshow.toolbar").data("tooltip");dataTooltip&&"function"==typeof dataTooltip.destroy&&dataTooltip.destroy(),this.title[0].style.width="",delete this.cutoffTitle,delete this.title}if(this.buttonsetItems&&delete this.buttonsetItems,this.buttonset.children(".searchfield-wrapper").length)if(this.settings.noSearchfieldReinvoke||this.keepSearchfield)this.keepSearchfield&&delete this.keepSearchfield;else{var searchFields=this.buttonset.children(".searchfield-wrapper").children(".searchfield"),searchFieldAPI=searchFields.data("searchfield");searchFieldAPI&&"function"==typeof searchFieldAPI.destroy&&searchFields.data("searchfield").destroy()}return this.buttonset&&this.buttonset.length&&(this.buttonset[0].style.width="",delete this.buttonset),this.moreMenu&&delete this.moreMenu,this.more.length&&void 0!==this.more.data("popupmenu")&&(this.more.off(["keydown.".concat("toolbar"),"beforeopen.".concat("toolbar"),"selected.".concat("toolbar"),"show-submenu.".concat("toolbar")].join(" ")),this.more.data("popupmenu").destroy(),delete this.more),this.activeButton&&delete this.activeButton,this.element.off(["updated.".concat("toolbar"),"recalculate-buttons.".concat("toolbar"),"scrollup.".concat("toolbar")].join(" ")),this.element[0].classList.remove("do-resize"),this.element.removeAttr("role").removeAttr("aria-label"),this},teardownMoreActionsMenuItem:function teardownMoreActionsMenuItem(item,doRemove){var self=this,li=$(item),a=li.children("a"),itemLink=a.data("original-button");a.off("mousedown.toolbar click.toolbar touchend.toolbar touchcancel.toolbar");var submenuContainer,icons=li.find(".icon");icons.length&&icons.remove(),li.is(".submenu")&&(submenuContainer=li.children(".wrapper").children(".popupmenu")).children("li").each((function(){self.teardownMoreActionsMenuItem($(this),!0)})),itemLink&&itemLink.length&&($.removeData(a[0],"original-button"),$.removeData(itemLink[0],"action-button-link"),a.remove(),submenuContainer&&submenuContainer.off().parent(".wrapper").off().remove(),doRemove&&li.remove())},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"toolbar")}},$.fn.toolbar=function(settings){return this.each((function(){var instance=$.data(this,"toolbar");instance?instance.updated(settings):instance=$.data(this,"toolbar",new Toolbar(this,settings))}))},$.fn.toolbarflexitem=function(settings){return this.each((function(){var instance=$.data(this,"toolbarflexitem");if(instance)instance.updated(settings);else{var oldDestroy=(instance=$.data(this,"toolbarflexitem",new ToolbarFlexItem(this,settings))).destroy;instance.destroy=function(){"function"==typeof oldDestroy&&oldDestroy.call(this),$.removeData(this,"toolbarflexitem")}}}))};var TOOLBAR_FLEX_DEFAULTS={allowTabs:!1,beforeMoreMenuOpen:null,moreMenuSettings:{}};function ToolbarFlex(element,settings){this.element=element,this.settings=utils.mergeSettings(this.element,settings,TOOLBAR_FLEX_DEFAULTS),this.init()}ToolbarFlex.prototype={trueFocusedItem:void 0,sections:[],items:[],init:function init(){var _this=this;this.uniqueId=utils.uniqueId(this.element),this.sections=utils.getArrayFromList(this.element.querySelectorAll(".toolbar-section")),this.items=this.getElements().map((function(item){var itemComponentSettings={};return $(item).hasClass("btn-actions")&&(itemComponentSettings=_this.settings.moreMenuSettings||itemComponentSettings,_this.settings.beforeMoreMenuOpen&&(warnAboutDeprecation("settings.moreMenuSettings.beforeOpen","settings.beforeMoreMenuOpen","Flex Toolbar"),itemComponentSettings.beforeOpen=_this.settings.beforeMoreMenuOpen)),$(item).toolbarflexitem({toolbarAPI:_this,componentSettings:itemComponentSettings,allowTabs:_this.settings.allowTabs}),$(item).data("toolbarflexitem")})),this.items&&(this.settings.allowTabs||(this.items.forEach((function(item){item.focused&&(void 0===_this.focusedItem?_this.focusedItem=item:item.focused=!1)})),this.focusedItem||(this.focusedItem=this.items[0])),this.render(),this.handleEvents())},render:function render(){this.element.setAttribute("role","toolbar"),this.items.forEach((function(item){item.render()}))},handleEvents:function handleEvents(){var _this2=this;this.settings.allowTabs||(this.keydownListener=this.handleKeydown.bind(this),this.element.addEventListener("keydown",this.keydownListener),this.keyupListener=this.handleKeyup.bind(this),this.element.addEventListener("keyup",this.keyupListener),this.clickListener=this.handleClick.bind(this),this.element.addEventListener("click",this.clickListener)),$(this.element).on("selected.".concat("toolbar-flex"),(function(e){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key]})),$(this.element).on("collapsed-responsive.".concat("toolbar-flex"),(function(e,direction){e.stopPropagation(),_this2.navigate(direction,null,!0)}))},handleKeydown:function handleKeydown(e){var target=e.target;$(target).data("toolbarflexitem")&&this.handleItemKeydown(e)},handleItemKeydown:function handleItemKeydown(e){var isRTL=Locale.isRTL(),key=e.key,item=this.getItemFromElement(e.target);function preventScrolling(){e.preventDefault()}if("Enter"!==key)if(" "!==key){if(["ArrowLeft","Left","ArrowUp","Up"].indexOf(key)>-1){if("searchfield"===item.type&&("ArrowLeft"===key||"Left"===key))return;return this.navigate(isRTL?1:-1,void 0,!0),void preventScrolling()}if(["ArrowRight","Right","ArrowDown","Down"].indexOf(key)>-1){if("searchfield"===item.type&&("ArrowRight"===key||"Right"===key))return;this.navigate(isRTL?-1:1,void 0,!0),preventScrolling()}}else"hyperlink"===item.type&&this.select(e.target);else this.clickByEnterKey=!0},handleKeyup:function handleKeyup(e){this.clearClickByEnter(e)},handleClick:function handleClick(e){var target=e.target;$(target).data("toolbarflexitem")&&this.handleItemClick(e),this.clearClickByEnter()},handleItemClick:function handleItemClick(e){var item=this.getItemFromElement(e.target);this.select(item),this.focusedItem=item},clearClickByEnter:function clearClickByEnter(e){this.clickByEnterKey&&("menubutton"!==this.type&&"actionbutton"!==this.type||e.preventDefault(),delete this.clickByEnterKey)},getElements:function getElements(){var items=[],allSelectors=[];return TOOLBAR_ELEMENTS.forEach((function(elemObj){allSelectors.push(elemObj.selector)})),allSelectors=allSelectors.join(", "),utils.getArrayFromList(this.element.querySelectorAll(allSelectors)).forEach((function(elem){var defined=!1;TOOLBAR_ELEMENTS.forEach((function(elemObj){!defined&&$(elem).is(elemObj.selector)&&("function"!=typeof elemObj.filter||elemObj.filter(elem))&&(defined=!0,items.push(elem))}))})),items},getItemFromElement:function getItemFromElement(element){if(element instanceof ToolbarFlexItem||element.isToolbarFlexItem)return element;for(var item,i=0;i<this.items.length;i++)this.items[i].element.innerHTML===element.innerHTML&&(item=this.items[i]);if(!item)throw new Error("No Toolbar Item instance available for element ".concat(element,"."));return item},get searchfieldAPI(){for(var i=0;i<this.items.length;i++)if("searchfield"===this.items[i].type)return this.items[i].componentAPI},get focusedItem(){if(this.trueFocusedItem)return this.trueFocusedItem;for(var i=0;i<this.items.length;i++)if(!0===this.items[i].focused)return this.items[i]},set focusedItem(item){if(0!==this.items.length){for(var i=0;i<this.items.length;i++)this.items[i].focused=!1;item.focused=!0,this.trueFocusedItem=item}},get hasFocusableItems(){for(var i=0;i<this.items.length;i++)if(!0===this.items[i].focusable)return!0;return!1},get canManageFocus(){var activeElement=document.activeElement;if(this.element.contains(activeElement))return!0;for(var i=0;i<this.items.length;i++)if("searchfield"===this.items[i].type&&this.items[i].componentAPI.isFocused)return!0;return"BODY"===activeElement.tagName},get overflowedItems(){for(var overflowed=[],i=0;i<this.items.length;i++)!0===this.items[i].overflowed&&overflowed.push(this.items[i]);return overflowed},navigate:function navigate(direction,currentIndex,doSetFocus){if(!1!==this.hasFocusableItems){var originalDirection=0+direction;for(null==currentIndex&&(currentIndex=this.items.indexOf(this.focusedItem));0!==direction;)direction>0&&(currentIndex===this.items.length-1?currentIndex=0:currentIndex++,--direction),direction<0&&(0===currentIndex?currentIndex=this.items.length-1:--currentIndex,direction++);var targetItem=this.items[currentIndex];!1!==targetItem.focusable?(this.focusedItem=targetItem,doSetFocus&&this.canManageFocus&&this.focusedItem.element.focus()):this.navigate(originalDirection>0?1:-1,currentIndex,doSetFocus)}},select:function select(element){var item=this.getItemFromElement(element);switch(item.type){case"searchfield":case"actionbutton":case"menubutton":if(this.clickByEnterKey)return;item.selected=!0;break;default:item.selected=!0}},toPopupmenuData:function toPopupmenuData(){var data={noMenuWrap:!0};return data.menu=this.items.filter((function(item){return"actionbutton"!==item.type&&"searchfield"!==item.type})).map((function(item){return function getItemData(item){var itemData=item.toPopupmenuData();return itemData&&(itemData.icon&&(data.hasIcons=!0),itemData.selectable&&(data.selectable=itemData.selectable)),itemData}(item)})),data},toData:function toData(){var data={};return data.items=this.items.map((function(item){return item.toData()})),data},get disabled(){return this.trueDisabled},set disabled(bool){this.trueDisabled=bool,!0!==bool?this.element.classList.remove("is-disabled"):this.element.classList.add("is-disabled")},isItemOverflowed:function isItemOverflowed(item){if(!item)return!1;var targetItem;if(item instanceof HTMLElement||item instanceof $){if(!(targetItem=$(item).data("toolbarflexitem")))return!1;item=targetItem}return!(this.items.indexOf(item)<0)&&item.overflowed},updated:function updated(settings){"object"===_typeof(settings)&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),this.teardown(),this.init()},teardown:function teardown(){this.settings.allowTabs||(this.element.removeEventListener("keydown",this.keydownListener),this.element.removeEventListener("keyup",this.keyupListener),this.element.removeEventListener("click",this.clickListener)),$(this.element).off("selected.".concat("toolbar-flex")),$(this.element).off("collapsed-responsive.".concat("toolbar-flex")),this.items.forEach((function(item){item.teardown()})),delete this.items,delete this.sections},destroy:function destroy(){this.teardown()}},$.fn.toolbarflex=function(settings){return this.each((function(){var instance=$.data(this,"toolbar-flex");if(instance)instance.updated(settings);else{var oldDestroy=(instance=$.data(this,"toolbar-flex",new ToolbarFlex(this,settings))).destroy;instance.destroy=function(){"function"==typeof oldDestroy&&oldDestroy.call(this),$.removeData(this,"toolbar-flex")}}}))},$.fn.toolbarsearchfield=$.fn.searchfield;var TRACKDIRTY_DEFAULTS={};function Trackdirty(element,settings){this.settings=utils.mergeSettings(element,settings,TRACKDIRTY_DEFAULTS),this.element=$(element),this.init()}Trackdirty.prototype={init:function init(){this.isIe="ie"===Environment.browser.name,this.isIeEdge="edge"===Environment.browser.name,this.handleEvents()},valMethod:function valMethod(element,isOriginal){switch(element.attr("type")){case"checkbox":case"radio":return element.prop("checked");case"file":if("boolean"==typeof isOriginal&&isOriginal){var original=element.attr("original");return void 0!==original?original:""}return element.parent().find('[type="text"]').val();default:if(element.is("textarea")&&1===element.closest(".editor-source").length){var value=element.is(":visible")?element.val():element.text();return this.trimEditorText(value)}return element.val()}},trimEditorText:function trimEditorText(text){return text.trim().replace(/>\s+</g,"").replace(/\s+/g," ").replace(" has-tooltip","").replace(/<br( \/)?>/g,"<br>\n").replace(/<\/p> /g,"</p>\n\n").replace(/<\/blockquote>( )?/g,"</blockquote>\n\n")},getAbsolutePosition:function getAbsolutePosition(element){var pos=element.position();return element.parents().each((function(){if("relative"===window.getComputedStyle(this,null).position)return!1;pos.left+=this.scrollLeft,pos.top+=this.scrollTop})),{left:pos.left,top:pos.top}},unbind:function unbind(){if(this.element.removeClass("dirty").off("resetdirty.dirty change.dirty doresetdirty.dirty"),this.settings&&"object"===_typeof(this.settings.d)){var d=this.settings.d;$(".icon-dirty, .msg-dirty",d.field).add(d.icon).add(d.msg).remove()}return $.removeData(this.element[0],"original"),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,TRACKDIRTY_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"trackdirty")},handleEvents:function handleEvents(){var _this=this,input=this.element;if(input.is(".editor")){var textArea=input.parent().find("textarea");textArea.data("original",this.trimEditorText(this.valMethod(textArea)))}input.data("original",this.valMethod(input,!0)).on("resetdirty.dirty",(function(){if(input.is(".editor")){var _textArea=input.parent().find("textarea");_textArea.data("original",_this.trimEditorText(_this.valMethod(_textArea)))}input.data("original",_this.valMethod(input)).triggerHandler("doresetdirty.dirty")})).on("change.dirty doresetdirty.dirty",(function(e){var el=input,field=input.closest(".field, .radio-group"),label=$("label:visible",field),d={class:"",style:""};if(field.is(".field-fileupload")&&(el=field.find("input.fileupload-background-transparent")),field.is(".editor-container")&&(el=field.find(".editor-source")),label[0]||(label=input.next("label")),"true"===input.attr("data-trackdirty")){if(input.addClass("dirty"),input.is('[type="checkbox"], [type="radio"]')&&(d.class+=" dirty-".concat(input.attr("type")),d.class+=input.is(":checked")?" is-checked":""),input.is("select")&&(d.class+=" is-select",el=input.next(".dropdown-wrapper").find(".dropdown")),d.icon=el.prev(),!d.icon.is(".icon-dirty")){input.is(".colorpicker")&&!Locale.isRTL()&&(d.rect=_this.getAbsolutePosition(input),d.style="left:".concat(d.rect.left,"px; top:").concat(d.rect.top,"px;")),d.icon='<span class="icon-dirty'.concat(d.class,'"></span>'),d.msg=Locale.translate("MsgDirty")||"",d.msg='<span class="audible msg-dirty">'.concat(d.msg,"</span>");var firstInput=$($(el[0].parentElement).find("input")[0]);el=input.is('[type="radio"]')?firstInput:el,0===$(el[0].parentElement).find(".icon-dirty").length&&(el.before(d.icon),label.append(d.msg),d.style&&el.prev(".icon-dirty")[0]&&(el.prev(".icon-dirty")[0].style.cssText=d.style)),d.icon=el.prev(),d.msg=label.find(".msg-dirty")}var original=input.data("original"),current=_this.valMethod(input);if(d.field=field,_this.settings.d=d,field.is(".editor-container")){var _textArea2=field.find("textarea");original=_textArea2.data("original"),current=field.find(".editor-source").is(":visible")?_textArea2.val():_this.isIe||_this.isIeEdge?input[0].innerHTML:_textArea2.text(),current=_this.trimEditorText(current)}if(current===original||input.attr("multiple")&&utils.equals(current,original))return input.removeClass("dirty"),$(".icon-dirty, .msg-dirty",field).add(d.icon).add(d.msg).remove(),void input.trigger("doresetdirty"===e.type?"afterresetdirty":"pristine");input.trigger("dirty")}}))}},$.fn.trackdirty=function(settings){return this.each((function(){var instance=$.data(this,"trackdirty");instance?instance.updated(settings):instance=$.data(this,"trackdirty",new Trackdirty(this,settings))}))};var TREE_DEFAULTS={dataset:null,source:null,selectable:"single",hideCheckboxes:!1,menuId:null,useStepUI:!1,folderIconOpen:"open-folder",folderIconClosed:"closed-folder",sortable:!1,onBeforeSelect:null,onExpand:null,onCollapse:null};function Tree(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,TREE_DEFAULTS),this.init()}Tree.prototype={init:function init(){this.isIe11="ie"===Environment.browser.name&&"11"===Environment.browser.version,this.initTree(),this.handleKeys(),this.setupEvents(),-1===this.loadData(this.settings.dataset)&&(this.syncDataset(),this.initSelected(),this.focusFirst(),this.attachMenu(this.settings.menuId),this.createSortable())},initTree:function initTree(){var self=this,s=this.settings,links=this.element.find("a"),selectableAttr=this.element.attr("data-selectable");s.selectable=void 0===selectableAttr||"single"!==selectableAttr.toLowerCase()&&"multiple"!==selectableAttr.toLowerCase()?s.selectable:selectableAttr,this.isMultiselect="multiple"===s.selectable,s.hideCheckboxes=s.hideCheckboxes||!this.isMultiselect,this.element.addClass(this.isMultiselect?" is-multiselect":""),links.each((function(){var a=$(this);self.decorateNode(a)}))},initSelected:function initSelected(){var _this=this;[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(li){return _this.setNodeStatus($(li.querySelector("a")))}))},focusFirst:function focusFirst(){var a=this.element[0].querySelector("a");a&&a.setAttribute("tabindex","0")},setFocus:function setFocus(node){(node=this.isjQuery(node)?node[0]:node)&&(node.focus(),node.classList.remove("hide-focus"))},decorateNode:function decorateNode(a,iconToSet,hideCheckbox){var parentCount,badgeData=(a=this.isjQuery(a)?a:$(a))[0].getAttribute("data-badge"),alertIcon=a[0].getAttribute("data-alert-icon"),isParentsDisabled=a.parentsUntil(this.element,"ul[role=group].is-disabled").length>0,isDisabled=a[0].classList.contains("is-disabled")||isParentsDisabled;if(void 0!==badgeData&&(badgeData=utils.parseSettings(a,"data-badge")),a[0].setAttribute("role","treeitem"),a[0].setAttribute("tabindex","-1"),a[0].setAttribute("aria-selected","false"),isDisabled){a[0].classList.add("is-disabled"),a[0].setAttribute("aria-disabled","true");var childSection=a.next();if(childSection[0]&&"ul"===childSection[0].tagName.toLowerCase()&&childSection[0].classList.contains("is-open"))[].slice.call(childSection[0].querySelectorAll("a")).forEach((function(link){link.classList.add("is-disabled"),link.setAttribute("aria-disabled","true")})),[].slice.call(a[0].parentNode.querySelectorAll("ul")).forEach((function(ul){return ul.classList.add("is-disabled")}))}parentCount=a.parentsUntil(this.element,"ul").length-1,a[0].setAttribute("aria-level",parentCount+1);var posinset=a.parent().index();a[0].setAttribute("aria-posinset",posinset+1);var listCount=a.closest("li").siblings().length+1;a[0].setAttribute("aria-setsize",listCount);var subNode=a.next("ul");subNode[0]&&subNode.children().length>0&&a[0].setAttribute("aria-expanded",subNode[0].classList.contains("is-open")?"true":"false");var text=a.contents().filter((function(){return!$(this).is(".tree-badge")})).text();a[0].textContent="",0===a.children("svg.icon-tree").length&&(iconToSet||""===iconToSet?a[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:iconToSet,classes:["icon-tree"]})):a[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:"tree-node",classes:["icon-tree"]})),this.settings.useStepUI&&a[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:alertIcon,classes:["step-alert","icon-".concat(alertIcon)]}))),!this.isMultiselect||this.settings.hideCheckboxes&&!1!==hideCheckbox||a[0].insertAdjacentHTML("beforeend",'<span class="tree-checkbox"></span>');var badgeHtml=this.getBadgeHtml(badgeData);""!==badgeHtml&&a[0].insertAdjacentHTML("beforeend",badgeHtml);var span=document.createElement("span");if(span.classList.add("tree-text"),span.textContent=text,a[0].appendChild(span),this.hasIconClass(a)&&this.setTreeIcon(a.find("svg.icon-tree"),a[0].getAttribute("class")),subNode[0]&&"ul"===subNode[0].tagName.toLowerCase()){var aClass=a[0].getAttribute("class");subNode[0].setAttribute("role","group"),subNode[0].parentNode.classList.add("folder"),this.setTreeIcon(a.find("svg.icon-tree"),subNode[0].classList.contains("is-open")?this.settings.folderIconOpen:this.settings.folderIconClosed),aClass&&-1===aClass.indexOf("open")&&-1===aClass.indexOf("closed")&&(a[0].setAttribute("class",isDisabled?"is-disabled":""),this.setTreeIcon(a.find("svg.icon-tree"),subNode[0].classList.contains("is-open")?this.settings.folderIconOpen:this.settings.folderIconClosed)),this.hasIconClass(a)&&(aClass=a[0].getAttribute("class"),this.setTreeIcon(a.find("svg.icon-tree"),subNode[0].classList.contains("is-open")?aClass:aClass.replace("open","closed")))}a.hideFocus()},setTreeIcon:function setTreeIcon(svg,icon){if(svg&&"string"==typeof icon){svg=this.isjQuery(svg)?svg:$(svg);var iconStr=icon.replace(/#?icon-|hide-focus|\s?/gi,"");svg.changeIcon(iconStr)}},expandAll:function expandAll(nodes){var _this2=this,groups=nodes;(groups=void 0!==groups?this.isjQuery(groups)?$.makeArray(groups):groups:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach((function(group){var prev=group.previousElementSibling;if(group.parentNode.classList.add("is-open"),group.classList.add("is-open"),group.style.height="",prev&&"a"===prev.tagName.toLowerCase()){var svg=prev.querySelector("svg.icon-tree");_this2.setTreeIcon(svg,_this2.settings.folderIconOpen),prev.setAttribute("aria-expanded",!0),_this2.hasIconClass(prev)&&_this2.setTreeIcon(svg,prev.getAttribute("class"))}}))},collapseAll:function collapseAll(nodes){var _this3=this,groups=nodes;(groups=void 0!==groups?this.isjQuery(groups)?$.makeArray(groups):groups:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach((function(group){var prev=group.previousElementSibling;if(group.parentNode.classList.remove("is-open"),group.classList.remove("is-open"),group.style.height=0,prev&&"a"===prev.tagName.toLowerCase()){var svg=prev.querySelector("svg.icon-tree");_this3.setTreeIcon(svg,_this3.settings.folderIconClosed),prev.setAttribute("aria-expanded",!1),prev.classList.remove("is-selected"),_this3.hasIconClass(prev)&&_this3.setTreeIcon(svg,prev.getAttribute("class").replace("open","closed"))}}))},isjQuery:function isjQuery(obj){return obj&&(obj instanceof jQuery||obj.constructor.prototype.jquery)},selectNodeById:function selectNodeById(id){this.selectNodeByJquerySelector("#".concat(id))},selectNodeByJquerySelector:function selectNodeByJquerySelector(selector){var target=this.isjQuery(selector)?selector:$(selector);if(target.length&&!target.is(".is-disabled")){var nodes=target.parentsUntil(this.element,"ul[role=group]");this.expandAll(nodes),this.selectNode(target,!0)}},unSelectedNode:function unSelectedNode(node,focus){if(0!==node.length){var self=this;$("a",this.element).attr("tabindex","-1"),node.attr("tabindex","0"),$("a:not(.is-disabled)",node.parent()).attr("aria-selected","false").parent().removeClass("is-selected"),this.syncNode(node),this.setNodeStatus(node),focus&&node.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(li){return li.classList.remove("is-active")})),node[0].parentNode.classList.add("is-active"),setTimeout((function(){var jsonData=node.data("jsonData")||{};self.element.triggerHandler("unselected",{node:node,data:jsonData})}),0)}},selectNode:function selectNode(node,focus){var result,self=this,s=this.settings;0!==node.length&&("function"==typeof s.onBeforeSelect?(result=s.onBeforeSelect(node))&&result.done&&"function"==typeof result.done?result.done((function(continueSelectNode){continueSelectNode&&self.selectNodeFinish(node,focus)})):result&&self.selectNodeFinish(node,focus):self.selectNodeFinish(node,focus))},selectNodeFinish:function selectNodeFinish(node,focus,e){if(this.isMultiselect&&e)if("click"===e.type||"touch"===e.type){if(e.target.classList.contains("icon")&&node[0].parentNode.classList.contains("folder"))return}else if("keydown"===e.type){var charCode=e.charCode||e.keyCode;if(37===charCode||39===charCode)return}var self=this,links=[].slice.call(this.element[0].querySelectorAll("a"));if(links.forEach((function(a){return a.setAttribute("tabindex","-1")})),node[0].setAttribute("tabindex","0"),this.isMultiselect){[].slice.call(node[0].parentNode.querySelectorAll("a:not(.is-disabled)")).forEach((function(a){a.setAttribute("aria-selected","true"),a.classList.add("is-selected"),a.parentNode.classList.add("is-selected")}))}else{if(node[0].classList.contains("is-selected"))return;links.forEach((function(a){var link=$(a),data=link.data("jsonData");data&&(delete data.selected,link.data("jsonData",data)),a.setAttribute("aria-selected","false"),a.classList.remove("is-selected"),a.parentNode.classList.remove("is-selected")})),node[0].setAttribute("aria-selected","true"),node[0].classList.add("is-selected"),node[0].parentNode.classList.add("is-selected")}this.syncNode(node),this.loading||this.setNodeStatus(node),focus&&node.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(li){return li.classList.remove("is-active")})),node[0].parentNode.classList.add("is-active"),setTimeout((function(){var jsonData=node.data("jsonData")||{};self.element.triggerHandler("selected",{node:node,data:jsonData})}),0)},setNodeStatus:function setNodeStatus(node){var nodes,self=this,data=node.data("jsonData");if(this.isMultiselect){var setStatus=function setStatus(thisNodes,isFirstSkipped){thisNodes.forEach((function(li){var a=$(li.querySelector("a")),status=self.getSelectedStatus(a,isFirstSkipped);"mixed"===status?(li.classList.remove("is-selected","is-partial"),li.classList.add("is-partial")):status?(li.classList.remove("is-selected","is-partial"),li.classList.add("is-selected")):li.classList.remove("is-selected","is-partial"),self.syncNode(a)}))},isFirstSkipped=!1;setStatus(nodes=[].slice.call(node[0].parentNode.querySelectorAll("li.folder")),isFirstSkipped),isFirstSkipped=!(!nodes.length&&data&&!data.selected),nodes=node.parentsUntil(this.element,"li.folder"),setStatus(nodes=[].slice.call(nodes.toArray()),isFirstSkipped)}else{var a=node[0],li=a.parentNode;data&&data.selected?(li.classList.add("is-selected"),a.classList.add("is-selected"),a.setAttribute("aria-selected",!0)):(li.classList.remove("is-selected","is-partial"),a.classList.remove("is-selected","is-partial"),a.setAttribute("aria-selected",!1))}},getSelectedStatus:function getSelectedStatus(node,isFirstSkipped){var data,total=0,selected=0,unselected=0;return node.parent().find("a").each((function(i){isFirstSkipped&&0===i||(total++,(data=$(this).data("jsonData"))&&data.selected?selected++:unselected++)})),total===selected||total!==unselected&&"mixed"},toggleNode:function toggleNode(node,e){var result,next=node.next(),self=this,s=this.settings;if(next[0]&&"ul"===next[0].tagName.toLowerCase()&&"group"===next[0].getAttribute("role"))if(next[0].classList.contains("is-open"))"function"==typeof s.onCollapse?(result=s.onCollapse(node))&&result.done&&"function"==typeof result.done?result.done((function(continueSelectNode){continueSelectNode&&self.selectNodeFinish(node,focus,e)})):result&&self.selectNodeFinish(node,focus,e):self.selectNodeFinish(node,focus,e),self.setTreeIcon(node.closest(".folder").removeClass("is-open").end().find("svg.icon-tree"),s.folderIconClosed),self.hasIconClass(node.closest(".folder a"))&&self.setTreeIcon(node.closest(".folder a").find("svg.icon-tree"),node.closest(".folder a").attr("class").replace("open","closed").replace(/\s?is-selected/,"")),self.isAnimating=!0,self.isMultiselect||(self.unSelectedNode(node.parent().find("li.is-selected"),!1),node[0].classList.remove("is-selected")),next.one("animateclosedcomplete",(function(){next[0].classList.remove("is-open"),self.isAnimating=!1})).animateClosed(),node[0].setAttribute("aria-expanded","true"!==node[0].getAttribute("aria-expanded"));else{"function"==typeof s.onExpand?(result=s.onExpand(node))&&result.done&&"function"==typeof result.done?result.done((function(continueSelectNode){continueSelectNode&&self.selectNodeFinish(node,focus,e)})):result&&self.selectNodeFinish(node,focus,e):self.selectNodeFinish(node,focus,e);var nodeData=node.data("jsonData");if(s.source&&nodeData.children&&0===nodeData.children.length){var args={node:node,data:node.data("jsonData")};return node[0].classList.add("is-loading"),self.loading=!0,void self.settings.source(args,(function response(nodes){var id=nodeData.id,elem=self.findById(id);elem.children=nodes,self.addChildNodes(elem,node.parent()),node[0].classList.remove("is-loading"),self.loading=!1,self.accessNode(next,node),nodeData.children=nodes,node.data("jsonData",nodeData),self.selectNode(node,!0),self.initSelected()}))}self.accessNode(next,node)}},accessNode:function accessNode(next,node){var _this4=this,nodeClass=node.attr("class");this.setTreeIcon(node.closest(".folder").addClass("is-open").end().find("svg.icon-tree"),this.settings.folderIconOpen),this.hasIconClass(nodeClass)&&this.setTreeIcon(node.find("svg.icon-tree"),nodeClass.replace("is-selected","")),this.isAnimating=!0,next.one("animateopencomplete",(function(){_this4.isAnimating=!1})).addClass("is-open").css("height",0).animateOpen(),node[0].setAttribute("aria-expanded","true"!==node[0].getAttribute("aria-expanded"))},openNode:function openNode(nextTarget,nodeTarget){var self=this,nodeData=nodeTarget.data("jsonData");if(self.settings.source&&nodeData.children&&0===nodeData.children.length){var args={node:nodeTarget,data:nodeTarget.data("jsonData")};return nodeTarget.addClass("is-loading"),self.loading=!0,void self.settings.source(args,(function response(nodes){var id=nodeData.id,elem=self.findById(id);elem.children=nodes,self.addChildNodes(elem,nodeTarget.parent()),nodeTarget.removeClass("is-loading"),self.loading=!1,self.accessNode(nextTarget,nodeTarget),nodeData.children=nodes,nodeTarget.data("jsonData",nodeData),self.selectNode(nodeTarget,!0),self.initSelected()}))}self.accessNode(nextTarget,nodeTarget)},hasIconClass:function hasIconClass(elemClass){return"string"!=typeof elemClass&&(this.isjQuery(elemClass)&&(elemClass=elemClass.length>1?elemClass.first()[0]:elemClass[0]),elemClass=elemClass.getAttribute("class")),elemClass&&elemClass.indexOf("icon")>-1},closeNode:function closeNode(nextTarget,nodeTarget){var self=this;self.setTreeIcon(nodeTarget.closest(".folder").removeClass("is-open").end().find("svg.icon-tree"),self.settings.folderIconClosed),self.hasIconClass(nodeTarget.closest(".folder a"))&&self.setTreeIcon(nodeTarget.closest(".folder a").find("svg.icon-tree"),nodeTarget.closest(".folder a").attr("class").replace("open","closed").replace(/\s?is-selected/,"")),self.isAnimating=!0,self.isMultiselect||(self.unSelectedNode(nodeTarget.parent().find("li.is-selected"),!1),nodeTarget.removeClass("is-selected")),nextTarget.one("animateclosedcomplete",(function(){nextTarget.removeClass("is-open"),self.isAnimating=!1})).animateClosed(),nodeTarget.attr("aria-expanded","true"!==nodeTarget.attr("aria-expanded"))},setupEvents:function setupEvents(){var self=this;self.element.on("updated.tree",(function(e,newSettings){self.updated(newSettings),self.initTree()}))},handleKeys:function handleKeys(){var self=this;this.element.on("click.tree","a:not(.is-clone)",(function(e){var target=$(this),parent=this.parentNode;return target[0].classList.contains("is-disabled")||target[0].classList.contains("is-loading")||(self.isMultiselect?e.target.classList.contains("icon")&&parent.classList.contains("folder")?self.toggleNode(target,e):parent.classList.contains("is-selected")||parent.classList.contains("is-partial")?self.unSelectedNode(target,!0):self.selectNode(target,!0):(self.selectNode(target,!0),self.toggleNode(target,e)),e.stopPropagation()),self.popupEl&&self.popupEl.data("popupmenu")&&(self.popupEl.data("popupmenu").close(),self.popupEl=null),!1})),this.element.on("focus.tree","a",(function(){if(0===parseInt(this.getAttribute("aria-level"),10)&&1===parseInt(this.getAttribute("aria-posinset"),10)&&this.classList.contains("is-disabled")){var e=$.Event("keydown.tree");return e.keyCode=40,void $(this).trigger(e)}})),this.element.on("keydown.tree","a",(function(e){var next,prev,charCode=e.charCode||e.keyCode,target=$(this);if(!self.isAnimating){if(40===charCode){var nextNode=self.getNextNode(target);self.setFocus(nextNode)}if(38===charCode){var prevNode=self.getPreviousNode(target);self.setFocus(prevNode)}if(32===e.keyCode&&target.trigger("click.tree"),37===charCode)return Locale.isRTL()?target.next().hasClass("is-open")?(prev=target.next().find("a:first"),self.setFocus(prev)):self.toggleNode(target,e):target.next().hasClass("is-open")?self.toggleNode(target,e):(prev=target.closest(".folder").find("a:first"),self.setFocus(prev)),e.stopPropagation(),!1;if(39===charCode)return Locale.isRTL()?target.next().hasClass("is-open")?self.toggleNode(target,e):(next=target.closest(".folder").find("a:first"),self.setFocus(next)):target.next().hasClass("is-open")?(next=target.next().find("a:first"),self.setFocus(next)):(self.toggleNode(target,e),self.setFocus(target)),e.stopPropagation(),!1;36===charCode&&(next=self.element.find("a:first:visible"),self.setFocus(next)),35===charCode&&(next=self.element.find("a:last:visible"),self.setFocus(next))}})),this.element.on("keypress.tree","a",(function(e){var charCode=e.charCode||e.keyCode,target=$(this);if(charCode>=37&&charCode<=40||32===charCode)return e.stopPropagation(),!1;0!==e.which&&target.closest("li").nextAll().find("a:visible").each((function(){var node=$(this);if(node.text().substr(0,1).toLowerCase()===String.fromCharCode(e.which).toLowerCase())return self.setFocus(node),!1}))}))},loadData:function loadData(dataset){if(!dataset)return-1;var self=this;self.element.empty(),self.loading=!0,dataset=this.arrangeDataset(dataset);var html="";self.jsonData=[];for(var i=0,l=dataset.length;i<l;i++)html+=self.getNodeHtml(dataset[i],i);self.element[0].insertAdjacentHTML("beforeend",html),[].slice.call(self.element[0].querySelectorAll('a[role="treeitem"]')).forEach((function(node,i){var a=$(node),data=self.jsonData[i];a.data("jsonData",data),data.selected&&self.selectNode(a,data.focus)}));for(var dropdowns=[].slice.call(self.element[0].querySelectorAll("select.dropdown")),_i=0;_i<dropdowns.length;_i++){var dropdown=dropdowns[_i];self.jsonData[_i].disabled?$(dropdown).dropdown().disable():$(dropdown).dropdown().on("selected.tree",(function(){var nodeToUpdate=self.findById(this.parentElement.previousElementSibling.id);nodeToUpdate.text=this.value,self.updateNode(nodeToUpdate)}))}self.jsonData=void 0,self.loading=!1,self.syncDataset(),self.initSelected(),self.focusFirst(),self.attachMenu(self.settings.menuId),self.createSortable()},arrangeDataset:function arrangeDataset(dataset){if(!this.hasKeyInData("parent",dataset))return dataset;dataset=dataset||this.settings.dataset;var arrangedData=JSON.parse(JSON.stringify(dataset)),addToParent=function addToParent(node){var arranged=!1,addChild=function addChild(parent){parent.children=parent.children||[],parent.children.push(node),arranged=!0};!function arrange(data){for(var i=0;i<data.length&&!arranged;i++)data[i].id===node.parent&&addChild(data[i]),void 0!==data[i].children&&arrange(data[i].children)}(arrangedData)};!function traverse(data){for(var i=0;i<data.length;i++)void 0!==data[i].parent&&addToParent(data[i]),void 0!==data[i].children&&traverse(data[i].children)}(dataset);return function clean(data,id){for(var i=0;i<data.length;i++)void 0!==data[i].children&&clean(data[i].children,data[i].id),void 0===id&&void 0!==data[i].parent||void 0!==id&&void 0!==data[i].parent&&id!==data[i].parent?(data.splice(i,1),i--):delete data[i].parent}(arrangedData),this.settings.dataset=arrangedData,arrangedData},hasKeyInData:function hasKeyInData(key,data){for(var found=!1,findkey=function findkey(obj){for(var prop in obj)if(obj.hasOwnProperty(prop)){var value=obj[prop];if("object"!==_typeof(value)||found?key===prop&&(found=!0):findkey(value),found)break}},i=0,l=(data=data||this.settings.dataset).length;i<l&&!found;i++)findkey(data[i]);return found},getNodeHtml:function getNodeHtml(data,position,level,isParentsDisabled){var selectHtml="",selectedOptionText="";level=level||0,position+=1;var s=this.settings,isDisabled=isParentsDisabled||data.disabled||!1,a={id:void 0!==data.id?' id="'.concat(data.id,'"'):"",href:' href="'.concat(void 0!==data.href?data.href:"#",'"'),expanded:' aria-expanded="'.concat(data.open?"true":"false",'"'),icon:data.icon||""===data.icon?data.icon:"tree-node",alertIcon:"",alertIconAttr:void 0!==data.alertIcon?' data-alert-icon="'.concat(data.alertIcon,'"'):"",text:'<span class="tree-text">'.concat(data.text,"</span>"),class:["hide-focus"],ariaDisabled:isDisabled?'aria-disabled="true"':"",checkbox:!this.isMultiselect||this.settings.hideCheckboxes&&!1!==data.hideCheckbox?"":'<span class="tree-checkbox"></span>',badge:"object"===_typeof(data.badge)?this.getBadgeHtml(data.badge):""};this.jsonData.push(data),s.useStepUI&&(a.alertIcon='<svg class="icon step-alert icon-'.concat(data.alertIcon,'" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-').concat(data.alertIcon,'"></use>'));var isChildren=data.children&&Array.isArray(data.children),liClassList=isChildren?"folder":"";if(""!==(liClassList+=data.selected?" is-selected":"")&&(liClassList+=data.open?" is-open":"",liClassList=' class="'.concat(liClassList,'"')),isDisabled&&a.class.push("is-disabled"),data.icon&&(a.icon=data.icon,(!isChildren||isChildren&&/open|closed/i.test(data.icon))&&a.class.push(data.icon)),isChildren&&(data.open?(a.icon=data.icon&&/open|closed/i.test(data.icon)?data.icon:s.folderIconOpen,isParentsDisabled=isDisabled):a.icon=data.icon&&/open|closed/i.test(data.icon)?data.icon.replace("open","closed"):s.folderIconClosed),a.icon="#icon-".concat(a.icon.replace(/^#?icon-?/,"")),a.class=' class="'.concat(a.class.join(" "),'"'),a.style="","dropdown"===data.type&&(a.style='style="display: none"',data.data)){selectHtml='<select class="dropdown" close-on-select="true">';for(var i=0;i<data.data.length;i++){var option=data.data[i];option.value===data.text?(selectedOptionText=option.text,selectHtml+='<option value="'.concat(option.value,'" selected>').concat(option.text,"</option>")):selectHtml+='<option value="'.concat(option.value,'">').concat(option.text,"</option>")}selectHtml+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(selectedOptionText),selectHtml='<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(selectHtml+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',"</div>")}var html="\n      <li".concat(liClassList,'>\n        <a role="treeitem" aria-selected="false" tabindex="-1" ').concat(a.style,'\n          aria-level="').concat(level,'"\n          aria-position="').concat(position,'"\n          aria-setsize="').concat(position,'"\n          ').concat(a.id+a.href+a.class+a.expanded+a.ariaDisabled+a.alertIconAttr,'>\n            <svg class="icon-tree icon" focusable="false" aria-hidden="true" role="presentation"><use href="').concat(a.icon,'"></use>\n            </svg>').concat(a.checkbox+a.alertIcon+a.badge+a.text,"\n        </a>\n        ").concat(selectHtml);if(isChildren){html+='<ul class="folder'.concat(data.open?" is-open":"",'" role="group">');for(var _i2=0,l=data.children.length;_i2<l;_i2++)html+=this.getNodeHtml(data.children[_i2],_i2,level+1,isParentsDisabled);html+="</ul>"}return html+="</li>"},getBadgeHtml:function getBadgeHtml(badgeData){var badge={html:"",style:"",class:["badge","tree-badge"]};return badgeData&&!badgeData.remove&&(badge.text="",void 0!==badgeData.text&&(badge.text=badgeData.text.toString(),1===badge.text.length&&badge.class.push("round")),/info|good|error|alert|pending/i.test(badgeData.type)?badge.class.push(badgeData.type):badgeData.type&&"#"===badgeData.type.charAt(0)&&7===badgeData.type.length&&(badge.style="background-color: ".concat(badgeData.type," !important;")),badgeData.backColor&&(badge.style="background-color: ".concat(badgeData.backColor," !important;")),badgeData.foreColor&&(badge.style+="color: ".concat(badgeData.foreColor," !important;")),""!==badge.style&&(badge.style=' style="'.concat(badge.style,'"')),""!==badge.text&&(badgeData.type&&-1!==badgeData.type.indexOf("pending")&&(badge.text=""),badge.html='<span class="'.concat(badge.class.join(" "),'"').concat(badge.style,">").concat(badge.text,"</span>"))),badge.html},addToDataset:function addToDataset(node,location){var elem,updatedNode,index;if(node.parent&&(elem=this.findById(node.parent)),location instanceof jQuery&&location.is("li")){var childNodes=(updatedNode=this.findById($(location[0].parentNode.parentNode).find("a")[0].id)).children||updatedNode.node.data("jsonData").children;index=childNodes.findIndex((function(element){return element.text.trim()===$(location).text().trim()})),childNodes.splice(index,0,node)}return"bottom"!==location||node.parent||elem||this.settings.dataset.push(node),"top"!==location||node.parent||elem||this.settings.dataset.unshift(node),node.parent&&elem&&(elem.children||(elem.children=[]),"bottom"===location?elem.children.push(node):elem.children.unshift(node)),!(node.parent&&!elem)},findById:function findById(id,source){for(var key in source||(source=this.settings.dataset),source){var item=source[key];if(item.id===id)return item;if(item.children||item.node.data("jsonData").children){var subresult=this.findById(id,item.children||item.node.data("jsonData").children);if(subresult)return subresult}}return null},getNodeByIdIfSelected:function getNodeByIdIfSelected(id,source){var node=this.findById(id,source);return node&&node.selected?node:null},getSelectedNodes:function getSelectedNodes(){var node,data,selected=[];return $("li.is-selected",this.element).each((function(){node=$("a:first",this),data=node.data("jsonData"),selected.push({node:node,data:data})})),selected},getNextNode:function getNextNode(target){var next=target.parent().next().find("a:first"),subTarget=target.next();if(subTarget.is("ul.is-open")&&(next=subTarget.find("a:first")),next.hasClass("is-disabled")&&(next=next.parent().next().find("a:first")),0===next.length)for(var i=0,closest=target;i<1e3&&!(next=(closest=closest.parent().closest(".folder")).next().find("a:first")).length;i++);return next.hasClass("is-disabled")&&(next=this.getNextNode(next)),next},getPreviousNode:function getPreviousNode(target){var prev=target.parent().prev().find("a:first"),subTarget=prev.parent();return subTarget.is(".folder.is-open")&&subTarget.find("ul.is-open a").length&&!subTarget.find("ul.is-disabled").length&&(prev=subTarget.find("ul.is-open a:last")),prev.hasClass("is-disabled")&&(subTarget=(prev=prev.parent().prev().find("a:first")).parent()).is(".folder.is-open")&&subTarget.find("ul.is-open a").length&&!subTarget.find("ul.is-disabled").length&&(prev=subTarget.find("ul.is-open a:last")),0===prev.length&&(prev=target.closest("ul").prev("a")),prev.hasClass("is-disabled")&&(prev=this.getPreviousNode(prev)),prev},syncDataset:function syncDataset(node){var json=[],self=this;node=node||this.element,[].slice.call(node.children("li").toArray()).forEach((function(li){json.push(self.syncNode(li.querySelector("a")))})),this.settings.dataset=json,this.element.triggerHandler("rendered",{data:this.settings.dataset})},syncNode:function syncNode(node){var self=this,nodeJQ=this.isjQuery(node)?node:$(node),parent=(node=nodeJQ[0]).parentNode,hasClass=function hasClass(el,className){return el.classList.contains(className)},entry={node:nodeJQ,id:node.getAttribute("id"),text:node.querySelector(".tree-text").textContent};(hasClass(node,"is-open")||parent&&"li"===parent.tagName.toLowerCase()&&hasClass(parent,"is-open"))&&(entry.open=!0);var href=node.getAttribute("href");href&&(entry.href=href),hasClass(parent,"is-selected")&&(entry.selected=!0),hasClass(node,"is-disabled")&&(entry.disabled=!0);var classAttribute=node.getAttribute("class");classAttribute&&classAttribute.indexOf("icon")>-1&&(entry.icon=classAttribute);var ul=nodeJQ.next();ul[0]&&"ul"===ul[0].tagName.toLowerCase()&&(entry.children=[],[].slice.call(ul.children("li").toArray()).forEach((function(li){entry.children.push(self.syncNode(li.querySelector("a")))})));var jsonData=nodeJQ.data("jsonData");return jsonData&&(delete jsonData.selected,delete jsonData.children,entry=$.extend({},jsonData,entry)),nodeJQ.data("jsonData",entry),entry},addNode:function addNode(nodeData,location,isBeforeOrAfter){var selectedOptionText,selectHtml,option,self=this,badgeAttr="object"===_typeof(nodeData.badge)?JSON.stringify(nodeData.badge):nodeData.badge;nodeData.href=void 0!==nodeData.href?nodeData.href:"#",location=location||"bottom";var a=document.createElement("a");a.setAttribute("id",nodeData.id),a.setAttribute("href",nodeData.href),void 0!==badgeAttr&&a.setAttribute("data-badge",badgeAttr),void 0!==nodeData.alertIcon&&a.setAttribute("data-alert-icon",nodeData.alertIcon),nodeData.text&&(a.textContent=nodeData.text),nodeData.disabled&&a.classList.add("is-disabled"),nodeData.icon&&a.classList.add(nodeData.icon);var li=document.createElement("li");if(nodeData.open&&li.classList.add("is-open"),li.appendChild(a),"dropdown"===nodeData.type&&(a.setAttribute("style","display: none"),nodeData.data)){selectHtml='<select class="dropdown" close-on-select="true">';for(var i=0;i<nodeData.data.length;i++)(option=nodeData.data[i]).value===nodeData.text?(selectedOptionText=option.text,selectHtml+='<option value="'.concat(option.value,'" selected>').concat(option.text,"</option>")):selectHtml+='<option value="'.concat(option.value,'">').concat(option.text,"</option>");selectHtml+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(selectedOptionText),$('<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(selectHtml+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',"</div>")).appendTo(li),nodeData.disabled?$(li).find("select.dropdown").dropdown().disable():$(li).find("select.dropdown").dropdown().on("selected.tree",(function(){var nodeToUpdate=self.findById(this.parentElement.previousElementSibling.id);nodeToUpdate.text=this.value,self.updateNode(nodeToUpdate)}))}var found=!!this.loading||this.addToDataset(nodeData,location);return nodeData.parent instanceof jQuery&&(found=!0),location instanceof jQuery&&"before"===isBeforeOrAfter?($(li).insertBefore(location),found=!0):location instanceof jQuery&&"after"===isBeforeOrAfter&&($(li).insertAfter(location),found=!0),!(location instanceof jQuery)||nodeData.parent&&found||nodeData.parent instanceof jQuery||"before"===isBeforeOrAfter||"after"===isBeforeOrAfter||(location[0].appendChild(li),found=!0),"bottom"!==location||nodeData.parent&&found||this.element[0].appendChild(li),"top"!==location||nodeData.parent&&found||this.element.prepend(li),nodeData.parent?(found&&"string"==typeof nodeData.parent&&(li=this.element.find("#".concat(nodeData.parent)).parent(),!nodeData.disabled&&li.is(".is-selected")&&void 0===nodeData.selected&&(nodeData.selected=!0),this.addAsChild(nodeData,li)),nodeData.parent&&nodeData.parent instanceof jQuery&&(li=nodeData.parent,nodeData.parent.is("a")&&(li=nodeData.parent.parent()),this.addAsChild(nodeData,li)),this.isjQuery(li)&&(nodeData.node=li.find("ul li a#".concat(nodeData.id)))):(li=$(li),this.addChildNodes(nodeData,li),nodeData.node=li.children("a").first()),a=$(a),this.decorateNode(a,nodeData.icon,nodeData.hideCheckbox),nodeData.selected&&this.selectNode(a,nodeData.focus),a.data("jsonData",nodeData),li},addAsChild:function addAsChild(nodeData,li){var ul=(li=this.isjQuery(li)?li[0]:li).querySelector("ul");ul||(li.insertAdjacentHTML("beforeend",'<ul class="folder"></ul>'),ul=li.querySelector("ul")),nodeData.open&&ul.classList.add("is-open"),this.decorateNode(li.querySelector("a")),nodeData.parent="",this.addNode(nodeData,$(ul))},addChildNodes:function addChildNodes(nodeData,li){var _this5=this,ul=(li=this.isjQuery(li)?li[0]:li).querySelector("ul");nodeData.children?(ul||(li.insertAdjacentHTML("beforeend",'<ul class="folder'.concat(nodeData.open?" is-open":"",'"></ul>')),ul=li.querySelector("ul")),ul.innerHTML="",nodeData.children&&nodeData.children.forEach((function(elem){return _this5.addNode(elem,$(ul))}))):ul&&ul.parentNode.removeChild(ul)},isTrue:function isTrue(v){return null!=v&&("boolean"==typeof v&&!0===v||"string"==typeof v&&"true"===v.toLowerCase())},isFalse:function isFalse(v){return null!=v&&("boolean"==typeof v&&!1===v||"string"==typeof v&&"false"===v.toLowerCase())},updateNode:function updateNode(nodeData){var elem=nodeData.node?{node:nodeData.node}:this.findById(nodeData.id);if(elem&&elem.node[0]){var parent=elem.node[0].parentNode,nodetext=elem.node[0].querySelector(".tree-text"),isDisabled=this.isTrue(nodeData.disabled)||this.isFalse(nodeData.enabled),isEnabled=this.isTrue(nodeData.enabled)||this.isFalse(nodeData.disabled);if(nodeData.badge){var badge=elem.node[0].querySelector(".tree-badge");if(!badge&&!nodeData.badge.remove&&void 0!==nodeData.badge.text&&""!==$.trim(nodeData.badge.text)){var newBadge=document.createElement("span");newBadge.classList.add("tree-badge","badge"),nodetext.parentNode.insertBefore(newBadge,nodetext),badge=elem.node[0].querySelector(".tree-badge")}badge&&(void 0!==nodeData.badge.text&&(nodeData.badge.text=nodeData.badge.text.toString(),badge.textContent=nodeData.badge.text,badge.classList.remove("round"),1===nodeData.badge.text.length&&badge.classList.add("round")),void 0!==nodeData.badge.type&&(badge.classList.remove("info","good","error","alert","pending"),/info|good|error|alert|pending/i.test(nodeData.badge.type)?badge.classList.add(nodeData.badge.type):"#"===nodeData.badge.type.charAt(0)&&7===nodeData.badge.type.length&&(badge.style.backgroundColor=nodeData.badge.type),-1!==nodeData.badge.type.indexOf("pending")&&(badge.textContent="")),elem.badge=nodeData.badge,this.parseBool(nodeData.badge.remove)&&(badge.parentNode.removeChild(badge),void 0!==elem.badge&&delete elem.badge))}if(nodeData.text&&(nodetext.textContent=nodeData.text,elem.text=nodeData.text),nodeData.icon?(this.setTreeIcon(elem.node[0].querySelector("svg.icon-tree"),nodeData.icon),elem.icon=nodeData.icon):nodeData.children&&nodeData.children.length&&!parent.classList.contains("folder")&&this.convertFileToFolder(elem.node),isDisabled)if(elem.node[0].classList.add("is-disabled"),elem.node[0].setAttribute("aria-disabled","true"),parent.classList.contains("folder")&&parent.classList.contains("is-open"))[].slice.call(parent.querySelectorAll("a, ul[role=group]")).forEach((function(node){node.classList.add("is-disabled"),node.setAttribute("aria-disabled","true")}));if(isEnabled)if(!(elem.node.parentsUntil(this.element,"ul[role=group].is-disabled").length>0))if(elem.node[0].classList.remove("is-disabled"),elem.node[0].removeAttribute("aria-disabled"),parent.classList.contains("folder")&&parent.classList.contains("is-open"))[].slice.call(parent.querySelectorAll("a, ul[role=group]")).forEach((function(node){node.classList.remove("is-disabled"),node.removeAttribute("aria-disabled")}));nodeData.node&&this.syncDataset(),nodeData.children&&(nodeData.children.length?this.addChildNodes(nodeData,parent):this.removeChildren(nodeData,parent)),this.createSortable()}},parseBool:function parseBool(b){return!/^(false|0)$/i.test(b)&&!!b},removeChildren:function removeChildren(nodeData,li){var ul=(li=this.isjQuery(li)?li[0]:li).querySelector("ul");this.setTreeIcon(li.querySelector("svg.icon-tree"),nodeData.icon||"icon-tree-node"),li.classList.remove("folder","is-open"),ul&&ul.parentNode.removeChild(ul)},removeNode:function removeNode(nodeData){var elem=this.findById(nodeData.id);nodeData instanceof jQuery?(elem=nodeData).parent().remove():elem&&elem.node.parent().remove(),elem&&this.syncDataset()},attachMenu:function attachMenu(menuId){var self=this;menuId&&this.element.off("contextmenu.tree").on("contextmenu.tree","a",(function(e){var node=$(this);return e.preventDefault(),self.popupEl=$(e.currentTarget).popupmenu({menuId:menuId,eventObj:e,trigger:"immediate",attachToBody:!0}).off("selected").on("selected",(function(event,args){self.element.triggerHandler("menuselect",{node:node,item:args})})),self.element.triggerHandler("menuopen",{menu:$("#".concat(menuId)),node:node}),!1}))},createSortable:function createSortable(){if(this.settings.sortable){var clone,interval,doDrag,self=this;if(self.targetArrow=self.element[0].previousElementSibling,self.linkSelector="a:not(.is-dragging-clone):not(.is-disabled)",!self.targetArrow||self.targetArrow&&!self.targetArrow.classList.contains("tree-drag-target-arrow")){var div=document.createElement("div");div.classList.add("tree-drag-target-arrow"),self.element[0].parentNode.insertBefore(div,self.element[0]),self.targetArrow=self.element[0].previousElementSibling}interval=setInterval((function isReady(){self.loading||(clearInterval(interval),[].slice.call(self.element[0].querySelectorAll(self.linkSelector)).forEach((function(link){var a=$(link);a.data("drag")||a.on("mousedown.tree",(function(e){e.preventDefault(),doDrag=3!==e.which&&(!e.target.classList.contains("icon")||!link.parentNode.classList.contains("folder"))})).drag({clone:!0,cloneAppendTo:a.closest("li"),clonePosIsFixed:!0}).on("dragstart.tree",(function(e,pos,thisClone){if(!thisClone||!doDrag)return link.classList.remove("is-dragging"),void(thisClone&&thisClone[0].parentNode.removeChild(thisClone[0]));(clone=thisClone)[0].removeAttribute("id"),clone[0].classList.add("is-dragging-clone"),[].slice.call(clone[0].querySelectorAll(".tree-checkbox, .tree-badge")).forEach((function(node){return node.parentNode.removeChild(node)}));var startUl=a.closest("ul");self.sortable={startIndex:$(self.linkSelector,self.element).index(a),startNode:a,startIcon:$("svg.icon-tree",a).getIconName(),startUl:startUl,startLi:a.closest("li"),startFolderNode:startUl.prev("a"),startWidth:a.outerWidth()},self.element.triggerHandler("sortstart",self.sortable),e.preventDefault(),e.stopImmediatePropagation()})).on("drag.tree",(function(e,pos){clone&&(clone[0].style.left="".concat(pos.left,"px"),clone[0].style.top="".concat(pos.top,"px"),clone[0].style.opacity="1",self.setDragOver(clone,pos))})).on("dragend.tree",(function(e,pos){if(self.targetArrow.style.display="none",[].slice.call(self.element[0].querySelectorAll(self.linkSelector)).forEach((function(node){return node.classList.remove("is-over")})),clone&&self.sortable.overDirection){clone[0].style.left="".concat(pos.left,"px"),clone[0].style.top="".concat(pos.top,"px");var start=self.sortable.startNode.parent(),end=self.sortable.overNode.parent();"over"===self.sortable.overDirection?(end[0].classList.contains("folder")||self.convertFileToFolder(self.sortable.overNode),end[0].querySelector("ul").appendChild(start[0]),end[0].classList.contains("is-open")||self.toggleNode(self.sortable.overNode,e)):"up"===self.sortable.overDirection?start.insertBefore(end):"down"===self.sortable.overDirection&&(end[0].classList.contains("is-open")&&end[0].classList.contains("folder")?$("ul:first",end).prepend(start):start.insertAfter(end)),!self.sortable.startUl[0].querySelector("li")&&self.sortable.startFolderNode.data("oldData")&&"file"===self.sortable.startFolderNode.data("oldData").type&&self.convertFolderToFile(self.sortable.startFolderNode),utils.fixSVGIcons(start),self.element.triggerHandler("sortend",self.sortable),self.syncDataset(),self.isMultiselect&&self.initSelected()}}))})))}),10)}},setDragOver:function setDragOver(clone,pos){var exMargin,isBeforeStart,isAfterSttart,li,a,ul,links,rec,left,top,direction,doAction,self=this,cloneSvg=clone[0].querySelector("svg.icon-tree"),treeRec=self.element[0].getBoundingClientRect(),extra=20,outOfRange=function outOfRange(){self.sortable.overNode=null,self.sortable.overIndex=null,self.sortable.overDirection=null,self.targetArrow.style.display="none",self.setTreeIcon(cloneSvg,"icon-cancel")};pos.top>treeRec.top-extra&&pos.top<treeRec.bottom+extra&&pos.left>treeRec.left-extra-self.sortable.startWidth&&pos.left<treeRec.left+treeRec.height+extra?(extra=2,(links=[].slice.call(self.element[0].querySelectorAll(self.linkSelector))).forEach((function(link,i){if(direction=null,rec=link.getBoundingClientRect(),pos.top>rec.top-extra&&pos.top<rec.bottom+extra){if(a=$(link),!!a.parentsUntil(self.element,".folder").filter((function(){return $("a:first",this).is(self.sortable.startNode)&&self.sortable.startLi.is(".folder")})).length)return void outOfRange();li=link.parentNode,left=rec.left,ul=a.closest("ul"),exMargin=parseInt(li.style.marginTop,10)>0?2:0,isBeforeStart=i-1===self.sortable.startIndex&&ul.is(self.sortable.startUl),isAfterSttart=i+1===self.sortable.startIndex&&ul.is(self.sortable.startUl),links.forEach((function(node){return node.classList.remove("is-over")})),doAction=function doAction(){direction?(self.setTreeIcon(cloneSvg,self.sortable.startIcon),"over"===direction?(self.targetArrow.style.display="none",link.classList.contains("is-disabled")||link.classList.add("is-over")):(links.forEach((function(node){return node.classList.remove("is-over")})),top="up"===direction?rec.top-1.5-(li.classList.contains("is-active")?3:0):rec.bottom+(li.nextElementSibling&&li.nextElementSibling.classList.contains("is-active")?-1:1.5)+exMargin,self.targetArrow.style.left="".concat(left,"px"),self.targetArrow.style.top="".concat(top,"px"),self.targetArrow.style.display="block"),self.sortable.overNode=a,self.sortable.overIndex=i,self.sortable.overDirection=direction):outOfRange()},i!==self.sortable.startIndex&&(pos.left>rec.left-extra-self.sortable.startWidth&&pos.left<rec.right+extra?direction=!isBeforeStart&&pos.top<rec.top?"up":!isAfterSttart&&pos.top>rec.top+2*extra?"down":"over":!isBeforeStart&&pos.top<rec.top?direction="up":isAfterSttart||(direction="down")),doAction()}}))):outOfRange()},convertFileToFolder:function convertFileToFolder(node){var newFolder=document.createElement("ul");newFolder.setAttribute("role","group");var oldData={icon:$("svg.icon-tree",node).getIconName(),type:"file"};if(this.hasIconClass(node)){var iconClass=node.attr("class").replace(/\s?is-selected/,"");oldData.iconClass=iconClass,node.removeClass(iconClass)}node.data("oldData",oldData);var parent=node[0].parentNode;parent&&"li"===parent.tagName.toLowerCase()&&(parent.classList.add("folder"),parent.appendChild(newFolder)),this.setTreeIcon($("svg.icon-tree",node),this.settings.folderIconClosed)},convertFolderToFile:function convertFolderToFile(node){var parent=node.parent(".folder");parent.removeClass("folder is-open"),$("ul:first",parent).remove(),parent.length&&(this.setTreeIcon($("svg.icon-tree",node),node.data("oldData")?node.data("oldData").icon:"tree-node"),node.data("oldData")&&node.data("oldData").iconClass&&node.addClass(node.data("oldData").iconClass),node.data("oldData",null))},unbind:function unbind(){return this.settings.sortable&&(this.element.find("a").each((function(){var a=$(this),dragApi=a.data("drag");a.off("mousedown.tree"),dragApi&&dragApi.destroy&&dragApi.destroy()})),this.element.prev(".tree-drag-target-arrow").remove()),this.element.off("contextmenu.tree updated.tree click.tree focus.tree keydown.tree keypress.tree"),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,TREE_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),this.element.empty(),$.removeData(this.element[0],"tree")},disable:function disable(){[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(node){node.classList.add("is-disabled"),node.setAttribute("aria-disabled","true")}))},enable:function enable(){[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(node){node.classList.remove("is-disabled"),node.removeAttribute("aria-disabled")}))},preserveEnablementState:function preserveEnablementState(){var nodes=[].slice.call(this.element[0].querySelectorAll("a")),enablementStates=[];return nodes.forEach((function(node){node.classList.contains("is-disabled")||!0===node.getAttribute("aria-disabled")?enablementStates.push({nodeId:node.id,state:"disabled"}):enablementStates.push({nodeId:node.id,state:"enabled"})})),this.settings.originalEnablementState=enablementStates,enablementStates},restoreEnablementState:function restoreEnablementState(){var s=this.settings,nodes=[].slice.call(this.element[0].querySelectorAll("a"));void 0!==s.originalEnablementState&&null!==s.originalEnablementState&&nodes.forEach((function(node){s.originalEnablementState.forEach((function(origNode){origNode.nodeId===node.id&&("disabled"===origNode.state?(node.classList.add("is-disabled"),node.setAttribute("aria-disabled","true")):(node.classList.remove("is-disabled"),node.removeAttribute("aria-disabled")))}))}))}},$.fn.tree=function(settings){return this.each((function(){var instance=$.data(this,"tree");instance?instance.updated(settings):instance=$.data(this,"tree",new Tree(this,settings))}))};var TREEMAP_DEFAULTS={dataset:[],redrawOnResize:!0,margin:{top:20,right:20,bottom:20,left:20},colors:null,showLabel:!0,labelFormatter:".0%",showTitle:!0,emptyMessage:{title:Locale?Locale.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Treemap(element,settings){this.settings=utils.mergeSettings(element,settings,TREEMAP_DEFAULTS),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.element=$(element),this.init()}Treemap.prototype={init:function init(){return this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function build(){return this.setupColors(),this.updateData(this.settings.dataset),this},setupColors:function setupColors(){if(!this.settings.colors||this.useBuiltInColors){var palette=theme.themeColors().palette;this.settings.colors=[palette.azure[100].value,palette.azure[90].value,palette.azure[80].value,palette.azure[70].value,palette.azure[60].value,palette.azure[40].value,palette.azure[30].value,palette.azure[20].value,palette.amethyst[100].value,palette.amethyst[90].value,palette.amethyst[80].value,palette.amethyst[70].value,palette.amethyst[60].value,palette.amethyst[50].value,palette.amethyst[40].value,palette.amethyst[40].value,palette.amethyst[30].value,palette.amethyst[20].value,palette.turquoise[100].value,palette.turquoise[90].value,palette.turquoise[80].value,palette.turquoise[70].value,palette.turquoise[60].value,palette.turquoise[50].value,palette.turquoise[40].value,palette.turquoise[40].value,palette.turquoise[30].value,palette.turquoise[20].value],this.useBuiltInColors=!0}},updateData:function updateData(data){var _this=this,margin=Object.create(this.settings.margin),width=this.element.parent().width()-margin.left-margin.right,height=this.element.parent().height()-margin.top-margin.bottom,color=d3.scaleOrdinal().range(this.settings.colors);if(0!==data.length){this.settings.showTitle&&data.name&&(d3.select(this.element[0]).append("div").attr("class","chart-treemap-title").text(data.name),height-=35,margin.top-=19);var treemap=d3.treemap().size([width,height]);this.root=d3.select(this.element[0]).classed("chart-treemap",!0).append("div").style("position","relative").style("width","".concat(width+margin.left+margin.right,"px")).style("height","".concat(height+margin.top+margin.bottom,"px")).style("left","".concat(margin.left,"px")).style("top","".concat(margin.top,"px"));var root=d3.hierarchy(data,(function(d){return d.children})).sum((function(d){return d.value})),tree=treemap(root);this.total=d3.sum(tree.leaves(),(function(d){return d.value})),this.root.datum(root).selectAll(".chart-treemap-node").data(tree.leaves()).enter().append("div").attr("class","chart-treemap-node").style("left",(function(d){return"".concat(d.x0,"px")})).style("top",(function(d){return"".concat(d.y0,"px")})).style("width",(function(d){return"".concat(Math.max(0,d.x1-d.x0-1),"px")})).style("height",(function(d){return"".concat(Math.max(0,d.y1-d.y0-1),"px")})).style("background",(function(d){return d&&d.parent&&d.parent.data?color(d.parent.data.name):""})).text((function(d){return d.data.name})),this.settings.showLabel&&this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-percent").text((function(d){return d3.format(_this.settings.labelFormatter)(d.value/_this.total)}))}else this.element.emptymessage(this.settings.emptyMessage)},handleEvents:function handleEvents(){var _this2=this;return this.element.on("updated.".concat("treemap"),(function(){_this2.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat("treemap"),(function(){_this2.handleResize()})),this.element.on("resize.".concat("treemap"),(function(){_this2.handleResize()}))),$("html").on("themechanged.".concat("treemap"),(function(){_this2.updated()})),this},handleResize:function handleResize(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),this.setupColors(),this.element.empty(),this.build()},teardown:function teardown(){return this.element.off("updated.".concat("treemap")),$("body").off("resize.".concat("treemap")),$("html").off("themechanged.".concat("treemap")),this},destroy:function destroy(){this.element.empty().removeClass("chart-treemap"),charts.removeTooltip(),this.teardown(),$.removeData(this.element[0],"treemap")}},$.fn.treemap=function(settings){return this.each((function(){var instance=$.data(this,"treemap");instance?instance.updated(settings):instance=$.data(this,"treemap",new Treemap(this,settings))}))},$.fn.weekview=function(settings){return this.each((function(){var instance=$.data(this,"weekview");instance?instance.updated(settings):instance=$.data(this,"weekview",new WeekView(this,settings))}))};var WIZARD_DEFAULTS={ticks:null,ticksTemplate:'<a class="tick {{state}}" href="{{href}}"><span class="label" data-shortlabel="{{shortLabel}}">{{label}}</span></a>'};function Wizard(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,WIZARD_DEFAULTS),this.init()}function calculatePlaceholder(formattedValue,row,cell,value,col,item){var placeholder=col.placeholder;if(placeholder&&""===formattedValue){return"[object Function]"==={}.toString.call(placeholder)?placeholder=placeholder(row,cell,value,col,item):item&&placeholder in item&&(placeholder=item[placeholder]),placeholder}return""}Wizard.prototype={init:function init(){this.namespace=utils.uniqueId({classList:["wizard"]}),this.build().handleEvents()},build:function build(){return this.header=this.element.find(".wizard-header"),this.header.length||(this.header=$('<div class="wizard-header"></div>').appendTo(this.element)),this.bar=this.element.find(".bar"),this.bar.length||(this.bar=$('<div class="bar"></div>').appendTo(this.header)),this.completedRange=this.element.find(".completed-range"),this.completedRange.length||(this.completedRange=$('<div class="completed-range"></div>').appendTo(this.bar)),this.buildTicks().updateRange(),this},buildTicks:function buildTicks(){var s=this.settings;if(this.ticks=this.bar.children(".tick"),!this.ticks.length&&s.ticks){for(var replaceMatch=function replaceMatch(str,c){return str.replace(/{{(\w+)}}/g,(function(m,p){return c[p]}))},defaultTick={state:"",href:"#",label:""},i=0;i<s.ticks.length;i++){var linkStr=replaceMatch(s.ticksTemplate,$.extend({},defaultTick,s.ticks[i]));linkStr=linkStr.replace(/(\s(\w|-)+=("|')?)?undefined("|')?/gim,"");var link=$(linkStr);s.ticks[i].ngClick&&link.attr("ng-click",s.ticks[i].ngClick),this.bar.append(link)}this.ticks=this.bar.children(".tick")}return this.positionTicks(),this.setLabelsData(),this.adjustLabels(),this.ticks.toArray().forEach((function(tick){tick.classList.contains("is-disabled")&&["onclick","ng-click"].forEach((function(attr){return tick.removeAttribute(attr)}))})),this.header[0].style.opacity="1",this},setLabelsData:function setLabelsData(){var _this=this,labels=[].slice.call(this.bar[0].querySelectorAll(".label"));return this.labels=[],labels.forEach((function(node){var label=node.textContent,shortLabel=node.getAttribute("data-shortlabel");shortLabel||(shortLabel=node.getAttribute("shortlabel"));var data={label:label,shortLabel:shortLabel,node:node,jqEl:$(node)};shortLabel&&"undefined"!==shortLabel||(node.removeAttribute("data-shortlabel"),node.removeAttribute("shortlabel"),delete data.shortLabel),_this.labels.push(data)})),this},adjustLabels:function adjustLabels(){var _this2=this,headerRect=this.header[0].getBoundingClientRect(),barWidth=parseFloat(window.getComputedStyle(this.bar[0]).width),availWidth=100/(this.labels.length-1)/100*barWidth-15,usingShortLabel=[],labelsToFix=[],resetLabel=function resetLabel(label){delete label.isEllipsis,label.node.classList.remove("is-ellipsis"),label.node.style.width="",_this2.removeTooltip(label)},adjustLabel=function adjustLabel(idx){var label=_this2.labels[idx].node;if(-1===usingShortLabel.indexOf(idx)){var shortLabel=_this2.labels[idx].shortLabel;shortLabel?(label.textContent=shortLabel,usingShortLabel.push(idx),resetLabel(_this2.labels[idx])):(label.classList.add("is-ellipsis"),label.style.width="".concat(availWidth,"px"),_this2.setTooltip(_this2.labels[idx]),_this2.labels[idx].isEllipsis=!0)}label.style.left="-".concat((label.offsetWidth-label.parentNode.offsetWidth)/2,"px")},adjustFirstAndLastLabels=function adjustFirstAndLastLabels(){var fixLabel=function fixLabel(label,diff,isLast){if(label.isEllipsis){var width=parseFloat(label.node.style.width)-diff;label.node.style.width="".concat(width,"px"),label.node.style.left="-".concat((width-label.node.parentNode.offsetWidth)/2,"px")}else{var left=parseFloat(label.node.style.left)+diff*(isLast?-1:1);label.node.style.left="".concat(left,"px")}},label=_this2.labels[0],labelRect=label.node.rect||label.node.getBoundingClientRect();headerRect.left>labelRect.left&&fixLabel(label,headerRect.left-labelRect.left),labelRect=(label=_this2.labels[_this2.labels.length-1]).node.rect||label.node.getBoundingClientRect(),headerRect.right<labelRect.right&&fixLabel(label,labelRect.right-headerRect.right,!0)};this.labels.forEach((function(label){var node=label.node;node.textContent=label.label,node.style.left="-".concat((node.offsetWidth-node.parentNode.offsetWidth)/2,"px"),resetLabel(label)})),adjustFirstAndLastLabels();var overlap=function overlap(r1,r2){return!(r1.right<r2.left||r1.left>r2.right||r1.bottom<r2.top||r1.top>r2.bottom)},setLabelsToFix=function setLabelsToFix(){_this2.labels.forEach((function(label){label.rect=label.node.getBoundingClientRect()})),labelsToFix=[];for(var i=0,l=_this2.labels.length;i<l;i++)if(i<l-1){var i2=i+1;overlap(_this2.labels[i].rect,_this2.labels[i2].rect)&&labelsToFix.push([i,i2])}},max=50;do{setLabelsToFix(),labelsToFix.forEach((function(arr){var label1=_this2.labels[arr[0]].node,label2=_this2.labels[arr[1]].node,idx=label1.offsetWidth>label2.offsetWidth?0:1,i=arr[idx],i2=idx?arr[0]:arr[1];adjustLabel(i),overlap(_this2.labels[i].rect,_this2.labels[i2].rect)&&adjustLabel(i2)})),adjustFirstAndLastLabels(),setLabelsToFix(),max--}while(labelsToFix.length&&max>0);return adjustFirstAndLastLabels(),this.labels.forEach((function(label){delete label.isEllipsis,delete label.rect})),this},setTooltip:function setTooltip(label){var _this3=this;label.jqEl.tooltip({content:label.label,placement:"bottom"}).on("blur.".concat("wizard"),(function(){return _this3.removeTooltip(label)}))},removeTooltip:function removeTooltip(label){var tooltipApi=label.jqEl.data("tooltip");tooltipApi&&(tooltipApi.element.off("blur.".concat("wizard")),tooltipApi.destroy())},positionTicks:function positionTicks(){var len=this.ticks.length,delta=100/(len-1);this.ticks.toArray().forEach((function(tick,i){var pos=function getPoint(i){return i===len-1?100:delta*i}(i),left=Locale&&Locale.isRTL()?100-pos:pos;tick.style.left="".concat(left,"%"),tick.classList.contains("is-disabled")&&tick.setAttribute("tabindex","-1")}))},updateRange:function updateRange(){var getStyle=function getStyle(el,prop){return parseFloat(window.getComputedStyle(el)[prop])},tick=this.ticks.filter(".current").last(),w=0;return tick.length&&(w=100*getStyle(tick[0],"left")/getStyle(tick.parent()[0],"width"),w=Locale&&Locale.isRTL()?100-w:w),this.completedRange[0].style.width="".concat(w,"%"),this},updated:function updated(settings){return settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.buildTicks().updateRange(),this},teardown:function teardown(){var _this4=this;return this.labels.forEach((function(label){_this4.removeTooltip(label),label.jqEl.off().removeData()})),delete this.labels,this.ticks.off("click.".concat("wizard")),this.element.off("updated.".concat("wizard")),$("body").off("resize.".concat(this.namespace)),this.ticks.remove(),this},select:function select(e,tick){return deprecateMethod(this.activate,this.select).apply(this,[e,tick])},activate:function activate(e,tick){if(void 0===e&&!tick)return this;var self=this;if(tick=function getTick(){var target;return void 0===e||null!=e&&e.type&&e.target||tick||(tick=e),void 0===tick?(target=$(e.target)).is(".label")?target.parent():target:"number"==typeof tick?self.ticks.eq(tick):tick}(),e&&(tick.is("[disabled], .is-disabled")||!tick.is("a")))return e.preventDefault(),e.stopPropagation(),this;if(!1===this.element.triggerHandler("beforeactivate",[tick]))return this;var trueIndex=this.ticks.index(tick);return this.ticks.removeClass("complete current").eq(trueIndex).addClass("current").prevAll(".tick").addClass("complete"),this.updateRange(),this.element.trigger("activated",[tick]),setTimeout((function(){self.element.trigger("afteractivated",[tick])}),300),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"wizard")},handleEvents:function handleEvents(){var _this5=this,self=this;return this.element.on("updated.".concat("wizard"),(function(){self.updated()})),this.ticks.on("click.".concat("wizard"),(function(e){self.activate(e,$(this))})),$("body").on("resize.".concat(this.namespace),(function(){_this5.adjustLabels()})),this}},$.fn.wizard=function(settings){return this.each((function(){var instance=$.data(this,"wizard");instance?instance.updated(settings):instance=$.data(this,"wizard",new Wizard(this,settings))}))};var formatters={Text:function Text(row,cell,value){return null==value||""===value?"":value.toString()},Input:function Input(row,cell,value,col){return col.inlineEditor?'<label for="datagrid-inline-input-'.concat(row,"-").concat(cell,'" class="audible">').concat(col.name,'</label><input id="datagrid-inline-input-').concat(row,"-").concat(cell,'" class="').concat("right"===col.align?"is-number-mask":"",'" value="').concat(value,'">'):null==value||""===value?"":value.toString()},Placeholder:function Placeholder(row,cell,value,col,item){var placeholder=calculatePlaceholder(value,row,cell,value,col,item);return""!==placeholder?'<span class="is-placeholder">'.concat(placeholder,"</span>"):null==value||""===value?"":value.toString()},Ellipsis:function Ellipsis(row,cell,value,col){var str=null==value||""===value?"":value.toString();return col.textOverflow="ellipsis",str},Password:function Password(row,cell,value){return(null==value||""===value?"":value.toString()).replace(/./g,"*")},Readonly:function Readonly(row,cell,value){return'<span class="is-readonly">'.concat(null==value?"":value,"</span>")},Date:function Date(row,cell,value,col,isReturnValue){var value2,formatted=null==value?"":value;return"string"==typeof value&&value?(value2=col.sourceFormat?Locale.parseDate(value,"string"==typeof col.sourceFormat?{pattern:col.sourceFormat}:col.sourceFormat):Locale.parseDate(value,"string"==typeof col.dateFormat?{pattern:col.dateFormat}:col.dateFormat))?formatted=Locale.formatDate(value2,"string"==typeof col.dateFormat?{pattern:col.dateFormat}:col.dateFormat):"NaN/NaN/NaN"!==(formatted=Locale.formatDate(value,"string"==typeof col.dateFormat?{pattern:col.dateFormat}:col.dateFormat))&&formatted||""===formatted||(formatted=value):value&&(formatted=Locale.formatDate(value,"string"==typeof col.dateFormat?{pattern:col.dateFormat}:col.dateFormat)),col.editor&&!0!==isReturnValue?'<span class="trigger">'.concat(formatted,"</span>").concat($.createIcon({icon:"calendar",classes:["icon-calendar"]})):formatted},Time:function Time(row,cell,value,col,isReturnValue){var value2,formatted=null==value?"":value,localeDateFormat="object"===_typeof(Locale)&&Locale.calendar().dateFormat?Locale.calendar().dateFormat.short:null,localeTimeFormat="object"===_typeof(Locale)&&Locale.calendar().timeFormat?Locale.calendar().timeFormat:null;return"string"==typeof value&&value?(value2=Locale.formatDate(function parseTime(timeString){if(""===timeString)return null;var time=timeString.match(/(\d+)(?::(\d\d))(?::(\d\d))?\s*([pP]?)/i);if(null===time)return null;var d=new Date;return d.setHours(parseInt(time[1],10)+(time[4]?12:0)),d.setMinutes(parseInt(time[2],10)||0),d.setSeconds(parseInt(time[3],10)||0),d}(value),{pattern:"".concat(localeDateFormat," ").concat(col.sourceFormat||col.timeFormat||localeTimeFormat)}))&&(formatted=value2.slice(value2.indexOf(" "))):value&&(value2=Locale.formatDate(value,{pattern:"".concat(localeDateFormat," ").concat(col.sourceFormat||col.timeFormat||localeTimeFormat)}))&&(formatted=value2.slice(value2.indexOf(" "))),formatted=formatted.replace(/^\s/,""),col.editor&&!0!==isReturnValue?'<span class="trigger">'.concat(formatted,"</span>").concat($.createIcon({icon:"clock",classes:["icon-clock"]})):formatted},Autocomplete:function Autocomplete(row,cell,value){return null==value?"":value},Lookup:function Lookup(row,cell,value,col,item){var formatted=null==value?"":value,isPlaceholder=!1,placeholder=calculatePlaceholder(formatted,row,cell,value,col,item);return""!==placeholder&&(isPlaceholder=!0),col.editor?(col.editorOptions&&"function"==typeof col.editorOptions.field&&(formatted=col.editorOptions.field(item,null,null),isPlaceholder=!1),null!=formatted&&""!==formatted||(formatted="",placeholder&&(isPlaceholder=!0,formatted=placeholder)),'<span class="trigger '.concat(isPlaceholder?"is-placeholder":"").concat("right"===col.align?"align-text-right":"",'">').concat(formatted,"</span>").concat($.createIcon({icon:"search-list",classes:["icon-search-list"]}))):isPlaceholder?'<span class="is-placeholder">'.concat(placeholder,"</span>"):formatted},Decimal:function Decimal(row,cell,value,col,item){var formatted=value;void 0!==Locale&&null!=formatted&&""!==formatted&&(formatted=Locale.formatNumber(value,col.numberFormat));var placeholder=calculatePlaceholder(formatted=null==formatted||"NaN"===formatted?"":formatted,row,cell,value,col,item);return""!==placeholder?'<span class="is-placeholder">'.concat(placeholder,"</span>"):formatted},Integer:function Integer(row,cell,value,col){var formatted=value;return void 0!==Locale&&null!=formatted&&""!==formatted&&(formatted=Locale.formatNumber(value,col.numberFormat||{style:"integer"})),null==formatted||"NaN"===formatted?"":formatted},Hyperlink:function Hyperlink(row,cell,value,col,item,api){var colHref=col.href||"#";if(col.href&&"function"==typeof col.href){if(null==(colHref=col.href(row,cell,item,col)))return col.text||value}else colHref=colHref.replace("{{value}}",value);var textValue=col.text||value;return textValue||col.icon?col.icon?'<a href="'.concat(colHref,'" class="btn-icon row-btn ').concat(col.cssClass||"",'" ').concat(api.settings.rowNavigation?'tabindex="-1"':"").concat(col.hyperlinkTooltip?' title="'.concat(col.hyperlinkTooltip,'"'):"",">\n          ").concat($.createIcon({icon:col.icon,file:col.iconFile}),'\n          <span class="audible">').concat(textValue,"</span>\n        </a>"):'<a href="'.concat(colHref,'" ').concat(api.settings.rowNavigation?'tabindex="-1"':"",' role="presentation" class="hyperlink ').concat(col.cssClass||"",'"').concat(col.target?' target="'.concat(col.target,'"'):"").concat(col.hyperlinkTooltip?' title="'.concat(col.hyperlinkTooltip,'"'):"",">").concat(textValue,"</a>"):""},Template:function Template(row,cell,value,col,item){var tmpl=col.template,renderedTmpl="";return Tmpl&&item&&tmpl&&(renderedTmpl=Tmpl.compile("{{#dataset}}".concat(tmpl,"{{/dataset}}"),{dataset:item})),renderedTmpl},Drilldown:function Drilldown(){var text=Locale.translate("Drilldown");return void 0===text&&(text=""),'<button type="button" tabindex="-1" class="btn-icon small datagrid-drilldown">\n         '.concat($.createIcon({icon:"drilldown"}),"\n        <span>").concat(text,"</span>\n      </button>")},RowReorder:function RowReorder(){var text=Locale.translate("ReorderRows");return void 0===text&&(text="Reorder Rows"),'<div class="datagrid-reorder-icon">\n         '.concat($.createIcon({icon:"drag"}),'\n        <span class="audible">').concat(text,"</span>\n      </div>")},Checkbox:function Checkbox(row,cell,value,col,item,api){var isChecked;isChecked=col.isChecked?col.isChecked(value):void 0!==value&&(!0===value||1===parseInt(value,10));var hiddenText='<span class="hidden" aria-hidden="true" role="presentation"> '.concat(Locale.translate(isChecked?"Yes":"No"),"</span>"),animate=api.wasJustUpdated;return api.wasJustUpdated=!1,'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(col.name,'" class="datagrid-checkbox\n     ').concat(isChecked?"is-checked ".concat(animate?" ":" no-animation"):"",'" aria-checked="').concat(isChecked,'"></span>').concat(hiddenText,"</div>")},SelectionCheckbox:function SelectionCheckbox(row,cell,value,col,item,api){var isChecked=void 0!==value&&!0===value;value||(isChecked=api.isRowSelected(item));var ariaString=" ";if(api.settings.columnIds.length>0)for(var i=0;i<api.settings.columnIds.length;i++)ariaString+=item[api.settings.columnIds[i]];return ariaString=xssUtils.ensureAlphaNumericWithSpaces(ariaString),'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(col.name?col.name:Locale.translate("Select")+ariaString,'" class="datagrid-checkbox datagrid-selection-checkbox').concat(isChecked?" is-checked no-animate":"",'" aria-checked="').concat(isChecked,'"></span></div>')},Actions:function Actions(row,cell,value,col){return'<button type="button" class="btn-actions" aria-haspopup="true" aria-expanded="false" aria-owns="'.concat(col.menuId,'">\n        <span class="audible">').concat(col.title||Locale.translate("More"),"</span>\n        ").concat($.createIcon({icon:"more"}),"\n      </button>")},Textarea:function Textarea(row,cell,value){return'<span class="datagrid-multiline-text">'.concat(null==value?"":value,"</span>")},Editor:function Editor(row,cell,value,col){var formatted=null==value?"":value,classes="is-editor";return classes+=col.singleline?" is-singleline":" datagrid-multiline-text",classes+=col.contentTooltip?" content-tooltip":"",'<div class="'.concat(classes,'">').concat(xssUtils.unescapeHTML(formatted),"</div>")},Expander:function Expander(row,cell,value){return'<button type="button" aria-label="'.concat(Locale.translate("ExpandCollapse"),'" class="btn-icon datagrid-expand-btn" tabindex="-1">\n      <span class="icon plus-minus"></span>\n      </button>').concat(value?"<span> ".concat(value,"</span>"):"")},GroupRow:function GroupRow(row,cell,value,col,item,api){var groupSettings=api.settings.groupable,rowHtml={left:"",center:"",right:""},groups="",isOpen=void 0===groupSettings.expanded||groupSettings.expanded;groupSettings.expanded&&"function"==typeof groupSettings.expanded&&(isOpen=groupSettings.expanded(row,cell,value,col,item,api));for(var i=0;i<groupSettings.fields.length;i++)groups+=item[groupSettings.fields[i]]+(0===i?"":",");groupSettings.groupRowFormatter&&(groups=groupSettings.groupRowFormatter(row,cell,value,col,item,api));var button='<button type="button" class="btn-icon datagrid-expand-btn'.concat(isOpen?" is-expanded":"",'" tabindex="-1">\n    <span class="icon plus-minus').concat(isOpen?" active":"",'"></span>\n    <span class="audible">').concat(Locale.translate("ExpandCollapse"),"</span>\n    </button><span> ").concat(groups,"</span>");return rowHtml[api.getContainer(groupSettings.fields?groupSettings.fields[0]:"")]=button,rowHtml},GroupFooterRow:function GroupFooterRow(row,cell,value,col,item,api){var groupSettings=api.settings.groupable,rowHtml={left:"",center:"",right:""},visibleColumnsLeft=api.settings.frozenColumns.left.length,visibleColumnsRight=api.settings.frozenColumns.right.length,idx=api.columnIdxById(groupSettings.aggregate),container=api.getContainer(groupSettings.aggregate);return rowHtml.left='<td role="gridcell" colspan="'.concat(visibleColumnsLeft,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("left"===container?item.sum:"<span>&nbsp;</span>","</div></td>"),rowHtml.center='<td role="gridcell" colspan="'.concat(idx-visibleColumnsLeft-visibleColumnsRight,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("center"===container?item.sum:"<span>&nbsp;</span>","</div></td>"),rowHtml.right='<td role="gridcell" colspan="'.concat(visibleColumnsRight,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("right"===container?item.sum:"<span>&nbsp;</span>","</div></td>"),groupSettings.groupFooterRowFormatter&&(rowHtml[container]=groupSettings.groupFooterRowFormatter(idx,row,cell,value,col,item,api)),rowHtml},SummaryRow:function SummaryRow(row,cell,value,col){var afterText="",beforeText=col.summaryText||"";return"after"===col.summaryTextPlacement&&(afterText=beforeText,beforeText=""),void 0!==Locale&&col.numberFormat&&null!=value&&""!==value&&(value=Locale.formatNumber(+value,col.numberFormat)),beforeText+(null==value||""===value?"":value.toString())+afterText},Tree:function Tree(row,cell,value,col,item,api){var isOpen=!item||item.expanded,depth=api&&api.settings.treeDepth&&api.settings.treeDepth[row]?api.settings.treeDepth[row].depth:0,isExpandedBtnDisabled=item&&item.isAllChildrenFiltered,expandedBtnDisabledHtml=isExpandedBtnDisabled?" disabled":"";isOpen&&isExpandedBtnDisabled&&(isOpen=!1);var tabsize="short"===api.settings.rowHeight?22:30,button='<button type="button" class="btn-icon datagrid-expand-btn'.concat(isOpen?" is-expanded":"",'" tabindex="-1"').concat(depth?' style="margin-left: '.concat(depth?"".concat(tabsize*(depth-1),"px"):"",'"'):"").concat(expandedBtnDisabledHtml,'>\n      <span class="icon plus-minus ').concat(isOpen?" active":"",'"></span>\n      <span class="audible">').concat(Locale.translate("ExpandCollapse"),"</span>\n      </button>").concat(value?" <span>".concat(value,"</span>"):""),node=' <span class="datagrid-tree-node"'.concat(depth?' style="margin-left: '.concat(depth?"".concat(tabsize*depth,"px"):"",'"'):"",">").concat(value,"</span>");return item&&item[col.children?col.children:"children"]?button:node},ClassRange:function ClassRange(row,cell,value,col){var ranges=col.ranges,classes="",text="";if(!ranges)return{};for(var i=0;i<ranges.length;i++)value>=ranges[i].min&&value<=ranges[i].max&&(classes=ranges[i].classes,text=ranges[i].text?ranges[i].text:classes.split(" ")[0]),value===ranges[i].value&&(classes=ranges[i].classes,text=ranges[i].text?ranges[i].text:value);return{classes:classes,text:text}},Badge:function Badge(row,cell,value,col){var colorClasses=col.color,text=col.name;if(col.ranges){var ranges=formatters.ClassRange(row,cell,value,col);colorClasses=ranges.classes,text=ranges.text}return'<span class="badge '.concat(colorClasses,'">').concat(value,' <span class="audible">').concat(text,"</span></span>")},Tag:function Tag(row,cell,value,col){var ranges=formatters.ClassRange(row,cell,value,col);return'<span class="tag '.concat(ranges.classes,'">').concat(value,"</span>")},Alert:function Alert(row,cell,value,col){var ranges=formatters.ClassRange(row,cell,value,col),icon=$.createIcon({icon:ranges.classes,classes:["icon","datagrid-alert-icon","icon-".concat(ranges.classes)]});return"".concat(icon,'<span class="datagrid-alert-text">').concat("value"===ranges.text?value:ranges.text,"</span>")},Image:function Image(row,cell,value,col){return'<img class="datagrid-img" src="'.concat(value,'" alt="').concat(col.alt?col.alt:Locale.translate("Image"),'"').concat(col.dimensions?' style="height:'.concat(col.dimensions.height,";width:").concat(col.dimensions.height,'"'):"","/>")},Color:function Color(row,cell,value,col){var ranges=formatters.ClassRange(row,cell,value,col),text=null==value||""===value?"":value.toString();return'<span class="'.concat(ranges.classes,'">').concat(text,"</span>")},Colorpicker:function Colorpicker(row,cell,value,col){var html=null==value||""===value?"":value.toString();if(col.inlineEditor)return html;var classList="swatch".concat(""===value?" is-empty":"");return html='<span class="colorpicker-container trigger dropdown-trigger"><span class="'.concat(classList,'" style="background-color: ').concat(value,'"></span><input class="colorpicker" id="colorpicker-').concat(cell,'" name="colorpicker-').concat(cell,'" type="text" role="combobox" aria-autocomplete="list" value="').concat(value,'" aria-describedby="">'),html+='<span class="trigger">'.concat($.createIcon({icon:"dropdown"}),"</span></span>")},Button:function Button(row,cell,value,col,item,api){var text;text=col.text?col.text:null==value||""===value?"":value.toString();var markup='<button type="button" class="'.concat(col.icon?"btn-icon":"btn-secondary"," row-btn ").concat(col.cssClass?col.cssClass:"",'"').concat(api.settings.rowNavigation?' tabindex="-1"':""," >");return col.icon&&(markup+=$.createIcon({icon:col.icon,file:col.iconFile})),markup+="<span>".concat(text,"</span></button>")},Dropdown:function Dropdown(row,cell,value,col,item){var compareValue,option,formattedValue=value,isPlaceholder=!1;if(col.options&&void 0!==value){compareValue=col.caseInsensitive&&"string"==typeof value?value.toLowerCase():value;for(var i=0,l=col.options.length;i<l;i++)if(option=col.options[i],(col.caseInsensitive&&"string"==typeof option.value?option.value.toLowerCase():option.value)===compareValue){formattedValue=option.label;break}}var placeholder=calculatePlaceholder(formattedValue,row,cell,value,col,item);""!==placeholder&&(isPlaceholder=!0,formattedValue=placeholder);var html='<span class="trigger dropdown-trigger '.concat(isPlaceholder?"is-placeholder":"",'">').concat(formattedValue,"</span>").concat($.createIcon({icon:"dropdown"}));if(col.inlineEditor){html='<label for="full-dropdown" class="audible">'.concat(col.name,'</label><select id="datagrid-dropdown').concat(row,'" class="dropdown">');for(var _i=0,_l=col.options.length;_i<_l;_i++){var opt=col.options[_i],labelOrValue=void 0;labelOrValue=void 0!==opt.label?opt.label:void 0!==opt.value?opt.value:"",html+="<option".concat(void 0===opt.id?"":' id="'.concat(opt.id,'"'),'  value="').concat(opt.value,'"').concat(opt.selected||opt.value===compareValue?" selected ":"",">").concat(labelOrValue,"</option>")}html+='</select>\n      <div class="dropdown-wrapper is-inline">\n        <div class="dropdown"><span>'.concat(formattedValue,'</span></div>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </div>')}return html},Fileupload:function Fileupload(row,cell,value,col){var html=null==value||""===value?"":value.toString();return col.inlineEditor||(html=""===$.trim(html)?'<span class="trigger">'.concat(html,"</span>").concat($.createIcon({icon:"folder",classes:["icon-fileupload"]})):'<span class="trigger is-clearable">'.concat(html,"</span>").concat($.createIcon({icon:"close",classes:["icon-close"]})).concat($.createIcon({icon:"folder",classes:["icon-fileupload"]}))),html},Spinbox:function Spinbox(row,cell,value,col){var html=null==value||""===value?"":value.toString();return col.inlineEditor&&(html='<label for="spinbox-'.concat(cell,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(cell,'" name="spinbox-').concat(cell,'" type="text" class="spinbox" value="').concat(value,'">\n        <span class="spinbox-control up">+</span></span>')),html},Favorite:function Favorite(row,cell,value,col,item,api){var isChecked;isChecked=col.isChecked?col.isChecked(value):void 0!==value&&!0===value;var isEditable=col.editor&&api.settings.editable;return isChecked?'<span aria-label="'.concat(Locale.translate("Favorite"),'" class="icon-favorite').concat(isEditable?" is-editable":"",'">').concat($.createIcon({icon:"star-filled"}),"</span>"):col.showEmpty?'<span aria-label="'.concat(Locale.translate("Favorite"),'" class="icon-favorite').concat(isEditable?" is-editable":"",'">').concat($.createIcon({icon:"star-outlined"}),"</span>"):""},Status:function Status(row,cell,value,col,item){return item&&item.rowStatus?"".concat($.createIcon({icon:item.rowStatus.icon,classes:["icon","icon-".concat(item.rowStatus.icon)]}),'<span class="audible">').concat(item.rowStatus.text,"</span>"):"<span></span>"},TargetedAchievement:function TargetedAchievement(row,cell,value,col){var perc=100*value,text="".concat(perc,"%"),ranges=formatters.ClassRange(row,cell,perc,col),target=col.target;col.text&&(text=(text=(text=(text=(text=(text=(text=col.text).replace("{{value}}",value)).replace("<% value %>",value)).replace("<%value%>",value)).replace("{{percent}}",perc)).replace("<% percent %>",perc)).replace("<%percent%>",perc),col.showPercentText=!0);var barClass=col.ranges&&ranges.classes?ranges.classes:"primary";return'<div class="total bar chart-completion-target chart-targeted-achievement">\n              <div class="target remaining bar" style="width: '.concat(target||0,'%;"></div>\n              <div class="completed bar ').concat(barClass,'" style="width: ').concat(perc,'%;"></div>\n              ').concat(col.showPercentText?'<div class="chart-targeted-text l-center">'.concat(text,"</div>\n            </div>"):'<div class="audible">'.concat(perc,"%</div>"))}};function addStandardInputFeatures(input,row,cell,value,container,column,e,api,item){if(column.align&&input.addClass("l-".concat(column.align,"-text")),column.maxLength&&input.attr("maxlength",column.maxLength),column.uppercase&&input.addClass("uppercase-text"),column.mask&&"function"==typeof column.mask){var mask=column.mask(row,cell,value,column,item);input.mask({pattern:mask,mode:column.maskMode})}else if(column.maskOptions&&"function"==typeof column.maskOptions){var maskOptions=column.maskOptions(row,cell,value,column,item);input.mask(maskOptions)}else column.mask&&input.mask({pattern:column.mask,mode:column.maskMode});var defaults={patternOptions:{allowNegative:!0,allowDecimal:!0,integerLimit:4,decimalLimit:2,symbols:{thousands:Locale.currentLocale.data.numbers?Locale.currentLocale.data.numbers.group:",",decimal:Locale.currentLocale.data.numbers?Locale.currentLocale.data.numbers.decimal:".",negative:Locale.currentLocale.data.numbers?Locale.currentLocale.data.numbers.minusSign:"-"}},process:"number"},useMask=!1;column.maskOptions&&(useMask=!0),column.numberFormat&&(useMask=!0,defaults={patternOptions:{decimalLimit:column.numberFormat.maximumFractionDigits}}),column.maskOptions&&"function"==typeof column.maskOptions&&(useMask=!1),useMask&&(column.maskOptions=utils.extend(!0,{},defaults,column.maskOptions),input.mask(column.maskOptions)),column.align&&"right"===column.align||input.removeClass("is-number-mask")}var editors={Input:function Input(row,cell,value,container,column,e,api,item){this.name="input",this.originalValue=value,this.useValue=!!column.inlineEditor,this.init=function(){column.inlineEditor?this.input=container.find("input"):this.input=$('<input type="'.concat(column.inputType||"text",'" autocomplete="off"/>')).appendTo(container),addStandardInputFeatures(this.input,row,cell,value,0,column,0,0,item)},this.val=function(v){var thisValue;return v&&this.input.val(v),column&&column.numberFormat&&"percent"===column.numberFormat.style?(thisValue=this.input.val().trim().replace(/(\s%?|%)$/g,""),Locale.parseNumber(thisValue)/100):this.input.val()},this.focus=function(){this.input.focus().select()},this.destroy=function(){var _this=this;column.inlineEditor||setTimeout((function(){_this.input.remove()}),0)},this.init()},Textarea:function Textarea(row,cell,value,container,column){this.name="textarea",this.originalValue=value,this.init=function(){container.addClass("datagrid-textarea-cell-wrapper");var autogrowStartHeight=container.get(0).scrollHeight,style=column.editorOptions&&column.editorOptions.minHeight?'style="min-height: '.concat(column.editorOptions.minHeight,'px"'):"";this.input=$("<textarea ".concat(style,' class="textarea">').concat(this.originalValue,"</textarea>")).appendTo(container);var editorOptions=column.editorOptions?column.editorOptions:{};"characterCounter"in editorOptions||(editorOptions.characterCounter=!1),this.api=this.input.data("autogrow-start-height",autogrowStartHeight).textarea(column.editorOptions).data("textarea"),this.input.on("click.textareaeditor",(function(e){e.stopPropagation()})),column.maxLength&&this.input.attr("maxlength",column.maxLength),column.uppercase&&this.input.addClass("uppercase-text")},this.val=function(v){return v&&this.input.focus().val(v),this.input.val()},this.focus=function(){this.input.focus().select()},this.destroy=function(){var _this2=this;container.removeClass("datagrid-textarea-cell-wrapper"),setTimeout((function(){_this2.input.off("click.textareaeditor"),_this2.input.remove()}),0)},this.init()},Editor:function Editor(row,cell,value,container,column,e,api){this.name="editor",this.originalValue=value,this.init=function(){var self=this,editorOptions=$.extend({},{buttons:{editor:["bold","italic","underline","strikethrough","separator","foreColor"],source:[]},excludeButtons:{editor:[]}},column.editorOptions);this.editorWidth=api.setUnit(editorOptions.width||container.outerWidth()),delete editorOptions.width,container[0].innerHTML='<div class="editor-wrapper" style="width: '.concat(this.editorWidth,';">\n          <div class="editor" data-init="false">').concat(xssUtils.unescapeHTML(value),"</div>\n        </div>"),this.td=container.closest("td"),this.input=$(".editor",container),this.input.popover({content:$(".editor-wrapper",container),placementOpts:{x:0,y:"-".concat(parseInt(container[0].style.height,10)+35),parent:this.td,parentXAlignment:Locale.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",tooltipElement:"#editor-popup",extraClass:"editor-popup"}).editor(editorOptions).on("hide.editor",(function(){api.commitCellEdit(self.input)})).on("keydown.editor",(function(event){var key=event.which||event.keyCode||event.charCode||0;if((event.ctrlKey||event.metaKey)&&(13===key||10===key)){var apiPopover=self.input.data("tooltip");apiPopover&&(apiPopover.hide(),api.setNextActiveCell(event))}})),utils.fixSVGIcons($("#editor-popup"))},this.val=function(){return this.input.html()},this.focus=function(){var _this3=this;setTimeout((function(){_this3.input.focus()}),0)},this.destroy=function(){var self=this;container.removeAttr("style"),api.quickEditMode=!1,self.input.off("hide.editor keydown.editor"),setTimeout((function(){self.input.remove()}),0)},this.init()},Checkbox:function Checkbox(row,cell,value,container,column,event,grid){this.name="checkbox",this.originalValue=value,this.useValue=!0,this.container=container,this.init=function(){this.input=$('<input type="checkbox" class="checkbox"/>').appendTo(container),this.input.after('<label class="checkbox-label"></label>'),column.align&&this.input.addClass("l-".concat(column.align,"-text"))},this.val=function(v){var isChecked;if(void 0===v)return this.input.prop("checked");isChecked=column.isChecked?column.isChecked(v):v,"click"!==event.type&&("keydown"!==event.type||32!==event.keyCode)||$(event.target).is(".datagrid-checkbox-wrapper, .datagrid-cell-wrapper")||(isChecked=!isChecked,grid.setNextActiveCell(event)),this.input.prop("checked",isChecked)},this.focus=function(){this.input.trigger("focusout"),this.container.parent().focus()},this.destroy=function(){var _this4=this;setTimeout((function(){_this4.input.next(".checkbox-label").remove(),_this4.input.remove()}),0)},this.init()},Colorpicker:function Colorpicker(row,cell,value,container,column,event,grid){this.name="colorpicker",this.originalValue=value,this.useValue=!0,value=xssUtils.stripTags(value),this.init=function(){this.input=$('<input id="colorpicker-'.concat(cell,'" name="colorpicker-').concat(cell,'" class="colorpicker" value="').concat(value,'" type="text" autocomplete="off"/>')).appendTo(container),this.input.colorpicker(column.editorOptions)},this.val=function(v){return v?this.input.val(v):this.input.val()},this.focus=function(){var self=this;this.input.trigger("openlist"),grid.rowNodes(row).removeClass("is-hover-row"),this.input.focus().select(),this.input.off("listclosed").on("listclosed",(function(){grid.commitCellEdit(self.input),container.parent("td").focus()}))},this.destroy=function(){},this.init()},Dropdown:function Dropdown(row,cell,value,container,column,event,grid,rowData){this.name="dropdown",this.originalValue=value,this.useValue=!0,this.cell=grid.activeCell,this.init=function(){var _this5=this;if(column.inlineEditor)this.input=container.find("select");else{if(this.input=$('<select class="dropdown"></select>').appendTo(container),column.options){var html,opt,optionValue;value=grid.fieldValue(rowData,column.field);for(var compareValue=column.caseInsensitive&&"string"==typeof value?value.toLowerCase():value,i=0;i<column.options.length;i++)html=$("<option></option>"),opt=column.options[i],optionValue=column.caseInsensitive&&"string"==typeof opt.value?opt.value.toLowerCase():opt.value,(opt.selected||compareValue===optionValue)&&(html.attr("selected","true"),this.originalValue=optionValue),html.attr("value",opt.value).attr("id",opt.id).attr("data-type",_typeof(opt.value)),html.text(opt.label),this.input.append(html)}var editorOptions=column.editorOptions||{};(function hasEditingClass(){return editorOptions.cssClass&&/is-editing/g.test(editorOptions.cssClass)})()||(editorOptions.cssClass=editorOptions.cssClass||"",editorOptions.cssClass+=" is-editing"),this.input.dropdown(editorOptions),this.input.on("requestend",(function(){_this5.val(_this5.datasetValue)})),this.input.data("dropdown").settings.sourceArguments={column:column,container:container,grid:grid,cell:cell,event:event,row:row,rowData:rowData,value:value}}},this.val=function(v){if(this.datasetValue=v,void 0!==v){var compareValue=column.caseInsensitive&&"string"==typeof v?v.toLowerCase():v;this.input.val(v),this.input.find("option").each((function(){var opt=$(this),valueAttr=opt.attr("value"),type=opt.attr("data-type"),optionValue=valueAttr;"number"===type?optionValue=parseFloat(valueAttr):"boolean"===type?optionValue="true"===valueAttr:"string"===type&&column.caseInsensitive&&(optionValue=valueAttr.toLowerCase()),optionValue===compareValue&&opt.attr("selected","true")}))}var selected=this.input.find(":selected"),val=selected.attr("value"),dataType=selected.attr("data-type");return"number"===dataType?val=parseFloat(val):"boolean"===dataType&&(val="true"===val),void 0===val&&(val=selected.text()),val},this.focus=function(){var self=this;"click"===event.type?(this.input.trigger("openlist"),grid.rowNodes(row).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus();this.input.off("listclosed").on("listclosed",(function(e,type){grid.commitCellEdit(self.input),"select"!==type?"tab"===type&&setTimeout((function(){container.parent("td").focus()}),100):container.parent("td").focus()}))},this.destroy=function(){},this.init()},Date:function Date(row,cell,value,container,column,event,grid){this.name="date",this.originalValue=value,this.init=function(){this.input=$('<input class="datepicker" autocomplete="off"/>').appendTo(container),this.input.datepicker(column.editorOptions||{dateFormat:column.dateFormat})},this.val=function(v){return"0000"!==v&&"000000"!==v&&"00000000"!==v||(v=""),v&&this.input.val(v),formatters.Date(row,cell,this.input.val(),column,!0)},this.focus=function(){var self=this;this.input.select().focus(),"click"===event.type&&$(event.target).is(".icon")&&(this.input.parent().find(".icon").trigger("click"),this.input.closest("td").addClass("is-focused")),this.input.on("listclosed",(function(){self.input.closest("td").removeClass("is-focused"),setTimeout((function(){self.input.trigger("focusout"),container.parent().focus(),grid.setNextActiveCell(event)}),1)}))},this.destroy=function(){var _this6=this;setTimeout((function(){grid.quickEditMode=!1,_this6.input.remove()}),0)},this.init()},Fileupload:function Fileupload(row,cell,value,container,column,event,grid){var _this7=this,s=utils.mergeSettings(void 0,column.editorOptions,{allowedTypes:"*"}),fileExtensions=s.allowedTypes.split(/[\s|]+/g),id=utils.uniqueId(this,"fileupload-".concat(row,"-").concat(cell,"-")),multiple=s.useMultiple?" multiple":"",disabled=s.isDisabled?" disabled":"",types="";if(1===fileExtensions.length)"*"!==fileExtensions[0]&&(types=".".concat(xssUtils.ensureAlphaNumeric(fileExtensions[0])));else for(var i=0,l=fileExtensions.length;i<l;i++)types+=".".concat(xssUtils.ensureAlphaNumeric(fileExtensions[i])+(i!==l-1?",":""));""!==types&&(types=' accept="'.concat(types,'"')),this.name="fileupload",this.originalValue=value,this.status="init",this.useValue=!0,this.init=function(){id=xssUtils.ensureAlphaNumeric(id),multiple=xssUtils.ensureAlphaNumeric(multiple),disabled=xssUtils.ensureAlphaNumeric(disabled),this.input=$('<input id="'.concat(id,'" name="').concat(id,'" class="fileupload" type="file" ').concat(types).concat(multiple).concat(disabled,' autocomplete="off"/>')),container.append("<label>".concat(this.input[0].outerHTML,"</label>")),this.api=this.input.fileupload(column.editorOptions).data("fileupload"),this.input.closest("td").addClass("is-fileupload").find("label:eq(1)").addClass("audible")},this.val=function(v){return v?(v=xssUtils.stripTags(v),this.input.attr("value",v),v):this.input.val()},this.focus=function(){var handleClear=function handleClear(){""!==_this7.originalValue&&(_this7.status="clear"),grid.commitCellEdit(_this7.input)},openFileChooserWindow=function openFileChooserWindow(){_this7.api&&(!function handleCancel(){$("body").one("focusin.fileuploadeditor",(function(){setTimeout((function(){"change"!==_this7.status&&(_this7.status="cancel",grid.commitCellEdit(_this7.input))}),100)}))}(),_this7.api.fileInput.trigger("click"))};if(_this7.input.on("change.fileuploadeditor",(function(){_this7.status="change",grid.commitCellEdit(_this7.input)})),"keydown"===event.type){var key=event.which||event.keyCode||event.charCode||0;8===key||46===key?handleClear():13===key||10===key?openFileChooserWindow():grid.commitCellEdit(_this7.input)}if("click"===event.type){var target=$(event.target);target.is(".icon-close")?handleClear():target.is(".icon-fileupload")?openFileChooserWindow():grid.commitCellEdit(_this7.input)}},this.destroy=function(){_this7.input.off("change.fileuploadeditor"),grid.quickEditMode=!1,_this7.api&&_this7.api.destroy()},this.init()},Time:function Time(row,cell,value,container,column,event,grid){this.name="time",this.originalValue=value,this.init=function(){this.input=$('<input class="timepicker" autocomplete="off" />').appendTo(container),this.api=this.input.timepicker(column.editorOptions||"").data("timepicker")},this.val=function(v){return v&&this.input.val(v),this.input.val()},this.focus=function(){var self=this;this.input.select().focus(),"click"===event.type&&$(event.target).is(".icon")&&(this.input.parent().find(".icon").trigger("click"),this.input.closest("td").addClass("is-focused")),this.api.trigger.on("hide.editortime",(function(){self.input.closest("td").removeClass("is-focused"),setTimeout((function(){self.input.trigger("focusout"),container.parent().focus(),grid.setNextActiveCell(event)}),1)}))},this.destroy=function(){var self=this;self.api&&self.api.trigger&&self.api.trigger.off("hide.editortime"),setTimeout((function(){grid.quickEditMode=!1,self.input.remove()}),0)},this.init()},Lookup:function Lookup(row,cell,value,container,column,event,grid,rowData){this.name="lookup",this.originalValue=value,this.init=function(){this.input=$('<input class="lookup '.concat("right"===column.align?"align-text-right":"",'" data-init="false" autocomplete="off" />')).appendTo(container),addStandardInputFeatures(this.input,row,cell,value,0,column,0,0,rowData),this.input.lookup(column.editorOptions),container.find("span.trigger").attr("tabindex","-1"),this.input.data("lookup").settings.clickArguments={column:column,container:container,grid:grid,cell:cell,event:event,row:row,rowData:rowData,value:value}},this.val=function(v){return v?this.input.val(v):this.input.val()},this.focus=function(){var api=this.input.data("lookup"),td=this.input.closest("td");"keydown"===event.type&&(this.input.select().focus(),td.on("keydown.editorlookup",(function(e){40===e.keyCode&&(e.preventDefault(),e.stopPropagation())}))),"click"===event.type&&($(event.target).is("svg")?api.openDialog(event):(this.input.select().focus(),td.on("touchcancel.editorlookup touchend.editorlookup",".trigger",(function(){api.openDialog()})))),this.input.on("change.editorlookup",(function(){grid.quickEditMode=!1}))},this.destroy=function(){var self=this,td=this.input.closest("td");setTimeout((function(){grid.quickEditMode=!1,td.off("keydown.editorlookup").find(".trigger").off("touchcancel.editorlookup touchend.editorlookup"),self.input.remove()}),0)},this.init()},Autocomplete:function Autocomplete(ow,cell,value,container,column,event,grid){this.name="autocomplete",this.originalValue=value,this.init=function(){this.input=$('<input class="autocomplete datagrid-autocomplete" autocomplete="off" />').appendTo(container),column.editorOptions||(column.editorOptions={}),column.editorOptions.width=container.parent().width(),column.editorOptions.offset={left:-1,top:"medium"===grid.settings.rowHeight?1:5},column.maxLength&&this.input.attr("maxlength",column.maxLength),column.uppercase&&this.input.addClass("uppercase-text"),this.input.autocomplete(column.editorOptions)},this.val=function(v){return v?this.input.val(v):this.input.val()},this.focus=function(){grid.quickEditMode=!0,this.input.select().focus()},this.destroy=function(){var _this8=this;setTimeout((function(){grid.quickEditMode=!1,_this8.input.remove()}),0)},this.init()},Spinbox:function Spinbox(ow,cell,value,container,column,event,grid){this.name="spinbox",this.originalValue=value,this.useValue=!0,this.init=function(){if(column.inlineEditor)this.input=container.find("input");else{var markup='<label for="spinbox-'.concat(cell,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(cell,'" name="spinbox-').concat(cell,'" type="text" class="spinbox" value="\'+ ').concat(value,' +\'" autocomplete="off" />\n        <span class="spinbox-control up">+</span></span>');DOM.append(container,markup,"<label><span><input>"),this.input=container.find("input"),column.editorOptions||(column.editorOptions={}),this.input.spinbox(column.editorOptions)}},this.val=function(v){return v&&this.input.val(v),parseInt(this.input.val(),10)},this.focus=function(){grid.quickEditMode=!0,this.input.select().focus()},this.destroy=function(){var _this9=this;column.inlineEditor||setTimeout((function(){grid.quickEditMode=!1;var textVal=_this9.val();_this9.input&&_this9.input.data("spinbox")&&_this9.input.data("spinbox").destroy(),_this9.input&&_this9.input.remove(),container.text(textVal)}),0)},this.init()},Favorite:function Favorite(row,cell,value,container,column,event,grid){this.name="favorite",this.useValue=!0,this.originalValue=value,this.init=function(){this.input=$('<span class="icon-favorite">'.concat($.createIcon({icon:value?"star-filled":"star-outlined"}),'<input type="checkbox"></span>')).appendTo(container),this.input=this.input.find("input")},this.val=function(v){var isChecked;if(void 0===v)return this.input.prop("checked");isChecked=column.isChecked?column.isChecked(v):v,"click"!==event.type&&("keydown"!==event.type||32!==event.keyCode)||$(event.target).is(".datagrid-cell-wrapper")||(isChecked=!isChecked,grid.setNextActiveCell(event)),this.input.prop("checked",isChecked),this.input.find("use").attr("href",isChecked?"#icon-star-filled":"#icon-star-outlined")},this.focus=function(){this.input.trigger("focusout").focus()},this.destroy=function(){var _this10=this;setTimeout((function(){_this10.input.parent().remove()}),0)},this.init()}},excel={cleanExtra:function(customDs,self){var table=[];if(table=!self&&customDs?excel.datasetToHtml(customDs):excel.appendRows(self.settings.dataset,self.table[0].cloneNode(!0),self),!customDs&&!table[0].querySelector("thead")){for(var tbody=table[0].querySelector("tbody"),header=table[0].createTHead(),row=header.insertRow(0),allHeaderNodes=self.headerNodes(),i=0;i<allHeaderNodes.length;i++){var headerNode=allHeaderNodes[i],cell=row.insertCell(i);cell.innerHTML=headerNode.querySelector(".datagrid-header-text").textContent.trim(),cell.setAttribute("class",headerNode.classList),cell.setAttribute("id",headerNode.getAttribute("id")),headerNode.getAttribute("data-exportable")&&cell.setAttribute("data-exportable",headerNode.getAttribute("data-exportable"))}tbody.parentNode.insertBefore(header,tbody)}(table=function clean(table){var removeNode=function removeNode(node){node.parentNode&&node.parentNode.removeChild(node)},nonExportables=[];return[].slice.call(table[0].querySelectorAll("tr")).forEach((function(row){row.classList.contains("is-hidden")||row.classList.contains("datagrid-expandable-row")?removeNode(row):[].slice.call(row.querySelectorAll("th, td, div, span")).forEach((function(el){if(el.classList.contains("is-hidden"))removeNode(el);else{var attrExportable=el.getAttribute("data-exportable");if(attrExportable&&"no"===attrExportable){var index=parseInt(el.id.slice(-1),10);return nonExportables.push(index+1),void removeNode(el)}var attrAriaColindex=el.getAttribute("aria-colindex");if("td"===el.tagName.toLowerCase()&&attrAriaColindex&&-1!==nonExportables.indexOf(parseInt(attrAriaColindex,10)))removeNode(el);else{for([].slice.call(el.querySelectorAll(".is-hidden, .datagrid-expand-btn, .is-draggable-target, .handle, .sort-indicator, .datagrid-filter-wrapper")).forEach((function(innerEl){return removeNode(innerEl)}));el.attributes.length>0;)el.removeAttribute(el.attributes[0].name);var text=el.textContent;"="===text.substr(0,1)&&""!==text.substr(1,1)&&(el.textContent="'".concat(text,"'"))}}}))})),table}(table),self&&self.settings.exportConvertNegative)&&[].slice.call(table[0].querySelectorAll("td")).forEach((function(td){td.textContent=td.textContent.replace(/^(.+)(-$)/,"$2$1")}));return table},save:function(content,fileName){var ext=(fileName.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],isTypeExcel="string"==typeof ext&&/\b(xlsx|xls)\b/g.test(ext);if("ie"===Environment.browser.name||"edge"===Environment.browser.name){if(window.navigator.msSaveBlob){var blob=new Blob([content],{type:"application/csv;charset=utf-8;"});navigator.msSaveBlob(blob,fileName)}}else if(window.URL.createObjectURL){var _blob=new Blob([content],{type:"application/".concat(isTypeExcel?"vnd.ms-excel":"csv",";charset=utf-8;")}),objectUrl=URL.createObjectURL(_blob),link=document.createElement("a");link.href=objectUrl,link.download=fileName,document.body.appendChild(link),link.click(),document.body.removeChild(link),URL.revokeObjectURL(objectUrl)}else{var _link=document.createElement("a");_link.href=this.base64(content),_link.download=fileName,document.body.appendChild(_link),_link.click(),document.body.removeChild(_link)}},datasetToHtml:function(dataset){for(var tableHtml="<tbody>",_loop=function _loop(i,l){tableHtml+="<tr>",Object.keys(dataset[i]).forEach((function(key,index){dataset[i]&&Object.prototype.hasOwnProperty.call(dataset[i],key)&&(tableHtml+="<td>".concat(dataset[i][key],"</td>"))})),tableHtml+="</tr>"},i=0,l=dataset.length;i<l;i++)_loop(i);return tableHtml+="</tbody>",$("<table></table>").append(tableHtml)}};excel.appendRows=function(dataset,table,self){var tableJq=function isjQuery(obj){return obj&&(obj instanceof jQuery||obj.constructor.prototype.jquery)}(table)?table:$(table);table=tableJq[0];var tableHtml="",body=table.querySelector("tbody");body.innerHTML="";return dataset.forEach((function(d,i){!function appendRow(d,i){if(!d._isFilteredOut){var rowHtml=self.rowHtml(d,i,i,!1,!1,i,!0),tr=document.createElement("tr");if(tr.innerHTML=rowHtml.left+rowHtml.center+rowHtml.right,tableHtml+=tr.outerHTML,d.children)for(var j=0,l=d.children.length;j<l;j++)appendRow(d.children[j],j)}}(d,i)})),body.insertAdjacentHTML("beforeend",tableHtml),tableJq},excel.base64=function(s){return window.btoa?"data:application/vnd.ms-excel;base64,".concat(window.btoa(unescape(encodeURIComponent(s)))):"data:application/vnd.ms-excel;,".concat(unescape(encodeURIComponent(s)))},excel.copyToDataSet=function(pastedData,rowCount,colIndex,dataSet,self){for(var validateFields=function validateFields(values,settings,rowData,idx){for(var j=0,l=values.length;j<l;j++){var col=settings.columns[idx];col.formatter!==formatters.Readonly&&(col.editor.name===editors.Input.name?("integer"===col.filterType||"decimal"===col.filterType||"number"===col.filterType)&&isNaN(values[j].trim())||(rowData[col.field]=values[j]):col.editor.name===editors.Input.name&&(isNaN(Date.parse(values[j]))||(rowData[col.field]=new Date(values[j])))),idx++}},pastedDataLen=pastedData.length,columnsLen=self.settings.columns.length,i=0;i<pastedDataLen;i++){var rawVal=pastedData[i].split("\t"),startColIndex=colIndex;if(rowCount<dataSet.length){var currentRowData=dataSet[rowCount];validateFields(rawVal,self.settings,currentRowData,startColIndex)}else{for(var newRowData={},k=0;k<columnsLen;k++)newRowData[self.settings.columns[k].field]="";validateFields(rawVal,self.settings,newRowData,startColIndex),dataSet.push(newRowData)}rowCount++}self.renderRows(),self.syncSelectedUI(),self.pagerRefresh("bottom")},excel.exportToExcel=function(fileName,worksheetName,customDs,self){var ctx={worksheet:worksheetName||"Worksheet",table:excel.cleanExtra(customDs,self)[0].innerHTML};fileName="".concat(fileName||self.element[0].id||"Export",".xls"),excel.save(function formatExcel(s,c){return s.replace(/{(\w+)}/g,(function(m,p){return c[p]}))}('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:Panes></x:Panes><x:DisplayGridlines></x:DisplayGridlines></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<meta http-equiv="content-type" content="text/plain; charset=UTF-8"/></head><body><table border="1px solid #999999">{table}</table></body></html>',ctx),fileName)},excel.exportToCsv=function(fileName,customDs){var sep=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sep=,",self=arguments.length>3?arguments[3]:void 0,isObject=function isObject(v){return v&&"object"===_typeof(v)&&v.constructor===Object},isFalse=function isFalse(v){return/^(false|0+|null)$/gi.test(v)},separator={firstLine:!0,char:","};if("sep=,"!==sep&&!isFalse(sep)){var setChar=function setChar(char){return'"'!==char?char:separator.char};if(isObject(sep))separator.firstLine=!isFalse(sep.firstLine),"string"!=typeof sep.char||1!==sep.char.length||isFalse(sep.char)||(separator.char=setChar(sep.char));else if("string"==typeof sep)if(1!==sep.length||isFalse(sep)){if(/^sep=.$/.test(sep)){var char=sep.replace("sep=","");separator.char=isFalse(char)?separator.char:setChar(char)}}else separator.char=setChar(sep)}var formatCsv=function formatCsv(table){var csv=[];return[].slice.call(table[0].querySelectorAll("tr")).forEach((function(row){var rowContent=[];[].slice.call(row.querySelectorAll("td, th")).forEach((function(col){return rowContent.push(col.textContent.replace(/\r?\n|\r/g,"").replace(/"/g,'""').trim())})),csv.push(rowContent.join('"'.concat(separator.char,'"')))})),separator.firstLine&&csv.unshift(["sep=".concat(separator.char)]),'"'.concat(csv.join('"\n"'),'"')},table=excel.cleanExtra(customDs,self);fileName="".concat(fileName||self.element[0].id||"Export",".csv"),excel.save(formatCsv(table),fileName)};var equals,keys,where,group,groupBy=(equals=utils.equals,keys=function keys(data,names){return data.reduce((function(memo,item){var key=function pick(obj,names){for(var chosen={},i=0,l=names.length;i<l;i++)chosen[names[i]]=obj[names[i]];return chosen}(item,names);return function has(obj,target){return obj.some((function(value){return equals(value,target)}))}(memo,key)||memo.push(key),memo}),[])},where=function where(data,names){var chosen=[];return data.map((function(item,idx){for(var prop in names)if(names[prop]!==item[prop])return;item.idx=idx,chosen.push(item)})),chosen},(group=function group(data,names){return keys(data,names).map((function(stem){return{key:stem,values:where(data,stem).map((function(item){return item}))}}))}).register=function(name,converter){return group[name]=function(data,names,extra){return this.extra=extra,group(data,names).map(converter,this)}},group);groupBy.register("none",(function(item){return $.extend({},item.key,{values:item.values})})),groupBy.register("sum",(function(item){var extra=this.extra;return $.extend({},item.key,{values:item.values},{sum:item.values.reduce((function(memo,node){return memo+Number(node[extra])}),0)})})),groupBy.register("max",(function(item){var extra=this.extra;return $.extend({},item.key,{values:item.values},{max:item.values.reduce((function(memo,node){return Math.max(memo,Number(node[extra]))}),Number.NEGATIVE_INFINITY)})})),groupBy.register("list",(function(item){var extra=this.extra;return $.extend({},item.key,{values:item.values},{list:item.values.map((function(thisItem){for(var list=[],i=0,l=extra.list.length;i<l;i++){var exclude=!!extra.exclude&&thisItem[extra.exclude];thisItem[extra.list[i]]&&!exclude&&list.push({value:thisItem[extra.list[i]],key:extra.list[i]})}return list}))})}));var aggregators={aggregate:function(items,columns){for(var totals={},self=this,i=0,l=columns.length;i<l;i++)columns[i].aggregator&&function(){var field=columns[i].field;self.sum=function(sum,node){if(node._isFilteredOut)return sum;var value;value=field.indexOf(".")>-1?field.split(".").reduce((function(o,x){return o?o[x]:""}),node):node[field],value=Number(value);var valuePlaces=numberUtils.decimalPlaces(value),sumPlaces=numberUtils.decimalPlaces(sum);return Number((sum+value).toFixed(Math.max(valuePlaces,sumPlaces)))};var total=items.reduce(self[columns[i].aggregator],0);if(field.indexOf(".")>-1)for(var currentObj=totals,j=0,k=field.split(".").length;j<k;j++)j===field.split(".").length-1?currentObj[field.split(".")[j]]=total:(field.split(".")[j]in currentObj||(currentObj[field.split(".")[j]]={}),currentObj=currentObj[field.split(".")[j]]);else totals[field]=total}();return totals}},DATAGRID_DEFAULTS={actionableMode:!1,cellNavigation:!0,rowNavigation:!0,showHoverState:!0,alternateRowShading:!1,columns:[],frozenColumns:{left:[],right:[],expandRowAcrossAllCells:!0},dataset:[],columnReorder:!1,saveColumns:!1,saveUserSettings:{},focusAfterSort:!1,editable:!1,isRowDisabled:null,isList:!1,menuId:null,headerMenuId:null,menuSelected:null,menuBeforeOpen:null,headerMenuSelected:null,headerMenuBeforeOpen:null,uniqueId:null,rowHeight:"normal",fixedRowHeight:null,selectable:!1,selectChildren:!0,onBeforeSelect:null,allowSelectAcrossPages:null,groupable:null,showNewRowIndicator:!0,stretchColumn:null,stretchColumnOnChange:!1,twoLineHeader:!1,clickToSelect:!0,toolbar:!1,initializeToolbar:!0,columnIds:[],paging:!1,pagesize:25,pagesizes:[10,25,50,75],showPageSizeSelector:!0,indeterminate:!1,source:null,hidePagerOnOnePage:!1,filterable:!1,filterWhenTyping:!0,disableClientFilter:!1,disableClientSort:!1,resultsText:null,showFilterTotal:!0,virtualized:!1,virtualRowBuffer:10,rowReorder:!1,showDirty:!1,resizeMode:"flex",showSelectAllCheckBox:!0,allowOneExpandedRow:!0,enableTooltips:!1,disableRowDeactivation:!1,sizeColumnsEqually:!1,expandableRow:!1,exportConvertNegative:!1,columnGroups:null,treeGrid:!1,onPostRenderCell:null,onDestroyCell:null,onEditCell:null,onExpandRow:null,onExpandChildren:null,onCollapseChildren:null,onKeyDown:null,emptyMessage:{title:Locale?Locale.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"},searchExpandableRow:!0,allowChildExpandOnMatch:!1};function Datagrid(element,settings){this.settings=utils.mergeSettings(element,settings,DATAGRID_DEFAULTS),this.element=$(element),settings.dataset&&(this.settings.dataset=settings.dataset),void 0===this.settings.frozenColumns.expandRowAcrossAllCells&&(this.settings.frozenColumns.expandRowAcrossAllCells=DATAGRID_DEFAULTS.frozenColumns.expandRowAcrossAllCells),this.init()}Datagrid.prototype={get pagerAPI(){var api;return this.tableBody&&this.tableBody.length&&(api=this.tableBody.data("pager")),api},get pager(){return warnAboutDeprecation("pagerAPI","pager"),this.pagerAPI},init:function init(){var html=$("html");this.isTouch=Environment.features.touch,this.isSafari=html.is(".is-safari"),this.isWindows=-1!==navigator.userAgent.indexOf("Windows"),this.isInModal=!1,this.appendTooltip(),this.initSettings(),this.setOriginalColumns(),this.removeToolbarOnDestroy=!1,this.nonVisibleCellErrors=[],this.recordCount=0,this.canvas=null,this.totalWidths={left:0,center:0,right:0},this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.editor=null,this.activeCell={node:null,cell:null,row:null},this.dontSyncUi=!1,this.widthPercent=!1,this.rowSpans=[],this.filterRowRendered=!1,this.scrollLeft=0,this.scrollTop=0,this._selectedRows=[],this.restoreColumns(),this.restoreUserSettings(),this.appendToolbar(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.firstRender(),this.handleEvents(),this.handleKeys(),this.element.trigger("rendered",[this.element,this.element.find("thead"),this.pagerBar])},initSettings:function initSettings(){this.ignoredColumnById("rowStatus"),this.setInlineActionableMode(),this.sortColumn={sortField:null,sortAsc:!0},this.gridCount=$(".datagrid").length+1,this.lastSelectedRow=0,this.contextualToolbar=this.element.prev(".contextual-toolbar"),this.contextualToolbar.addClass("datagrid-contextual-toolbar")},ignoredColumnById:function ignoredColumnById(columnId){var s=this.settings;if(columnId&&s.columns&&(!s.columns||s.columns.length)){for(var column={index:-1},i=0,l=s.columns.length;i<l;i++)s.columns[i].id===columnId&&(column.index=i);column.index>-1&&s.columns.splice(column.index,1)}},setInlineActionableMode:function setInlineActionableMode(){var s=this.settings;if(s.columns&&(!s.columns||s.columns.length)){for(var column={index:-1},i=0,l=s.columns.length;i<l;i++)s.columns[i].inlineEditor&&(column.index=i);this.inlineMode=column.index>-1,this.inlineMode?(this.element[0].classList.add("has-inline-editor"),this.settings.actionableMode=!0):this.element[0].classList.remove("has-inline-editor")}},render:function render(isToggleFilter,pagingInfo){if(pagingInfo||(pagingInfo={}),isToggleFilter&&(pagingInfo.type="filterrow"),this.settings.source)return pagingInfo.preserveSelected=this.settings.allowSelectAcrossPages,void this.triggerSource(pagingInfo);this.loadData(this.settings.dataset,pagingInfo)},firstRender:function firstRender(){(this.hasLeftPane=this.settings.frozenColumns.left.length>0,this.hasRightPane=this.settings.frozenColumns.right.length>0,this.hasLeftPane&&(this.bodyWrapperLeft=$('<div class="datagrid-wrapper left"></div>'),this.tableLeft=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperLeft),this.element.append(this.bodyWrapperLeft)),this.bodyWrapperCenter=$('<div class="datagrid-wrapper center scroll-x'.concat(this.hasRightPane?"":" scroll-y",'"></div>')),this.table=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperCenter),this.element.append(this.bodyWrapperCenter),this.hasRightPane&&(this.bodyWrapperRight=$('<div class="datagrid-wrapper right scroll-y"></div>'),this.tableRight=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperRight),this.element.append(this.bodyWrapperRight)),this.element.removeClass("datagrid").addClass("datagrid-container").attr("x-ms-format-detection","none"),"normal"!==this.settings.rowHeight&&(this.hasLeftPane&&this.tableLeft.addClass("".concat(this.settings.rowHeight,"-rowheight")),this.table.addClass("".concat(this.settings.rowHeight,"-rowheight")),this.hasRightPane&&this.tableRight.addClass("".concat(this.settings.rowHeight,"-rowheight")),this.element.addClass("".concat(this.settings.rowHeight,"-rowheight"))),this.settings.isList?$(this.element).addClass("is-gridlist"):$(this.element).removeClass("is-gridlist"),this.table.empty(),this.clearCache(),this.container=this.element.closest(".datagrid-container"),this.renderRows(),this.renderHeader(),this.stretchColumnDiff<0)&&(this.bodyColGroup.find("col").eq(this.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px"));this.settings.emptyMessage&&(this.setEmptyMessage(this.settings.emptyMessage),this.checkEmptyMessage()),this.buttonSelector=".btn, .btn-secondary, .btn-primary, .btn-modal-primary, .btn-tertiary, .btn-icon, .btn-actions, .btn-menu, .btn-split",$(this.buttonSelector,this.table).button(),this.handlePaging(),this.triggerSource("initial")},addRow:function addRow(data,location){var args,rowNode,_this=this,self=this,isTop=!1,row=0;location&&"top"!==location||(location="top",isTop=!0);var newRowStatus={icon:"new",text:Locale.translate("New"),tooltip:Locale.translate("New")};(data=data||{}).rowStatus=data.rowStatus||newRowStatus,this.saveDirtyRows();var dataset=this.settings.dataset;if(this.settings.groupable){dataset=this.originalDataset||dataset;var targetIndex=-1;if("string"==typeof location){var field=this.settings.groupable.fields[0],idx=function getIndexByKey(array,key,value,isReverse){for(var i=0,l=array.length;i<l;i++){var idx=isReverse?l-1-i:i;if(array[idx][key]===value)return idx}return-1}(dataset,field,data[field],!isTop);targetIndex=idx>-1?isTop?idx:idx+1:0,dataset.splice(targetIndex,0,data),row=targetIndex}else dataset.splice(location,0,data),row=location}else"string"==typeof location?(dataset[isTop?"unshift":"push"](data),row=isTop?row:dataset.length-1):(dataset.splice(location,0,data),row=location);this.restoreDirtyRows(),this.setRowGrouping(),this.settings.groupable||this.pagerRefresh(location),this._selectedRows.forEach((function(selected){void 0!==selected.pagingIdx&&selected.pagingIdx>=row&&(selected.idx++,selected.pagingIdx++)})),this.clearCache(),this.renderRows(),this.settings.groupable&&(rowNode=this.dataRowNode(row),row=this.visualRowIndex(rowNode)),this.syncSelectedUI(),setTimeout((function(){self.setActiveCell(row,0),_this.settings.groupable||(rowNode=_this.visualRowNode(row)),args={row:row,cell:0,target:rowNode,value:data,oldValue:{}},self.element.triggerHandler("addrow",args)}),100)},pagerRefresh:function pagerRefresh(location,savePage){if(this.pagerAPI){var pagingInfo={};"string"==typeof location?pagingInfo.activePage="top"===location?1:this.pagerAPI.state.pages:"number"==typeof location&&(pagingInfo.activePage=Math.floor(location/(this.pagerAPI.settings.pagesize+1))),this.settings.source||(pagingInfo.total=this.settings.dataset.length,pagingInfo.pagesize=this.settings.pagesize),savePage&&(pagingInfo.activePage=this.settings.pagesize*this.pagerAPI.activePage>this.settings.dataset.length?1:this.pagerAPI.activePage),this.renderPager(pagingInfo,!0)}},removeRow:function removeRow(row,noSync,noTrigger){var rowNode=this.tableBody.find('tr[aria-rowindex="'.concat(row+1,'"]')),arrayToUse=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset,rowData=arrayToUse[row];this.saveDirtyRows(),this.unselectRow(row,noSync),arrayToUse.splice(row,1),this.restoreDirtyRows(),this.settings.selectable&&!this.settings.groupable&&this.settings.groupable&&this.originalDataset&&this.syncDatasetWithSelectedRows(),this.preventSelection=!0,noSync||(this.setRowGrouping(),this.pagerRefresh("top",!0),this.clearCache(),this.renderRows()),0!==this.nonVisibleCellErrors.length&&(this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,(function(error){return error.row!==row})),this.showNonVisibleCellErrors()),delete this.preventSelection,this.syncSelectedUI();var args={row:row,cell:null,target:rowNode,item:rowData,oldValue:rowData};return noTrigger?args:(this.element.trigger("rowremove",args),!0)},removeSelected:function removeSelected(isTrigger){this._selectedRows.sort((function(a,b){return a.idx<b.idx?-1:a.idx>b.idx?1:0}));for(var args=[],i=this._selectedRows.length-1;i>=0;i--)args.push({row:this._selectedRows[i].idx,item:this._selectedRows[i],cell:null,target:null}),this.removeRow(this._selectedRows[i].idx,i>0,isTrigger);isTrigger&&this.element.trigger("rowremove",args)},updateDataset:function updateDataset(dataset,pagerInfo){if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var searchField=this.element.parent().find(".toolbar").find(".searchfield");searchField.val(""),searchField.parent().removeClass("has-text"),this.clearFilter()}this.loadData(dataset,pagerInfo)},triggerSource:function triggerSource(pagerType,callback,op){if(this.settings.source){var self=this,pagingInfo={};this.pagerAPI&&(pagingInfo=this.pagerAPI.state),"string"==typeof pagerType?(pagingInfo.type=pagerType,pagingInfo.trigger=op):pagerType&&(pagingInfo=utils.extend({},pagingInfo,pagerType)),callback&&"function"!=typeof callback&&"string"==typeof callback.type&&(pagingInfo.type=callback.type),!1!==this.element.triggerHandler("beforepaging",pagingInfo)&&(this.sortColumn&&this.sortColumn.sortId&&(pagingInfo.sortAsc=this.sortColumn.sortAsc,pagingInfo.sortField=this.sortColumn.sortField,pagingInfo.sortId=this.sortColumn.sortId),this.filterExpr&&this.filterExpr.length&&(pagingInfo.filterExpr=this.filterExpr),this.element.trigger("paging",pagingInfo),this.settings.source(pagingInfo,(function response(data,updatedPagingInfo){updatedPagingInfo.activePage>-1&&(self.activePage=updatedPagingInfo.activePage),updatedPagingInfo.grandTotal&&(self.grandTotal=updatedPagingInfo.grandTotal),self.loadData(data,updatedPagingInfo),callback&&"function"==typeof callback&&callback(!0),self.element.trigger("afterpaging",pagingInfo),self.afterPaging(pagingInfo)})))}},afterPaging:function afterPaging(pagingInfo){this.settings.paging&&(this.settings.source&&(this.pagerAPI&&this.pagerAPI.hidePagerBar(pagingInfo)?this.element.removeClass("paginated"):this.element.addClass("paginated"),pagingInfo.total&&(this.recordCount=pagingInfo.total,this.displayCounts(pagingInfo.total))),!this.settings.source&&this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value))},loadData:function loadData(dataset,pagerInfo){this.settings.dataset=dataset,pagerInfo||(pagerInfo={}),"filterrow"===pagerInfo.type&&(pagerInfo.activePage=this.pagerAPI&&this.pagerAPI.activePage||1,pagerInfo.pagesize=this.settings.pagesize,pagerInfo.total=pagerInfo.total||-1,pagerInfo.type="filterrow"),pagerInfo.activePage||(pagerInfo.activePage=1,pagerInfo.pagesize=this.settings.pagesize,pagerInfo.total=-1,this.settings.treeGrid&&(pagerInfo.preserveSelected=!0)),this.settings.source&&pagerInfo.grandTotal?this.grandTotal=pagerInfo.grandTotal:this.grandTotal=null,this.pagerAPI&&this.settings.showDirty&&this.settings.source&&/first|last|next|prev|sorted/.test(pagerInfo.type)&&(this.dirtyArray=void 0),this.settings.groupable&&this.settings.dataset[0]&&!this.settings.dataset[0].values&&(this._selectedRows=[],this.originalDataset=null,this.clearDirty()),this.setTreeDepth(),this.settings.source&&(this.originalDataset=null,this.setRowGrouping()),this.setTreeRootNodes(),pagerInfo.preserveSelected||!this.settings.source||this.settings.allowSelectAcrossPages||this.unSelectAllRows(),pagerInfo.preserveSelected||"initial"!==pagerInfo.type&&pagerInfo.type||this.unSelectAllRows(),this.settings.disableClientFilter&&(this.restoreFilter=!0,this.restoreSortOrder=!0,this.savedFilter=this.filterConditions()),"initial"===pagerInfo.type?(this.clearCache(),this.restoreUserSettings(),this.renderRows(),this.renderHeader()):0===this.element.find(".datagrid-filter-wrapper .is-open").length?(this.clearCache(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.renderRows()):(this.clearCache(),this.renderRows()),this.cellNode(0,0,!0).attr("tabindex","0"),this.renderPager(pagerInfo,!0),this.displayCounts()},uniqueId:function uniqueId(suffix){return suffix=null==suffix?"":suffix,(this.settings.uniqueId?"".concat(this.settings.uniqueId,"-").concat(suffix):"".concat(window.location.pathname.split("/").pop().replace(/\.xhtml|\.shtml|\.html|\.htm|\.aspx|\.asp|\.jspx|\.jsp|\.php/g,"").replace(/[^-\w]+/g,"").replace(/\./g,"-").replace(/ /g,"-").replace(/%20/g,"-"),"-").concat(this.element.attr("id")||"datagrid","-").concat(this.gridCount||0).concat(suffix)).replace(/--/g,"-")},visibleColumns:function visibleColumns(skipBuiltIn){for(var visible=[],j=0;j<this.settings.columns.length;j++){var column=this.settings.columns[j];column.hidden||(skipBuiltIn&&"selectionCheckbox"===column.id||visible.push(column))}return visible},getColumnGroup:function getColumnGroup(idx){for(var total=0,colGroups=this.settings.columnGroups,l=0;l<colGroups.length;l++)if(!colGroups[l].hidden&&(total+=colGroups[l].colspan)>=idx)return this.uniqueId("-header-group-".concat(l));return""},updateColumnGroup:function updateColumnGroup(){var colGroups=this.settings.columnGroups;if(this.originalColGroups||(this.originalColGroups=utils.deepCopy(colGroups)),this.settings.groupable)for(var groupHeaders=this.tableBody.find(".datagrid-rowgroup-header"),newColspan=this.visibleColumns().length,_i=0;_i<groupHeaders.length;_i++)groupHeaders[_i].children[0].setAttribute("colspan",newColspan);else if(colGroups&&this.colGroups){var diff,headGroups=[].slice.call(this.colGroups[0].querySelectorAll("th")),columns=this.settings.columns,columnsLen=columns.length,visibleColumnsLen=this.visibleColumns().length,groups=colGroups.map((function(group){return parseInt(group.colspan,10)})),getGroupsTotal=function getGroupsTotal(){return groups.reduce((function(a,b){return a+b}),0)},getDiff=function getDiff(){var groupsTotal=getGroupsTotal();return groupsTotal>columnsLen?groupsTotal-columnsLen:columnsLen-groupsTotal};if(getGroupsTotal()>columnsLen)for(var move=!0,_i2=groups.length-1;_i2>=0&&move;_i2--)diff=getDiff(),groups[_i2]>=diff?(groups[_i2]-=diff,move=!1):groups[_i2]=0;var i=0,total=0;if(groups.forEach((function(groupColspan,k){for(var colspan=groupColspan,l=i+groupColspan;i<l;i++)i<columnsLen&&columns[i].hidden&&colspan--;colspan>0&&(total+=colspan);var groupHeaderEl=headGroups[k];groupHeaderEl.setAttribute("colspan",colspan>0?colspan:1),colGroups[k].hidden||colspan<1?groupHeaderEl.classList.add("hidden"):groupHeaderEl.classList.remove("hidden")})),total<visibleColumnsLen){var groupHeaderEl=headGroups[headGroups.length-1];diff=visibleColumnsLen-total,groupHeaderEl.setAttribute("colspan",diff>0?diff:1)}}},updateGroupHeadersAfterColumnReorder:function updateGroupHeadersAfterColumnReorder(indexFrom,indexTo){var colGroups=this.settings.columnGroups;if(colGroups){this.originalColGroups||(this.originalColGroups=utils.deepCopy(colGroups));var groups=colGroups.map((function(group){return parseInt(group.colspan,10)})),changed={from:null,to:null,total:0};groups.forEach((function(colspan,i){changed.total+=colspan,changed.total>indexFrom&&null===changed.from&&(changed.from=i),changed.total>indexTo&&null===changed.to&&(changed.to=i)})),changed.from!==changed.to&&(colGroups[changed.from].colspan-=1,colGroups[changed.to].colspan+=1)}},headerText:function headerText(col){var text=col.name?col.name:"";return text||"drilldown"!==col.id?text:(text=Locale.translate("Drilldown"),'<span class="audible">'.concat(text,"</span>"))},getContainer:function getContainer(id){return this.settings.frozenColumns.left&&this.settings.frozenColumns.left.indexOf(id)>-1?"left":this.settings.frozenColumns.right&&this.settings.frozenColumns.right.indexOf(id)>-1?"right":"center"},renderHeader:function renderHeader(){var uniqueId,self=this,headerRows={left:"",center:"",right:""},colGroups=this.settings.columnGroups;if(colGroups){this.element.addClass("has-group-headers");var diff,columns=this.settings.columns,columnsLen=columns.length,visibleColumnsLen=this.visibleColumns().length,groups=colGroups.map((function(group){return parseInt(group.colspan,10)})),getGroupsTotal=function getGroupsTotal(){return groups.reduce((function(a,b){return a+b}),0)},getDiff=function getDiff(){var groupsTotal=getGroupsTotal();return groupsTotal>columnsLen?groupsTotal-columnsLen:columnsLen-groupsTotal};if(headerRows.left+='<tr role="row" class="datagrid-header-groups">',headerRows.center+='<tr role="row" class="datagrid-header-groups">',headerRows.right+='<tr role="row" class="datagrid-header-groups">',getGroupsTotal()>columnsLen)for(var move=!0,_i3=groups.length-1;_i3>=0&&move;_i3--)diff=getDiff(),groups[_i3]>=diff?(groups[_i3]-=diff,move=!1):groups[_i3]=0;var i=0,total=0;if(groups.forEach((function(groupColspan,k){for(var colspan=groupColspan,l=i+groupColspan;i<l;i++)i<columnsLen&&columns[i].hidden&&colspan--;var hiddenStr=colGroups[k].hidden||colspan<1?' class="hidden"':"",colspanStr=' colspan="'.concat(colspan>0?colspan:1,'"'),groupedHeaderAlignmentClass=colGroups[k].align?"l-".concat(colGroups[k].align,"-text"):"";uniqueId=self.uniqueId("-header-group-".concat(k)),colspan>0&&(total+=colspan);var container=self.getContainer(self.settings.columns[k].id);headerRows[container]+="<th".concat(hiddenStr).concat(colspanStr,' id="').concat(uniqueId,'" class="').concat(groupedHeaderAlignmentClass,'"><div class="datagrid-column-wrapper"><span class="datagrid-header-text">').concat(colGroups[k].name,"</span></div></th>")})),total<visibleColumnsLen){var colspanStr=' colspan="'.concat((diff=visibleColumnsLen-total)>0?diff:1,'"');self.hasRightPane?headerRows.right+="<th".concat(colspanStr,"></th>"):headerRows.center+="<th".concat(colspanStr,"></th>")}headerRows.left+="</tr><tr>",headerRows.center+="</tr><tr>",headerRows.right+="</tr><tr>"}else headerRows.left+='<tr role="row">',headerRows.center+='<tr role="row">',headerRows.right+='<tr role="row">';for(var j=0;j<this.settings.columns.length;j++){var column=self.settings.columns[j],container=self.getContainer(column.id),id=self.uniqueId("-header-".concat(j)),isSortable=void 0===column.sortable||column.sortable,isResizable=void 0===column.resizable||column.resizable,isExportable=void 0===column.exportable||column.exportable,isSelection="selectionCheckbox"===column.id,headerAlignmentClass=this.getHeaderAlignmentClass(column);(self.hasLeftPane||self.hasRightPane)&&(self.settings.frozenColumns.left&&self.settings.frozenColumns.left.indexOf(column.id)>-1||self.settings.frozenColumns.right&&self.settings.frozenColumns.right.indexOf(column.id)>-1)&&(column.hideable=!1),void 0===column.hideable&&(column.hideable=!0);var cssClass="";cssClass+=isSortable?" is-sortable":"",cssClass+=isResizable?" is-resizable":"",cssClass+=column.hidden?" is-hidden":"",cssClass+=column.filterType?" is-filterable":"",cssClass+="ellipsis"===column.textOverflow?" text-ellipsis":"",cssClass=""!==(cssClass+=""!==headerAlignmentClass?headerAlignmentClass:"")?' class="'.concat(cssClass.substr(1),'"'):"",headerRows[container]+='<th scope="col" role="columnheader" id="'.concat(id,'" data-column-id="').concat(column.id,'"').concat(column.field?' data-field="'.concat(column.field,'"'):"").concat(column.headerTooltip?' title="'.concat(column.headerTooltip,'"'):"").concat(!1===column.reorderable?' data-reorder="false"':"").concat(colGroups?' headers="'.concat(self.getColumnGroup(j),'"'):"",' data-exportable="').concat(isExportable?"yes":"no",'"').concat(cssClass,">");var sortIndicator="";isSortable&&(sortIndicator="".concat('<div class="sort-indicator"><span class="sort-asc">').concat($.createIcon({icon:"dropdown"}),"</span>")+'<span class="sort-desc">'.concat($.createIcon({icon:"dropdown"}),"</div>")),headerRows[container]+='<div class="'.concat(isSelection?"datagrid-checkbox-wrapper ":"datagrid-column-wrapper").concat(headerAlignmentClass,'">\n      <span class="datagrid-header-text').concat(column.required?" required":"",'">').concat(self.headerText(this.settings.columns[j])).concat(" l-center-text"===headerAlignmentClass?sortIndicator:"","</span>"),isSelection&&(self.settings.showSelectAllCheckBox?headerRows[container]+='<span aria-checked="false" class="datagrid-checkbox" aria-label="Selection" role="checkbox"></span>':headerRows[container]+='<span aria-checked="false" class="datagrid-checkbox" aria-label="Selection" role="checkbox" style="display:none"></span>'),isSortable&&" l-center-text"!==headerAlignmentClass&&(headerRows[container]+=sortIndicator),headerRows[container]+="</div>".concat(self.filterRowHtml(column,j),"</th>")}headerRows.left+="</tr>",headerRows.center+="</tr>",headerRows.right+="</tr>",void 0===self.headerRow?(self.hasLeftPane&&(self.headerRowLeft=$('<thead class="datagrid-header left">'.concat(headerRows.left,"</thead>")),self.tableLeft.find("colgroup").after(self.headerRowLeft)),self.headerRow=$('<thead class="datagrid-header center">'.concat(headerRows.center,"</thead>")),self.table.find("colgroup").after(self.headerRow),self.hasRightPane&&(self.headerRowRight=$('<thead class="datagrid-header right">'.concat(headerRows.right,"</thead>")),self.tableRight.find("colgroup").after(self.headerRowRight))):(self.hasLeftPane&&DOM.html(self.headerRowLeft,headerRows.left,"*"),DOM.html(self.headerRow,headerRows.center,"*"),self.hasRightPane&&DOM.html(self.headerRowRight,headerRows.right,"*")),colGroups&&self.headerRow&&(self.colGroups=self.headerRow.find(".datagrid-header-groups")),self.syncHeaderCheckbox(this.settings.dataset),self.setScrollClass(),self.attachFilterRowEvents(),self.settings.columnReorder&&self.createDraggableColumns(),this.restoreSortOrder=!1,this.setSortIndicator(this.sortColumn.sortId,this.sortColumn.sortAsc),this.restoreFilter?(this.restoreFilter=!1,this.applyFilter(this.savedFilter,"restore"),this.savedFilter=null):this.filterExpr&&this.filterExpr.length>0&&this.setFilterConditions(this.filterExpr),this.activeEllipsisHeaderAll()},getHeaderAlignmentClass:function getHeaderAlignmentClass(column){return void 0===column.headerAlign?column.align?" l-".concat(column.align,"-text"):"":" l-".concat(column.headerAlign,"-text")},filterSetDatepicker:function filterSetDatepicker(input,operator,options){var datepickerApi=input.data("datepicker"),isRange=input.data("is-range");options=options||{};var initDatepicker=function initDatepicker(){datepickerApi&&"function"==typeof datepickerApi.destroy&&datepickerApi.destroy(),input.datepicker(options)};datepickerApi&&isRange||"in-range"!==operator?datepickerApi&&!isRange||"in-range"===operator||(options.range={useRange:!1},input.removeData("is-range"),initDatepicker()):(input.data("is-range",!0),options.range={useRange:!0},initDatepicker())},filterRowHtml:function filterRowHtml(columnDef,idx){var filterMarkup="",headerAlignmentClass=this.getHeaderAlignmentClass(columnDef);if(columnDef.filterType){var integerDefaults,col=columnDef,filterId=this.uniqueId("-header-filter-".concat(idx)),filterOptions=Array.isArray(col.filterRowEditorOptions)?col.filterRowEditorOptions:col.options,emptyOption="";if("select"===col.filterType&&filterOptions){for(var found=!1,i=0,l=filterOptions.length;i<l;i++)if(!filterOptions[i].label){found=!0;break}found||(emptyOption="<option></option>")}switch(filterMarkup='<div class="datagrid-filter-wrapper'.concat(headerAlignmentClass,'" ').concat(this.settings.filterable?"":' style="display:none"',">").concat(this.filterButtonHtml(col),'<label class="audible" for="').concat(filterId,'">').concat(col.name,"</label>"),col.filterType){case"checkbox":break;case"date":filterMarkup+="<input ".concat(col.filterDisabled?" disabled":"",' type="text" class="datepicker" id="').concat(filterId,'"/>');break;case"integer":integerDefaults={patternOptions:{allowNegative:!0,allowThousandsSeparator:!1,allowDecimal:!1,symbols:{thousands:Locale.currentLocale.data.numbers?Locale.currentLocale.data.numbers.group:",",decimal:Locale.currentLocale.data.numbers?Locale.currentLocale.data.numbers.decimal:".",negative:Locale.currentLocale.data.numbers?Locale.currentLocale.data.numbers.minusSign:"-"}},process:"number"},col.maskOptions=utils.extend(!0,{},integerDefaults,col.maskOptions),filterMarkup+="<input".concat(col.filterDisabled?" disabled":"",' type="text" id="').concat(filterId,'" />');break;case"percent":case"decimal":var decimalDefaults={patternOptions:{allowNegative:!0,allowDecimal:!0,symbols:{thousands:Locale.currentLocale.data.numbers?Locale.currentLocale.data.numbers.group:",",decimal:Locale.currentLocale.data.numbers?Locale.currentLocale.data.numbers.decimal:".",negative:Locale.currentLocale.data.numbers?Locale.currentLocale.data.numbers.minusSign:"-"}},process:"number"};col.numberFormat?(integerDefaults={patternOptions:{decimalLimit:col.numberFormat.maximumFractionDigits}},col.maskOptions=utils.extend(!0,{},integerDefaults,decimalDefaults,col.maskOptions)):col.maskOptions=utils.extend(!0,{},decimalDefaults,col.maskOptions),filterMarkup+="<input".concat(col.filterDisabled?" disabled":"",' type="text" id="').concat(filterId,'" />');break;case"contents":case"select":if(filterMarkup+='<select id="'.concat(filterId,'" ').concat("select"===col.filterType?'class="dropdown"':'multiple class="multiselect"').concat(col.filterDisabled?" disabled":"",">").concat(emptyOption),filterOptions)for(var _i4=0,_l=filterOptions.length;_i4<_l;_i4++){var option=filterOptions[_i4],optionValue=col.caseInsensitive&&"string"==typeof option.value?option.value.toLowerCase():option.value;option&&""!==optionValue&&(filterMarkup+='<option value = "'.concat(optionValue,'">').concat(option.label,"</option>"))}filterMarkup+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"multiselect":if(filterMarkup+='<select id="'.concat(filterId,'" class="multiselect" multiple').concat(col.filterDisabled?" disabled":"",">"),filterOptions)for(var _i5=0,_l2=filterOptions.length;_i5<_l2;_i5++){var _option=filterOptions[_i5],_optionValue=col.caseInsensitive&&"string"==typeof _option.value?_option.value.toLowerCase():_option.value;_option&&"string"==typeof _option.label&&(filterMarkup+='<option value = "'.concat(_optionValue,'">').concat(_option.label,"</option>"))}filterMarkup+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"time":filterMarkup+="<input ".concat(col.filterDisabled?" disabled":"",' type="text" class="timepicker" id="').concat(filterId,'"/>');break;case"lookup":filterMarkup+="<input ".concat(col.filterDisabled?" disabled":"",' type="text" class="lookup" id="').concat(filterId,'" >');break;default:filterMarkup+="<input".concat(col.filterDisabled?" disabled":"",' type="text" id="').concat(filterId,'"/>')}filterMarkup+="</div>"}return columnDef.filterType||(filterMarkup='<div class="datagrid-filter-wrapper is-empty'.concat(" ".concat(headerAlignmentClass),'"></div>')),filterMarkup},attachFilterRowEvents:function attachFilterRowEvents(){var typingTimer,_this2=this,self=this;this.settings.filterable&&(this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.off("click.datagrid-filter").on("click.datagrid-filter",".btn-filter",(function(){var filterBtn=$(this),popupmenu=filterBtn.data("popupmenu");return popupmenu?popupmenu.close(!0,!0):filterBtn.off("beforeopen.datagrid-filter").on("beforeopen.datagrid-filter",(function(){var menu=filterBtn.next(".popupmenu-wrapper");utils.fixSVGIcons(menu),self.hideTooltip()})).popupmenu({trigger:"immediate",offset:{y:15},placementOpts:{strategies:["flip","nudge"]}}).off("selected.datagrid-filter").on("selected.datagrid-filter",(function(){var rowElem=filterBtn.closest('th[role="columnheader"]'),col=self.columnById(rowElem.attr("data-column-id"))[0];if(col&&"date"===col.filterType){var input=rowElem.find("input"),operator=rowElem.find(".btn-filter .icon-dropdown:first").getIconName().replace("filter-","");self.filterSetDatepicker(input,operator,col.editorOptions)}self.applyFilter(null,"selected")})).off("close.datagrid-filter").on("close.datagrid-filter",(function(){var data=$(this).data("popupmenu");data&&data.destroy()})),!1})),this.element.off("keydown.datagrid-filter-input").on("keydown.datagrid-filter-input",".datagrid-filter-wrapper input",(function(e){return clearTimeout(typingTimer),e.stopPropagation(),13!==e.which||(self.applyFilter(null,"enter"),e.preventDefault(),e.stopPropagation(),!1)})),this.settings.filterWhenTyping&&this.element.off("keyup.datagrid-filter-input").on("keyup.datagrid-filter-input",".datagrid-filter-wrapper input",(function(e){13!==e.which&&(_this2.activeCell&&_this2.activeCell.isFocused&&(_this2.activeCell.isFocused=!1),clearTimeout(typingTimer),typingTimer=setTimeout((function(){self.applyFilter(null,"keyup")}),400))})),this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th").each((function(){var col=self.columnById($(this).attr("data-column-id"))[0],elem=$(this);if(!col)return!0;elem.find("select.dropdown").each((function(){var dropdown=$(this);dropdown.dropdown(col.editorOptions).on("selected.datagrid",(function(){self.applyFilter(null,"selected")})).on("listopened.datagrid",(function(){var api=dropdown.data("dropdown");api&&(self.isInViewport(api.list[0])||self.adjustPosLeft(api.list[0]))})),dropdown.data("dropdown").settings.sourceArguments={column:col,container:elem,grid:self,cell:col,event:void 0,row:-1,rowData:{},value:void 0}})),elem.find("select.multiselect").each((function(){var _this3=this,multiselect=$(this);multiselect.multiselect(col.editorOptions).on("selected.datagrid",(function(){var ddElem=$(_this3);$("#".concat(ddElem.attr("id"))).val(ddElem.val()),self.applyFilter(null,"selected")})),multiselect.data("dropdown").settings.sourceArguments={column:col,container:elem,grid:self,cell:col,event:void 0,row:-1,rowData:{},value:void 0}})),col.maskOptions&&elem.find("input").mask(col.maskOptions),col.mask&&elem.find("input").mask(col.mask);var datepickerEl=elem.find(".datepicker");datepickerEl.length&&"function"==typeof $().datepicker&&datepickerEl.datepicker(col.editorOptions||{dateFormat:col.dateFormat}).on("listclosed.datepicker",(function(){self.applyFilter(null,"selected")}));var lookupEl=elem.find(".lookup");lookupEl.length&&"function"==typeof $().lookup&&(col.editorOptions&&(col.editorOptions.clickArguments?col.editorOptions.clickArguments.grid=self:col.editorOptions.clickArguments={grid:self}),lookupEl.lookup(col.editorOptions||{}).on("change",(function(){self.applyFilter(null,"selected")})));var timepickerEl=elem.find(".timepicker");return timepickerEl.length&&"function"==typeof $().timepicker&&timepickerEl.timepicker(col.editorOptions||{timeFormat:col.timeFormat}),col.mask&&elem.find("input").mask({pattern:col.mask,mode:col.maskMode}),null})),self.filterRowRendered=!0)},filterItemHtml:function filterItemHtml(icon,text,checked){var iconMarkup=$.createIcon({classes:"icon icon-filter",icon:"filter-".concat(icon)});return'<li class="'.concat(icon," ").concat(checked?" is-checked":"",'"><a href="#">').concat(iconMarkup,"<span>").concat(Locale.translate(text),"</span></a></li>")},filterButtonHtml:function filterButtonHtml(col){if(!col.filterType)return"";var self=this,isDisabled=col.filterDisabled,filterConditions=$.isArray(col.filterConditions)?col.filterConditions:[],render=function render(icon,text,checked){var isChecked=!(!filterConditions.length||filterConditions[0]!==icon)||checked;return filterConditions.length&&!function inArray(s,array){return array=array||filterConditions,$.inArray(s,array)>-1}(icon)?"":self.filterItemHtml(icon,text,isChecked)},renderButton=function renderButton(defaultValue){return'<button type="button" class="btn-menu btn-filter" data-init="false" '.concat(isDisabled?" disabled":"").concat(defaultValue?' data-default="'.concat(defaultValue,'"'):"",' type="button"><span class="audible">Filter</span>')+'<svg class="icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-filter-{{icon}}"></use></svg>'.concat($.createIcon({icon:"dropdown",classes:"icon-dropdown"}),'</button><ul class="popupmenu has-icons is-translatable is-selectable">')},btnMarkup="",btnDefault="";return"contents"===col.filterType||"select"===col.filterType||"multiselect"===col.filterType?"":("text"===col.filterType&&(btnMarkup=(btnMarkup=renderButton(btnDefault=filterConditions.length?filterConditions[0]:"contains")+render("contains","Contains",!0)+render("does-not-contain","DoesNotContain")+render("equals","Equals")+render("does-not-equal","DoesNotEqual")+render("is-empty","IsEmpty")+render("is-not-empty","IsNotEmpty")).replace("{{icon}}",btnDefault)),"checkbox"===col.filterType&&(btnMarkup=(btnMarkup+=renderButton(btnDefault=filterConditions.length?filterConditions[0]:"selected-notselected")+render("selected-notselected","All",!0)+render("selected","Selected")+render("not-selected","NotSelected")).replace("{{icon}}",btnDefault)),"checkbox"!==col.filterType&&"text"!==col.filterType&&(btnMarkup=(btnMarkup+=renderButton(btnDefault=filterConditions.length?filterConditions[0]:"equals")+render("equals","Equals","lookup"===col.filterType||"integer"===col.filterType||"decimal"===col.filterType||"date"===col.filterType||"time"===col.filterType)+render("does-not-equal","DoesNotEqual")+render("is-empty","IsEmpty")+render("is-not-empty","IsNotEmpty")).replace("{{icon}}",btnDefault)),"date"===col.filterType&&(btnMarkup+=render("in-range","InRange")),/\b(integer|decimal|date|time|percent)\b/g.test(col.filterType)&&(btnMarkup=(btnMarkup+="".concat(render("less-than","LessThan")).concat(render("less-equals","LessOrEquals")).concat(render("greater-than","GreaterThan")).concat(render("greater-equals","GreaterOrEquals"))).replace("{{icon}}","less-than")),"text"===col.filterType&&(btnMarkup=(btnMarkup+="".concat(render("end-with","EndsWith")).concat(render("does-not-end-with","DoesNotEndWith")).concat(render("start-with","StartsWith")).concat(render("does-not-start-with","DoesNotStartWith"))).replace("{{icon}}","end-with")),"lookup"===col.filterType&&(btnMarkup=(btnMarkup=renderButton(btnDefault=filterConditions.length?filterConditions[0]:"contains")+render("contains","Contains",!0)+render("does-not-contain","DoesNotContain")+render("equals","Equals")+render("does-not-equal","DoesNotEqual")+render("is-empty","IsEmpty")+render("is-not-empty","IsNotEmpty")+render("end-with","EndsWith")+render("does-not-end-with","DoesNotEndWith")+render("start-with","StartsWith")+render("does-not-start-with","DoesNotStartWith")+render("less-than","LessThan")+render("less-equals","LessOrEquals")+render("greater-than","GreaterThan")+render("greater-equals","GreaterOrEquals")).replace("{{icon}}",btnDefault)),btnMarkup+="</ul>")},toggleFilterRow:function toggleFilterRow(){this.settings.filterable?(this.element.find(".datagrid-filter-wrapper").hide(),this.settings.filterable=!1,this.filterRowRendered=!1,this.element.removeClass("has-filterable-columns"),this.element.removeClass("has-two-line-header"),this.element.triggerHandler("closefilterrow")):(this.settings.filterable=!0,this.filterRowRendered=!0,this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.find(".datagrid-filter-wrapper").show(),this.element.triggerHandler("openfilterrow"),this.attachFilterRowEvents()),this.setupTooltips()},applyFilter:function applyFilter(conditions,trigger){var self=this,filterChanged=!1;conditions?this.setFilterConditions(conditions):conditions=this.filterConditions(),void 0===this.filterExpr&&(this.filterExpr=[]),this.pagerAPI&&JSON.stringify(conditions)!==JSON.stringify(this.filterExpr)&&(this.filterExpr=conditions,filterChanged=!0);var dataset,isFiltered,i,i2,len,dataSetLen,checkRow=function checkRow(rowData){for(var isMatch=!0,_loop=function _loop(i){var columnDef=self.columnById(conditions[i].columnId)[0],rowValue=rowData&&void 0!==rowData[columnDef.field]?rowData[columnDef.field]:self.fieldValue(rowData,columnDef.field),rowValueStr=null==rowValue?"":rowValue.toString().toLowerCase(),conditionValue=conditions[i].value.toString().toLowerCase(),rangeData=null,rangeSeparator=null,rangeValues=null;if("percent"===columnDef.filterType&&(conditionValue=(conditionValue/100).toString(),"decimal"==="".concat(columnDef.name).toLowerCase()?(rowValue=formatters.Decimal(!1,!1,rowValue,columnDef),conditionValue=formatters.Decimal(!1,!1,conditionValue,columnDef)):"integer"==="".concat(columnDef.name).toLowerCase()&&(rowValue=formatters.Integer(!1,!1,rowValue,columnDef),conditionValue=formatters.Integer(!1,!1,conditionValue,columnDef))),"text"===columnDef.filterType){var fmt=columnDef.formatter,id=conditions[i].columnId;rowValueStr=null==(rowValue=(rowValue=self.formatValue(fmt,i,id,rowValue,columnDef,rowData,self)).replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").trim().toLowerCase())?"":rowValue.toString().toLowerCase()}if("contents"!==columnDef.filterType&&"select"!==columnDef.filterType&&"multiselect"!==columnDef.filterType||(rowValue=null==rowValue?"":rowValue.toString().toLowerCase()),"number"!=typeof rowValue&&(isNaN(rowValue)||""===rowValue||conditions[i].value instanceof Array)||/^(date|time|text)$/.test(columnDef.filterType)||(rowValue=null===rowValue?rowValue:parseFloat(rowValue),conditionValue=Locale.parseNumber(conditionValue)),"date"===columnDef.filterType||"time"===columnDef.filterType){"string"==typeof rowValue&&(rowValue=columnDef.formatter(!1,!1,rowValue,columnDef,!0));var getValues=function getValues(rValue,cValue){return(cValue=Locale.parseDate(cValue,conditions[i].format))&&("time"===columnDef.filterType&&(cValue.setDate(1),cValue.setMonth(0),cValue.setYear(0)),cValue=cValue.getTime()),rValue instanceof Date?(rValue=new Date(rValue.getTime()),"time"===columnDef.filterType?(rValue.setDate(1),rValue.setMonth(0),rValue.setYear(0)):columnDef.editorOptions&&columnDef.editorOptions.showTime||(rValue.setHours(0),rValue.setMinutes(0),rValue.setSeconds(0),rValue.setMilliseconds(0)),rValue=rValue.getTime()):"string"==typeof rValue&&rValue&&(rValue=columnDef.sourceFormat?Locale.parseDate(rValue,"string"==typeof columnDef.sourceFormat?{pattern:columnDef.sourceFormat}:columnDef.sourceFormat):Locale.parseDate(rValue,{pattern:conditions[i].format}))&&("time"===columnDef.filterType?(rValue.setDate(1),rValue.setMonth(0),rValue.setYear(0)):columnDef.editorOptions&&columnDef.editorOptions.showTime||(rValue.setHours(0),rValue.setMinutes(0),rValue.setSeconds(0),rValue.setMilliseconds(0)),rValue=rValue.getTime()),{rValue:rValue,cValue:cValue}},values=null;if("in-range"===conditions[i].operator){var cell=self.settings.columns.indexOf(columnDef),datepickerApi=self.element.find(".datagrid-header th:eq(".concat(cell,") .datagrid-filter-wrapper input")).data("datepicker");datepickerApi&&(rangeSeparator=datepickerApi.settings.range.separator,(rangeData=datepickerApi.settings.range.data)&&rangeData.start?values=getValues(rowValue,rangeData.start):rangeSeparator&&conditionValue.indexOf(rangeSeparator)>-1&&(values=getValues(rowValue,(rangeValues=conditionValue.split(rangeSeparator))[0])))}else values=getValues(rowValue,conditions[i].value);rowValue=values?values.rValue:rowValue,conditionValue=values?values.cValue:conditionValue}switch(conditions[i].operator){case"equals":if(conditions[i].value instanceof Array){isMatch=!1;for(var k=0;k<conditions[i].value.length;k++){conditions[i].value[k].toLowerCase()===rowValue&&(""!==rowValue.toString()||""===conditions[i].value[k])&&(isMatch=!0)}}else isMatch=rowValue===conditionValue&&""!==rowValue;break;case"does-not-equal":isMatch=rowValue!==conditionValue;break;case"contains":isMatch=rowValueStr.indexOf(conditionValue)>-1&&""!==rowValue.toString();break;case"does-not-contain":isMatch=-1===rowValueStr.indexOf(conditionValue);break;case"end-with":isMatch=rowValueStr.lastIndexOf(conditionValue)===rowValueStr.length-conditionValue.toString().length&&""!==rowValueStr&&rowValueStr.length>=conditionValue.toString().length;break;case"start-with":isMatch=0===rowValueStr.indexOf(conditionValue)&&""!==rowValueStr;break;case"does-not-end-with":isMatch=!(isMatch=rowValueStr.lastIndexOf(conditionValue)===rowValueStr.length-conditionValue.toString().length&&""!==rowValueStr&&rowValueStr.length>=conditionValue.toString().length);break;case"does-not-start-with":isMatch=!(0===rowValueStr.indexOf(conditionValue)&&""!==rowValueStr);break;case"is-empty":isMatch=""===rowValueStr;break;case"is-not-empty":if(""===rowValue){isMatch=""!==rowValue;break}isMatch=!(null===rowValue);break;case"in-range":if(isMatch=!1,rangeData&&rangeData.startDate&&rangeData.endDate){var d1=rangeData.startDate.getTime(),d2=rangeData.endDate.getTime();isMatch=rowValue>=d1&&rowValue<=d2&&null!==rowValue}else if(rangeValues){var _d=Locale.parseDate(rangeValues[0],conditions[i].format),_d2=Locale.parseDate(rangeValues[1],conditions[i].format);_d&&_d2&&(_d=_d.getTime(),_d2=_d2.getTime(),isMatch=rowValue>=_d&&rowValue<=_d2&&null!==rowValue)}break;case"less-than":isMatch=rowValue<conditionValue&&""!==rowValue&&null!==rowValue;break;case"less-equals":isMatch=rowValue<=conditionValue&&""!==rowValue&&null!==rowValue;break;case"greater-than":isMatch=rowValue>conditionValue&&""!==rowValue&&null!==rowValue;break;case"greater-equals":isMatch=rowValue>=conditionValue&&""!==rowValue&&null!==rowValue;break;case"selected":if(columnDef&&columnDef.isChecked){isMatch=columnDef.isChecked(rowValue);break}isMatch=("1"===rowValueStr||"true"===rowValueStr||!0===rowValue||1===rowValue)&&""!==rowValueStr;break;case"not-selected":if(columnDef&&columnDef.isChecked){isMatch=!columnDef.isChecked(rowValue);break}isMatch="0"===rowValueStr||"false"===rowValueStr||!1===rowValue||0===rowValue||""===rowValueStr;break;case"selected-notselected":isMatch=!0}if(!isMatch)return{v:!1}},i=0;i<conditions.length;i++){var _ret=_loop(i);if("object"===_typeof(_ret))return _ret.v}return isMatch};if(!this.settings.disableClientFilter)if(this.settings.treeGrid){var checkChildNodes=function checkChildNodes(nodeData,parentNode){for(var j=0;j<nodeData.length;j++){var childNode=nodeData[j];isFiltered&&(isFiltered=!checkRow(childNode)),childNode._isFilteredOut=!checkRow(childNode),parentNode&&!childNode._isFilteredOut&&(parentNode._isFilteredOut=!1),childNode.children&&childNode.children.length&&checkChildNodes(childNode.children,childNode)}};for(i=0,len=(dataset=this.settings.dataset).length;i<len;i++)isFiltered=!checkRow(dataset[i]),dataset[i].children&&dataset[i].children.length&&checkChildNodes(dataset[i].children),dataset[i]._isFilteredOut=isFiltered}else if(this.settings.groupable)for(i=0,len=this.settings.dataset.length;i<len;i++){var isGroupFiltered=!0;for(i2=0,dataSetLen=this.settings.dataset[i].values.length;i2<dataSetLen;i2++)isFiltered=!checkRow(this.settings.dataset[i].values[i2]),this.settings.dataset[i].values[i2]._isFilteredOut=isFiltered,isFiltered||(isGroupFiltered=!1);this.settings.dataset[i]._isFilteredOut=isGroupFiltered}else for(i=0,len=this.settings.dataset.length;i<len;i++)isFiltered=!checkRow(this.settings.dataset[i]),this.settings.dataset[i]._isFilteredOut=isFiltered;this.setChildExpandOnMatch(),this.settings.source||(this.clearCache(),this.renderRows()),filterChanged&&this.setSearchActivePage({trigger:trigger,type:"filtered"}),this.settings.disableClientFilter&&"restore"===trigger||(this.element.trigger("filtered",{op:"apply",conditions:conditions,trigger:trigger}),this.saveUserSettings())},adjustPosLeft:function adjustPosLeft(el){var b=el.getBoundingClientRect(),w=window.innerWidth||document.documentElement.clientWidth;b.left<0&&b.right<=w?el.style.left="".concat(20,"px"):b.left>=0&&!(b.right<=w)&&(el.style.left="".concat(w-b.width-20,"px"))},isInViewport:function isInViewport(el){var b=el.getBoundingClientRect();return b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)},setChildExpandOnMatch:function setChildExpandOnMatch(){var s=this.settings;if(s.treeGrid){!function checkNodes(nodeData,depth){for(var i=0,l=nodeData.length;i<l;i++){var node=nodeData[i],children=node.children,childrenLen=children?children.length:0;if(childrenLen){if(!node._isFilteredOut)if(s.allowChildExpandOnMatch)for(var i2=0;i2<childrenLen;i2++)children[i2]._isFilteredOut=!1;else{for(var isAllChildrenFiltered=!0,_i6=0;_i6<childrenLen;_i6++)children[_i6]._isFilteredOut||(isAllChildrenFiltered=!1);node.isAllChildrenFiltered=isAllChildrenFiltered}checkNodes(children)}}}(s.dataset)}},clearFilter:function clearFilter(){this.settings.filterable&&(this.clearFilterFields(),this.applyFilter(),this.element.trigger("filtered",{op:"clear",conditions:[]}))},clearFilterFields:function clearFilterFields(){this.settings.filterable&&(this.element.find(".datagrid-header input, select").each((function(){var input=$(this);input.val(""),input.is("select")&&input.find("option").each((function(){$(this).prop("selected",!1)})),input.trigger("updated")})),this.element.find(".datagrid-header .btn-filter").each((function(){var btn=$(this),ul=btn.next(),first=ul.find("li:first");btn.find("svg:first > use").attr("href","#icon-filter-".concat(btn.attr("data-default"))),ul.find(".is-checked").removeClass("is-checked"),first.addClass("is-checked")})))},setFilterConditions:function setFilterConditions(conditions){this.clearFilterFields();for(var i=0;i<conditions.length;i++){var rowElem=this.element.find('.datagrid-header th[data-column-id="'.concat(conditions[i].columnId,'"]')),input=rowElem.find("input, select"),btn=rowElem.find(".btn-filter"),ul=btn.next();if(void 0===conditions[i].value&&(conditions[i].value=""),input.val(conditions[i].value),input.is("select")){var firstVal=conditions[i].value instanceof Array?conditions[i].value[0]:conditions[i].value;if(conditions[i].innerHTML&&(input[0].innerHTML=conditions[i].innerHTML),input.find('option[value="'.concat(firstVal,'"]')).length)if(conditions[i].value instanceof Array&&!conditions[i].selectedOptions){var options=input[0].querySelectorAll("option");input.val("");for(var k=0;k<options.length;k++)options[k].selected=!1;for(var j=0;j<conditions[i].value.length;j++)input.find('option[value="'.concat(conditions[i].value[j],'"]')).prop("selected",!0)}else input.find('option[value="'.concat(conditions[i].value,'"]')).prop("selected",!0);else{var dropdownApi=input.data("dropdown");dropdownApi&&dropdownApi.setCode(conditions[i].value)}input.trigger("updated")}btn.find("svg:first > use").attr("href","#icon-filter-".concat(conditions[i].operator)),ul.find(".is-checked").removeClass("is-checked"),ul.find(".".concat(conditions[i].operator)).addClass("is-checked")}},filterConditions:function filterConditions(){if(this.filterExpr&&1===this.filterExpr.length&&this.filterExpr[0].keywordSearch)return delete this.filterExpr[0].keywordSearch,this.filterExpr;var filterExpr=[],self=this;return this.element.find("th.is-filterable").each((function(){var op,rowElem=$(this),btn=rowElem.find(".btn-filter"),input=rowElem.find("input, select"),isDropdown=input.is("select"),svg=btn.find(".icon-dropdown:first"),format=null;if((btn.length||isDropdown)&&"selected-notselected"!==(op=isDropdown?"equals":svg.getIconName().replace("filter-",""))&&!(""===input.val()&&-1===["is-not-empty","is-empty","selected","not-selected"].indexOf(op)||input.val()instanceof Array&&0===input.val().length)){var value=input.val()?input.val():"";input.attr("data-mask-mode")&&"number"===input.attr("data-mask-mode")&&(value=Locale.parseNumber(value));var condition={columnId:rowElem.attr("data-column-id"),operator:op,value:value};input.data("datepicker")&&(format=input.data("datepicker").pattern,condition.format=format),input.data("timepicker")&&(format=input.data("timepicker").settings.timeFormat,condition.format=format),input.is("select")&&(condition.innerHTML=input[0].innerHTML);var column=self.columnById(condition.columnId);column&&column[0]&&(condition.filterType=column[0].filterType),filterExpr.push(condition)}})),filterExpr},getExtraTop:function getExtraTop(){var s=this.settings,topPositions={default:{short:0,medium:0,normal:0},filterable:{short:0,medium:0,normal:0},group:{short:-25,medium:-30,normal:-39},groupFilterable:{short:-29,medium:-30,normal:-41}};return s.columnGroups?s.filterable?topPositions.groupFilterable[s.rowHeight]:topPositions.group[s.rowHeight]:s.filterable?topPositions.filterable[s.rowHeight]:topPositions.default[s.rowHeight]},getTargetHeight:function getTargetHeight(){var s=this.settings,heights={default:{short:20,medium:28,normal:35},filterable:{short:53,medium:54,normal:60},group:{short:46,medium:56,normal:74},groupFilterable:{short:83,medium:87,normal:103}};return s.columnGroups?s.filterable&&this.filterRowRendered?heights.groupFilterable[s.rowHeight]:heights.group[s.rowHeight]:s.filterable&&this.filterRowRendered?heights.filterable[s.rowHeight]:heights.default[s.rowHeight]},createDraggableColumns:function createDraggableColumns(){var self=this,headers=self.headerNodes().not('[data-column-id="selectionCheckbox"]'),showTarget=$(".drag-target-arrows",self.element);showTarget.length||(self.element.prepend('<span class="drag-target-arrows" style="height: '.concat(self.getTargetHeight(),'px;"></span>')),showTarget=$(".drag-target-arrows",self.element)),headers.not('[data-reorder="false"]').prepend('</span><span class="handle">'.concat($.createIcon({icon:"drag"}),"</span>")),headers.prepend('<span class="is-draggable-target"></span>'),headers.last().append('<span class="is-draggable-target last"></span>'),self.element.addClass("has-draggable-columns"),$(".handle",headers).each((function(){var clone=null,headerPos=null,offPos=null,extraTopPos=0,handle=$(this),header=handle.parent();handle.on("mousedown.datagrid",(function(e){e.preventDefault(),header.drag({clone:!0,cloneAppendTo:headers.first().parent().parent(),clonePosIsFixed:!0}).on("dragstart.datagrid",(function(dragStartEvent,pos,thisClone){(clone=thisClone).removeAttr("id").addClass("is-dragging-clone").css({left:Locale.isRTL()?pos.right-clone.width():pos.left,top:pos.top,height:header.height(),border:0}),$(".is-draggable-target",clone).remove(),self.setDraggableColumnTargets(),extraTopPos=self.getExtraTop(),headerPos=header.position(),offPos={top:pos.top-headerPos.top,left:pos.left-headerPos.left};var index=self.targetColumn(headerPos);self.draggableStatus.startIndex=index,e.stopImmediatePropagation()})).on("drag.datagrid",(function(dragEvent,pos){clone[0].style.left="".concat(parseInt(Locale.isRTL()?pos.left+pos.offset.x-pos.clone.width():pos.left,10),"px"),clone[0].style.top="".concat(parseInt(pos.top,10),"px"),headerPos={top:pos.top-offPos.top,left:pos.left-offPos.left},Locale.isRTL()&&(headerPos.left=parseInt(clone[0].style.left,10));var n=0,target=null,rect=null,index=self.targetColumn(headerPos);if($(".is-draggable-target",headers).add(showTarget).removeClass("is-over"),-1!==index)for(var i=0,l=self.draggableColumnTargets.length;i<l;i++)n=i+1,(target=self.draggableColumnTargets[i]).index===index&&target.index!==self.draggableStatus.startIndex&&(target.index>self.draggableStatus.startIndex&&n<l&&(target=self.draggableColumnTargets[n]),target.el.addClass("is-over"),showTarget.addClass("is-over"),rect=target.el[0].getBoundingClientRect(),showTarget[0].style.left="".concat(parseInt(rect.left+(Locale.isRTL()?2:0),10),"px"),showTarget[0].style.top="".concat(parseInt(rect.top,10)+1+extraTopPos,"px"));e.stopImmediatePropagation()})).on("dragend.datagrid",(function(dragendEvent,pos){Locale.isRTL()||(clone[0].style.left="".concat(parseInt(pos.left,10),"px"),clone[0].style.top="".concat(parseInt(pos.top,10),"px")),headerPos={top:pos.top-offPos.top,left:pos.left-offPos.left},Locale.isRTL()&&(headerPos.left=parseInt(clone[0].style.left,10));var i,l,indexFrom,indexTo,index=self.targetColumn(headerPos),dragApi=header.data("drag"),tempArray=[];if(dragApi&&dragApi.destroy&&dragApi.destroy(),self.draggableStatus.endIndex=index,$(".is-draggable-target",headers).add(showTarget).removeClass("is-over"),-1!==self.draggableStatus.endIndex&&self.draggableStatus.startIndex!==self.draggableStatus.endIndex){for(i=0,l=self.settings.columns.length;i<l;i++)self.settings.columns[i].hidden||"selectionCheckbox"===self.settings.columns[i].id||tempArray.push(i);indexFrom=tempArray[self.draggableStatus.startIndex]||0,indexTo=tempArray[self.draggableStatus.endIndex]||0,self.updateGroupHeadersAfterColumnReorder(indexFrom,indexTo),self.arrayIndexMove(self.settings.columns,indexFrom,indexTo),self.updateColumns(self.settings.columns)}}))}))}))},setDraggableColumnTargets:function setDraggableColumnTargets(){var target,pos,self=this,headers=self.headerNodes().not(".is-hidden").not('[data-column-id="selectionCheckbox"]');self.draggableColumnTargets=[],self.draggableStatus={},$(".is-draggable-target.last",headers.last()).length||headers.last().append($(".is-draggable-target.last",self.headerNodes())),$(".is-draggable-target",headers).each((function(index){var idx=$(this).is(".last")?index-1:index;target=headers.eq(idx),pos=target.position(),20,self.draggableColumnTargets.push({el:$(this),index:idx,pos:pos,width:target.outerWidth(),height:target.outerHeight(),dropArea:{x1:pos.left-20,x2:pos.left+target.outerWidth()+20,y1:pos.top-20+self.getExtraTop(),y2:pos.top+target.outerHeight()+20}})}))},targetColumn:function targetColumn(pos){var target,i,l,idx=-1;for(i=0,l=this.draggableColumnTargets.length-1;i<l;i++)if(target=this.draggableColumnTargets[i],pos.left>target.dropArea.x1&&pos.left<target.dropArea.x2&&pos.top>target.dropArea.y1&&pos.top<target.dropArea.y2&&(idx=target.index,Locale.isRTL()))return idx;return idx},arrayIndexMove:function arrayIndexMove(arr,from,to){arr.splice(to,0,arr.splice(from,1)[0])},createDraggableRows:function createDraggableRows(){var self=this;this.settings.rowReorder&&(this.tableBody.children().filter((function(){return $(this).find(".datagrid-reorder-icon").length<1})).attr("data-arrange-exclude",!0),this.tableBody.arrange({placeholder:'<tr class="datagrid-reorder-placeholder"><td colspan="'.concat(this.visibleColumns().length,'"></td></tr>'),handle:".datagrid-reorder-icon",isVisualItems:!0}).off("beforearrange.datagrid").on("beforearrange.datagrid",(function(e,status){self.isSafari&&status.start.css({display:"inline-block"})})).off("arrangeupdate.datagrid").on("arrangeupdate.datagrid",(function(e,status){self.isSafari&&status.end.css({display:""}),self.reorderRow(status.startIndex,status.endIndex,status)})))},reorderRow:function reorderRow(startIndex,endIndex,status){var moveDown=endIndex>startIndex,startRow=this.tableBody.find("tr").eq(startIndex),endRow=this.tableBody.find("tr").eq(endIndex),startRowIdx=this.settings.dataset.splice(startIndex,1)[0];this.settings.dataset.splice(endIndex,0,startRowIdx),!status&&moveDown&&startRow.insertAfter(endRow),status||moveDown||startRow.insertBefore(endRow),(this.settings.rowTemplate||this.settings.expandableRow)&&moveDown&&(this.tableBody.find("tr").eq(2*startIndex).insertAfter(status.end),status.end.next().next().insertAfter(status.over)),!this.settings.rowTemplate&&!this.settings.expandableRow||moveDown||this.tableBody.find("tr").eq(2*startIndex).next().insertAfter(status.end);for(var allRows=this.tableBody.find("tr:not(.datagrid-expandable-row)"),i=0;i<allRows.length;i++)allRows[i].setAttribute("data-index",i),allRows[i].setAttribute("aria-rowindex",i+1);this.element.trigger("rowreorder",[{endIndex:endIndex,startIndex:startIndex,over:endRow,start:startRow}]),this.syncSelectedRowsIdx()},fieldValue:function fieldValue(obj,field){if(!field||!obj)return"";if(field.indexOf(".")>-1)return field.split(".").reduce((function(o,x){return o?o[x]:""}),obj);var rawValue=obj[field],value=rawValue||0===rawValue||!1===rawValue?rawValue:"";return value=xssUtils.escapeHTML(value)},setTreeRootNodes:function setTreeRootNodes(){this.settings.treeGrid&&(this.settings.treeRootNodes=this.settings.treeDepth.filter((function(node){return 1===node.depth})))},setTreeDepth:function setTreeDepth(dataset){if(this.settings.treeGrid){var self=this,idx=0,iterate=function iterate(node,depth){idx++,self.settings.treeDepth.push({idx:idx,depth:depth,node:node});for(var children=node.children||[],i=0,len=children.length;i<len;i++)iterate(children[i],depth+1)};dataset=dataset||this.settings.dataset,self.settings.treeDepth=[];for(var i=0,len=dataset.length;i<len;i++)iterate(dataset[i],1)}},setRowGrouping:function setRowGrouping(){var groupSettings=this.settings.groupable;groupSettings&&(this.originalDataset?this.settings.dataset=this.originalDataset:this.originalDataset=this.settings.dataset.slice(),groupSettings.aggregator&&"none"!==groupSettings.aggregator?"sum"!==groupSettings.aggregator?"max"!==groupSettings.aggregator?"list"!==groupSettings.aggregator?this.settings.dataset=groupBy(this.settings.dataset,groupSettings.fields):this.settings.dataset=groupBy.list(this.settings.dataset,groupSettings.fields,groupSettings.aggregatorOptions):this.settings.dataset=groupBy.max(this.settings.dataset,groupSettings.fields,groupSettings.aggregate):this.settings.dataset=groupBy.sum(this.settings.dataset,groupSettings.fields,groupSettings.aggregate):this.settings.dataset=groupBy.none(this.settings.dataset,groupSettings.fields))},renderRows:function renderRows(){var tableHtml="",tableHtmlLeft="",tableHtmlRight="",j=0,s=this.settings,body=this.table.find("tbody"),activePage=1;if(this.pagerAPI){var pagerState=this.pagerAPI.state;activePage=pagerState.filteredActivePage?pagerState.filteredActivePage:pagerState.activePage}for(this.bodyColGroupHtmlLeft="<colgroup>",this.bodyColGroupHtml="<colgroup>",this.bodyColGroupHtmlRight="<colgroup>",this.triggerDestroyCell(),this.settings.columns&&0!==this.settings.columns.length||this.settings.columns.push({id:"blank",value:"",field:""}),j=0;j<this.settings.columns.length;j++){var col=this.settings.columns[j],container=this.getContainer(col.id),colWidth=this.columnWidth(col,j);switch(container){case"left":this.bodyColGroupHtmlLeft+="<col".concat(colWidth).concat(col.hidden?' class="is-hidden"':"","></col>");break;case"right":this.bodyColGroupHtmlRight+="<col".concat(colWidth).concat(col.hidden?' class="is-hidden"':"","></col>");break;default:this.bodyColGroupHtml+="<col".concat(colWidth).concat(col.hidden?' class="is-hidden"':"","></col>")}col.colspan&&(this.hasColSpans=!0)}this.emptyMessageContainer&&this.emptyMessageContainer.hide(),0===body.length&&(this.hasLeftPane&&(this.tableBodyLeft=$("<tbody></tbody>"),this.tableLeft.append(this.tableBodyLeft)),this.tableBody=$("<tbody></tbody>"),this.table.append(this.tableBody),this.hasRightPane&&(this.tableBodyRight=$("<tbody></tbody>"),this.tableRight.append(this.tableBodyRight))),this.groupArray=[],this.recordCount=0,this.filteredCount=0,s.treeGrid&&s.paging&&!s.source&&activePage>1&&(this.recordCount=s.treeRootNodes[s.pagesize*activePage-s.pagesize].idx-1),this.restoreSortOrder&&this.sortDataset();for(var rowStatusTooltip=!1,i=0;i<s.dataset.length;i++){if(s.paging&&!s.source){if(1===activePage&&i-this.filteredCount>=s.pagesize){s.dataset[i]._isFilteredOut?this.filteredCount++:this.recordCount++;continue}if(activePage>1&&!(i-this.filteredCount>=s.pagesize*(activePage-1)&&i-this.filteredCount<s.pagesize*activePage)){s.dataset[i]._isFilteredOut?this.filteredCount++:this.filteredCount&&this.recordCount++;continue}}if(!s.virtualized||this.isRowVisible(this.recordCount))if((!s.treeGrid&&s.dataset[i])._isFilteredOut)this.filteredCount++;else if(this.settings.groupable){if(s.dataset[i].values){for(var thisLength=s.dataset[i].values.length,thisFilterCount=0,k=0;k<thisLength;k++)s.dataset[i].values[k]._isFilteredOut&&thisFilterCount++;if(thisFilterCount===thisLength)continue}if(!this.settings.groupable.suppressGroupRow){var groupHtml=this.rowHtml(s.dataset[i],this.recordCount,i,!0);this.hasLeftPane&&groupHtml.left&&(tableHtmlLeft+=groupHtml.left),groupHtml.center&&(tableHtml+=groupHtml.center),this.hasRightPane&&groupHtml.right&&(tableHtmlRight+=groupHtml.right)}if(this.settings.groupable.showOnlyGroupRow&&s.dataset[i].values[0]){var rowData=s.dataset[i].values[0];s.dataset[i].list&&(rowData.list=s.dataset[i].list),rowData.values=s.dataset[i].values;var _groupHtml=this.rowHtml(rowData,this.recordCount,i);this.hasLeftPane&&_groupHtml.left&&(tableHtmlLeft+=_groupHtml.left),_groupHtml.center&&(tableHtml+=_groupHtml.center),this.hasRightPane&&_groupHtml.right&&(tableHtmlRight+=_groupHtml.right),this.recordCount++,this.groupArray.push({group:i,node:0});continue}for(var _k=0;_k<s.dataset[i].values.length;_k++)if(!s.dataset[i].values[_k]._isFilteredOut){var _rowHtml=this.rowHtml(s.dataset[i].values[_k],this.recordCount,s.dataset[i].values[_k].idx);this.hasLeftPane&&_rowHtml.left&&(tableHtmlLeft+=_rowHtml.left),_rowHtml.center&&(tableHtml+=_rowHtml.center),this.hasRightPane&&_rowHtml.right&&(tableHtmlRight+=_rowHtml.right),this.recordCount++,this.groupArray.push({group:i,node:_k})}if(this.settings.groupable.groupFooterRow){var _rowHtml2=this.rowHtml(s.dataset[i],this.recordCount,i,!0,!0);this.hasLeftPane&&_rowHtml2.left&&(tableHtmlLeft+=_rowHtml2.left),_rowHtml2.center&&(tableHtml+=_rowHtml2.center),this.hasRightPane&&_rowHtml2.right&&(tableHtmlRight+=_rowHtml2.right)}}else{var currentCount=i;s.treeGrid&&(currentCount=this.recordCount);var rowHtml=this.rowHtml(s.dataset[i],currentCount,i);this.hasLeftPane&&rowHtml.left&&(tableHtmlLeft+=rowHtml.left),rowHtml.center&&(tableHtml+=rowHtml.center),this.hasRightPane&&rowHtml.right&&(tableHtmlRight+=rowHtml.right),s.dataset[i]._isFilteredOut||this.recordCount++,this.visibleRowCount=currentCount+1,s.dataset[i].rowStatus&&(rowStatusTooltip=!0)}else this.recordCount++}if(this.settings.summaryRow){var totals=this.calculateTotals(),summaryRowHtml=this.rowHtml(totals,this.recordCount,null,!1,!0);this.hasLeftPane&&summaryRowHtml.left&&(tableHtmlLeft+=summaryRowHtml.left),summaryRowHtml.center&&(tableHtml+=summaryRowHtml.center),this.hasRightPane&&summaryRowHtml.right&&(tableHtmlRight+=summaryRowHtml.right)}"<colgroup>"!==this.bodyColGroupHtml&&(this.bodyColGroupHtmlLeft+="</colgroup>",this.bodyColGroupHtml+="</colgroup>",this.bodyColGroupHtmlRight+="</colgroup>",this.bodyColGroupLeft&&this.bodyColGroupLeft.remove(),this.bodyColGroup&&this.bodyColGroup.remove(),this.bodyColGroupRight&&this.bodyColGroupRight.remove(),this.hasLeftPane&&(this.bodyColGroupLeft=$(this.bodyColGroupHtmlLeft),(this.headerRowLeft||this.tableBodyLeft).before(this.bodyColGroupLeft)),this.bodyColGroup=$(this.bodyColGroupHtml),(this.headerRow||this.tableBody).before(this.bodyColGroup),this.hasRightPane&&(this.bodyColGroupRight=$(this.bodyColGroupHtmlRight),(this.headerRowRight||this.tableBodyRight).before(this.bodyColGroupRight))),this.hasLeftPane&&DOM.html(this.tableBodyLeft,tableHtmlLeft,"*"),DOM.html(this.tableBody,tableHtml,"*"),this.hasRightPane&&DOM.html(this.tableBodyRight,tableHtmlRight,"*"),this.setVirtualHeight(),this.setScrollClass(),this.setupTooltips(rowStatusTooltip),this.afterRender()},afterRender:function afterRender(){var _this4=this,self=this;if(this.settings.fixedRowHeight&&"auto"===this.settings.fixedRowHeight&&this.settings.frozenColumns&&self.tableBody.find("tr").each((function(i){var centerHeight,leftHeight=0,rightHeight=0,row=$(this);centerHeight=row.height(),self.tableBodyLeft&&(leftHeight=self.tableBodyLeft.find("tr").eq(i).height()),self.tableBodyRight&&(rightHeight=self.tableBodyLeft.find("tr").eq(i).height());var maxHeight=Math.max(leftHeight,centerHeight,rightHeight);return row.css("height",maxHeight),self.tableBodyLeft&&(leftHeight=self.tableBodyLeft.find("tr").eq(i).css("height",maxHeight)),self.tableBodyRight&&(rightHeight=self.tableBodyLeft.find("tr").eq(i).css("height",maxHeight)),!0})),this.settings.onPostRenderCell)for(var _loop2=function _loop2(i){var col=self.settings.columns[i];col.component&&self.tableBody.find("tr").each((function(){var row=$(this),rowIdx=self.settings.treeGrid?self.actualPagingRowIndex(self.actualRowIndex(row)):self.dataRowIndex(row),lineage=row.attr("data-lineage"),rowData=self.rowData(rowIdx),colIdx=self.columnIdxById(col.id),args={row:lineage||rowIdx,cell:colIdx,value:rowData,rowData:rowData,col:col,api:self};self.settings.onPostRenderCell(row.find("td").eq(colIdx).find(".datagrid-cell-wrapper .content")[0],args)}))},i=0;i<this.settings.columns.length;i++)_loop2(i);var dropdowns=self.tableBody.find("select.dropdown");dropdowns.dropdown&&dropdowns.dropdown(),self.tableBody.find(".dropdown-wrapper.is-inline").prev("select").on("listclosed",(function(){var elem=$(this),newValue=elem.val(),row=elem.closest("tr");self.updateCellNode(row.attr("aria-rowindex"),elem.closest("td").index(),newValue,!1,!0)}));var spinboxes=self.tableBody.find(".spinbox");spinboxes.spinbox&&spinboxes.spinbox(),self.settings.source||self.displayCounts(),self.setAlternateRowShading(),self.createDraggableRows();var focusedEl=document.activeElement;(self.activeCell.isFocused&&(!focusedEl||focusedEl&&"body"===focusedEl.tagName.toLowerCase())&&self.setActiveCell(self.activeCell.row,self.activeCell.cell),self.settings.paging&&self.settings.source&&!self.settings.allowSelectAcrossPages&&(self.preventSelection||(self._selectedRows=[]),self.syncSelectedUI()),self.settings.paging&&self.settings.source&&self.settings.allowSelectAcrossPages&&(self.syncSelectedRows(),self.syncSelectedUI()),self.settings.paging&&!self.settings.source&&null===self.settings.allowSelectAcrossPages&&(self.syncSelectedRows(),self.syncSelectedUI()),this.stretchColumnDiff<0)&&(this.bodyColGroup.find("col").eq(self.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px"));setTimeout((function(){self.element.trigger("afterrender",{body:self.bodyContainer,header:self.headerContainer,pager:self.pagerBar}),_this4.activateFirstCell()}))},activateFirstCell:function activateFirstCell(){this.activeCell&&this.activeCell.node||(this.activeCell={node:this.cellNode(0,0).attr("tabindex","0"),isFocused:!1,cell:0,row:0})},triggerDestroyCell:function triggerDestroyCell(){var _this5=this,self=this;if(self.tableBody&&this.settings.onPostRenderCell&&this.settings.onDestroyCell){var rows=self.tableBody.find("tr");if(0===rows.length)return;for(var _loop3=function _loop3(i){var col=_this5.settings.columns[i];col.component&&rows.each((function(){var row=$(this),rowIdx=row.index(),colIdx=self.columnIdxById(col.id),args={row:row.index(),cell:colIdx,value:self.settings.dataset[rowIdx],col:col,api:self};self.settings.onDestroyCell(row.find("td").eq(colIdx).find(".datagrid-cell-wrapper .content")[0],args)}))},i=0;i<this.settings.columns.length;i++)_loop3(i)}},cacheVirtualStats:function cacheVirtualStats(){var containerHeight=this.element[0].offsetHeight,scrollTop=this.bodyWrapperCenter[0].scrollTop,bodyH=containerHeight-("normal"===this.settings.rowHeight?40:"medium"===this.settings.rowHeight?30:25),rowH="normal"===this.settings.rowHeight?50:"medium"===this.settings.rowHeight?40:30;this.virtualRange={rowHeight:rowH,top:Math.max(scrollTop-(this.settings.virtualRowBuffer-1)*rowH,0),bottom:scrollTop+bodyH+(this.settings.virtualRowBuffer-1)*rowH,totalHeight:rowH*this.settings.dataset.length,bodyHeight:bodyH}},isRowVisible:function isRowVisible(rowIndex){if(!this.settings.virtualized)return!(this.settings.paging&&!this.settings.source&&rowIndex&&this.pagerAPI)||(this.pagerAPI.activePage-1)*this.settings.pagesize<=rowIndex&&this.pagerAPI.activePage*this.settings.pagesize>=rowIndex;0===rowIndex&&this.cacheVirtualStats();var pos=rowIndex*this.virtualRange.rowHeight;return pos>=this.virtualRange.top&&pos<this.virtualRange.bottom},setVirtualHeight:function setVirtualHeight(){if(this.settings.virtualized&&this.virtualRange){var bottom=this.virtualRange.totalHeight-this.virtualRange.bottom,vTop=this.virtualRange.top;this.topSpacer=this.tableBody.find(".datagrid-virtual-row-top"),this.bottomSpacer=this.tableBody.find(".datagrid-virtual-row-bottom"),vTop>0&&!this.topSpacer.length&&(this.topSpacer=$('<tr class="datagrid-virtual-row-top" style="height: '.concat(vTop,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.prepend(this.topSpacer)),vTop>0&&this.topSpacer.length&&this.topSpacer.css("height","".concat(vTop,"px")),0===vTop&&(this.topSpacer.length||this.virtualRange.topRow<=1)&&this.topSpacer.remove(),bottom>0&&!this.bottomSpacer.length&&(this.bottomSpacer=$('<tr class="datagrid-virtual-row-bottom" style="height: '.concat(bottom,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.append(this.bottomSpacer)),bottom>0&&this.bottomSpacer.length&&this.bottomSpacer.css("height","".concat(bottom,"px")),bottom<=0&&(this.bottomSpacer.length||this.virtualRange.bottomRow>=this.settings.dataset.length)&&this.bottomSpacer.remove()}},setAlternateRowShading:function setAlternateRowShading(){this.settings.alternateRowShading&&this.settings.treeGrid&&$('tr[role="row"]:visible',this.tableBody).removeClass("alt-shading").filter(":odd").addClass("alt-shading")},formatValue:function formatValue(formatter,row,cell,fieldValue,columnDef,rowData,api){return api=api||this,void 0===formatter&&(formatter=this.defaultFormatter),"string"==typeof formatter?formatters[formatter](row,cell,fieldValue,columnDef,rowData,api).toString():formatter(row,cell,fieldValue,columnDef,rowData,api).toString()},rowHtml:function rowHtml(rowData,dataRowIdx,actualIndex,isGroup,isFooter,actualIndexLineage,skipChildren){var isEven,skipColumns,rowColspan,isSummaryRow=this.settings.summaryRow&&!isGroup&&isFooter,activePage=this.pagerAPI?this.pagerAPI.activePage:1,containerHtml={left:"",center:"",right:""},d=this.settings.treeDepth?this.settings.treeDepth[dataRowIdx]:0,depth=null,j=0,isHidden=!1;if(!rowData)return"";var isRowDisabled=!1;this.settings.isRowDisabled&&"function"==typeof this.settings.isRowDisabled&&(this.settings.isRowDisabled(actualIndex,rowData)&&(isRowDisabled=!0));if(rowData.isRowDisabled&&(isRowDisabled=!0),depth=d=d?d.depth:0,this.settings.treeDepth&&this.settings.treeDepth.length)for(var i=0;i<this.settings.treeDepth.length;i++){var treeDepthItem=this.settings.treeDepth[i];if(dataRowIdx===treeDepthItem.idx-1){for(var parentNode=null,currentDepth=0,i2=i;i2>=0&&!((currentDepth=this.settings.treeDepth[i2].depth<currentDepth||0===currentDepth?this.settings.treeDepth[i2].depth:currentDepth)<treeDepthItem.depth&&(parentNode=this.settings.treeDepth[i2],1===currentDepth||void 0!==parentNode.node.expanded&&!parentNode.node.expanded));i2--);isHidden=!(!parentNode||void 0===parentNode.node.expanded||parentNode.node.expanded)||rowData._isFilteredOut,depth=treeDepthItem.depth;break}}if(this.settings.groupable&&!isFooter){var groupSettings=this.settings.groupable;isHidden=void 0!==groupSettings.expanded&&!groupSettings.expanded,groupSettings.expanded&&"function"==typeof groupSettings.expanded&&(isHidden=!groupSettings.expanded(dataRowIdx,0,null,null,rowData,this),this.isFooterHidden=isHidden)}var visibleColumnsLeft=this.settings.frozenColumns.left.length,visibleColumnsRight=this.settings.frozenColumns.right.length,visibleColumnsCenter=this.visibleColumns().length-visibleColumnsLeft-visibleColumnsRight;if(this.settings.groupable&&isGroup&&!isFooter){var groupRowHtml=formatters.GroupRow(dataRowIdx,0,null,null,rowData,this);return containerHtml.left='<tr class="datagrid-rowgroup-header'.concat(isHidden?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(visibleColumnsLeft,'">').concat(groupRowHtml.left||"<span>&nbsp;</span>","</td></tr>"),containerHtml.center='<tr class="datagrid-rowgroup-header'.concat(isHidden?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(visibleColumnsCenter,'">').concat(groupRowHtml.center||"<span>&nbsp;</span>","</td></tr>"),containerHtml.right='<tr class="datagrid-rowgroup-header'.concat(isHidden?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(visibleColumnsRight,'">').concat(groupRowHtml.right||"<span>&nbsp;</span>","</td></tr>"),containerHtml}if(this.settings.groupable&&isGroup&&isFooter){var groupFooterHtml=formatters.GroupFooterRow(dataRowIdx,0,null,null,rowData,this);return containerHtml.left='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(groupFooterHtml.left||"<span>&nbsp;</span>","</tr>"),containerHtml.center='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(groupFooterHtml.center||"<span>&nbsp;</span>","</tr>"),containerHtml.right='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(groupFooterHtml.right||"<span>&nbsp;</span>","</tr>"),this.isFooterHidden=!1,containerHtml}var ariaRowindex=dataRowIdx+1+(this.settings.source&&!this.settings.indeterminate?(activePage-1)*this.settings.pagesize:0);isEven=this.recordCount%2==0;var isSelected=this.isRowSelected(rowData),isActivated=rowData._rowactivated,rowStatus={class:"",svg:""};rowData&&rowData.rowStatus&&("new"!==rowData.rowStatus.icon||this.settings.showNewRowIndicator)&&(rowStatus.show=!0,rowStatus.class=" rowstatus-row-".concat(rowData.rowStatus.icon),rowStatus.icon="success"===rowData.rowStatus.icon?"#icon-check":"#icon-exclamation",rowStatus.title=""!==rowData.rowStatus.tooltip?' title="'.concat(rowData.rowStatus.tooltip,'"'):"",rowStatus.svg='<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"'.concat(rowStatus.title,'><use href="').concat(rowStatus.icon,'"></use></svg>'));var dynamicRowHeight="";for(this.settings.fixedRowHeight&&"function"==typeof this.settings.fixedRowHeight&&(dynamicRowHeight=' style="height: '.concat(this.settings.fixedRowHeight(this.recordCount,ariaRowindex,actualIndex,rowData),'"px" ')),this.settings.fixedRowHeight&&"number"==typeof this.settings.fixedRowHeight&&(dynamicRowHeight=' style="height: '.concat(this.settings.fixedRowHeight,'px" ')),containerHtml.center='<tr role="row" aria-rowindex="'.concat(ariaRowindex,'"')+' data-index="'.concat(actualIndex,'"').concat(actualIndexLineage?' data-lineage="'.concat(actualIndexLineage,'"'):"").concat(this.settings.treeGrid&&rowData.children?' aria-expanded="'.concat(rowData.expanded?'true"':'false"'):"").concat(this.settings.treeGrid?' aria-level="'.concat(depth,'"'):"").concat(isRowDisabled?' aria-disabled="true"':"").concat(isSelected?' aria-selected="true"':"",' class="datagrid-row').concat(rowStatus.class).concat(isHidden?" is-hidden":"").concat(rowData._isFilteredOut?" is-filtered":"").concat(isActivated?" is-rowactivated":"").concat(isRowDisabled?" is-rowdisabled":"").concat(isSelected?"mixed"===this.settings.selectable?" is-selected hide-selected-color":" is-selected":"").concat(this.settings.alternateRowShading&&!isEven?" alt-shading":"").concat(isSummaryRow?" datagrid-summary-row":"").concat(this.settings.cellNavigation||!1===this.settings.selectable?"":" is-clickable").concat(this.settings.treeGrid?rowData.children?" datagrid-tree-parent":depth>1?" datagrid-tree-child":"":"",'"').concat(dynamicRowHeight,">"),containerHtml.left=containerHtml.center,containerHtml.right=containerHtml.center,j=0;j<this.settings.columns.length;j++){var col=this.settings.columns[j],container=this.getContainer(col.id),cssClass="",defaultFormatter=col.summaryRowFormatter||col.formatter||this.defaultFormatter,formatter=isSummaryRow?defaultFormatter:col.formatter||this.defaultFormatter,formatted=this.formatValue(formatter,dataRowIdx,j,this.fieldValue(rowData,this.settings.columns[j].field),this.settings.columns[j],rowData,this);if(0===formatted.indexOf('<span class="is-readonly">')&&(col.readonly=!0),(formatted.indexOf("datagrid-checkbox")>-1||formatted.indexOf("btn-actions")>-1)&&(cssClass+=" l-center-text"),formatted.indexOf("trigger")>-1&&(cssClass+=" datagrid-trigger-cell"),-1===formatted.indexOf("trigger")&&col&&col.editor){var editorName=this.getEditorName(col.editor);["colorpicker","dropdown","time","lookup","date"].indexOf(editorName)>=0&&(cssClass+=" datagrid-trigger-cell datagrid-no-default-formatter")}if(col.editor&&this.settings.editable&&(cssClass+=" has-editor"),col.expanded&&(this.treeExpansionField=col.expanded),col.align&&(cssClass+=" l-".concat(col.align,"-text")),"ellipsis"===col.textOverflow&&(cssClass+=" text-ellipsis"),col.uppercase&&(cssClass+=" uppercase-text"),cssClass+=col.readonly?" is-readonly":"",cssClass+=col.hidden?" is-hidden":"",col.isEditable&&!col.readonly){var fieldVal=this.fieldValue(rowData,this.settings.columns[j].field);col.isEditable(ariaRowindex-1,j,fieldVal,col,rowData)||(cssClass+=" is-readonly")}var ariaReadonly="selectionCheckbox"===col.id||!col.readonly&&void 0!==col.editor?"":'aria-readonly="true"';if(col.isReadonly&&!col.readonly&&"selectionCheckbox"!==col.id){var _fieldVal=this.fieldValue(rowData,this.settings.columns[j].field);col.isReadonly(this.recordCount,j,_fieldVal,col,rowData)&&(cssClass+=" is-cell-readonly",ariaReadonly='aria-readonly="true"')}var cellValue=this.fieldValue(rowData,this.settings.columns[j].field);col.cssClass&&"function"==typeof col.cssClass&&(cssClass+=" ".concat(col.cssClass(this.recordCount,j,cellValue,col,rowData))),col.cssClass&&"string"==typeof col.cssClass&&(cssClass+=" ".concat(col.cssClass)),cssClass+=col.focusable?" is-focusable":"",cssClass+="Actions"===formatter.name?" has-btn-actions":"";var rowspan=this.calculateRowspan(cellValue,dataRowIdx,col);if(""!==rowspan){var colspan=null,colspanLeft=null;skipColumns>0&&!col.hidden&&(skipColumns-=1,cssClass+=" is-hidden",this.settings.frozenColumns.left&&this.settings.frozenColumns.left.length>0&&"center"===this.getContainer(col.id)&&(j===this.settings.frozenColumns.left.length&&(cssClass=cssClass.replace(" is-hidden"," is-invisible"),(colspanLeft=rowColspan-this.settings.frozenColumns.left.length+1)+1===this.settings.columns.length-j&&(cssClass+=" is-last-visible")),0===skipColumns&&1===this.settings.frozenColumns.left.length&&j<this.visibleColumns().length&&(cssClass=cssClass.replace(" is-hidden","")),0===skipColumns&&rowColspan===j&&(cssClass+=" is-invisible")));var leftLength=this.settings.frozenColumns.left.length;if(col.colspan&&"function"==typeof col.colspan){var _fieldVal2=this.fieldValue(rowData,this.settings.columns[j].field);colspan=col.colspan(ariaRowindex-1,j,_fieldVal2,col,rowData,this);var max=this.settings.columns.length-j;(colspan=colspan&&colspan>max?max:colspan)&&colspan>1?(rowColspan=colspan,skipColumns=colspan-1,leftLength>0&&colspan-leftLength>0&&((colspan-=1===leftLength&&colspan===this.visibleColumns().length-1?0:leftLength)===j||leftLength+j===colspan||leftLength>j&&colspan>j)&&(cssClass+=" is-last-visible"),col.align&&(cssClass=cssClass.replace(" l-".concat(col.align,"-text"),"")),this.settings.frozenColumns.left&&leftLength>0&&leftLength===colspan&&(cssClass+=" is-last-visible"),this.visibleColumns().length===j+colspan&&(cssClass+=" is-last-visible"),cssClass+=" l-left-text"):colspan=null}if(colspanLeft&&(colspan=colspanLeft),0!==j&&(rowStatus.class="",rowStatus.svg=""),""!==rowStatus.class&&(cssClass+=" rowstatus-cell"),this.isCellDirty(this.settings.groupable?actualIndex:dataRowIdx,j)&&(cssClass+=" is-dirty-cell"),""!==cssClass&&(cssClass=cssClass.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")),containerHtml[container]+='<td role="gridcell" '.concat(ariaReadonly,' aria-colindex="').concat(j+1,'"')+' aria-describedby="'.concat(this.uniqueId("-header-".concat(j)),'"').concat(isSelected?' aria-selected="true"':"").concat(cssClass?' class="'.concat(cssClass,'"'):"").concat(colspan?' colspan="'.concat(colspan,'"'):"").concat(col.tooltip&&"string"==typeof col.tooltip?' title="'.concat(col.tooltip.replace("{{value}}",cellValue),'"'):"").concat(this.settings.columnGroups?'headers = "'.concat(this.uniqueId("-header-".concat(j))," ").concat(this.getColumnGroup(j),'"'):"").concat(rowspan||"",">").concat(rowStatus.svg,'<div class="datagrid-cell-wrapper">'),col.contentVisible)col.contentVisible(dataRowIdx+1,j,cellValue,col,rowData)||(formatted="");this.settings.onPostRenderCell&&col.component&&(containerHtml[container]+='<div class="content"></div>',formatted=""),containerHtml[container]+="".concat(formatted,"</div></td>")}}if(containerHtml.left+="</tr>",containerHtml.center+="</tr>",containerHtml.right+="</tr>",this.settings.rowTemplate){var tmpl=this.settings.rowTemplate,item=rowData,height=this.settings.rowTemplateHeight||107,renderedTmpl="";Tmpl&&item&&(renderedTmpl=Tmpl.compile("{{#dataset}}".concat(tmpl,"{{/dataset}}"),{dataset:item})),this.hasLeftPane&&(containerHtml.left+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(visibleColumnsLeft,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(height,'px"></div></div>\n          </td></tr>')),containerHtml.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(visibleColumnsCenter,'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding">').concat(renderedTmpl,"</div></div>\n        </td></tr>"),this.hasRightPane&&(containerHtml.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(visibleColumnsRight,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(height,'px"></div></div>\n          </td></tr>'))}if(this.settings.expandableRow&&(this.hasLeftPane&&(containerHtml.left+='<tr class="datagrid-expandable-row"><td colspan="'.concat(visibleColumnsLeft,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>')),containerHtml.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(visibleColumnsCenter,'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n        </td></tr>'),this.hasRightPane&&(containerHtml.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(visibleColumnsRight,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>'))),rowData.children&&!skipChildren&&!rowData._isFilteredOut)for(var _i7=0,l=rowData.children.length;_i7<l;_i7++){var lineage=actualIndexLineage?"".concat(actualIndexLineage,".").concat(actualIndex):"".concat(actualIndex);this.recordCount++;var childRowHtml=this.rowHtml(rowData.children[_i7],this.recordCount,_i7,!1,!1,lineage);containerHtml.left+=childRowHtml.left,containerHtml.center+=childRowHtml.center,containerHtml.right+=childRowHtml.right}return containerHtml},getEditorName:function getEditorName(editor){if(!editor)return"";var editorName=editor.name;if(!function f(){}.name){editorName=function getFnName(fn){return(fn.toString().match(/function (.+?)\(/)||[,""])[1]}(editor)}return editorName?editorName.toLowerCase():""},calculateTextWidth:function calculateTextWidth(columnDef){var title=columnDef.name||"",max=0,maxWidth=0,padding=0,maxText="",hasButton=!1;if(columnDef.formatter===formatters.Colorpicker)maxText="";else if(columnDef.formatter===formatters.Dropdown&&columnDef.options){for(var val="",i=0;i<columnDef.options.length;i++)columnDef.options[i].label.length>val.length&&(val=columnDef.options[i].label);val=this.formatValue(columnDef.formatter,0,0,val,columnDef,null,this),maxText=val=xssUtils.stripHTML(val)}else{var len=0,arrayToTest=this.settings.dataset;this.settings.groupable&&(arrayToTest=this.originalDataset);for(var _i8=0;_i8<arrayToTest.length;_i8++){var _val=this.fieldValue(arrayToTest[_i8],columnDef.field),_row=arrayToTest[_i8];if(hasButton=(_val=this.formatValue(columnDef.formatter,_i8,0,_val,columnDef,_row,this)).toString().indexOf("btn-secondary")>-1,len=(_val=xssUtils.stripHTML(_val)).toString().length,this.settings.groupable&&_row)for(var k=0;k<_row.length;k++){var groupVal=this.fieldValue(_row[k],columnDef.field);groupVal=this.formatValue(columnDef.formatter,_i8,0,groupVal,columnDef,_row,this),(len=(groupVal=xssUtils.stripHTML(groupVal)).toString().length)>max&&(max=len,maxText=groupVal)}len>max&&(max=len,maxText=_val)}if(this.filterExpr&&this.filterExpr.length>0){var colFilter=$.grep(this.filterExpr,(function(e){return e.columnId===columnDef.id}));if(colFilter&&1===colFilter.length){var _val2=colFilter[0].value;(len=_val2.toString().length)>max&&(max=len,maxText=_val2)}}if(""===maxText&&(columnDef.formatter===formatters.Date||columnDef.formatter===formatters.Time)){var _val3=new Date(9999,11,31,23,59,59,999);_val3=this.formatValue(columnDef.formatter,0,0,_val3,columnDef,null,this),maxText=_val3=xssUtils.stripHTML(_val3)}}var hasTag=!!columnDef.formatter&&columnDef.formatter.toString().indexOf('<span class="tag')>-1;padding+=45,!!columnDef.formatter&&columnDef.formatter.toString().indexOf("datagrid-alert-icon")>-1&&(padding+=20),hasTag&&(padding+=10),hasButton&&(padding+=50),this.settings.editable&&columnDef.editor===editors.Spinbox&&(padding+=46),!this.settings.editable||columnDef.formatter!==formatters.Dropdown&&columnDef.formatter!==formatters.Lookup&&columnDef.editor!==editors.Time||(padding+=10),this.settings.editable&&columnDef.editor===editors.Date&&(padding+=5),maxWidth=this.calculateTextRenderWidth(maxText)+padding,columnDef.formatter===formatters.Colorpicker&&(maxWidth=150);var headerPadding=void 0===columnDef.sortable||columnDef.sortable?48:40,minHeaderWidth=this.calculateTextRenderWidth(title,!0)+headerPadding;return columnDef.filterType&&this.settings.filterable&&(minHeaderWidth<40&&(minHeaderWidth=40),"checkbox"!==columnDef.filterType&&(""!==maxText?minHeaderWidth<maxWidth+40&&""!==maxText&&(minHeaderWidth=maxWidth+55):minHeaderWidth<120&&(minHeaderWidth=120))),Math.ceil(Math.max(maxWidth,minHeaderWidth))},calculateTextRenderWidth:function calculateTextRenderWidth(maxText,isHeader){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var context=this.canvas.getContext("2d");return this.fontCached&&this.fontHeaderCached||(this.fontCached=theme.currentTheme.id&&theme.currentTheme.id.indexOf("uplift")>-1?"400 16px arial":"400 14px arial",this.fontHeaderCached=theme.currentTheme.id&&theme.currentTheme.id.indexOf("uplift")>-1?"600 14px arial":"700 12px arial"),context.font=this.fontCached,isHeader&&(context.font=this.fontHeaderCached),context.measureText(maxText).width},setScrollClass:function setScrollClass(){if(this.hasLeftPane||this.hasRightPane){this.element.removeClass("has-vertical-scroll has-less-rows");var width=parseInt(this.bodyWrapperCenter[0].offsetWidth,10),hasScrollBarH=parseInt(this.bodyWrapperCenter[0].scrollWidth,10)>width,height=parseInt(this.bodyWrapperCenter[0].offsetHeight,10);parseInt(this.bodyWrapperCenter[0].scrollHeight,10)>height+2&&this.element.addClass("has-vertical-scroll"),hasScrollBarH&&this.element.addClass("has-horizontal-scroll")}},clearCache:function clearCache(){this.totalWidths.left=0,this.totalWidths.center=0,this.totalWidths.right=0,this.elemWidth=0,this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.fixColumnIds()},fixColumnIds:function fixColumnIds(){for(var i=0;i<this.settings.columns.length;i++){var col=this.settings.columns[i],colsById=this.columnById(col.id);if(colsById.length>1)for(var k=1;k<colsById.length;k++)colsById[k].id="".concat(colsById[k].id,"-").concat(k)}},getStretchColumnIdx:function getStretchColumnIdx(){var self=this,stretchColumnIdx=self.stretchColumnIdx;return-1===stretchColumnIdx&&"last"!==self.settings.stretchColumn&&self.headerNodes().each((function(i){$(this).attr("data-column-id")===self.settings.stretchColumn&&(stretchColumnIdx=i)})),stretchColumnIdx},columnWidth:function columnWidth(col,index){return this.elemWidth||(this.elemWidth=this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),this.widthSpecified=!1),this.calculateColumnWidth(col,index)},calculateColumnWidth:function calculateColumnWidth(col,index){var colPercWidth,visibleColumns=this.visibleColumns(!0),lastColumn=index===this.visibleColumns().length-1,container=this.getContainer(col.id);this.elemWidth||(this.elemWidth=this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),!this.elemWidth&&this.element.parent().is(".datagrid-default-modal-width")?(this.elemWidth=this.settings.paging?466:300,this.isInModal=!0):this.element.parent().is(".modal-body")&&(this.elemWidth=this.settings.paging?466:300,this.element.css("min-width")&&(this.elemWidth=parseInt(this.element.css("min-width"),10)),this.isInModal=!0),this.widthSpecified=!1,this.widthPixel=!1),col.width&&(this.widthSpecified=!0,this.widthPercent=!1),!this.widthPixel&&col.width&&(this.widthPixel="string"!=typeof col.width);var colWidth=col.width;"string"==typeof col.width&&-1===col.width.indexOf("px")&&(this.widthPercent=!0,colPercWidth=col.width.replace("%",""));var textWidth=this.calculateTextWidth(col);if(this.widthSpecified&&colWidth||(colWidth=Math.max(textWidth,colWidth||0)),(!this.widthSpecified||void 0===col.width)&&this.settings.sizeColumnsEqually&&-1===["selectionCheckbox","expander","drilldown","rowStatus","favorite"].indexOf(col.id)){var percentWidth=Math.round(this.elemWidth/visibleColumns.length);colWidth=percentWidth-(lastColumn?2:0),percentWidth<textWidth&&(colWidth=textWidth)}if("selectionCheckbox"!==col.id&&"favorite"!==col.id||(colWidth=43,col.width=colWidth),"favorite"===col.id&&(colWidth=62,col.width=colWidth),"expander"===col.id&&(colWidth=55,col.width=colWidth),"rowStatus"===col.id&&(colWidth=62,col.width=colWidth),"rowReorder"===col.id&&(colWidth=62,col.width=colWidth),"drilldown"===col.id&&(colWidth=78,col.width=colWidth),col.minWidth&&colWidth<col.minWidth&&(colWidth=col.minWidth),col.minWidth&&colWidth>col.maxWidth&&(colWidth=col.maxWidth),this.totalWidths[container]+=col.hidden?0:colWidth,"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&this.settings.stretchColumn===col.id)return this.stretchColumnIdx=index,this.stretchColumnWidth=colWidth,' style="width: 99%"';if(lastColumn){var diff=this.elemWidth-this.totalWidths[container];this.isInModal&&null===this.settings.stretchColumn&&!this.settings.sizeColumnsEqually&&diff>0&&!this.widthPercent&&!col.width&&(colWidth=this.elemWidth,col.width=colWidth),"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&(this.stretchColumnDiff=diff),this.hasLeftPane&&this.tableLeft.css("width",this.totalWidths.left),this.hasRightPane&&this.tableRight.css("width",this.totalWidths.right)}return this.widthPercent||void 0!==colWidth?' style="width: '.concat(this.widthPercent?"".concat(colPercWidth,"%"):"".concat(colWidth,"px"),'"'):""},calculateRowspan:function calculateRowspan(value,row,col){var total=0,min=null;if(!col.rowspan)return null;for(var i=0;i<this.settings.dataset.length;i++)value===this.settings.dataset[i][col.field]&&(total++,null===min&&(min=i));return row===min?' rowspan ="'.concat(total,'"'):""},calculateTotals:function calculateTotals(){return this.settings.totals=aggregators.aggregate(this.settings.dataset,this.settings.columns),this.settings.totals},setUnit:function setUnit(v){return v+(/(px|%)/i.test("".concat(v))?"":"px")},setupTooltips:function setupTooltips(rowstatus,isForced){if(rowstatus||isForced||this.settings.enableTooltips){var tooltipTimer,self=this,selector={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};this.settings.filterable?(selector.headerColumn="".concat(selector.th," .datagrid-column-wrapper"),selector.headerFilter="".concat(selector.th," .datagrid-filter-wrapper .btn-menu"),selector.header="".concat(selector.headerColumn,", ").concat(selector.headerFilter)):selector.header=selector.th,selector.iconAlert="".concat(selector.td," .icon-alert"),selector.iconSuccess="".concat(selector.td," .icon-success"),selector.iconError="".concat(selector.td," .icon-error"),selector.iconInfo="".concat(selector.td," .icon-info"),selector.icons="".concat(selector.iconAlert,", ").concat(selector.iconSuccess,", ").concat(selector.iconError,", ").concat(selector.iconInfo),rowstatus&&this.settings.enableTooltips?selector.str="".concat(selector.header,", ").concat(selector.td,", ").concat(selector.icons,", ").concat(selector.rowstatus):selector.str=rowstatus?"".concat(selector.header,", ").concat(selector.rowstatus):"".concat(selector.header,", ").concat(selector.td,", ").concat(selector.icons);var handleShow=function handleShow(elem,delay){delay=void 0===delay?400:delay,tooltipTimer=setTimeout((function(){var isHeaderColumn=utils.hasClass(elem,"datagrid-column-wrapper"),isPopup=!!utils.hasClass(elem.parentNode,"datagrid-filter-wrapper")&&elem.parentNode.querySelectorAll(".popupmenu.is-open").length>0,tooltip=$(elem).data("gridtooltip")||self.cacheTooltip(elem),containerEl=isHeaderColumn?elem.parentNode:elem,width=self.getOuterWidth(containerEl);tooltip&&(tooltip.forced||tooltip.textwidth>width-35)&&!isPopup&&self.showTooltip(tooltip)}),delay)},handleHide=function handleHide(elem,delay){delay=void 0===delay?400:delay,clearTimeout(tooltipTimer),setTimeout((function(){self.hideTooltip(),utils.hasClass(elem.parentNode,"datagrid-filter-wrapper")&&self.removeTooltipData(elem)}),delay)};this.element.off("mouseenter.gridtooltip",selector.str).on("mouseenter.gridtooltip",selector.str,(function(){handleShow(this)})).off("mouseleave.gridtooltip click.gridtooltip",selector.str).on("mouseleave.gridtooltip click.gridtooltip",selector.str,(function(){handleHide(this)})).off("longpress.gridtooltip",selector.str).on("longpress.gridtooltip",selector.str,(function(){handleShow(this,0)})).off("keydown.gridtooltip",selector.str).on("keydown.gridtooltip",selector.str,(function(e){var key=e.which||e.keyCode||e.charCode||0,handle=!1;return e.shiftKey&&112===key?handleShow(this,0):27===key&&(handle=self.isGridtooltip(),handleHide(this,0)),handle&&e.preventDefault(),!handle})),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").on("mouseenter.tableerrortooltip",".icon",(function(){handleShow(this)})).off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").on("mouseleave.tableerrortooltip click.tableerrortooltip",".icon",(function(){handleHide(this)})).off("longpress.tableerrortooltip",".icon").on("longpress.tableerrortooltip",".icon",(function(){handleShow(this,0)}))}},getOuterWidth:function getOuterWidth(element){var style=getComputedStyle(element),width=element.offsetWidth;return width+=parseInt(style.marginLeft,10)+parseInt(style.marginRight,10)},closest:function closest(el,fn){return el&&(fn(el)?el:this.closest(el.parentNode,fn))},headerNodes:function headerNodes(){return this.headerRow?this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th"):$()},colGroupNodes:function colGroupNodes(){return this.headerRow?this.element.find("colgroup col"):$()},updateRow:function updateRow(idx,data){var s=this.settings,rowData=data;rowData||(rowData=s.treeGrid?s.treeDepth[idx].node:this.getActiveDataset()[idx]);for(var j=0;j<this.settings.columns.length;j++){var col=this.settings.columns[j];col.hidden||this.updateCellNode(idx,j,this.fieldValue(rowData,col.field),!0)}},updateColumns:function updateColumns(columns,columnGroups){void 0===columnGroups&&(columnGroups=null);var conditions=[];this.settings.filterable&&this.filterRowRendered&&(conditions=this.filterConditions()),this.settings.columns=columns,columnGroups&&(this.settings.columnGroups=columnGroups),this.rerender(),this.element.trigger("columnchange",[{type:"updatecolumns",columns:this.settings.columns}]),this.saveUserSettings(),this.settings.filterable&&this.filterRowRendered&&this.setFilterConditions(conditions)},saveUserSettings:function saveUserSettings(){this.element.trigger("settingschanged",[{rowHeight:this.settings.rowHeight,columns:this.settings.columns,sortOrder:this.sortColumn,pagesize:this.settings.pagesize,showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.pagerAPI?this.pagerAPI.activePage:1,filter:this.filterConditions()}]);var savedSettings=this.settings.saveUserSettings;!$.isEmptyObject(savedSettings)&&this.canUseLocalStorage()&&(savedSettings.columns&&(localStorage[this.uniqueId("usersettings-columns")]=this.copyThenStringify(this.settings.columns)),savedSettings.rowHeight&&(localStorage[this.uniqueId("usersettings-row-height")]=this.settings.rowHeight),savedSettings.sortOrder&&(localStorage[this.uniqueId("usersettings-sort-order")]=JSON.stringify(this.sortColumn)),savedSettings.pagesize&&(localStorage[this.uniqueId("usersettings-pagesize")]=this.settings.pagesize),savedSettings.showPageSizeSelector&&(localStorage[this.uniqueId("usersettings-show-pagesize-selector")]=this.settings.showPageSizeSelector),savedSettings.activePage&&this.pagerAPI&&(localStorage[this.uniqueId("usersettings-active-page")]=this.pagerAPI.activePage),savedSettings.filter&&(localStorage[this.uniqueId("usersettings-filter")]=JSON.stringify(this.filterConditions())))},canUseLocalStorage:function canUseLocalStorage(){try{if(localStorage.getItem)return!0}catch(exception){return!1}return!1},setOriginalColumns:function setOriginalColumns(){this.originalColumns=utils.deepCopy(this.settings.columns)},columnsFromString:function columnsFromString(columnStr,excludeWidth){if(!columnStr)return[];var columns=JSON.parse(columnStr);if(!columns)return[];for(var i=0;i<columns.length;i++){var isHidden=void 0,orgColumn=this.columnById(columns[i].id),width=orgColumn.width;orgColumn&&(isHidden=columns[i].hidden,$.extend(columns[i],orgColumn[0]),void 0!==isHidden?columns[i].hidden=isHidden:delete columns[i].hidden,excludeWidth&&(columns[i].width=width))}return columns},restoreColumns:function restoreColumns(cols){if(this.settings.saveColumns&&this.canUseLocalStorage())if(cols)this.updateColumns(cols);else{var lsCols=localStorage[this.uniqueId("columns")];!cols&&lsCols&&(this.originalColumns=utils.deepCopy(this.settings.columns),this.settings.columns=this.columnsFromString(lsCols))}},restoreUserSettings:function restoreUserSettings(settings){var options=this.settings.saveUserSettings;if(settings||!$.isEmptyObject(options)&&this.canUseLocalStorage())if(settings){if(settings.columns&&this.updateColumns(settings.columns),settings.rowHeight&&this.rowHeight(settings.rowHeight),settings.sortOrder&&this.setSortColumn(settings.sortOrder.sortId,settings.sortOrder.sortAsc),settings.pagesize&&(this.settings.pagesize=parseInt(settings.pagesize,10),this.pagerAPI.settings.pagesize=parseInt(settings.pagesize,10),settings.activePage||this.pagerAPI.setActivePage(1,!0)),settings.showPageSizeSelector&&(this.settings.showPageSizeSelector=settings.showPageSizeSelector,this.pagerAPI.showPageSizeSelector(settings.showPageSizeSelector)),settings.filter&&this.applyFilter(settings.filter,"restore"),settings.activePage){var savedActivePage=parseInt(settings.activePage,10);this.pagerAPI.setActivePage(savedActivePage,!0),this.restoreActivePage=!0}}else{if(options.columns){var savedColumns=localStorage[this.uniqueId("usersettings-columns")];savedColumns&&(this.settings.columns=this.columnsFromString(savedColumns))}if(options.rowHeight){var savedRowHeight=localStorage[this.uniqueId("usersettings-row-height")];savedRowHeight&&(this.settings.rowHeight=savedRowHeight)}if(options.sortOrder){var savedSortOrder=localStorage[this.uniqueId("usersettings-sort-order")];savedSortOrder&&(this.sortColumn=JSON.parse(savedSortOrder),this.restoreSortOrder=!0)}if(options.pagesize){var savedPagesize=localStorage[this.uniqueId("usersettings-pagesize")];savedPagesize&&(this.settings.pagesize=parseInt(savedPagesize,10))}if(options.showPageSizeSelector){var savedShowPageSizeSelector=localStorage[this.uniqueId("usersettings-show-pagesize-selector")];(savedShowPageSizeSelector="true"===savedShowPageSizeSelector.toString().toLowerCase())&&(this.settings.showPageSizeSelector=savedShowPageSizeSelector)}if(options.activePage){var _savedActivePage=localStorage[this.uniqueId("usersettings-active-page")];_savedActivePage&&(this.savedActivePage=parseInt(_savedActivePage,10),this.restoreActivePage=!0)}if(options.filter){var savedFilter=localStorage[this.uniqueId("usersettings-filter")];savedFilter&&(this.savedFilter=JSON.parse(savedFilter),this.restoreFilter=!0)}}},copyThenStringify:function copyThenStringify(columns){if(!columns)return JSON.stringify(columns);var clone=columns.map((function(col){var newCol=utils.extend({},col);return newCol.editorOptions&&delete newCol.editorOptions,newCol}));return JSON.stringify(clone)},resetColumns:function resetColumns(){if(this.canUseLocalStorage()&&localStorage.removeItem(this.uniqueId("columns")),this.originalColumns){var originalColumns=utils.deepCopy(this.originalColumns),columnGroups=this.settings.columnGroups&&this.originalColGroups?this.originalColGroups:null;this.updateColumns(originalColumns,columnGroups)}this.clearFilter()},hideColumn:function hideColumn(id){var idx=this.columnIdxById(id);if(-1!==idx){if(this.settings.columns[idx].hidden=!0,this.headerNodes().eq(idx).addClass("is-hidden"),this.colGroupNodes().eq(idx).addClass("is-hidden"),this.tableBody.find("> tr > td:nth-child(".concat(idx+1,")")).addClass("is-hidden"),this.updateColumnGroup(),this.hasColSpans){var colSpan=this.element.find(".datagrid-header th").eq(idx).attr("colspan");if(colSpan&&colSpan>0){colSpan-=1;for(var i=0;i<colSpan;i++)idx+=colSpan,this.tableBody.find("> tr > td:nth-child(".concat(idx+1,")")).addClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"hidecolumn",index:idx,columns:this.settings.columns}]),this.saveUserSettings()}},syncExpandableRowColspan:function syncExpandableRowColspan(){var visibleColumnCount=this.visibleColumns().length;this.tableBody.find(".datagrid-expandable-row > td").attr("colspan",visibleColumnCount)},showColumn:function showColumn(id){var idx=this.columnIdxById(id);if(-1!==idx){if(this.settings.columns[idx].hidden=!1,this.headerNodes().eq(idx).removeClass("is-hidden"),this.tableBody.find("> tr > td:nth-child(".concat(idx+1,")")).removeClass("is-hidden"),this.bodyColGroup&&this.bodyColGroup.find("col").eq(idx).removeClass("is-hidden"),this.updateColumnGroup(),this.hasColSpans){var colSpan=this.element.find(".datagrid-header th").eq(idx).attr("colspan");if(colSpan&&colSpan>0){colSpan-=1;for(var i=0;i<colSpan;i++)idx+=colSpan,this.tableBody.find("> tr > td:nth-child(".concat(idx+1,")")).removeClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"showcolumn",index:idx,columns:this.settings.columns}]),this.saveUserSettings()}},exportToCsv:function exportToCsv(fileName,customDs,separator){excel.exportToCsv(fileName,customDs,separator,this)},exportToExcel:function exportToExcel(fileName,worksheetName,customDs){excel.exportToExcel(fileName,worksheetName,customDs,this)},copyToDataSet:function copyToDataSet(pastedValue,rowCount,colIndex,dataSet){excel.copyToDataSet(pastedValue,rowCount,colIndex,dataSet,this)},personalizeColumns:function personalizeColumns(){var _this6=this,self=this,markup='<div class="listview-search alternate-bg"><label class="audible" for="gridfilter">Search</label><input class="searchfield" placeholder="'.concat(Locale.translate("SearchColumnName"),'" name="searchfield" id="gridfilter"></div>');markup+='<div class="listview alternate-bg" id="search-listview"><ul></ul></div>',$("body").modal({title:Locale.translate("PersonalizeColumns"),content:markup,cssClass:"full-width datagrid-columns-dialog",buttons:[{text:Locale.translate("Close"),click:function click(e,modal){modal.close(),$("body").off("beforeopen.datagrid")}}]}).off("beforeopen.datagrid").on("beforeopen.datagrid",(function(e,modal){modal&&(self.isColumnsChanged=!1,modal.element.find(".searchfield").searchfield({clearable:!0}),modal.element.find(".listview").listview({source:_this6.settings.columns,template:'\n            <ul>\n            {{#dataset}}\n              {{#name}}\n              <li>\n                <a href="#" target="_self" tabindex="-1">\n                  <label class="inline">\n                    <input tabindex="-1" type="checkbox" class="checkbox" {{^hideable}}disabled{{/hideable}} {{^hidden}}checked{{/hidden}} data-column-id="{{id}}"/>\n                    <span class="label-text">{{name}}</span>\n                  </label>\n                </a>\n              </li>\n              {{/name}}\n            {{/dataset}}\n            </ul>',searchable:!0,selectOnFocus:!1,listFilterSettings:{filterMode:"contains",searchableTextCallback:function searchableTextCallback(item){return item.name}}}).off("selected.datagrid").on("selected.datagrid",(function(selectedEvent,args){var chk=args.elem.find(".checkbox"),id=chk.attr("data-column-id"),isChecked=chk.prop("checked");if(args.elem.removeClass("is-selected hide-selected-color"),!chk.is(":disabled")){self.isColumnsChanged=!0;var lv={node:{},api:$(this).data("listview")};if(lv.api){var idx=self.columnIdxById(id);-1!==idx&&lv.api.settings.dataset[idx]&&(lv.node=lv.api.settings.dataset[idx])}isChecked?(self.hideColumn(id),chk.prop("checked",!1),lv.node.hidden=!0):(self.showColumn(id),chk.prop("checked",!0),lv.node.hidden=!1),self.settings.groupable&&self.rerender()}})),modal.element.on("close.datagrid",(function(){self.isColumnsChanged=!1})),modal.element.on("keydown.datagrid",(function(event){27===event.keyCode&&(modal.close(),$("body").off("beforeopen.datagrid"))})))}))},setColumnWidth:function setColumnWidth(id,width,set){var percent=parseFloat(width),columnSettings=this.columnById(id)[0],idx=-1;if(percent&&("string"==typeof id&&this.headerNodes().each((function(i){$(this).attr("data-column-id")===id&&(idx=i)})),"number"!=typeof width&&(width=percent/100*this.element.width()),!(Math.abs(width-columnSettings.width)<2))){if("number"==typeof columnSettings.colspan&&(width/=columnSettings.colspan),columnSettings&&(columnSettings.width=width),set)this.bodyColGroup.find("col").eq(idx)[0].style.width="".concat(width,"px");this.element.trigger("columnchange",[{type:"resizecolumn",index:idx,columns:this.settings.columns}]),this.saveUserSettings()}},isEllipsisActiveHeader:function isEllipsisActiveHeader(column){return(void 0===(column=column||{}).sortable||column.sortable)&&"ellipsis"===column.textOverflow},activeEllipsisHeaderAll:function activeEllipsisHeaderAll(){for(var i=0,l=this.settings.columns.length;i<l;i++){var id=this.settings.columns[i].id,column=this.columnById(id)[0];if(this.isEllipsisActiveHeader(column)){var columnEl=this.element[0].querySelector('.datagrid-header th[data-column-id="'.concat(id,'"]'));this.activeEllipsisHeader(columnEl)}}},activeEllipsisHeader:function activeEllipsisHeader(columnEl){if(columnEl){var textEl=columnEl.querySelector(".datagrid-column-wrapper .datagrid-header-text"),isEllipsisActive=columnEl.scrollWidth<textEl.scrollWidth+65;columnEl.classList[isEllipsisActive?"add":"remove"]("is-ellipsis-active")}},createResizeHandle:function createResizeHandle(){var _this7=this,self=this;if(!this.resizeHandle){var column,columnId,widthToSet,nextWidthToSet,nextColumnId;this.resizeHandle=$('<div class="resize-handle" aria-hidden="true"></div>'),this.settings.columnGroups&&(this.resizeHandle[0].style.height="80px"),this.settings.filterable&&(this.resizeHandle[0].style.height="62px"),this.element.find("table").before(this.resizeHandle);var usingShiftKey=!1;this.resizeHandle.drag({axis:"x"}).on("dragstart.datagrid",(function(){self.currentHeader&&(self.dragging=!0,usingShiftKey=!1,columnId=self.currentHeader.attr("data-column-id"),column=self.columnById(columnId)[0],self.isEllipsisActiveHeader(column)&&self.currentHeader[0].classList.add("is-ellipsis-active"))})).on("drag.datagrid",(function(e,ui){if(self.currentHeader){var minWidth=column.minWidth||12,maxWidth=column.maxWidth||1e3,idx=self.currentHeader.index();_this7.dragging=!0;var left=ui.left+5,currentCol=_this7.bodyColGroup.find("col").eq(idx)[0],currentColWidth=parseInt(self.currentHeader.width(),10),cssWidth=parseInt(currentCol.style.width||currentColWidth,10);currentCol.style.width.indexOf("%")>-1&&(cssWidth=currentColWidth);var offsetParentLeft=parseFloat(self.currentHeader.offsetParent().offset().left),offsetLeft=parseFloat(self.currentHeader.offset().left),diff=currentColWidth-(left-(0===idx?0:offsetLeft-offsetParentLeft-2));if((widthToSet=cssWidth-diff)<minWidth||widthToSet>maxWidth)self.resizeHandle.css("cursor","inherit");else if(widthToSet!==cssWidth&&(currentCol.style.width="".concat(widthToSet,"px"),keyboard.pressedKeys.get("Shift")&&(usingShiftKey=!0),"fit"===_this7.settings.resizeMode&&!usingShiftKey||"flex"===_this7.settings.resizeMode&&usingShiftKey)){var nextIdx=Locale.isRTL()?idx+1:idx-1,nextColSettings=self.settings.columns[nextIdx];if(!nextColSettings)return;var nextMinWidth=nextColSettings.minWidth||12,nextMaxWidth=nextColSettings.maxWidth||1e3,nextColumn=Locale.isRTL()?DOM.getPreviousSibling(self.currentHeader,":not(.is-hidden)"):DOM.getNextSibling(self.currentHeader,":not(.is-hidden)");nextColumnId=nextColumn.getAttribute("data-column-id");var nextCol=Locale.isRTL()?DOM.getPreviousSibling(currentCol,":not(.is-hidden)"):DOM.getNextSibling(currentCol,":not(.is-hidden)"),nextColWidth=parseInt(nextColumn.offsetWidth,10),nextCssWidth=parseInt(nextCol.style.width||nextColWidth,10);if(nextCol.style.width.indexOf("%")>-1&&(nextCssWidth=nextColWidth),(nextWidthToSet=nextCssWidth+diff)<nextMinWidth||nextWidthToSet>nextMaxWidth)return void self.resizeHandle.css("cursor","inherit");if(nextWidthToSet===nextCssWidth||!nextCol)return;nextCol.style.width="".concat(nextWidthToSet,"px")}}})).on("dragend.datagrid",(function(){_this7.dragging=!1,self.isEllipsisActiveHeader(column)&&self.activeEllipsisHeader(self.currentHeader[0]),self.setColumnWidth(columnId,widthToSet),nextColumnId&&("fit"===_this7.settings.resizeMode&&!usingShiftKey||"flex"===_this7.settings.resizeMode&&usingShiftKey)&&self.setColumnWidth(nextColumnId,nextWidthToSet)}))}},displayCounts:function displayCounts(totals){var countText,count=this.tableBody.find("tr:visible").length,groupCount=0,groupCountText="",isClientSide=this.settings.paging&&!this.settings.source,formatInteger=function formatInteger(v){return Locale.formatNumber(v,{style:"integer"})};if(!isClientSide&&totals||(this.recordCount=this.settings.dataset.length,count=this.settings.dataset.length),(this.settings.treeGrid&&isClientSide||!totals)&&(this.filteredCount=this.settings.dataset.filter((function(item){return item._isFilteredOut})).length,count=this.settings.dataset.length,this.recordCount=this.settings.dataset.filter((function(item){return!item._isFilteredOut})).length),this.settings.groupable&&(groupCount=count,count=this.originalDataset.length,groupCountText=(groupCountText="({0} ".concat(Locale.translate(1===groupCount?"Group":"Groups"),")")).replace("{0}",formatInteger(groupCount))),this.contextualToolbar&&this.contextualToolbar.length&&this.contextualToolbar.find(".selection-count").text("".concat(this._selectedRows.length," ").concat(Locale.translate("Selected"))),totals&&-1!==totals&&(count=totals),void 0===totals&&this.settings.source&&(count=this.lastCount||0),countText=this.settings.showFilterTotal&&this.filteredCount>0?(countText=(countText="(".concat(Locale.translate(1===count?"ResultOf":"ResultsOf"),")")).replace("{0}",formatInteger(count-this.filteredCount))).replace("{1}",formatInteger(count)):(countText="({0} ".concat(Locale.translate(1===count?"Result":"Results"),")")).replace("{0}",formatInteger(count)),this.settings.resultsText)if("function"==typeof this.settings.resultsText)if(this.grandTotal)countText=this.settings.resultsText(this,this.grandTotal,count);else{var filteredCount=0===this.filteredCount?0:count-this.filteredCount;countText=this.settings.resultsText(this,count,filteredCount)}else countText=this.settings.resultsText;this.toolbar&&(DOM.html(this.toolbar.find(".datagrid-result-count"),countText,"<span>"),DOM.html(this.toolbar.find(".datagrid-group-count"),groupCountText,"<span>"),this.toolbar[0].setAttribute("aria-label",this.toolbar.find(".title").text()),this.toolbar.find(".datagrid-row-count").text(count)),DOM.html(this.element.closest(".modal").find(".datagrid-result-count"),countText,"<span>"),this.lastCount=count,this.checkEmptyMessage()},setEmptyMessage:function setEmptyMessage(emptyMessage){this.emptyMessage?(this.emptyMessage.settings=emptyMessage,this.emptyMessage.updated()):(this.emptyMessageContainer=$('<div class="empty-message-container"><div></div></div>'),this.element.append(this.emptyMessageContainer).addClass("has-empty-message"),this.emptyMessage=this.emptyMessageContainer.find("div").emptymessage(emptyMessage).data("emptymessage"),this.checkEmptyMessage())},checkEmptyMessage:function checkEmptyMessage(){this.emptyMessage&&this.emptyMessageContainer&&(0===this.recordCount?(this.emptyMessageContainer.show(),this.element.addClass("is-empty")):(this.emptyMessageContainer.hide(),this.element.removeClass("is-empty")))},triggerRowEvent:function triggerRowEvent(eventName,e,stopPropagation){var target=$(e.target),rowElem=target.closest("tr"),cellElem=target.closest("td"),cell=cellElem.index(),row=this.settings.treeGrid?this.actualRowIndex(rowElem):this.dataRowIndex(rowElem),isTrigger=!0;target.is("a")&&(stopPropagation=!1),stopPropagation&&(e.stopPropagation(),e.preventDefault());var item=this.settings.dataset[row];if(this.settings.groupable&&(rowElem.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")?isTrigger=!1:(row=this.actualPagingRowIndex(this.actualRowIndex(rowElem)),(item=this.settings.dataset[this.groupArray[row].group])&&item.values&&(item=item.values[this.groupArray[row].node]))),isTrigger){var args={row:row,rowElem:rowElem,cell:cell,cellElem:cellElem,item:item,originalEvent:e};this.element.trigger(eventName,[args])}return!1},handleScrollY:function handleScrollY(e){var top=e.currentTarget.scrollTop;top!==this.scrollTop&&this.bodyWrapperCenter&&(this.bodyWrapperLeft||this.bodyWrapperRight)&&(this.scrollTop=top,this.bodyWrapperLeft&&(this.bodyWrapperLeft[0].scrollTop=this.scrollTop),this.bodyWrapperRight&&(this.bodyWrapperRight[0].scrollTop=this.scrollTop),this.bodyWrapperCenter[0].scrollTop=this.scrollTop)},rerender:function rerender(){this.clearCache(),this.renderRows(),this.renderHeader()},handleEvents:function handleEvents(){var _this8=this,self=this,isMultiple="multiple"===this.settings.selectable,isMixed="mixed"===this.settings.selectable;if(!self.settings.cellNavigation&&self.settings.rowNavigation&&self.element.on("focus.datagrid","tbody > tr",(function(){$(this).addClass("is-active-row")})).on("blur.datagrid","tbody > tr",(function(){$("tbody > tr",self.table).removeClass("is-active-row")})),this.settings.paging&&this.tableBody.on("page.".concat("datagrid"),(function(e,pagingInfo){"filtered"===pagingInfo.type&&_this8.settings.source||(self.saveUserSettings(),self.render(null,pagingInfo),self.afterPaging(pagingInfo))})).on("pagesizechange.".concat("datagrid"),(function(e,pagingInfo){self.render(null,pagingInfo),self.afterPaging(pagingInfo)})),self.settings.showHoverState&&self.element.off("mouseenter.datagrid, mouseleave.datagrid").on("mouseenter.datagrid","tbody > tr",(function(){self.rowNodes($(this)).addClass("is-hover-row")})).on("mouseleave.datagrid","tbody > tr",(function(){self.rowNodes($(this)).removeClass("is-hover-row")})),(this.hasLeftPane||this.hasRightPane)&&(self.element.find(".datagrid-wrapper").on("scroll.table",(function(e){self.handleScrollY(e)})),self.element.find(".datagrid-wrapper").on("wheel.table",(function(e){0!==e.originalEvent.deltaY&&(e.currentTarget.scrollTop+=e.originalEvent.deltaY,e.preventDefault(),self.handleScrollY(e))}))),this.settings.virtualized){var oldScroll=0,oldHeight=0;self.bodyWrapperCenter.on("scroll.vtable",debounce((function(){var scrollTop=this.scrollTop,hitBottom=scrollTop>self.virtualRange.bottom-self.virtualRange.bodyHeight-25,hitTop=scrollTop<self.virtualRange.top+25;scrollTop!==oldScroll&&(hitTop||hitBottom)&&(oldScroll=this.scrollTop,self.clearCache(),self.renderRows())}),0)),$("body").on("resize.vtable",(function(){this.offsetHeight!==oldHeight&&(oldHeight=this.scrollTop,self.clearCache(),self.renderRows())}))}this.element.off("click.datagrid-header").on("click.datagrid-header",".datagrid-header th.is-sortable, .datagrid-header th.btn-filter",(function(e){return $(e.target).parent().is(".datagrid-filter-wrapper")||$(e.target).parent().is(".lookup-wrapper")||(e.stopPropagation(),self.setSortColumn($(this).attr("data-column-id"))),!1})),this.element.off("click.datagrid-links").on("click.datagrid-links","tbody .datagrid-row a",(function(e){var href=e.currentTarget.getAttribute("href");href&&"#"!==href||e.preventDefault()})),self.settings.editable&&this.element.off("paste.datagrid").on("paste.datagrid",(function(e){var pastedData;pastedData=e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData?e.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var hasLineFeed=/\n/.exec(pastedData),hasCarriageReturn=/\r/.exec(pastedData),hasBoth=/\r\n/.exec(pastedData);if((!self.activeCell||!self.activeCell.node.hasClass("is-readonly"))&&(pastedData&&hasCarriageReturn||hasLineFeed||hasBoth)){var splitData=hasLineFeed?pastedData.split("\n"):pastedData.split("\r");hasBoth&&(splitData=pastedData.split("\r\n")),splitData.pop();var startRowCount=parseInt($(e.target)[0].parentElement.parentElement.parentElement.getAttribute("data-index"),10),startColIndex=parseInt($(e.target)[0].parentElement.parentElement.getAttribute("aria-colindex"),10)-1;self.editor&&self.editor.input&&self.commitCellEdit(),self.copyToDataSet(splitData,startRowCount,startColIndex,self.settings.dataset)}})),this.element.off("click.datagrid").on("click.datagrid","tbody td",(function(e){var rowNode=null,dataRowIdx=null,target=$(e.target),td=target.closest("td");if(!$(e.currentTarget).parent().hasClass(".datagrid-row-detail"))if(!td.is(".has-btn-actions")||target.is(".btn-actions")){if(target.parents("td").length>1&&(e.preventDefault(),e.stopPropagation()),self.triggerRowEvent("click",e,!0),self.setActiveCell(td),target.is(".datagrid-expand-btn"))return rowNode=$(this).closest("tr"),dataRowIdx=self.actualRowIndex(rowNode),self.toggleRowDetail(dataRowIdx),self.toggleGroupChildren(rowNode),self.toggleChildren(e,dataRowIdx),!1;var isSelectionCheckbox=target.is(".datagrid-selection-checkbox")||1===target.find(".datagrid-selection-checkbox").length,canSelect=!!self.settings.clickToSelect||isSelectionCheckbox;target.is(".datagrid-drilldown")&&(canSelect=!1),isMixed&&((canSelect=isSelectionCheckbox)||(e.shiftKey&&self.activatedRow().length&&(self.selectRowsBetweenIndexes([self.activatedRow()[0].row,target.closest("tr").attr("aria-rowindex")-1]),e.preventDefault()),self.toggleRowActivation(target.closest("tr")))),canSelect&&isMultiple&&e.shiftKey?(self.selectRowsBetweenIndexes([self.lastSelectedRow,target.closest("tr").attr("aria-rowindex")-1]),e.preventDefault()):canSelect&&self.toggleRowSelection(target.closest("tr"));var isEditable=self.makeCellEditable(self.activeCell.rowIndex,self.activeCell.cell,e),cell=td.attr("aria-colindex")-1,col=self.columnSettings(cell);if(col.click&&"function"==typeof col.click&&target.is("button, input[checkbox], a")||target.parent().is("button")){var rowElem=$(this).closest("tr"),rowIdx=self.actualRowIndex(rowElem);dataRowIdx=self.dataRowIndex(rowElem);var item=self.settings.treeGrid?self.settings.treeDepth[rowIdx].node:self.settings.dataset[dataRowIdx];if(td.hasClass("is-focusable")&&!target.is(self.buttonSelector)&&!target.parent("button").is(self.buttonSelector))return;self.settings.groupable&&(rowElem.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")||(rowIdx=self.actualPagingRowIndex(self.actualRowIndex(rowElem)),(item=self.settings.dataset[self.groupArray[rowIdx].group])&&item.values&&(item=item.values[self.groupArray[rowIdx].node]))),(!td.hasClass("is-cell-readonly")&&target.is("button, input[checkbox], a")||target.parent().is("button"))&&col.click(e,[{row:rowIdx,cell:self.activeCell.cell,item:item,originalEvent:e}])}if(col.menuId){self.closePrevPopupmenu();var btn=$(this).find("button");btn.popupmenu({attachToBody:!0,menuId:col.menuId,trigger:"immediate",offset:{y:5},returnFocus:function returnFocus(){return td.focus()}}).off("close.gridpopupbtn").on("close.gridpopupbtn",(function(){var el=$(this);el.data("popupmenu")&&!el.data("tooltip")&&el.data("popupmenu").destroy()})),col.selected&&btn.off("selected.gridpopupbtn").on("selected.gridpopupbtn",col.selected)}isEditable&&setTimeout((function(){$("textarea, input",td).length&&!$(".dropdown,[type=file],[type=image],[type=button],[type=submit],[type=reset],[type=checkbox],[type=radio]",td).length&&(self.quickEditMode=!0)}),0)}else self.setActiveCell(td)})),"last"!==this.stretchColumn&&($(window).on("orientationchange.datagrid",(function(){_this8.rerender()})),$(window).on("resize.datagrid",(function(){var j=0;for(_this8.clearCache(),j=0;j<self.settings.columns.length;j++){var col=self.settings.columns[j];self.columnWidth(col,j)}(self.stretchColumnDiff>0||self.stretchColumnWidth>0)&&(self.bodyColGroup.find("col").eq(self.getStretchColumnIdx())[0].style.width="".concat(self.stretchColumnDiff>0?"99%":"".concat(self.stretchColumnWidth,"px")))}))),this.element.off("dblclick.datagrid").on("dblclick.datagrid","tbody tr",(function(e){self.triggerRowEvent("dblclick",e,!0)})),this.element.off("contextmenu.datagrid").on("contextmenu.datagrid","tbody tr",(function(e){e.stopPropagation(),self.closePrevPopupmenu(),self.triggerRowEvent("contextmenu",e,!!self.settings.menuId);var hasMenu=function hasMenu(){return self.settings.menuId&&$("#".concat(self.settings.menuId)).length>0};return!hasMenu()||!self.isSubscribedTo(e,"contextmenu")&&!hasMenu()||(e.preventDefault(),$(e.currentTarget).popupmenu({menuId:self.settings.menuId,eventObj:e,beforeOpen:self.settings.menuBeforeOpen,attachToBody:!0,trigger:"immediate"}).off("selected.gridpopuptr").on("selected.gridpopuptr",(function(selectedEvent,args){self.settings.menuSelected&&self.settings.menuSelected(selectedEvent,args)})).off("close.gridpopuptr").on("close.gridpopuptr",(function(){var elem=$(this);elem.data("popupmenu")&&elem.data("popupmenu").destroy()})),!1)})),this.headerRow.off("mousemove.datagrid").on("mousemove.datagrid","th",(function(e){if(!self.dragging&&(self.currentHeader=$(e.target).closest("th"),self.currentHeader.hasClass("is-resizable"))){var headerDetail=self.currentHeader.closest(".header-detail"),extraMargin=headerDetail.length?parseInt(headerDetail.css("margin-left"),10):0,leftEdge=parseInt(self.currentHeader.position().left,10)-(extraMargin||0)+self.element.scrollLeft(),rightEdge=leftEdge+self.currentHeader.outerWidth(),alignToLeft=e.pageX-leftEdge>rightEdge-e.pageX,leftPos=0;leftPos=alignToLeft?rightEdge-5:leftEdge-5;var idx=self.currentHeader.parent().find("th:visible").index(self.currentHeader);(0===idx&&(Locale.isRTL()?alignToLeft:!alignToLeft)||idx===self.visibleColumns().length)&&(leftPos="-999"),Locale.isRTL()||alignToLeft||(self.currentHeader=self.currentHeader.prevAll(":visible").not(".is-hidden").first()),Locale.isRTL()&&!alignToLeft&&(self.currentHeader=self.currentHeader.nextAll(":visible").not(".is-hidden").first()),self.currentHeader.hasClass("is-resizable")&&(self.createResizeHandle(),self.resizeHandle[0].style.left="".concat(leftPos,"px"),self.resizeHandle[0].style.cursor="")}})).off("contextmenu.datagrid").on("contextmenu.datagrid","th",(function(e){return!self.settings.headerMenuId||(e.preventDefault(),self.closePrevPopupmenu(),$(e.currentTarget).popupmenu({menuId:self.settings.headerMenuId,eventObj:e,attachToBody:!0,beforeOpen:self.settings.headerMenuBeforeOpen,trigger:"immediate"}).off("selected.gridpopupth").on("selected.gridpopupth",(function(selectedEvent,args){self.settings.headerMenuSelected(selectedEvent,args)})).off("close.gridpopupth").on("close.gridpopupth",(function(){var elem=$(this);elem.data("popupmenu")&&elem.data("popupmenu").destroy()})),!1)})),this.element.off("click.datagrid-header-select").on("click.datagrid-header-select","th .datagrid-checkbox",(function(){var checkbox=$(this);checkbox.hasClass("is-checked")?(checkbox.removeClass("is-checked").attr("aria-checked","false"),self.unSelectAllRows()):(checkbox.addClass("is-checked").attr("aria-checked","true"),self.selectAllRows())})),this.element.off("focusout.datagrid").on("focusout.datagrid","tbody td input, tbody td textarea, tbody div.dropdown",(function(e){var target=e.target;$(target).is("input.lookup, input.timepicker, input.datepicker, input.spinbox, input.colorpicker")?setTimeout((function(){var focusElem=$("*:focus");if(!$(".lookup-modal.is-visible, #timepicker-popup, #monthview-popup, #colorpicker-menu").length&&self.editor){if(focusElem.is(".spinbox, .trigger, .code-block-actions")||!$(target).is(":visible"))return;if(focusElem&&self.editor.className&&focusElem.closest(self.editor.className).length>0)return;self.commitCellEdit()}}),150):$("#dropdown-list, .autocomplete.popupmenu.is-open, #timepicker-popup, .is-editing .code-block").is(":visible")||self.editor&&self.editor.input&&self.commitCellEdit()}))},closePrevPopupmenu:function closePrevPopupmenu(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach((function(node){var elem=$(node);elem.data("popupmenu")&&elem.trigger("close")}))},isSubscribedTo:function isSubscribedTo(e,eventName){var gridEvents=$._data(this.element[0]).events;for(var event in gridEvents)if(event===eventName&&(1!==gridEvents[event].length||"datagrid"!==gridEvents[event][0].namespace))return!0;return!1},refreshSelectedRowHeight:function refreshSelectedRowHeight(){var toolbar=this.element.parent().find(".toolbar:not(.contextual-toolbar)"),short=toolbar.find('[data-option="row-short"]'),med=toolbar.find('[data-option="row-medium"]'),normal=toolbar.find('[data-option="row-normal"]');"short"===this.settings.rowHeight&&(short.parent().addClass("is-checked"),med.parent().removeClass("is-checked"),normal.parent().removeClass("is-checked")),"medium"===this.settings.rowHeight&&(short.parent().removeClass("is-checked"),med.parent().addClass("is-checked"),normal.parent().removeClass("is-checked")),"normal"===this.settings.rowHeight&&(short.parent().removeClass("is-checked"),med.parent().removeClass("is-checked"),normal.parent().addClass("is-checked")),$(".drag-target-arrows",this.element).css("height","".concat(this.getTargetHeight(),"px"))},appendToolbar:function appendToolbar(){var toolbar=null,title="",more=null,self=this;if(this.settings.toolbar){if(1===this.element.parent().find(".toolbar:not(.contextual-toolbar)").length)toolbar=this.element.parent().find(".toolbar:not(.contextual-toolbar)"),this.refreshSelectedRowHeight();else{toolbar=$('<div class="toolbar" role="toolbar"></div>'),this.removeToolbarOnDestroy=!0,this.settings.toolbar.title&&(title=$('<div class="title">'.concat(this.settings.toolbar.title,"  </div>"))),title||(title=toolbar.find(".title")),toolbar.append(title),this.settings.toolbar.results&&title.append('<span class="datagrid-result-count"></span>');var buttonSet=$('<div class="buttonset"></div>').appendTo(toolbar);if(this.settings.toolbar.keywordFilter){var labelMarkup=$('<label class="audible" for="gridfilter">'.concat(Locale.translate("Keyword"),"</label>")),searchfieldMarkup=$('<input class="searchfield" name="searchfield" placeholder="'.concat(Locale.translate("Keyword"),'" id="gridfilter">'));buttonSet.append(labelMarkup),this.settings.toolbar.collapsibleFilter||searchfieldMarkup.attr("data-options",'{ "collapsible": false }'),buttonSet.append(searchfieldMarkup)}this.settings.toolbar.dateFilter&&buttonSet.append('<button class="btn" type="button">'.concat($.createIcon({icon:"calendar"}),"<span>").concat(Locale.translate("Date"),"</span></button>")),this.settings.toolbar.actions&&((more=$('<div class="more"></div>').insertAfter(buttonSet)).append('<button class="btn-actions" title="More" type="button">'.concat($.createIcon({icon:"more"}),'<span class="audible">Grid Features</span></button>')),toolbar.addClass("has-more-button"));var menu=$('<ul class="popupmenu"></ul>');if(this.settings.toolbar.personalize&&menu.append('<li><a href="#" data-option="personalize-columns">'.concat(Locale.translate("PersonalizeColumns"),"</a></li>")),this.settings.toolbar.resetLayout&&menu.append('<li><a href="#" data-option="reset-layout">'.concat(Locale.translate("ResetDefault"),"</a></li>")),this.settings.toolbar.exportToExcel&&menu.append('<li><a href="#" data-option="export-to-excel">'.concat(Locale.translate("ExportToExcel"),"</a></li>")),this.settings.toolbar.advancedFilter&&menu.append('<li><a href="#">'.concat(Locale.translate("AdvancedFilter"),"</a></li>")),this.settings.toolbar.views&&menu.append('<li><a href="#">'.concat(Locale.translate("SaveCurrentView"),"</a></li> ")+'<li class="separator"></li> '+'<li class="heading">'.concat(Locale.translate("SavedViews"),"</li>")+'<li><a href="#">View One</a></li>'),this.settings.toolbar.rowHeight&&menu.append("".concat('<li class="separator single-selectable-section"></li><li class="heading">').concat(Locale.translate("RowHeight"),"</li>")+'<li class="is-selectable'.concat("short"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-short">').concat(Locale.translate("Short"),"</a></li>")+'<li class="is-selectable'.concat("medium"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-medium">').concat(Locale.translate("Medium"),"</a></li>")+'<li class="is-selectable'.concat("normal"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-normal">').concat(Locale.translate("Normal"),"</a></li>")),!0===this.settings.toolbar.filterRow&&menu.append("".concat('<li class="separator"></li><li class="heading">').concat(Locale.translate("Filter"),"</li>")+'<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(Locale.translate("ShowFilterRow"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="run-filter">'.concat(Locale.translate("RunFilter"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(Locale.translate("ClearFilter"),"</a></li>")),"object"===_typeof(this.settings.toolbar.filterRow)){var filterOptions='<li class="separator"></li>';this.settings.toolbar.filterRow.showFilter&&(filterOptions+='<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(Locale.translate("ShowFilterRow"),"</a></li>")),this.settings.toolbar.filterRow.runFilter&&!this.settings.filterWhenTyping&&(filterOptions+='<li class="is-indented"><a href="#" data-option="run-filter">'.concat(Locale.translate("RunFilter"),"</a></li>")),this.settings.toolbar.filterRow.clearFilter&&(filterOptions+='<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(Locale.translate("ClearFilter"),"</a></li>")),menu.append(filterOptions)}this.settings.toolbar.actions&&more.append(menu),this.element.prev().is(".contextual-toolbar")?this.element.prev().before(toolbar):this.element.before(toolbar)}if(toolbar.find(".btn-actions").popupmenu().on("selected",(function(e,args){var action=args.attr("data-option");"row-short"!==action&&"row-medium"!==action&&"row-normal"!==action||self.rowHeight(action.substr(4)),"personalize-columns"===action&&self.personalizeColumns(),"reset-layout"===action&&self.resetColumns(),"export-to-excel"===action&&self.exportToCsv(),"show-filter-row"===action&&self.toggleFilterRow(),"run-filter"===action&&self.applyFilter(null,"menu"),"clear-filter"===action&&self.clearFilter()})),this.settings.initializeToolbar&&!toolbar.data("toolbar")){var opts=$.fn.parseOptions(toolbar);this.settings.toolbar.fullWidth&&(opts.rightAligned=!0),toolbar.toolbar(opts)}if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var thisSearch=toolbar.find(".searchfield"),xIcon=thisSearch.parent().find(".close.icon");thisSearch.off("keypress.datagrid").on("keypress.datagrid",(function(e){13!==e.keyCode&&"change"!==e.type||(e.preventDefault(),self.keywordSearch(thisSearch.val()))})),xIcon.off("click.datagrid").on("click.datagrid",(function(){self.keywordSearch(thisSearch.val())}))}if(this.settings.toolbar&&this.settings.toolbar.contextualToolbar){this.element.before('\n        <div class="contextual-toolbar datagrid-contextual-toolbar toolbar is-hidden">\n          <div class="title selection-count">1 Selected</div>\n        </div>'),this.contextualToolbar=this.element.prev(".contextual-toolbar")}this.toolbar=toolbar,this.element.addClass("has-toolbar")}},rowHeight:function rowHeight(height){var args=[];return height&&(this.settings.rowHeight!==height&&args.push({before:this.settings.rowHeight,after:height}),this.settings.rowHeight=height),this.element.add(this.table).add(this.tableLeft).add(this.tableRight).removeClass("short-rowheight medium-rowheight normal-rowheight").addClass("".concat(this.settings.rowHeight,"-rowheight")),this.virtualRange&&this.virtualRange.rowHeight&&(this.virtualRange.rowHeight="normal"===height?40:"medium"===height?30:25),this.saveUserSettings(),this.refreshSelectedRowHeight(),args.length&&this.element.triggerHandler("rowheightchanged",args),this.settings.rowHeight},keywordSearch:function keywordSearch(term){this.element.find('tr[role="row"]').removeClass("is-filtered").show(),this.filterExpr=[],this.element.find(".datagrid-expandable-row").each((function(){var row=$(this);row.prev().find(".datagrid-expand-btn").removeClass("is-expanded"),row.prev().find(".plus-minus").removeClass("active"),row.removeClass("is-expanded").css("display",""),row.find(".datagrid-row-detail").css("height","")})),this.element.find(".search-mode").each((function(){var cell=$(this),text=cell.text();cell.text(text.replace("<i>","").replace("</i>",""))})),term=(term||"").toLowerCase(),this.filterExpr.push({column:"all",operator:"contains",value:term,keywordSearch:!0}),this.filterKeywordSearch(),this.clearCache(),this.renderRows(),this.setSearchActivePage({trigger:"searched"}),this.settings.paging&&this.settings.source||this.highlightSearchRows(term)},setSearchActivePage:function setSearchActivePage(pagingInfo){if(this.pagerAPI){var self=this;pagingInfo||(pagingInfo={}),this.filterExpr&&1===this.filterExpr.length?""!==this.filterExpr[0].value?pagingInfo.activePage=this.pagerAPI.filteredActivePage||1:""===this.filterExpr[0].value&&this.pagerAPI.filteredActivePage&&(pagingInfo=reset(pagingInfo)):this.restoreActivePage||(pagingInfo=reset(pagingInfo),this.restoreActivePage=!1),pagingInfo.activePage=this.activePage,this.renderPager(pagingInfo)}function reset(obj){return obj.activePage=1,self.grandTotal&&(obj.grandTotal=self.grandTotal),obj}},filterKeywordSearch:function filterKeywordSearch(){var dataset,isFiltered,i,len,self=this,filterExpr=self.filterExpr,checkRow=function checkRow(data,row){var isMatch=!1,checkColumn=function checkColumn(columnId){var column=self.columnById(columnId)[0],fieldValue=self.fieldValue(data,column.field),cell=self.settings.columns.indexOf(column);return self.formatValue(column.formatter,row,cell,fieldValue,column,data,self).toLowerCase().replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").indexOf(filterExpr.value)>-1};return"all"===filterExpr.column?self.element.find("th:visible").each((function(){var columnId=$(this).attr("data-column-id");if(isMatch=checkColumn(columnId))return!1})):filterExpr.columnId&&(isMatch=checkColumn(filterExpr.columnId)),isMatch};if(filterExpr&&1===filterExpr.length)if(filterExpr=filterExpr[0],self.settings.treeGrid)for(i=0,len=(dataset=self.settings.treeDepth).length;i<len;i++)isFiltered=""!==filterExpr.value&&!checkRow(dataset[i].node,i),dataset[i].node._isFilteredOut=isFiltered;else for(i=0,len=(dataset=self.settings.dataset).length;i<len;i++)isFiltered=""!==filterExpr.value&&!checkRow(dataset[i],i),dataset[i]._isFilteredOut=isFiltered},highlightSearchRows:function highlightSearchRows(term){var _this9=this,self=this;if(term&&""!==term){self.tableBody.find("tr").toArray().forEach((function(row){var rowContainers=self.rowNodes(row.getAttribute("aria-rowindex")-1),found=function findInRows(rowNodes){var found=!1;return rowNodes.toArray().forEach((function(row){[].slice.call(row.querySelectorAll("td")).forEach((function(cell){var cellText=cell.innerText.toLowerCase(),isSearchExpandableRow=!!self.settings.searchExpandableRow||!DOM.hasClass(_this9,"datagrid-expandable-row");cellText.indexOf(term)>-1&&isSearchExpandableRow&&(found=!0,[].slice.call(cell.querySelectorAll("*")).forEach((function(node){if(xssUtils.unescapeHTML(node.innerHTML)===node.textContent){var contents=node.textContent,exp=new RegExp("(".concat(stringUtils.escapeRegExp(term),")"),"gi");DOM.addClass(node,"search-mode"),DOM.html(node,contents.replace(exp,"<i>$1</i>"))}})))}))})),found}(rowContainers);found||rowContainers.find(".datagrid-row-detail").length?self.settings.searchExpandableRow&&found&&rowContainers.is(".datagrid-expandable-row")&&""!==term&&(rowContainers.prev().show(),rowContainers.prev().find(".datagrid-expand-btn").addClass("is-expanded"),rowContainers.prev().find(".plus-minus").addClass("active"),rowContainers.addClass("is-expanded").css("display","table-row"),rowContainers.find(".datagrid-row-detail").css("height","auto")):rowContainers.addClass("is-filtered").hide()}))}},getActiveDataset:function getActiveDataset(){var s=this.settings,dataset=s.treeGrid?s.treeDepth:s.dataset;return s.groupable&&(dataset=this.originalDataset),dataset},getDataset:function getDataset(){return this.settings.dataset.map((function(item){return delete item._isFilteredOut,item}))},selectAllRows:function selectAllRows(){for(var rows=[],dataset=this.getActiveDataset(),i=0,l=dataset.length;i<l;i++){var idx=this.settings.groupable?i:this.pagingRowIndex(i);(this.filterRowRendered||this.filterExpr&&this.filterExpr[0]&&this.filterExpr[0].keywordSearch)&&dataset[i]._isFilteredOut||rows.push(idx)}this.dontSyncUi=!0,this.selectRows(rows,!0,!0),this.dontSyncUi=!1,this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"selectall"])},deSelectAllRows:function deSelectAllRows(){this.unSelectAllRows()},unSelectAllRows:function unSelectAllRows(nosync,noTrigger){if(this._selectedRows&&0!==this._selectedRows.length){this.dontSyncUi=!0;for(var i=this._selectedRows.length-1;i>=0;i--)if(this._selectedRows[i]){var idx=this.settings.groupable?this._selectedRows[i].idx:this.pagingRowIndex(this._selectedRows[i].idx);this.unselectRow(idx,!0,!0)}this.settings.dataset.map((function(row){delete row._selected})),this.dontSyncUi=!1,this._selectedRows=[],nosync||this.syncSelectedUI(),noTrigger||this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])}else this.settings.dataset.map((function(row){delete row._selected}))},isRowSelected:function isRowSelected(row){return!!row&&!0===row._selected},selectNode:function selectNode(elem,index,data,force){var checkbox=null,selectClasses="is-selected".concat("mixed"===this.settings.selectable?" hide-selected-color":"");(data&&!this.isRowSelected(data)||force)&&(checkbox=elem.find(".datagrid-selection-checkbox").closest("td"),elem.addClass(selectClasses).attr("aria-selected","true"),checkbox.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true").attr("aria-selected","true").attr("aria-label","Selected"),data&&(data._selected=!0))},selectRow:function selectRow(idx,nosync,noTrigger){var dataRowIndex,_this10=this,rowNode=null,self=this,s=this.settings;if(void 0!==idx&&-1!==idx&&s.selectable&&!this.isRowDisabled(idx)&&(rowNode=this.settings.groupable?this.rowNodesByDataIndex(idx):this.rowNodes(idx),dataRowIndex=this.dataRowIndex(rowNode),isNaN(dataRowIndex)&&(dataRowIndex=idx),rowNode&&(rowNode.length||!s.source))){if("function"==typeof s.onBeforeSelect&&!noTrigger)if(!1===s.onBeforeSelect({node:rowNode,idx:dataRowIndex}))return;var isExists=function isExists(i,elem){return!!_this10._selectedRows.filter((function(n){return function isMatch(i,elem,n){return n&&n.idx===i&&n.elem&&n.elem.is(elem)}(i,elem,n)})).length};if("single"===s.selectable){var selectedIndex=-1;this._selectedRows.length>0?selectedIndex=this._selectedRows[0].pagingIdx:rowNode[0]&&rowNode[0].classList.contains("is-selected")&&(selectedIndex=dataRowIndex),-1!==selectedIndex&&(this.unselectRow(selectedIndex,!0,!0),!rowNode.length&&this._selectedRows.length>0&&this._selectedRows.pop())}var isServerSideMultiSelect=s.source&&"multiple"===s.selectable&&s.allowSelectAcrossPages;if(!rowNode.hasClass("is-selected")||isServerSideMultiSelect){var rowData;if(s.treeGrid){var level=parseInt(rowNode.attr("aria-level"),10);if(rowData=s.treeDepth[self.pagerAPI&&s.source?rowNode.index():idx].node,rowNode.is(".datagrid-tree-parent")&&"multiple"===s.selectable)rowNode.add(rowNode.nextUntil('[aria-level="'.concat(level,'"]'))).each((function(i){var elem=$(this),index=elem.attr("aria-rowindex")-1,actualIdx=self.actualPagingRowIndex(index),data=s.treeDepth[actualIdx].node;if(s.selectChildren||!s.selectChildren&&0===i){var canAdd=!elem.is(rowNode)&&!elem.hasClass("is-selected");self.selectNode(elem,index,data),canAdd&&!isExists(actualIdx,elem)&&self._selectedRows.push({idx:actualIdx,data:data,elem:elem,page:self.pagerAPI?self.pagerAPI.activePage:1,pagingIdx:actualIdx,pagesize:s.pagesize})}}));else if("siblings"===s.selectable){var nexts,prevs;this.unSelectAllRows(!0,!0),1===level?nexts=rowNode.parent().find('[aria-level="1"]'):level>1&&(nexts=rowNode.nextUntil('[aria-level="'.concat(level-1,'"]')).filter('[aria-level="'.concat(level,'"]')),prevs=rowNode.prevUntil('[aria-level="'.concat(level-1,'"]')).filter('[aria-level="'.concat(level,'"]'))),rowNode.add(nexts).add(prevs).each((function(i){var elem=$(this),index=elem.attr("aria-rowindex")-1,actualIdx=self.actualPagingRowIndex(index),data=s.treeDepth[actualIdx].node;if(s.selectChildren||!s.selectChildren&&0===i){var canAdd=!elem.is(rowNode)&&!elem.hasClass("is-selected");self.selectNode(elem,index,data),canAdd&&!isExists(actualIdx,elem)&&self._selectedRows.push({idx:actualIdx,data:data,elem:elem,page:self.pagerAPI?self.pagerAPI.activePage:1,pagingIdx:actualIdx,pagesize:s.pagesize})}}))}else self.selectNode(rowNode,idx,rowData);self.setNodeStatus(rowNode)}else{if(rowData=s.dataset[dataRowIndex],s.groupable){var row=self.actualPagingRowIndex(self.actualRowIndex(rowNode));if(isNaN(row))return;var gData=self.groupArray[row];rowData=self.settings.dataset[gData.group].values[gData.node],isExists(rowData.idx,rowNode)||this._selectedRows.push({idx:rowData.idx,data:rowData,elem:rowNode,group:s.dataset[self.groupArray[row].group],page:self.pagerAPI?self.pagerAPI.activePage:1,pagingIdx:dataRowIndex,pagesize:self.settings.pagesize})}self.selectNode(rowNode,dataRowIndex,rowData),self.lastSelectedRow=idx}if(!s.groupable){var actualIdx=self.actualPagingRowIndex(idx);-1===actualIdx&&(actualIdx=idx),isExists(actualIdx,self.visualRowNode(actualIdx))||this._selectedRows.push({idx:actualIdx,data:rowData,elem:self.visualRowNode(actualIdx),page:self.pagerAPI?self.pagerAPI.activePage:1,pagingIdx:idx,pagesize:self.settings.pagesize})}}nosync||self.syncSelectedUI(),noTrigger||this.element.triggerHandler("selected",[this._selectedRows,"select"])}},selectRowsBetweenIndexes:function selectRowsBetweenIndexes(indexes){indexes.sort((function(a,b){return a-b}));for(var i=indexes[0];i<=indexes[1];i++)this.selectRow(i);this.displayCounts()},syncHeaderCheckbox:function syncHeaderCheckbox(rows){if(0!==this.headerNodes().length){var headerCheckbox=this.headerNodes().find(".datagrid-checkbox"),rowsLength=rows.length,selectedRowsLength=this._selectedRows.length,status=headerCheckbox.data("selected");this.settings.source&&this.settings.allowSelectAcrossPages&&(selectedRowsLength=this.settings.dataset.filter((function(i){return i._selected})).length),selectedRowsLength!==rowsLength&&selectedRowsLength>0&&"partial"===status||selectedRowsLength===rowsLength&&"all"===status&&0!==selectedRowsLength||0===selectedRowsLength&&"none"===status||(selectedRowsLength>0&&headerCheckbox.data("selected","partial").addClass("is-checked is-partial"),selectedRowsLength===rowsLength&&headerCheckbox.data("selected","all").addClass("is-checked").removeClass("is-partial"),0===selectedRowsLength&&headerCheckbox.data("selected","none").removeClass("is-checked is-partial"))}},syncSelectedRows:function syncSelectedRows(){for(var _this11=this,s=this.settings,dataset=s.groupable&&this.originalDataset?this.originalDataset:s.dataset,idx=null,selectNode=function selectNode(i){var elem=s.groupable?_this11.dataRowNode(idx):_this11.visualRowNode(idx);elem[0]&&(_this11._selectedRows[i].elem=elem,_this11.selectNode(elem,idx,dataset[idx],!0))},i=0;i<this._selectedRows.length;i++)this.pagerAPI&&this._selectedRows[i].page===this.pagerAPI.activePage&&(idx=this._selectedRows[i].idx,selectNode(i)),this._selectedRows[i].pagesize===s.pagesize||s.groupable||(idx=this._selectedRows[i].pagingIdx,s.dataset[idx]?(selectNode(i),this._selectedRows[i].idx=idx,this._selectedRows[i].page=this.pagerAPI.activePage,this._selectedRows[i].pagesize=s.pagesize):(this._selectedRows[i].idx=idx%s.pagesize,this._selectedRows[i].page=Math.round(idx/s.pagesize)+1,this._selectedRows[i].pagesize=s.pagesize))},calculatePagerInfo:function calculatePagerInfo(idx,ds,pagesize){for(var s=this.settings,dataset=ds||s.treeGrid?s.treeDepth:s.dataset,pagerInfo={idx:idx,page:1,pagesize:pagesize="number"==typeof pagesize&&pagesize>0?pagesize:s.pagesize,numOfPages:Math.ceil(dataset.length/pagesize)},i=0;i<pagerInfo.numOfPages;i++){if(idx>=(pagerInfo.page-1)*pagerInfo.pagesize&&idx<pagerInfo.page*pagerInfo.pagesize){pagerInfo.pagingIdx=idx-pagerInfo.pagesize*i;break}pagerInfo.page++}return pagerInfo},syncSelectedRowsIdx:function syncSelectedRowsIdx(){var dataset=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset;if(0!==this._selectedRows.length&&0!==dataset.length){this._selectedRows=[];for(var i=0;i<dataset.length;i++)if(dataset[i]._selected){var selectedRow={idx:i,data:dataset[i],elem:this.dataRowNode(i),pagingIdx:i,pagesize:this.settings.pagesize};if(this.settings.groupable){var rowNode=this.rowNodesByDataIndex(i);if(rowNode.length){var row=this.actualPagingRowIndex(this.actualRowIndex(rowNode)),group=this.groupArray[row].group;selectedRow.group=this.settings.dataset[group],selectedRow.page=this.calculatePagerInfo(group).page}}else selectedRow.page=this.calculatePagerInfo(i).page;this._selectedRows.push(selectedRow)}}},syncSelectedUI:function syncSelectedUI(){var dataset=this.getActiveDataset(),rows=dataset;if(this.filterRowRendered){rows=[];for(var i=0,l=dataset.length;i<l;i++)dataset[i]._isFilteredOut||rows.push(i)}this.syncHeaderCheckbox(rows),1!==this.contextualToolbar.length||this.dontSyncUi||(0===this._selectedRows.length&&this.contextualToolbar.animateClosed(),this._selectedRows.length>0&&0===this.contextualToolbar.height()&&this.contextualToolbar.css("display","block").one("animateopencomplete.datagrid",(function(){$(this).triggerHandler("recalculate-buttons")})).animateOpen())},activateRow:function activateRow(idx){this.activatedRow()[0].row!==idx&&this.toggleRowActivation(idx)},deactivateRow:function deactivateRow(){var idx=this.activatedRow()[0].row;idx>=0&&this.toggleRowActivation(idx)},activatedRow:function activatedRow(){var r=[{row:-1,item:void 0,elem:void 0}];if(this.tableBody){var s=this.settings,dataset=s.treeGrid?s.treeDepth:s.dataset,activatedRow=this.tableBody.find("tr.is-rowactivated");if(activatedRow.length){var dataRowIndex=this.dataRowIndex(activatedRow),rowIndex=s.indeterminate?dataRowIndex:this.actualRowIndex(activatedRow);r=[{row:rowIndex,item:dataset[rowIndex],elem:activatedRow}]}else{r=null;for(var i=0;i<dataset.length;i++)if(dataset[i]._rowactivated){r=[{row:i,item:dataset[i],elem:void 0}];break}null===r&&(r=[{row:-1,item:void 0,elem:activatedRow}])}}return r},toggleRowActivation:function toggleRowActivation(idx){var row,rowJq,rowIndex,s=this.settings,dataset=s.treeGrid?s.treeDepth:s.dataset;if("number"==typeof idx){if(row=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(idx+1,'"]')),rowIndex=idx,this.pagerAPI&&s.source&&s.indeterminate){var rowIdx=idx+(this.pagerAPI.activePage-1)*s.pagesize;row=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(rowIdx+1,'"]'))}}else row=(rowJq=idx instanceof jQuery?idx:$(idx))[0],rowIndex=s.treeGrid||s.groupable?this.actualRowIndex(rowJq):this.dataRowIndex(rowJq);s.indeterminate&&!row&&(row=(rowJq=this.actualRowNode(rowIndex))[0]),!!dataset[rowIndex]&&dataset[rowIndex]._rowactivated?this.deactivateRowNode(rowIndex,dataset):(this.deactivateAllRowNodes(dataset),this.activateAllRowNodes(rowIndex,dataset))},activateAllRowNodes:function activateAllRowNodes(idx,dataset){var _this12=this;if(!("number"!=typeof idx||idx<0)){var s=this.settings;void 0===dataset&&(dataset=s.treeGrid?s.treeDepth:s.dataset);var args=[{row:idx,item:dataset[idx]}];dataset[idx]&&$.when(this.element.triggerHandler("beforerowactivated",args)).done((function(response){(function isFalse(v){return"string"==typeof v&&"false"===v.toLowerCase()||"boolean"==typeof v&&!1===v||"number"==typeof v&&0===v})(response)||function doRowactivated(){_this12.rowNodes(idx).toArray().forEach((function(rowElem){rowElem.classList.add("is-rowactivated")})),dataset[idx]._rowactivated=!0,args=[{row:idx,item:dataset[idx]}],_this12.element.triggerHandler("rowactivated",args)}()}))}},deactivateRowNode:function deactivateRowNode(idx,dataset){if(!("number"!=typeof idx||idx<0)){var s=this.settings;if(void 0===dataset&&(dataset=s.treeGrid?s.treeDepth:s.dataset),dataset[idx]&&!s.disableRowDeactivation)this.rowNodes(idx).toArray().forEach((function(row){row.classList.remove("is-rowactivated")})),delete dataset[idx]._rowactivated,this.element.triggerHandler("rowdeactivated",[{row:idx,item:dataset[idx]}])}},deactivateAllRowNodes:function deactivateAllRowNodes(dataset){var s=this.settings,triggerData=null;void 0===dataset&&(dataset=s.treeGrid?s.treeDepth:s.dataset);var activated=[].slice.call(this.element[0].querySelectorAll("tr.is-rowactivated"));if(activated.length>0){activated.forEach((function(row){row.classList.remove("is-rowactivated")}));var idx=s.treeGrid||s.groupable?this.actualRowIndex($(activated)):this.dataRowIndex($(activated));triggerData={row:idx,item:dataset[idx]},dataset[idx]&&delete dataset[idx]._rowactivated}else for(var i=0;i<dataset.length;i++){var data=dataset[i];if(data._rowactivated){delete data._rowactivated,triggerData={row:i,item:data};break}}null!==triggerData&&this.element.triggerHandler("rowdeactivated",[triggerData])},toggleRowSelection:function toggleRowSelection(idx){var row="number"==typeof idx?this.tableBody.find('tr[aria-rowindex="'.concat(idx+1,'"]')):idx,isSingle="single"===this.settings.selectable,rowIndex="number"==typeof idx?idx:this.actualRowIndex(row);if(this.settings.groupable&&(rowIndex=this.dataRowIndex(row)),!(!1===this.settings.selectable||this.editor&&row.hasClass("is-selected")))return isSingle&&row.hasClass("is-selected")?(this.unselectRow(rowIndex),this.displayCounts(),this._selectedRows):(row.hasClass("is-selected")?this.unselectRow(rowIndex):this.selectRow(rowIndex),this.displayCounts(),this._selectedRows)},unselectRow:function unselectRow(idx,nosync,noTrigger){var self=this,s=self.settings,rowNode=this.settings.groupable?this.rowNodesByDataIndex(idx):this.rowNodes(idx),isServerSideMultiSelect=s.source&&"multiple"===s.selectable&&s.allowSelectAcrossPages;if(rowNode&&void 0!==idx){var unselectNode=function unselectNode(elem,index){var removeSelected=function removeSelected(node,selIdx){delete node._selected,void 0===selIdx&&(selIdx=index);for(var i=0;i<self._selectedRows.length;i++)if(self._selectedRows[i].idx===selIdx){if(isServerSideMultiSelect&&self._selectedRows[i].elem&&!self._selectedRows[i].elem.is(elem))continue;self._selectedRows.splice(i,1);break}};if(self.cellNode(elem,self.columnIdxById("selectionCheckbox")),elem.removeClass("is-selected hide-selected-color").removeAttr("aria-selected"),-1!==self.columnIdxById("selectionCheckbox")&&self.cellNode(elem,self.columnIdxById("selectionCheckbox")).find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked no-animate").attr("aria-checked","false").removeAttr("aria-selected").removeAttr("aria-label"),s.treeGrid)for(var i=0;i<s.treeDepth.length;i++)self.isRowSelected(s.treeDepth[i].node)&&(void 0!==index?index===s.treeDepth[i].idx-1&&removeSelected(s.treeDepth[i].node):removeSelected(s.treeDepth[i].node));else{var rowData,selIdx=elem.length?self.dataRowIndex(elem):index;void 0!==selIdx&&selIdx>-1&&(rowData=s.dataset[selIdx]),s.groupable&&(rowData=self.originalDataset[selIdx]),void 0!==rowData&&(s.paging&&s.source?removeSelected(rowData,selIdx):removeSelected(rowData))}};if(s.treeGrid){var level=parseInt(rowNode.attr("aria-level"),10);if(rowNode.is(".datagrid-tree-parent")&&"multiple"===s.selectable)rowNode.add(rowNode.nextUntil('[aria-level="'.concat(level,'"]'))).each((function(i){var elem=$(this),index=elem.attr("aria-rowindex")-1,actualIndex=self.actualPagingRowIndex(index);(s.selectChildren||!s.selectChildren&&0===i)&&unselectNode(elem,actualIndex)}));else if("siblings"===s.selectable)rowNode.parent().find(".is-selected").each((function(i){var elem=$(this),index=elem.attr("aria-rowindex")-1,actualIndex=self.actualPagingRowIndex(index);(s.selectChildren||!s.selectChildren&&0===i)&&unselectNode(elem,actualIndex)}));else{var actualIdx=self.actualPagingRowIndex(idx);unselectNode(rowNode,actualIdx)}self.setNodeStatus(rowNode)}else unselectNode(rowNode,idx);nosync||self.syncSelectedUI(),noTrigger||self.element.triggerHandler("selected",[self._selectedRows,"deselect"])}},setNodeStatus:function setNodeStatus(node){var nodes,self=this,isMultiselect="multiple"===self.settings.selectable,s=self.settings,checkbox=self.cellNode(node,self.columnIdxById("selectionCheckbox"));if(!isMultiselect)return checkbox.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial").attr("aria-checked","false"),void(node.is(".is-selected")&&checkbox.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true"));var setStatus=function setStatus(nodeElems,isFirstSkipped){nodeElems.each((function(){var nodeToUse=$(this),checkboxToUse=self.cellNode(nodeToUse,self.columnIdxById("selectionCheckbox")),status=self.getSelectedStatus(nodeToUse,isFirstSkipped);checkboxToUse.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial").attr("aria-checked","false"),"mixed"===status?checkboxToUse.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked is-partial").attr("aria-checked","mixed"):status&&checkboxToUse.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true")}))};nodes=node.add(node.nextUntil('[aria-level="1"]')).filter(".datagrid-tree-parent"),s.selectChildren&&setStatus(nodes),nodes=node,+node.attr("aria-level")>1&&(nodes=nodes.add(node.prevUntil('[aria-level="1"]')).add(node.prevAll('[aria-level="1"]:first'))),nodes=nodes.filter(".datagrid-tree-parent"),s.selectChildren&&setStatus(nodes)},getSelectedStatus:function getSelectedStatus(node){var s=this.settings,total=0,selected=0,unselected=0,targetNodes=node.add(node.nextUntil('[aria-level="1"]'));if(s.treeGrid&&"multiple"===s.selectable){var level=node.attr("aria-level");targetNodes=node.add(node.nextUntil('[aria-level="'.concat(level,'"]')))}return targetNodes.each((function(){total++,$(this).is(".is-selected")?selected++:unselected++})),total===selected||total!==unselected&&"mixed"},selectedRows:function selectedRows(){return this._selectedRows},selectRows:function selectRows(row,nosync,selectAll){var idx=-1,s=this.settings,isSingle="single"===s.selectable,isMultiple="multiple"===s.selectable||"mixed"===s.selectable,isSiblings="siblings"===s.selectable,dataset=this.getActiveDataset();if("number"==typeof row&&(row=[row]),!row||0===row.length)return this._selectedRows;if(isSingle&&(this._selectedRows.length&&this.unselectRow(this._selectedRows[0].idx,!0,!0),idx="[object Array]"===Object.prototype.toString.call(row)?row[0]:row.index(),this.selectRow(idx,!0,!0)),isMultiple||isSiblings)if("[object Array]"===Object.prototype.toString.call(row)){for(var i=0;i<row.length;i++)this.selectRow(row[i],!0,!0);if(0===row.length)for(var j=0,l=dataset.length;j<l;j++)this.unselectRow(j,!0,!0)}else this.selectRow(row.index(),!0,!0);return this.displayCounts(),nosync||this.syncSelectedUI(),selectAll||this.element.triggerHandler("selected",[this._selectedRows,"select"]),this._selectedRows},findRowsByValue:function findRowsByValue(fieldName,value){for(var s=this.settings,dataset=this.getActiveDataset(),idx=-1,matchedRows=[],i=0;i<dataset.length;i++)if(s.groupable)for(var k=0;k<dataset[i].values.length;k++)idx++,dataset[i].values[k][fieldName]===value&&matchedRows.push(idx);else(s.treeGrid?dataset[i].node:dataset[i])[fieldName]===value&&matchedRows.push(i);return matchedRows},rowStatus:function rowStatus(idx,status,tooltip){var arrayToUse=this.getActiveDataset();if(!status)return delete arrayToUse[idx].rowStatus,void this.updateRow(idx);if(!/dirty/.test(status)&&arrayToUse[idx]){arrayToUse[idx].rowStatus={};var rowStatus=arrayToUse[idx].rowStatus;rowStatus.icon=status,status=(status=status.charAt(0).toUpperCase()+status.slice(1)).replace("-progress","Progress"),rowStatus.text=Locale.translate(status),tooltip=tooltip?tooltip.charAt(0).toUpperCase()+tooltip.slice(1):rowStatus.text,rowStatus.tooltip=tooltip,this.updateRow(idx),this.setupTooltips(!0)}},columnById:function columnById(id){return $.grep(this.settings.columns,(function(e){return e.id===id}))},columnIdxById:function columnIdxById(id){for(var cols=this.settings.columns,idx=-1,i=0;i<cols.length;i++)if(cols[i].id===id){idx=i;break}return idx},handleKeys:function handleKeys(){var _this13=this,self=this,isMultiple="multiple"===self.settings.selectable,checkbox=$("th .datagrid-checkbox",self.headerRow);self.element.on("keydown.datagrid","th",(function(e){var move,key=e.which||e.keyCode||e.charCode||0,th=$(this),index=self.columnIdxById(th.attr("data-column-id")),last=self.visibleColumns().length-1;$(e.target).closest(".popupmenu").length>0||(13!==key&&32!==key||((isMultiple&&0===index?$(".datagrid-checkbox",th):th).trigger("click.datagrid").focus(),32===key&&e.preventDefault()),-1!==[35,36,37,39].indexOf(key)&&(move=index,move=/35|36/i.test(key)||(e.ctrlKey||e.metaKey)&&/37|39/i.test(key)?Locale.isRTL()?36===key||(e.ctrlKey||e.metaKey)&&37===key?last:0:35===key||(e.ctrlKey||e.metaKey)&&39===key?last:0:Locale.isRTL()?39===key?index>0?index-1:index:index<last?index+1:last:37===key?index>0?index-1:index:index<last?index+1:last,self.activeCell.cell=move,th.removeAttr("tabindex").removeClass("is-active"),$("th:not(.is-hidden)",this.headerContainer).eq(move).attr("tabindex","0").addClass("is-active").focus(),e.preventDefault()),40===key&&(th.removeAttr("tabindex"),self.activeCell.node=self.cellNode(0,self.settings.groupable?0:self.activeCell.cell).attr("tabindex","0").focus(),e.preventDefault()))})),self.element.on("keydown.datagrid","td, input",(function(e){var handled=!1;if(113!==(e.which||e.keyCode||e.charCode||0)||_this13.inlineMode||(self.settings.actionableMode=!self.settings.actionableMode,handled=!0),handled)return e.preventDefault(),e.stopPropagation(),handled})),self.element.on("keydown.datagrid","td",(function(e){var key=e.which||e.keyCode||e.charCode||0,handled=!1,target=$(e.target),isRTL=Locale.isRTL(),node=self.activeCell.node,rowNode=$(this).parent(),prevRow=rowNode.prevAll(":not(.is-hidden, .datagrid-expandable-row)").first(),nextRow=rowNode.nextAll(":not(.is-hidden, .datagrid-expandable-row)").first(),row=self.activeCell.row,cell=self.activeCell.cell,col=self.columnSettings(cell),isGroupRow=rowNode.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"),item=self.settings.dataset[self.dataRowIndex(rowNode)],visibleRows=self.tableBody.find("tr:visible"),getVisibleRows=function getVisibleRows(index){var visibleRow=visibleRows.filter('[aria-rowindex="'.concat(index+1,'"]'));return visibleRow.is(".datagrid-rowgroup-header")?visibleRow.index():self.dataRowIndex(visibleRow)};node.length||(self.activeCell.node=self.cellNode(row,cell),node=self.activeCell.node);var getNextVisibleCell=function getNextVisibleCell(currentCell,lastCell,prev){if(isGroupRow)return function getGroupCell(currentCell,lastCell,prev){var n=self.activeCell.groupNode||node,nextCell=currentCell+(prev?-1:1);return nextCell=nextCell>lastCell?prev?n.prevAll(":visible").last():n.nextAll(":visible").last():prev?n.prevAll(":visible").first():n.nextAll(":visible").first()}(currentCell,lastCell,prev);var nextCell=currentCell+(prev?-1:1);if(nextCell>lastCell)return lastCell;for(;self.settings.columns[nextCell]&&self.settings.columns[nextCell].hidden;)nextCell=prev?nextCell-1:nextCell+1;return nextCell},isSelectionCheckbox=!!$(".datagrid-selection-checkbox",node).length,lastRow=visibleRows.last(),lastCell=self.settings.columns.length-1;if(self.settings.onKeyDown){var response=function response(isCancelled){isCancelled||(e.stopPropagation(),e.preventDefault())},args={activeCell:self.activeCell,row:row,cell:cell};if(!1===self.settings.onKeyDown(e,args,response)||!response)return e.stopPropagation(),void e.preventDefault()}if(-1!==[9,37,38,39,40].indexOf(key)){if(target.closest(".code-block").length&&(9!==key||!e.shiftKey||0!==self.getFocusables(node).index))return;if(9!==key){if(target.is(".code-block-actions"))return;if(target.closest(".popupmenu.is-open").closest(".popupmenu-wrapper").prev().is(".code-block-actions"))return}}if(-1!==[9,37,39].indexOf(key)){if(9===key&&!self.settings.actionableMode)return;if(9!==key&&e.altKey)cell=37===key&&!isRTL||39===key&&isRTL?0:lastCell,self.setActiveCell(row,cell);else if(!self.quickEditMode||9===key){if(9===key&&e.shiftKey&&target.is(".code-block-actions")?self.focusNextPrev("prev",node):cell=!isRTL&&(37===key||9===key&&e.shiftKey)||isRTL&&(39===key||9===key)?getNextVisibleCell(cell,lastCell,!0):getNextVisibleCell(cell,lastCell),-1===cell&&!self.settings.actionableMode)return;if(-1===cell&&self.settings.actionableMode&&(cell=lastCell,-1===--row))return;if(cell===lastCell&&lastCell===self.activeCell.cell&&self.settings.actionableMode&&(cell=0,++row===self.visibleRowCount))return;cell instanceof jQuery?self.setActiveCell(cell):self.setActiveCell(row,cell),self.settings.actionableMode&&(self.makeCellEditable(self.activeCell.rowIndex,cell,e),self.containsTextField(node)&&self.containsTriggerField(node)&&(self.quickEditMode=!0)),self.quickEditMode=!1,handled=!0}}if(38===key&&!self.quickEditMode)if(e.altKey||e.metaKey){var firstRow=getVisibleRows(0);self.setActiveCell(firstRow,cell),handled=!0}else{if(0===row&&!prevRow.is(".datagrid-rowgroup-header"))return node.removeAttr("tabindex"),void self.element.find("th").eq(cell).attr("tabindex","0").focus();self.setActiveCell(prevRow,cell),handled=!0}if(40!==key||self.quickEditMode||(e.altKey||e.metaKey?(self.setActiveCell(lastRow,cell),handled=!0):(self.setActiveCell(nextRow,cell),handled=!0)),32===key&&e.ctrlKey&&node){var string="";(row=node.closest("tr")).children().each((function(){var cellNode=$(this);string+="".concat(cellNode.text()," ")})),$("body").toast({title:"",audibleOnly:!0,message:string}),handled=!0}if(36===key&&(self.setActiveCell(row,0),handled=!0),35===key&&(self.setActiveCell(row,lastCell),handled=!0),34===key&&(self.setActiveCell(lastRow,cell),handled=!0),33===key&&(self.setActiveCell(getVisibleRows(0),cell),handled=!0),32===key&&(!self.settings.editable||isSelectionCheckbox)){if(row=node.closest("tr"),1===target.closest(".datagrid-row-detail").length)return;e.preventDefault();var btn=target.find(".datagrid-expand-btn, .datagrid-drilldown");if(btn&&btn.length)return btn.trigger("click.datagrid"),void e.preventDefault();isMultiple&&e.shiftKey?self.selectRowsBetweenIndexes([self.lastSelectedRow,row.attr("aria-rowindex")-1]):self.toggleRowSelection(row)}if(self.settings.editable&&32===key&&(self.editor||self.makeCellEditable(self.activeCell.rowIndex,cell,e)),13===key&&node.is(".has-btn-actions")){var btnAction=node.find(".btn-actions");btnAction.length&&btnAction.trigger("click")}if(13===key&&col.click&&"function"==typeof col.click&&(node.hasClass("is-cell-readonly")||col.click(e,[{row:row,cell:cell,item:item,originalEvent:e}])),self.settings.editable&&13===key){if(target.is("textarea")&&e.shiftKey)return;if(target.is(".btn-menu")||target.closest(".popupmenu.is-open").length)return;self.editor?(self.quickEditMode=!1,self.commitCellEdit(),self.setNextActiveCell(e)):(self.makeCellEditable(self.activeCell.rowIndex,cell,e),self.containsTextField(node)&&self.containsTriggerField(node)&&(self.quickEditMode=!0)),handled=!0}if(-1!==[9,13,32,35,36,37,38,39,40,113].indexOf(key)||e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||!self.settings.editable||self.editor||self.makeCellEditable(self.activeCell.rowIndex,cell,e),isMultiple&&!self.editor&&(e.ctrlKey||e.metaKey)&&65===key&&(checkbox.addClass("is-checked").removeClass("is-partial").attr("aria-checked","true"),self.selectAllRows(),handled=!0),handled)return e.preventDefault(),e.stopPropagation(),!1}))},getFocusables:function getFocusables(node){var focusables=$(":focusable",node);return{elements:focusables,index:focusables.index($(":focus"))}},focusNextPrev:function focusNextPrev(opt,node){if(node&&"string"==typeof opt){opt=opt.toLowerCase();var focusables=this.getFocusables(node),elements=focusables.elements,len=elements.length,index=focusables.index;/\b(next|prev)\b/g.test(opt)&&(index="next"===opt?index+1>=len?0:index+1:index-1<0?len:index-1,elements.eq(index).focus())}},containsTextField:function containsTextField(container){var i,noTextTypes=["image","button","submit","reset","checkbox","radio"],selector="textarea, input",l=noTextTypes.length;for(selector+=l?":not(":"",i=0;i<l;i++)selector+="[type=".concat(noTextTypes[i],"],");return selector=l?"".concat(selector.slice(0,-1),")"):"",!!$(selector,container).length},containsTriggerField:function containsTriggerField(container){return!$(".dropdown, .datepicker, .lookup",container).length},isRowDisabled:function isRowDisabled(row){if(this.settings.isRowDisabled&&"function"==typeof this.settings.isRowDisabled&&"true"===this.rowNodes(row).attr("aria-disabled"))return!0;return!1},isCellEditable:function isCellEditable(row,cell){if(!this.settings.editable)return!1;var col=this.columnSettings(cell);if(col.readonly)return!1;if(this.isRowDisabled(row)||!this.activeCell.node)return!1;var cellNode=this.activeCell.node.find(".datagrid-cell-wrapper"),cellValue=cellNode.text()?cellNode.text():this.fieldValue(this.settings.dataset[row],col.field);if(col.isEditable){var rowData=this.settings.dataset[row];if(this.settings.treeDepth&&this.settings.treeDepth[row]&&(rowData=this.settings.treeDepth[row].node),!col.isEditable(row,cell,cellValue,col,rowData,this,"is-editable"))return!1}return!!col.editor},makeCellEditable:function makeCellEditable(row,cell,event){if(!this.activeCell.node.closest("tr").hasClass("datagrid-summary-row")){var cellNode=this.activeCell.node.find(".datagrid-cell-wrapper"),cellParent=cellNode.parent("td"),treeNode=$(".datagrid-tree-node",cellNode).length>0,treeExpandBtn=$(".datagrid-expand-btn",cellNode).length>0;if(cellParent.hasClass("is-editing")||cellParent.hasClass("is-editing-inline"))return!1;this.editor&&this.editor.input&&this.commitCellEdit();var col=this.columnSettings(cell);if(!col.editor)return 32!==event.keyCode||$(event.currentTarget).find(".datagrid-selection-checkbox").length||this.toggleRowSelection(this.activeCell.node.closest("tr")),!1;var thisRow=this.actualRowNode(row),idx=this.settings.treeGrid?this.actualPagingRowIndex(this.actualRowIndex(thisRow)):this.dataRowIndex(thisRow),rowData=this.rowData(idx),isEditor=$(".is-editor",cellParent).length>0,isPlaceholder=$(".is-placeholder",cellNode).length>0,cellValue=cellNode.text()?cellNode.text():this.fieldValue(rowData,col.field);if((isEditor||isPlaceholder)&&(cellValue=this.fieldValue(rowData,col.field)),!this.isCellEditable(idx,cell))return!1;if((treeExpandBtn||treeNode)&&(treeExpandBtn&&(cellValue=$("> span",cellNode).text()),"string"==typeof cellValue&&(cellValue=cellValue.replace(/^\s/,""))),col.inlineEditor?cellParent.addClass("is-editing-inline"):(isEditor&&cellNode.css({position:"static",height:cellNode.outerHeight()}),cellParent.addClass("is-editing"),cellNode.empty()),cellValue=xssUtils.sanitizeConsoleMethods(cellValue),this.element.triggerHandler("beforeentereditmode",[{row:idx,cell:cell,item:rowData,target:cellNode,value:cellValue,column:col,editor:this.editor}]),1===this.visibleColumns().length&&cellParent.addClass("has-singlecolumn"),this.editor=new col.editor(idx,cell,cellValue,cellNode,col,event,this,rowData),this.editor.row=idx,this.editor.cell=cell,this.settings.onEditCell&&this.settings.onEditCell(this.editor),this.editor.useValue&&(cellValue=this.fieldValue(rowData,col.field)),this.editor.val(cellValue),this.settings.showDirty){var originalVal=cellValue;""===originalVal&&/checkbox|favorite/i.test(this.getEditorName(this.editor))&&(originalVal=!1);var data={originalVal:originalVal,isDirty:!1};this.addToDirtyArray(idx,cell,data)}return this.editor.focus(),this.element.triggerHandler("entereditmode",[{row:idx,cell:cell,item:rowData,target:cellNode,value:cellValue,column:col,editor:this.editor}]),!0}},rowData:function rowData(rowIdx){return this.settings.groupable?this.originalDataset[rowIdx]:this.settings.treeGrid?this.settings.treeDepth[rowIdx].node:this.settings.dataset[rowIdx]},commitCellEdit:function commitCellEdit(isCallback){if(this.editor){var newValue,cellNode,rowIndex,dataRowIndex,input=this.editor.input,editorName=this.getEditorName(this.editor),isEditor="editor"===editorName,isFileupload="fileupload"===editorName,isUseActiveRow=!input.is(".timepicker, .datepicker, .lookup, .spinbox, .colorpicker");"function"==typeof this.editor.val&&(newValue=this.editor.val()),isEditor?cellNode=this.editor.td:isFileupload?("clear"===this.editor.status?newValue="":"init"!==this.editor.status&&"cancel"!==this.editor.status||(newValue=this.editor.originalValue),cellNode=this.tableBody.find("#".concat(input.attr("id"))).closest("td"),newValue=xssUtils.escapeHTML(newValue)):(cellNode=input.closest("td"),newValue=xssUtils.escapeHTML(newValue)),null!==this.settings.source&&isUseActiveRow?(rowIndex=this.activeCell.rowIndex,dataRowIndex=this.activeCell.dataRow):(rowIndex=this.actualRowIndex(cellNode.parent()),dataRowIndex=this.dataRowIndex(cellNode.parent()));var cell=cellNode.attr("aria-colindex")-1,col=this.columnSettings(cell),rowData=this.settings.treeGrid?this.settings.treeDepth[dataRowIndex].node:this.getActiveDataset()[dataRowIndex],oldValue=this.fieldValue(rowData,col.field);if(col.beforeCommitCellEdit&&!isCallback)if(!1===col.beforeCommitCellEdit({cell:cell,row:dataRowIndex,item:rowData,editor:this.editor,api:this}))return;if(this.editor){oldValue=xssUtils.sanitizeConsoleMethods(oldValue),newValue=xssUtils.sanitizeConsoleMethods(newValue);var isInline=cellNode.hasClass("is-editing-inline");cellNode.removeClass("is-editing is-editing-inline has-singlecolumn"),this.editor.destroy(),this.editor=null,this.updateCellNode(this.settings.groupable?dataRowIndex:rowIndex,cell,newValue,!1,isInline);var value=this.fieldValue(rowData,col.field);this.element.triggerHandler("exiteditmode",[{row:rowIndex,cell:cell,item:rowData,target:cellNode,value:value,oldValue:oldValue,column:col,editor:this.editor}])}}},validateCell:function validateCell(row,cell){var _$,validationType,_this14=this,self=this,column=this.columnSettings(cell);if(column.validate){var dfd,i,dfds=[],rules=column.validate.split(" "),validator=$.fn.validation,cellValue=this.fieldValue(this.settings.dataset[row],column.field),messages=[],messageText="";for(i=0;i<rules.length;i++){var rule=validator.rules[rules[i]],gridInfo={row:row,cell:cell,item:this.settings.dataset[row],column:column,grid:self};dfd=$.Deferred(),rule.async?rule.check(cellValue,$("<input>").val(cellValue),gridInfo,manageResult,dfd):manageResult(rule.check(cellValue,$("<input>").val(cellValue),gridInfo),!0,rules[i],dfd),dfds.push(dfd)}(_$=$).when.apply(_$,dfds).then((function(){var validationTypes=$.fn.validation.ValidationTypes;for(var props in validationTypes)if(messageText="",validationType=validationTypes[props],messages[validationType.type]&&(messageText=messages[validationType.type]),""!==messageText){self.showCellError(row,cell,messageText,validationType.type);var rowNode=_this14.dataRowNode(row);self.element.trigger("cell".concat(validationType.type),{row:row,cell:cell,message:messageText,target:_this14.cellNode(rowNode,cell),value:cellValue,column:column})}else self.clearCellError(row,cell,validationType.type)}))}function manageResult(result,displayMessage,ruleName,dfrd){var rule=validator.rules[ruleName];validationType=$.fn.validation.ValidationTypes[rule.type]||$.fn.validation.ValidationTypes.error,messageText="",messages[validationType.type]&&(messageText=messages[validationType.type]),!result&&displayMessage&&(messageText?(messageText=(/^\u2022/.test(messageText)?"":"• ")+messageText,messageText+="<br/>".concat("• ",rule.message)):messageText=rule.message,messages[validationType.type]=messageText),dfrd.resolve()}},showCellError:function showCellError(row,cell,message,type){var rowNode=this.dataRowNode(row),node=this.cellNode(rowNode,cell);if(this.clearNonVisibleCellErrors(row,cell,type),!node.length)return this.nonVisibleCellErrors.push({row:row,cell:cell,message:message,type:type}),void this.showNonVisibleCellErrors();node.addClass(type).attr("data-".concat(type,"message"),message);var icon=node.find(".icon-".concat(type));if(!icon.length){node.find(".datagrid-cell-wrapper").append($($.createIcon({classes:["icon-".concat(type)],icon:type})));var tooltip={forced:!0,placement:"bottom",content:message,isError:"error"===type||"dirtyerror"===type,wrapper:icon=node.find(".icon-".concat(type))};this.cacheTooltip(icon,tooltip),this.setupTooltips(!1,!0)}},showNonVisibleCellErrors:function showNonVisibleCellErrors(){var _this15=this;if(this.toolbar||(this.settings.toolbar={title:" "},this.appendToolbar()),0===this.nonVisibleCellErrors.length)this.toolbar&&1===this.toolbar.parent().find(".table-errors").length&&this.toolbar.parent().find(".table-errors").remove();else{var _loop4=function _loop4(props){var validationType=$.fn.validation.ValidationTypes[props].type,errors=$.grep(_this15.nonVisibleCellErrors,(function(error){return error.type===validationType}));_this15.showNonVisibleCellErrorType(errors,validationType)};for(var props in $.fn.validation.ValidationTypes)_loop4(props)}},showNonVisibleCellErrorType:function showNonVisibleCellErrorType(nonVisibleCellErrors,type){var messages,tableerrors,icon,i,nonVisiblePages=[],validationType=$.fn.validation.ValidationTypes[type]||$.fn.validation.ValidationTypes.error;if(1===this.toolbar.parent().find(".table-errors").length&&(tableerrors=this.toolbar.parent().find(".table-errors")),0!==nonVisibleCellErrors.length){for(i=0;i<nonVisibleCellErrors.length;i++){var page=Math.floor((nonVisibleCellErrors[i].row+this.settings.pagesize)/this.settings.pagesize);-1===$.inArray(page,nonVisiblePages)&&nonVisiblePages.push(page)}for(i=0;i<nonVisiblePages.length;i++)messages="".concat((messages?"".concat(messages,"<br>"):"")+Locale.translate(validationType.pagingMessageID)," ").concat(nonVisiblePages[i]);0===this.toolbar.parent().find(".table-errors").length&&(tableerrors=$('<div class="table-errors"></div>')),(icon=tableerrors.find(".icon-".concat(type))).length||(tableerrors.append($($.createIcon({classes:["icon-".concat(type)],icon:type}))),icon=tableerrors.find(".icon-".concat(type))),this.element.hasClass("has-toolbar")&&this.toolbar.children(".title").append(tableerrors),this.cacheTooltip(icon,{forced:!0,placement:"bottom",content:messages,isError:"error"===type||"dirtyerror"===type,wrapper:icon}),this.setupTooltips(!1,!0)}else tableerrors&&tableerrors.length&&(icon=tableerrors.find(".icon-".concat(validationType.type)),this.hideTooltip(),tableerrors.find(".icon-".concat(validationType.type)).remove())},clearAllCellError:function clearAllCellError(row,cell){var validationTypes=$.fn.validation.ValidationTypes;for(var props in validationTypes){var validationType=validationTypes[props];this.clearCellError(row,cell,validationType.type)}},clearCellError:function clearCellError(row,cell,type){this.clearNonVisibleCellErrors(row,cell,type);var rowNode=this.dataRowNode(row),node=this.cellNode(rowNode,cell);node.length&&this.clearNodeErrors(node,type)},clearNonVisibleCellErrors:function clearNonVisibleCellErrors(row,cell,type){if(this.nonVisibleCellErrors.length){if(this.toolbar&&this.toolbar.parent()&&this.toolbar.parent().find(".table-errors").length>0){var icon=this.toolbar.parent().find(".table-errors").find(".icon-".concat(type));if(icon.length)$.grep(this.nonVisibleCellErrors,(function(error){return error.type===type?error:""})).length||icon.remove()}this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,(function(error){return error.row!==row||error.cell!==cell||error.type!==type?error:""})),this.nonVisibleCellErrors.length||this.showNonVisibleCellErrors()}},clearRowError:function clearRowError(row){this.dataRowNode(row).removeClass("error alert rowstatus-row-error rowstatus-row-alert rowstatus-row-info rowstatus-row-in-progress rowstatus-row-success"),this.rowStatus(row,"","");for(var cell=0;cell<this.settings.columns.length;cell++)this.clearAllCellError(row,cell)},clearAllErrors:function clearAllErrors(){for(var rowStatus=0,row=0;row<this.settings.dataset.length;row++){this.settings.dataset[row].rowStatus&&(delete this.settings.dataset[row].rowStatus,rowStatus++);for(var cell=0;cell<this.settings.columns.length;cell++)this.clearAllCellError(row,cell)}rowStatus>0&&this.render()},clearNodeErrors:function clearNodeErrors(node,type){(node=node instanceof jQuery?node[0]:node).classList.remove(type),node.removeAttribute("data-".concat(type,"message"));var icon=node.querySelector(".icon-".concat(type));icon&&(icon.parentNode.removeChild(icon),this.hideTooltip())},resetRowStatus:function resetRowStatus(){for(var errors=this.settings.dataset.filter((function(row){return row.rowStatus})),i=0;i<errors.length;i++)delete errors[i].rowStatus;errors.length>0&&this.render(),this.clearDirty()},clearDirtyClass:function clearDirtyClass(elem){(elem=elem instanceof jQuery?elem[0]:elem)&&[].slice.call(elem.querySelectorAll(".is-dirty-cell")).forEach((function(cell){cell.classList.remove("is-dirty-cell")}))},clearDirty:function clearDirty(){this.settings.showDirty&&(this.clearDirtyClass(this.element),this.dirtyArray=void 0)},clearDirtyRow:function clearDirtyRow(row){if(this.settings.showDirty&&"number"==typeof row){var rowNode=this.rowNodes(row);this.clearDirtyClass(rowNode),this.dirtyArray&&(this.dirtyArray[row]=void 0)}},clearDirtyCell:function clearDirtyCell(row,cell){this.settings.showDirty&&this.dirtyArray&&"number"==typeof row&&"number"==typeof cell&&(void 0!==this.dirtyArray[row]&&(this.cellNode(row,cell).removeClass("is-dirty-cell"),this.dirtyArray[row][cell]=void 0))},dirtyCells:function dirtyCells(){var s=this.settings,dataset=s.treeGrid?s.treeDepth:s.dataset,cells=[];if(s.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,l=dataset.length;i<l;i++){var row=this.dirtyArray[i];if(void 0!==row)for(var i2=0,l2=row.length;i2<l2;i2++){var col=row[i2];void 0!==col&&col.isDirty&&cells.push(s.treeGrid?dataset[i].node:dataset[i])}}return cells},dirtyRows:function dirtyRows(){var s=this.settings,dataset=s.treeGrid?s.treeDepth:s.dataset,rows=[];if(s.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,l=dataset.length;i<l;i++){var row=this.dirtyArray[i];if(void 0!==row)for(var i2=0,l2=row.length;i2<l2;i2++){var col=row[i2];if(void 0!==col&&col.isDirty){rows.push(s.treeGrid?dataset[i].node:dataset[i]);break}}}return rows},getModifiedRows:function getModifiedRows(onlyChangedValues){for(var s=this.settings,dataset=s.treeGrid?s.treeDepth:s.dataset,modified=[],i=0;i<dataset.length;i++){var node=s.treeGrid?dataset[i].node:dataset[i],data={row:i,data:node,cells:[]};if(this.isRowDirty(i)){data.type="dirty";for(var j=0;!onlyChangedValues&&j<this.dirtyArray[i].length;j++){var cellData=this.dirtyArray[i][j];void 0!==cellData&&cellData.isDirty&&data.cells.push({row:i,col:j,cellData:cellData})}}void 0===node.rowStatus||"error"!==node.rowStatus.icon&&"in-progress"!==node.rowStatus.icon||(data.type="dirty"===data.type?["dirty",node.rowStatus.icon]:node.rowStatus.icon),void 0!==data.type&&modified.push(onlyChangedValues?node:data)}return modified},showRowError:function showRowError(row,message,type){var messageType=type||"error";this.dataRowNode(row).addClass(type),this.rowStatus(row,messageType,message)},validateRow:function validateRow(row){if(row)for(var i=0;i<this.settings.columns.length;i++)this.validateCell(row,i)},validateAll:function validateAll(){for(var j=0;j<this.settings.dataset.length;j++)for(var i=0;i<this.settings.columns.length;i++)this.validateCell(j,i)},columnSettings:function columnSettings(idx){return this.settings.columns[idx]||{}},coerceValue:function coerceValue(value,oldVal,col,row,cell){var newVal;return col.serialize?newVal=col.serialize(value,oldVal,col,row,cell,this.settings.dataset[row]):(col.sourceFormat?newVal=value instanceof Date?Locale.parseDate(value,col.sourceFormat):Locale.formatDate(value,{pattern:col.sourceFormat}):"number"==typeof oldVal&&value&&(newVal=Locale.parseNumber(value)),newVal)},updateCell:function updateCell(row,cell,value){var col=this.columnSettings(cell);void 0===value&&(value=this.fieldValue(this.settings.dataset[row],col.field)),this.updateCellNode(row,cell,value,!0)},updateCellNode:function updateCellNode(row,cell,value,fromApiCall,isInline){var coercedVal,rowNodes=this.settings.groupable?this.rowNodesByDataIndex(row):this.rowNodes(row),cellNode=rowNodes.find("td").eq(cell),col=this.settings.columns[cell]||{},formatted="",formatter=col.formatter?col.formatter:this.defaultFormatter,isEditor=$(".editor",cellNode).length>0,isTreeGrid=this.settings.treeGrid,dataRowIndex=isTreeGrid?this.actualPagingRowIndex(this.actualRowIndex(rowNodes)):this.dataRowIndex(rowNodes);(null==dataRowIndex||isNaN(dataRowIndex))&&(dataRowIndex=row);var rowData=this.rowData(dataRowIndex);0===rowNodes.length&&this.settings.paging&&(cellNode=(rowNodes=this.visualRowNode(row)).find("td").eq(cell));var oldVal=this.fieldValue(rowData,col.field);if((fromApiCall||void 0===(coercedVal=this.coerceValue(value,oldVal,col,row,cell)))&&(coercedVal=value),rowNodes.length&&rowData&&!rowData.rowStatus){var rowstatusIcon=rowNodes.find("svg.icon-rowstatus");rowstatusIcon.length&&rowstatusIcon.remove()}if(this.removeTooltipData(cellNode),0===cell&&rowData&&rowData.rowStatus){var svg=cellNode.find("svg.icon-rowstatus");if(rowNodes&&cellNode[0]){for(var i=0;i<rowNodes.length;i++)rowNodes[i].classList.add("rowstatus-row-".concat(rowData.rowStatus.icon));if(cellNode[0].classList.add("rowstatus-cell"),!svg.length){var svgIcon="success"===rowData.rowStatus.icon?"#icon-check":"#icon-exclamation";cellNode.prepend('<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"><use href="'.concat(svgIcon,'"></use></svg>'))}}if(rowData.rowStatus.tooltip){svg=cellNode.find("svg.icon-rowstatus");var statusIcon=rowData.rowStatus.icon;this.cacheTooltip(svg,{forced:!0,placement:"right",content:rowData.rowStatus.tooltip,isError:"error"===statusIcon||"dirtyerror"===statusIcon,wrapper:cellNode})}}if(coercedVal=xssUtils.unescapeHTML(coercedVal),col.field&&coercedVal!==oldVal)if(col.field.indexOf(".")>-1){var rowDataObj=rowData,nbrParts=col.field.split(".").length;col.field.split(".").forEach((function(part,index){index===nbrParts-1?rowDataObj[part]=coercedVal:rowDataObj=rowDataObj[part]}))}else rowData[col.field]=coercedVal;var escapedVal=xssUtils.escapeHTML(coercedVal),val=isEditor?coercedVal:escapedVal;(formatted=this.formatValue(formatter,row,cell,val,col,rowData),col.contentVisible)&&(col.contentVisible(row,cell,escapedVal,col,rowData)||(formatted=""));if(isInline||cellNode.find(".datagrid-cell-wrapper").html(formatted),fromApiCall||(this.validateCell(dataRowIndex,cell),this.isDirtyCellUndefined(row,cell)||(this.dirtyArray[row][cell].value=value,this.dirtyArray[row][cell].coercedVal=coercedVal,this.dirtyArray[row][cell].escapedCoercedVal=xssUtils.escapeHTML(coercedVal),this.dirtyArray[row][cell].cellNodeText=cellNode.text(),this.dirtyArray[row][cell].cell=cell,this.dirtyArray[row][cell].column=this.settings.columns[cell],this.setDirtyCell(row,cell))),this.settings.stretchColumnOnChange&&col){var newWidth=this.calculateTextWidth(col);col.minWidth&&newWidth<col.minWidth&&(newWidth=col.minWidth),col.minWidth&&newWidth>col.maxWidth&&(newWidth=col.maxWidth),newWidth>0&&newWidth-this.stretchColumnWidth>this.stretchColumnDiff&&(this.stretchColumnWidth=newWidth,this.stretchColumnDiff=0,this.setColumnWidth(col.id,newWidth,!0))}if(oldVal=xssUtils.sanitizeConsoleMethods(oldVal),coercedVal=xssUtils.sanitizeConsoleMethods(coercedVal),(coercedVal=xssUtils.escapeHTML(coercedVal))!==oldVal&&!fromApiCall){var args={row:null!==this.settings.source?dataRowIndex:row,relativeRow:row,cell:cell,target:cellNode,value:coercedVal,oldValue:oldVal,column:col};args.rowData=isTreeGrid&&this.settings.treeDepth[row]?this.settings.treeDepth[row].node:rowData,this.element.trigger("cellchange",args),this.wasJustUpdated=!0}},isRowDirty:function isRowDirty(rowIndex){var isDirty=!1;if("number"==typeof rowIndex&&this.dirtyArray&&this.dirtyArray.length){var row=this.dirtyArray[rowIndex];if(void 0!==row)for(var i=0,l=row.length;i<l;i++){var col=row[i];if(void 0!==col&&col.isDirty){isDirty=!0;break}}}return isDirty},isCellDirty:function isCellDirty(row,cell){return!this.isDirtyCellUndefined(row,cell)&&this.dirtyArray[row][cell].isDirty},addToDirtyArray:function addToDirtyArray(row,cell,data){void 0===this.dirtyArray&&(this.dirtyArray=[]),void 0===this.dirtyArray[row]?(this.dirtyArray[row]=[],this.dirtyArray[row][cell]=data):void 0===this.dirtyArray[row][cell]&&(this.dirtyArray[row][cell]=data)},setDirtyCell:function setDirtyCell(row,cell,dirtyOptions){var cellNode=this.cellNode(row,cell);dirtyOptions&&this.addToDirtyArray(row,cell,dirtyOptions);var d=this.dirtyArray[row][cell];d.originalVal===d.value||d.originalVal===d.coercedVal||d.originalVal===d.escapedCoercedVal||d.originalVal===d.cellNodeText?(this.dirtyArray[row][cell].isDirty=!1,this.setDirtyIndicator(row,cell,!1)):(this.dirtyArray[row][cell].isDirty=!0,cellNode[0].classList.add("is-dirty-cell"),this.setDirtyIndicator(row,cell,!0))},setDirtyIndicator:function setDirtyIndicator(row,cell,toggle,data){var cellNode=this.cellNode(row,cell);data&&this.addToDirtyArray(row,cell,data),row<0||cell<0||!cellNode.length||(toggle?cellNode[0].classList.add("is-dirty-cell"):cellNode[0].classList.remove("is-dirty-cell"))},isDirtyCellUndefined:function isDirtyCellUndefined(row,cell){return!(this.settings.showDirty&&"number"==typeof row&&"number"==typeof cell&&row>-1&&cell>-1&&void 0!==this.dirtyArray&&void 0!==this.dirtyArray[row]&&void 0!==this.dirtyArray[row][cell])},visualRowIndex:function visualRowIndex(row){var selector="tr:visible:not(.is-hidden, .datagrid-expandable-row)",idx=this.tableBody.find(selector).index(row);return-1===idx&&this.tableBodyLeft&&(idx=this.tableBodyLeft.find(selector).index(row)),-1===idx&&this.tableBodyRight&&(idx=this.tableBodyRight.find(selector).index(row)),idx},visualRowNode:function visualRowNode(idx){var rowIdx=idx;return this.settings.paging&&this.settings.source&&(rowIdx+=(this.pagerAPI.activePage-1)*this.settings.pagesize),this.isRowVisible(idx)?this.tableBody.find('tr[aria-rowindex="'.concat(rowIdx+1,'"]')):$([])},actualRowNode:function actualRowNode(idx){return this.tableBody.find('tr[aria-rowindex="'.concat(idx+1,'"]'))},rowNodes:function rowNodes(row){var container=this.element;return row instanceof jQuery&&(container=row.closest(".datagrid-container"),row=row.attr("aria-rowindex")-1),container.find('> .datagrid-wrapper > table > tbody > tr[aria-rowindex="'.concat(row+1,'"]'))},rowNodesByDataIndex:function rowNodesByDataIndex(row){row instanceof jQuery&&(row=row.attr("data-index"));var leftNodes=this.tableBodyLeft?this.tableBodyLeft.find('tr[data-index="'.concat(row,'"]')):$(),centerNodes=this.tableBody.find('tr[data-index="'.concat(row,'"]')),rightNodes=this.tableBodyRight?this.tableBodyRight.find('tr[data-index="'.concat(row,'"]')):$();return $(centerNodes).add(leftNodes).add(rightNodes)},cellNode:function cellNode(row,cell){var cells=this.settings.groupable?this.rowNodesByDataIndex(row).find("td"):this.rowNodes(row).find("td");return cells.eq(cell>=cells.length?cells.length-1:cell)},actualRowIndex:function actualRowIndex(row){return row.attr("aria-rowindex")-1},pagingRowIndex:function pagingRowIndex(idx){var rowIdx=idx;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(rowIdx+=(this.pagerAPI.activePage-1)*this.settings.pagesize),rowIdx},actualPagingRowIndex:function actualPagingRowIndex(idx){var rowIdx=idx;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(rowIdx-=(this.pagerAPI.activePage-1)*this.settings.pagesize),rowIdx},dataRowNode:function dataRowNode(idx){return this.tableBody.find('tr[data-index="'.concat(idx,'"]'))},dataRowIndex:function dataRowIndex(row){return parseInt(row.attr("data-index"),10)},setActiveCell:function setActiveCell(row,cell){var rowNum,rowIndex,dataRowNum,prevCell=this.activeCell,rowElem=row,isGroupRow=row instanceof jQuery&&row.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer");if(!(row instanceof jQuery&&0===row.length||("number"==typeof row&&(rowNum=row,rowElem=this.tableBody.find("tr:visible").eq(row),rowIndex=this.actualRowIndex(rowElem),dataRowNum=this.dataRowIndex(rowElem)),row instanceof jQuery&&row.is("td")&&((isGroupRow=row.parent().is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"))&&(rowElem=row.parent()),cell=row.attr("aria-colindex")-1,rowNum=this.visualRowIndex(row.parent()),rowIndex=this.actualRowIndex(row.parent()),dataRowNum=this.dataRowIndex(row.parent()),rowElem=row.parent()),row instanceof jQuery&&row.is("tr")&&(rowNum=this.visualRowIndex(row),rowIndex=this.actualRowIndex(row),dataRowNum=this.dataRowIndex(row),rowElem=row),rowNum<0||cell<0))){prevCell.node&&1===prevCell.node.length&&this.activeCell.node.removeAttr("tabindex").removeClass("is-active"),prevCell.cell===cell&&prevCell.row===row||this.hideTooltip(),this.activeCell.node=this.cellNode(isGroupRow||rowElem?rowElem:rowIndex>-1?rowIndex:rowNum,cell).attr("tabindex","0"),this.activeCell.node&&1===prevCell.node.length?(this.activeCell.row=rowNum,this.activeCell.cell=cell,rowIndex=this.actualRowIndex(this.activeCell.node.parent()),dataRowNum=this.dataRowIndex(this.activeCell.node.parent())):this.activeCell=prevCell,(!$("input, button:not(.btn-secondary, .row-btn, .datagrid-expand-btn, .datagrid-drilldown, .btn-icon)",this.activeCell.node).length||this.activeCell.node.is(".has-btn-actions")&&this.activeCell.node.find(".btn-actions").length)&&(this.activeCell.node.focus(),isGroupRow&&(this.activeCell.groupNode=this.activeCell.node)),this.activeCell.node.is(".is-focusable")&&this.activeCell.node.find("button").focus(),void 0!==dataRowNum&&(this.activeCell.dataRow=dataRowNum),void 0!==rowIndex&&(this.activeCell.rowIndex=rowIndex);var colSpan=+rowElem.find("td[colspan]").attr("colspan");if(isGroupRow&&this.activeCell.node&&prevCell.node&&!(row instanceof jQuery&&row.is("td"))&&(cell<colSpan?(rowElem.find("td[colspan]").attr("tabindex","0").focus(),this.activeCell.groupNode=rowElem.find("td[colspan]")):cell>=colSpan?(rowElem.find("td").eq(cell-colSpan+1).attr("tabindex","0").focus(),this.activeCell.groupNode=rowElem.find("td").eq(cell-colSpan+1)):(rowElem.find("td").eq(cell).attr("tabindex","0").focus(),this.activeCell.groupNode=rowElem.find("td").eq(cell))),isGroupRow&&row instanceof jQuery&&row.is("td")&&(this.activeCell.cell=colSpan-1+cell,row.is("[colspan]")&&(this.activeCell.cell=cell)),this.settings.cellNavigation){var headers=this.headerNodes(),prevSpans=0;this.hasColSpans&&(prevSpans=0,headers.eq(cell).prevAll("[colspan]").each((function(i,elem){var span=$(elem).attr("colspan")-1;prevSpans+=span})),cell-=prevSpans),headers.removeClass("is-active"),headers.eq(cell).addClass("is-active")}this.activeCell.isFocused=!0;var col=this.settings.columns[cell];col&&col.expandOnActivate&&this.activeCell&&this.activeCell.node&&this.activeCell.node.addClass("is-active"),this.element.trigger("activecellchange",[{node:this.activeCell.node,row:this.activeCell.row,cell:this.activeCell.cell}])}},setNextActiveCell:function setNextActiveCell(e){var self=this;if("keydown"===e.type)if(this.settings.actionableMode){var keyCode=13===e.keyCode?40:e.keyCode;if(32===keyCode)return;setTimeout((function(){var evt=$.Event("keydown.datagrid");evt.keyCode=keyCode,self.activeCell.node.trigger(evt)}),0)}else this.setActiveCell(this.activeCell.row,this.activeCell.cell)},addChildren:function addChildren(parent,data){if(!(!data||data&&!data.length||parent<0)){var node=this.settings.treeDepth[parent].node;node.children=node.children||[];for(var i=0,len=(data=JSON.parse(JSON.stringify(data))).length;i<len;i++)node.children.push(data[i]);this.updateDataset(this.settings.dataset)}},setExpandedInDataset:function setExpandedInDataset(dataRowIndex,isExpanded){this.settings.treeDepth[dataRowIndex].node.expanded=isExpanded},toggleChildren:function toggleChildren(e,dataRowIndex){if(!this.settings.groupable){var self=this,s=this.settings,rowElement=this.rowNodes(dataRowIndex),expandButton=rowElement.find(".datagrid-expand-btn"),level=parseInt(rowElement.attr("aria-level"),10),isExpanded=expandButton.hasClass("is-expanded"),args=[{grid:self,row:dataRowIndex,item:rowElement}];if(self.settings.treeDepth&&self.settings.treeDepth[dataRowIndex]&&(args[0].rowData=self.settings.treeDepth[dataRowIndex].node),rowElement.hasClass("datagrid-tree-parent")&&($(e.target).is(expandButton)||!self.settings.editable&&!self.settings.selectable)){var toggleExpanded=function toggleExpanded(){rowElement=self.rowNodes(dataRowIndex),expandButton=rowElement.find(".datagrid-expand-btn");var children=rowElement.nextUntil('[aria-level="'.concat(level,'"]')),parentRowIdx=self.settings.treeGrid&&self.settings.source&&self.settings.paging?self.dataRowIndex(rowElement):dataRowIndex;isExpanded?(rowElement.attr("aria-expanded",!1),expandButton.removeClass("is-expanded").find(".plus-minus").removeClass("active")):(rowElement.attr("aria-expanded",!0),expandButton.addClass("is-expanded").find(".plus-minus").addClass("active")),self.setExpandedInDataset(parentRowIdx,!isExpanded);!function setChildren(elem,lev,expanded){var nodes=elem.nextUntil('[aria-level="'.concat(lev,'"]'));expanded?nodes.each((function(){var node=$(this);parseInt(node.attr("aria-level"),10)>lev&&node.addClass("is-hidden")})):nodes.each((function(){var node=$(this),nodeLevel=parseInt(node.attr("aria-level"),10);if(nodeLevel===lev+1){if(!node.hasClass("is-filtered")&&(node.removeClass("is-hidden"),self.settings.frozenColumns)){var rowindex=node.attr("aria-rowindex");self.tableBody.find('[aria-rowindex="'.concat(rowindex,'"]')).removeClass("is-hidden")}if(node.is(".datagrid-tree-parent")){var nodeIsExpanded=node.find(".datagrid-expand-btn.is-expanded").length>0;nodeIsExpanded&&setChildren(node,nodeLevel,!nodeIsExpanded)}}}))}(rowElement,level,isExpanded),self.setAlternateRowShading(),args.children=children},triggerEvent=isExpanded?"collapserow":"expandrow";$.when(self.element.triggerHandler(triggerEvent,args)).done((function(response){var isFalse=function isFalse(v){return"string"==typeof v&&"false"===v.toLowerCase()||"boolean"==typeof v&&!1===v||"number"==typeof v&&0===v};isFalse(response)||("function"!=typeof s.onExpandChildren||isExpanded?"function"==typeof s.onCollapseChildren&&isExpanded?$.when(s.onCollapseChildren(args[0])).done((function(res){isFalse(res)||toggleExpanded()})):toggleExpanded():$.when(s.onExpandChildren(args[0])).done((function(res){isFalse(res)||toggleExpanded()})))}))}}},toggleRowDetail:function toggleRowDetail(dataRowIndex){var self=this,rowElement=self.rowNodes(dataRowIndex);!rowElement.length&&self.settings.paging&&(self.settings.rowTemplate||self.settings.expandableRow)&&(dataRowIndex+=(self.pagerAPI.activePage-1)*self.settings.pagesize,rowElement=self.dataRowNode(dataRowIndex));var expandRow=rowElement.next(),expandButton=rowElement.find(".datagrid-expand-btn"),detail=expandRow.find(".datagrid-row-detail"),item=self.settings.dataset[self.dataRowIndex(rowElement)];if(!rowElement.hasClass("datagrid-tree-parent")){if(self.settings.allowOneExpandedRow&&null===self.settings.groupable){var prevExpandRow=self.tableBody.add(self.tableBodyLeft).add(self.tableBodyRight).find("tr.is-expanded"),prevExpandButton=prevExpandRow.prev().find(".datagrid-expand-btn"),parentRow=prevExpandRow.prev(),parentRowIdx=self.actualRowNode(parentRow),parentdataRowIdx=self.dataRowIndex(parentRow);if(prevExpandRow.length&&expandRow.index()!==prevExpandRow.index()){var prevDetail=prevExpandRow.find(".datagrid-row-detail");prevExpandRow.add(prevExpandButton).removeClass("is-expanded"),parentRow.removeClass("is-rowactivated"),parentRow.find(".plus-minus").removeClass("active"),prevDetail.animateClosed().on("animateclosedcomplete",(function(){prevExpandRow.removeClass("is-expanded"),self.element.triggerHandler("collapserow",[{grid:self,row:parentRowIdx,detail:prevDetail,item:self.settings.dataset[parentdataRowIdx]}])}));var prevActionBtn=prevExpandRow.prev().find(".btn-primary");prevActionBtn.length&&prevActionBtn.attr("class",prevActionBtn.attr("class").replace("btn-primary","btn-secondary"))}var isExpanded=!expandRow.hasClass("is-expanded"),actionButton=expandRow.prev().find(isExpanded?".btn-secondary":".btn-primary");if(actionButton.length>0&&parentRow&&actionButton){var currentClass=actionButton.attr("class")||"";actionButton.attr("class",currentClass.replace(isExpanded?"btn-secondary":"btn-primary",isExpanded?"btn-primary":"btn-secondary"))}}if(expandRow.hasClass("is-expanded"))detail.one("animateclosedcomplete",(function(){expandRow.removeClass("is-expanded")})).animateClosed(),expandButton.removeClass("is-expanded").find(".plus-minus").removeClass("active"),self.settings.allowOneExpandedRow&&rowElement.removeClass("is-rowactivated"),self.element.triggerHandler("collapserow",[{grid:self,row:dataRowIndex,detail:detail,item:item}]);else{expandRow.addClass("is-expanded"),expandButton.addClass("is-expanded").find(".plus-minus").addClass("active"),expandRow.find(".constrained-width").css("max-width",this.element.outerWidth());var eventData=[{grid:self,row:dataRowIndex,detail:detail,item:item}];if(self.element.triggerHandler("expandrow",eventData),self.settings.allowOneExpandedRow&&"multiple"!==this.settings.selectable&&rowElement.addClass("is-rowactivated"),self.settings.onExpandRow){self.settings.onExpandRow(eventData[0],(function response(markup){markup&&detail.find(".datagrid-row-detail-padding").empty().append(markup),self.adjustExpandRowHeight(detail),detail.animateOpen()}))}else self.adjustExpandRowHeight(detail),detail.animateOpen();if(self.settings.frozenColumns.expandRowAcrossAllCells&&self.frozenExpandRowAcrossAllCells(),self.settings.frozenColumns.left.length||self.settings.frozenColumns.right.length){var elms={left:detail.eq(0)[0],center:detail.eq(1)[0],right:detail.eq(2)[0]},changedEventStr={theme:"themechanged.".concat("datagrid"),rowheight:"rowheightchanged.".concat("datagrid")};$("html").off(changedEventStr.theme).on(changedEventStr.theme,(function(){self.frozenExpandRowSetHeight(elms)})),self.element.off(changedEventStr.rowheight).on(changedEventStr.rowheight,(function(){self.frozenExpandRowSetHeight(elms)}))}}}},adjustExpandRowHeight:function adjustExpandRowHeight(expandRowElms){if(expandRowElms.length&&(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length)){var elms={left:expandRowElms.eq(0)[0]?expandRowElms.eq(0)[0].children[0]:null,center:expandRowElms.eq(1)[0],right:expandRowElms.eq(2)[0]?expandRowElms.eq(2)[0].children[0]:null},height=0;elms.center&&(elms.center.style.height="auto",height=elms.center.offsetHeight-1,elms.center.style.height=""),height>0&&(elms.left&&(elms.left.style.height="".concat(height,"px")),elms.right&&(elms.right.style.height="".concat(height,"px")))}},frozenExpandRowSetHeight:function frozenExpandRowSetHeight(elms){if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var height=0;if(elms&&elms.center&&(elms.padding=elms.center.querySelector(".datagrid-row-detail-padding"),height=elms.padding.offsetHeight),height&&(elms.center.style.height="".concat(height,"px"),elms.left&&(elms.left.style.height="".concat(height,"px")),elms.right&&(elms.right.style.height="".concat(height,"px")),this.settings.frozenColumns.expandRowAcrossAllCells)){var rect={container:this.element[0].getBoundingClientRect(),centerEl:elms.center.getBoundingClientRect()},top="".concat(rect.centerEl.top-rect.container.top,"px");elms.padding.style.top=top}}},frozenExpandRowAcrossAllCells:function frozenExpandRowAcrossAllCells(){var _this16=this;if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var selector={row:".datagrid-expandable-row.is-expanded"};selector.detail="".concat(selector.row," > td .datagrid-row-detail"),selector.padding="".concat(selector.detail," .datagrid-row-detail-padding");var table={left:this.tableBodyLeft?this.tableBodyLeft[0]:null,center:this.tableBody?this.tableBody[0]:null,right:this.tableBodyRight?this.tableBodyRight[0]:null},elms={rows:{left:table.left?table.left.querySelector(selector.row):null,center:table.center?table.center.querySelector(selector.row):null,right:table.right?table.right.querySelector(selector.row):null},details:{left:table.left?table.left.querySelector(selector.detail):null,center:table.center?table.center.querySelector(selector.detail):null,right:table.right?table.right.querySelector(selector.detail):null},padding:this.tableBody[0].querySelector(selector.padding)};if(elms.padding&&(elms.details.left||elms.details.right)){var cssClass="is-expanded-frozen";elms.padding.style.opacity="0",elms.rows.left&&elms.rows.left.classList.add(cssClass),elms.rows.right&&elms.rows.right.classList.add(cssClass),$(elms.details.center).one("animateopencomplete.datagrid.expandedfrozen",(function(){(elms.details.left||elms.details.right)&&setTimeout((function(){elms.rows.center.classList.add(cssClass),_this16.frozenExpandRowSetHeight(elms.details),elms.padding.style.opacity="",$(window).on("resize.datagrid.expandedfrozen",(function(){_this16.frozenExpandRowSetHeight(elms.details)}))}),10)})).one("animateclosedstart.datagrid.expandedfrozen",(function(){$(window).off("resize.datagrid.expandedfrozen"),elms.padding.style.opacity="0",elms.padding.style.top="",elms.rows.center.classList.remove(cssClass),elms.rows.left&&elms.rows.left.classList.remove(cssClass),elms.rows.right&&elms.rows.right.classList.remove(cssClass)})).one("animateclosedcomplete.datagrid.expandedfrozen",(function(){elms.padding.style.opacity=""}))}}},toggleGroupChildren:function toggleGroupChildren(rowElement){if(this.settings.groupable){var rowIdx=rowElement.index(),childrenLeft=$(),children=$(),childrenRight=$();this.hasLeftPane&&(childrenLeft=this.tableLeft.find("tbody tr").eq(rowIdx).nextUntil(".datagrid-rowgroup-header")),children=this.table.find("tbody tr").eq(rowIdx).nextUntil(".datagrid-rowgroup-header"),this.hasRightPane&&(childrenRight=this.tableRight.find("tbody tr").eq(rowIdx).nextUntil(".datagrid-rowgroup-header"));var expandButton=rowElement.find(".datagrid-expand-btn");rowElement.hasClass("is-expanded")?(expandButton.removeClass("is-expanded").find(".plus-minus").removeClass("active"),childrenLeft.hide(),childrenLeft.addClass("is-hidden"),children.hide(),children.addClass("is-hidden"),childrenRight.hide(),childrenRight.addClass("is-hidden"),this.element.triggerHandler("collapserow",[{grid:this,row:rowElement.index(),detail:children,item:{}}]),rowElement.removeClass("is-expanded")):(expandButton.addClass("is-expanded").find(".plus-minus").addClass("active"),childrenLeft.show(),childrenLeft.removeClass("is-hidden"),children.show(),children.removeClass("is-hidden"),childrenRight.show(),childrenRight.removeClass("is-hidden"),this.element.triggerHandler("expandrow",[{grid:this,row:rowElement.index(),detail:children,item:{}}]),rowElement.addClass("is-expanded"))}},setSortColumn:function setSortColumn(id,ascending){var sortColumnChanged=!0;if(void 0!==ascending?(this.sortColumn.sortAsc===ascending&&this.sortColumn.sortId===id&&(sortColumnChanged=!1),this.sortColumn.sortAsc=ascending):(this.sortColumn.sortId===id?this.sortColumn.sortAsc=!this.sortColumn.sortAsc:this.sortColumn.sortAsc=!0,ascending=this.sortColumn.sortAsc),this.sortColumn.sortId=id,this.sortColumn.sortField=this.columnById(id)[0]?this.columnById(id)[0].field:id,this.sortColumn.sortAsc=ascending,this.setSortIndicator(id,ascending),sortColumnChanged&&this.sortDataset(),!this.settings.focusAfterSort&&this.activeCell&&this.activeCell.isFocused&&(this.activeCell.isFocused=!1),sortColumnChanged){var wasFocused=this.activeCell.isFocused;this.settings.source||(this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.clearCache(),this.renderRows(),this.syncSelectedUI()),wasFocused&&1===this.activeCell.node.length&&this.setActiveCell(this.activeCell.row,this.activeCell.cell),this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value),this.settings.source&&this.triggerSource({type:"sorted"})}this.tableBody.removeClass("is-loading"),this.saveUserSettings(),this.validateAll(),this.element.trigger("sorted",[this.sortColumn])},sortDataset:function sortDataset(){if(this.settings.disableClientSort)this.restoreSortOrder=!0;else{this.settings.groupable&&this.originalDataset&&(this.settings.dataset=this.originalDataset);var sort=this.sortFunction(this.sortColumn.sortId,this.sortColumn.sortAsc);this.saveDirtyRows(),this.settings.dataset.sort(sort),this.setTreeDepth(),this.restoreDirtyRows(),this.settings.selectable&&this.syncDatasetWithSelectedRows()}},saveDirtyRows:function saveDirtyRows(){var s=this.settings,dataset=s.treeGrid?s.treeDepth:s.dataset;if(this.settings.groupable&&(dataset=this.originalDataset||dataset),s.showDirty&&!this.settings.source&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,l=dataset.length;i<l;i++){if(void 0!==this.dirtyArray[i])(s.treeGrid?dataset[i].node:dataset[i]).tempNodeIndex=i}},restoreDirtyRows:function restoreDirtyRows(){var s=this.settings,dataset=s.treeGrid?s.treeDepth:s.dataset;if(this.settings.groupable&&(dataset=this.originalDataset||dataset),s.showDirty&&this.dirtyArray&&this.dirtyArray.length){for(var changes=[],i=0,l=dataset.length;i<l;i++){var node=s.treeGrid?dataset[i].node:dataset[i];void 0!==node.tempNodeIndex&&(changes.push({newIdx:i,oldIdx:node.tempNodeIndex}),delete node.tempNodeIndex)}for(var newDirtyArray=[],_i9=0,_l3=changes.length;_i9<_l3;_i9++)newDirtyArray[changes[_i9].newIdx]=this.dirtyArray[changes[_i9].oldIdx];this.dirtyArray=newDirtyArray}},syncDatasetWithSelectedRows:function syncDatasetWithSelectedRows(){var _this17=this;this._selectedRows=[];for(var data,s=this.settings,dataset=s.treeGrid?s.treeDepth:s.dataset,idx=-1,_loop5=function _loop5(i,_data){if(s.groupable&&!_this17.originalDataset)for(var k=0;k<Object.keys(dataset[i]).length;k++)idx++,_data=Object.keys(dataset[i]).map((function(v){return dataset[i][v]})),_this17.isRowSelected(_data)&&_this17._selectedRows.push({idx:idx,data:_data,elem:_this17.dataRowNode(idx),group:dataset[i],page:_this17.pagerAPI?_this17.pagerAPI.activePage:1,pagingIdx:idx,pagesize:_this17.settings.pagesize});else _data=s.treeGrid?dataset[i].node:dataset[i],_this17.isRowSelected(_data)&&_this17._selectedRows.push({idx:i,data:_data,elem:_this17.visualRowNode(i),pagesize:_this17.settings.pagesize,page:_this17.pagerAPI?_this17.pagerAPI.activePage:1,pagingIdx:i});data=_data},i=0;i<dataset.length;i++)_loop5(i,data)},setSortIndicator:function setSortIndicator(id,ascending){this.headerRow&&(this.sortColumn={sortId:id,sortAsc:ascending,sortField:this.columnById(id)[0]?this.columnById(id)[0].field:id},this.element.find(".is-sorted-asc, .is-sorted-desc").removeClass("is-sorted-asc is-sorted-desc").attr("aria-sort","none"),this.element.find('[data-column-id="'.concat(id,'"]')).addClass(ascending?"is-sorted-asc":"is-sorted-desc").attr("aria-sort",ascending?"ascending":"descending"))},sortFunction:function sortFunction(id,ascending){var column=this.columnById(id),col=0===column.length?null:column[0],field=null===col?id:col.field,self=this,key=function key(x){return function primer(a){return"string"==typeof(a=null==a?"":a)&&(a=a.toUpperCase(),$.isNumeric(a)&&(a=parseFloat(a))),a}(self.fieldValue(x,field))};return col&&col.sortFunction&&(key=function key(x){return col.sortFunction(self.fieldValue(x,field))}),ascending=ascending?1:-1,function(a,b){return a=key(a),b=key(b),_typeof(a)!==_typeof(b)&&(a=a.toString().toLowerCase(),b=b.toString().toLowerCase()),ascending*((a>b)-(b>a))}},isEquivalent:function isEquivalent(obj1,obj2){function _equals(a,b){return JSON.stringify(a)===JSON.stringify($.extend(!0,{},a,b))}return _equals(obj1,obj2)&&_equals(obj2,obj1)},defaultFormatter:function defaultFormatter(row,cell,value){return null==value||""===value?"":value.toString()},handlePaging:function handlePaging(){this.settings.paging&&(this.element.addClass("paginated"),this.tableBody.pager({componentAPI:this,dataset:this.settings.dataset,hideOnOnePage:this.settings.hidePagerOnOnePage,source:this.settings.source,pagesize:this.settings.pagesize,indeterminate:this.settings.indeterminate,rowTemplate:this.settings.rowTemplate,pagesizes:this.settings.pagesizes,pageSizeSelectorText:this.settings.groupable?"GroupsPerPage":"RecordsPerPage",showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.restoreActivePage?parseInt(this.savedActivePage,10):1}),this.restoreActivePage&&(this.savedActivePage=null,this.restoreActivePage=!1))},renderPager:function renderPager(pagingInfo,isResponse,callback){this.pagerAPI&&(this.settings.source||(this.pagerAPI.settings.dataset=this.settings.dataset,pagingInfo.isFilteredClientside=!0),this.pagerAPI.updatePagingInfo(pagingInfo,isResponse),isResponse||this.triggerSource(pagingInfo,callback),this.syncSelectedUI())},getPageableElements:function getPageableElements(){var elements=this.element.children().not(".datagrid-expandable-row");return elements.is("table")&&(elements=elements.find("tbody tr")),elements},appendTooltip:function appendTooltip(extraClass){var _this18=this,regExp=new RegExp("\\b".concat("grid-tooltip","\\b"),"g");"string"==typeof extraClass?regExp.test(extraClass)||(extraClass+=" ".concat("grid-tooltip")):extraClass="grid-tooltip";var tooltipId=this.uniqueId("tooltip");if(this.tooltip=document.getElementById(tooltipId),!this.tooltip){var tooltip=""+'<div id="'.concat(tooltipId,'" class="tooltip ').concat(extraClass,' is-hidden">\n          <div class="arrow"></div>\n          <div class="tooltip-content"></div>\n        </div>');document.body.insertAdjacentHTML("beforeend",tooltip),this.tooltip=document.getElementById(tooltipId),this.isTouch&&(this.tooltip.style.pointerEvents="auto",$(this.tooltip).on("touchend.gridtooltip",(function(){_this18.hideTooltip()})))}},cacheTooltip:function cacheTooltip(elem,tooltip){if(void 0===tooltip){var title,contentTooltip=elem.querySelector(".is-editor.content-tooltip"),aTitle=elem.querySelector("a[title]"),isRowstatus=utils.hasClass(elem,"rowstatus-cell"),isSvg="svg"===elem.tagName.toLowerCase(),isTh="th"===elem.tagName.toLowerCase(),isHeaderColumn=utils.hasClass(elem,"datagrid-column-wrapper"),isHeaderFilter=utils.hasClass(elem.parentNode,"datagrid-filter-wrapper"),cell=elem.getAttribute("aria-colindex")-1,col=this.columnSettings(cell);if(tooltip={content:"",wrapper:elem.querySelector(".datagrid-cell-wrapper")},(isTh||isHeaderColumn||isHeaderFilter)&&(tooltip.wrapper=elem,tooltip.distance=isHeaderFilter?15:null,tooltip.placement=isHeaderColumn?"top":"bottom"),isRowstatus||isSvg){var rowNode=this.closest(elem,(function(el){return utils.hasClass(el,"datagrid-row")})),classList=rowNode?rowNode.classList:[];tooltip.isError=classList.contains("rowstatus-row-error"),tooltip.placement="right",isSvg&&(tooltip.wrapper=this.closest(elem,(function(el){return"td"===el.tagName.toLowerCase()})))}if(contentTooltip){var width=!(!col.editorOptions||!col.editorOptions.width)&&this.setUnit(col.editorOptions.width);contentTooltip.style.width=width||"".concat(elem.offsetWidth,"px");var wrapperHTML=tooltip.wrapper.innerHTML;""!==xssUtils.stripHTML(wrapperHTML)&&(tooltip.content=wrapperHTML,tooltip.extraClassList=["popover","alternate","content-tooltip"])}else if(aTitle)tooltip.content=aTitle.getAttribute("title"),aTitle.removeAttribute("title");else if(title=elem.getAttribute("title"))tooltip.content=title,elem.removeAttribute("title");else if(isTh&&!isHeaderFilter){var targetEl=elem.querySelector(".datagrid-header-text");tooltip.content=targetEl?xssUtils.stripHTML(targetEl.textContent):""}else if(isHeaderFilter){if(!(elem.parentNode.querySelectorAll('.dropdown.is-disabled, input[type="text"][disabled], .btn-filter[disabled]').length>0)){var _targetEl=elem.parentNode.querySelector(".is-checked");tooltip.content=_targetEl?xssUtils.stripHTML(_targetEl.textContent):""}}else tooltip.content=xssUtils.stripHTML(tooltip.wrapper.textContent);var select=tooltip.wrapper.querySelector("select");if(select&&select.selectedIndex&&select.options[select.selectedIndex]&&select.options[select.selectedIndex].innerHTML&&(tooltip.content=Environment.features.touch?"":select.options[select.selectedIndex].innerHTML.trim()),isTh&&(tooltip.content=tooltip.content.trim()),""!==tooltip.content){var isEllipsis=utils.hasClass(isHeaderColumn?elem.parentNode:elem,"text-ellipsis"),icons=[].slice.call(elem.querySelectorAll(".icon")),extraWidth=isEllipsis?8:0;if(icons.forEach((function(icon){extraWidth+=icon.getBBox().width+8})),isEllipsis&&isHeaderColumn){var textEl=elem.querySelector(".datagrid-header-text");tooltip.textwidth=textEl.scrollWidth+(select?0:extraWidth)}else tooltip.textwidth=stringUtils.textWidth(tooltip.content)+(select?0:extraWidth);isTh&&(tooltip.textwidth=stringUtils.textWidth(tooltip.content)),tooltip.content=contentTooltip?tooltip.content:"<p>".concat(tooltip.content,"</p>"),(title||isHeaderFilter)&&(tooltip.forced=!0)}if("function"==typeof col.tooltip){var rowIdx=this.closest(elem,(function(el){return utils.hasClass(el,"datagrid-row")})).getAttribute("data-index"),rowData=this.settings.dataset[rowIdx],value=this.fieldValue(this.settings.dataset[rowIdx],col.field);tooltip.content=col.tooltip(rowIdx,cell,value,col,rowData,this),tooltip.textwidth=stringUtils.textWidth(tooltip.content)+20}}return(elem=elem instanceof jQuery?elem:$(elem)).data("gridtooltip",tooltip),tooltip},showTooltip:function showTooltip(options){var _this19=this;if(this.tooltip){var tooltip=$(this.tooltip),tooltipContentEl=this.tooltip.querySelector(".tooltip-content");if(tooltipContentEl){tooltipContentEl.innerHTML=options.content,this.tooltip.classList.remove("is-hidden","top","right","bottom","left"),this.tooltip.style.display="",this.tooltip.classList.add(options.placement||"top"),options.isError&&this.tooltip.classList.add("is-error"),options.extraClassList&&options.extraClassList.map((function(className){return _this19.tooltip.classList.add(className)}));var distance="number"==typeof options.distance?options.distance:10,placeOptions={x:0,y:distance,container:this.element.closest(".page-container.scrollable")||$("body"),containerOffsetX:options.wrapper.offsetLeft,containerOffsetY:options.wrapper.offsetTop,parent:$(options.wrapper),placement:options.placement||"top",strategies:["flip","nudge"]};"left"!==placeOptions.placement&&"right"!==placeOptions.placement||(placeOptions.x=distance,placeOptions.y=0),tooltip.data("place")||tooltip.place(placeOptions),tooltip.data("place").place(placeOptions),tooltip.data("gridtooltip",!0),tooltip.one("afterplace.gridtooltip",(function(e,placementObj){_this19.handleAfterPlaceTooltip(e,placementObj)})).on("click.gridtooltip",(function(){_this19.hideTooltip()})),$("body, .scrollable").off("scroll.gridtooltip").on("scroll.gridtooltip",(function(){_this19.hideTooltip()}))}}},handleAfterPlaceTooltip:function handleAfterPlaceTooltip(e,placementObj){var tooltip=$("#tooltip");tooltip[0]&&(tooltip.data("place").setArrowPosition(e,placementObj,tooltip),tooltip.triggerHandler("tooltipafterplace",[placementObj]))},hideTooltip:function hideTooltip(){var _this20=this;this.tooltip&&(this.removeTooltipData(this.tooltip),this.tooltip.classList.add("is-hidden"),this.tooltip.classList.remove("is-error","popover","alternate","content-tooltip"),this.tooltip.style.left="-999px"),$("body, .scrollable").off("scroll.gridtooltip",(function(){_this20.hideTooltip()}))},isGridtooltip:function isGridtooltip(){var isGridtooltipType=!1;this.tooltip&&((this.tooltip instanceof jQuery?this.tooltip:$(this.tooltip)).data("gridtooltip")&&(isGridtooltipType=!0));return isGridtooltipType},removeTooltipData:function removeTooltipData(elem){(elem=elem instanceof jQuery?elem:$(elem)).data("gridtooltip")&&$.removeData(elem[0],"gridtooltip")},removeTooltip:function removeTooltip(){var _this21=this;if(this.tooltip){var tooltip=$(this.tooltip),selector={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};selector.str="".concat(selector.th,", ").concat(selector.td,", ").concat(selector.rowstatus),$("body, .scrollable").off("scroll.gridtooltip"),tooltip.off("touchend.gridtooltip"),this.element.off("mouseenter.gridtooltip mouseleave.gridtooltip click.gridtooltip longpress.gridtooltip keydown.gridtooltip",selector.str),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").off("longpress.tableerrortooltip",".icon");var placeApi=tooltip.data("place");placeApi&&placeApi.destroy(),[].slice.call(this.element[0].querySelectorAll(selector.str)).forEach((function(node){return _this21.removeTooltipData(node)})),this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip)}this.tooltip=void 0},destroy:function destroy(){this.removeTooltip(),$("html").off("themechanged.".concat("datagrid")),this.element.add(this.element.find("*")).off("selected.gridpopupth close.gridpopupth selected.gridpopuptr close.gridpopuptr selected.gridpopupbtn close.gridpopupbtn"),this.pagerAPI&&(this.tableBody.off("page.".concat("datagrid"," pagesizechange.").concat("datagrid")),this.pagerAPI.destroy()),this.element.off().empty().removeClass("datagrid-container");var toolbar=this.element.prev(".toolbar");if(this.triggerDestroyCell(),this.removeToolbarOnDestroy&&this.settings.toolbar&&this.settings.toolbar.keywordFilter){var searchfield=toolbar.find(".searchfield");searchfield.data("searchfield")&&searchfield.data("searchfield").destroy(),searchfield.removeData("options")}return this.removeToolbarOnDestroy&&(toolbar.data("toolbar")&&toolbar.data("toolbar").destroy(),toolbar.remove()),this.element.next(".pager-toolbar").remove(),$.removeData(this.element[0],"datagrid"),this.element.off(),$(document).off("touchstart.datagrid touchend.datagrid touchcancel.datagrid click.datagrid touchmove.datagrid"),$("body").off("resize.vtable resize.datagrid"),$(window).off("orientationchange.datagrid"),$(window).off("resize.datagrid"),this},updated:function updated(settings){return this.settings=utils.mergeSettings(this.element,settings,this.settings),this.pagerAPI&&"function"==typeof this.pagerAPI.destroy&&this.pagerAPI.destroy(),settings&&settings.frozenColumns&&(this.headerRow=void 0,this.element.empty(),this.firstRender()),settings&&settings.dataset&&(this.settings.dataset=settings.dataset),settings&&settings.columns&&(this.settings.columns=settings.columns),this.render(),this.handlePaging(),this}},$.fn.datagrid=function(settings){return this.each((function(){var instance=$.data(this,"datagrid");instance?instance.updated(settings):instance=$.data(this,"datagrid",new Datagrid(this,settings))}))};var FORMCOMPACT_DEFAULTS={};function FormCompact(element,settings){if(!(element instanceof HTMLElement))throw new Error("Element used for `FormCompact` component must be an instance of HTMLElement");this.settings=utils.mergeSettings(element,settings,FORMCOMPACT_DEFAULTS),this.element=element,this.init()}FormCompact.prototype={init:function init(){this.form=this.element.querySelector("form"),this.inputs=utils.getArrayFromList(this.element.querySelectorAll("input")),this.renderProps(),this.handleEvents()},renderProps:function renderProps(){var _this=this;if(this.inputs&&this.inputs.length){var props=["disabled","readonly"];this.inputs.forEach((function(input){props.forEach((function(prop){_this.setState(prop,input)}))}))}},handleEvents:function handleEvents(){var _this2=this;$(this.form).on("focusin.".concat("formcompact"),"input",(function(e){return _this2.handleFocusIn(e)})).on("focusout.".concat("formcompact"),"input",(function(e){return _this2.handleFocusOut(e)}));var attributeNames=["disabled","readonly"];this.inputsObserver=new MutationObserver((function(mutationsList){mutationsList.length&&mutationsList.forEach((function(mutation){"attributes"===mutation.type&&attributeNames.indexOf(mutation.attributeName)>-1&&_this2.setState(mutation.attributeName,mutation.target)}))}));var config={attributes:!0};this.inputs.forEach((function(input){_this2.inputsObserver.observe(input,config)}))},handleFocusIn:function handleFocusIn(e){DOM.parents(e.target,".column, .columns",!0).classList.add("is-focused")},handleFocusOut:function handleFocusOut(e){DOM.parents(e.target,".column, .columns",!0).classList.remove("is-focused")},setState:function setState(name,target){if("string"==typeof name&&target instanceof HTMLElement){if(!(["checkbox","radio"].indexOf(target.type)>-1)){"readonly"===name&&(name="readOnly");var operation=!0===target[name]?"add":"remove";target.parentNode.classList[operation]("is-".concat(name.toLowerCase()))}}},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),this.teardown(),this.init()},teardown:function teardown(){this.inputsObserver.disconnect(),delete this.inputsObserver,$(this.form).off(["focusin.".concat("formcompact"),"focusout.".concat("formcompact")].join(" ")),delete this.form,delete this.inputs},destroy:function destroy(){this.teardown(),$.removeData(this.element,"formcompact")}},$.fn.formcompact=function(settings){return this.each((function(){var instance=$.data(this,"formcompact");instance?instance.updated(settings):instance=$.data(this,"formcompact",new FormCompact(this,settings))}))};var HEADER_DEFAULTS={addScrollClass:!1,demoOptions:!0,tabs:null,toolbarSettings:void 0,useAlternate:!1,useBackButton:!0,useBreadcrumb:!1,useFlexToolbar:!1,usePopupmenu:!1,wizardTicks:null};function Header(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,HEADER_DEFAULTS),this.init()}Header.prototype={get toolbarAPI(){if(this.toolbarElem)return this.toolbarElem.data("toolbar-flex")||this.toolbarElem.data("toolbar")},get toolbar(){return warnAboutDeprecation("toolbarAPI","toolbar"),this.toolbarAPI},get titleButton(){var query=".title > button";return this.toolbarElem&&this.toolbarElem.is(".flex-toolbar")&&(query=".toolbar-section:first-child > button"),this.element.find(query)},get hasTitleButton(){return this.titleButton.length>0},init:function init(){this.setup().build().handleEvents(),this.settings.demoOptions&&this.initPageChanger()},setup:function setup(){return this.settings.demoOptions=this.element.attr("data-demo-options")?"true"===this.element.attr("data-demo-options"):this.settings.demoOptions,this.settings.useBackButton=this.element.attr("data-use-backbutton")?"true"===this.element.attr("data-use-backbutton"):this.settings.useBackButton,this.settings.useBreadcrumb=this.element.attr("data-use-breadcrumb")?"true"===this.element.attr("data-use-breadcrumb"):this.settings.useBreadcrumb,this.settings.useAlternate=this.element.attr("data-use-alternate")?"true"===this.element.attr("data-use-alternate"):this.settings.useAlternate,this.settings.tabs=$.isArray(this.settings.tabs)?this.settings.tabs:null,this.settings.wizardTicks=$.isArray(this.settings.wizardTicks)?this.settings.wizardTicks:null,this.titleText=this.element.find(".title > h1"),this.levelsDeep=[],this.levelsDeep.push("".concat(this.titleText.text())),this},build:function build(){var isFlex=!1,elem=this.element.find(".toolbar, .flex-toolbar");if(!elem.length)return this;elem.is(".flex-toolbar")&&(isFlex=!0),this.toolbarElem=elem;var toolbarSettings=this.settings.toolbarSettings;if(this.toolbarElem[isFlex?"toolbarflex":"toolbar"](toolbarSettings),!this.hasTitleButton&&this.levelsDeep.length>1&&this.buildTitleButton(),this.settings.tabs&&this.settings.tabs.length&&this.buildTabs(),this.settings.wizardTicks&&this.settings.wizardTicks.length&&this.buildWizard(),this.settings.usePopupmenu&&this.buildPopupmenu(),this.settings.addScrollClass){var self=$(this.element),scrollDiv=$(this.element).next(".scrollable"),container=1===scrollDiv.length?scrollDiv:$(window),scrollThreshold=this.settings.scrollThreshold?this.settings.scrollThreshold:15;container.on("scroll.header",(function(){this.scrollTop>scrollThreshold?self.addClass("is-scrolled-down"):self.removeClass("is-scrolled-down")})),container.scrollTop()>scrollThreshold&&self.addClass("is-scrolled-down")}return this},buildTitleButton:function buildTitleButton(){if(this.levelsDeep.length>1&&!this.hasTitleButton&&!this.titleButton.length){this.toolbarAPI.teardown();var titleButton=$('<button class="btn-icon back-button" type="button">\n        <span class="audible">'.concat(Locale.translate("Drillup"),'</span>\n        <span class="icon app-header go-back">\n          <span class="one"></span>\n          <span class="two"></span>\n          <span class="three"></span>\n        </span>\n      </button>')),titleElem=this.toolbarElem.find(".title");if(this.settings.useFlexToolbar){var preTitleSection=titleElem.prev(".toolbar-section");preTitleSection.length||(preTitleSection=$('<div class="toolbar-section"></div>').insertBefore(titleElem)),titleButton.prependTo(preTitleSection)}else titleButton.prependTo(titleElem);this.toolbarAPI.init()}this.toolbarElem.addClass("has-title-button"),this.titleButton.find(".icon.app-header").addClass("go-back");var appMenu=$("#application-menu").data("applicationmenu");appMenu?appMenu.modifyTriggers([this.titleButton],null,!0):$("#application-menu").applicationmenu({triggers:[this.titleButton]}),this.handleTitleButtonEvents()},buildBreadcrumb:function buildBreadcrumb(){var self=this,breadcrumbClass="has-breadcrumb";this.settings.useAlternate&&(breadcrumbClass="has-alternate-breadcrumb"),this.element.addClass(breadcrumbClass),this.breadcrumb=this.element.find(".breadcrumb"),this.breadcrumb.length||(this.breadcrumb=$('<nav class="breadcrumb hidden" role="navigation"></nav>').appendTo(this.element),this.breadcrumb.on("click","a",(function(e){self.handleBreadcrumbClick(e)}))),this.breadcrumb[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),this.adjustBreadcrumb()},adjustBreadcrumb:function adjustBreadcrumb(){var last=this.levelsDeep[this.levelsDeep.length-1];this.breadcrumb.empty();var bcMarkup=$('<ol aria-label="breadcrumb"></ol>').appendTo(this.breadcrumb);$.each(this.levelsDeep,(function(i,txt){var current="";last===txt&&(current=" current"),bcMarkup.append($('<li><a href="#" class="hyperlink'.concat(current,'">').concat(txt,"</a></li>")))}))},buildTabs:function buildTabs(){if(this.tabsContainer=this.element.find(".tab-container"),!this.tabsContainer.length){this.tabsContainer=$('<div class="tab-container"></div>').appendTo(this.element);var tablist=$('<ul class="tab-list" role="tablist"></ul>').appendTo(this.tabsContainer);$('<li class="tab"><a href="#header-tabs-home" role="tab">IDS Enterprise Controls | Patterns</a></li>').appendTo(tablist),$('<li class="tab"><a href="#header-tabs-level-1" role="tab">Level 1 Detail</a></li>').appendTo(tablist),$('<li class="tab"><a href="#header-tabs-level-2" role="tab">Level 2 Detail</a></li>').appendTo(tablist)}this.element.addClass(this.settings.useAlternate?"has-alternate-tabs":"has-tabs"),this.tabsContainer[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),$("#header-tabs-level-1").removeAttr("style"),$("#header-tabs-level-2").removeAttr("style"),this.tabsContainer.tabs({containerElement:"#maincontent"})},buildWizard:function buildWizard(){if(this.element.addClass("has-wizard"),this.wizard=this.element.find(".wizard"),!this.wizard.length){this.wizard=$('<div class="wizard"></div>').appendTo(this.element);var header=$('<div class="wizard-header"></div>').appendTo(this.wizard),bar=$('<div class="bar"></div>').appendTo(header);$('<div class="completed-range"></div>').appendTo(bar),$('<a href="#" class="tick current"><span class="label">Context Apps</span></a>').appendTo(bar),$('<a href="#" class="tick"><span class="label">Utility Apps</span></a>').appendTo(bar),$('<a href="#" class="tick"><span class="label">Inbound Configuration</span></a>').appendTo(bar),$('<a href="#" class="tick"><span class="label">OID Mapping</span></a>').appendTo(bar)}this.wizard[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),this.wizard.wizard()},buildPopupmenu:function buildPopupmenu(){this.toolbarAPI.teardown();var title=this.toolbarElem.children(".title");if(this.titlePopup=title.find(".btn-menu"),!this.titlePopup.length){var heading=title.find("h1");heading.wrap('<button id="header-menu" type="button" class="btn-menu"></button>'),this.titlePopup=heading.parent(".btn-menu")}this.titlePopupMenu=this.titlePopup.next(".popupmenu"),this.titlePopupMenu.length||(this.titlePopupMenu=$('<ul class="popupmenu is-selectable"></ul>').insertAfter(this.titlePopup),$('<li class="is-checked"><a href="#">Page One Title</a></li><li><a href="#">Page Two Title</a></li><li><a href="#">Page Three Title</a></li><li class="is-disabled"><a href="#">Page Four Title</a></li><li><a href="#">Page Five Title</a></li>').appendTo(this.titlePopupMenu)),this.titlePopupMenu.addClass("is-selectable");var selectedText=this.titlePopupMenu.children(".is-checked").first().text();selectedText||(selectedText=this.titlePopupMenu.children().first().text()),this.titlePopup.children("h1").text(selectedText),this.titlePopup.button().popupmenu(),this.element.addClass("has-popupmenu-title"),this.toolbarAPI.init()},handleEvents:function handleEvents(){var _this=this,self=this;return this.element.on("updated.".concat("header"),(function(e,settings){self.updated(settings)})).on("reset.".concat("header"),(function(){self.reset()})).on("drilldown.".concat("header"),(function(e,viewTitle){self.drilldown(viewTitle)})).on("drillup.".concat("header"),(function(e,viewTitle){self.drillup(viewTitle)})),$("html").on("themechanged.".concat("header"),(function(){_this.updatePageChanger()})),this.handleTitleButtonEvents(),this.titlePopup&&this.titlePopup.length&&this.titlePopup.on("selected.".concat("header"),(function(e,anchor){var text;text=anchor instanceof $?anchor.text():$(anchor.element).text(),$(this).children("h1").text(text)})),this},handleTitleButtonEvents:function handleTitleButtonEvents(){var _this2=this;this.titleButton&&this.titleButton.length&&this.titleButton.bindFirst("click.".concat("header"),(function(e){_this2.levelsDeep.length>1&&(e.stopImmediatePropagation(),_this2.drillup(),e.returnValue=!1)}))},handleBreadcrumbClick:function handleBreadcrumbClick(e){var delta,selected=$(e.target).parent(),breadcrumbs=this.breadcrumb.find("li"),selectedIndex=breadcrumbs.index(selected);if(!selected.hasClass("current"))if(0!==selectedIndex){if(selectedIndex<breadcrumbs.length-1)for(delta=breadcrumbs.length-1-selectedIndex;delta>0;)this.drillup(),delta-=1}else this.reset()},initPageChanger:function initPageChanger(){if(this.changer=this.element.find(".page-changer"),this.changer.length){var menu=this.changer.data("popupmenu").menu,colorArea=menu.find("li.personalization-colors");if(colorArea.length>0){var colors=theme.personalizationColors(),colorsHtml=colorArea.parent().hasClass("popupmenu")?"":'<li class="heading" role="presentation">Personalization</li>';Object.keys(colors).forEach((function(color){return colorsHtml+='<li class="is-selectable'.concat("Default"===colors[color].name?" is-checked is-default":"",'"><a href="#" data-rgbcolor="').concat(colors[color].value,'">').concat(colors[color].name,"</a></li>"),color})),colorArea.replaceWith(colorsHtml)}this.changer.on("selected.header",(function(e,link){e.preventDefault(),void 0!==link&&!(link instanceof $)&&link.element instanceof HTMLElement&&(link=$(link.element));var themeNameAttr=link.attr("data-theme-name"),themeVariantAttr=link.attr("data-theme-variant");if(themeNameAttr||themeVariantAttr){var name=menu.find(".is-checked a[data-theme-name]").attr("data-theme-name"),variant=menu.find(".is-checked a[data-theme-variant]").attr("data-theme-variant");name&&variant&&personalization.setTheme("".concat(name,"-").concat(variant))}else{var themeAttr=link.attr("data-theme");if(themeAttr)personalization.setTheme(themeAttr);else if(link.parent().hasClass("is-default"))personalization.setColorsToDefault();else{var color=link.attr("data-rgbcolor");personalization.setColors(color)}}}));var currentTheme=theme.currentTheme;if("theme-soho-light"!==currentTheme.id){var themeParts=currentTheme.id.split("-");$("body").find(".popupmenu [data-theme-name]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-name="'.concat(themeParts[0],"-").concat(themeParts[1],'"]')).parent().addClass("is-checked"),$("body").find(".popupmenu [data-theme-variant]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-variant="'.concat(themeParts[2],'"]')).parent().addClass("is-checked")}if(personalization.settings.colors){var _colors="object"===_typeof(personalization.settings.colors)?personalization.settings.colors.header:personalization.settings.colors;_colors=_colors.replace("#",""),$("body").find(".popupmenu [data-rgbcolor]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-rgbcolor="#'.concat(_colors,'"]')).parent().addClass("is-checked")}}},updatePageChanger:function updatePageChanger(){for(var tags=this.changer.data("popupmenu").menu.find("[data-rgbcolor]"),colors=theme.personalizationColors(),keys=Object.keys(colors),i=0;i<tags.length;i++)tags[i].setAttribute("data-rgbcolor",colors[keys[i]].value)},drilldown:function drilldown(viewTitle){this.element.addClass("is-drilldown"),this.levelsDeep.push(viewTitle.toString()),this.titleText.text(this.levelsDeep[this.levelsDeep.length-1]),this.settings.useBackButton&&this.buildTitleButton(),this.settings.useBreadcrumb&&(this.breadcrumb&&this.breadcrumb.length?this.adjustBreadcrumb():(this.buildBreadcrumb(),this.breadcrumb.css({display:"block",height:"auto"}).removeClass("hidden")))},drillup:function drillup(viewTitle){var title;if(this.element.removeClass("is-drilldown"),this.levelsDeep.length>1&&(this.levelsDeep.pop(),title=this.levelsDeep[this.levelsDeep.length-1]),void 0!==viewTitle&&(title=viewTitle),this.levelsDeep.length>1)return this.settings.useBreadcrumb&&this.adjustBreadcrumb(),void this.titleText.text(title);title=this.levelsDeep[0],this.settings.useBackButton&&this.removeButton(),this.settings.useBreadcrumb&&this.removeBreadcrumb(),this.settings.usePopupmenu&&this.removePopupmenu(),this.titleText.text(title),this.element.trigger("drillTop")},reset:function reset(){for(;this.levelsDeep.length>1;)this.levelsDeep.pop();return this.titleText.text(this.levelsDeep[0]),this.removeBreadcrumb(),this.removeTabs(),this.removeWizard(),this.removePopupmenu(),this.removeButton(),this.element.trigger("afterreset"),this},removeButton:function removeButton(){if(this.hasTitleButton)this.titleButton.find(".icon.app-header").removeClass("go-back");else if(this.titleButton&&this.titleButton.length){this.toolbarAPI.teardown();var appMenu=$("#application-menu").data("applicationmenu");appMenu&&appMenu.modifyTriggers([this.titleButton],!0,!0),this.titleButton.off("click.".concat("header")).remove(),this.titleButton=$(),this.toolbarAPI.init()}},removeBackButton:function removeBackButton(){this.titleButton.length&&this.element.find(".go-back").removeClass("go-back")},removeBreadcrumb:function removeBreadcrumb(){if(this.breadcrumb&&this.breadcrumb.length){var timeout,self=this,transitionEnd=$.fn.transitionEndName();self.element.removeClass("has-breadcrumb").removeClass("has-alternate-breadcrumb"),this.breadcrumb.is(":not(:hidden)")?(this.element.one("".concat(transitionEnd,".breadcrumb-header"),destroyBreadcrumb),timeout=setTimeout(destroyBreadcrumb,300)):destroyBreadcrumb()}function destroyBreadcrumb(){timeout&&(clearTimeout(timeout),timeout=null),self.element.off("".concat(transitionEnd,".breadcrumb-header")),self.breadcrumb.off().remove(),self.breadcrumb=$()}},removeTabs:function removeTabs(){if(this.tabsContainer&&this.tabsContainer.length){var timeout,self=this,transitionEnd=$.fn.transitionEndName();this.element.removeClass("has-tabs").removeClass("has-alternate-tabs"),this.tabsContainer.is(":not(:hidden)")?(this.element.one("".concat(transitionEnd,".tabs-header"),destroyTabs),timeout=setTimeout(destroyTabs,300)):destroyTabs()}function destroyTabs(){timeout&&(clearTimeout(timeout),timeout=null),self.element.off("".concat(transitionEnd,".tabs-header")),self.tabsContainer.data("tabs").destroy(),self.tabsContainer.remove(),self.tabsContainer=null,$("#header-tabs-level-1").css("display","none"),$("#header-tabs-level-2").css("display","none")}},removeWizard:function removeWizard(){if(this.wizard&&this.wizard.length){var timeout,self=this,transitionEnd=$.fn.transitionEndName();this.element.removeClass("has-wizard"),this.wizard.is(":not(:hidden)")?(this.element.one("".concat(transitionEnd,".wizard-header"),destroyWizard),timeout=setTimeout(destroyWizard,300)):destroyWizard()}function destroyWizard(){timeout&&(clearTimeout(timeout),timeout=null),self.element.off("".concat(transitionEnd,".wizard-header")),self.wizard.data("wizard").destroy(),self.wizard.remove(),self.wizard=null}},removePopupmenu:function removePopupmenu(){this.titlePopup&&this.titlePopup.length&&(this.toolbarAPI.teardown(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("popupmenu").destroy(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("button").destroy(),this.titlePopupMenu.remove(),this.titlePopup.children("h1").detach().insertBefore(this.titlePopup),this.titlePopup.remove(),this.titlePopup=void 0,this.titlePopupMenu=void 0,this.element.removeClass("has-popupmenu-title"),this.toolbarAPI.init())},unbind:function unbind(){return this.titleButton&&this.titleButton.length&&this.titleButton.off("click.".concat("header")),this.titlePopup&&this.titlePopup.length&&this.titlePopup.off("updated.".concat("header")),this.element.off(["updated.".concat("header"),"reset.".concat("header"),"drilldown.".concat("header"),"drillup.".concat("header")].join(" ")),$("html").off("themechanged.".concat("header")),this},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.reset().unbind().init()},destroy:function destroy(){if(this.unbind(),this.hasTitleButton&&this.toolbarElem.removeClass("has-title-button"),this.changer){var api=this.changer.data("popupmenu");api&&"function"==typeof api.destroy&&api.destroy(),this.changer.remove(),delete this.changer}$.removeData(this.element[0],"header")}},$.fn.header=function(settings){return this.each((function(){var instance=$.data(this,"header");instance?instance.updated(settings):instance=$.data(this,"header",new Header(this,settings))}))};var LOOKUP_GRID_ID="lookup-datagrid",LOOKUP_DEFAULTS={click:null,field:"id",title:null,buttons:[],options:null,beforeShow:null,modalContent:null,editable:!0,typeahead:!1,autoApply:!0,validator:null,autoWidth:!1,clickArguments:{},delimiter:",",minWidth:null};function Lookup(element,settings){this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,LOOKUP_DEFAULTS),this.init()}Lookup.prototype={get isFocused(){var active=document.activeElement,inputIsActive=this.element.is(active),wrapperHasActive=this.element.parent(".lookup-wrapper")[0].contains(active);return inputIsActive||wrapperHasActive},init:function init(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=!!this.inlineLabelText.length,this.build(),this.handleEvents(),this.grid=null,this.selectedRows=null},build:function build(){var lookup=this.element;var cssClass=function getWrapperCSSClass(){var str="lookup-wrapper";return lookup.is(".input-xs")&&(str+=" xs"),lookup.is(".input-sm")&&(str+=" sm"),lookup.is(".input-lg")&&(str+=" lg"),str}();if(this.element.is(".has-actions")&&(cssClass+=" has-actions-wrapper"),this.icon=$('<span class="trigger"></span>').append($.createIcon("search-list")),this.isInlineLabel)this.inlineLabel.addClass(cssClass);else if(this.container=$('<span class="'.concat(cssClass,'"></span>')),this.element.is(".field-options")){var fieldOptionsTrigger=this.element.closest(".field").find(".btn-actions");lookup.add(fieldOptionsTrigger).add(fieldOptionsTrigger.next(".popupmenu")).wrapAll(this.container)}else lookup.wrap(this.container);lookup.after(this.icon),lookup.hasClass("hidden")&&this.icon.addClass("hidden"),this.settings.autoWidth&&this.applyAutoWidth(),this.minWidth||(this.settings.minWidth=this.settings.options&&this.settings.options.paging?482:400),lookup.attr("data-mask")&&lookup.mask(),this.element.is(":disabled")&&this.disable(),this.settings.editable||this.element.attr("readonly","true").addClass("is-not-editable"),this.element.parent(".lookup-wrapper").next().is(".btn-actions")&&(this.element.data("fieldoptions")&&this.element.data("fieldoptions").destroy(),this.element.fieldoptions()),this.addAria(),void 0===lookup.attr("autocomplete")&&lookup.attr("autocomplete","off")},addAria:function addAria(){this.label=this.isInlineLabel?this.inlineLabelText:$('label[for="'.concat(this.element.attr("id"),'"]'))},handleEvents:function handleEvents(){var self=this;this.icon.on("click.lookup",(function(e){self.openDialog(e)})),this.element.on("keyup.lookup",(function(e){$("#autocomplete-list").length>0||40===e.which&&self.openDialog(e)}))},openDialog:function openDialog(e){var self=this;if(!this.isOpen&&(!1!==self.element.triggerHandler("beforeopen")&&!(self.isDisabled()||self.isReadonly()&&!self.element.hasClass("is-not-editable"))))if(self.settings.click)self.settings.click(e,this,self.settings.clickArguments);else{if(this.isOpen=!0,this.settings.beforeShow){return this.element.triggerHandler("start"),void this.settings.beforeShow(this,(function response(grid){return grid&&self.createGrid(grid),("boolean"!=typeof grid||!1!==grid)&&(self.createModal(),self.element.triggerHandler("complete"),self.element.trigger("open",[self.modal,self.grid]),self.settings.validator&&self.settings.validator(self.element,self.modal,self.grid),!0)}))}if(this.settings.options){self.createModal(),self.element.trigger("open",[self.modal,self.grid]),self.modal.element.find(".btn-actions").removeClass("is-selected"),self.grid&&self.grid.cellNode(0,0,!0).attr("tabindex","0");var thisMoreBtn=self.modal.element.find(".toolbar .more > .btn-actions");thisMoreBtn.length&&setTimeout((function(){utils.fixSVGIcons(thisMoreBtn)}),600),self.element.trigger("afteropen",[self.modal,self.grid]),self.settings.validator&&self.settings.validator(self.element,self.modal,self.grid)}}},createModal:function createModal(){var self=this,content='<div id="'.concat(LOOKUP_GRID_ID,'"></div>'),thisLabel=$('label[for="'.concat(self.element.attr("id"),'"]'));var labelText=function getLabelText(){return self.isInlineLabel?self.inlineLabelText:thisLabel.length?thisLabel.clone().find("span").remove().end().text():self.settings.title?self.settings.title:""}(),settingContent=this.settings.modalContent;settingContent&&settingContent instanceof jQuery&&(content=settingContent,settingContent.show()),!settingContent||settingContent instanceof jQuery||(content=settingContent);var buttons=this.settings.buttons;(this.settings.options&&"multiple"===this.settings.options.selectable&&0===buttons.length||!self.settings.autoApply&&0===buttons.length)&&(buttons=[{text:Locale.translate("Cancel"),click:function click(e,modal){self.element.focus(),modal.close()}},{text:Locale.translate("Apply"),click:function click(e,modal){modal.close(),self.insertRows()},isDefault:!0}]),this.settings.options&&"single"===this.settings.options.selectable&&0===buttons.length&&self.settings.autoApply&&(buttons=[{text:Locale.translate("Cancel"),click:function click(e,modal){self.element.focus(),modal.close()}}]);var hasKeywordSearch=this.settings.options&&this.settings.options.toolbar&&this.settings.options.toolbar.keywordFilter;$("body").modal({title:labelText,content:content,buttons:buttons,cssClass:"lookup-modal".concat(hasKeywordSearch?"":" lookup-no-search")}).off("open.lookup").on("open.lookup",(function(){self.createGrid()})).off("close.lookup").on("close.lookup",(function(){self.element.focus(),delete self.isOpen,self.element.triggerHandler("close",[self.modal,self.grid])})),self.modal=$("body").data("modal"),this.settings.title||self.modal.element.find(".modal-title").append(' <span class="datagrid-result-count"></span>'),self.modal.element.off("afterclose.lookup").on("afterclose.lookup",(function(){self.closeTearDown()})),setTimeout((function(){$(".modal.is-visible .searchfield").on("keypress.lookup",(function(e){return 13!==e.keyCode}))}),300)},closeTearDown:function closeTearDown(){var search=$(".modal.is-visible .searchfield").off("keypress.lookup");search.data()&&search.data("searchfield")&&search.data("searchfield").destroy(),search.data()&&search.data("searchfield")&&(search.data("searchfield").destroy(),search.removeData()),search=null,this.grid&&this.grid.destroy&&(this.grid.deSelectAllRows(),this.grid.clearFilter(),this.grid.destroy(),this.grid=null)},doMerge:function doMerge(){for(var hash={},arr=[],_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];for(var i=0;i<args.length;i++)for(var j=0;j<args[i].length;j++)!0!==hash[args[i][j]]&&(arr[arr.length]=args[i][j],hash[args[i][j]]=!0);return arr},createGrid:function createGrid(grid){var lookupGrid,_this=this,self=this;grid?(lookupGrid=grid,LOOKUP_GRID_ID=grid.attr("id"),self.settings.options=grid.data("datagrid").settings):lookupGrid=self.modal.element.find("#".concat(LOOKUP_GRID_ID)),this.settings.minWidth&&(lookupGrid=this.applyMinWidth(lookupGrid)),self.settings.options&&("single"===self.settings.options.selectable&&self.settings.autoApply&&(self.settings.options.cellNavigation=!1,lookupGrid.find("tr").addClass("is-clickable")),self.settings.options.isList=!0,lookupGrid.data("datagrid")||lookupGrid.datagrid(self.settings.options)),self.grid=lookupGrid.data("datagrid"),!this.settings.title&&self.modal&&self.modal.element.find(".title").not(".selection-count").remove();var hasKeywordSearch=this.settings.options&&this.settings.options.toolbar&&this.settings.options.toolbar.keywordFilter;!hasKeywordSearch&&self.modal&&self.modal.element.find(".toolbar").appendTo(self.modal.element.find(".modal-header")),hasKeywordSearch&&self.grid&&(!self.grid.filterExpr||self.grid.filterExpr&&self.grid.filterExpr[0]&&""!==self.grid.filterExpr[0].value)&&self.grid.keywordSearch(""),lookupGrid.off("selected.lookup");var val=self.element.val();val&&!this.settings.options.source&&self.selectGridRows(val),this.settings.options.source&&lookupGrid.off("afterpaging.lookup").on("afterpaging.lookup",(function(){var fieldVal=self.element.val();_this.selectGridRows(fieldVal)})),this.settings.options&&lookupGrid.on("selected.lookup",(function(e,selectedRows){selectedRows&&0!==selectedRows.length&&(self.settings.validator&&self.settings.validator(self.element,self.modal,self.grid),"single"===self.settings.options.selectable&&self.settings.autoApply&&(self.modal.close(),self.insertRows()))})),this.settings.options.source&&this.grid.element.one("afterrender.lookup",(function(){if(!_this.initValues||_this.initValues&&!_this.initValues.length){_this.initValues=[];var fieldVal=_this.element.val();if(fieldVal)(fieldVal.indexOf(_this.settings.delimiter)>1?fieldVal.split(_this.settings.delimiter):[fieldVal]).forEach((function(v){_this.initValues.push({value:v,visited:!!_this.grid.settings.dataset.filter((function(node){return function isMatch(node,v){return(node[_this.settings.field]||"").toString()===v.toString()}(node,v)})).length})}))}}))},selectGridRows:function selectGridRows(val){var selectedId=val,adjust=!1;if(val){if(this.grid&&this.settings.options.source)for(var i=this.grid._selectedRows.length-1;i>-1;i--)isNaN(this.grid._selectedRows[i].idx)&&this.grid._selectedRows.splice(i,1);if(selectedId.indexOf(this.settings.delimiter)>1){for(var selectedIds=selectedId.split(this.settings.delimiter),isFound=!1,_i=0;_i<selectedIds.length;_i++)if(isFound=this.selectRowByValue(this.settings.field,selectedIds[_i]),this.grid&&this.settings.options.source&&!isFound){for(var data={},foundInData=!1,j=0;j<this.grid._selectedRows.length;j++)this.grid._selectedRows[j].data[this.settings.field].toString()===selectedIds[_i].toString()&&(foundInData=!0);foundInData||(data[this.settings.field]=selectedIds[_i],this.grid._selectedRows.push({data:data})),adjust=!0}adjust&&this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(selectedIds.length," ").concat(Locale.translate("Selected")))}else this.selectRowByValue(this.settings.field,selectedId)}},selectRowByValue:function selectRowByValue(field,value){if(!this.settings.options)return!1;var data=this.settings.options.source?this.grid.settings.dataset:this.settings.options.dataset,selectedRows=[];if(!data)return!1;for(var i=0;i<data.length;i++){var _data$i$field,isMatch=!1;if("function"==typeof this.settings.match&&this.settings.match(value,data[i],this.element,this.grid)&&(isMatch=!0),"function"!=typeof this.settings.match&&(null===(_data$i$field=data[i][field])||void 0===_data$i$field||null==_data$i$field?void 0:_data$i$field.toString())===(null==value||null==value?void 0:value.toString())&&(isMatch=!0),isMatch){var rowIndex=this.grid.settings.source?this.grid.actualRowIndex(this.grid.tableBody.find("tr").eq(i)):i;selectedRows.push(rowIndex)}}return!!(this.grid&&selectedRows.length>0)&&(this.grid.selectRows(selectedRows,!1,!0),!0)},insertRows:function insertRows(){var value="";this.selectedRows=this.grid.selectedRows();for(var i=0;i<this.selectedRows.length;i++){var currValue="";currValue="function"==typeof this.settings.field?this.settings.field(this.selectedRows[i].data,this.element,this.grid):this.selectedRows[i].data[this.settings.field],value+=(0!==i?this.settings.delimiter:"")+currValue;var idx=this.selectedRows[i].idx;this.settings.options.dataset&&this.settings.options.dataset[idx]&&delete this.settings.options.dataset[idx]._selected}this.element.val(value).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows]),this.applyAutoWidth(),this.element.focus()},enable:function enable(){this.element.prop("disabled",!1).prop("readonly",!1),this.element.parent().removeClass("is-disabled")},disable:function disable(){this.element.prop("disabled",!0),this.element.parent().addClass("is-disabled")},readonly:function readonly(){this.element.prop("readonly",!0)},applyAutoWidth:function applyAutoWidth(){var value=this.element.val(),length=value.length,isUpperCase=value===value.toUpperCase(),isNumber=!isNaN(value);this.element.attr("size",length+(isUpperCase&&!isNumber?2:1))},applyMinWidth:function applyMinWidth(lookupGrid){if(null==this.settings.minWidth)return lookupGrid;if($(window).width()>this.settings.minWidth){this.modal.element.addClass("has-minwidth");var minWidth="".concat(this.settings.minWidth,"px");lookupGrid.css({"min-width":minWidth})}return lookupGrid},isDisabled:function isDisabled(){return this.element.prop("disabled")},isReadonly:function isReadonly(){return this.element.prop("readonly")},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings))},updateDataset:function updateDataset(dataset,pagerInfo){this.settings.options.dataset=dataset,pagerInfo&&pagerInfo.activePage&&(this.settings.options.activePage=pagerInfo.activePage),pagerInfo&&pagerInfo.pagesize&&(this.settings.options.pagesize=pagerInfo.pagesize),this.grid&&this.grid.updateDataset(dataset,pagerInfo)},destroy:function destroy(){$.removeData(this.element[0],"lookup"),$(".modal .searchfield").off("keypress.lookup"),$("body").off("open.lookup close.lookup"),this.modal&&this.modal.element&&(this.modal.element.off("afterclose.lookup"),"function"==typeof this.modal.destroy&&this.modal.destroy()),this.element.off("keyup.lookup"),this.icon.off("click.lookup"),this.icon.remove(),this.element.unwrap()}},$.fn.lookup=function(settings){return this.each((function(){var instance=$.data(this,"lookup");instance?instance.updated(settings):instance=$.data(this,"lookup",new Lookup(this,settings))}))};var MULTITABS_DEFAULTS={tabContainers:[]},TAB_CONTAINER_NAMES=["primary","secondary","tertiary"];function MultiTabs(element,settings){return this.element=$(element),this.settings=utils.mergeSettings(this.element[0],settings,MULTITABS_DEFAULTS),this.tabContainers={},this.init()}MultiTabs.prototype={init:function init(){var self=this,tabContainers=[];tabContainers=this.settings.tabContainers instanceof Array&&this.settings.tabContainers.length?this.settings.tabContainers:this.element.find(".tab-container").filter((function(){return!$(this).parents(".tab-panel-container").length})),$(tabContainers).each((function(){self.setupTabsInstance($(this))}))},setupTabsInstance:function setupTabsInstance(tabContainer){if(tabContainer instanceof $){var self=this,didAdd=!1;if(TAB_CONTAINER_NAMES.forEach((function(propname){if(!didAdd&&!Object.prototype.hasOwnProperty.call(self.tabContainers,propname)){var api=tabContainer.data("tabs");api||(tabContainer.tabs(),api=tabContainer.data("tabs")),api.multitabsID=propname,tabContainer.attr("data-multitabs",propname),self.tabContainers[propname]=tabContainer,didAdd=!0}})),!didAdd)throw new Error("all tab-container slots in MultiTabs component are taken, so a new tabs container was not invoked and stored")}},add:function add(tabContainer,tabId,options,atIndex){return(tabContainer=this.checkForValidTabContainer(tabContainer)).data("tabs").add(tabId,options,atIndex)},remove:function remove(tabContainer,tabId,disableBeforeClose){return(tabContainer=this.checkForValidTabContainer(tabContainer)).data("tabs").remove(tabId,disableBeforeClose)},move:function move(tabId,targetTabContainerName,doActivate){if(!tabId||!targetTabContainerName)throw new Error("can't move a tab without both a tabId and a targetTabContainerName");var tabMarkup,panelMarkup,originalTabContainerName;if(this.getFilterableTabContainers().each((function(){var api=$(this).data("tabs"),tab=api.getTab(null,tabId);null!==tab&&(originalTabContainerName=api.multitabsID,tabMarkup=tab.clone(),panelMarkup=api.getPanel(tabId).children())})),!tabMarkup)throw new Error('No tab markup was found in any Multitabs container for href "'.concat(tabId,'"'));this.remove(originalTabContainerName,tabId),this.add(targetTabContainerName,tabId,{name:tabMarkup.children("a").text().trim(),content:panelMarkup,doActivate:doActivate})},getTabContainer:function getTabContainer(name){var ref,self=this;return TAB_CONTAINER_NAMES.forEach((function(propname){!ref&&self.tabContainers[propname]&&name===propname&&(ref=self.tabContainers[propname])})),ref},getFilterableTabContainers:function getFilterableTabContainers(){var ret=$();return this.performOnAllContainers((function(propname,container){ret=ret.add(container)})),ret},checkForValidTabContainer:function checkForValidTabContainer(tabContainer){if(!tabContainer)throw new Error("Need to have a tabContainer defined to hide a tabs instance");if("string"==typeof tabContainer&&(tabContainer=this.getTabContainer(tabContainer)),!(tabContainer instanceof $&&tabContainer.length))throw new Error("No matching tabContainer could be found and hidden.");return tabContainer},performOnAllContainers:function performOnAllContainers(callback,additionalArgs){var self=this;Array.isArray(additionalArgs)||(additionalArgs=additionalArgs?[additionalArgs]:[]),TAB_CONTAINER_NAMES.forEach((function(propname){var container=self.tabContainers[propname],args=[];container&&(args.push(propname,container),args=args.concat(additionalArgs),callback.apply(this,args))}))},adjustModuleTabContainers:function adjustModuleTabContainers(){this.performOnAllContainers((function(propname,container){var api=container.data("tabs");api.isModuleTabs()&&api.adjustModuleTabs()}))},hideTabsInstance:function hideTabsInstance(tabContainer){(tabContainer=this.checkForValidTabContainer(tabContainer)).parent(".multitabs-section").addClass("hidden"),this.adjustModuleTabContainers()},showTabsInstance:function showTabsInstance(tabContainer){(tabContainer=this.checkForValidTabContainer(tabContainer)).parent(".multitabs-section").removeClass("hidden"),this.adjustModuleTabContainers()},destroyTabsInstance:function destroyTabsInstance(tabContainer){if(tabContainer instanceof $&&tabContainer.data("tabs")&&"function"==typeof tabContainer.data("tabs").destroy){var self=this,doRemove=!1;if(TAB_CONTAINER_NAMES.forEach((function(propname){if(!doRemove&&self.tabContainers[propname].is(tabContainer)){var api=tabContainer.data("tabs");delete api.multitabsID,tabContainer.removeAttr("data-multitabs"),api.destroy(),delete self.tabContainers[propname],doRemove=!0}})),!doRemove)throw new Error("could not destroy a tabContainer because it was not associated with this Multitabs instance")}},isHidden:function isHidden(tabContainer){return(tabContainer=this.checkForValidTabContainer(tabContainer)).parent(".multitabs-section").is(".hidden")},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings))},teardown:function teardown(){var _this=this;return Object.keys(this.tabContainers).forEach((function(container){_this.destroyTabsInstance(container)})),this},destroy:function destroy(){this.teardown(),$.removeData(this.element[0],"multitabs")}},$.fn.multitabs=function(settings){return this.each((function(){var instance=$.data(this,"multitabs");instance?instance.updated(settings):instance=$.data(this,"multitabs",new MultiTabs(this,settings))}))};var LIST_DETAIL_DEFAULTS={backElement:void 0,edgeBleed:!1,edgeBleedBreakpoint:"phone",listElement:void 0,listCloseElement:void 0,detailElement:void 0},LIST_DETAIL_SUPPORTED_LIST_TYPES=["accordion","listview"];function getListType(listElement){var type;if(listElement instanceof HTMLElement)return Object.keys($(listElement).data()).forEach((function(key){LIST_DETAIL_SUPPORTED_LIST_TYPES.indexOf(key)>-1&&(type=key)})),type}function ListDetail(element,settings){element instanceof HTMLElement&&(this.element=element,this.settings=utils.mergeSettings(this.element,settings,LIST_DETAIL_DEFAULTS),this.init())}ListDetail.prototype={init:function init(){var _this=this;if(this.setInternalElementReference("listElement",(function(elemType){return function isValidList(listElement){return listElement instanceof HTMLElement&&void 0!==getListType(listElement)}(_this.settings[elemType])})),this.setInternalElementReference("detailElement"),this.setInternalElementReference("backElement"),this.setInternalElementReference("listCloseElement"),this.showDetail=!1,this.element.classList.contains("show-detail")&&(this.showDetail=!0),this.listElement){this.listComponentType=getListType(this.listElement);var API=this.getListAPI();API&&(API.isControllingDetails=!0)}if(this.backElement){this.backElement.classList.add("list-detail-back-button");var hasIcon=this.backElement.querySelector(".icon");hasIcon&&(this.backElementIcon=hasIcon),this.listContainsBackElement=this.listElement.contains(this.backElement),this.detailContainsBackElement=this.detailElement.contains(this.backElement)}var children=this.element.querySelectorAll(".list-detail");children&&(this.childrenListDetailElements=children),this.settings.edgeBleed?(this.edgeBleed=!0,this.element.classList.add("bleeding-edge__".concat(this.settings.edgeBleedBreakpoint))):(this.edgeBleed=!1,this.element.classList.remove("bleeding-edge__phone","bleeding-edge__tablet")),this.setBreakpointChecks(),this.handleEvents()},setBreakpointChecks:function setBreakpointChecks(){this.abovePhoneBreakpoint=breakpoints.isAbove("phone-to-tablet"),this.aboveTabletBreakpoint=breakpoints.isAbove("desktop")},setInternalElementReference:function setInternalElementReference(elementType,storageConditions){if("string"==typeof this.settings[elementType]&&this.settings[elementType].length){var queryForElem=document.querySelector(this.settings[elementType]);queryForElem&&(this.settings[elementType]=queryForElem)}storageConditions="function"!=typeof storageConditions||storageConditions(elementType),this.settings[elementType]instanceof HTMLElement&&storageConditions&&(this[elementType]=this.settings[elementType])},handleEvents:function handleEvents(){var _this2=this;$(this.element).on("drilldown.".concat("listdetail"),(function(e,item){e.stopPropagation(),_this2.drilldown(item,e.target)})).on("drillup.".concat("listdetail"),(function(e){e.stopPropagation(),_this2.drillup()})),this.backElement&&this.backElement.addEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.addEventListener("click",this.handleClose.bind(this)),$("body").off("resize.".concat("listdetail")).on("resize.".concat("listdetail"),(function(){_this2.handleResize()}))},drilldown:function drilldown(section,eventTarget){this.showDetail||eventTarget&&eventTarget.innerHTML!==this.listElement.innerHTML||(this.showDetail=!0,this.element.classList.add("show-detail"),this.addBackElementIconContext(),this.isAboveBreakpoint()||this.getListAPI().disable(),this.detailArea&&$(this.detailElement).triggerHandler("activatescreen",[section]))},drillup:function drillup(){this.showDetail&&(this.removeBackElementIconContext(),this.getListAPI().enable(),this.showDetail=!1,this.element.classList.remove("show-detail"))},addBackElementIconContext:function addBackElementIconContext(){this.showDetail&&this.backElementIcon&&!this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.add("go-back")},removeBackElementIconContext:function removeBackElementIconContext(){this.backElementIcon&&this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.remove("go-back")},handleBackClick:function handleBackClick(e){function cancelClick(){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}if(!this.showDetail){if(this.edgeBleed){var selected=this.getCurrentSelectedListItem();if(selected)return this.drilldown(selected),cancelClick(),!1}return!0}return this.drillup(),this.childrenListDetailElements&&this.childrenListDetailElements.forEach((function(elem){var api=$(elem).data("listdetail");api&&"function"==typeof api.drillup&&api.drillup()})),cancelClick(),!1},handleClose:function handleClose(){if(!this.showDetail){var selected=this.getCurrentSelectedListItem();this.drilldown(selected)}},handleResize:function handleResize(){this.setBreakpointChecks();var listAPI=this.getListAPI();this.isAboveBreakpoint()?this.edgeBleed&&!this.showDetail&&this.listElement.classList.contains("is-disabled")&&listAPI.enable():this.edgeBleed&&this.showDetail&&!this.listElement.classList.contains("is-disabled")&&listAPI.disable(),this.isAboveBreakpoint()?this.removeBackElementIconContext():this.addBackElementIconContext(),breakpoints.isAbove("desktop")&&listAPI.enable()},isAboveBreakpoint:function isAboveBreakpoint(){var breakpoint=this.settings.edgeBleedBreakpoint;return this["above".concat(stringUtils.capitalize(breakpoint),"Breakpoint")]},getListAPI:function getListAPI(){if(this.listElement)return $(this.listElement).data(this.listComponentType)},getCurrentSelectedListItem:function getCurrentSelectedListItem(){if(!this.listElement)return"";var item,API=this.getListAPI();switch(this.listComponentType){case"accordion":default:item=API.getSelected()}return item=DOM.convertToHTMLElement(item)},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element[0],settings,this.settings)),this.teardown(),this.init()},teardown:function teardown(){if($("body").off("resize.".concat("listdetail")),$(this.element).off("drilldown.".concat("listdetail"," drillup.").concat("listdetail")),this.backElement&&this.backElement.removeEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.removeEventListener("click",this.handleClose.bind(this)),this.listComponentType){var API=this.getListAPI();API&&delete API.isControllingDetails}delete this.listElement,delete this.detailElement,delete this.backElement,delete this.backElementIcon,delete this.edgeBleed,delete this.listContainsBackElement,delete this.detailContainsBackElement,delete this.childrenListDetailElements,delete this.showDetail},destroy:function destroy(){this.teardown(),$.removeData(this.element,"listdetail")}},$.fn.listdetail=function(settings){return this.each((function(){var instance=$.data(this,"listdetail");instance?instance.updated(settings):(instance=$.data(this,"listdetail",new ListDetail(this,settings))).destroy=function destroy(){this.teardown(),$.removeData(this,"listdetail")}}))};var STEPPROCESS_DEFAULTS={linearProgression:!1,folderIconOpen:"caret-up",folderIconClosed:"caret-down",stepList:"#step-list",stepLi:".js-step",stepLink:".js-step-link",stepFolder:".js-step-folder",btnPrev:".js-step-link-prev",btnNext:".js-step-link-next",btnSaveClose:".js-btn-save-changes",beforeSelectStep:null};function Stepprocess(element,settings){this.settings=utils.mergeSettings(element,settings,STEPPROCESS_DEFAULTS),this.element=$(element),this.init(),warnAboutRemoval("Stepprocess")}Stepprocess.prototype={init:function init(){this.stepListJq=$(this.settings.stepList),this.initStepprocess(),this.handleKeys(),this.setupEvents(),this.focusFirst()},initStepprocess:function initStepprocess(){for(var steps=this.stepListJq.find(this.settings.stepLi),i=0,l=steps.length;i<l;i++)this.decorateNode(steps[i]);var startingStepLink=$("".concat(this.settings.stepLi,".is-selected")).find(this.settings.stepLink);this.selectStep(startingStepLink)},decorateNode:function decorateNode(step){var stepJq=$(step),stepLinkJq=stepJq.children(this.settings.stepLink),stepFolderJq=stepJq.children(this.settings.stepFolder),isDisabled=stepLinkJq.hasClass("is-disabled"),isOpen=stepFolderJq.hasClass("is-open");if(isDisabled&&stepLinkJq.attr("aria-disabled","true"),stepFolderJq.length){if(stepJq.addClass("folder"),stepFolderJq.attr("role","group"),isDisabled&&(stepFolderJq.addClass("disabled"),isOpen))for(var stepLinks=stepFolderJq.children(),i=0,l=stepLinks.length;i<l;i++)$(stepLinks[i]).find(this.settings.stepLink).addClass("is-disabled").attr("aria-disabled","true");stepLinkJq.attr("aria-expanded",isOpen)}var parentCount=stepLinkJq.parentsUntil(this.stepListJq,"ul").length-1,posinset=stepJq.index(),listCount=stepJq.siblings().addBack().length;stepLinkJq.attr({role:"stepitem",tabindex:"-1","aria-selected":"false","aria-level":parentCount+1,"aria-posinset":posinset+1,"aria-setsize":listCount,"aria-disabled":isDisabled}).addClass("hide-focus").hideFocus()},focusFirst:function focusFirst(){this.stepListJq.find("".concat(this.settings.stepLi,":first")).attr("tabindex","0")},folderClose:function folderClose(step){var _this=this,stepJq=$(step),stepLinkJq=stepJq.children(this.settings.stepLink),stepFolderJq=stepJq.children(this.settings.stepFolder),treeIcon=stepLinkJq.closest(".folder").removeClass("is-open").end().find("svg.icon-tree");this.setIcon(treeIcon,this.settings.folderIconClosed),this.isAnimating=!0,stepFolderJq.one("animateclosedcomplete",(function(){stepFolderJq.removeClass("is-open"),_this.isAnimating=!1})).animateClosed(),stepLinkJq.attr("aria-expanded","false")},folderOpen:function folderOpen(step){var _this2=this,stepJq=$(step);if(!this.isOpen(stepJq)){var stepLinkJq=stepJq.children(this.settings.stepLink),stepFolderJq=stepJq.children(this.settings.stepFolder);stepJq.addClass("is-open"),stepLinkJq.attr("aria-expanded","true");var svgElem=stepLinkJq.find("svg.icon-tree");this.setIcon(svgElem,this.settings.folderIconOpen),this.isAnimating=!0,stepFolderJq.one("animateopencomplete",(function(){_this2.isAnimating=!1})).addClass("is-open").css("height",0).animateOpen()}},folderToggle:function folderToggle(stepLink){var stepJq=stepLink.closest(this.settings.stepLi);if(this.isFolder(stepJq)){var stepFolderJq=stepJq.children(this.settings.stepFolder);this.isOpen(stepFolderJq)?this.folderClose(stepJq):this.folderOpen(stepJq)}},getSelectedStep:function getSelectedStep(){return $("".concat(this.settings.stepLi,".is-selected"),this.stepListJq)},getNextNode:function getNextNode(stepLink){var s=this.settings,next=stepLink.parent().next().find("".concat(s.stepLink,":first"));if(stepLink.next().is(s.stepFolder)&&stepLink.next().hasClass("is-open")&&(next=stepLink.next().find("".concat(s.stepLink,":first"))),next.hasClass("is-disabled")&&(next=this.getNextNode(next)),0===next.length)for(var i=0,closest=stepLink;i<2&&!(next=(closest=closest.parent().closest(".folder")).next().find("".concat(s.stepLink,":first"))).length;i++);return next},getNextStep:function getNextStep(curStepJq){var curStepLinkJq=curStepJq.children(this.settings.stepLink),curStepFolderJq=curStepJq.next(this.settings.stepFolder),nextStepLinkJq=this.getNextNode(curStepLinkJq),nextStepFolderJq=nextStepLinkJq.next(this.settings.stepFolder),stepLinkToSelect=null,theFolder=null;return(stepLinkToSelect=curStepFolderJq.length?(theFolder=curStepFolderJq).children().length?theFolder.find(this.settings.stepLink).first():nextStepLinkJq:nextStepFolderJq.length&&(theFolder=nextStepFolderJq).children().length?theFolder.find(this.settings.stepLink).first():nextStepLinkJq).hasClass("is-disabled")&&(stepLinkToSelect=this.getNextStep(stepLinkToSelect.parent())),stepLinkToSelect},getPreviousNode:function getPreviousNode(stepLink){var s=this.settings,prev=stepLink.parent().prev().find("".concat(s.stepLink,":first")),prevStepJq=prev.closest(s.stepLi);return prevStepJq.is(".folder.is-open")&&prevStepJq.find("ul.is-open a").length&&!prevStepJq.find("ul.is-disabled").length&&(prev=prevStepJq.find("ul.is-open ".concat(s.stepLink,":last"))),prev.hasClass("is-disabled")&&this.getPreviousNode(prev),0===prev.length&&(prev=stepLink.closest(s.stepFolder).prev(s.stepLink)),prev},getPreviousStep:function getPreviousStep(curStepJq){var s=this.settings,curStepLinkJq=curStepJq.children(s.stepLink),prevStepLinkJq=this.getPreviousNode(curStepLinkJq),prevStepJq=prevStepLinkJq.closest(s.stepLi),stepLinkToSelect=prevStepLinkJq;if(this.isFolder(prevStepJq))if(this.isOpen(prevStepJq))stepLinkToSelect=this.getPreviousNode(prevStepLinkJq);else{var theFolder=prevStepJq.children(s.stepFolder);theFolder.children().length&&(stepLinkToSelect=theFolder.find(s.stepLink).last())}return stepLinkToSelect.hasClass("is-disabled")&&(stepLinkToSelect=this.getPreviousStep(stepLinkToSelect.parent())),stepLinkToSelect},goToNextStep:function goToNextStep(){var self=this,curStepJq=this.getSelectedStep(),stepLink=self.getNextStep(curStepJq);if(stepLink.length)self.selectStep(stepLink,"next");else if("function"==typeof self.settings.beforeSelectStep){var result=self.settings.beforeSelectStep({isStepping:"next"});result.done&&"function"==typeof result.done?result.done((function(continueSelectNode,stepLinkToSelect){continueSelectNode&&stepLinkToSelect&&self.selectStepFinish(stepLinkToSelect)})):result&&self.selectStepFinish(stepLink)}},goToPreviousStep:function goToPreviousStep(){var curStepJq=this.getSelectedStep(),stepLink=this.getPreviousStep(curStepJq);stepLink.length&&this.selectStep(stepLink,"prev")},handleKeys:function handleKeys(){var self=this,s=this.settings;this.stepListJq.on("focus.stepprocess",s.stepLink,(function(){var target=$(this);if(0===parseInt(target.attr("aria-level"),10)&&1===parseInt(target.attr("aria-posinset"),10)&&target.hasClass("is-disabled")){var e=$.Event("keydown.stepprocess");return e.keyCode=40,void target.trigger(e)}})),this.stepListJq.on("keydown.stepprocess",s.stepLink,(function(e){var next,prev,charCode=e.charCode||e.keyCode,target=$(this);if(!self.isAnimating){if(40===charCode){var nextNode=self.getNextNode(target);self.setFocus(nextNode)}if(38===charCode){var prevNode=self.getPreviousNode(target);self.setFocus(prevNode)}if(32===e.keyCode&&target.trigger("click.stepprocess"),37===charCode)return Locale.isRTL()?target.next().hasClass("is-open")?(prev=target.next().find("".concat(s.stepLink,":first")),self.setFocus(prev)):self.folderToggle(target):target.next().hasClass("is-open")?self.folderToggle(target):(prev=target.closest(".folder").find("".concat(s.stepLink,":first")),self.setFocus(prev)),e.stopPropagation(),!1;if(39===charCode)return Locale.isRTL()?target.next().hasClass("is-open")?self.folderToggle(target):(next=target.closest(".folder").find("".concat(s.stepLink,":first")),self.setFocus(next)):target.next().hasClass("is-open")?(next=target.next().find("".concat(s.stepLink,":first")),self.setFocus(next)):(self.folderToggle(target),self.setFocus(target)),e.stopPropagation(),!1;36===charCode&&(next=self.stepListJq.find("".concat(s.stepLink,":first:visible")),self.setFocus(next)),35===charCode&&(next=self.stepListJq.find("".concat(s.stepLink,":last:visible")),self.setFocus(next))}})),this.stepListJq.on("keypress.stepprocess",s.stepLink,(function(e){var charCode=e.charCode||e.keyCode,target=$(this);if(charCode>=37&&charCode<=40||32===charCode)return e.stopPropagation(),!1;0!==e.which&&target.closest(s.stepLi).nextAll().find(".js-step-link:visible").each((function(){var node=$(this);if(node.text().substr(0,1).toLowerCase()===String.fromCharCode(e.which).toLowerCase())return self.setFocus(node),!1}))}))},isFolder:function isFolder(step){return $(step).hasClass("folder")},isInFolder:function isInFolder(step){return $(step).closest(this.settings.stepFolder,this.stepListJq).length},isOpen:function isOpen(stepFolder){return $(stepFolder).hasClass("is-open")},setFocus:function setFocus(stepLink){stepLink.focus()},setIcon:function setIcon(svg,icon){var iconStr=icon.replace(/icon-|hide-focus|\s?/gi,"");svg.changeIcon(iconStr)},selectStep:function selectStep(stepLink,linearDirection){var result,self=this;if(void 0===linearDirection&&(linearDirection="none"),"function"==typeof self.settings.beforeSelectStep){var args={stepLink:stepLink,isStepping:linearDirection};(result=self.settings.beforeSelectStep(args)).done&&"function"==typeof result.done?result.done((function(continueSelectNode,stepLinkToSelect){continueSelectNode&&(stepLinkToSelect&&(stepLink=stepLinkToSelect),self.selectStepFinish(stepLink,linearDirection))})):result&&self.selectStepFinish(stepLink,linearDirection)}else self.selectStepFinish(stepLink,linearDirection)},selectStepFinish:function selectStepFinish(stepLink,linearDirection){var self=this,allStepLinksJq=$(this.settings.stepLink,this.stepListJq),stepJq=stepLink.closest(this.settings.stepLi);if(this.isFolder(stepJq)||(allStepLinksJq.attr({tabindex:"-1","aria-selected":"false"}).parent().removeClass("is-selected"),stepLink.attr({tabindex:"0","aria-selected":"true"}),stepJq.addClass("is-selected")),this.isFolder(stepJq))"none"===linearDirection?this.folderToggle(stepJq):this.folderOpen(stepJq);else{var parentIsFolder=stepJq.closest(this.settings.stepFolder,this.stepListJq);parentIsFolder.length&&this.folderOpen(parentIsFolder.closest(this.settings.stepLi)),this.showStepPanel(stepLink.attr("href"))}stepLink.focus(),setTimeout((function(){self.element.triggerHandler("selected",stepLink)}),0)},unSelectedNode:function unSelectedNode(step){var aTags=$(this.settings.stepLink,this.stepListJq),stepJq=$(step),stepLinkJq=stepJq.children(this.settings.stepLink);aTags.attr("tabindex","-1"),stepLinkJq.attr("tabindex","0"),stepJq.removeClass("is-selected"),stepLinkJq.attr("aria-selected","false")},setupEvents:function setupEvents(){var _this3=this,self=this,s=this.settings;this.stepListJq.on("updated.stepprocess",(function(){_this3.initStepprocess()})).on("click.stepprocess","".concat(s.stepLink,":not(.is-clone)"),(function(e){if(e.preventDefault(),!s.linearProgression){var targetJq=$(this);targetJq.is(".is-disabled, .is-loading")||(self.selectStep(targetJq),e.stopPropagation())}})),$(s.btnPrev).on("click",(function(e){e.preventDefault(),_this3.goToPreviousStep.call(self)})),$(s.btnNext).on("click",(function(e){e.preventDefault(),_this3.goToNextStep.call(self)})),$(s.contentScroll).scrollaction({scrollActionTarget:".main"}),$(s.stepListScroll).scrollaction({scrollActionTarget:".sidebar"}),$(".js-toggle-sidebar").click((function(e){e.preventDefault(),_this3.element.toggleClass("tablet-hide-steps").toggleClass("phone-hide-steps")}))},showStepPanel:function showStepPanel(contentId){$(".step-panel-active").removeClass("step-panel-active"),$(contentId).addClass("step-panel-active"),this.element.addClass("phone-hide-steps")},unbind:function unbind(){return this.stepListJq.off("updated.stepprocess click.stepprocess focus.stepprocess keydown.stepprocess keypress.stepprocess").empty(),this},updated:function updated(settings){return void 0!==settings&&(this.settings=utils.mergeSettings(this.element,settings,STEPPROCESS_DEFAULTS)),this.unbind().init()},destroy:function destroy(){this.unbind(),$.removeData(this.element[0],"stepprocess")}},$.fn.stepprocess=function(settings){return this.each((function(){var instance=$.data(this,"stepprocess");instance?instance.updated(settings):instance=$.data(this,"stepprocess",new Stepprocess(this,settings))}))};var INITIALIZE_DEFAULTS={locale:"en-US",language:null};function invoke(elem,pluginName,settings){return $(elem)[pluginName](settings)}function matchedItems(elem,selector){var items=elem.find(selector).not(".no-init, [data-init]");return elem.filter(selector).length&&(items=items.add(elem)),items}var PLUGIN_MAPPINGS=[["applicationmenu","#application-menu",function(rootElem,pluginName,selector){matchedItems(rootElem,selector).each((function(i,item){$(item).applicationmenu({triggers:rootElem.find(".application-menu-trigger")})}))}],["personalize",null,function(){$("html").personalize()}],["hyperlink"],["icon"],["radio",".radio-section input:radio.handle",function(rootElem,pluginName,selector){matchedItems(rootElem,selector).change((function(){if(this.checked){var option=$(this).closest(".option"),siblings=option.siblings(),fields='button, select, input[type="text"]';$(fields,option).removeAttr("disabled"),$(fields,siblings).attr("disabled","disabled")}}))}],["splitter"],["tabs",".tab-container:not(.vertical)"],["verticaltabs",".tab-container.vertical"],["multitabs",".multitabs-container"],["dropdown","select.dropdown:not(.multiselect)"],["dropdown","select.dropdown-xs:not(.multiselect)"],["dropdown","select.dropdown-sm:not(.multiselect)"],["dropdown","select.dropdown-lg:not(.multiselect)"],["modal"],["slider",'input[type="range"], .slider'],["editor"],["tooltip","button[title], span[title], .hyperlink[title], .icon[title], input[title]"],["tree"],["rating"],["listbuilder"],["compositeform",".composite-form"],["progress",".progress-bar"],["mask","input[data-mask], .new-mask"],["autocomplete",".autocomplete:not([data-init])"],["multiselect","select[multiple]:not(.dropdown), .multiselect:not([data-init])"],["button",[".btn",".btn-toggle",".btn-secondary",".btn-primary",".btn-modal-primary",".btn-tertiary",".btn-icon",".btn-actions",".btn-menu",".btn-split",".btn-secondary-border"].join(", "),function(rootElem,pluginName,selector){matchedItems(rootElem,selector).each((function(i,item){$(item).parents(".modal").length||$(item).button()}))}],["hideFocus","a.hide-focus, a.tick, .checkbox, .radio, .switch"],["circlepager"],["clearable",'[data-clearable="true"]'],["textarea","textarea"],["spinbox"],["arrange"],["swaplist"],["colorpicker"],["datepicker"],["timepicker"],["tag"],["busyindicator",".busy, .busy-xs, .busy-sm"],["header"],["fileupload","input.fileupload:not(.fileupload-background-transparent)"],["fileuploadadvanced",".fileupload-advanced"],["fieldfilter",".field-filter"],["fieldoptions",".field-options"],["about"],["contextualactionpanel",".contextual-action-panel-trigger"],["expandablearea",".expandable-area"],["signin"],["homepage"],["lookup",".lookup:not([data-init])"],["wizard"],["popdown","[data-popdown]"],["stepchart",".step-chart"],["calendar",".calendar"],["calendartoolbar",".calendar-toolbar"],["monthview",".monthview"],["weekview",".week-view"],["listview"],["trackdirty",'[data-trackdirty="true"]'],["popupmenu","[data-popupmenu]:not(.btn-actions, .btn-filter, .btn-menu)",function(rootElem,pluginName,selector){matchedItems(rootElem,selector).each((function(i,item){var popupElem=$(item),settings=$.extend({},utils.parseOptions(popupElem)),popupData=popupElem.attr("data-popupmenu");popupData&&(settings.menuId=popupData),invoke(popupElem,pluginName,settings)}))}],["popupmenu",".btn-actions, .btn-filter, .btn-menu",function(rootElem,pluginName,selector){matchedItems(rootElem,selector).each((function(i,item){var triggerButton=$(item);triggerButton.parents(".toolbar, .flex-toolbar").length>0||invoke(triggerButton,pluginName)}))}],["popover","[data-popover]",function(rootElem,pluginName,selector){matchedItems(rootElem,selector).each((function(){var options=utils.parseOptions(this),obj=$(this),trigger=obj.attr("data-trigger"),title=obj.attr("data-title"),placement=obj.attr("data-placement");$.isEmptyObject(options)?obj.popover({content:$("#".concat(obj.attr("data-popover"))),popover:!0,trigger:trigger||"click",title:title||void 0,placement:placement||"right",extraClass:options.extraClass||void 0}):obj.popover({content:$(options.content),popover:!0,trigger:options.trigger||"click",title:options.title||void 0,placement:options.placement||"right",extraClass:options.extraClass||void 0})}))}],["searchfield",".searchfield",function(rootElem,pluginName,selector){var searchfields=matchedItems(rootElem,selector),toolbarSearchfields=searchfields.filter((function(){return $(this).parents(".toolbar").length}));(searchfields=searchfields.not(toolbarSearchfields)).each((function(){invoke(this,"searchfield")}))}],["toolbar",".toolbar",function(rootElem,pluginName,selector){matchedItems(rootElem,selector).each((function(i,item){var t=$(item);t.parents(".header, .contextual-action-panel .modal-header").length&&!rootElem.is(".toolbar")||invoke(t,"toolbar")}))}],["toolbarflex",".flex-toolbar"],["accordion",".accordion",function(rootElem,pluginName,selector){matchedItems(rootElem,selector).each((function(i,item){var a=$(item);a.parents(".application-menu").length||invoke(a,"accordion")}))}],["taglist",".tag-list"],["formcompact",".form-compact-container",function(rootElem,pluginName,selector){matchedItems(rootElem,selector).each((function(i,item){invoke($(item),"formcompact")}))}],["listdetail",".list-detail",function(rootElem,pluginName,selector){matchedItems(rootElem,selector).each((function(i,item){invoke($(item),"listdetail")}))}],["texttranslations",'[data-translate="text"]',function(rootElem,pluginName,selector){matchedItems(rootElem,selector).each((function(i,item){var obj=$(item);obj.attr("data-translate-key",obj.text()),obj.text(Locale.translate(obj.text(),!0))}))}],["breadcrumblabels",".breadcrumb ol",function(rootElem,pluginName,selector){matchedItems(rootElem,selector).attr("aria-label",Locale.translate("Breadcrumb"))}],["validate","[data-validate]",function(rootElem,pluginName,selector){matchedItems(rootElem,selector).closest("form, body").validate()}],["validate",'form[data-validate-on="submit"]']];function mapToInit(elem,plugin,selector,callback){($.fn[plugin]||"texttranslations"===plugin)&&(void 0===selector&&(selector=".".concat(plugin)),"function"!=typeof callback?matchedItems(elem,selector).each((function(){var thisElem=$(this);thisElem.is(".no-init, [data-init]")||thisElem.parents(".no-init, [data-init]").length||invoke(this,plugin)})):callback(elem,plugin,selector))}function Initialize(element,settings){var newSettings=settings;"string"==typeof settings&&(newSettings={locale:settings}),this.element=$(element),Locale.currentLocale&&Locale.currentLocale.name&&!settings&&(newSettings={locale:Locale.currentLocale.name}),Locale.currentLanguage&&Locale.currentLanguage.name&&Locale.currentLocale.name.substr(0,2)!==Locale.currentLanguage.name&&!settings&&(newSettings.language=Locale.currentLanguage.name),this.settings=utils.mergeSettings(this.element[0],newSettings,INITIALIZE_DEFAULTS),this.init()}Initialize.prototype={init:function init(){var _this=this,self=this;return Locale.set(this.settings.locale).done((function(){_this.settings.language?Locale.setLanguage(_this.settings.language).done((function(){self.initAll()})):self.initAll()})),this},initAll:function initAll(){return this.element.each((function(){for(var i=0;i<PLUGIN_MAPPINGS.length;i++)mapToInit.apply(void 0,[$(this)].concat(_toConsumableArray(PLUGIN_MAPPINGS[i])))})),this.element.triggerHandler("initialized",{locale:Locale.currentLocale}),$.fn.validate&&this.element.validate(),this}},$.fn.initialize=function(settings){return this.each((function(){return new Initialize(this,settings)}))};var LONGPRESS_DEFAULTS={delay:400,mouseEvents:!1};function LongPress(settings){return this.settings=utils.mergeSettings(this.element,settings,LONGPRESS_DEFAULTS),this.init()}LongPress.prototype={timer:null,init:function init(){var _this=this,evts=this.getInputEventNames(),self=this;$(document).on("".concat(evts.mousedown,".").concat("longpress"),(function(e){var target=e.target;_this.timer=new RenderLoopItem({id:"".concat("longpress","-timer"),duration:math.convertDelayToFPS(_this.settings.delay),timeoutCallback:function timeoutCallback(){self.fire(target,e)}}),renderLoop.register(_this.timer)})),$(document).on(["".concat(evts.mouseup,".").concat("longpress"),"".concat(evts.mouseout,".").concat("longpress"),"".concat(evts.mousemove,".").concat("longpress")].join(" "),(function(){_this.killTimer()}))},fire:function fire(target,e){$(target).trigger("".concat("longpress"),[e])},killTimer:function killTimer(){this.timer&&(this.timer.destroy(!0),this.timer=null)},getInputEventNames:function getInputEventNames(){var isTouch=Environment.features.touch,useMouse=this.settings.mouseEvents,testCondition=isTouch||!useMouse;return{mousedown:testCondition?"touchstart":"mousedown",mouseout:testCondition?"touchcancel":"mouseout",mouseup:testCondition?"touchend":"mouseup",mousemove:testCondition?"touchmove":"mousemove"}},updated:function updated(settings){settings&&(this.settings=utils.mergeSettings(this.element,settings,this.settings)),this.teardown(),this.init()},teardown:function teardown(){var evts=this.getInputEventNames();this.killTimer(),$(document).off(["".concat(evts.mousedown,".").concat("longpress"),"".concat(evts.mouseup,".").concat("longpress"),"".concat(evts.mouseout,".").concat("longpress"),"".concat(evts.mousemove,".").concat("longpress")].join(" "))}};var longPress=new LongPress,components=Object.freeze({__proto__:null,Button:Button,ButtonSet:ButtonSet,Hyperlink:Hyperlink,Icon:Icon,ListFilter:ListFilter,MaskInput:MaskInput,Modal:Modal,PopupMenu:PopupMenu,Tmpl:Tmpl,About:About,Accordion:Accordion,ApplicationMenu:ApplicationMenu,Autocomplete:Autocomplete,Bar:Bar,Blockgrid:Blockgrid,Bullet:Bullet,BusyIndicator:BusyIndicator,ColorPicker:ColorPicker,Column:Column,CompletionChart:CompletionChart,ContextualActionPanel:ContextualActionPanel,Drag:Drag,DatePicker:DatePicker,Dropdown:Dropdown,EmptyMessage:EmptyMessage,ExpandableArea:ExpandableArea,FontPicker:FontPicker,FontPickerStyle:FontPickerStyle,Line:Line,ListBuilder:ListBuilder,ListView:ListView,Message:Message,MultiSelect:MultiSelect,Notification:Notification,Pager:Pager,Pie:Pie,Popdown:Popdown,Radar:Radar,SearchField:SearchField,Slider:Slider,Sparkline:Sparkline,Spinbox:Spinbox,Splitter:Splitter,StepChart:StepChart,Tabs:Tabs,Tag:Tag,TagList:TagList,Textarea:Textarea,TimePicker:TimePicker,Toast:Toast,Toolbar:Toolbar,ToolbarFlex:ToolbarFlex,Tooltip:Tooltip,Tree:Tree,Treemap:Treemap,Validator:Validator,Wizard:Wizard,Calendar:Calendar,CalendarToolbar:CalendarToolbar,CompositeForm:CompositeForm,Datagrid:Datagrid,FormCompact:FormCompact,Header:Header,Lookup:Lookup,MonthView:MonthView,WeekView:WeekView,MultiTabs:MultiTabs}),patterns=Object.freeze({__proto__:null,ListDetail:ListDetail,Stepprocess:Stepprocess})}.call(this,__webpack_require__(21),__webpack_require__(21),__webpack_require__(866).setImmediate,__webpack_require__(869))},869:function(module,exports,__webpack_require__){!function(exports){"use strict";function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function bisector(compare){return 1===compare.length&&(compare=function ascendingComparator(f){return function(d,x){return ascending(f(d),x)}}(compare)),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}var ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left;function pair(a,b){return[a,b]}function number(x){return null===x?NaN:+x}function variance(values,valueof){var value,delta,n=values.length,m=0,i=-1,mean=0,sum=0;if(null==valueof)for(;++i<n;)isNaN(value=number(values[i]))||(sum+=(delta=value-mean)*(value-(mean+=delta/++m)));else for(;++i<n;)isNaN(value=number(valueof(values[i],i,values)))||(sum+=(delta=value-mean)*(value-(mean+=delta/++m)));if(m>1)return sum/(m-1)}function deviation(array,f){var v=variance(array,f);return v?Math.sqrt(v):v}function extent(values,valueof){var value,min,max,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(min=max=value;++i<n;)null!=(value=values[i])&&(min>value&&(min=value),max<value&&(max=value))}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(min=max=value;++i<n;)null!=(value=valueof(values[i],i,values))&&(min>value&&(min=value),max<value&&(max=value));return[min,max]}var array=Array.prototype,slice=array.slice,map=array.map;function constant(x){return function(){return x}}function identity(x){return x}function sequence(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)==(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0)for(start=Math.ceil(start/step),stop=Math.floor(stop/step),ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)*step;else for(start=Math.floor(start*step),stop=Math.ceil(stop*step),ticks=new Array(n=Math.ceil(start-stop+1));++i<n;)ticks[i]=(start-i)/step;return reverse&&ticks.reverse(),ticks}function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}function sturges(values){return Math.ceil(Math.log(values.length)/Math.LN2)+1}function threshold(values,p,valueof){if(null==valueof&&(valueof=number),n=values.length){if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values);return value0+(+valueof(values[i0+1],i0+1,values)-value0)*(i-i0)}}function merge(arrays){for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;for(merged=new Array(j);--n>=0;)for(m=(array=arrays[n]).length;--m>=0;)merged[--j]=array[m];return merged}function min(values,valueof){var value,min,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(min=value;++i<n;)null!=(value=values[i])&&min>value&&(min=value)}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(min=value;++i<n;)null!=(value=valueof(values[i],i,values))&&min>value&&(min=value);return min}function transpose(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=min(matrix,length),transpose=new Array(m);++i<m;)for(var n,j=-1,row=transpose[i]=new Array(n);++j<n;)row[j]=matrix[j][i];return transpose}function length(d){return d.length}var slice$1=Array.prototype.slice;function identity$1(x){return x}function translateX(x){return"translate("+(x+.5)+",0)"}function translateY(y){return"translate(0,"+(y+.5)+")"}function number$1(scale){return function(d){return+scale(d)}}function center(scale){var offset=Math.max(0,scale.bandwidth()-1)/2;return scale.round()&&(offset=Math.round(offset)),function(d){return+scale(d)+offset}}function entering(){return!this.__axis}function axis(orient,scale){var tickArguments=[],tickValues=null,tickFormat=null,tickSizeInner=6,tickSizeOuter=6,tickPadding=3,k=1===orient||4===orient?-1:1,x=4===orient||2===orient?"x":"y",transform=1===orient||3===orient?translateX:translateY;function axis(context){var values=null==tickValues?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():tickValues,format=null==tickFormat?scale.tickFormat?scale.tickFormat.apply(scale,tickArguments):identity$1:tickFormat,spacing=Math.max(tickSizeInner,0)+tickPadding,range=scale.range(),range0=+range[0]+.5,range1=+range[range.length-1]+.5,position=(scale.bandwidth?center:number$1)(scale.copy()),selection=context.selection?context.selection():context,path=selection.selectAll(".domain").data([null]),tick=selection.selectAll(".tick").data(values,scale).order(),tickExit=tick.exit(),tickEnter=tick.enter().append("g").attr("class","tick"),line=tick.select("line"),text=tick.select("text");path=path.merge(path.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),tick=tick.merge(tickEnter),line=line.merge(tickEnter.append("line").attr("stroke","#000").attr(x+"2",k*tickSizeInner)),text=text.merge(tickEnter.append("text").attr("fill","#000").attr(x,k*spacing).attr("dy",1===orient?"0em":3===orient?"0.71em":"0.32em")),context!==selection&&(path=path.transition(context),tick=tick.transition(context),line=line.transition(context),text=text.transition(context),tickExit=tickExit.transition(context).attr("opacity",1e-6).attr("transform",(function(d){return isFinite(d=position(d))?transform(d):this.getAttribute("transform")})),tickEnter.attr("opacity",1e-6).attr("transform",(function(d){var p=this.parentNode.__axis;return transform(p&&isFinite(p=p(d))?p:position(d))}))),tickExit.remove(),path.attr("d",4===orient||2==orient?"M"+k*tickSizeOuter+","+range0+"H0.5V"+range1+"H"+k*tickSizeOuter:"M"+range0+","+k*tickSizeOuter+"V0.5H"+range1+"V"+k*tickSizeOuter),tick.attr("opacity",1).attr("transform",(function(d){return transform(position(d))})),line.attr(x+"2",k*tickSizeInner),text.attr(x,k*spacing).text(format),selection.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===orient?"start":4===orient?"end":"middle"),selection.each((function(){this.__axis=position}))}return axis.scale=function(_){return arguments.length?(scale=_,axis):scale},axis.ticks=function(){return tickArguments=slice$1.call(arguments),axis},axis.tickArguments=function(_){return arguments.length?(tickArguments=null==_?[]:slice$1.call(_),axis):tickArguments.slice()},axis.tickValues=function(_){return arguments.length?(tickValues=null==_?null:slice$1.call(_),axis):tickValues&&tickValues.slice()},axis.tickFormat=function(_){return arguments.length?(tickFormat=_,axis):tickFormat},axis.tickSize=function(_){return arguments.length?(tickSizeInner=tickSizeOuter=+_,axis):tickSizeInner},axis.tickSizeInner=function(_){return arguments.length?(tickSizeInner=+_,axis):tickSizeInner},axis.tickSizeOuter=function(_){return arguments.length?(tickSizeOuter=+_,axis):tickSizeOuter},axis.tickPadding=function(_){return arguments.length?(tickPadding=+_,axis):tickPadding},axis}var noop={value:function(){}};function dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _)throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}}))}function get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=parseTypenames(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces.hasOwnProperty(prefix)?{space:namespaces[prefix],local:name}:name}function creatorInherit(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document.documentElement.namespaceURI===xhtml?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator(name){var fullname=namespace(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)}function none(){}function selector(selector){return null==selector?none:function(){return this.querySelector(selector)}}function empty$1(){return[]}function selectorAll(selector){return null==selector?empty$1:function(){return this.querySelectorAll(selector)}}var matcher=function(selector){return function(){return this.matches(selector)}};if("undefined"!=typeof document){var element=document.documentElement;if(!element.matches){var vendorMatches=element.webkitMatchesSelector||element.msMatchesSelector||element.mozMatchesSelector||element.oMatchesSelector;matcher=function(selector){return function(){return vendorMatches.call(this,selector)}}}}var matcher$1=matcher;function sparse(update){return new Array(update.length)}function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}function bindIndex(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue={},groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue="$"+key.call(node,node.__data__,i,group),keyValue in nodeByKeyValue?exit[i]=node:nodeByKeyValue[keyValue]=node);for(i=0;i<dataLength;++i)(node=nodeByKeyValue[keyValue="$"+key.call(parent,data[i],i,data)])?(update[i]=node,node.__data__=data[i],nodeByKeyValue[keyValue]=null):enter[i]=new EnterNode(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue[keyValues[i]]===node&&(exit[i]=node)}function ascending$1(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function defaultView(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function styleValue(node,name){return node.style.getPropertyValue(name)||defaultView(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value){return function(){this[name]=value}}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray(string){return string.trim().split(/^|\s+/)}function classList(node){return node.classList||new ClassList(node)}function ClassList(node){this._node=node,this._names=classArray(node.getAttribute("class")||"")}function classedAdd(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}function textRemove(){this.textContent=""}function textConstant(value){return function(){this.textContent=value}}function textFunction(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove(){this.innerHTML=""}function htmlConstant(value){return function(){this.innerHTML=value}}function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull(){return null}function remove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function selection_cloneDeep(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}EnterNode.prototype={constructor:EnterNode,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}},ClassList.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};var filterEvents={};function filterContextListener(listener,index,group){return listener=contextListener(listener,index,group),function(event){var related=event.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||listener.call(this,event)}}function contextListener(listener,index,group){return function(event1){var event0=exports.event;exports.event=event1;try{listener.call(this,this.__data__,index,group)}finally{exports.event=event0}}}function parseTypenames$1(typenames){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name:name}}))}function onRemove(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?on.length=i:delete this.__on}}}function onAdd(typename,value,capture){var wrap=filterEvents.hasOwnProperty(typename.type)?filterContextListener:contextListener;return function(d,i,group){var o,on=this.__on,listener=wrap(value,i,group);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=listener,o.capture=capture),void(o.value=value);this.addEventListener(typename.type,listener,capture),o={type:typename.type,name:typename.name,value:value,listener:listener,capture:capture},on?on.push(o):this.__on=[o]}}function customEvent(event1,listener,that,args){var event0=exports.event;event1.sourceEvent=exports.event,exports.event=event1;try{return listener.apply(that,args)}finally{exports.event=event0}}function dispatchEvent(node,type,params){var window=defaultView(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params)}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments))}}exports.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(filterEvents={mouseenter:"mouseover",mouseleave:"mouseout"}));var root=[null];function Selection(groups,parents){this._groups=groups,this._parents=parents}function selection(){return new Selection([[document.documentElement]],root)}function select(selector){return"string"==typeof selector?new Selection([[document.querySelector(selector)]],[document.documentElement]):new Selection([[selector]],root)}Selection.prototype=selection.prototype={constructor:Selection,select:function selection_select(select){"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection(subgroups,this._parents)},selectAll:function selection_selectAll(select){"function"!=typeof select&&(select=selectorAll(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection(subgroups,parents)},filter:function selection_filter(match){"function"!=typeof match&&(match=matcher$1(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection(subgroups,this._parents)},data:function selection_data(value,key){if(!value)return data=new Array(this.size()),j=-1,this.each((function(d){data[++j]=d})),data;var bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=function constant$1(x){return function(){return x}}(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=value.call(parent,parent&&parent.__data__,j,parents),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength);bind(parent,group,enterGroup,updateGroup,exit[j]=new Array(groupLength),data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection(update,parents))._enter=enter,update._exit=exit,update},enter:function selection_enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents)},exit:function selection_exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents)},merge:function selection_merge(selection$$1){for(var groups0=this._groups,groups1=selection$$1._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection(merges,this._parents)},order:function selection_order(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&next!==node.nextSibling&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function selection_sort(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending$1);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection(sortgroups,this._parents).order()},call:function selection_call(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function selection_nodes(){var nodes=new Array(this.size()),i=-1;return this.each((function(){nodes[++i]=this})),nodes},node:function selection_node(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function selection_size(){var size=0;return this.each((function(){++size})),size},empty:function selection_empty(){return!this.node()},each:function selection_each(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function selection_attr(name,value){var fullname=namespace(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS:attrRemove:"function"==typeof value?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value))},style:function selection_style(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove:"function"==typeof value?styleFunction:styleConstant)(name,value,null==priority?"":priority)):styleValue(this.node(),name)},property:function selection_property(name,value){return arguments.length>1?this.each((null==value?propertyRemove:"function"==typeof value?propertyFunction:propertyConstant)(name,value)):this.node()[name]},classed:function selection_classed(name,value){var names=classArray(name+"");if(arguments.length<2){for(var list=classList(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction:value?classedTrue:classedFalse)(names,value))},text:function selection_text(value){return arguments.length?this.each(null==value?textRemove:("function"==typeof value?textFunction:textConstant)(value)):this.node().textContent},html:function selection_html(value){return arguments.length?this.each(null==value?htmlRemove:("function"==typeof value?htmlFunction:htmlConstant)(value)):this.node().innerHTML},raise:function selection_raise(){return this.each(raise)},lower:function selection_lower(){return this.each(lower)},append:function selection_append(name){var create="function"==typeof name?name:creator(name);return this.select((function(){return this.appendChild(create.apply(this,arguments))}))},insert:function selection_insert(name,before){var create="function"==typeof name?name:creator(name),select=null==before?constantNull:"function"==typeof before?before:selector(before);return this.select((function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function selection_remove(){return this.each(remove)},clone:function selection_clone(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)},datum:function selection_datum(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function selection_on(typename,value,capture){var i,t,typenames=parseTypenames$1(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd:onRemove,null==capture&&(capture=!1),i=0;i<n;++i)this.each(on(typenames[i],value,capture));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function selection_dispatch(type,params){return this.each(("function"==typeof params?dispatchFunction:dispatchConstant)(type,params))}};var nextId=0;function local$1(){return new Local}function Local(){this._="@"+(++nextId).toString(36)}function sourceEvent(){for(var source,current=exports.event;source=current.sourceEvent;)current=source;return current}function point(node,event){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,point.y=event.clientY,[(point=point.matrixTransform(node.getScreenCTM().inverse())).x,point.y]}var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}function mouse(node){var event=sourceEvent();return event.changedTouches&&(event=event.changedTouches[0]),point(node,event)}function touch(node,touches,identifier){arguments.length<3&&(identifier=touches,touches=sourceEvent().changedTouches);for(var touch,i=0,n=touches?touches.length:0;i<n;++i)if((touch=touches[i]).identifier===identifier)return point(node,touch);return null}function nopropagation(){exports.event.stopImmediatePropagation()}function noevent(){exports.event.preventDefault(),exports.event.stopImmediatePropagation()}function dragDisable(view){var root=view.document.documentElement,selection=select(view).on("dragstart.drag",noevent,!0);"onselectstart"in root?selection.on("selectstart.drag",noevent,!0):(root.__noselect=root.style.MozUserSelect,root.style.MozUserSelect="none")}function yesdrag(view,noclick){var root=view.document.documentElement,selection=select(view).on("dragstart.drag",null);noclick&&(selection.on("click.drag",noevent,!0),setTimeout((function(){selection.on("click.drag",null)}),0)),"onselectstart"in root?selection.on("selectstart.drag",null):(root.style.MozUserSelect=root.__noselect,delete root.__noselect)}function constant$2(x){return function(){return x}}function DragEvent(target,type,subject,id,active,x,y,dx,dy,dispatch){this.target=target,this.type=type,this.subject=subject,this.identifier=id,this.active=active,this.x=x,this.y=y,this.dx=dx,this.dy=dy,this._=dispatch}function defaultFilter$1(){return!exports.event.button}function defaultContainer(){return this.parentNode}function defaultSubject(d){return null==d?{x:exports.event.x,y:exports.event.y}:d}function defaultTouchable(){return"ontouchstart"in this}function define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}Local.prototype=local$1.prototype={constructor:Local,get:function(node){for(var id=this._;!(id in node);)if(!(node=node.parentNode))return;return node[id]},set:function(node,value){return node[this._]=value},remove:function(node){return this._ in node&&delete node[this._]},toString:function(){return this._}},DragEvent.prototype.on=function(){var value=this._.on.apply(this._,arguments);return value===this._?this:value};var reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex3=/^#([0-9a-f]{3})$/,reHex6=/^#([0-9a-f]{6})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color(format){var m;return format=(format+"").trim().toLowerCase(),(m=reHex3.exec(format))?new Rgb((m=parseInt(m[1],16))>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):(m=reHex6.exec(format))?rgbn(parseInt(m[1],16)):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}define(Color,color,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),define(Rgb,rgb,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}})),define(Hsl,hsl,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var deg2rad=Math.PI/180,rad2deg=180/Math.PI,t1=6/29,t2=3*t1*t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl){var h=o.h*deg2rad;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}o instanceof Rgb||(o=rgbConvert(o));var b=rgb2xyz(o.r),a=rgb2xyz(o.g),l=rgb2xyz(o.b),x=xyz2lab((.4124564*b+.3575761*a+.1804375*l)/.95047),y=xyz2lab((.2126729*b+.7151522*a+.072175*l)/1);return new Lab(116*y-16,500*(x-y),200*(y-xyz2lab((.0193339*b+.119192*a+.9503041*l)/1.08883)),o.opacity)}function lab(l,a,b,opacity){return 1===arguments.length?labConvert(l):new Lab(l,a,b,null==opacity?1:opacity)}function Lab(l,a,b,opacity){this.l=+l,this.a=+a,this.b=+b,this.opacity=+opacity}function xyz2lab(t){return t>.008856451679035631?Math.pow(t,1/3):t/t2+4/29}function lab2xyz(t){return t>t1?t*t*t:t2*(t-4/29)}function xyz2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2xyz(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);o instanceof Lab||(o=labConvert(o));var h=Math.atan2(o.b,o.a)*rad2deg;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl(h,c,l,opacity){return 1===arguments.length?hclConvert(h):new Hcl(h,c,l,null==opacity?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h,this.c=+c,this.l=+l,this.opacity=+opacity}define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+18*(null==k?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-18*(null==k?1:k),this.a,this.b,this.opacity)},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;return y=1*lab2xyz(y),new Rgb(xyz2rgb(3.2404542*(x=.95047*lab2xyz(x))-1.5371385*y-.4985314*(z=1.08883*lab2xyz(z))),xyz2rgb(-.969266*x+1.8760108*y+.041556*z),xyz2rgb(.0556434*x-.2040259*y+1.0572252*z),this.opacity)}})),define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+18*(null==k?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,this.l-18*(null==k?1:k),this.opacity)},rgb:function(){return labConvert(this).rgb()}}));var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);o instanceof Rgb||(o=rgbConvert(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*rad2deg-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}function cubehelix(h,s,l,opacity){return 1===arguments.length?cubehelixConvert(h):new Cubehelix(h,s,l,null==opacity?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}function basis$1(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}}function basisClosed(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}}function constant$3(x){return function(){return x}}function linear(a,d){return function(t){return a+t*d}}function hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):constant$3(isNaN(a)?b:a)}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):constant$3(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):constant$3(isNaN(a)?b:a)}define(Cubehelix,cubehelix,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*deg2rad,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity)}}));var interpolateRgb=function rgbGamma(y){var color$$1=gamma(y);function rgb$$1(start,end){var r=color$$1((start=rgb(start)).r,(end=rgb(end)).r),g=color$$1(start.g,end.g),b=color$$1(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb$$1.gamma=rgbGamma,rgb$$1}(1);function rgbSpline(spline){return function(colors){var i,color$$1,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color$$1=rgb(colors[i]),r[i]=color$$1.r||0,g[i]=color$$1.g||0,b[i]=color$$1.b||0;return r=spline(r),g=spline(g),b=spline(b),color$$1.opacity=1,function(t){return color$$1.r=r(t),color$$1.g=g(t),color$$1.b=b(t),color$$1+""}}}var rgbBasis=rgbSpline(basis$1),rgbBasisClosed=rgbSpline(basisClosed);function array$1(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=interpolateValue(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date(a,b){var d=new Date;return b-=a=+a,function(t){return d.setTime(a+b*t),d}}function reinterpolate(a,b){return b-=a=+a,function(t){return a+b*t}}function object(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=interpolateValue(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function interpolateString(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:reinterpolate(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one(b){return function(t){return b(t)+""}}(q[0].x):function zero(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function interpolateValue(a,b){var c,t=typeof b;return null==b||"boolean"===t?constant$3(b):("number"===t?reinterpolate:"string"===t?(c=color(b))?(b=c,interpolateRgb):interpolateString:b instanceof color?interpolateRgb:b instanceof Date?date:Array.isArray(b)?array$1:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object:reinterpolate)(a,b)}function interpolateRound(a,b){return b-=a=+a,function(t){return Math.round(a+b*t)}}var cssNode,cssRoot,cssView,svgNode,degrees=180/Math.PI,identity$2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY}}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:reinterpolate(xa,xb)},{i:i-2,x:reinterpolate(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:reinterpolate(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:reinterpolate(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:reinterpolate(xa,xb)},{i:i-2,x:reinterpolate(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform((function parseCss(value){return"none"===value?identity$2:(cssNode||(cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView),cssNode.style.transform=value,value=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform"),cssRoot.removeChild(cssNode),decompose(+(value=value.slice(7,-1).split(","))[0],+value[1],+value[2],+value[3],+value[4],+value[5]))}),"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform((function parseSvg(value){return null==value?identity$2:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?decompose((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):identity$2)}),", ",")",")"),rho=Math.SQRT2;function cosh(x){return((x=Math.exp(x))+1/x)/2}function interpolateZoom(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<1e-12)S=Math.log(w1/w0)/rho,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+4*d2)/(2*w0*2*d1),b1=(w1*w1-w0*w0-4*d2)/(2*w1*2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho,i=function(t){var s=t*S,coshr0=cosh(r0),u=w0/(2*d1)*(coshr0*function tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}(rho*s+r0)-function sinh(x){return((x=Math.exp(x))-1/x)/2}(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)]}}return i.duration=1e3*S,i}function hsl$1(hue$$1){return function(start,end){var h=hue$$1((start=hsl(start)).h,(end=hsl(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(t),start.opacity=opacity(t),start+""}}}var hsl$2=hsl$1(hue),hslLong=hsl$1(nogamma);function hcl$1(hue$$1){return function(start,end){var h=hue$$1((start=hcl(start)).h,(end=hcl(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.c=c(t),start.l=l(t),start.opacity=opacity(t),start+""}}}var hcl$2=hcl$1(hue),hclLong=hcl$1(nogamma);function cubehelix$1(hue$$1){return function cubehelixGamma(y){function cubehelix$$1(start,end){var h=hue$$1((start=cubehelix(start)).h,(end=cubehelix(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix$$1.gamma=cubehelixGamma,cubehelix$$1}(1)}var taskHead,taskTail,cubehelix$2=cubehelix$1(hue),cubehelixLong=cubehelix$1(nogamma),frame=0,timeout=0,interval=0,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),t}function timerFlush(){now(),++frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(null,e),t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,function nap(){for(var t0,t2,t1=taskHead,time=1/0;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time)}(),clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;delay>1e3&&(clockSkew-=delay,clockLast=now)}function sleep(time){frame||(timeout&&(timeout=clearTimeout(timeout)),time-clockNow>24?(time<1/0&&(timeout=setTimeout(wake,time-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,1e3)),frame=1,setFrame(wake)))}function timeout$1(callback,delay,time){var t=new Timer;return delay=null==delay?0:+delay,t.restart((function(elapsed){t.stop(),callback(elapsed+delay)}),delay,time),t}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=dispatch("start","end","interrupt"),emptyTween=[];function schedule(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function create$1(node,id,self){var tween,schedules=node.__transition;function start(elapsed){var i,j,n,o;if(1!==self.state)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(3===o.state)return timeout$1(start);4===o.state?(o.state=6,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=6,o.timer.stop(),delete schedules[i])}if(timeout$1((function(){3===self.state&&(self.state=4,self.timer.restart(tick,self.delay,self.time),tick(elapsed))})),self.state=2,self.on.call("start",node,node.__data__,self.index,self.group),2===self.state){for(self.state=3,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=5,1),i=-1,n=tween.length;++i<n;)tween[i].call(null,t);5===self.state&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=6,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer((function schedule(elapsed){self.state=1,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}),0,self.time)}(node,id,{name:name,index:index,group:group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:0})}function init(node,id){var schedule=get$1(node,id);if(schedule.state>0)throw new Error("too late; already scheduled");return schedule}function set$1(node,id){var schedule=get$1(node,id);if(schedule.state>2)throw new Error("too late; already started");return schedule}function get$1(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function interrupt(node,name){var schedule$$1,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule$$1=schedules[i]).name===name?(active=schedule$$1.state>2&&schedule$$1.state<5,schedule$$1.state=6,schedule$$1.timer.stop(),active&&schedule$$1.on.call("interrupt",node,node.__data__,schedule$$1.index,schedule$$1.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}}function tweenRemove(id,name){var tween0,tween1;return function(){var schedule$$1=set$1(this,id),tween=schedule$$1.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule$$1.tween=tween1}}function tweenFunction(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule$$1=set$1(this,id),tween=schedule$$1.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name:name,value:value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule$$1.tween=tween1}}function tweenValue(transition,name,value){var id=transition._id;return transition.each((function(){var schedule$$1=set$1(this,id);(schedule$$1.value||(schedule$$1.value={}))[name]=value.apply(this,arguments)})),function(node){return get$1(node,id).value[name]}}function interpolate(a,b){var c;return("number"==typeof b?reinterpolate:b instanceof color?interpolateRgb:(c=color(b))?(b=c,interpolateRgb):interpolateString)(a,b)}function attrRemove$1(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$1(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$1(name,interpolate$$1,value1){var value00,interpolate0;return function(){var value0=this.getAttribute(name);return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate$$1(value00=value0,value1)}}function attrConstantNS$1(fullname,interpolate$$1,value1){var value00,interpolate0;return function(){var value0=this.getAttributeNS(fullname.space,fullname.local);return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate$$1(value00=value0,value1)}}function attrFunction$1(name,interpolate$$1,value){var value00,value10,interpolate0;return function(){var value0,value1=value(this);if(null!=value1)return(value0=this.getAttribute(name))===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate$$1(value00=value0,value10=value1);this.removeAttribute(name)}}function attrFunctionNS$1(fullname,interpolate$$1,value){var value00,value10,interpolate0;return function(){var value0,value1=value(this);if(null!=value1)return(value0=this.getAttributeNS(fullname.space,fullname.local))===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate$$1(value00=value0,value10=value1);this.removeAttributeNS(fullname.space,fullname.local)}}function attrTweenNS(fullname,value){function tween(){var node=this,i=value.apply(node,arguments);return i&&function(t){node.setAttributeNS(fullname.space,fullname.local,i(t))}}return tween._value=value,tween}function attrTween(name,value){function tween(){var node=this,i=value.apply(node,arguments);return i&&function(t){node.setAttribute(name,i(t))}}return tween._value=value,tween}function delayFunction(id,value){return function(){init(this,id).delay=+value.apply(this,arguments)}}function delayConstant(id,value){return value=+value,function(){init(this,id).delay=value}}function durationFunction(id,value){return function(){set$1(this,id).duration=+value.apply(this,arguments)}}function durationConstant(id,value){return value=+value,function(){set$1(this,id).duration=value}}function easeConstant(id,value){if("function"!=typeof value)throw new Error;return function(){set$1(this,id).ease=value}}function onFunction(id,name,listener){var on0,on1,sit=function start(name){return(name+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(name)?init:set$1;return function(){var schedule$$1=sit(this,id),on=schedule$$1.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule$$1.on=on1}}var Selection$1=selection.prototype.constructor;function styleTween(name,value,priority){function tween(){var node=this,i=value.apply(node,arguments);return i&&function(t){node.style.setProperty(name,i(t),priority)}}return tween._value=value,tween}var id=0;function Transition(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function transition(name){return selection().transition(name)}function newId(){return++id}var selection_prototype=selection.prototype;function quadInOut(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Transition.prototype=transition.prototype={constructor:Transition,select:function transition_select(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,schedule(subgroup[i],name,id,i,subgroup,get$1(node,id)));return new Transition(subgroups,this._parents,name,id)},selectAll:function transition_selectAll(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=get$1(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new Transition(subgroups,parents,name,id)},filter:function transition_filter(match){"function"!=typeof match&&(match=matcher$1(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Transition(subgroups,this._parents,this._name,this._id)},merge:function transition_merge(transition$$1){if(transition$$1._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition$$1._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Transition(merges,this._parents,this._name,this._id)},selection:function transition_selection(){return new Selection$1(this._groups,this._parents)},transition:function transition_transition(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=get$1(node,id0);schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition(groups,this._parents,name,id1)},call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:function transition_on(name,listener){var id=this._id;return arguments.length<2?get$1(this.node(),id).on.on(name):this.each(onFunction(id,name,listener))},attr:function transition_attr(name,value){var fullname=namespace(name),i="transform"===fullname?interpolateTransformSvg:interpolate;return this.attrTween(name,"function"==typeof value?(fullname.local?attrFunctionNS$1:attrFunction$1)(fullname,i,tweenValue(this,"attr."+name,value)):null==value?(fullname.local?attrRemoveNS$1:attrRemove$1)(fullname):(fullname.local?attrConstantNS$1:attrConstant$1)(fullname,i,value+""))},attrTween:function transition_attrTween(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value))},style:function transition_style(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss:interpolate;return null==value?this.styleTween(name,function styleRemove$1(name,interpolate$$1){var value00,value10,interpolate0;return function(){var value0=styleValue(this,name),value1=(this.style.removeProperty(name),styleValue(this,name));return value0===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate$$1(value00=value0,value10=value1)}}(name,i)).on("end.style."+name,function styleRemoveEnd(name){return function(){this.style.removeProperty(name)}}(name)):this.styleTween(name,"function"==typeof value?function styleFunction$1(name,interpolate$$1,value){var value00,value10,interpolate0;return function(){var value0=styleValue(this,name),value1=value(this);return null==value1&&(this.style.removeProperty(name),value1=styleValue(this,name)),value0===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate$$1(value00=value0,value10=value1)}}(name,i,tweenValue(this,"style."+name,value)):function styleConstant$1(name,interpolate$$1,value1){var value00,interpolate0;return function(){var value0=styleValue(this,name);return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate$$1(value00=value0,value1)}}(name,i,value+""),priority)},styleTween:function transition_styleTween(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,styleTween(name,value,null==priority?"":priority))},text:function transition_text(value){return this.tween("text","function"==typeof value?function textFunction$1(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue(this,"text",value)):function textConstant$1(value){return function(){this.textContent=value}}(null==value?"":value+""))},remove:function transition_remove(){return this.on("end.remove",function removeFunction(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}}(this._id))},tween:function transition_tween(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=get$1(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove:tweenFunction)(id,name,value))},delay:function transition_delay(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction:delayConstant)(id,value)):get$1(this.node(),id).delay},duration:function transition_duration(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction:durationConstant)(id,value)):get$1(this.node(),id).duration},ease:function transition_ease(value){var id=this._id;return arguments.length?this.each(easeConstant(id,value)):get$1(this.node(),id).ease}};var polyIn=function custom(e){function polyIn(t){return Math.pow(t,e)}return e=+e,polyIn.exponent=custom,polyIn}(3),polyOut=function custom(e){function polyOut(t){return 1-Math.pow(1-t,e)}return e=+e,polyOut.exponent=custom,polyOut}(3),polyInOut=function custom(e){function polyInOut(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,polyInOut.exponent=custom,polyInOut}(3),pi=Math.PI,halfPi=pi/2;function sinInOut(t){return(1-Math.cos(pi*t))/2}function expInOut(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function circleInOut(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var b0=7.5625;function bounceOut(t){return(t=+t)<4/11?b0*t*t:t<8/11?b0*(t-=6/11)*t+3/4:t<10/11?b0*(t-=9/11)*t+15/16:b0*(t-=21/22)*t+63/64}var backIn=function custom(s){function backIn(t){return t*t*((s+1)*t-s)}return s=+s,backIn.overshoot=custom,backIn}(1.70158),backOut=function custom(s){function backOut(t){return--t*t*((s+1)*t+s)+1}return s=+s,backOut.overshoot=custom,backOut}(1.70158),backInOut=function custom(s){function backInOut(t){return((t*=2)<1?t*t*((s+1)*t-s):(t-=2)*t*((s+1)*t+s)+2)/2}return s=+s,backInOut.overshoot=custom,backInOut}(1.70158),tau=2*Math.PI,elasticIn=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticIn(t){return a*Math.pow(2,10*--t)*Math.sin((s-t)/p)}return elasticIn.amplitude=function(a){return custom(a,p*tau)},elasticIn.period=function(p){return custom(a,p)},elasticIn}(1,.3),elasticOut=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticOut(t){return 1-a*Math.pow(2,-10*(t=+t))*Math.sin((t+s)/p)}return elasticOut.amplitude=function(a){return custom(a,p*tau)},elasticOut.period=function(p){return custom(a,p)},elasticOut}(1,.3),elasticInOut=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticInOut(t){return((t=2*t-1)<0?a*Math.pow(2,10*t)*Math.sin((s-t)/p):2-a*Math.pow(2,-10*t)*Math.sin((s+t)/p))/2}return elasticInOut.amplitude=function(a){return custom(a,p*tau)},elasticInOut.period=function(p){return custom(a,p)},elasticInOut}(1,.3),defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))return defaultTiming.time=now(),defaultTiming;return timing}selection.prototype.interrupt=function selection_interrupt(name){return this.each((function(){interrupt(this,name)}))},selection.prototype.transition=function selection_transition(name){var id,timing;name instanceof Transition?(id=name._id,name=name._name):(id=newId(),(timing=defaultTiming).time=now(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule(node,name,id,i,group,timing||inherit(node,id));return new Transition(groups,this._parents,name,id)};var root$1=[null];function constant$4(x){return function(){return x}}function BrushEvent(target,type,selection){this.target=target,this.type=type,this.selection=selection}function nopropagation$1(){exports.event.stopImmediatePropagation()}function noevent$1(){exports.event.preventDefault(),exports.event.stopImmediatePropagation()}var MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"},X={name:"x",handles:["e","w"].map(type),input:function(x,e){return x&&[[x[0],e[0][1]],[x[1],e[1][1]]]},output:function(xy){return xy&&[xy[0][0],xy[1][0]]}},Y={name:"y",handles:["n","s"].map(type),input:function(y,e){return y&&[[e[0][0],y[0]],[e[1][0],y[1]]]},output:function(xy){return xy&&[xy[0][1],xy[1][1]]}},XY={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(type),input:function(xy){return xy},output:function(xy){return xy}},cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function type(t){return{type:t}}function defaultFilter(){return!exports.event.button}function defaultExtent(){var svg=this.ownerSVGElement||this;return[[0,0],[svg.width.baseVal.value,svg.height.baseVal.value]]}function local(node){for(;!node.__brush;)if(!(node=node.parentNode))return;return node.__brush}function empty(extent){return extent[0][0]===extent[1][0]||extent[0][1]===extent[1][1]}function brush$1(dim){var touchending,extent=defaultExtent,filter=defaultFilter,listeners=dispatch(brush,"start","brush","end"),handleSize=6;function brush(group){var overlay=group.property("__brush",initialize).selectAll(".overlay").data([type("overlay")]);overlay.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(overlay).each((function(){var extent=local(this).extent;select(this).attr("x",extent[0][0]).attr("y",extent[0][1]).attr("width",extent[1][0]-extent[0][0]).attr("height",extent[1][1]-extent[0][1])})),group.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var handle=group.selectAll(".handle").data(dim.handles,(function(d){return d.type}));handle.exit().remove(),handle.enter().append("rect").attr("class",(function(d){return"handle handle--"+d.type})).attr("cursor",(function(d){return cursors[d.type]})),group.each(redraw).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",started)}function redraw(){var group=select(this),selection=local(this).selection;selection?(group.selectAll(".selection").style("display",null).attr("x",selection[0][0]).attr("y",selection[0][1]).attr("width",selection[1][0]-selection[0][0]).attr("height",selection[1][1]-selection[0][1]),group.selectAll(".handle").style("display",null).attr("x",(function(d){return"e"===d.type[d.type.length-1]?selection[1][0]-handleSize/2:selection[0][0]-handleSize/2})).attr("y",(function(d){return"s"===d.type[0]?selection[1][1]-handleSize/2:selection[0][1]-handleSize/2})).attr("width",(function(d){return"n"===d.type||"s"===d.type?selection[1][0]-selection[0][0]+handleSize:handleSize})).attr("height",(function(d){return"e"===d.type||"w"===d.type?selection[1][1]-selection[0][1]+handleSize:handleSize}))):group.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function emitter(that,args){return that.__brush.emitter||new Emitter(that,args)}function Emitter(that,args){this.that=that,this.args=args,this.state=that.__brush,this.active=0}function started(){if(exports.event.touches){if(exports.event.changedTouches.length<exports.event.touches.length)return noevent$1()}else if(touchending)return;if(filter.apply(this,arguments)){var w0,w1,n0,n1,e0,e1,s0,s1,dx,dy,moving,lockX,lockY,that=this,type=exports.event.target.__data__.type,mode="selection"===(exports.event.metaKey?type="overlay":type)?MODE_DRAG:exports.event.altKey?MODE_CENTER:MODE_HANDLE,signX=dim===Y?null:signsX[type],signY=dim===X?null:signsY[type],state=local(that),extent=state.extent,selection=state.selection,W=extent[0][0],N=extent[0][1],E=extent[1][0],S=extent[1][1],shifting=signX&&signY&&exports.event.shiftKey,point0=mouse(that),point=point0,emit=emitter(that,arguments).beforestart();"overlay"===type?state.selection=selection=[[w0=dim===Y?W:point0[0],n0=dim===X?N:point0[1]],[e0=dim===Y?E:w0,s0=dim===X?S:n0]]:(w0=selection[0][0],n0=selection[0][1],e0=selection[1][0],s0=selection[1][1]),w1=w0,n1=n0,e1=e0,s1=s0;var group=select(that).attr("pointer-events","none"),overlay=group.selectAll(".overlay").attr("cursor",cursors[type]);if(exports.event.touches)group.on("touchmove.brush",moved,!0).on("touchend.brush touchcancel.brush",ended,!0);else{var view=select(exports.event.view).on("keydown.brush",keydowned,!0).on("keyup.brush",keyupped,!0).on("mousemove.brush",moved,!0).on("mouseup.brush",ended,!0);dragDisable(exports.event.view)}nopropagation$1(),interrupt(that),redraw.call(that),emit.start()}function moved(){var point1=mouse(that);!shifting||lockX||lockY||(Math.abs(point1[0]-point[0])>Math.abs(point1[1]-point[1])?lockY=!0:lockX=!0),point=point1,moving=!0,noevent$1(),move()}function move(){var t;switch(dx=point[0]-point0[0],dy=point[1]-point0[1],mode){case MODE_SPACE:case MODE_DRAG:signX&&(dx=Math.max(W-w0,Math.min(E-e0,dx)),w1=w0+dx,e1=e0+dx),signY&&(dy=Math.max(N-n0,Math.min(S-s0,dy)),n1=n0+dy,s1=s0+dy);break;case MODE_HANDLE:signX<0?(dx=Math.max(W-w0,Math.min(E-w0,dx)),w1=w0+dx,e1=e0):signX>0&&(dx=Math.max(W-e0,Math.min(E-e0,dx)),w1=w0,e1=e0+dx),signY<0?(dy=Math.max(N-n0,Math.min(S-n0,dy)),n1=n0+dy,s1=s0):signY>0&&(dy=Math.max(N-s0,Math.min(S-s0,dy)),n1=n0,s1=s0+dy);break;case MODE_CENTER:signX&&(w1=Math.max(W,Math.min(E,w0-dx*signX)),e1=Math.max(W,Math.min(E,e0+dx*signX))),signY&&(n1=Math.max(N,Math.min(S,n0-dy*signY)),s1=Math.max(N,Math.min(S,s0+dy*signY)))}e1<w1&&(signX*=-1,t=w0,w0=e0,e0=t,t=w1,w1=e1,e1=t,type in flipX&&overlay.attr("cursor",cursors[type=flipX[type]])),s1<n1&&(signY*=-1,t=n0,n0=s0,s0=t,t=n1,n1=s1,s1=t,type in flipY&&overlay.attr("cursor",cursors[type=flipY[type]])),state.selection&&(selection=state.selection),lockX&&(w1=selection[0][0],e1=selection[1][0]),lockY&&(n1=selection[0][1],s1=selection[1][1]),selection[0][0]===w1&&selection[0][1]===n1&&selection[1][0]===e1&&selection[1][1]===s1||(state.selection=[[w1,n1],[e1,s1]],redraw.call(that),emit.brush())}function ended(){if(nopropagation$1(),exports.event.touches){if(exports.event.touches.length)return;touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),500),group.on("touchmove.brush touchend.brush touchcancel.brush",null)}else yesdrag(exports.event.view,moving),view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);group.attr("pointer-events","all"),overlay.attr("cursor",cursors.overlay),state.selection&&(selection=state.selection),empty(selection)&&(state.selection=null,redraw.call(that)),emit.end()}function keydowned(){switch(exports.event.keyCode){case 16:shifting=signX&&signY;break;case 18:mode===MODE_HANDLE&&(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER,move());break;case 32:mode!==MODE_HANDLE&&mode!==MODE_CENTER||(signX<0?e0=e1-dx:signX>0&&(w0=w1-dx),signY<0?s0=s1-dy:signY>0&&(n0=n1-dy),mode=MODE_SPACE,overlay.attr("cursor",cursors.selection),move());break;default:return}noevent$1()}function keyupped(){switch(exports.event.keyCode){case 16:shifting&&(lockX=lockY=shifting=!1,move());break;case 18:mode===MODE_CENTER&&(signX<0?e0=e1:signX>0&&(w0=w1),signY<0?s0=s1:signY>0&&(n0=n1),mode=MODE_HANDLE,move());break;case 32:mode===MODE_SPACE&&(exports.event.altKey?(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER):(signX<0?e0=e1:signX>0&&(w0=w1),signY<0?s0=s1:signY>0&&(n0=n1),mode=MODE_HANDLE),overlay.attr("cursor",cursors[type]),move());break;default:return}noevent$1()}}function initialize(){var state=this.__brush||{selection:null};return state.extent=extent.apply(this,arguments),state.dim=dim,state}return brush.move=function(group,selection){group.selection?group.on("start.brush",(function(){emitter(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){emitter(this,arguments).end()})).tween("brush",(function(){var that=this,state=that.__brush,emit=emitter(that,arguments),selection0=state.selection,selection1=dim.input("function"==typeof selection?selection.apply(this,arguments):selection,state.extent),i=interpolateValue(selection0,selection1);function tween(t){state.selection=1===t&&empty(selection1)?null:i(t),redraw.call(that),emit.brush()}return selection0&&selection1?tween:tween(1)})):group.each((function(){var that=this,args=arguments,state=that.__brush,selection1=dim.input("function"==typeof selection?selection.apply(that,args):selection,state.extent),emit=emitter(that,args).beforestart();interrupt(that),state.selection=null==selection1||empty(selection1)?null:selection1,redraw.call(that),emit.start().brush().end()}))},Emitter.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(type){customEvent(new BrushEvent(brush,type,dim.output(this.state.selection)),listeners.apply,listeners,[type,this.that,this.args])}},brush.extent=function(_){return arguments.length?(extent="function"==typeof _?_:constant$4([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),brush):extent},brush.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant$4(!!_),brush):filter},brush.handleSize=function(_){return arguments.length?(handleSize=+_,brush):handleSize},brush.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?brush:value},brush}var cos=Math.cos,sin=Math.sin,pi$1=Math.PI,halfPi$1=pi$1/2,tau$1=2*pi$1,max$1=Math.max;function compareValue(compare){return function(a,b){return compare(a.source.value+a.target.value,b.source.value+b.target.value)}}var slice$2=Array.prototype.slice;function constant$5(x){return function(){return x}}var pi$2=Math.PI,tau$2=2*pi$2,tauEpsilon=tau$2-1e-6;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}function defaultSource(d){return d.source}function defaultTarget(d){return d.target}function defaultRadius(d){return d.radius}function defaultStartAngle(d){return d.startAngle}function defaultEndAngle(d){return d.endAngle}function Map(){}function map$1(object,f){var map=new Map;if(object instanceof Map)object.each((function(value,key){map.set(key,value)}));else if(Array.isArray(object)){var o,i=-1,n=object.length;if(null==f)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}function createObject(){return{}}function setObject(object,key,value){object[key]=value}function createMap(){return map$1()}function setMap(map,key,value){map.set(key,value)}function Set(){}Path.prototype=path.prototype={constructor:Path,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r){var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((pi$2-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;Math.abs(t01-1)>1e-6&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}else this._+="L"+(this._x1=x1)+","+(this._y1=y1)},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y;var dx=(r=+r)*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(da<0&&(da=da%tau$2+tau$2),da>tauEpsilon?this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):da>1e-6&&(this._+="A"+r+","+r+",0,"+ +(da>=pi$2)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}},Map.prototype=map$1.prototype={constructor:Map,has:function(key){return"$"+key in this},get:function(key){return this["$"+key]},set:function(key,value){return this["$"+key]=value,this},remove:function(key){var property="$"+key;return property in this&&delete this[property]},clear:function(){for(var property in this)"$"===property[0]&&delete this[property]},keys:function(){var keys=[];for(var property in this)"$"===property[0]&&keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)"$"===property[0]&&values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)"$"===property[0]&&entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)"$"===property[0]&&++size;return size},empty:function(){for(var property in this)if("$"===property[0])return!1;return!0},each:function(f){for(var property in this)"$"===property[0]&&f(this[property],property.slice(1),this)}};var proto=map$1.prototype;function set$2(object,f){var set=new Set;if(object instanceof Set)object.each((function(value){set.add(value)}));else if(object){var i=-1,n=object.length;if(null==f)for(;++i<n;)set.add(object[i]);else for(;++i<n;)set.add(f(object[i],i,object))}return set}Set.prototype=set$2.prototype={constructor:Set,has:proto.has,add:function(value){return this["$"+(value+="")]=value,this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each};var EOL={},EOF={};function objectConverter(columns){return new Function("d","return {"+columns.map((function(name,i){return JSON.stringify(name)+": d["+i+"]"})).join(",")+"}")}function dsv(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(34===text.charCodeAt(j)){for(;I++<N&&34!==text.charCodeAt(I)||34===text.charCodeAt(++I););return(i=I)>=N?eof=!0:10===(c=text.charCodeAt(I++))?eol=!0:13===c&&(eol=!0,10===text.charCodeAt(I)&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if(10===(c=text.charCodeAt(i=I++)))eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(10===text.charCodeAt(N-1)&&--N,13===text.charCodeAt(N-1)&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return null==text?"":reFormat.test(text+="")?'"'+text.replace(/"/g,'""')+'"':text}return{parse:function parse(text,f){var convert,columns,rows=parseRows(text,(function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)}));return rows.columns=columns||[],rows},parseRows:parseRows,format:function format(rows,columns){return null==columns&&(columns=function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach((function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)})),columns}(rows)),[columns.map(formatValue).join(delimiter)].concat(rows.map((function(row){return columns.map((function(column){return formatValue(row[column])})).join(delimiter)}))).join("\n")},formatRows:function formatRows(rows){return rows.map(formatRow).join("\n")}}}var csv=dsv(","),csvParse=csv.parse,csvParseRows=csv.parseRows,csvFormat=csv.format,csvFormatRows=csv.formatRows,tsv=dsv("\t"),tsvParse=tsv.parse,tsvParseRows=tsv.parseRows,tsvFormat=tsv.format,tsvFormatRows=tsv.formatRows;function constant$6(x){return function(){return x}}function jiggle(){return 1e-6*(Math.random()-.5)}function add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,xm,ym,xp,yp,right,bottom,i,j,node=tree._root,leaf={data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1;if(!node)return tree._root=leaf,tree;for(;node.length;)if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return parent[i]=leaf,tree;if(xp=+tree._x.call(null,node.data),yp=+tree._y.call(null,node.data),x===xp&&y===yp)return leaf.next=node,parent?parent[i]=leaf:tree._root=leaf,tree;do{parent=parent?parent[i]=new Array(4):tree._root=new Array(4),(right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym}while((i=bottom<<1|right)==(j=(yp>=ym)<<1|xp>=xm));return parent[j]=node,parent[i]=leaf,tree}function Quad(node,x0,y0,x1,y1){this.node=node,this.x0=x0,this.y0=y0,this.x1=x1,this.y1=y1}function defaultX(d){return d[0]}function defaultY(d){return d[1]}function quadtree(nodes,x,y){var tree=new Quadtree(null==x?defaultX:x,null==y?defaultY:y,NaN,NaN,NaN,NaN);return null==nodes?tree:tree.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){this._x=x,this._y=y,this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this._root=void 0}function leaf_copy(leaf){for(var copy={data:leaf.data},next=copy;leaf=leaf.next;)next=next.next={data:leaf.data};return copy}var treeProto=quadtree.prototype=Quadtree.prototype;function x(d){return d.x+d.vx}function y(d){return d.y+d.vy}function index(d){return d.index}function find(nodeById,nodeId){var node=nodeById.get(nodeId);if(!node)throw new Error("missing: "+nodeId);return node}function x$1(d){return d.x}function y$1(d){return d.y}treeProto.copy=function(){var nodes,child,copy=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root;if(!node)return copy;if(!node.length)return copy._root=leaf_copy(node),copy;for(nodes=[{source:node,target:copy._root=new Array(4)}];node=nodes.pop();)for(var i=0;i<4;++i)(child=node.source[i])&&(child.length?nodes.push({source:child,target:node.target[i]=new Array(4)}):node.target[i]=leaf_copy(child));return copy},treeProto.add=function tree_add(d){var x=+this._x.call(null,d),y=+this._y.call(null,d);return add(this.cover(x,y),x,y,d)},treeProto.addAll=function addAll(data){var d,i,x,y,n=data.length,xz=new Array(n),yz=new Array(n),x0=1/0,y0=1/0,x1=-1/0,y1=-1/0;for(i=0;i<n;++i)isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d))||(xz[i]=x,yz[i]=y,x<x0&&(x0=x),x>x1&&(x1=x),y<y0&&(y0=y),y>y1&&(y1=y));for(x1<x0&&(x0=this._x0,x1=this._x1),y1<y0&&(y0=this._y0,y1=this._y1),this.cover(x0,y0).cover(x1,y1),i=0;i<n;++i)add(this,xz[i],yz[i],data[i]);return this},treeProto.cover=function tree_cover(x,y){if(isNaN(x=+x)||isNaN(y=+y))return this;var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0))x1=(x0=Math.floor(x))+1,y1=(y0=Math.floor(y))+1;else{if(!(x0>x||x>x1||y0>y||y>y1))return this;var parent,i,z=x1-x0,node=this._root;switch(i=(y<(y0+y1)/2)<<1|x<(x0+x1)/2){case 0:do{(parent=new Array(4))[i]=node,node=parent}while(y1=y0+(z*=2),x>(x1=x0+z)||y>y1);break;case 1:do{(parent=new Array(4))[i]=node,node=parent}while(y1=y0+(z*=2),(x0=x1-z)>x||y>y1);break;case 2:do{(parent=new Array(4))[i]=node,node=parent}while(y0=y1-(z*=2),x>(x1=x0+z)||y0>y);break;case 3:do{(parent=new Array(4))[i]=node,node=parent}while(y0=y1-(z*=2),(x0=x1-z)>x||y0>y)}this._root&&this._root.length&&(this._root=node)}return this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this},treeProto.data=function tree_data(){var data=[];return this.visit((function(node){if(!node.length)do{data.push(node.data)}while(node=node.next)})),data},treeProto.extent=function tree_extent(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},treeProto.find=function tree_find(x,y,radius){var data,x1,y1,x2,y2,q,i,x0=this._x0,y0=this._y0,x3=this._x1,y3=this._y1,quads=[],node=this._root;for(node&&quads.push(new Quad(node,x0,y0,x3,y3)),null==radius?radius=1/0:(x0=x-radius,y0=y-radius,x3=x+radius,y3=y+radius,radius*=radius);q=quads.pop();)if(!(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0))if(node.length){var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new Quad(node[3],xm,ym,x2,y2),new Quad(node[2],x1,ym,xm,y2),new Quad(node[1],xm,y1,x2,ym),new Quad(node[0],x1,y1,xm,ym)),(i=(y>=ym)<<1|x>=xm)&&(q=quads[quads.length-1],quads[quads.length-1]=quads[quads.length-1-i],quads[quads.length-1-i]=q)}else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;if(d2<radius){var d=Math.sqrt(radius=d2);x0=x-d,y0=y-d,x3=x+d,y3=y+d,data=node.data}}return data},treeProto.remove=function tree_remove(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;var parent,retainer,previous,next,x,y,xm,ym,right,bottom,i,j,node=this._root,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(!node)return this;if(node.length)for(;;){if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return this;if(!node.length)break;(parent[i+1&3]||parent[i+2&3]||parent[i+3&3])&&(retainer=parent,j=i)}for(;node.data!==d;)if(previous=node,!(node=node.next))return this;return(next=node.next)&&delete node.next,previous?(next?previous.next=next:delete previous.next,this):parent?(next?parent[i]=next:delete parent[i],(node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length&&(retainer?retainer[j]=node:this._root=node),this):(this._root=next,this)},treeProto.removeAll=function removeAll(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this},treeProto.root=function tree_root(){return this._root},treeProto.size=function tree_size(){var size=0;return this.visit((function(node){if(!node.length)do{++size}while(node=node.next)})),size},treeProto.visit=function tree_visit(callback){var q,child,x0,y0,x1,y1,quads=[],node=this._root;for(node&&quads.push(new Quad(node,this._x0,this._y0,this._x1,this._y1));q=quads.pop();)if(!callback(node=q.node,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1)&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[3])&&quads.push(new Quad(child,xm,ym,x1,y1)),(child=node[2])&&quads.push(new Quad(child,x0,ym,xm,y1)),(child=node[1])&&quads.push(new Quad(child,xm,y0,x1,ym)),(child=node[0])&&quads.push(new Quad(child,x0,y0,xm,ym))}return this},treeProto.visitAfter=function tree_visitAfter(callback){var q,quads=[],next=[];for(this._root&&quads.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));q=quads.pop();){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[0])&&quads.push(new Quad(child,x0,y0,xm,ym)),(child=node[1])&&quads.push(new Quad(child,xm,y0,x1,ym)),(child=node[2])&&quads.push(new Quad(child,x0,ym,xm,y1)),(child=node[3])&&quads.push(new Quad(child,xm,ym,x1,y1))}next.push(q)}for(;q=next.pop();)callback(q.node,q.x0,q.y0,q.x1,q.y1);return this},treeProto.x=function tree_x(_){return arguments.length?(this._x=_,this):this._x},treeProto.y=function tree_y(_){return arguments.length?(this._y=_,this):this._y};var prefixExponent,initialAngle=Math.PI*(3-Math.sqrt(5));function formatDecimal(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent$1(x){return(x=formatDecimal(Math.abs(x)))?x[1]:NaN}function formatRounded(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}var formatTypes={"":function formatDefault(x,p){out:for(var i1,n=(x=x.toPrecision(p)).length,i=1,i0=-1;i<n;++i)switch(x[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;case"e":break out;default:i0>0&&(i0=0)}return i0>0?x.slice(0,i0)+x.slice(i1+1):x},"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,s:function formatPrefixAuto(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal(x,Math.max(0,p+i-1))[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}},re=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function formatSpecifier(specifier){return new FormatSpecifier(specifier)}function FormatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match,fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zero=!!match[5],width=match[6]&&+match[6],comma=!!match[7],precision=match[8]&&+match[8].slice(1),type=match[9]||"";"n"===type?(comma=!0,type="g"):formatTypes[type]||(type=""),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="="),this.fill=fill,this.align=align,this.sign=sign,this.symbol=symbol,this.zero=zero,this.width=width,this.comma=comma,this.precision=precision,this.type=type}function identity$3(x){return x}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var locale,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(locale){var group=locale.grouping&&locale.thousands?function formatGroup(grouping,thousands){return function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}(locale.grouping,locale.thousands):identity$3,currency=locale.currency,decimal=locale.decimal,numerals=locale.numerals?function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(locale.numerals):identity$3,percent=locale.percent||"%";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,type=specifier.type,prefix="$"===symbol?currency[0]:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currency[1]:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=!type||/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0;if(value=formatType(Math.abs(value),precision),valueNegative&&0==+value&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:"-":"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=null==precision?type?6:12:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(exponent$1(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}}function defaultLocale(definition){return locale=formatLocale(definition),exports.format=locale.format,exports.formatPrefix=locale.formatPrefix,locale}function precisionFixed(step){return Math.max(0,-exponent$1(Math.abs(step)))}function precisionPrefix(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent$1(value)/3)))-exponent$1(Math.abs(step)))}function precisionRound(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,exponent$1(max)-exponent$1(step))+1}function adder(){return new Adder}function Adder(){this.reset()}defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(y){add$1(temp,y,this.t),add$1(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add$1(adder,a,b){var x=adder.s=a+b,bv=x-a,av=x-bv;adder.t=a-av+(b-bv)}var pi$3=Math.PI,halfPi$2=pi$3/2,quarterPi=pi$3/4,tau$3=2*pi$3,degrees$1=180/pi$3,radians=pi$3/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos$1=Math.cos,ceil=Math.ceil,exp=Math.exp,log=Math.log,pow=Math.pow,sin$1=Math.sin,sign=Math.sign||function(x){return x>0?1:x<0?-1:0},sqrt=Math.sqrt,tan=Math.tan;function acos(x){return x>1?0:x<-1?pi$3:Math.acos(x)}function asin(x){return x>1?halfPi$2:x<-1?-halfPi$2:Math.asin(x)}function haversin(x){return(x=sin$1(x/2))*x}function noop$1(){}function streamGeometry(geometry,stream){geometry&&streamGeometryType.hasOwnProperty(geometry.type)&&streamGeometryType[geometry.type](geometry,stream)}var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){for(var features=object.features,i=-1,n=features.length;++i<n;)streamGeometry(features[i].geometry,stream)}},streamGeometryType={Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object=object.coordinates,stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamLine(coordinates[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamPolygon(coordinates[i],stream)},GeometryCollection:function(object,stream){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)streamGeometry(geometries[i],stream)}};function streamLine(coordinates,stream,closed){var coordinate,i=-1,n=coordinates.length-closed;for(stream.lineStart();++i<n;)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;for(stream.polygonStart();++i<n;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}function geoStream(object,stream){object&&streamObjectType.hasOwnProperty(object.type)?streamObjectType[object.type](object,stream):streamGeometry(object,stream)}var lambda00,phi00,lambda0,cosPhi0,sinPhi0,lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,areaRingSum=adder(),areaSum=adder(),areaStream={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaRingSum.reset(),areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){var areaRing=+areaRingSum;areaSum.add(areaRing<0?tau$3+areaRing:areaRing),this.lineStart=this.lineEnd=this.point=noop$1},sphere:function(){areaSum.add(tau$3)}};function areaRingStart(){areaStream.point=areaPointFirst}function areaRingEnd(){areaPoint(lambda00,phi00)}function areaPointFirst(lambda,phi){areaStream.point=areaPoint,lambda00=lambda,phi00=phi,lambda0=lambda*=radians,cosPhi0=cos$1(phi=(phi*=radians)/2+quarterPi),sinPhi0=sin$1(phi)}function areaPoint(lambda,phi){var dLambda=(lambda*=radians)-lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=cos$1(phi=(phi*=radians)/2+quarterPi),sinPhi=sin$1(phi),k=sinPhi0*sinPhi,u=cosPhi0*cosPhi+k*cos$1(adLambda),v=k*sdLambda*sin$1(adLambda);areaRingSum.add(atan2(v,u)),lambda0=lambda,cosPhi0=cosPhi,sinPhi0=sinPhi}function spherical(cartesian){return[atan2(cartesian[1],cartesian[0]),asin(cartesian[2])]}function cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=cos$1(phi);return[cosPhi*cos$1(lambda),cosPhi*sin$1(lambda),sin$1(phi)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function cartesianNormalizeInPlace(d){var l=sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}var ranges,range,W0,W1,X0,Y0,Z0,X1,Y1,Z1,X2,Y2,Z2,lambda00$2,phi00$2,x0,y0,z0,deltaSum=adder(),boundsStream={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream.point=boundsRingPoint,boundsStream.lineStart=boundsRingStart,boundsStream.lineEnd=boundsRingEnd,deltaSum.reset(),areaStream.polygonStart()},polygonEnd:function(){areaStream.polygonEnd(),boundsStream.point=boundsPoint,boundsStream.lineStart=boundsLineStart,boundsStream.lineEnd=boundsLineEnd,areaRingSum<0?(lambda0$1=-(lambda1=180),phi0=-(phi1=90)):deltaSum>1e-6?phi1=90:deltaSum<-1e-6&&(phi0=-90),range[0]=lambda0$1,range[1]=lambda1}};function boundsPoint(lambda,phi){ranges.push(range=[lambda0$1=lambda,lambda1=lambda]),phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi)}function linePoint(lambda,phi){var p=cartesian([lambda*radians,phi*radians]);if(p0){var normal=cartesianCross(p0,p),inflection=cartesianCross([normal[1],-normal[0],0],normal);cartesianNormalizeInPlace(inflection),inflection=spherical(inflection);var phii,delta=lambda-lambda2,sign$$1=delta>0?1:-1,lambdai=inflection[0]*degrees$1*sign$$1,antimeridian=abs(delta)>180;antimeridian^(sign$$1*lambda2<lambdai&&lambdai<sign$$1*lambda)?(phii=inflection[1]*degrees$1)>phi1&&(phi1=phii):antimeridian^(sign$$1*lambda2<(lambdai=(lambdai+360)%360-180)&&lambdai<sign$$1*lambda)?(phii=-inflection[1]*degrees$1)<phi0&&(phi0=phii):(phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi)),antimeridian?lambda<lambda2?angle(lambda0$1,lambda)>angle(lambda0$1,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=lambda):lambda1>=lambda0$1?(lambda<lambda0$1&&(lambda0$1=lambda),lambda>lambda1&&(lambda1=lambda)):lambda>lambda2?angle(lambda0$1,lambda)>angle(lambda0$1,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=lambda)}else ranges.push(range=[lambda0$1=lambda,lambda1=lambda]);phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi),p0=p,lambda2=lambda}function boundsLineStart(){boundsStream.point=linePoint}function boundsLineEnd(){range[0]=lambda0$1,range[1]=lambda1,boundsStream.point=boundsPoint,p0=null}function boundsRingPoint(lambda,phi){if(p0){var delta=lambda-lambda2;deltaSum.add(abs(delta)>180?delta+(delta>0?360:-360):delta)}else lambda00$1=lambda,phi00$1=phi;areaStream.point(lambda,phi),linePoint(lambda,phi)}function boundsRingStart(){areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1),areaStream.lineEnd(),abs(deltaSum)>1e-6&&(lambda0$1=-(lambda1=180)),range[0]=lambda0$1,range[1]=lambda1,p0=null}function angle(lambda0,lambda1){return(lambda1-=lambda0)<0?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}var centroidStream={sphere:noop$1,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd}};function centroidPoint(lambda,phi){lambda*=radians;var cosPhi=cos$1(phi*=radians);centroidPointCartesian(cosPhi*cos$1(lambda),cosPhi*sin$1(lambda),sin$1(phi))}function centroidPointCartesian(x,y,z){++W0,X0+=(x-X0)/W0,Y0+=(y-Y0)/W0,Z0+=(z-Z0)/W0}function centroidLineStart(){centroidStream.point=centroidLinePointFirst}function centroidLinePointFirst(lambda,phi){lambda*=radians;var cosPhi=cos$1(phi*=radians);x0=cosPhi*cos$1(lambda),y0=cosPhi*sin$1(lambda),z0=sin$1(phi),centroidStream.point=centroidLinePoint,centroidPointCartesian(x0,y0,z0)}function centroidLinePoint(lambda,phi){lambda*=radians;var cosPhi=cos$1(phi*=radians),x=cosPhi*cos$1(lambda),y=cosPhi*sin$1(lambda),z=sin$1(phi),w=atan2(sqrt((w=y0*z-z0*y)*w+(w=z0*x-x0*z)*w+(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);W1+=w,X1+=w*(x0+(x0=x)),Y1+=w*(y0+(y0=y)),Z1+=w*(z0+(z0=z)),centroidPointCartesian(x0,y0,z0)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(lambda00$2,phi00$2),centroidStream.point=centroidPoint}function centroidRingPointFirst(lambda,phi){lambda00$2=lambda,phi00$2=phi,lambda*=radians,phi*=radians,centroidStream.point=centroidRingPoint;var cosPhi=cos$1(phi);x0=cosPhi*cos$1(lambda),y0=cosPhi*sin$1(lambda),z0=sin$1(phi),centroidPointCartesian(x0,y0,z0)}function centroidRingPoint(lambda,phi){lambda*=radians;var cosPhi=cos$1(phi*=radians),x=cosPhi*cos$1(lambda),y=cosPhi*sin$1(lambda),z=sin$1(phi),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=sqrt(cx*cx+cy*cy+cz*cz),w=asin(m),v=m&&-w/m;X2+=v*cx,Y2+=v*cy,Z2+=v*cz,W1+=w,X1+=w*(x0+(x0=x)),Y1+=w*(y0+(y0=y)),Z1+=w*(z0+(z0=z)),centroidPointCartesian(x0,y0,z0)}function constant$7(x){return function(){return x}}function compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return(x=b.invert(x,y))&&a.invert(x[0],x[1])}),compose}function rotationIdentity(lambda,phi){return[lambda>pi$3?lambda-tau$3:lambda<-pi$3?lambda+tau$3:lambda,phi]}function rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%=tau$3)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity}function forwardRotationLambda(deltaLambda){return function(lambda,phi){return[(lambda+=deltaLambda)>pi$3?lambda-tau$3:lambda<-pi$3?lambda+tau$3:lambda,phi]}}function rotationLambda(deltaLambda){var rotation=forwardRotationLambda(deltaLambda);return rotation.invert=forwardRotationLambda(-deltaLambda),rotation}function rotationPhiGamma(deltaPhi,deltaGamma){var cosDeltaPhi=cos$1(deltaPhi),sinDeltaPhi=sin$1(deltaPhi),cosDeltaGamma=cos$1(deltaGamma),sinDeltaGamma=sin$1(deltaGamma);function rotation(lambda,phi){var cosPhi=cos$1(phi),x=cos$1(lambda)*cosPhi,y=sin$1(lambda)*cosPhi,z=sin$1(phi),k=z*cosDeltaPhi+x*sinDeltaPhi;return[atan2(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-z*sinDeltaPhi),asin(k*cosDeltaGamma+y*sinDeltaGamma)]}return rotation.invert=function(lambda,phi){var cosPhi=cos$1(phi),x=cos$1(lambda)*cosPhi,y=sin$1(lambda)*cosPhi,z=sin$1(phi),k=z*cosDeltaGamma-y*sinDeltaGamma;return[atan2(y*cosDeltaGamma+z*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi),asin(k*cosDeltaPhi-x*sinDeltaPhi)]},rotation}function rotation(rotate){function forward(coordinates){return(coordinates=rotate(coordinates[0]*radians,coordinates[1]*radians))[0]*=degrees$1,coordinates[1]*=degrees$1,coordinates}return rotate=rotateRadians(rotate[0]*radians,rotate[1]*radians,rotate.length>2?rotate[2]*radians:0),forward.invert=function(coordinates){return(coordinates=rotate.invert(coordinates[0]*radians,coordinates[1]*radians))[0]*=degrees$1,coordinates[1]*=degrees$1,coordinates},forward}function circleStream(stream,radius,delta,direction,t0,t1){if(delta){var cosRadius=cos$1(radius),sinRadius=sin$1(radius),step=direction*delta;null==t0?(t0=radius+direction*tau$3,t1=radius-step/2):(t0=circleRadius(cosRadius,t0),t1=circleRadius(cosRadius,t1),(direction>0?t0<t1:t0>t1)&&(t0+=direction*tau$3));for(var point,t=t0;direction>0?t>t1:t<t1;t-=step)point=spherical([cosRadius,-sinRadius*cos$1(t),-sinRadius*sin$1(t)]),stream.point(point[0],point[1])}}function circleRadius(cosRadius,point){(point=cartesian(point))[0]-=cosRadius,cartesianNormalizeInPlace(point);var radius=acos(-point[1]);return((-point[2]<0?-radius:radius)+tau$3-1e-6)%tau$3}function clipBuffer(){var line,lines=[];return{point:function(x,y){line.push([x,y])},lineStart:function(){lines.push(line=[])},lineEnd:noop$1,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;return lines=[],line=null,result}}}function pointEqual(a,b){return abs(a[0]-b[0])<1e-6&&abs(a[1]-b[1])<1e-6}function Intersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function clipRejoin(segments,compareIntersection,startInside,interpolate,stream){var i,n,subject=[],clip=[];if(segments.forEach((function(segment){if(!((n=segment.length-1)<=0)){var n,x,p0=segment[0],p1=segment[n];if(pointEqual(p0,p1)){for(stream.lineStart(),i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);stream.lineEnd()}else subject.push(x=new Intersection(p0,segment,null,!0)),clip.push(x.o=new Intersection(p0,null,x,!1)),subject.push(x=new Intersection(p1,segment,null,!1)),clip.push(x.o=new Intersection(p1,null,x,!0))}})),subject.length){for(clip.sort(compareIntersection),link$1(subject),link$1(clip),i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);current=current.p}points=(current=current.o).z,isSubject=!isSubject}while(!current.v);stream.lineEnd()}}}function link$1(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}rotationIdentity.invert=rotationIdentity;var sum$1=adder();function polygonContains(polygon,point){var lambda=point[0],phi=point[1],normal=[sin$1(lambda),-cos$1(lambda),0],angle=0,winding=0;sum$1.reset();for(var i=0,n=polygon.length;i<n;++i)if(m=(ring=polygon[i]).length)for(var ring,m,point0=ring[m-1],lambda0=point0[0],phi0=point0[1]/2+quarterPi,sinPhi0=sin$1(phi0),cosPhi0=cos$1(phi0),j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=point1[0],phi1=point1[1]/2+quarterPi,sinPhi1=sin$1(phi1),cosPhi1=cos$1(phi1),delta=lambda1-lambda0,sign$$1=delta>=0?1:-1,absDelta=sign$$1*delta,antimeridian=absDelta>pi$3,k=sinPhi0*sinPhi1;if(sum$1.add(atan2(k*sign$$1*sin$1(absDelta),cosPhi0*cosPhi1+k*cos$1(absDelta))),angle+=antimeridian?delta+sign$$1*tau$3:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian(point0),cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^delta>=0?-1:1)*asin(intersection[2]);(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1)}}return(angle<-1e-6||angle<1e-6&&sum$1<-1e-6)^1&winding}function clip(pointVisible,clipLine,interpolate,start){return function(sink){var polygon,segments,ring,line=clipLine(sink),ringBuffer=clipBuffer(),ringSink=clipLine(ringBuffer),polygonStarted=!1,clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=merge(segments);var startInside=polygonContains(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted=!0),clipRejoin(segments,compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){sink.polygonStart(),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),sink.polygonEnd()}};function point(lambda,phi){pointVisible(lambda,phi)&&sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]),ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var i,m,segment,point,clean=ringSink.clean(),ringSegments=ringBuffer.result(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){if((m=(segment=ringSegments[0]).length-1)>0){for(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);sink.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}return clip}}function validSegment(segment){return segment.length>1}function compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-halfPi$2-1e-6:halfPi$2-a[1])-((b=b.x)[0]<0?b[1]-halfPi$2-1e-6:halfPi$2-b[1])}var clipAntimeridian=clip((function(){return!0}),(function clipAntimeridianLine(stream){var clean,lambda0=NaN,phi0=NaN,sign0=NaN;return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?pi$3:-pi$3,delta=abs(lambda1-lambda0);abs(delta-pi$3)<1e-6?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?halfPi$2:-halfPi$2),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=pi$3&&(abs(lambda0-sign0)<1e-6&&(lambda0-=1e-6*sign0),abs(lambda1-sign1)<1e-6&&(lambda1-=1e-6*sign1),phi0=function clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=sin$1(lambda0-lambda1);return abs(sinLambda0Lambda1)>1e-6?atan((sin$1(phi0)*(cosPhi1=cos$1(phi1))*sin$1(lambda1)-sin$1(phi1)*(cosPhi0=cos$1(phi0))*sin$1(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}(lambda0,phi0,lambda1,phi1),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN},clean:function(){return 2-clean}}}),(function clipAntimeridianInterpolate(from,to,direction,stream){var phi;if(null==from)phi=direction*halfPi$2,stream.point(-pi$3,phi),stream.point(0,phi),stream.point(pi$3,phi),stream.point(pi$3,0),stream.point(pi$3,-phi),stream.point(0,-phi),stream.point(-pi$3,-phi),stream.point(-pi$3,0),stream.point(-pi$3,phi);else if(abs(from[0]-to[0])>1e-6){var lambda=from[0]<to[0]?pi$3:-pi$3;phi=direction*lambda/2,stream.point(-lambda,phi),stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1])}),[-pi$3,-halfPi$2]);function clipCircle(radius){var cr=cos$1(radius),delta=6*radians,smallRadius=cr>0,notHemisphere=abs(cr)>1e-6;function visible(lambda,phi){return cos$1(lambda)*cos$1(phi)>cr}function intersect(a,b,two){var n1=[1,0,0],n2=cartesianCross(cartesian(a),cartesian(b)),n2n2=cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=cartesianCross(n1,n2),A=cartesianScale(n1,c1);cartesianAddInPlace(A,cartesianScale(n2,c2));var u=n1xn2,w=cartesianDot(A,u),uu=cartesianDot(u,u),t2=w*w-uu*(cartesianDot(A,A)-1);if(!(t2<0)){var t=sqrt(t2),q=cartesianScale(u,(-w-t)/uu);if(cartesianAddInPlace(q,A),q=spherical(q),!two)return q;var z,lambda0=a[0],lambda1=b[0],phi0=a[1],phi1=b[1];lambda1<lambda0&&(z=lambda0,lambda0=lambda1,lambda1=z);var delta=lambda1-lambda0,polar=abs(delta-pi$3)<1e-6;if(!polar&&phi1<phi0&&(z=phi0,phi0=phi1,phi1=z),polar||delta<1e-6?polar?phi0+phi1>0^q[1]<(abs(q[0]-lambda0)<1e-6?phi0:phi1):phi0<=q[1]&&q[1]<=phi1:delta>pi$3^(lambda0<=q[0]&&q[0]<=lambda1)){var q1=cartesianScale(u,(-w+t)/uu);return cartesianAddInPlace(q1,A),[q,spherical(q1)]}}}function code(lambda,phi){var r=smallRadius?radius:pi$3-radius,code=0;return lambda<-r?code|=1:lambda>r&&(code|=2),phi<-r?code|=4:phi>r&&(code|=8),code}return clip(visible,(function clipLine(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(lambda,phi){var point2,point1=[lambda,phi],v=visible(lambda,phi),c=smallRadius?v?0:code(lambda,phi):v?code(lambda+(lambda<0?pi$3:-pi$3),phi):0;if(!point0&&(v00=v0=v)&&stream.lineStart(),v!==v0&&(!(point2=intersect(point0,point1))||pointEqual(point0,point2)||pointEqual(point1,point2))&&(point1[0]+=1e-6,point1[1]+=1e-6,v=visible(point1[0],point1[1])),v!==v0)clean=0,v?(stream.lineStart(),point2=intersect(point1,point0),stream.point(point2[0],point2[1])):(point2=intersect(point0,point1),stream.point(point2[0],point2[1]),stream.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(stream.lineStart(),stream.point(t[0][0],t[0][1]),stream.point(t[1][0],t[1][1]),stream.lineEnd()):(stream.point(t[1][0],t[1][1]),stream.lineEnd(),stream.lineStart(),stream.point(t[0][0],t[0][1])))}!v||point0&&pointEqual(point0,point1)||stream.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&stream.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}}),(function interpolate(from,to,direction,stream){circleStream(stream,radius,delta,direction,from,to)}),smallRadius?[0,-radius]:[-pi$3,radius-pi$3])}function clipRectangle(x0,y0,x1,y1){function visible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function interpolate(from,to,direction,stream){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoint(from,to)<0^direction>0)do{stream.point(0===a||3===a?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1);else stream.point(to[0],to[1])}function corner(p,direction){return abs(p[0]-x0)<1e-6?direction>0?0:3:abs(p[0]-x1)<1e-6?direction>0?2:1:abs(p[1]-y0)<1e-6?direction>0?1:0:direction>0?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}return function(stream){var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,activeStream=stream,bufferStream=clipBuffer(),clipStream={point:point,lineStart:function lineStart(){clipStream.point=linePoint,polygon&&polygon.push(ring=[]),first=!0,v_=!1,x_=y_=NaN},lineEnd:function lineEnd(){segments&&(linePoint(x__,y__),v__&&v_&&bufferStream.rejoin(),segments.push(bufferStream.result())),clipStream.point=point,v_&&activeStream.lineEnd()},polygonStart:function polygonStart(){activeStream=bufferStream,segments=[],polygon=[],clean=!0},polygonEnd:function polygonEnd(){var startInside=function polygonInside(){for(var winding=0,i=0,n=polygon.length;i<n;++i)for(var a0,a1,ring=polygon[i],j=1,m=ring.length,point=ring[0],b0=point[0],b1=point[1];j<m;++j)a0=b0,a1=b1,point=ring[j],b0=point[0],b1=point[1],a1<=y1?b1>y1&&(b0-a0)*(y1-a1)>(b1-a1)*(x0-a0)&&++winding:b1<=y1&&(b0-a0)*(y1-a1)<(b1-a1)*(x0-a0)&&--winding;return winding}(),cleanInside=clean&&startInside,visible=(segments=merge(segments)).length;(cleanInside||visible)&&(stream.polygonStart(),cleanInside&&(stream.lineStart(),interpolate(null,null,1,stream),stream.lineEnd()),visible&&clipRejoin(segments,compareIntersection,startInside,interpolate,stream),stream.polygonEnd()),activeStream=stream,segments=polygon=ring=null}};function point(x,y){visible(x,y)&&activeStream.point(x,y)}function linePoint(x,y){var v=visible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(activeStream.lineStart(),activeStream.point(x,y));else if(v&&v_)activeStream.point(x,y);else{var a=[x_=Math.max(-1e9,Math.min(1e9,x_)),y_=Math.max(-1e9,Math.min(1e9,y_))],b=[x=Math.max(-1e9,Math.min(1e9,x)),y=Math.max(-1e9,Math.min(1e9,y))];!function clipLine(a,b,x0,y0,x1,y1){var r,ax=a[0],ay=a[1],t0=0,t1=1,dx=b[0]-ax,dy=b[1]-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return t0>0&&(a[0]=ax+t0*dx,a[1]=ay+t0*dy),t1<1&&(b[0]=ax+t1*dx,b[1]=ay+t1*dy),!0}}}}}(a,b,x0,y0,x1,y1)?v&&(activeStream.lineStart(),activeStream.point(x,y),clean=!1):(v_||(activeStream.lineStart(),activeStream.point(a[0],a[1])),activeStream.point(b[0],b[1]),v||activeStream.lineEnd(),clean=!1)}x_=x,y_=y,v_=v}return clipStream}}var lambda0$2,sinPhi0$1,cosPhi0$1,lengthSum=adder(),lengthStream={sphere:noop$1,point:noop$1,lineStart:function lengthLineStart(){lengthStream.point=lengthPointFirst,lengthStream.lineEnd=lengthLineEnd},lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1};function lengthLineEnd(){lengthStream.point=lengthStream.lineEnd=noop$1}function lengthPointFirst(lambda,phi){lambda0$2=lambda*=radians,sinPhi0$1=sin$1(phi*=radians),cosPhi0$1=cos$1(phi),lengthStream.point=lengthPoint}function lengthPoint(lambda,phi){lambda*=radians;var sinPhi=sin$1(phi*=radians),cosPhi=cos$1(phi),delta=abs(lambda-lambda0$2),cosDelta=cos$1(delta),x=cosPhi*sin$1(delta),y=cosPhi0$1*sinPhi-sinPhi0$1*cosPhi*cosDelta,z=sinPhi0$1*sinPhi+cosPhi0$1*cosPhi*cosDelta;lengthSum.add(atan2(sqrt(x*x+y*y),z)),lambda0$2=lambda,sinPhi0$1=sinPhi,cosPhi0$1=cosPhi}function length$1(object){return lengthSum.reset(),geoStream(object,lengthStream),+lengthSum}var coordinates=[null,null],object$1={type:"LineString",coordinates:coordinates};function distance(a,b){return coordinates[0]=a,coordinates[1]=b,length$1(object$1)}var containsObjectType={Feature:function(object,point){return containsGeometry(object.geometry,point)},FeatureCollection:function(object,point){for(var features=object.features,i=-1,n=features.length;++i<n;)if(containsGeometry(features[i].geometry,point))return!0;return!1}},containsGeometryType={Sphere:function(){return!0},Point:function(object,point){return containsPoint(object.coordinates,point)},MultiPoint:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsPoint(coordinates[i],point))return!0;return!1},LineString:function(object,point){return containsLine(object.coordinates,point)},MultiLineString:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsLine(coordinates[i],point))return!0;return!1},Polygon:function(object,point){return containsPolygon(object.coordinates,point)},MultiPolygon:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsPolygon(coordinates[i],point))return!0;return!1},GeometryCollection:function(object,point){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)if(containsGeometry(geometries[i],point))return!0;return!1}};function containsGeometry(geometry,point){return!(!geometry||!containsGeometryType.hasOwnProperty(geometry.type))&&containsGeometryType[geometry.type](geometry,point)}function containsPoint(coordinates,point){return 0===distance(coordinates,point)}function containsLine(coordinates,point){var ab=distance(coordinates[0],coordinates[1]);return distance(coordinates[0],point)+distance(point,coordinates[1])<=ab+1e-6}function containsPolygon(coordinates,point){return!!polygonContains(coordinates.map(ringRadians),pointRadians(point))}function ringRadians(ring){return(ring=ring.map(pointRadians)).pop(),ring}function pointRadians(point){return[point[0]*radians,point[1]*radians]}function graticuleX(y0,y1,dy){var y=sequence(y0,y1-1e-6,dy).concat(y1);return function(x){return y.map((function(y){return[x,y]}))}}function graticuleY(x0,x1,dx){var x=sequence(x0,x1-1e-6,dx).concat(x1);return function(y){return x.map((function(x){return[x,y]}))}}function graticule(){var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return sequence(ceil(X0/DX)*DX,X1,DX).map(X).concat(sequence(ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(sequence(ceil(x0/dx)*dx,x1,dx).filter((function(x){return abs(x%DX)>1e-6})).map(x)).concat(sequence(ceil(y0/dy)*dy,y1,dy).filter((function(y){return abs(y%DY)>1e-6})).map(y))}return graticule.lines=function(){return lines().map((function(coordinates){return{type:"LineString",coordinates:coordinates}}))},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.extentMajor(_).extentMinor(_):graticule.extentMinor()},graticule.extentMajor=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.extentMinor=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.stepMajor(_).stepMinor(_):graticule.stepMinor()},graticule.stepMajor=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.stepMinor=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=graticuleX(y0,y1,90),y=graticuleY(x0,x1,precision),X=graticuleX(Y0,Y1,90),Y=graticuleY(X0,X1,precision),graticule):precision},graticule.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function identity$4(x){return x}var x00,y00,x0$1,y0$1,areaSum$1=adder(),areaRingSum$1=adder(),areaStream$1={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaStream$1.lineStart=areaRingStart$1,areaStream$1.lineEnd=areaRingEnd$1},polygonEnd:function(){areaStream$1.lineStart=areaStream$1.lineEnd=areaStream$1.point=noop$1,areaSum$1.add(abs(areaRingSum$1)),areaRingSum$1.reset()},result:function(){var area=areaSum$1/2;return areaSum$1.reset(),area}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1}function areaPointFirst$1(x,y){areaStream$1.point=areaPoint$1,x00=x0$1=x,y00=y0$1=y}function areaPoint$1(x,y){areaRingSum$1.add(y0$1*x-x0$1*y),x0$1=x,y0$1=y}function areaRingEnd$1(){areaPoint$1(x00,y00)}var x00$1,y00$1,x0$3,y0$3,x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream$1={point:function boundsPoint$1(x,y){x<x0$2&&(x0$2=x),x>x1&&(x1=x),y<y0$2&&(y0$2=y),y>y1&&(y1=y)},lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var bounds=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),bounds}},X0$1=0,Y0$1=0,Z0$1=0,X1$1=0,Y1$1=0,Z1$1=0,X2$1=0,Y2$1=0,Z2$1=0,centroidStream$1={point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.point=centroidPoint$1,centroidStream$1.lineStart=centroidLineStart$1,centroidStream$1.lineEnd=centroidLineEnd$1},result:function(){var centroid=Z2$1?[X2$1/Z2$1,Y2$1/Z2$1]:Z1$1?[X1$1/Z1$1,Y1$1/Z1$1]:Z0$1?[X0$1/Z0$1,Y0$1/Z0$1]:[NaN,NaN];return X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=X2$1=Y2$1=Z2$1=0,centroid}};function centroidPoint$1(x,y){X0$1+=x,Y0$1+=y,++Z0$1}function centroidLineStart$1(){centroidStream$1.point=centroidPointFirstLine}function centroidPointFirstLine(x,y){centroidStream$1.point=centroidPointLine,centroidPoint$1(x0$3=x,y0$3=y)}function centroidPointLine(x,y){var dx=x-x0$3,dy=y-y0$3,z=sqrt(dx*dx+dy*dy);X1$1+=z*(x0$3+x)/2,Y1$1+=z*(y0$3+y)/2,Z1$1+=z,centroidPoint$1(x0$3=x,y0$3=y)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidPointFirstRing}function centroidRingEnd$1(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(x,y){centroidStream$1.point=centroidPointRing,centroidPoint$1(x00$1=x0$3=x,y00$1=y0$3=y)}function centroidPointRing(x,y){var dx=x-x0$3,dy=y-y0$3,z=sqrt(dx*dx+dy*dy);X1$1+=z*(x0$3+x)/2,Y1$1+=z*(y0$3+y)/2,Z1$1+=z,X2$1+=(z=y0$3*x-x0$3*y)*(x0$3+x),Y2$1+=z*(y0$3+y),Z2$1+=3*z,centroidPoint$1(x0$3=x,y0$3=y)}function PathContext(context){this._context=context}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._context.moveTo(x,y),this._point=1;break;case 1:this._context.lineTo(x,y);break;default:this._context.moveTo(x+this._radius,y),this._context.arc(x,y,this._radius,0,tau$3)}},result:noop$1};var lengthRing,x00$2,y00$2,x0$4,y0$4,lengthSum$1=adder(),lengthStream$1={point:noop$1,lineStart:function(){lengthStream$1.point=lengthPointFirst$1},lineEnd:function(){lengthRing&&lengthPoint$1(x00$2,y00$2),lengthStream$1.point=noop$1},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var length=+lengthSum$1;return lengthSum$1.reset(),length}};function lengthPointFirst$1(x,y){lengthStream$1.point=lengthPoint$1,x00$2=x0$4=x,y00$2=y0$4=y}function lengthPoint$1(x,y){x0$4-=x,y0$4-=y,lengthSum$1.add(sqrt(x0$4*x0$4+y0$4*y0$4)),x0$4=x,y0$4=y}function PathString(){this._string=[]}function circle$1(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}function transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];return s.stream=stream,s}}function TransformStream(){}function fit(projection,fitBounds,object){var clip=projection.clipExtent&&projection.clipExtent();return projection.scale(150).translate([0,0]),null!=clip&&projection.clipExtent(null),geoStream(object,projection.stream(boundsStream$1)),fitBounds(boundsStream$1.result()),null!=clip&&projection.clipExtent(clip),projection}function fitExtent(projection,extent,object){return fit(projection,(function(b){var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],k=Math.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1])),x=+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2,y=+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}function fitSize(projection,size,object){return fitExtent(projection,[[0,0],size],object)}function fitWidth(projection,width,object){return fit(projection,(function(b){var w=+width,k=w/(b[1][0]-b[0][0]),x=(w-k*(b[1][0]+b[0][0]))/2,y=-k*b[0][1];projection.scale(150*k).translate([x,y])}),object)}function fitHeight(projection,height,object){return fit(projection,(function(b){var h=+height,k=h/(b[1][1]-b[0][1]),x=-k*b[0][0],y=(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}PathString.prototype={_radius:4.5,_circle:circle$1(4.5),pointRadius:function(_){return(_=+_)!==this._radius&&(this._radius=_,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._string.push("M",x,",",y),this._point=1;break;case 1:this._string.push("L",x,",",y);break;default:null==this._circle&&(this._circle=circle$1(this._radius)),this._string.push("M",x,",",y,this._circle)}},result:function(){if(this._string.length){var result=this._string.join("");return this._string=[],result}return null}},TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cosMinDistance=cos$1(30*radians);function resample(project,delta2){return+delta2?function resample$1(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*delta2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=sqrt(a*a+b*b+c*c),phi2=asin(c/=m),lambda2=abs(abs(c)-1)<1e-6||abs(lambda0-lambda1)<1e-6?(lambda0+lambda1)/2:atan2(b,a),p=project(lambda2,phi2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>delta2||abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,lambda0,a0,b0,c0,x2,y2,lambda2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream))}}return function(stream){var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0,resampleStream={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart(),resampleStream.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resampleStream.lineStart=lineStart}};function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resampleStream.point=linePoint,stream.lineStart()}function linePoint(lambda,phi){var c=cartesian([lambda,phi]),p=project(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0=p[0],y0=p[1],lambda0=lambda,a0=c[0],b0=c[1],c0=c[2],16,stream),stream.point(x0,y0)}function lineEnd(){resampleStream.point=point,stream.lineEnd()}function ringStart(){lineStart(),resampleStream.point=ringPoint,resampleStream.lineEnd=ringEnd}function ringPoint(lambda,phi){linePoint(lambda00=lambda,phi),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resampleStream.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,16,stream),resampleStream.lineEnd=lineEnd,lineEnd()}return resampleStream}}(project,delta2):function resampleNone(project){return transformer({point:function(x,y){x=project(x,y),this.stream.point(x[0],x[1])}})}(project)}var transformRadians=transformer({point:function(x,y){this.stream.point(x*radians,y*radians)}});function projection(project){return projectionMutator((function(){return project}))()}function projectionMutator(projectAt){var project,dx,dy,rotate,projectRotate,y0,x1,y1,cache,cacheStream,k=150,x=480,y=250,lambda=0,phi=0,deltaLambda=0,deltaPhi=0,deltaGamma=0,theta=null,preclip=clipAntimeridian,x0=null,postclip=identity$4,delta2=.5,projectResample=resample(projectTransform,delta2);function projection(point){return[(point=projectRotate(point[0]*radians,point[1]*radians))[0]*k+dx,dy-point[1]*k]}function invert(point){return(point=projectRotate.invert((point[0]-dx)/k,(dy-point[1])/k))&&[point[0]*degrees$1,point[1]*degrees$1]}function projectTransform(x,y){return[(x=project(x,y))[0]*k+dx,dy-x[1]*k]}function recenter(){projectRotate=compose(rotate=rotateRadians(deltaLambda,deltaPhi,deltaGamma),project);var center=project(lambda,phi);return dx=x-center[0]*k,dy=y+center[1]*k,reset()}function reset(){return cache=cacheStream=null,projection}return projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transformRadians(function transformRotate(rotate){return transformer({point:function(x,y){var r=rotate(x,y);return this.stream.point(r[0],r[1])}})}(rotate)(preclip(projectResample(postclip(cacheStream=stream)))))},projection.preclip=function(_){return arguments.length?(preclip=_,theta=void 0,reset()):preclip},projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},projection.clipAngle=function(_){return arguments.length?(preclip=+_?clipCircle(theta=_*radians):(theta=null,clipAntimeridian),reset()):theta*degrees$1},projection.clipExtent=function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,identity$4):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},projection.scale=function(_){return arguments.length?(k=+_,recenter()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],recenter()):[x,y]},projection.center=function(_){return arguments.length?(lambda=_[0]%360*radians,phi=_[1]%360*radians,recenter()):[lambda*degrees$1,phi*degrees$1]},projection.rotate=function(_){return arguments.length?(deltaLambda=_[0]%360*radians,deltaPhi=_[1]%360*radians,deltaGamma=_.length>2?_[2]%360*radians:0,recenter()):[deltaLambda*degrees$1,deltaPhi*degrees$1,deltaGamma*degrees$1]},projection.precision=function(_){return arguments.length?(projectResample=resample(projectTransform,delta2=_*_),reset()):sqrt(delta2)},projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)},projection.fitSize=function(size,object){return fitSize(projection,size,object)},projection.fitWidth=function(width,object){return fitWidth(projection,width,object)},projection.fitHeight=function(height,object){return fitHeight(projection,height,object)},function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,recenter()}}function conicProjection(projectAt){var phi0=0,phi1=pi$3/3,m=projectionMutator(projectAt),p=m(phi0,phi1);return p.parallels=function(_){return arguments.length?m(phi0=_[0]*radians,phi1=_[1]*radians):[phi0*degrees$1,phi1*degrees$1]},p}function conicEqualAreaRaw(y0,y1){var sy0=sin$1(y0),n=(sy0+sin$1(y1))/2;if(abs(n)<1e-6)return function cylindricalEqualAreaRaw(phi0){var cosPhi0=cos$1(phi0);function forward(lambda,phi){return[lambda*cosPhi0,sin$1(phi)/cosPhi0]}return forward.invert=function(x,y){return[x/cosPhi0,asin(y*cosPhi0)]},forward}(y0);var c=1+sy0*(2*n-sy0),r0=sqrt(c)/n;function project(x,y){var r=sqrt(c-2*n*sin$1(y))/n;return[r*sin$1(x*=n),r0-r*cos$1(x)]}return project.invert=function(x,y){var r0y=r0-y;return[atan2(x,abs(r0y))/n*sign(r0y),asin((c-(x*x+r0y*r0y)*n*n)/(2*n))]},project}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function azimuthalRaw(scale){return function(x,y){var cx=cos$1(x),cy=cos$1(y),k=scale(cx*cy);return[k*cy*sin$1(x),k*sin$1(y)]}}function azimuthalInvert(angle){return function(x,y){var z=sqrt(x*x+y*y),c=angle(z),sc=sin$1(c),cc=cos$1(c);return[atan2(x*sc,z*cc),asin(z&&y*sc/z)]}}var azimuthalEqualAreaRaw=azimuthalRaw((function(cxcy){return sqrt(2/(1+cxcy))}));azimuthalEqualAreaRaw.invert=azimuthalInvert((function(z){return 2*asin(z/2)}));var azimuthalEquidistantRaw=azimuthalRaw((function(c){return(c=acos(c))&&c/sin$1(c)}));function mercatorRaw(lambda,phi){return[lambda,log(tan((halfPi$2+phi)/2))]}function mercatorProjection(project){var y0,x1,y1,m=projection(project),center=m.center,scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,x0=null;function reclip(){var k=pi$3*scale(),t=m(rotation(m.rotate()).invert([0,0]));return clipExtent(null==x0?[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]]:project===mercatorRaw?[[Math.max(t[0]-k,x0),y0],[Math.min(t[0]+k,x1),y1]]:[[x0,Math.max(t[1]-k,y0)],[x1,Math.min(t[1]+k,y1)]])}return m.scale=function(_){return arguments.length?(scale(_),reclip()):scale()},m.translate=function(_){return arguments.length?(translate(_),reclip()):translate()},m.center=function(_){return arguments.length?(center(_),reclip()):center()},m.clipExtent=function(_){return arguments.length?(null==_?x0=y0=x1=y1=null:(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reclip()):null==x0?null:[[x0,y0],[x1,y1]]},reclip()}function tany(y){return tan((halfPi$2+y)/2)}function conicConformalRaw(y0,y1){var cy0=cos$1(y0),n=y0===y1?sin$1(y0):log(cy0/cos$1(y1))/log(tany(y1)/tany(y0)),f=cy0*pow(tany(y0),n)/n;if(!n)return mercatorRaw;function project(x,y){f>0?y<1e-6-halfPi$2&&(y=1e-6-halfPi$2):y>halfPi$2-1e-6&&(y=halfPi$2-1e-6);var r=f/pow(tany(y),n);return[r*sin$1(n*x),f-r*cos$1(n*x)]}return project.invert=function(x,y){var fy=f-y,r=sign(n)*sqrt(x*x+fy*fy);return[atan2(x,abs(fy))/n*sign(fy),2*atan(pow(f/r,1/n))-halfPi$2]},project}function equirectangularRaw(lambda,phi){return[lambda,phi]}function conicEquidistantRaw(y0,y1){var cy0=cos$1(y0),n=y0===y1?sin$1(y0):(cy0-cos$1(y1))/(y1-y0),g=cy0/n+y0;if(abs(n)<1e-6)return equirectangularRaw;function project(x,y){var gy=g-y,nx=n*x;return[gy*sin$1(nx),g-gy*cos$1(nx)]}return project.invert=function(x,y){var gy=g-y;return[atan2(x,abs(gy))/n*sign(gy),g-sign(n)*sqrt(x*x+gy*gy)]},project}function gnomonicRaw(x,y){var cy=cos$1(y),k=cos$1(x)*cy;return[cy*sin$1(x)/k,sin$1(y)/k]}function scaleTranslate(kx,ky,tx,ty){return 1===kx&&1===ky&&0===tx&&0===ty?identity$4:transformer({point:function(x,y){this.stream.point(x*kx+tx,y*ky+ty)}})}function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(phi4*(.003971*phi2-.001529*phi4)-.013791)),phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))]}function orthographicRaw(x,y){return[cos$1(y)*sin$1(x),sin$1(y)]}function stereographicRaw(x,y){var cy=cos$1(y),k=1+cos$1(x)*cy;return[cy*sin$1(x)/k,sin$1(y)/k]}function transverseMercatorRaw(lambda,phi){return[log(tan((halfPi$2+phi)/2)),-lambda]}function defaultSeparation(a,b){return a.parent===b.parent?1:2}function meanXReduce(x,c){return x+c.x}function maxYReduce(y,c){return Math.max(y,c.y)}function count(node){var sum=0,children=node.children,i=children&&children.length;if(i)for(;--i>=0;)sum+=children[i].value;else sum=1;node.value=sum}function hierarchy(data,children){var node,child,childs,i,n,root=new Node(data),valued=+data.value&&(root.value=data.value),nodes=[root];for(null==children&&(children=defaultChildren);node=nodes.pop();)if(valued&&(node.value=+node.data.value),(childs=children(node.data))&&(n=childs.length))for(node.children=new Array(n),i=n-1;i>=0;--i)nodes.push(child=node.children[i]=new Node(childs[i])),child.parent=node,child.depth=node.depth+1;return root.eachBefore(computeHeight)}function defaultChildren(d){return d.children}function copyData(node){node.data=node.data.data}function computeHeight(node){var height=0;do{node.height=height}while((node=node.parent)&&node.height<++height)}function Node(data){this.data=data,this.depth=this.height=0,this.parent=null}azimuthalEquidistantRaw.invert=azimuthalInvert((function(z){return z})),mercatorRaw.invert=function(x,y){return[x,2*atan(exp(y))-halfPi$2]},equirectangularRaw.invert=equirectangularRaw,gnomonicRaw.invert=azimuthalInvert(atan),naturalEarth1Raw.invert=function(x,y){var delta,phi=y,i=25;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))-y)/(1.007226+phi2*(.045255+phi4*(.259866*phi2-.311325-.005916*11*phi4)))}while(abs(delta)>1e-6&&--i>0);return[x/(.8707+(phi2=phi*phi)*(phi2*(phi2*phi2*phi2*(.003971-.001529*phi2)-.013791)-.131979)),phi]},orthographicRaw.invert=azimuthalInvert(asin),stereographicRaw.invert=azimuthalInvert((function(z){return 2*atan(z)})),transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(exp(x))-halfPi$2]},Node.prototype=hierarchy.prototype={constructor:Node,count:function node_count(){return this.eachAfter(count)},each:function node_each(callback){var current,children,i,n,node=this,next=[node];do{for(current=next.reverse(),next=[];node=current.pop();)if(callback(node),children=node.children)for(i=0,n=children.length;i<n;++i)next.push(children[i])}while(next.length);return this},eachAfter:function node_eachAfter(callback){for(var children,i,n,node=this,nodes=[node],next=[];node=nodes.pop();)if(next.push(node),children=node.children)for(i=0,n=children.length;i<n;++i)nodes.push(children[i]);for(;node=next.pop();)callback(node);return this},eachBefore:function node_eachBefore(callback){for(var children,i,node=this,nodes=[node];node=nodes.pop();)if(callback(node),children=node.children)for(i=children.length-1;i>=0;--i)nodes.push(children[i]);return this},sum:function node_sum(value){return this.eachAfter((function(node){for(var sum=+value(node.data)||0,children=node.children,i=children&&children.length;--i>=0;)sum+=children[i].value;node.value=sum}))},sort:function node_sort(compare){return this.eachBefore((function(node){node.children&&node.children.sort(compare)}))},path:function node_path(end){for(var start=this,ancestor=function leastCommonAncestor(a,b){if(a===b)return a;var aNodes=a.ancestors(),bNodes=b.ancestors(),c=null;for(a=aNodes.pop(),b=bNodes.pop();a===b;)c=a,a=aNodes.pop(),b=bNodes.pop();return c}(start,end),nodes=[start];start!==ancestor;)start=start.parent,nodes.push(start);for(var k=nodes.length;end!==ancestor;)nodes.splice(k,0,end),end=end.parent;return nodes},ancestors:function node_ancestors(){for(var node=this,nodes=[node];node=node.parent;)nodes.push(node);return nodes},descendants:function node_descendants(){var nodes=[];return this.each((function(node){nodes.push(node)})),nodes},leaves:function node_leaves(){var leaves=[];return this.eachBefore((function(node){node.children||leaves.push(node)})),leaves},links:function node_links(){var root=this,links=[];return root.each((function(node){node!==root&&links.push({source:node.parent,target:node})})),links},copy:function node_copy(){return hierarchy(this).eachBefore(copyData)}};var slice$3=Array.prototype.slice;function enclose(circles){for(var p,e,i=0,n=(circles=function shuffle$1(array){for(var t,i,m=array.length;m;)i=Math.random()*m--|0,t=array[m],array[m]=array[i],array[i]=t;return array}(slice$3.call(circles))).length,B=[];i<n;)p=circles[i],e&&enclosesWeak(e,p)?++i:(e=encloseBasis(B=extendBasis(B,p)),i=0);return e}function extendBasis(B,p){var i,j;if(enclosesWeakAll(p,B))return[p];for(i=0;i<B.length;++i)if(enclosesNot(p,B[i])&&enclosesWeakAll(encloseBasis2(B[i],p),B))return[B[i],p];for(i=0;i<B.length-1;++i)for(j=i+1;j<B.length;++j)if(enclosesNot(encloseBasis2(B[i],B[j]),p)&&enclosesNot(encloseBasis2(B[i],p),B[j])&&enclosesNot(encloseBasis2(B[j],p),B[i])&&enclosesWeakAll(encloseBasis3(B[i],B[j],p),B))return[B[i],B[j],p];throw new Error}function enclosesNot(a,b){var dr=a.r-b.r,dx=b.x-a.x,dy=b.y-a.y;return dr<0||dr*dr<dx*dx+dy*dy}function enclosesWeak(a,b){var dr=a.r-b.r+1e-6,dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy}function enclosesWeakAll(a,B){for(var i=0;i<B.length;++i)if(!enclosesWeak(a,B[i]))return!1;return!0}function encloseBasis(B){switch(B.length){case 1:return function encloseBasis1(a){return{x:a.x,y:a.y,r:a.r}}(B[0]);case 2:return encloseBasis2(B[0],B[1]);case 3:return encloseBasis3(B[0],B[1],B[2])}}function encloseBasis2(a,b){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x21=x2-x1,y21=y2-y1,r21=r2-r1,l=Math.sqrt(x21*x21+y21*y21);return{x:(x1+x2+x21/l*r21)/2,y:(y1+y2+y21/l*r21)/2,r:(l+r1+r2)/2}}function encloseBasis3(a,b,c){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x3=c.x,y3=c.y,r3=c.r,a2=x1-x2,a3=x1-x3,b2=y1-y2,b3=y1-y3,c2=r2-r1,c3=r3-r1,d1=x1*x1+y1*y1-r1*r1,d2=d1-x2*x2-y2*y2+r2*r2,d3=d1-x3*x3-y3*y3+r3*r3,ab=a3*b2-a2*b3,xa=(b2*d3-b3*d2)/(2*ab)-x1,xb=(b3*c2-b2*c3)/ab,ya=(a3*d2-a2*d3)/(2*ab)-y1,yb=(a2*c3-a3*c2)/ab,A=xb*xb+yb*yb-1,B=2*(r1+xa*xb+ya*yb),C=xa*xa+ya*ya-r1*r1,r=-(A?(B+Math.sqrt(B*B-4*A*C))/(2*A):C/B);return{x:x1+xa+xb*r,y:y1+ya+yb*r,r:r}}function place(a,b,c){var ax=a.x,ay=a.y,da=b.r+c.r,db=a.r+c.r,dx=b.x-ax,dy=b.y-ay,dc=dx*dx+dy*dy;if(dc){var x=.5+((db*=db)-(da*=da))/(2*dc),y=Math.sqrt(Math.max(0,2*da*(db+dc)-(db-=dc)*db-da*da))/(2*dc);c.x=ax+x*dx+y*dy,c.y=ay+x*dy-y*dx}else c.x=ax+db,c.y=ay}function intersects(a,b){var dx=b.x-a.x,dy=b.y-a.y,dr=a.r+b.r;return dr*dr-1e-6>dx*dx+dy*dy}function score(node){var a=node._,b=node.next._,ab=a.r+b.r,dx=(a.x*b.r+b.x*a.r)/ab,dy=(a.y*b.r+b.y*a.r)/ab;return dx*dx+dy*dy}function Node$1(circle){this._=circle,this.next=null,this.previous=null}function packEnclose(circles){if(!(n=circles.length))return 0;var a,b,c,n,aa,ca,i,j,k,sj,sk;if((a=circles[0]).x=0,a.y=0,!(n>1))return a.r;if(b=circles[1],a.x=-b.r,b.x=a.r,b.y=0,!(n>2))return a.r+b.r;place(b,a,c=circles[2]),a=new Node$1(a),b=new Node$1(b),c=new Node$1(c),a.next=c.previous=b,b.next=a.previous=c,c.next=b.previous=a;pack:for(i=3;i<n;++i){place(a._,b._,c=circles[i]),c=new Node$1(c),j=b.next,k=a.previous,sj=b._.r,sk=a._.r;do{if(sj<=sk){if(intersects(j._,c._)){b=j,a.next=b,b.previous=a,--i;continue pack}sj+=j._.r,j=j.next}else{if(intersects(k._,c._)){(a=k).next=b,b.previous=a,--i;continue pack}sk+=k._.r,k=k.previous}}while(j!==k.next);for(c.previous=a,c.next=b,a.next=b.previous=b=c,aa=score(a);(c=c.next)!==b;)(ca=score(c))<aa&&(a=c,aa=ca);b=a.next}for(a=[b._],c=b;(c=c.next)!==b;)a.push(c._);for(c=enclose(a),i=0;i<n;++i)(a=circles[i]).x-=c.x,a.y-=c.y;return c.r}function optional(f){return null==f?null:required(f)}function required(f){if("function"!=typeof f)throw new Error;return f}function constantZero(){return 0}function constant$8(x){return function(){return x}}function defaultRadius$1(d){return Math.sqrt(d.value)}function radiusLeaf(radius){return function(node){node.children||(node.r=Math.max(0,+radius(node)||0))}}function packChildren(padding,k){return function(node){if(children=node.children){var children,i,e,n=children.length,r=padding(node)*k||0;if(r)for(i=0;i<n;++i)children[i].r+=r;if(e=packEnclose(children),r)for(i=0;i<n;++i)children[i].r-=r;node.r=e+r}}}function translateChild(k){return function(node){var parent=node.parent;node.r*=k,parent&&(node.x=parent.x+k*node.x,node.y=parent.y+k*node.y)}}function roundNode(node){node.x0=Math.round(node.x0),node.y0=Math.round(node.y0),node.x1=Math.round(node.x1),node.y1=Math.round(node.y1)}function treemapDice(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(x1-x0)/parent.value;++i<n;)(node=nodes[i]).y0=y0,node.y1=y1,node.x0=x0,node.x1=x0+=node.value*k}var preroot={depth:-1},ambiguous={};function defaultId(d){return d.id}function defaultParentId(d){return d.parentId}function defaultSeparation$1(a,b){return a.parent===b.parent?1:2}function nextLeft(v){var children=v.children;return children?children[0]:v.t}function nextRight(v){var children=v.children;return children?children[children.length-1]:v.t}function moveSubtree(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change,wp.s+=shift,wm.c+=change,wp.z+=shift,wp.m+=shift}function nextAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}function TreeNode(node,i){this._=node,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=i}function treemapSlice(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(y1-y0)/parent.value;++i<n;)(node=nodes[i]).x0=x0,node.x1=x1,node.y0=y0,node.y1=y0+=node.value*k}TreeNode.prototype=Object.create(Node.prototype);var phi=(1+Math.sqrt(5))/2;function squarifyRatio(ratio,parent,x0,y0,x1,y1){for(var row,nodeValue,dx,dy,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta,rows=[],nodes=parent.children,i0=0,i1=0,n=nodes.length,value=parent.value;i0<n;){dx=x1-x0,dy=y1-y0;do{sumValue=nodes[i1++].value}while(!sumValue&&i1<n);for(minValue=maxValue=sumValue,beta=sumValue*sumValue*(alpha=Math.max(dy/dx,dx/dy)/(value*ratio)),minRatio=Math.max(maxValue/beta,beta/minValue);i1<n;++i1){if(sumValue+=nodeValue=nodes[i1].value,nodeValue<minValue&&(minValue=nodeValue),nodeValue>maxValue&&(maxValue=nodeValue),beta=sumValue*sumValue*alpha,(newRatio=Math.max(maxValue/beta,beta/minValue))>minRatio){sumValue-=nodeValue;break}minRatio=newRatio}rows.push(row={value:sumValue,dice:dx<dy,children:nodes.slice(i0,i1)}),row.dice?treemapDice(row,x0,y0,x1,value?y0+=dy*sumValue/value:y1):treemapSlice(row,x0,y0,value?x0+=dx*sumValue/value:x1,y1),value-=sumValue,i0=i1}return rows}var squarify=function custom(ratio){function squarify(parent,x0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1)}return squarify.ratio=function(x){return custom((x=+x)>1?x:1)},squarify}(phi),resquarify=function custom(ratio){function resquarify(parent,x0,y0,x1,y1){if((rows=parent._squarify)&&rows.ratio===ratio)for(var rows,row,nodes,i,n,j=-1,m=rows.length,value=parent.value;++j<m;){for(nodes=(row=rows[j]).children,i=row.value=0,n=nodes.length;i<n;++i)row.value+=nodes[i].value;row.dice?treemapDice(row,x0,y0,x1,y0+=(y1-y0)*row.value/value):treemapSlice(row,x0,y0,x0+=(x1-x0)*row.value/value,y1),value-=row.value}else parent._squarify=rows=squarifyRatio(ratio,parent,x0,y0,x1,y1),rows.ratio=ratio}return resquarify.ratio=function(x){return custom((x=+x)>1?x:1)},resquarify}(phi);function cross$1(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function lexicographicOrder(a,b){return a[0]-b[0]||a[1]-b[1]}function computeUpperHullIndexes(points){for(var n=points.length,indexes=[0,1],size=2,i=2;i<n;++i){for(;size>1&&cross$1(points[indexes[size-2]],points[indexes[size-1]],points[i])<=0;)--size;indexes[size++]=i}return indexes.slice(0,size)}var slice$4=[].slice,noabort={};function Queue(size){this._size=size,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function poke$1(q){if(!q._start)try{!function start$1(q){for(;q._start=q._waiting&&q._active<q._size;){var i=q._ended+q._active,t=q._tasks[i],j=t.length-1,c=t[j];t[j]=end(q,i),--q._waiting,++q._active,t=c.apply(null,t),q._tasks[i]&&(q._tasks[i]=t||noabort)}}(q)}catch(e){if(q._tasks[q._ended+q._active-1])abort(q,e);else if(!q._data)throw e}}function end(q,i){return function(e,r){q._tasks[i]&&(--q._active,++q._ended,q._tasks[i]=null,null==q._error&&(null!=e?abort(q,e):(q._data[i]=r,q._waiting?poke$1(q):maybeNotify(q))))}}function abort(q,e){var t,i=q._tasks.length;for(q._error=e,q._data=void 0,q._waiting=NaN;--i>=0;)if((t=q._tasks[i])&&(q._tasks[i]=null,t.abort))try{t.abort()}catch(e){}q._active=NaN,maybeNotify(q)}function maybeNotify(q){if(!q._active&&q._call){var d=q._data;q._data=void 0,q._call(q._error,d)}}function queue(concurrency){if(null==concurrency)concurrency=1/0;else if(!((concurrency=+concurrency)>=1))throw new Error("invalid concurrency");return new Queue(concurrency)}function defaultSource$1(){return Math.random()}Queue.prototype=queue.prototype={constructor:Queue,defer:function(callback){if("function"!=typeof callback)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var t=slice$4.call(arguments,1);return t.push(callback),++this._waiting,this._tasks.push(t),poke$1(this),this},abort:function(){return null==this._error&&abort(this,new Error("abort")),this},await:function(callback){if("function"!=typeof callback)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(error,results){callback.apply(null,[error].concat(results))},maybeNotify(this),this},awaitAll:function(callback){if("function"!=typeof callback)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=callback,maybeNotify(this),this}};var uniform=function sourceRandomUniform(source){function randomUniform(min,max){return min=null==min?0:+min,max=null==max?1:+max,1===arguments.length?(max=min,min=0):max-=min,function(){return source()*max+min}}return randomUniform.source=sourceRandomUniform,randomUniform}(defaultSource$1),normal=function sourceRandomNormal(source){function randomNormal(mu,sigma){var x,r;return mu=null==mu?0:+mu,sigma=null==sigma?1:+sigma,function(){var y;if(null!=x)y=x,x=null;else do{x=2*source()-1,y=2*source()-1,r=x*x+y*y}while(!r||r>1);return mu+sigma*y*Math.sqrt(-2*Math.log(r)/r)}}return randomNormal.source=sourceRandomNormal,randomNormal}(defaultSource$1),logNormal=function sourceRandomLogNormal(source){function randomLogNormal(){var randomNormal=normal.source(source).apply(this,arguments);return function(){return Math.exp(randomNormal())}}return randomLogNormal.source=sourceRandomLogNormal,randomLogNormal}(defaultSource$1),irwinHall=function sourceRandomIrwinHall(source){function randomIrwinHall(n){return function(){for(var sum=0,i=0;i<n;++i)sum+=source();return sum}}return randomIrwinHall.source=sourceRandomIrwinHall,randomIrwinHall}(defaultSource$1),bates=function sourceRandomBates(source){function randomBates(n){var randomIrwinHall=irwinHall.source(source)(n);return function(){return randomIrwinHall()/n}}return randomBates.source=sourceRandomBates,randomBates}(defaultSource$1),exponential$1=function sourceRandomExponential(source){function randomExponential(lambda){return function(){return-Math.log(1-source())/lambda}}return randomExponential.source=sourceRandomExponential,randomExponential}(defaultSource$1);function request(url,callback){var request,mimeType,response,responseType,event=dispatch("beforesend","progress","load","error"),headers=map$1(),xhr=new XMLHttpRequest,user=null,password=null,timeout=0;function respond(o){var result,status=xhr.status;if(!status&&function hasResponse(xhr){var type=xhr.responseType;return type&&"text"!==type?xhr.response:xhr.responseText}(xhr)||status>=200&&status<300||304===status){if(response)try{result=response.call(request,xhr)}catch(e){return void event.call("error",request,e)}else result=xhr;event.call("load",request,result)}else event.call("error",request,o)}if("undefined"!=typeof XDomainRequest&&!("withCredentials"in xhr)&&/^(http(s)?:)?\/\//.test(url)&&(xhr=new XDomainRequest),"onload"in xhr?xhr.onload=xhr.onerror=xhr.ontimeout=respond:xhr.onreadystatechange=function(o){xhr.readyState>3&&respond(o)},xhr.onprogress=function(e){event.call("progress",request,e)},request={header:function(name,value){return name=(name+"").toLowerCase(),arguments.length<2?headers.get(name):(null==value?headers.remove(name):headers.set(name,value+""),request)},mimeType:function(value){return arguments.length?(mimeType=null==value?null:value+"",request):mimeType},responseType:function(value){return arguments.length?(responseType=value,request):responseType},timeout:function(value){return arguments.length?(timeout=+value,request):timeout},user:function(value){return arguments.length<1?user:(user=null==value?null:value+"",request)},password:function(value){return arguments.length<1?password:(password=null==value?null:value+"",request)},response:function(value){return response=value,request},get:function(data,callback){return request.send("GET",data,callback)},post:function(data,callback){return request.send("POST",data,callback)},send:function(method,data,callback){return xhr.open(method,url,!0,user,password),null==mimeType||headers.has("accept")||headers.set("accept",mimeType+",*/*"),xhr.setRequestHeader&&headers.each((function(value,name){xhr.setRequestHeader(name,value)})),null!=mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(mimeType),null!=responseType&&(xhr.responseType=responseType),timeout>0&&(xhr.timeout=timeout),null==callback&&"function"==typeof data&&(callback=data,data=null),null!=callback&&1===callback.length&&(callback=function fixCallback(callback){return function(error,xhr){callback(null==error?xhr:null)}}(callback)),null!=callback&&request.on("error",callback).on("load",(function(xhr){callback(null,xhr)})),event.call("beforesend",request,xhr),xhr.send(null==data?null:data),request},abort:function(){return xhr.abort(),request},on:function(){var value=event.on.apply(event,arguments);return value===event?request:value}},null!=callback){if("function"!=typeof callback)throw new Error("invalid callback: "+callback);return request.get(callback)}return request}function type$1(defaultMimeType,response){return function(url,callback){var r=request(url).mimeType(defaultMimeType).response(response);if(null!=callback){if("function"!=typeof callback)throw new Error("invalid callback: "+callback);return r.get(callback)}return r}}var html=type$1("text/html",(function(xhr){return document.createRange().createContextualFragment(xhr.responseText)})),json=type$1("application/json",(function(xhr){return JSON.parse(xhr.responseText)})),text=type$1("text/plain",(function(xhr){return xhr.responseText})),xml=type$1("application/xml",(function(xhr){var xml=xhr.responseXML;if(!xml)throw new Error("parse error");return xml}));function dsv$1(defaultMimeType,parse){return function(url,row,callback){arguments.length<3&&(callback=row,row=null);var r=request(url).mimeType(defaultMimeType);return r.row=function(_){return arguments.length?r.response(responseOf(parse,row=_)):row},r.row(row),callback?r.get(callback):r}}function responseOf(parse,row){return function(request$$1){return parse(request$$1.responseText,row)}}var csv$1=dsv$1("text/csv",csvParse),tsv$1=dsv$1("text/tab-separated-values",tsvParse),array$2=Array.prototype,map$3=array$2.map,slice$5=array$2.slice,implicit={name:"implicit"};function ordinal(range){var index=map$1(),domain=[],unknown=implicit;function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}return range=null==range?[]:slice$5.call(range),scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=map$1();for(var d,key,i=-1,n=_.length;++i<n;)index.has(key=(d=_[i])+"")||index.set(key,domain.push(d));return scale},scale.range=function(_){return arguments.length?(range=slice$5.call(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal().domain(domain).range(range).unknown(unknown)},scale}function band(){var step,bandwidth,scale=ordinal().unknown(void 0),domain=scale.domain,ordinalRange=scale.range,range$$1=[0,1],round=!1,paddingInner=0,paddingOuter=0,align=.5;function rescale(){var n=domain().length,reverse=range$$1[1]<range$$1[0],start=range$$1[reverse-0],stop=range$$1[1-reverse];step=(stop-start)/Math.max(1,n-paddingInner+2*paddingOuter),round&&(step=Math.floor(step)),start+=(stop-start-step*(n-paddingInner))*align,bandwidth=step*(1-paddingInner),round&&(start=Math.round(start),bandwidth=Math.round(bandwidth));var values=sequence(n).map((function(i){return start+step*i}));return ordinalRange(reverse?values.reverse():values)}return delete scale.unknown,scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.range=function(_){return arguments.length?(range$$1=[+_[0],+_[1]],rescale()):range$$1.slice()},scale.rangeRound=function(_){return range$$1=[+_[0],+_[1]],round=!0,rescale()},scale.bandwidth=function(){return bandwidth},scale.step=function(){return step},scale.round=function(_){return arguments.length?(round=!!_,rescale()):round},scale.padding=function(_){return arguments.length?(paddingInner=paddingOuter=Math.max(0,Math.min(1,_)),rescale()):paddingInner},scale.paddingInner=function(_){return arguments.length?(paddingInner=Math.max(0,Math.min(1,_)),rescale()):paddingInner},scale.paddingOuter=function(_){return arguments.length?(paddingOuter=Math.max(0,Math.min(1,_)),rescale()):paddingOuter},scale.align=function(_){return arguments.length?(align=Math.max(0,Math.min(1,_)),rescale()):align},scale.copy=function(){return band().domain(domain()).range(range$$1).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)},rescale()}function constant$9(x){return function(){return x}}function number$2(x){return+x}var unit=[0,1];function deinterpolateLinear(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:constant$9(b)}function bimap(domain,range,deinterpolate,reinterpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=deinterpolate(d1,d0),r0=reinterpolate(r1,r0)):(d0=deinterpolate(d0,d1),r0=reinterpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap(domain,range,deinterpolate,reinterpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=deinterpolate(domain[i],domain[i+1]),r[i]=reinterpolate(range[i],range[i+1]);return function(x){var i=bisectRight(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp())}function continuous(deinterpolate,reinterpolate){var piecewise,output,input,domain=unit,range=unit,interpolate$$1=interpolateValue,clamp=!1;function rescale(){return piecewise=Math.min(domain.length,range.length)>2?polymap:bimap,output=input=null,scale}function scale(x){return(output||(output=piecewise(domain,range,clamp?function deinterpolateClamp(deinterpolate){return function(a,b){var d=deinterpolate(a=+a,b=+b);return function(x){return x<=a?0:x>=b?1:d(x)}}}(deinterpolate):deinterpolate,interpolate$$1)))(+x)}return scale.invert=function(y){return(input||(input=piecewise(range,domain,deinterpolateLinear,clamp?function reinterpolateClamp(reinterpolate){return function(a,b){var r=reinterpolate(a=+a,b=+b);return function(t){return t<=0?a:t>=1?b:r(t)}}}(reinterpolate):reinterpolate)))(+y)},scale.domain=function(_){return arguments.length?(domain=map$3.call(_,number$2),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=slice$5.call(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=slice$5.call(_),interpolate$$1=interpolateRound,rescale()},scale.clamp=function(_){return arguments.length?(clamp=!!_,rescale()):clamp},scale.interpolate=function(_){return arguments.length?(interpolate$$1=_,rescale()):interpolate$$1},rescale()}function linearish(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return ticks(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){return function tickFormat(domain,count,specifier){var precision,start=domain[0],stop=domain[domain.length-1],step=tickStep(start,stop,null==count?10:count);switch((specifier=formatSpecifier(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=precisionPrefix(step,value))||(specifier.precision=precision),exports.formatPrefix(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=precisionRound(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=precisionFixed(step))||(specifier.precision=precision-2*("%"===specifier.type))}return exports.format(specifier)}(domain(),count,specifier)},scale.nice=function(count){null==count&&(count=10);var step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1];return stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step),(step=tickIncrement(start,stop,count))>0?step=tickIncrement(start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step,count):step<0&&(step=tickIncrement(start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step,count)),step>0?(d[i0]=Math.floor(start/step)*step,d[i1]=Math.ceil(stop/step)*step,domain(d)):step<0&&(d[i0]=Math.ceil(start*step)/step,d[i1]=Math.floor(stop*step)/step,domain(d)),scale},scale}function nice(domain,interval){var t,i0=0,i1=(domain=domain.slice()).length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(t=i0,i0=i1,i1=t,t=x0,x0=x1,x1=t),domain[i0]=interval.floor(x0),domain[i1]=interval.ceil(x1),domain}function deinterpolate(a,b){return(b=Math.log(b/a))?function(x){return Math.log(x/a)/b}:constant$9(b)}function reinterpolate$1(a,b){return a<0?function(t){return-Math.pow(-b,t)*Math.pow(-a,1-t)}:function(t){return Math.pow(b,t)*Math.pow(a,1-t)}}function pow10(x){return isFinite(x)?+("1e"+x):x<0?0:x}function powp(base){return 10===base?pow10:base===Math.E?Math.exp:function(x){return Math.pow(base,x)}}function logp(base){return base===Math.E?Math.log:10===base&&Math.log10||2===base&&Math.log2||(base=Math.log(base),function(x){return Math.log(x)/base})}function reflect(f){return function(x){return-f(-x)}}function raise$1(x,exponent){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}function pow$1(){var exponent=1,scale=continuous((function deinterpolate(a,b){return(b=raise$1(b,exponent)-(a=raise$1(a,exponent)))?function(x){return(raise$1(x,exponent)-a)/b}:constant$9(b)}),(function reinterpolate(a,b){return b=raise$1(b,exponent)-(a=raise$1(a,exponent)),function(t){return raise$1(a+b*t,1/exponent)}})),domain=scale.domain;return scale.exponent=function(_){return arguments.length?(exponent=+_,domain(domain())):exponent},scale.copy=function(){return copy(scale,pow$1().exponent(exponent))},linearish(scale)}var t0$1=new Date,t1$1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=new Date(+date)),date}return interval.floor=interval,interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval((function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)}),(function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););}))},count&&(interval.count=function(start,end){return t0$1.setTime(+start),t1$1.setTime(+end),floori(t0$1),floori(t1$1),Math.floor(count(t0$1,t1$1))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var millisecond=newInterval((function(){}),(function(date,step){date.setTime(+date+step)}),(function(start,end){return end-start}));millisecond.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval((function(date){date.setTime(Math.floor(date/k)*k)}),(function(date,step){date.setTime(+date+step*k)}),(function(start,end){return(end-start)/k})):millisecond:null};var milliseconds=millisecond.range,second=newInterval((function(date){date.setTime(1e3*Math.floor(date/1e3))}),(function(date,step){date.setTime(+date+1e3*step)}),(function(start,end){return(end-start)/1e3}),(function(date){return date.getUTCSeconds()})),seconds=second.range,minute=newInterval((function(date){date.setTime(6e4*Math.floor(date/6e4))}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getMinutes()})),minutes=minute.range,hour=newInterval((function(date){var offset=6e4*date.getTimezoneOffset()%36e5;offset<0&&(offset+=36e5),date.setTime(36e5*Math.floor((+date-offset)/36e5)+offset)}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getHours()})),hours=hour.range,day=newInterval((function(date){date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/864e5}),(function(date){return date.getDate()-1})),days=day.range;function weekday(i){return newInterval((function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+7*step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/6048e5}))}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),sundays=sunday.range,mondays=monday.range,tuesdays=tuesday.range,wednesdays=wednesday.range,thursdays=thursday.range,fridays=friday.range,saturdays=saturday.range,month=newInterval((function(date){date.setDate(1),date.setHours(0,0,0,0)}),(function(date,step){date.setMonth(date.getMonth()+step)}),(function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),(function(date){return date.getMonth()})),months=month.range,year=newInterval((function(date){date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step)}),(function(start,end){return end.getFullYear()-start.getFullYear()}),(function(date){return date.getFullYear()}));year.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step*k)})):null};var years=year.range,utcMinute=newInterval((function(date){date.setUTCSeconds(0,0)}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getUTCMinutes()})),utcMinutes=utcMinute.range,utcHour=newInterval((function(date){date.setUTCMinutes(0,0,0)}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getUTCHours()})),utcHours=utcHour.range,utcDay=newInterval((function(date){date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+step)}),(function(start,end){return(end-start)/864e5}),(function(date){return date.getUTCDate()-1})),utcDays=utcDay.range;function utcWeekday(i){return newInterval((function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+7*step)}),(function(start,end){return(end-start)/6048e5}))}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcSundays=utcSunday.range,utcMondays=utcMonday.range,utcTuesdays=utcTuesday.range,utcWednesdays=utcWednesday.range,utcThursdays=utcThursday.range,utcFridays=utcFriday.range,utcSaturdays=utcSaturday.range,utcMonth=newInterval((function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCMonth(date.getUTCMonth()+step)}),(function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())}),(function(date){return date.getUTCMonth()})),utcMonths=utcMonth.range,utcYear=newInterval((function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)}),(function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function(date){return date.getUTCFullYear()}));utcYear.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)})):null};var utcYears=utcYear.range;function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newYear(y){return{y:y,m:0,d:1,H:0,M:0,S:0,L:0}}function formatLocale$1(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={a:function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]},A:function formatWeekday(d){return locale_weekdays[d.getDay()]},b:function formatShortMonth(d){return locale_shortMonths[d.getMonth()]},B:function formatMonth(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},utcFormats={a:function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]},A:function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]},b:function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]},B:function formatUTCMonth(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,newDate){return function(string){var week,day$$1,d=newYear(1900);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("p"in d&&(d.H=d.H%12+12*d.p),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day$$1=(week=utcDate(newYear(d.y))).getUTCDay(),week=day$$1>4||0===day$$1?utcMonday.ceil(week):utcMonday(week),week=utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day$$1=(week=newDate(newYear(d.y))).getDay(),week=day$$1>4||0===day$$1?monday.ceil(week):monday(week),week=day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day$$1="Z"in d?utcDate(newYear(d.y)).getUTCDay():newDate(newYear(d.y)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day$$1+5)%7:d.w+7*d.U-(day$$1+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate(d)):newDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",localDate);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier,utcDate);return p.toString=function(){return specifier},p}}}var locale$1,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){for(var map={},i=-1,n=names.length;++i<n;)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=1e3*+n[0],i+n[0].length):-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+day.count(year(d),d),p,3)}function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000"}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){var day$$1=d.getDay();return 0===day$$1?7:day$$1}function formatWeekNumberSunday(d,p){return pad(sunday.count(year(d),d),p,2)}function formatWeekNumberISO(d,p){var day$$1=d.getDay();return d=day$$1>=4||0===day$$1?thursday(d):thursday.ceil(d),pad(thursday.count(year(d),d)+(4===year(d).getDay()),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(monday.count(year(d),d),p,2)}function formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad(z/60|0,"0",2)+pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+utcDay.count(utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000"}function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday(d,p){return pad(utcSunday.count(utcYear(d),d),p,2)}function formatUTCWeekNumberISO(d,p){var day$$1=d.getUTCDay();return d=day$$1>=4||0===day$$1?utcThursday(d):utcThursday.ceil(d),pad(utcThursday.count(utcYear(d),d)+(4===utcYear(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(utcMonday.count(utcYear(d),d),p,2)}function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d){return+d}function formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}function defaultLocale$1(definition){return locale$1=formatLocale$1(definition),exports.timeFormat=locale$1.format,exports.timeParse=locale$1.parse,exports.utcFormat=locale$1.utcFormat,exports.utcParse=locale$1.utcParse,locale$1}defaultLocale$1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var formatIso=Date.prototype.toISOString?function formatIsoNative(date){return date.toISOString()}:exports.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),parseIso=+new Date("2000-01-01T00:00:00.000Z")?function parseIsoNative(string){var date=new Date(string);return isNaN(date)?null:date}:exports.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");function date$1(t){return new Date(t)}function number$3(t){return t instanceof Date?+t:+new Date(+t)}function calendar(year$$1,month$$1,week,day$$1,hour$$1,minute$$1,second$$1,millisecond$$1,format){var scale=continuous(deinterpolateLinear,reinterpolate),invert=scale.invert,domain=scale.domain,formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y"),tickIntervals=[[second$$1,1,1e3],[second$$1,5,5e3],[second$$1,15,15e3],[second$$1,30,3e4],[minute$$1,1,6e4],[minute$$1,5,3e5],[minute$$1,15,9e5],[minute$$1,30,18e5],[hour$$1,1,36e5],[hour$$1,3,108e5],[hour$$1,6,216e5],[hour$$1,12,432e5],[day$$1,1,864e5],[day$$1,2,1728e5],[week,1,6048e5],[month$$1,1,2592e6],[month$$1,3,7776e6],[year$$1,1,31536e6]];function tickFormat(date){return(second$$1(date)<date?formatMillisecond:minute$$1(date)<date?formatSecond:hour$$1(date)<date?formatMinute:day$$1(date)<date?formatHour:month$$1(date)<date?week(date)<date?formatDay:formatWeek:year$$1(date)<date?formatMonth:formatYear)(date)}function tickInterval(interval,start,stop,step){if(null==interval&&(interval=10),"number"==typeof interval){var target=Math.abs(stop-start)/interval,i=bisector((function(i){return i[2]})).right(tickIntervals,target);i===tickIntervals.length?(step=tickStep(start/31536e6,stop/31536e6,interval),interval=year$$1):i?(step=(i=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i])[1],interval=i[0]):(step=Math.max(tickStep(start,stop,interval),1),interval=millisecond$$1)}return null==step?interval:interval.every(step)}return scale.invert=function(y){return new Date(invert(y))},scale.domain=function(_){return arguments.length?domain(map$3.call(_,number$3)):domain().map(date$1)},scale.ticks=function(interval,step){var t,d=domain(),t0=d[0],t1=d[d.length-1],r=t1<t0;return r&&(t=t0,t0=t1,t1=t),t=(t=tickInterval(interval,t0,t1,step))?t.range(t0,t1+1):[],r?t.reverse():t},scale.tickFormat=function(count,specifier){return null==specifier?tickFormat:format(specifier)},scale.nice=function(interval,step){var d=domain();return(interval=tickInterval(interval,d[0],d[d.length-1],step))?domain(nice(d,interval)):scale},scale.copy=function(){return copy(scale,calendar(year$$1,month$$1,week,day$$1,hour$$1,minute$$1,second$$1,millisecond$$1,format))},scale}function colors(s){return s.match(/.{6}/g).map((function(x){return"#"+x}))}var category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),category20b=colors("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),category20c=colors("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),category20=colors("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),cubehelix$3=cubehelixLong(cubehelix(300,.5,0),cubehelix(-240,.5,1)),warm=cubehelixLong(cubehelix(-100,.75,.35),cubehelix(80,1.5,.8)),cool=cubehelixLong(cubehelix(260,.75,.35),cubehelix(80,1.5,.8)),rainbow=cubehelix();function ramp(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var viridis=ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function constant$10(x){return function constant(){return x}}var abs$1=Math.abs,atan2$1=Math.atan2,cos$2=Math.cos,max$2=Math.max,min$1=Math.min,sin$2=Math.sin,sqrt$2=Math.sqrt,pi$4=Math.PI,halfPi$3=pi$4/2,tau$4=2*pi$4;function acos$1(x){return x>1?0:x<-1?pi$4:Math.acos(x)}function asin$1(x){return x>=1?halfPi$3:x<=-1?-halfPi$3:Math.asin(x)}function arcInnerRadius(d){return d.innerRadius}function arcOuterRadius(d){return d.outerRadius}function arcStartAngle(d){return d.startAngle}function arcEndAngle(d){return d.endAngle}function arcPadAngle(d){return d&&d.padAngle}function intersect(x0,y0,x1,y1,x2,y2,x3,y3){var x10=x1-x0,y10=y1-y0,x32=x3-x2,y32=y3-y2,t=(x32*(y0-y2)-y32*(x0-x2))/(y32*x10-x32*y10);return[x0+t*x10,y0+t*y10]}function cornerTangents(x0,y0,x1,y1,r1,rc,cw){var x01=x0-x1,y01=y0-y1,lo=(cw?rc:-rc)/sqrt$2(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d2=dx*dx+dy*dy,r=r1-rc,D=x11*y10-x10*y11,d=(dy<0?-1:1)*sqrt$2(max$2(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;return dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1&&(cx0=cx1,cy0=cy1),{cx:cx0,cy:cy0,x01:-ox,y01:-oy,x11:cx0*(r1/r-1),y11:cy0*(r1/r-1)}}function Linear(context){this._context=context}function curveLinear(context){return new Linear(context)}function x$3(p){return p[0]}function y$3(p){return p[1]}function line(){var x$$1=x$3,y$$1=y$3,defined=constant$10(!0),context=null,curve=curveLinear,output=null;function line(data){var i,d,buffer,n=data.length,defined0=!1;for(null==context&&(output=curve(buffer=path())),i=0;i<=n;++i)!(i<n&&defined(d=data[i],i,data))===defined0&&((defined0=!defined0)?output.lineStart():output.lineEnd()),defined0&&output.point(+x$$1(d,i,data),+y$$1(d,i,data));if(buffer)return output=null,buffer+""||null}return line.x=function(_){return arguments.length?(x$$1="function"==typeof _?_:constant$10(+_),line):x$$1},line.y=function(_){return arguments.length?(y$$1="function"==typeof _?_:constant$10(+_),line):y$$1},line.defined=function(_){return arguments.length?(defined="function"==typeof _?_:constant$10(!!_),line):defined},line.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),line):curve},line.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),line):context},line}function area$2(){var x0=x$3,x1=null,y0=constant$10(0),y1=y$3,defined=constant$10(!0),context=null,curve=curveLinear,output=null;function area(data){var i,j,k,d,buffer,n=data.length,defined0=!1,x0z=new Array(n),y0z=new Array(n);for(null==context&&(output=curve(buffer=path())),i=0;i<=n;++i){if(!(i<n&&defined(d=data[i],i,data))===defined0)if(defined0=!defined0)j=i,output.areaStart(),output.lineStart();else{for(output.lineEnd(),output.lineStart(),k=i-1;k>=j;--k)output.point(x0z[k],y0z[k]);output.lineEnd(),output.areaEnd()}defined0&&(x0z[i]=+x0(d,i,data),y0z[i]=+y0(d,i,data),output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i]))}if(buffer)return output=null,buffer+""||null}function arealine(){return line().defined(defined).curve(curve).context(context)}return area.x=function(_){return arguments.length?(x0="function"==typeof _?_:constant$10(+_),x1=null,area):x0},area.x0=function(_){return arguments.length?(x0="function"==typeof _?_:constant$10(+_),area):x0},area.x1=function(_){return arguments.length?(x1=null==_?null:"function"==typeof _?_:constant$10(+_),area):x1},area.y=function(_){return arguments.length?(y0="function"==typeof _?_:constant$10(+_),y1=null,area):y0},area.y0=function(_){return arguments.length?(y0="function"==typeof _?_:constant$10(+_),area):y0},area.y1=function(_){return arguments.length?(y1=null==_?null:"function"==typeof _?_:constant$10(+_),area):y1},area.lineX0=area.lineY0=function(){return arealine().x(x0).y(y0)},area.lineY1=function(){return arealine().x(x0).y(y1)},area.lineX1=function(){return arealine().x(x1).y(y0)},area.defined=function(_){return arguments.length?(defined="function"==typeof _?_:constant$10(!!_),area):defined},area.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),area):curve},area.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),area):context},area}function descending$1(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function identity$7(d){return d}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._context.lineTo(x,y)}}};var curveRadialLinear=curveRadial(curveLinear);function Radial(curve){this._curve=curve}function curveRadial(curve){function radial(context){return new Radial(curve(context))}return radial._curve=curve,radial}function lineRadial(l){var c=l.curve;return l.angle=l.x,delete l.x,l.radius=l.y,delete l.y,l.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve},l}function lineRadial$1(){return lineRadial(line().curve(curveRadialLinear))}function areaRadial(){var a=area$2().curve(curveRadialLinear),c=a.curve,x0=a.lineX0,x1=a.lineX1,y0=a.lineY0,y1=a.lineY1;return a.angle=a.x,delete a.x,a.startAngle=a.x0,delete a.x0,a.endAngle=a.x1,delete a.x1,a.radius=a.y,delete a.y,a.innerRadius=a.y0,delete a.y0,a.outerRadius=a.y1,delete a.y1,a.lineStartAngle=function(){return lineRadial(x0())},delete a.lineX0,a.lineEndAngle=function(){return lineRadial(x1())},delete a.lineX1,a.lineInnerRadius=function(){return lineRadial(y0())},delete a.lineY0,a.lineOuterRadius=function(){return lineRadial(y1())},delete a.lineY1,a.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve},a}function pointRadial(x,y){return[(y=+y)*Math.cos(x-=Math.PI/2),y*Math.sin(x)]}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,r){this._curve.point(r*Math.sin(a),r*-Math.cos(a))}};var slice$6=Array.prototype.slice;function linkSource(d){return d.source}function linkTarget(d){return d.target}function link$2(curve){var source=linkSource,target=linkTarget,x$$1=x$3,y$$1=y$3,context=null;function link(){var buffer,argv=slice$6.call(arguments),s=source.apply(this,argv),t=target.apply(this,argv);if(context||(context=buffer=path()),curve(context,+x$$1.apply(this,(argv[0]=s,argv)),+y$$1.apply(this,argv),+x$$1.apply(this,(argv[0]=t,argv)),+y$$1.apply(this,argv)),buffer)return context=null,buffer+""||null}return link.source=function(_){return arguments.length?(source=_,link):source},link.target=function(_){return arguments.length?(target=_,link):target},link.x=function(_){return arguments.length?(x$$1="function"==typeof _?_:constant$10(+_),link):x$$1},link.y=function(_){return arguments.length?(y$$1="function"==typeof _?_:constant$10(+_),link):y$$1},link.context=function(_){return arguments.length?(context=null==_?null:_,link):context},link}function curveHorizontal(context,x0,y0,x1,y1){context.moveTo(x0,y0),context.bezierCurveTo(x0=(x0+x1)/2,y0,x0,y1,x1,y1)}function curveVertical(context,x0,y0,x1,y1){context.moveTo(x0,y0),context.bezierCurveTo(x0,y0=(y0+y1)/2,x1,y0,x1,y1)}function curveRadial$1(context,x0,y0,x1,y1){var p0=pointRadial(x0,y0),p1=pointRadial(x0,y0=(y0+y1)/2),p2=pointRadial(x1,y0),p3=pointRadial(x1,y1);context.moveTo(p0[0],p0[1]),context.bezierCurveTo(p1[0],p1[1],p2[0],p2[1],p3[0],p3[1])}var circle$2={draw:function(context,size){var r=Math.sqrt(size/pi$4);context.moveTo(r,0),context.arc(0,0,r,0,tau$4)}},cross$2={draw:function(context,size){var r=Math.sqrt(size/5)/2;context.moveTo(-3*r,-r),context.lineTo(-r,-r),context.lineTo(-r,-3*r),context.lineTo(r,-3*r),context.lineTo(r,-r),context.lineTo(3*r,-r),context.lineTo(3*r,r),context.lineTo(r,r),context.lineTo(r,3*r),context.lineTo(-r,3*r),context.lineTo(-r,r),context.lineTo(-3*r,r),context.closePath()}},tan30=Math.sqrt(1/3),tan30_2=2*tan30,diamond={draw:function(context,size){var y=Math.sqrt(size/tan30_2),x=y*tan30;context.moveTo(0,-y),context.lineTo(x,0),context.lineTo(0,y),context.lineTo(-x,0),context.closePath()}},kr=Math.sin(pi$4/10)/Math.sin(7*pi$4/10),kx=Math.sin(tau$4/10)*kr,ky=-Math.cos(tau$4/10)*kr,star={draw:function(context,size){var r=Math.sqrt(.8908130915292852*size),x=kx*r,y=ky*r;context.moveTo(0,-r),context.lineTo(x,y);for(var i=1;i<5;++i){var a=tau$4*i/5,c=Math.cos(a),s=Math.sin(a);context.lineTo(s*r,-c*r),context.lineTo(c*x-s*y,s*x+c*y)}context.closePath()}},square={draw:function(context,size){var w=Math.sqrt(size),x=-w/2;context.rect(x,x,w,w)}},sqrt3=Math.sqrt(3),triangle={draw:function(context,size){var y=-Math.sqrt(size/(3*sqrt3));context.moveTo(0,2*y),context.lineTo(-sqrt3*y,-y),context.lineTo(sqrt3*y,-y),context.closePath()}},c=-.5,s=Math.sqrt(3)/2,k=1/Math.sqrt(12),a=3*(k/2+1),wye={draw:function(context,size){var r=Math.sqrt(size/a),x0=r/2,y0=r*k,x1=x0,y1=r*k+r,x2=-x1,y2=y1;context.moveTo(x0,y0),context.lineTo(x1,y1),context.lineTo(x2,y2),context.lineTo(c*x0-s*y0,s*x0+c*y0),context.lineTo(c*x1-s*y1,s*x1+c*y1),context.lineTo(c*x2-s*y2,s*x2+c*y2),context.lineTo(c*x0+s*y0,c*y0-s*x0),context.lineTo(c*x1+s*y1,c*y1-s*x1),context.lineTo(c*x2+s*y2,c*y2-s*x2),context.closePath()}},symbols=[circle$2,cross$2,diamond,square,star,triangle,wye];function noop$2(){}function point$2(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6)}function Basis(context){this._context=context}function BasisClosed(context){this._context=context}function BasisOpen(context){this._context=context}function Bundle(context,beta){this._basis=new Basis(context),this._beta=beta}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}},BasisClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x2=x,this._y2=y;break;case 1:this._point=2,this._x3=x,this._y3=y;break;case 2:this._point=3,this._x4=x,this._y4=y,this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:point$2(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}},BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var x0=(this._x0+4*this._x1+x)/6,y0=(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point=4;default:point$2(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}},Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0)for(var t,x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1;++i<=j;)t=i/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x=this._y=null,this._basis.lineEnd()},point:function(x,y){this._x.push(+x),this._y.push(+y)}};var bundle=function custom(beta){function bundle(context){return 1===beta?new Basis(context):new Bundle(context,beta)}return bundle.beta=function(beta){return custom(+beta)},bundle}(.85);function point$3(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal(context,tension){this._context=context,this._k=(1-tension)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$3(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2,this._x1=x,this._y1=y;break;case 2:this._point=3;default:point$3(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinal=function custom(tension){function cardinal(context){return new Cardinal(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0);function CardinalClosed(context,tension){this._context=context,this._k=(1-tension)/6}CardinalClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:point$3(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalClosed=function custom(tension){function cardinal$$1(context){return new CardinalClosed(context,tension)}return cardinal$$1.tension=function(tension){return custom(+tension)},cardinal$$1}(0);function CardinalOpen(context,tension){this._context=context,this._k=(1-tension)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalOpen=function custom(tension){function cardinal$$1(context){return new CardinalOpen(context,tension)}return cardinal$$1.tension=function(tension){return custom(+tension)},cardinal$$1}(0);function point$4(that,x,y){var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>1e-12){var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n,y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n}if(that._l23_a>1e-12){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m,y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m}that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom(context,alpha){this._context=context,this._alpha=alpha}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;default:point$4(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRom=function custom(alpha){function catmullRom(context){return alpha?new CatmullRom(context,alpha):new Cardinal(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function CatmullRomClosed(context,alpha){this._context=context,this._alpha=alpha}CatmullRomClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:point$4(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomClosed=function custom(alpha){function catmullRom$$1(context){return alpha?new CatmullRomClosed(context,alpha):new CardinalClosed(context,0)}return catmullRom$$1.alpha=function(alpha){return custom(+alpha)},catmullRom$$1}(.5);function CatmullRomOpen(context,alpha){this._context=context,this._alpha=alpha}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$4(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomOpen=function custom(alpha){function catmullRom$$1(context){return alpha?new CatmullRomOpen(context,alpha):new CardinalOpen(context,0)}return catmullRom$$1.alpha=function(alpha){return custom(+alpha)},catmullRom$$1}(.5);function LinearClosed(context){this._context=context}function sign$1(x){return x<0?-1:1}function slope3(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);return(sign$1(s0)+sign$1(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}function slope2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function point$5(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX(context){this._context=context}function MonotoneY(context){this._context=new ReflectContext(context)}function ReflectContext(context){this._context=context}function Natural(context){this._context=context}function controlPoints(x){var i,m,n=x.length-1,a=new Array(n),b=new Array(n),r=new Array(n);for(a[0]=0,b[0]=2,r[0]=x[0]+2*x[1],i=1;i<n-1;++i)a[i]=1,b[i]=4,r[i]=4*x[i]+2*x[i+1];for(a[n-1]=2,b[n-1]=7,r[n-1]=8*x[n-1]+x[n],i=1;i<n;++i)m=a[i]/b[i-1],b[i]-=m,r[i]-=m*r[i-1];for(a[n-1]=r[n-1]/b[n-1],i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];for(b[n-1]=(x[n]+a[n-1])/2,i=0;i<n-1;++i)b[i]=2*x[i+1]-a[i+1];return[a,b]}function Step(context,t){this._context=context,this._t=t}function none$1(series,order){if((n=series.length)>1)for(var j,s0,n,i=1,s1=series[order[0]],m=s1.length;i<n;++i)for(s0=s1,s1=series[order[i]],j=0;j<m;++j)s1[j][1]+=s1[j][0]=isNaN(s0[j][1])?s0[j][0]:s0[j][1]}function none$2(series){for(var n=series.length,o=new Array(n);--n>=0;)o[n]=n;return o}function stackValue(d,key){return d[key]}function ascending$2(series){var sums=series.map(sum$2);return none$2(series).sort((function(a,b){return sums[a]-sums[b]}))}function sum$2(series){for(var v,s=0,i=-1,n=series.length;++i<n;)(v=+series[i][1])&&(s+=v);return s}function constant$11(x){return function(){return x}}function x$4(d){return d[0]}function y$4(d){return d[1]}function RedBlackTree(){this._=null}function RedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null}function RedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.R=q.L,p.R&&(p.R.U=p),q.L=p}function RedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.L=q.R,p.L&&(p.L.U=p),q.R=p}function RedBlackFirst(node){for(;node.L;)node=node.L;return node}function createEdge(left,right,v0,v1){var edge=[null,null],index=edges.push(edge)-1;return edge.left=left,edge.right=right,v0&&setEdgeEnd(edge,left,right,v0),v1&&setEdgeEnd(edge,right,left,v1),cells[left.index].halfedges.push(index),cells[right.index].halfedges.push(index),edge}function createBorderEdge(left,v0,v1){var edge=[v0,v1];return edge.left=left,edge}function setEdgeEnd(edge,left,right,vertex){edge[0]||edge[1]?edge.left===right?edge[1]=vertex:edge[0]=vertex:(edge[0]=vertex,edge.left=left,edge.right=right)}function clipEdge(edge,x0,y0,x1,y1){var r,a=edge[0],b=edge[1],ax=a[0],ay=a[1],t0=0,t1=1,dx=b[0]-ax,dy=b[1]-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return!(t0>0||t1<1)||(t0>0&&(edge[0]=[ax+t0*dx,ay+t0*dy]),t1<1&&(edge[1]=[ax+t1*dx,ay+t1*dy]),!0)}}}}}function connectEdge(edge,x0,y0,x1,y1){var v1=edge[1];if(v1)return!0;var fm,fb,v0=edge[0],left=edge.left,right=edge.right,lx=left[0],ly=left[1],rx=right[0],ry=right[1],fx=(lx+rx)/2,fy=(ly+ry)/2;if(ry===ly){if(fx<x0||fx>=x1)return;if(lx>rx){if(v0){if(v0[1]>=y1)return}else v0=[fx,y0];v1=[fx,y1]}else{if(v0){if(v0[1]<y0)return}else v0=[fx,y1];v1=[fx,y0]}}else if(fb=fy-(fm=(lx-rx)/(ry-ly))*fx,fm<-1||fm>1)if(lx>rx){if(v0){if(v0[1]>=y1)return}else v0=[(y0-fb)/fm,y0];v1=[(y1-fb)/fm,y1]}else{if(v0){if(v0[1]<y0)return}else v0=[(y1-fb)/fm,y1];v1=[(y0-fb)/fm,y0]}else if(ly<ry){if(v0){if(v0[0]>=x1)return}else v0=[x0,fm*x0+fb];v1=[x1,fm*x1+fb]}else{if(v0){if(v0[0]<x0)return}else v0=[x1,fm*x1+fb];v1=[x0,fm*x0+fb]}return edge[0]=v0,edge[1]=v1,!0}function cellHalfedgeAngle(cell,edge){var site=cell.site,va=edge.left,vb=edge.right;return site===vb&&(vb=va,va=site),vb?Math.atan2(vb[1]-va[1],vb[0]-va[0]):(site===va?(va=edge[1],vb=edge[0]):(va=edge[0],vb=edge[1]),Math.atan2(va[0]-vb[0],vb[1]-va[1]))}function cellHalfedgeStart(cell,edge){return edge[+(edge.left!==cell.site)]}function cellHalfedgeEnd(cell,edge){return edge[+(edge.left===cell.site)]}LinearClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(x,y){x=+x,y=+y,this._point?this._context.lineTo(x,y):(this._point=1,this._context.moveTo(x,y))}},MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$5(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){var t1=NaN;if(y=+y,(x=+x)!==this._x1||y!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,point$5(this,slope2(this,t1=slope3(this,x,y)),t1);break;default:point$5(this,this._t0,t1=slope3(this,x,y))}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y,this._t0=t1}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(x,y){MonotoneX.prototype.point.call(this,y,x)},ReflectContext.prototype={moveTo:function(x,y){this._context.moveTo(y,x)},closePath:function(){this._context.closePath()},lineTo:function(x,y){this._context.lineTo(y,x)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x)}},Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var x=this._x,y=this._y,n=x.length;if(n)if(this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]),2===n)this._context.lineTo(x[1],y[1]);else for(var px=controlPoints(x),py=controlPoints(y),i0=0,i1=1;i1<n;++i0,++i1)this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x[i1],y[i1]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(x,y){this._x.push(+x),this._y.push(+y)}},Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,y),this._context.lineTo(x,y);else{var x1=this._x*(1-this._t)+x*this._t;this._context.lineTo(x1,this._y),this._context.lineTo(x1,y)}}this._x=x,this._y=y}},RedBlackTree.prototype={constructor:RedBlackTree,insert:function(after,node){var parent,grandpa,uncle;if(after){if(node.P=after,node.N=after.N,after.N&&(after.N.P=node),after.N=node,after.R){for(after=after.R;after.L;)after=after.L;after.L=node}else after.R=node;parent=after}else this._?(after=RedBlackFirst(this._),node.P=null,node.N=after,after.P=after.L=node,parent=after):(node.P=node.N=null,this._=node,parent=null);for(node.L=node.R=null,node.U=parent,node.C=!0,after=node;parent&&parent.C;)parent===(grandpa=parent.U).L?(uncle=grandpa.R)&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.R&&(RedBlackRotateLeft(this,parent),parent=(after=parent).U),parent.C=!1,grandpa.C=!0,RedBlackRotateRight(this,grandpa)):(uncle=grandpa.L)&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.L&&(RedBlackRotateRight(this,parent),parent=(after=parent).U),parent.C=!1,grandpa.C=!0,RedBlackRotateLeft(this,grandpa)),parent=after.U;this._.C=!1},remove:function(node){node.N&&(node.N.P=node.P),node.P&&(node.P.N=node.N),node.N=node.P=null;var sibling,next,red,parent=node.U,left=node.L,right=node.R;if(next=left?right?RedBlackFirst(right):left:right,parent?parent.L===node?parent.L=next:parent.R=next:this._=next,left&&right?(red=next.C,next.C=node.C,next.L=left,left.U=next,next!==right?(parent=next.U,next.U=node.U,node=next.R,parent.L=node,next.R=right,right.U=next):(next.U=parent,parent=next,node=next.R)):(red=node.C,node=next),node&&(node.U=parent),!red)if(node&&node.C)node.C=!1;else{do{if(node===this._)break;if(node===parent.L){if((sibling=parent.R).C&&(sibling.C=!1,parent.C=!0,RedBlackRotateLeft(this,parent),sibling=parent.R),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.R&&sibling.R.C||(sibling.L.C=!1,sibling.C=!0,RedBlackRotateRight(this,sibling),sibling=parent.R),sibling.C=parent.C,parent.C=sibling.R.C=!1,RedBlackRotateLeft(this,parent),node=this._;break}}else if((sibling=parent.L).C&&(sibling.C=!1,parent.C=!0,RedBlackRotateRight(this,parent),sibling=parent.L),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.L&&sibling.L.C||(sibling.R.C=!1,sibling.C=!0,RedBlackRotateLeft(this,sibling),sibling=parent.L),sibling.C=parent.C,parent.C=sibling.L.C=!1,RedBlackRotateRight(this,parent),node=this._;break}sibling.C=!0,node=parent,parent=parent.U}while(!node.C);node&&(node.C=!1)}}};var firstCircle,circlePool=[];function Circle(){RedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function attachCircle(arc){var lArc=arc.P,rArc=arc.N;if(lArc&&rArc){var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite!==rSite){var bx=cSite[0],by=cSite[1],ax=lSite[0]-bx,ay=lSite[1]-by,cx=rSite[0]-bx,cy=rSite[1]-by,d=2*(ax*cy-ay*cx);if(!(d>=-epsilon2$2)){var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d,circle=circlePool.pop()||new Circle;circle.arc=arc,circle.site=cSite,circle.x=x+bx,circle.y=(circle.cy=y+by)+Math.sqrt(x*x+y*y),arc.circle=circle;for(var before=null,node=circles._;node;)if(circle.y<node.y||circle.y===node.y&&circle.x<=node.x){if(!node.L){before=node.P;break}node=node.L}else{if(!node.R){before=node;break}node=node.R}circles.insert(before,circle),before||(firstCircle=circle)}}}}function detachCircle(arc){var circle=arc.circle;circle&&(circle.P||(firstCircle=circle.N),circles.remove(circle),circlePool.push(circle),RedBlackNode(circle),arc.circle=null)}var beachPool=[];function Beach(){RedBlackNode(this),this.edge=this.site=this.circle=null}function createBeach(site){var beach=beachPool.pop()||new Beach;return beach.site=site,beach}function detachBeach(beach){detachCircle(beach),beaches.remove(beach),beachPool.push(beach),RedBlackNode(beach)}function removeBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex=[x,y],previous=beach.P,next=beach.N,disappearing=[beach];detachBeach(beach);for(var lArc=previous;lArc.circle&&Math.abs(x-lArc.circle.x)<epsilon$4&&Math.abs(y-lArc.circle.cy)<epsilon$4;)previous=lArc.P,disappearing.unshift(lArc),detachBeach(lArc),lArc=previous;disappearing.unshift(lArc),detachCircle(lArc);for(var rArc=next;rArc.circle&&Math.abs(x-rArc.circle.x)<epsilon$4&&Math.abs(y-rArc.circle.cy)<epsilon$4;)next=rArc.N,disappearing.push(rArc),detachBeach(rArc),rArc=next;disappearing.push(rArc),detachCircle(rArc);var iArc,nArcs=disappearing.length;for(iArc=1;iArc<nArcs;++iArc)rArc=disappearing[iArc],lArc=disappearing[iArc-1],setEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex);lArc=disappearing[0],(rArc=disappearing[nArcs-1]).edge=createEdge(lArc.site,rArc.site,null,vertex),attachCircle(lArc),attachCircle(rArc)}function addBeach(site){for(var lArc,rArc,dxl,dxr,x=site[0],directrix=site[1],node=beaches._;node;)if((dxl=leftBreakPoint(node,directrix)-x)>epsilon$4)node=node.L;else{if(!((dxr=x-rightBreakPoint(node,directrix))>epsilon$4)){dxl>-epsilon$4?(lArc=node.P,rArc=node):dxr>-epsilon$4?(lArc=node,rArc=node.N):lArc=rArc=node;break}if(!node.R){lArc=node;break}node=node.R}!function createCell(site){return cells[site.index]={site:site,halfedges:[]}}(site);var newArc=createBeach(site);if(beaches.insert(lArc,newArc),lArc||rArc){if(lArc===rArc)return detachCircle(lArc),rArc=createBeach(lArc.site),beaches.insert(newArc,rArc),newArc.edge=rArc.edge=createEdge(lArc.site,newArc.site),attachCircle(lArc),void attachCircle(rArc);if(rArc){detachCircle(lArc),detachCircle(rArc);var lSite=lArc.site,ax=lSite[0],ay=lSite[1],bx=site[0]-ax,by=site[1]-ay,rSite=rArc.site,cx=rSite[0]-ax,cy=rSite[1]-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex=[(cy*hb-by*hc)/d+ax,(bx*hc-cx*hb)/d+ay];setEdgeEnd(rArc.edge,lSite,rSite,vertex),newArc.edge=createEdge(lSite,site,null,vertex),rArc.edge=createEdge(site,rSite,null,vertex),attachCircle(lArc),attachCircle(rArc)}else newArc.edge=createEdge(lArc.site,newArc.site)}}function leftBreakPoint(arc,directrix){var site=arc.site,rfocx=site[0],rfocy=site[1],pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-1/0;var lfocx=(site=lArc.site)[0],lfocy=site[1],plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;return aby2?(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx:(rfocx+lfocx)/2}function rightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return leftBreakPoint(rArc,directrix);var site=arc.site;return site[1]===directrix?site[0]:1/0}var beaches,cells,circles,edges,epsilon$4=1e-6,epsilon2$2=1e-12;function triangleArea(a,b,c){return(a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1])}function lexicographic(a,b){return b[1]-a[1]||b[0]-a[0]}function Diagram(sites,extent){var x,y,circle,site=sites.sort(lexicographic).pop();for(edges=[],cells=new Array(sites.length),beaches=new RedBlackTree,circles=new RedBlackTree;;)if(circle=firstCircle,site&&(!circle||site[1]<circle.y||site[1]===circle.y&&site[0]<circle.x))site[0]===x&&site[1]===y||(addBeach(site),x=site[0],y=site[1]),site=sites.pop();else{if(!circle)break;removeBeach(circle.arc)}if(function sortCellHalfedges(){for(var cell,halfedges,j,m,i=0,n=cells.length;i<n;++i)if((cell=cells[i])&&(m=(halfedges=cell.halfedges).length)){var index=new Array(m),array=new Array(m);for(j=0;j<m;++j)index[j]=j,array[j]=cellHalfedgeAngle(cell,edges[halfedges[j]]);for(index.sort((function(i,j){return array[j]-array[i]})),j=0;j<m;++j)array[j]=halfedges[index[j]];for(j=0;j<m;++j)halfedges[j]=array[j]}}(),extent){var x0=+extent[0][0],y0=+extent[0][1],x1=+extent[1][0],y1=+extent[1][1];!function clipEdges(x0,y0,x1,y1){for(var edge,i=edges.length;i--;)connectEdge(edge=edges[i],x0,y0,x1,y1)&&clipEdge(edge,x0,y0,x1,y1)&&(Math.abs(edge[0][0]-edge[1][0])>epsilon$4||Math.abs(edge[0][1]-edge[1][1])>epsilon$4)||delete edges[i]}(x0,y0,x1,y1),function clipCells(x0,y0,x1,y1){var iCell,cell,site,iHalfedge,halfedges,nHalfedges,start,startX,startY,end,endX,endY,nCells=cells.length,cover=!0;for(iCell=0;iCell<nCells;++iCell)if(cell=cells[iCell]){for(site=cell.site,iHalfedge=(halfedges=cell.halfedges).length;iHalfedge--;)edges[halfedges[iHalfedge]]||halfedges.splice(iHalfedge,1);for(iHalfedge=0,nHalfedges=halfedges.length;iHalfedge<nHalfedges;)endX=(end=cellHalfedgeEnd(cell,edges[halfedges[iHalfedge]]))[0],endY=end[1],startX=(start=cellHalfedgeStart(cell,edges[halfedges[++iHalfedge%nHalfedges]]))[0],startY=start[1],(Math.abs(endX-startX)>epsilon$4||Math.abs(endY-startY)>epsilon$4)&&(halfedges.splice(iHalfedge,0,edges.push(createBorderEdge(site,end,Math.abs(endX-x0)<epsilon$4&&y1-endY>epsilon$4?[x0,Math.abs(startX-x0)<epsilon$4?startY:y1]:Math.abs(endY-y1)<epsilon$4&&x1-endX>epsilon$4?[Math.abs(startY-y1)<epsilon$4?startX:x1,y1]:Math.abs(endX-x1)<epsilon$4&&endY-y0>epsilon$4?[x1,Math.abs(startX-x1)<epsilon$4?startY:y0]:Math.abs(endY-y0)<epsilon$4&&endX-x0>epsilon$4?[Math.abs(startY-y0)<epsilon$4?startX:x0,y0]:null))-1),++nHalfedges);nHalfedges&&(cover=!1)}if(cover){var dx,dy,d2,dc=1/0;for(iCell=0,cover=null;iCell<nCells;++iCell)(cell=cells[iCell])&&(d2=(dx=(site=cell.site)[0]-x0)*dx+(dy=site[1]-y0)*dy)<dc&&(dc=d2,cover=cell);if(cover){var v00=[x0,y0],v01=[x0,y1],v11=[x1,y1],v10=[x1,y0];cover.halfedges.push(edges.push(createBorderEdge(site=cover.site,v00,v01))-1,edges.push(createBorderEdge(site,v01,v11))-1,edges.push(createBorderEdge(site,v11,v10))-1,edges.push(createBorderEdge(site,v10,v00))-1)}}for(iCell=0;iCell<nCells;++iCell)(cell=cells[iCell])&&(cell.halfedges.length||delete cells[iCell])}(x0,y0,x1,y1)}this.edges=edges,this.cells=cells,beaches=circles=edges=cells=null}function constant$12(x){return function(){return x}}function ZoomEvent(target,type,transform){this.target=target,this.type=type,this.transform=transform}function Transform(k,x,y){this.k=k,this.x=x,this.y=y}Diagram.prototype={constructor:Diagram,polygons:function(){var edges=this.edges;return this.cells.map((function(cell){var polygon=cell.halfedges.map((function(i){return cellHalfedgeStart(cell,edges[i])}));return polygon.data=cell.site.data,polygon}))},triangles:function(){var triangles=[],edges=this.edges;return this.cells.forEach((function(cell,i){if(m=(halfedges=cell.halfedges).length)for(var halfedges,m,s0,site=cell.site,j=-1,e1=edges[halfedges[m-1]],s1=e1.left===site?e1.right:e1.left;++j<m;)s0=s1,s1=(e1=edges[halfedges[j]]).left===site?e1.right:e1.left,s0&&s1&&i<s0.index&&i<s1.index&&triangleArea(site,s0,s1)<0&&triangles.push([site.data,s0.data,s1.data])})),triangles},links:function(){return this.edges.filter((function(edge){return edge.right})).map((function(edge){return{source:edge.left.data,target:edge.right.data}}))},find:function(x,y,radius){for(var i0,cell,that=this,i1=that._found||0,n=that.cells.length;!(cell=that.cells[i1]);)if(++i1>=n)return null;var dx=x-cell.site[0],dy=y-cell.site[1],d2=dx*dx+dy*dy;do{cell=that.cells[i0=i1],i1=null,cell.halfedges.forEach((function(e){var edge=that.edges[e],v=edge.left;if(v!==cell.site&&v||(v=edge.right)){var vx=x-v[0],vy=y-v[1],v2=vx*vx+vy*vy;v2<d2&&(d2=v2,i1=v.index)}}))}while(null!==i1);return that._found=i0,null==radius||d2<=radius*radius?cell.site:null}},Transform.prototype={constructor:Transform,scale:function(k){return 1===k?this:new Transform(this.k*k,this.x,this.y)},translate:function(x,y){return 0===x&0===y?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*y)},apply:function(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y]},applyX:function(x){return x*this.k+this.x},applyY:function(y){return y*this.k+this.y},invert:function(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k]},invertX:function(x){return(x-this.x)/this.k},invertY:function(y){return(y-this.y)/this.k},rescaleX:function(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x))},rescaleY:function(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity$8=new Transform(1,0,0);function transform$1(node){return node.__zoom||identity$8}function nopropagation$2(){exports.event.stopImmediatePropagation()}function noevent$2(){exports.event.preventDefault(),exports.event.stopImmediatePropagation()}function defaultFilter$2(){return!exports.event.button}function defaultExtent$1(){var w,h,e=this;return e instanceof SVGElement?(w=(e=e.ownerSVGElement||e).width.baseVal.value,h=e.height.baseVal.value):(w=e.clientWidth,h=e.clientHeight),[[0,0],[w,h]]}function defaultTransform(){return this.__zoom||identity$8}function defaultWheelDelta(){return-exports.event.deltaY*(exports.event.deltaMode?120:1)/500}function defaultTouchable$1(){return"ontouchstart"in this}function defaultConstrain(transform$$1,extent,translateExtent){var dx0=transform$$1.invertX(extent[0][0])-translateExtent[0][0],dx1=transform$$1.invertX(extent[1][0])-translateExtent[1][0],dy0=transform$$1.invertY(extent[0][1])-translateExtent[0][1],dy1=transform$$1.invertY(extent[1][1])-translateExtent[1][1];return transform$$1.translate(dx1>dx0?(dx0+dx1)/2:Math.min(0,dx0)||Math.max(0,dx1),dy1>dy0?(dy0+dy1)/2:Math.min(0,dy0)||Math.max(0,dy1))}transform$1.prototype=Transform.prototype,exports.version="4.13.0",exports.bisect=bisectRight,exports.bisectRight=bisectRight,exports.bisectLeft=bisectLeft,exports.ascending=ascending,exports.bisector=bisector,exports.cross=function cross(values0,values1,reduce){var i0,i1,i,value0,n0=values0.length,n1=values1.length,values=new Array(n0*n1);for(null==reduce&&(reduce=pair),i0=i=0;i0<n0;++i0)for(value0=values0[i0],i1=0;i1<n1;++i1,++i)values[i]=reduce(value0,values1[i1]);return values},exports.descending=function descending(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},exports.deviation=deviation,exports.extent=extent,exports.histogram=function histogram(){var value=identity,domain=extent,threshold=sturges;function histogram(data){var i,x,n=data.length,values=new Array(n);for(i=0;i<n;++i)values[i]=value(data[i],i,data);var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);Array.isArray(tz)||(tz=tickStep(x0,x1,tz),tz=sequence(Math.ceil(x0/tz)*tz,Math.floor(x1/tz)*tz,tz));for(var m=tz.length;tz[0]<=x0;)tz.shift(),--m;for(;tz[m-1]>x1;)tz.pop(),--m;var bin,bins=new Array(m+1);for(i=0;i<=m;++i)(bin=bins[i]=[]).x0=i>0?tz[i-1]:x0,bin.x1=i<m?tz[i]:x1;for(i=0;i<n;++i)x0<=(x=values[i])&&x<=x1&&bins[bisectRight(tz,x,0,m)].push(data[i]);return bins}return histogram.value=function(_){return arguments.length?(value="function"==typeof _?_:constant(_),histogram):value},histogram.domain=function(_){return arguments.length?(domain="function"==typeof _?_:constant([_[0],_[1]]),histogram):domain},histogram.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:Array.isArray(_)?constant(slice.call(_)):constant(_),histogram):threshold},histogram},exports.thresholdFreedmanDiaconis=function freedmanDiaconis(values,min,max){return values=map.call(values,number).sort(ascending),Math.ceil((max-min)/(2*(threshold(values,.75)-threshold(values,.25))*Math.pow(values.length,-1/3)))},exports.thresholdScott=function scott(values,min,max){return Math.ceil((max-min)/(3.5*deviation(values)*Math.pow(values.length,-1/3)))},exports.thresholdSturges=sturges,exports.max=function max(values,valueof){var value,max,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(max=value;++i<n;)null!=(value=values[i])&&value>max&&(max=value)}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(max=value;++i<n;)null!=(value=valueof(values[i],i,values))&&value>max&&(max=value);return max},exports.mean=function mean(values,valueof){var value,n=values.length,m=n,i=-1,sum=0;if(null==valueof)for(;++i<n;)isNaN(value=number(values[i]))?--m:sum+=value;else for(;++i<n;)isNaN(value=number(valueof(values[i],i,values)))?--m:sum+=value;if(m)return sum/m},exports.median=function median(values,valueof){var value,n=values.length,i=-1,numbers=[];if(null==valueof)for(;++i<n;)isNaN(value=number(values[i]))||numbers.push(value);else for(;++i<n;)isNaN(value=number(valueof(values[i],i,values)))||numbers.push(value);return threshold(numbers.sort(ascending),.5)},exports.merge=merge,exports.min=min,exports.pairs=function pairs(array,f){null==f&&(f=pair);for(var i=0,n=array.length-1,p=array[0],pairs=new Array(n<0?0:n);i<n;)pairs[i]=f(p,p=array[++i]);return pairs},exports.permute=function permute(array,indexes){for(var i=indexes.length,permutes=new Array(i);i--;)permutes[i]=array[indexes[i]];return permutes},exports.quantile=threshold,exports.range=sequence,exports.scan=function scan(values,compare){if(n=values.length){var n,xi,i=0,j=0,xj=values[j];for(null==compare&&(compare=ascending);++i<n;)(compare(xi=values[i],xj)<0||0!==compare(xj,xj))&&(xj=xi,j=i);return 0===compare(xj,xj)?j:void 0}},exports.shuffle=function shuffle(array,i0,i1){for(var t,i,m=(null==i1?array.length:i1)-(i0=null==i0?0:+i0);m;)i=Math.random()*m--|0,t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t;return array},exports.sum=function sum(values,valueof){var value,n=values.length,i=-1,sum=0;if(null==valueof)for(;++i<n;)(value=+values[i])&&(sum+=value);else for(;++i<n;)(value=+valueof(values[i],i,values))&&(sum+=value);return sum},exports.ticks=ticks,exports.tickIncrement=tickIncrement,exports.tickStep=tickStep,exports.transpose=transpose,exports.variance=variance,exports.zip=function zip(){return transpose(arguments)},exports.axisTop=function axisTop(scale){return axis(1,scale)},exports.axisRight=function axisRight(scale){return axis(2,scale)},exports.axisBottom=function axisBottom(scale){return axis(3,scale)},exports.axisLeft=function axisLeft(scale){return axis(4,scale)},exports.brush=function brush(){return brush$1(XY)},exports.brushX=function brushX(){return brush$1(X)},exports.brushY=function brushY(){return brush$1(Y)},exports.brushSelection=function brushSelection(node){var state=node.__brush;return state?state.dim.output(state.selection):null},exports.chord=function chord(){var padAngle=0,sortGroups=null,sortSubgroups=null,sortChords=null;function chord(matrix){var k,x,x0,dx,i,j,n=matrix.length,groupSums=[],groupIndex=sequence(n),subgroupIndex=[],chords=[],groups=chords.groups=new Array(n),subgroups=new Array(n*n);for(k=0,i=-1;++i<n;){for(x=0,j=-1;++j<n;)x+=matrix[i][j];groupSums.push(x),subgroupIndex.push(sequence(n)),k+=x}for(sortGroups&&groupIndex.sort((function(a,b){return sortGroups(groupSums[a],groupSums[b])})),sortSubgroups&&subgroupIndex.forEach((function(d,i){d.sort((function(a,b){return sortSubgroups(matrix[i][a],matrix[i][b])}))})),dx=(k=max$1(0,tau$1-padAngle*n)/k)?padAngle:tau$1/n,x=0,i=-1;++i<n;){for(x0=x,j=-1;++j<n;){var di=groupIndex[i],dj=subgroupIndex[di][j],v=matrix[di][dj],a0=x,a1=x+=v*k;subgroups[dj*n+di]={index:di,subindex:dj,startAngle:a0,endAngle:a1,value:v}}groups[di]={index:di,startAngle:x0,endAngle:x,value:groupSums[di]},x+=dx}for(i=-1;++i<n;)for(j=i-1;++j<n;){var source=subgroups[j*n+i],target=subgroups[i*n+j];(source.value||target.value)&&chords.push(source.value<target.value?{source:target,target:source}:{source:source,target:target})}return sortChords?chords.sort(sortChords):chords}return chord.padAngle=function(_){return arguments.length?(padAngle=max$1(0,_),chord):padAngle},chord.sortGroups=function(_){return arguments.length?(sortGroups=_,chord):sortGroups},chord.sortSubgroups=function(_){return arguments.length?(sortSubgroups=_,chord):sortSubgroups},chord.sortChords=function(_){return arguments.length?(null==_?sortChords=null:(sortChords=compareValue(_))._=_,chord):sortChords&&sortChords._},chord},exports.ribbon=function ribbon(){var source=defaultSource,target=defaultTarget,radius=defaultRadius,startAngle=defaultStartAngle,endAngle=defaultEndAngle,context=null;function ribbon(){var buffer,argv=slice$2.call(arguments),s=source.apply(this,argv),t=target.apply(this,argv),sr=+radius.apply(this,(argv[0]=s,argv)),sa0=startAngle.apply(this,argv)-halfPi$1,sa1=endAngle.apply(this,argv)-halfPi$1,sx0=sr*cos(sa0),sy0=sr*sin(sa0),tr=+radius.apply(this,(argv[0]=t,argv)),ta0=startAngle.apply(this,argv)-halfPi$1,ta1=endAngle.apply(this,argv)-halfPi$1;if(context||(context=buffer=path()),context.moveTo(sx0,sy0),context.arc(0,0,sr,sa0,sa1),sa0===ta0&&sa1===ta1||(context.quadraticCurveTo(0,0,tr*cos(ta0),tr*sin(ta0)),context.arc(0,0,tr,ta0,ta1)),context.quadraticCurveTo(0,0,sx0,sy0),context.closePath(),buffer)return context=null,buffer+""||null}return ribbon.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant$5(+_),ribbon):radius},ribbon.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:constant$5(+_),ribbon):startAngle},ribbon.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:constant$5(+_),ribbon):endAngle},ribbon.source=function(_){return arguments.length?(source=_,ribbon):source},ribbon.target=function(_){return arguments.length?(target=_,ribbon):target},ribbon.context=function(_){return arguments.length?(context=null==_?null:_,ribbon):context},ribbon},exports.nest=function nest(){var sortValues,rollup,nest,keys=[],sortKeys=[];function apply(array,depth,createResult,setResult){if(depth>=keys.length)return null!=sortValues&&array.sort(sortValues),null!=rollup?rollup(array):array;for(var keyValue,value,values,i=-1,n=array.length,key=keys[depth++],valuesByKey=map$1(),result=createResult();++i<n;)(values=valuesByKey.get(keyValue=key(value=array[i])+""))?values.push(value):valuesByKey.set(keyValue,[value]);return valuesByKey.each((function(values,key){setResult(result,key,apply(values,depth,createResult,setResult))})),result}return nest={object:function(array){return apply(array,0,createObject,setObject)},map:function(array){return apply(array,0,createMap,setMap)},entries:function(array){return function entries(map,depth){if(++depth>keys.length)return map;var array,sortKey=sortKeys[depth-1];return null!=rollup&&depth>=keys.length?array=map.entries():(array=[],map.each((function(v,k){array.push({key:k,values:entries(v,depth)})}))),null!=sortKey?array.sort((function(a,b){return sortKey(a.key,b.key)})):array}(apply(array,0,createMap,setMap),0)},key:function(d){return keys.push(d),nest},sortKeys:function(order){return sortKeys[keys.length-1]=order,nest},sortValues:function(order){return sortValues=order,nest},rollup:function(f){return rollup=f,nest}}},exports.set=set$2,exports.map=map$1,exports.keys=function keys(map){var keys=[];for(var key in map)keys.push(key);return keys},exports.values=function values(map){var values=[];for(var key in map)values.push(map[key]);return values},exports.entries=function entries(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries},exports.color=color,exports.rgb=rgb,exports.hsl=hsl,exports.lab=lab,exports.hcl=hcl,exports.cubehelix=cubehelix,exports.dispatch=dispatch,exports.drag=function drag(){var mousedownx,mousedowny,mousemoving,touchending,filter=defaultFilter$1,container=defaultContainer,subject=defaultSubject,touchable=defaultTouchable,gestures={},listeners=dispatch("start","drag","end"),active=0,clickDistance2=0;function drag(selection){selection.on("mousedown.drag",mousedowned).filter(touchable).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved).on("touchend.drag touchcancel.drag",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function mousedowned(){if(!touchending&&filter.apply(this,arguments)){var gesture=beforestart("mouse",container.apply(this,arguments),mouse,this,arguments);gesture&&(select(exports.event.view).on("mousemove.drag",mousemoved,!0).on("mouseup.drag",mouseupped,!0),dragDisable(exports.event.view),nopropagation(),mousemoving=!1,mousedownx=exports.event.clientX,mousedowny=exports.event.clientY,gesture("start"))}}function mousemoved(){if(noevent(),!mousemoving){var dx=exports.event.clientX-mousedownx,dy=exports.event.clientY-mousedowny;mousemoving=dx*dx+dy*dy>clickDistance2}gestures.mouse("drag")}function mouseupped(){select(exports.event.view).on("mousemove.drag mouseup.drag",null),yesdrag(exports.event.view,mousemoving),noevent(),gestures.mouse("end")}function touchstarted(){if(filter.apply(this,arguments)){var i,gesture,touches=exports.event.changedTouches,c=container.apply(this,arguments),n=touches.length;for(i=0;i<n;++i)(gesture=beforestart(touches[i].identifier,c,touch,this,arguments))&&(nopropagation(),gesture("start"))}}function touchmoved(){var i,gesture,touches=exports.event.changedTouches,n=touches.length;for(i=0;i<n;++i)(gesture=gestures[touches[i].identifier])&&(noevent(),gesture("drag"))}function touchended(){var i,gesture,touches=exports.event.changedTouches,n=touches.length;for(touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),500),i=0;i<n;++i)(gesture=gestures[touches[i].identifier])&&(nopropagation(),gesture("end"))}function beforestart(id,container,point,that,args){var s,dx,dy,p=point(container,id),sublisteners=listeners.copy();if(customEvent(new DragEvent(drag,"beforestart",s,id,active,p[0],p[1],0,0,sublisteners),(function(){return null!=(exports.event.subject=s=subject.apply(that,args))&&(dx=s.x-p[0]||0,dy=s.y-p[1]||0,!0)})))return function gesture(type){var n,p0=p;switch(type){case"start":gestures[id]=gesture,n=active++;break;case"end":delete gestures[id],--active;case"drag":p=point(container,id),n=active}customEvent(new DragEvent(drag,type,s,id,n,p[0]+dx,p[1]+dy,p[0]-p0[0],p[1]-p0[1],sublisteners),sublisteners.apply,sublisteners,[type,that,args])}}return drag.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant$2(!!_),drag):filter},drag.container=function(_){return arguments.length?(container="function"==typeof _?_:constant$2(_),drag):container},drag.subject=function(_){return arguments.length?(subject="function"==typeof _?_:constant$2(_),drag):subject},drag.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:constant$2(!!_),drag):touchable},drag.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?drag:value},drag.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,drag):Math.sqrt(clickDistance2)},drag},exports.dragDisable=dragDisable,exports.dragEnable=yesdrag,exports.dsvFormat=dsv,exports.csvParse=csvParse,exports.csvParseRows=csvParseRows,exports.csvFormat=csvFormat,exports.csvFormatRows=csvFormatRows,exports.tsvParse=tsvParse,exports.tsvParseRows=tsvParseRows,exports.tsvFormat=tsvFormat,exports.tsvFormatRows=tsvFormatRows,exports.easeLinear=function linear$1(t){return+t},exports.easeQuad=quadInOut,exports.easeQuadIn=function quadIn(t){return t*t},exports.easeQuadOut=function quadOut(t){return t*(2-t)},exports.easeQuadInOut=quadInOut,exports.easeCubic=cubicInOut,exports.easeCubicIn=function cubicIn(t){return t*t*t},exports.easeCubicOut=function cubicOut(t){return--t*t*t+1},exports.easeCubicInOut=cubicInOut,exports.easePoly=polyInOut,exports.easePolyIn=polyIn,exports.easePolyOut=polyOut,exports.easePolyInOut=polyInOut,exports.easeSin=sinInOut,exports.easeSinIn=function sinIn(t){return 1-Math.cos(t*halfPi)},exports.easeSinOut=function sinOut(t){return Math.sin(t*halfPi)},exports.easeSinInOut=sinInOut,exports.easeExp=expInOut,exports.easeExpIn=function expIn(t){return Math.pow(2,10*t-10)},exports.easeExpOut=function expOut(t){return 1-Math.pow(2,-10*t)},exports.easeExpInOut=expInOut,exports.easeCircle=circleInOut,exports.easeCircleIn=function circleIn(t){return 1-Math.sqrt(1-t*t)},exports.easeCircleOut=function circleOut(t){return Math.sqrt(1- --t*t)},exports.easeCircleInOut=circleInOut,exports.easeBounce=bounceOut,exports.easeBounceIn=function bounceIn(t){return 1-bounceOut(1-t)},exports.easeBounceOut=bounceOut,exports.easeBounceInOut=function bounceInOut(t){return((t*=2)<=1?1-bounceOut(1-t):bounceOut(t-1)+1)/2},exports.easeBack=backInOut,exports.easeBackIn=backIn,exports.easeBackOut=backOut,exports.easeBackInOut=backInOut,exports.easeElastic=elasticOut,exports.easeElasticIn=elasticIn,exports.easeElasticOut=elasticOut,exports.easeElasticInOut=elasticInOut,exports.forceCenter=function center$1(x,y){var nodes;function force(){var i,node,n=nodes.length,sx=0,sy=0;for(i=0;i<n;++i)sx+=(node=nodes[i]).x,sy+=node.y;for(sx=sx/n-x,sy=sy/n-y,i=0;i<n;++i)(node=nodes[i]).x-=sx,node.y-=sy}return null==x&&(x=0),null==y&&(y=0),force.initialize=function(_){nodes=_},force.x=function(_){return arguments.length?(x=+_,force):x},force.y=function(_){return arguments.length?(y=+_,force):y},force},exports.forceCollide=function collide(radius){var nodes,radii,strength=1,iterations=1;function force(){for(var i,tree,node,xi,yi,ri,ri2,n=nodes.length,k=0;k<iterations;++k)for(tree=quadtree(nodes,x,y).visitAfter(prepare),i=0;i<n;++i)node=nodes[i],ri=radii[node.index],ri2=ri*ri,xi=node.x+node.vx,yi=node.y+node.vy,tree.visit(apply);function apply(quad,x0,y0,x1,y1){var data=quad.data,rj=quad.r,r=ri+rj;if(!data)return x0>xi+r||x1<xi-r||y0>yi+r||y1<yi-r;if(data.index>node.index){var x=xi-data.x-data.vx,y=yi-data.y-data.vy,l=x*x+y*y;l<r*r&&(0===x&&(l+=(x=jiggle())*x),0===y&&(l+=(y=jiggle())*y),l=(r-(l=Math.sqrt(l)))/l*strength,node.vx+=(x*=l)*(r=(rj*=rj)/(ri2+rj)),node.vy+=(y*=l)*r,data.vx-=x*(r=1-r),data.vy-=y*r)}}}function prepare(quad){if(quad.data)return quad.r=radii[quad.data.index];for(var i=quad.r=0;i<4;++i)quad[i]&&quad[i].r>quad.r&&(quad.r=quad[i].r)}function initialize(){if(nodes){var i,node,n=nodes.length;for(radii=new Array(n),i=0;i<n;++i)node=nodes[i],radii[node.index]=+radius(node,i,nodes)}}return"function"!=typeof radius&&(radius=constant$6(null==radius?1:+radius)),force.initialize=function(_){nodes=_,initialize()},force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){return arguments.length?(strength=+_,force):strength},force.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant$6(+_),initialize(),force):radius},force},exports.forceLink=function link(links){var strengths,distances,nodes,count,bias,id=index,strength=function defaultStrength(link){return 1/Math.min(count[link.source.index],count[link.target.index])},distance=constant$6(30),iterations=1;function force(alpha){for(var k=0,n=links.length;k<iterations;++k)for(var link,source,target,x,y,l,b,i=0;i<n;++i)source=(link=links[i]).source,x=(target=link.target).x+target.vx-source.x-source.vx||jiggle(),y=target.y+target.vy-source.y-source.vy||jiggle(),x*=l=((l=Math.sqrt(x*x+y*y))-distances[i])/l*alpha*strengths[i],y*=l,target.vx-=x*(b=bias[i]),target.vy-=y*b,source.vx+=x*(b=1-b),source.vy+=y*b}function initialize(){if(nodes){var i,link,n=nodes.length,m=links.length,nodeById=map$1(nodes,id);for(i=0,count=new Array(n);i<m;++i)(link=links[i]).index=i,"object"!=typeof link.source&&(link.source=find(nodeById,link.source)),"object"!=typeof link.target&&(link.target=find(nodeById,link.target)),count[link.source.index]=(count[link.source.index]||0)+1,count[link.target.index]=(count[link.target.index]||0)+1;for(i=0,bias=new Array(m);i<m;++i)link=links[i],bias[i]=count[link.source.index]/(count[link.source.index]+count[link.target.index]);strengths=new Array(m),initializeStrength(),distances=new Array(m),initializeDistance()}}function initializeStrength(){if(nodes)for(var i=0,n=links.length;i<n;++i)strengths[i]=+strength(links[i],i,links)}function initializeDistance(){if(nodes)for(var i=0,n=links.length;i<n;++i)distances[i]=+distance(links[i],i,links)}return null==links&&(links=[]),force.initialize=function(_){nodes=_,initialize()},force.links=function(_){return arguments.length?(links=_,initialize(),force):links},force.id=function(_){return arguments.length?(id=_,force):id},force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant$6(+_),initializeStrength(),force):strength},force.distance=function(_){return arguments.length?(distance="function"==typeof _?_:constant$6(+_),initializeDistance(),force):distance},force},exports.forceManyBody=function manyBody(){var nodes,node,alpha,strengths,strength=constant$6(-30),distanceMin2=1,distanceMax2=1/0,theta2=.81;function force(_){var i,n=nodes.length,tree=quadtree(nodes,x$1,y$1).visitAfter(accumulate);for(alpha=_,i=0;i<n;++i)node=nodes[i],tree.visit(apply)}function initialize(){if(nodes){var i,node,n=nodes.length;for(strengths=new Array(n),i=0;i<n;++i)node=nodes[i],strengths[node.index]=+strength(node,i,nodes)}}function accumulate(quad){var q,c,x,y,i,strength=0,weight=0;if(quad.length){for(x=y=i=0;i<4;++i)(q=quad[i])&&(c=Math.abs(q.value))&&(strength+=q.value,weight+=c,x+=c*q.x,y+=c*q.y);quad.x=x/weight,quad.y=y/weight}else{(q=quad).x=q.data.x,q.y=q.data.y;do{strength+=strengths[q.data.index]}while(q=q.next)}quad.value=strength}function apply(quad,x1,_,x2){if(!quad.value)return!0;var x=quad.x-node.x,y=quad.y-node.y,w=x2-x1,l=x*x+y*y;if(w*w/theta2<l)return l<distanceMax2&&(0===x&&(l+=(x=jiggle())*x),0===y&&(l+=(y=jiggle())*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)),node.vx+=x*quad.value*alpha/l,node.vy+=y*quad.value*alpha/l),!0;if(!(quad.length||l>=distanceMax2)){(quad.data!==node||quad.next)&&(0===x&&(l+=(x=jiggle())*x),0===y&&(l+=(y=jiggle())*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)));do{quad.data!==node&&(w=strengths[quad.data.index]*alpha/l,node.vx+=x*w,node.vy+=y*w)}while(quad=quad.next)}}return force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant$6(+_),initialize(),force):strength},force.distanceMin=function(_){return arguments.length?(distanceMin2=_*_,force):Math.sqrt(distanceMin2)},force.distanceMax=function(_){return arguments.length?(distanceMax2=_*_,force):Math.sqrt(distanceMax2)},force.theta=function(_){return arguments.length?(theta2=_*_,force):Math.sqrt(theta2)},force},exports.forceRadial=function radial(radius,x,y){var nodes,strengths,radiuses,strength=constant$6(.1);function force(alpha){for(var i=0,n=nodes.length;i<n;++i){var node=nodes[i],dx=node.x-x||1e-6,dy=node.y-y||1e-6,r=Math.sqrt(dx*dx+dy*dy),k=(radiuses[i]-r)*strengths[i]*alpha/r;node.vx+=dx*k,node.vy+=dy*k}}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),radiuses=new Array(n),i=0;i<n;++i)radiuses[i]=+radius(nodes[i],i,nodes),strengths[i]=isNaN(radiuses[i])?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof radius&&(radius=constant$6(+radius)),null==x&&(x=0),null==y&&(y=0),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant$6(+_),initialize(),force):strength},force.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant$6(+_),initialize(),force):radius},force.x=function(_){return arguments.length?(x=+_,force):x},force.y=function(_){return arguments.length?(y=+_,force):y},force},exports.forceSimulation=function simulation(nodes){var simulation,alpha=1,alphaMin=.001,alphaDecay=1-Math.pow(alphaMin,1/300),alphaTarget=0,velocityDecay=.6,forces=map$1(),stepper=timer(step),event=dispatch("tick","end");function step(){tick(),event.call("tick",simulation),alpha<alphaMin&&(stepper.stop(),event.call("end",simulation))}function tick(){var i,node,n=nodes.length;for(alpha+=(alphaTarget-alpha)*alphaDecay,forces.each((function(force){force(alpha)})),i=0;i<n;++i)null==(node=nodes[i]).fx?node.x+=node.vx*=velocityDecay:(node.x=node.fx,node.vx=0),null==node.fy?node.y+=node.vy*=velocityDecay:(node.y=node.fy,node.vy=0)}function initializeNodes(){for(var node,i=0,n=nodes.length;i<n;++i){if((node=nodes[i]).index=i,isNaN(node.x)||isNaN(node.y)){var radius=10*Math.sqrt(i),angle=i*initialAngle;node.x=radius*Math.cos(angle),node.y=radius*Math.sin(angle)}(isNaN(node.vx)||isNaN(node.vy))&&(node.vx=node.vy=0)}}function initializeForce(force){return force.initialize&&force.initialize(nodes),force}return null==nodes&&(nodes=[]),initializeNodes(),simulation={tick:tick,restart:function(){return stepper.restart(step),simulation},stop:function(){return stepper.stop(),simulation},nodes:function(_){return arguments.length?(nodes=_,initializeNodes(),forces.each(initializeForce),simulation):nodes},alpha:function(_){return arguments.length?(alpha=+_,simulation):alpha},alphaMin:function(_){return arguments.length?(alphaMin=+_,simulation):alphaMin},alphaDecay:function(_){return arguments.length?(alphaDecay=+_,simulation):+alphaDecay},alphaTarget:function(_){return arguments.length?(alphaTarget=+_,simulation):alphaTarget},velocityDecay:function(_){return arguments.length?(velocityDecay=1-_,simulation):1-velocityDecay},force:function(name,_){return arguments.length>1?(null==_?forces.remove(name):forces.set(name,initializeForce(_)),simulation):forces.get(name)},find:function(x,y,radius){var dx,dy,d2,node,closest,i=0,n=nodes.length;for(null==radius?radius=1/0:radius*=radius,i=0;i<n;++i)(d2=(dx=x-(node=nodes[i]).x)*dx+(dy=y-node.y)*dy)<radius&&(closest=node,radius=d2);return closest},on:function(name,_){return arguments.length>1?(event.on(name,_),simulation):event.on(name)}}},exports.forceX=function x$2(x){var nodes,strengths,xz,strength=constant$6(.1);function force(alpha){for(var node,i=0,n=nodes.length;i<n;++i)(node=nodes[i]).vx+=(xz[i]-node.x)*strengths[i]*alpha}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),xz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(xz[i]=+x(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof x&&(x=constant$6(null==x?0:+x)),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant$6(+_),initialize(),force):strength},force.x=function(_){return arguments.length?(x="function"==typeof _?_:constant$6(+_),initialize(),force):x},force},exports.forceY=function y$2(y){var nodes,strengths,yz,strength=constant$6(.1);function force(alpha){for(var node,i=0,n=nodes.length;i<n;++i)(node=nodes[i]).vy+=(yz[i]-node.y)*strengths[i]*alpha}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),yz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(yz[i]=+y(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof y&&(y=constant$6(null==y?0:+y)),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant$6(+_),initialize(),force):strength},force.y=function(_){return arguments.length?(y="function"==typeof _?_:constant$6(+_),initialize(),force):y},force},exports.formatDefaultLocale=defaultLocale,exports.formatLocale=formatLocale,exports.formatSpecifier=formatSpecifier,exports.precisionFixed=precisionFixed,exports.precisionPrefix=precisionPrefix,exports.precisionRound=precisionRound,exports.geoArea=function area(object){return areaSum.reset(),geoStream(object,areaStream),2*areaSum},exports.geoBounds=function bounds(feature){var i,n,a,b,merged,deltaMax,delta;if(phi1=lambda1=-(lambda0$1=phi0=1/0),ranges=[],geoStream(feature,boundsStream),n=ranges.length){for(ranges.sort(rangeCompare),i=1,merged=[a=ranges[0]];i<n;++i)rangeContains(a,(b=ranges[i])[0])||rangeContains(a,b[1])?(angle(a[0],b[1])>angle(a[0],a[1])&&(a[1]=b[1]),angle(b[0],a[1])>angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(deltaMax=-1/0,i=0,a=merged[n=merged.length-1];i<=n;a=b,++i)b=merged[i],(delta=angle(a[1],b[0]))>deltaMax&&(deltaMax=delta,lambda0$1=b[0],lambda1=a[1])}return ranges=range=null,lambda0$1===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]]},exports.geoCentroid=function centroid(object){W0=W1=X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,geoStream(object,centroidStream);var x=X2,y=Y2,z=Z2,m=x*x+y*y+z*z;return m<1e-12&&(x=X1,y=Y1,z=Z1,W1<1e-6&&(x=X0,y=Y0,z=Z0),(m=x*x+y*y+z*z)<1e-12)?[NaN,NaN]:[atan2(y,x)*degrees$1,asin(z/sqrt(m))*degrees$1]},exports.geoCircle=function circle(){var ring,rotate,center=constant$7([0,0]),radius=constant$7(90),precision=constant$7(6),stream={point:function point(x,y){ring.push(x=rotate(x,y)),x[0]*=degrees$1,x[1]*=degrees$1}};function circle(){var c=center.apply(this,arguments),r=radius.apply(this,arguments)*radians,p=precision.apply(this,arguments)*radians;return ring=[],rotate=rotateRadians(-c[0]*radians,-c[1]*radians,0).invert,circleStream(stream,r,p,1),c={type:"Polygon",coordinates:[ring]},ring=rotate=null,c}return circle.center=function(_){return arguments.length?(center="function"==typeof _?_:constant$7([+_[0],+_[1]]),circle):center},circle.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant$7(+_),circle):radius},circle.precision=function(_){return arguments.length?(precision="function"==typeof _?_:constant$7(+_),circle):precision},circle},exports.geoClipAntimeridian=clipAntimeridian,exports.geoClipCircle=clipCircle,exports.geoClipExtent=function extent$1(){var cache,cacheStream,clip,x0=0,y0=0,x1=960,y1=500;return clip={stream:function(stream){return cache&&cacheStream===stream?cache:cache=clipRectangle(x0,y0,x1,y1)(cacheStream=stream)},extent:function(_){return arguments.length?(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1],cache=cacheStream=null,clip):[[x0,y0],[x1,y1]]}}},exports.geoClipRectangle=clipRectangle,exports.geoContains=function contains(object,point){return(object&&containsObjectType.hasOwnProperty(object.type)?containsObjectType[object.type]:containsGeometry)(object,point)},exports.geoDistance=distance,exports.geoGraticule=graticule,exports.geoGraticule10=function graticule10(){return graticule()()},exports.geoInterpolate=function interpolate$1(a,b){var x0=a[0]*radians,y0=a[1]*radians,x1=b[0]*radians,y1=b[1]*radians,cy0=cos$1(y0),sy0=sin$1(y0),cy1=cos$1(y1),sy1=sin$1(y1),kx0=cy0*cos$1(x0),ky0=cy0*sin$1(x0),kx1=cy1*cos$1(x1),ky1=cy1*sin$1(x1),d=2*asin(sqrt(haversin(y1-y0)+cy0*cy1*haversin(x1-x0))),k=sin$1(d),interpolate=d?function(t){var B=sin$1(t*=d)/k,A=sin$1(d-t)/k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[atan2(y,x)*degrees$1,atan2(z,sqrt(x*x+y*y))*degrees$1]}:function(){return[x0*degrees$1,y0*degrees$1]};return interpolate.distance=d,interpolate},exports.geoLength=length$1,exports.geoPath=function index$1(projection,context){var projectionStream,contextStream,pointRadius=4.5;function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),geoStream(object,projectionStream(contextStream))),contextStream.result()}return path.area=function(object){return geoStream(object,projectionStream(areaStream$1)),areaStream$1.result()},path.measure=function(object){return geoStream(object,projectionStream(lengthStream$1)),lengthStream$1.result()},path.bounds=function(object){return geoStream(object,projectionStream(boundsStream$1)),boundsStream$1.result()},path.centroid=function(object){return geoStream(object,projectionStream(centroidStream$1)),centroidStream$1.result()},path.projection=function(_){return arguments.length?(projectionStream=null==_?(projection=null,identity$4):(projection=_).stream,path):projection},path.context=function(_){return arguments.length?(contextStream=null==_?(context=null,new PathString):new PathContext(context=_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),path):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.projection(projection).context(context)},exports.geoAlbers=albers,exports.geoAlbersUsa=function albersUsa(){var cache,cacheStream,lower48Point,alaskaPoint,hawaiiPoint,point,lower48=albers(),alaska=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={point:function(x,y){point=[x,y]}};function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point.point(x,y),point||(alaskaPoint.point(x,y),point)||(hawaiiPoint.point(x,y),point)}function reset(){return cache=cacheStream=null,albersUsa}return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){return cache&&cacheStream===stream?cache:cache=function multiplex(streams){var n=streams.length;return{point:function(x,y){for(var i=-1;++i<n;)streams[i].point(x,y)},sphere:function(){for(var i=-1;++i<n;)streams[i].sphere()},lineStart:function(){for(var i=-1;++i<n;)streams[i].lineStart()},lineEnd:function(){for(var i=-1;++i<n;)streams[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<n;)streams[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<n;)streams[i].polygonEnd()}}}([lower48.stream(cacheStream=stream),alaska.stream(stream),hawaii.stream(stream)])},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),reset()):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream),alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+1e-6,y+.12*k+1e-6],[x-.214*k-1e-6,y+.234*k-1e-6]]).stream(pointStream),hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+1e-6,y+.166*k+1e-6],[x-.115*k-1e-6,y+.234*k-1e-6]]).stream(pointStream),reset()},albersUsa.fitExtent=function(extent,object){return fitExtent(albersUsa,extent,object)},albersUsa.fitSize=function(size,object){return fitSize(albersUsa,size,object)},albersUsa.fitWidth=function(width,object){return fitWidth(albersUsa,width,object)},albersUsa.fitHeight=function(height,object){return fitHeight(albersUsa,height,object)},albersUsa.scale(1070)},exports.geoAzimuthalEqualArea=function azimuthalEqualArea(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(179.999)},exports.geoAzimuthalEqualAreaRaw=azimuthalEqualAreaRaw,exports.geoAzimuthalEquidistant=function azimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(179.999)},exports.geoAzimuthalEquidistantRaw=azimuthalEquidistantRaw,exports.geoConicConformal=function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])},exports.geoConicConformalRaw=conicConformalRaw,exports.geoConicEqualArea=conicEqualArea,exports.geoConicEqualAreaRaw=conicEqualAreaRaw,exports.geoConicEquidistant=function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])},exports.geoConicEquidistantRaw=conicEquidistantRaw,exports.geoEquirectangular=function equirectangular(){return projection(equirectangularRaw).scale(152.63)},exports.geoEquirectangularRaw=equirectangularRaw,exports.geoGnomonic=function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)},exports.geoGnomonicRaw=gnomonicRaw,exports.geoIdentity=function identity$5(){var y0,x1,y1,cache,cacheStream,projection,k=1,tx=0,ty=0,sx=1,sy=1,transform$$1=identity$4,x0=null,postclip=identity$4;function reset(){return cache=cacheStream=null,projection}return projection={stream:function(stream){return cache&&cacheStream===stream?cache:cache=transform$$1(postclip(cacheStream=stream))},postclip:function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},clipExtent:function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,identity$4):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},scale:function(_){return arguments.length?(transform$$1=scaleTranslate((k=+_)*sx,k*sy,tx,ty),reset()):k},translate:function(_){return arguments.length?(transform$$1=scaleTranslate(k*sx,k*sy,tx=+_[0],ty=+_[1]),reset()):[tx,ty]},reflectX:function(_){return arguments.length?(transform$$1=scaleTranslate(k*(sx=_?-1:1),k*sy,tx,ty),reset()):sx<0},reflectY:function(_){return arguments.length?(transform$$1=scaleTranslate(k*sx,k*(sy=_?-1:1),tx,ty),reset()):sy<0},fitExtent:function(extent,object){return fitExtent(projection,extent,object)},fitSize:function(size,object){return fitSize(projection,size,object)},fitWidth:function(width,object){return fitWidth(projection,width,object)},fitHeight:function(height,object){return fitHeight(projection,height,object)}}},exports.geoProjection=projection,exports.geoProjectionMutator=projectionMutator,exports.geoMercator=function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau$3)},exports.geoMercatorRaw=mercatorRaw,exports.geoNaturalEarth1=function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295)},exports.geoNaturalEarth1Raw=naturalEarth1Raw,exports.geoOrthographic=function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90.000001)},exports.geoOrthographicRaw=orthographicRaw,exports.geoStereographic=function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)},exports.geoStereographicRaw=stereographicRaw,exports.geoTransverseMercator=function transverseMercator(){var m=mercatorProjection(transverseMercatorRaw),center=m.center,rotate=m.rotate;return m.center=function(_){return arguments.length?center([-_[1],_[0]]):[(_=center())[1],-_[0]]},m.rotate=function(_){return arguments.length?rotate([_[0],_[1],_.length>2?_[2]+90:90]):[(_=rotate())[0],_[1],_[2]-90]},rotate([0,0,90]).scale(159.155)},exports.geoTransverseMercatorRaw=transverseMercatorRaw,exports.geoRotation=rotation,exports.geoStream=geoStream,exports.geoTransform=function transform(methods){return{stream:transformer(methods)}},exports.cluster=function cluster(){var separation=defaultSeparation,dx=1,dy=1,nodeSize=!1;function cluster(root){var previousNode,x=0;root.eachAfter((function(node){var children=node.children;children?(node.x=function meanX(children){return children.reduce(meanXReduce,0)/children.length}(children),node.y=function maxY(children){return 1+children.reduce(maxYReduce,0)}(children)):(node.x=previousNode?x+=separation(node,previousNode):0,node.y=0,previousNode=node)}));var left=function leafLeft(node){for(var children;children=node.children;)node=children[0];return node}(root),right=function leafRight(node){for(var children;children=node.children;)node=children[children.length-1];return node}(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return root.eachAfter(nodeSize?function(node){node.x=(node.x-root.x)*dx,node.y=(root.y-node.y)*dy}:function(node){node.x=(node.x-x0)/(x1-x0)*dx,node.y=(1-(root.y?node.y/root.y:1))*dy})}return cluster.separation=function(x){return arguments.length?(separation=x,cluster):separation},cluster.size=function(x){return arguments.length?(nodeSize=!1,dx=+x[0],dy=+x[1],cluster):nodeSize?null:[dx,dy]},cluster.nodeSize=function(x){return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],cluster):nodeSize?[dx,dy]:null},cluster},exports.hierarchy=hierarchy,exports.pack=function index$2(){var radius=null,dx=1,dy=1,padding=constantZero;function pack(root){return root.x=dx/2,root.y=dy/2,radius?root.eachBefore(radiusLeaf(radius)).eachAfter(packChildren(padding,.5)).eachBefore(translateChild(1)):root.eachBefore(radiusLeaf(defaultRadius$1)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(padding,root.r/Math.min(dx,dy))).eachBefore(translateChild(Math.min(dx,dy)/(2*root.r))),root}return pack.radius=function(x){return arguments.length?(radius=optional(x),pack):radius},pack.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],pack):[dx,dy]},pack.padding=function(x){return arguments.length?(padding="function"==typeof x?x:constant$8(+x),pack):padding},pack},exports.packSiblings=function siblings(circles){return packEnclose(circles),circles},exports.packEnclose=enclose,exports.partition=function partition(){var dx=1,dy=1,padding=0,round=!1;function partition(root){var n=root.height+1;return root.x0=root.y0=padding,root.x1=dx,root.y1=dy/n,root.eachBefore(function positionNode(dy,n){return function(node){node.children&&treemapDice(node,node.x0,dy*(node.depth+1)/n,node.x1,dy*(node.depth+2)/n);var x0=node.x0,y0=node.y0,x1=node.x1-padding,y1=node.y1-padding;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1}}(dy,n)),round&&root.eachBefore(roundNode),root}return partition.round=function(x){return arguments.length?(round=!!x,partition):round},partition.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],partition):[dx,dy]},partition.padding=function(x){return arguments.length?(padding=+x,partition):padding},partition},exports.stratify=function stratify(){var id=defaultId,parentId=defaultParentId;function stratify(data){var d,i,root,parent,node,nodeId,nodeKey,n=data.length,nodes=new Array(n),nodeByKey={};for(i=0;i<n;++i)d=data[i],node=nodes[i]=new Node(d),null!=(nodeId=id(d,i,data))&&(nodeId+="")&&(nodeByKey[nodeKey="$"+(node.id=nodeId)]=nodeKey in nodeByKey?ambiguous:node);for(i=0;i<n;++i)if(node=nodes[i],null!=(nodeId=parentId(data[i],i,data))&&(nodeId+="")){if(!(parent=nodeByKey["$"+nodeId]))throw new Error("missing: "+nodeId);if(parent===ambiguous)throw new Error("ambiguous: "+nodeId);parent.children?parent.children.push(node):parent.children=[node],node.parent=parent}else{if(root)throw new Error("multiple roots");root=node}if(!root)throw new Error("no root");if(root.parent=preroot,root.eachBefore((function(node){node.depth=node.parent.depth+1,--n})).eachBefore(computeHeight),root.parent=null,n>0)throw new Error("cycle");return root}return stratify.id=function(x){return arguments.length?(id=required(x),stratify):id},stratify.parentId=function(x){return arguments.length?(parentId=required(x),stratify):parentId},stratify},exports.tree=function tree(){var separation=defaultSeparation$1,dx=1,dy=1,nodeSize=null;function tree(root){var t=function treeRoot(root){for(var node,child,children,i,n,tree=new TreeNode(root,0),nodes=[tree];node=nodes.pop();)if(children=node._.children)for(node.children=new Array(n=children.length),i=n-1;i>=0;--i)nodes.push(child=node.children[i]=new TreeNode(children[i],i)),child.parent=node;return(tree.parent=new TreeNode(null,0)).children=[tree],tree}(root);if(t.eachAfter(firstWalk),t.parent.m=-t.z,t.eachBefore(secondWalk),nodeSize)root.eachBefore(sizeNode);else{var left=root,right=root,bottom=root;root.eachBefore((function(node){node.x<left.x&&(left=node),node.x>right.x&&(right=node),node.depth>bottom.depth&&(bottom=node)}));var s=left===right?1:separation(left,right)/2,tx=s-left.x,kx=dx/(right.x+s+tx),ky=dy/(bottom.depth||1);root.eachBefore((function(node){node.x=(node.x+tx)*kx,node.y=node.depth*ky}))}return root}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children){!function executeShifts(v){for(var w,shift=0,change=0,children=v.children,i=children.length;--i>=0;)(w=children[i]).z+=shift,w.m+=shift,shift+=w.s+(change+=w.c)}(v);var midpoint=(children[0].z+children[children.length-1].z)/2;w?(v.z=w.z+separation(v._,w._),v.m=v.z-midpoint):v.z=midpoint}else w&&(v.z=w.z+separation(v._,w._));v.parent.A=function apportion(v,w,ancestor){if(w){for(var shift,vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m;vim=nextRight(vim),vip=nextLeft(vip),vim&&vip;)vom=nextLeft(vom),(vop=nextRight(vop)).a=v,(shift=vim.z+sim-vip.z-sip+separation(vim._,vip._))>0&&(moveSubtree(nextAncestor(vim,v,ancestor),v,shift),sip+=shift,sop+=shift),sim+=vim.m,sip+=vip.m,som+=vom.m,sop+=vop.m;vim&&!nextRight(vop)&&(vop.t=vim,vop.m+=sim-sop),vip&&!nextLeft(vom)&&(vom.t=vip,vom.m+=sip-som,ancestor=v)}return ancestor}(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function sizeNode(node){node.x*=dx,node.y=node.depth*dy}return tree.separation=function(x){return arguments.length?(separation=x,tree):separation},tree.size=function(x){return arguments.length?(nodeSize=!1,dx=+x[0],dy=+x[1],tree):nodeSize?null:[dx,dy]},tree.nodeSize=function(x){return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],tree):nodeSize?[dx,dy]:null},tree},exports.treemap=function index$3(){var tile=squarify,round=!1,dx=1,dy=1,paddingStack=[0],paddingInner=constantZero,paddingTop=constantZero,paddingRight=constantZero,paddingBottom=constantZero,paddingLeft=constantZero;function treemap(root){return root.x0=root.y0=0,root.x1=dx,root.y1=dy,root.eachBefore(positionNode),paddingStack=[0],round&&root.eachBefore(roundNode),root}function positionNode(node){var p=paddingStack[node.depth],x0=node.x0+p,y0=node.y0+p,x1=node.x1-p,y1=node.y1-p;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1,node.children&&(p=paddingStack[node.depth+1]=paddingInner(node)/2,x0+=paddingLeft(node)-p,y0+=paddingTop(node)-p,(x1-=paddingRight(node)-p)<x0&&(x0=x1=(x0+x1)/2),(y1-=paddingBottom(node)-p)<y0&&(y0=y1=(y0+y1)/2),tile(node,x0,y0,x1,y1))}return treemap.round=function(x){return arguments.length?(round=!!x,treemap):round},treemap.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],treemap):[dx,dy]},treemap.tile=function(x){return arguments.length?(tile=required(x),treemap):tile},treemap.padding=function(x){return arguments.length?treemap.paddingInner(x).paddingOuter(x):treemap.paddingInner()},treemap.paddingInner=function(x){return arguments.length?(paddingInner="function"==typeof x?x:constant$8(+x),treemap):paddingInner},treemap.paddingOuter=function(x){return arguments.length?treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):treemap.paddingTop()},treemap.paddingTop=function(x){return arguments.length?(paddingTop="function"==typeof x?x:constant$8(+x),treemap):paddingTop},treemap.paddingRight=function(x){return arguments.length?(paddingRight="function"==typeof x?x:constant$8(+x),treemap):paddingRight},treemap.paddingBottom=function(x){return arguments.length?(paddingBottom="function"==typeof x?x:constant$8(+x),treemap):paddingBottom},treemap.paddingLeft=function(x){return arguments.length?(paddingLeft="function"==typeof x?x:constant$8(+x),treemap):paddingLeft},treemap},exports.treemapBinary=function binary(parent,x0,y0,x1,y1){var i,sum,nodes=parent.children,n=nodes.length,sums=new Array(n+1);for(sums[0]=sum=i=0;i<n;++i)sums[i+1]=sum+=nodes[i].value;!function partition(i,j,value,x0,y0,x1,y1){if(i>=j-1){var node=nodes[i];return node.x0=x0,node.y0=y0,node.x1=x1,void(node.y1=y1)}for(var valueOffset=sums[i],valueTarget=value/2+valueOffset,k=i+1,hi=j-1;k<hi;){var mid=k+hi>>>1;sums[mid]<valueTarget?k=mid+1:hi=mid}valueTarget-sums[k-1]<sums[k]-valueTarget&&i+1<k&&--k;var valueLeft=sums[k]-valueOffset,valueRight=value-valueLeft;if(x1-x0>y1-y0){var xk=(x0*valueRight+x1*valueLeft)/value;partition(i,k,valueLeft,x0,y0,xk,y1),partition(k,j,valueRight,xk,y0,x1,y1)}else{var yk=(y0*valueRight+y1*valueLeft)/value;partition(i,k,valueLeft,x0,y0,x1,yk),partition(k,j,valueRight,x0,yk,x1,y1)}}(0,n,parent.value,x0,y0,x1,y1)},exports.treemapDice=treemapDice,exports.treemapSlice=treemapSlice,exports.treemapSliceDice=function sliceDice(parent,x0,y0,x1,y1){(1&parent.depth?treemapSlice:treemapDice)(parent,x0,y0,x1,y1)},exports.treemapSquarify=squarify,exports.treemapResquarify=resquarify,exports.interpolate=interpolateValue,exports.interpolateArray=array$1,exports.interpolateBasis=basis$1,exports.interpolateBasisClosed=basisClosed,exports.interpolateDate=date,exports.interpolateNumber=reinterpolate,exports.interpolateObject=object,exports.interpolateRound=interpolateRound,exports.interpolateString=interpolateString,exports.interpolateTransformCss=interpolateTransformCss,exports.interpolateTransformSvg=interpolateTransformSvg,exports.interpolateZoom=interpolateZoom,exports.interpolateRgb=interpolateRgb,exports.interpolateRgbBasis=rgbBasis,exports.interpolateRgbBasisClosed=rgbBasisClosed,exports.interpolateHsl=hsl$2,exports.interpolateHslLong=hslLong,exports.interpolateLab=function lab$1(start,end){var l=nogamma((start=lab(start)).l,(end=lab(end)).l),a=nogamma(start.a,end.a),b=nogamma(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.l=l(t),start.a=a(t),start.b=b(t),start.opacity=opacity(t),start+""}},exports.interpolateHcl=hcl$2,exports.interpolateHclLong=hclLong,exports.interpolateCubehelix=cubehelix$2,exports.interpolateCubehelixLong=cubehelixLong,exports.quantize=function quantize(interpolator,n){for(var samples=new Array(n),i=0;i<n;++i)samples[i]=interpolator(i/(n-1));return samples},exports.path=path,exports.polygonArea=function area$1(polygon){for(var a,i=-1,n=polygon.length,b=polygon[n-1],area=0;++i<n;)a=b,b=polygon[i],area+=a[1]*b[0]-a[0]*b[1];return area/2},exports.polygonCentroid=function centroid$1(polygon){for(var a,c,i=-1,n=polygon.length,x=0,y=0,b=polygon[n-1],k=0;++i<n;)a=b,b=polygon[i],k+=c=a[0]*b[1]-b[0]*a[1],x+=(a[0]+b[0])*c,y+=(a[1]+b[1])*c;return[x/(k*=3),y/k]},exports.polygonHull=function hull(points){if((n=points.length)<3)return null;var i,n,sortedPoints=new Array(n),flippedPoints=new Array(n);for(i=0;i<n;++i)sortedPoints[i]=[+points[i][0],+points[i][1],i];for(sortedPoints.sort(lexicographicOrder),i=0;i<n;++i)flippedPoints[i]=[sortedPoints[i][0],-sortedPoints[i][1]];var upperIndexes=computeUpperHullIndexes(sortedPoints),lowerIndexes=computeUpperHullIndexes(flippedPoints),skipLeft=lowerIndexes[0]===upperIndexes[0],skipRight=lowerIndexes[lowerIndexes.length-1]===upperIndexes[upperIndexes.length-1],hull=[];for(i=upperIndexes.length-1;i>=0;--i)hull.push(points[sortedPoints[upperIndexes[i]][2]]);for(i=+skipLeft;i<lowerIndexes.length-skipRight;++i)hull.push(points[sortedPoints[lowerIndexes[i]][2]]);return hull},exports.polygonContains=function contains$1(polygon,point){for(var x1,y1,n=polygon.length,p=polygon[n-1],x=point[0],y=point[1],x0=p[0],y0=p[1],inside=!1,i=0;i<n;++i)x1=(p=polygon[i])[0],(y1=p[1])>y!=y0>y&&x<(x0-x1)*(y-y1)/(y0-y1)+x1&&(inside=!inside),x0=x1,y0=y1;return inside},exports.polygonLength=function length$2(polygon){for(var xa,ya,i=-1,n=polygon.length,b=polygon[n-1],xb=b[0],yb=b[1],perimeter=0;++i<n;)xa=xb,ya=yb,xa-=xb=(b=polygon[i])[0],ya-=yb=b[1],perimeter+=Math.sqrt(xa*xa+ya*ya);return perimeter},exports.quadtree=quadtree,exports.queue=queue,exports.randomUniform=uniform,exports.randomNormal=normal,exports.randomLogNormal=logNormal,exports.randomBates=bates,exports.randomIrwinHall=irwinHall,exports.randomExponential=exponential$1,exports.request=request,exports.html=html,exports.json=json,exports.text=text,exports.xml=xml,exports.csv=csv$1,exports.tsv=tsv$1,exports.scaleBand=band,exports.scalePoint=function point$1(){return function pointish(scale){var copy=scale.copy;return scale.padding=scale.paddingOuter,delete scale.paddingInner,delete scale.paddingOuter,scale.copy=function(){return pointish(copy())},scale}(band().paddingInner(1))},exports.scaleIdentity=function identity$6(){var domain=[0,1];function scale(x){return+x}return scale.invert=scale,scale.domain=scale.range=function(_){return arguments.length?(domain=map$3.call(_,number$2),scale):domain.slice()},scale.copy=function(){return identity$6().domain(domain)},linearish(scale)},exports.scaleLinear=function linear$2(){var scale=continuous(deinterpolateLinear,reinterpolate);return scale.copy=function(){return copy(scale,linear$2())},linearish(scale)},exports.scaleLog=function log$1(){var scale=continuous(deinterpolate,reinterpolate$1).domain([1,10]),domain=scale.domain,base=10,logs=logp(10),pows=powp(10);function rescale(){return logs=logp(base),pows=powp(base),domain()[0]<0&&(logs=reflect(logs),pows=reflect(pows)),scale}return scale.base=function(_){return arguments.length?(base=+_,rescale()):base},scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.ticks=function(count){var r,d=domain(),u=d[0],v=d[d.length-1];(r=v<u)&&(i=u,u=v,v=i);var p,k,t,i=logs(u),j=logs(v),n=null==count?10:+count,z=[];if(!(base%1)&&j-i<n){if(i=Math.round(i)-1,j=Math.round(j)+1,u>0){for(;i<j;++i)for(k=1,p=pows(i);k<base;++k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}}else for(;i<j;++i)for(k=base-1,p=pows(i);k>=1;--k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}}else z=ticks(i,j,Math.min(j-i,n)).map(pows);return r?z.reverse():z},scale.tickFormat=function(count,specifier){if(null==specifier&&(specifier=10===base?".0e":","),"function"!=typeof specifier&&(specifier=exports.format(specifier)),count===1/0)return specifier;null==count&&(count=10);var k=Math.max(1,base*count/scale.ticks().length);return function(d){var i=d/pows(Math.round(logs(d)));return i*base<base-.5&&(i*=base),i<=k?specifier(d):""}},scale.nice=function(){return domain(nice(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){return pows(Math.ceil(logs(x)))}}))},scale.copy=function(){return copy(scale,log$1().base(base))},scale},exports.scaleOrdinal=ordinal,exports.scaleImplicit=implicit,exports.scalePow=pow$1,exports.scaleSqrt=function sqrt$1(){return pow$1().exponent(.5)},exports.scaleQuantile=function quantile$$1(){var domain=[],range=[],thresholds=[];function rescale(){var i=0,n=Math.max(1,range.length);for(thresholds=new Array(n-1);++i<n;)thresholds[i-1]=threshold(domain,i/n);return scale}function scale(x){if(!isNaN(x=+x))return range[bisectRight(thresholds,x)]}return scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:[i>0?thresholds[i-1]:domain[0],i<thresholds.length?thresholds[i]:domain[domain.length-1]]},scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(var d,i=0,n=_.length;i<n;++i)null==(d=_[i])||isNaN(d=+d)||domain.push(d);return domain.sort(ascending),rescale()},scale.range=function(_){return arguments.length?(range=slice$5.call(_),rescale()):range.slice()},scale.quantiles=function(){return thresholds.slice()},scale.copy=function(){return quantile$$1().domain(domain).range(range)},scale},exports.scaleQuantize=function quantize$1(){var x0=0,x1=1,n=1,domain=[.5],range=[0,1];function scale(x){if(x<=x)return range[bisectRight(domain,x,0,n)]}function rescale(){var i=-1;for(domain=new Array(n);++i<n;)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);return scale}return scale.domain=function(_){return arguments.length?(x0=+_[0],x1=+_[1],rescale()):[x0,x1]},scale.range=function(_){return arguments.length?(n=(range=slice$5.call(_)).length-1,rescale()):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]]},scale.copy=function(){return quantize$1().domain([x0,x1]).range(range)},linearish(scale)},exports.scaleThreshold=function threshold$1(){var domain=[.5],range=[0,1],n=1;function scale(x){if(x<=x)return range[bisectRight(domain,x,0,n)]}return scale.domain=function(_){return arguments.length?(domain=slice$5.call(_),n=Math.min(domain.length,range.length-1),scale):domain.slice()},scale.range=function(_){return arguments.length?(range=slice$5.call(_),n=Math.min(domain.length,range.length-1),scale):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return[domain[i-1],domain[i]]},scale.copy=function(){return threshold$1().domain(domain).range(range)},scale},exports.scaleTime=function time(){return calendar(year,month,sunday,day,hour,minute,second,millisecond,exports.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},exports.scaleUtc=function utcTime(){return calendar(utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,millisecond,exports.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},exports.schemeCategory10=category10,exports.schemeCategory20b=category20b,exports.schemeCategory20c=category20c,exports.schemeCategory20=category20,exports.interpolateCubehelixDefault=cubehelix$3,exports.interpolateRainbow=function rainbow$1(t){(t<0||t>1)&&(t-=Math.floor(t));var ts=Math.abs(t-.5);return rainbow.h=360*t-100,rainbow.s=1.5-1.5*ts,rainbow.l=.8-.9*ts,rainbow+""},exports.interpolateWarm=warm,exports.interpolateCool=cool,exports.interpolateViridis=viridis,exports.interpolateMagma=magma,exports.interpolateInferno=inferno,exports.interpolatePlasma=plasma,exports.scaleSequential=function sequential(interpolator){var x0=0,x1=1,clamp=!1;function scale(x){var t=(x-x0)/(x1-x0);return interpolator(clamp?Math.max(0,Math.min(1,t)):t)}return scale.domain=function(_){return arguments.length?(x0=+_[0],x1=+_[1],scale):[x0,x1]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.copy=function(){return sequential(interpolator).domain([x0,x1]).clamp(clamp)},linearish(scale)},exports.create=function create(name){return select(creator(name).call(document.documentElement))},exports.creator=creator,exports.local=local$1,exports.matcher=matcher$1,exports.mouse=mouse,exports.namespace=namespace,exports.namespaces=namespaces,exports.clientPoint=point,exports.select=select,exports.selectAll=function selectAll(selector){return"string"==typeof selector?new Selection([document.querySelectorAll(selector)],[document.documentElement]):new Selection([null==selector?[]:selector],root)},exports.selection=selection,exports.selector=selector,exports.selectorAll=selectorAll,exports.style=styleValue,exports.touch=touch,exports.touches=function touches(node,touches){null==touches&&(touches=sourceEvent().touches);for(var i=0,n=touches?touches.length:0,points=new Array(n);i<n;++i)points[i]=point(node,touches[i]);return points},exports.window=defaultView,exports.customEvent=customEvent,exports.arc=function arc(){var innerRadius=arcInnerRadius,outerRadius=arcOuterRadius,cornerRadius=constant$10(0),padRadius=null,startAngle=arcStartAngle,endAngle=arcEndAngle,padAngle=arcPadAngle,context=null;function arc(){var buffer,r,r0=+innerRadius.apply(this,arguments),r1=+outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)-halfPi$3,a1=endAngle.apply(this,arguments)-halfPi$3,da=abs$1(a1-a0),cw=a1>a0;if(context||(context=buffer=path()),r1<r0&&(r=r1,r1=r0,r0=r),r1>1e-12)if(da>tau$4-1e-12)context.moveTo(r1*cos$2(a0),r1*sin$2(a0)),context.arc(0,0,r1,a0,a1,!cw),r0>1e-12&&(context.moveTo(r0*cos$2(a1),r0*sin$2(a1)),context.arc(0,0,r0,a1,a0,cw));else{var t0,t1,a01=a0,a11=a1,a00=a0,a10=a1,da0=da,da1=da,ap=padAngle.apply(this,arguments)/2,rp=ap>1e-12&&(padRadius?+padRadius.apply(this,arguments):sqrt$2(r0*r0+r1*r1)),rc=min$1(abs$1(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0=rc,rc1=rc;if(rp>1e-12){var p0=asin$1(rp/r0*sin$2(ap)),p1=asin$1(rp/r1*sin$2(ap));(da0-=2*p0)>1e-12?(a00+=p0*=cw?1:-1,a10-=p0):(da0=0,a00=a10=(a0+a1)/2),(da1-=2*p1)>1e-12?(a01+=p1*=cw?1:-1,a11-=p1):(da1=0,a01=a11=(a0+a1)/2)}var x01=r1*cos$2(a01),y01=r1*sin$2(a01),x10=r0*cos$2(a10),y10=r0*sin$2(a10);if(rc>1e-12){var x11=r1*cos$2(a11),y11=r1*sin$2(a11),x00=r0*cos$2(a00),y00=r0*sin$2(a00);if(da<pi$4){var oc=da0>1e-12?intersect(x01,y01,x00,y00,x11,y11,x10,y10):[x10,y10],ax=x01-oc[0],ay=y01-oc[1],bx=x11-oc[0],by=y11-oc[1],kc=1/sin$2(acos$1((ax*bx+ay*by)/(sqrt$2(ax*ax+ay*ay)*sqrt$2(bx*bx+by*by)))/2),lc=sqrt$2(oc[0]*oc[0]+oc[1]*oc[1]);rc0=min$1(rc,(r0-lc)/(kc-1)),rc1=min$1(rc,(r1-lc)/(kc+1))}}da1>1e-12?rc1>1e-12?(t0=cornerTangents(x00,y00,x01,y01,r1,rc1,cw),t1=cornerTangents(x11,y11,x10,y10,r1,rc1,cw),context.moveTo(t0.cx+t0.x01,t0.cy+t0.y01),rc1<rc?context.arc(t0.cx,t0.cy,rc1,atan2$1(t0.y01,t0.x01),atan2$1(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc1,atan2$1(t0.y01,t0.x01),atan2$1(t0.y11,t0.x11),!cw),context.arc(0,0,r1,atan2$1(t0.cy+t0.y11,t0.cx+t0.x11),atan2$1(t1.cy+t1.y11,t1.cx+t1.x11),!cw),context.arc(t1.cx,t1.cy,rc1,atan2$1(t1.y11,t1.x11),atan2$1(t1.y01,t1.x01),!cw))):(context.moveTo(x01,y01),context.arc(0,0,r1,a01,a11,!cw)):context.moveTo(x01,y01),r0>1e-12&&da0>1e-12?rc0>1e-12?(t0=cornerTangents(x10,y10,x11,y11,r0,-rc0,cw),t1=cornerTangents(x01,y01,x00,y00,r0,-rc0,cw),context.lineTo(t0.cx+t0.x01,t0.cy+t0.y01),rc0<rc?context.arc(t0.cx,t0.cy,rc0,atan2$1(t0.y01,t0.x01),atan2$1(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc0,atan2$1(t0.y01,t0.x01),atan2$1(t0.y11,t0.x11),!cw),context.arc(0,0,r0,atan2$1(t0.cy+t0.y11,t0.cx+t0.x11),atan2$1(t1.cy+t1.y11,t1.cx+t1.x11),cw),context.arc(t1.cx,t1.cy,rc0,atan2$1(t1.y11,t1.x11),atan2$1(t1.y01,t1.x01),!cw))):context.arc(0,0,r0,a10,a00,cw):context.lineTo(x10,y10)}else context.moveTo(0,0);if(context.closePath(),buffer)return context=null,buffer+""||null}return arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-pi$4/2;return[cos$2(a)*r,sin$2(a)*r]},arc.innerRadius=function(_){return arguments.length?(innerRadius="function"==typeof _?_:constant$10(+_),arc):innerRadius},arc.outerRadius=function(_){return arguments.length?(outerRadius="function"==typeof _?_:constant$10(+_),arc):outerRadius},arc.cornerRadius=function(_){return arguments.length?(cornerRadius="function"==typeof _?_:constant$10(+_),arc):cornerRadius},arc.padRadius=function(_){return arguments.length?(padRadius=null==_?null:"function"==typeof _?_:constant$10(+_),arc):padRadius},arc.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:constant$10(+_),arc):startAngle},arc.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:constant$10(+_),arc):endAngle},arc.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:constant$10(+_),arc):padAngle},arc.context=function(_){return arguments.length?(context=null==_?null:_,arc):context},arc},exports.area=area$2,exports.line=line,exports.pie=function pie(){var value=identity$7,sortValues=descending$1,sort=null,startAngle=constant$10(0),endAngle=constant$10(tau$4),padAngle=constant$10(0);function pie(data){var i,j,k,a1,v,n=data.length,sum=0,index=new Array(n),arcs=new Array(n),a0=+startAngle.apply(this,arguments),da=Math.min(tau$4,Math.max(-tau$4,endAngle.apply(this,arguments)-a0)),p=Math.min(Math.abs(da)/n,padAngle.apply(this,arguments)),pa=p*(da<0?-1:1);for(i=0;i<n;++i)(v=arcs[index[i]=i]=+value(data[i],i,data))>0&&(sum+=v);for(null!=sortValues?index.sort((function(i,j){return sortValues(arcs[i],arcs[j])})):null!=sort&&index.sort((function(i,j){return sort(data[i],data[j])})),i=0,k=sum?(da-n*pa)/sum:0;i<n;++i,a0=a1)j=index[i],a1=a0+((v=arcs[j])>0?v*k:0)+pa,arcs[j]={data:data[j],index:i,value:v,startAngle:a0,endAngle:a1,padAngle:p};return arcs}return pie.value=function(_){return arguments.length?(value="function"==typeof _?_:constant$10(+_),pie):value},pie.sortValues=function(_){return arguments.length?(sortValues=_,sort=null,pie):sortValues},pie.sort=function(_){return arguments.length?(sort=_,sortValues=null,pie):sort},pie.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:constant$10(+_),pie):startAngle},pie.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:constant$10(+_),pie):endAngle},pie.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:constant$10(+_),pie):padAngle},pie},exports.areaRadial=areaRadial,exports.radialArea=areaRadial,exports.lineRadial=lineRadial$1,exports.radialLine=lineRadial$1,exports.pointRadial=pointRadial,exports.linkHorizontal=function linkHorizontal(){return link$2(curveHorizontal)},exports.linkVertical=function linkVertical(){return link$2(curveVertical)},exports.linkRadial=function linkRadial(){var l=link$2(curveRadial$1);return l.angle=l.x,delete l.x,l.radius=l.y,delete l.y,l},exports.symbol=function symbol(){var type=constant$10(circle$2),size=constant$10(64),context=null;function symbol(){var buffer;if(context||(context=buffer=path()),type.apply(this,arguments).draw(context,+size.apply(this,arguments)),buffer)return context=null,buffer+""||null}return symbol.type=function(_){return arguments.length?(type="function"==typeof _?_:constant$10(_),symbol):type},symbol.size=function(_){return arguments.length?(size="function"==typeof _?_:constant$10(+_),symbol):size},symbol.context=function(_){return arguments.length?(context=null==_?null:_,symbol):context},symbol},exports.symbols=symbols,exports.symbolCircle=circle$2,exports.symbolCross=cross$2,exports.symbolDiamond=diamond,exports.symbolSquare=square,exports.symbolStar=star,exports.symbolTriangle=triangle,exports.symbolWye=wye,exports.curveBasisClosed=function basisClosed$1(context){return new BasisClosed(context)},exports.curveBasisOpen=function basisOpen(context){return new BasisOpen(context)},exports.curveBasis=function basis$2(context){return new Basis(context)},exports.curveBundle=bundle,exports.curveCardinalClosed=cardinalClosed,exports.curveCardinalOpen=cardinalOpen,exports.curveCardinal=cardinal,exports.curveCatmullRomClosed=catmullRomClosed,exports.curveCatmullRomOpen=catmullRomOpen,exports.curveCatmullRom=catmullRom,exports.curveLinearClosed=function linearClosed(context){return new LinearClosed(context)},exports.curveLinear=curveLinear,exports.curveMonotoneX=function monotoneX(context){return new MonotoneX(context)},exports.curveMonotoneY=function monotoneY(context){return new MonotoneY(context)},exports.curveNatural=function natural(context){return new Natural(context)},exports.curveStep=function step(context){return new Step(context,.5)},exports.curveStepAfter=function stepAfter(context){return new Step(context,1)},exports.curveStepBefore=function stepBefore(context){return new Step(context,0)},exports.stack=function stack(){var keys=constant$10([]),order=none$2,offset=none$1,value=stackValue;function stack(data){var i,oz,kz=keys.apply(this,arguments),m=data.length,n=kz.length,sz=new Array(n);for(i=0;i<n;++i){for(var sij,ki=kz[i],si=sz[i]=new Array(m),j=0;j<m;++j)si[j]=sij=[0,+value(data[j],ki,j,data)],sij.data=data[j];si.key=ki}for(i=0,oz=order(sz);i<n;++i)sz[oz[i]].index=i;return offset(sz,oz),sz}return stack.keys=function(_){return arguments.length?(keys="function"==typeof _?_:constant$10(slice$6.call(_)),stack):keys},stack.value=function(_){return arguments.length?(value="function"==typeof _?_:constant$10(+_),stack):value},stack.order=function(_){return arguments.length?(order=null==_?none$2:"function"==typeof _?_:constant$10(slice$6.call(_)),stack):order},stack.offset=function(_){return arguments.length?(offset=null==_?none$1:_,stack):offset},stack},exports.stackOffsetExpand=function expand(series,order){if((n=series.length)>0){for(var i,n,y,j=0,m=series[0].length;j<m;++j){for(y=i=0;i<n;++i)y+=series[i][j][1]||0;if(y)for(i=0;i<n;++i)series[i][j][1]/=y}none$1(series,order)}},exports.stackOffsetDiverging=function diverging(series,order){if((n=series.length)>1)for(var i,d,dy,yp,yn,n,j=0,m=series[order[0]].length;j<m;++j)for(yp=yn=0,i=0;i<n;++i)(dy=(d=series[order[i]][j])[1]-d[0])>=0?(d[0]=yp,d[1]=yp+=dy):dy<0?(d[1]=yn,d[0]=yn+=dy):d[0]=yp},exports.stackOffsetNone=none$1,exports.stackOffsetSilhouette=function silhouette(series,order){if((n=series.length)>0){for(var n,j=0,s0=series[order[0]],m=s0.length;j<m;++j){for(var i=0,y=0;i<n;++i)y+=series[i][j][1]||0;s0[j][1]+=s0[j][0]=-y/2}none$1(series,order)}},exports.stackOffsetWiggle=function wiggle(series,order){if((n=series.length)>0&&(m=(s0=series[order[0]]).length)>0){for(var s0,m,n,y=0,j=1;j<m;++j){for(var i=0,s1=0,s2=0;i<n;++i){for(var si=series[order[i]],sij0=si[j][1]||0,s3=(sij0-(si[j-1][1]||0))/2,k=0;k<i;++k){var sk=series[order[k]];s3+=(sk[j][1]||0)-(sk[j-1][1]||0)}s1+=sij0,s2+=s3*sij0}s0[j-1][1]+=s0[j-1][0]=y,s1&&(y-=s2/s1)}s0[j-1][1]+=s0[j-1][0]=y,none$1(series,order)}},exports.stackOrderAscending=ascending$2,exports.stackOrderDescending=function descending$2(series){return ascending$2(series).reverse()},exports.stackOrderInsideOut=function insideOut(series){var i,j,n=series.length,sums=series.map(sum$2),order=none$2(series).sort((function(a,b){return sums[b]-sums[a]})),top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i)j=order[i],top<bottom?(top+=sums[j],tops.push(j)):(bottom+=sums[j],bottoms.push(j));return bottoms.reverse().concat(tops)},exports.stackOrderNone=none$2,exports.stackOrderReverse=function reverse(series){return none$2(series).reverse()},exports.timeInterval=newInterval,exports.timeMillisecond=millisecond,exports.timeMilliseconds=milliseconds,exports.utcMillisecond=millisecond,exports.utcMilliseconds=milliseconds,exports.timeSecond=second,exports.timeSeconds=seconds,exports.utcSecond=second,exports.utcSeconds=seconds,exports.timeMinute=minute,exports.timeMinutes=minutes,exports.timeHour=hour,exports.timeHours=hours,exports.timeDay=day,exports.timeDays=days,exports.timeWeek=sunday,exports.timeWeeks=sundays,exports.timeSunday=sunday,exports.timeSundays=sundays,exports.timeMonday=monday,exports.timeMondays=mondays,exports.timeTuesday=tuesday,exports.timeTuesdays=tuesdays,exports.timeWednesday=wednesday,exports.timeWednesdays=wednesdays,exports.timeThursday=thursday,exports.timeThursdays=thursdays,exports.timeFriday=friday,exports.timeFridays=fridays,exports.timeSaturday=saturday,exports.timeSaturdays=saturdays,exports.timeMonth=month,exports.timeMonths=months,exports.timeYear=year,exports.timeYears=years,exports.utcMinute=utcMinute,exports.utcMinutes=utcMinutes,exports.utcHour=utcHour,exports.utcHours=utcHours,exports.utcDay=utcDay,exports.utcDays=utcDays,exports.utcWeek=utcSunday,exports.utcWeeks=utcSundays,exports.utcSunday=utcSunday,exports.utcSundays=utcSundays,exports.utcMonday=utcMonday,exports.utcMondays=utcMondays,exports.utcTuesday=utcTuesday,exports.utcTuesdays=utcTuesdays,exports.utcWednesday=utcWednesday,exports.utcWednesdays=utcWednesdays,exports.utcThursday=utcThursday,exports.utcThursdays=utcThursdays,exports.utcFriday=utcFriday,exports.utcFridays=utcFridays,exports.utcSaturday=utcSaturday,exports.utcSaturdays=utcSaturdays,exports.utcMonth=utcMonth,exports.utcMonths=utcMonths,exports.utcYear=utcYear,exports.utcYears=utcYears,exports.timeFormatDefaultLocale=defaultLocale$1,exports.timeFormatLocale=formatLocale$1,exports.isoFormat=formatIso,exports.isoParse=parseIso,exports.now=now,exports.timer=timer,exports.timerFlush=timerFlush,exports.timeout=timeout$1,exports.interval=function interval$1(callback,delay,time){var t=new Timer,total=delay;return null==delay?(t.restart(callback,delay,time),t):(delay=+delay,time=null==time?now():+time,t.restart((function tick(elapsed){elapsed+=total,t.restart(tick,total+=delay,time),callback(elapsed)}),delay,time),t)},exports.transition=transition,exports.active=function active(node,name){var schedule$$1,i,schedules=node.__transition;if(schedules)for(i in name=null==name?null:name+"",schedules)if((schedule$$1=schedules[i]).state>1&&schedule$$1.name===name)return new Transition([[node]],root$1,name,+i);return null},exports.interrupt=interrupt,exports.voronoi=function voronoi(){var x$$1=x$4,y$$1=y$4,extent=null;function voronoi(data){return new Diagram(data.map((function(d,i){var s=[Math.round(x$$1(d,i,data)/epsilon$4)*epsilon$4,Math.round(y$$1(d,i,data)/epsilon$4)*epsilon$4];return s.index=i,s.data=d,s})),extent)}return voronoi.polygons=function(data){return voronoi(data).polygons()},voronoi.links=function(data){return voronoi(data).links()},voronoi.triangles=function(data){return voronoi(data).triangles()},voronoi.x=function(_){return arguments.length?(x$$1="function"==typeof _?_:constant$11(+_),voronoi):x$$1},voronoi.y=function(_){return arguments.length?(y$$1="function"==typeof _?_:constant$11(+_),voronoi):y$$1},voronoi.extent=function(_){return arguments.length?(extent=null==_?null:[[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]],voronoi):extent&&[[extent[0][0],extent[0][1]],[extent[1][0],extent[1][1]]]},voronoi.size=function(_){return arguments.length?(extent=null==_?null:[[0,0],[+_[0],+_[1]]],voronoi):extent&&[extent[1][0]-extent[0][0],extent[1][1]-extent[0][1]]},voronoi},exports.zoom=function zoom(){var touchstarting,touchending,filter=defaultFilter$2,extent=defaultExtent$1,constrain=defaultConstrain,wheelDelta=defaultWheelDelta,touchable=defaultTouchable$1,scaleExtent=[0,1/0],translateExtent=[[-1/0,-1/0],[1/0,1/0]],duration=250,interpolate=interpolateZoom,gestures=[],listeners=dispatch("start","zoom","end"),clickDistance2=0;function zoom(selection){selection.property("__zoom",defaultTransform).on("wheel.zoom",wheeled).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).filter(touchable).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function scale(transform$$1,k){return(k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],k)))===transform$$1.k?transform$$1:new Transform(k,transform$$1.x,transform$$1.y)}function translate(transform$$1,p0,p1){var x=p0[0]-p1[0]*transform$$1.k,y=p0[1]-p1[1]*transform$$1.k;return x===transform$$1.x&&y===transform$$1.y?transform$$1:new Transform(transform$$1.k,x,y)}function centroid(extent){return[(+extent[0][0]+ +extent[1][0])/2,(+extent[0][1]+ +extent[1][1])/2]}function schedule(transition,transform$$1,center){transition.on("start.zoom",(function(){gesture(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){gesture(this,arguments).end()})).tween("zoom",(function(){var that=this,args=arguments,g=gesture(that,args),e=extent.apply(that,args),p=center||centroid(e),w=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),a=that.__zoom,b="function"==typeof transform$$1?transform$$1.apply(that,args):transform$$1,i=interpolate(a.invert(p).concat(w/a.k),b.invert(p).concat(w/b.k));return function(t){if(1===t)t=b;else{var l=i(t),k=w/l[2];t=new Transform(k,p[0]-l[0]*k,p[1]-l[1]*k)}g.zoom(null,t)}}))}function gesture(that,args){for(var g,i=0,n=gestures.length;i<n;++i)if((g=gestures[i]).that===that)return g;return new Gesture(that,args)}function Gesture(that,args){this.that=that,this.args=args,this.index=-1,this.active=0,this.extent=extent.apply(that,args)}function wheeled(){if(filter.apply(this,arguments)){var g=gesture(this,arguments),t=this.__zoom,k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],t.k*Math.pow(2,wheelDelta.apply(this,arguments)))),p=mouse(this);if(g.wheel)g.mouse[0][0]===p[0]&&g.mouse[0][1]===p[1]||(g.mouse[1]=t.invert(g.mouse[0]=p)),clearTimeout(g.wheel);else{if(t.k===k)return;g.mouse=[p,t.invert(p)],interrupt(this),g.start()}noevent$2(),g.wheel=setTimeout(wheelidled,150),g.zoom("mouse",constrain(translate(scale(t,k),g.mouse[0],g.mouse[1]),g.extent,translateExtent))}function wheelidled(){g.wheel=null,g.end()}}function mousedowned(){if(!touchending&&filter.apply(this,arguments)){var g=gesture(this,arguments),v=select(exports.event.view).on("mousemove.zoom",mousemoved,!0).on("mouseup.zoom",mouseupped,!0),p=mouse(this),x0=exports.event.clientX,y0=exports.event.clientY;dragDisable(exports.event.view),nopropagation$2(),g.mouse=[p,this.__zoom.invert(p)],interrupt(this),g.start()}function mousemoved(){if(noevent$2(),!g.moved){var dx=exports.event.clientX-x0,dy=exports.event.clientY-y0;g.moved=dx*dx+dy*dy>clickDistance2}g.zoom("mouse",constrain(translate(g.that.__zoom,g.mouse[0]=mouse(g.that),g.mouse[1]),g.extent,translateExtent))}function mouseupped(){v.on("mousemove.zoom mouseup.zoom",null),yesdrag(exports.event.view,g.moved),noevent$2(),g.end()}}function dblclicked(){if(filter.apply(this,arguments)){var t0=this.__zoom,p0=mouse(this),p1=t0.invert(p0),k1=t0.k*(exports.event.shiftKey?.5:2),t1=constrain(translate(scale(t0,k1),p0,p1),extent.apply(this,arguments),translateExtent);noevent$2(),duration>0?select(this).transition().duration(duration).call(schedule,t1,p0):select(this).call(zoom.transform,t1)}}function touchstarted(){if(filter.apply(this,arguments)){var started,i,t,p,g=gesture(this,arguments),touches=exports.event.changedTouches,n=touches.length;for(nopropagation$2(),i=0;i<n;++i)p=[p=touch(this,touches,(t=touches[i]).identifier),this.__zoom.invert(p),t.identifier],g.touch0?g.touch1||(g.touch1=p):(g.touch0=p,started=!0);if(touchstarting&&(touchstarting=clearTimeout(touchstarting),!g.touch1))return g.end(),void((p=select(this).on("dblclick.zoom"))&&p.apply(this,arguments));started&&(touchstarting=setTimeout((function(){touchstarting=null}),500),interrupt(this),g.start())}}function touchmoved(){var i,t,p,l,g=gesture(this,arguments),touches=exports.event.changedTouches,n=touches.length;for(noevent$2(),touchstarting&&(touchstarting=clearTimeout(touchstarting)),i=0;i<n;++i)p=touch(this,touches,(t=touches[i]).identifier),g.touch0&&g.touch0[2]===t.identifier?g.touch0[0]=p:g.touch1&&g.touch1[2]===t.identifier&&(g.touch1[0]=p);if(t=g.that.__zoom,g.touch1){var p0=g.touch0[0],l0=g.touch0[1],p1=g.touch1[0],l1=g.touch1[1],dp=(dp=p1[0]-p0[0])*dp+(dp=p1[1]-p0[1])*dp,dl=(dl=l1[0]-l0[0])*dl+(dl=l1[1]-l0[1])*dl;t=scale(t,Math.sqrt(dp/dl)),p=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2]}else{if(!g.touch0)return;p=g.touch0[0],l=g.touch0[1]}g.zoom("touch",constrain(translate(t,p,l),g.extent,translateExtent))}function touchended(){var i,t,g=gesture(this,arguments),touches=exports.event.changedTouches,n=touches.length;for(nopropagation$2(),touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),500),i=0;i<n;++i)t=touches[i],g.touch0&&g.touch0[2]===t.identifier?delete g.touch0:g.touch1&&g.touch1[2]===t.identifier&&delete g.touch1;g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0?g.touch0[1]=this.__zoom.invert(g.touch0[0]):g.end()}return zoom.transform=function(collection,transform$$1){var selection=collection.selection?collection.selection():collection;selection.property("__zoom",defaultTransform),collection!==selection?schedule(collection,transform$$1):selection.interrupt().each((function(){gesture(this,arguments).start().zoom(null,"function"==typeof transform$$1?transform$$1.apply(this,arguments):transform$$1).end()}))},zoom.scaleBy=function(selection,k){zoom.scaleTo(selection,(function(){var k0=this.__zoom.k,k1="function"==typeof k?k.apply(this,arguments):k;return k0*k1}))},zoom.scaleTo=function(selection,k){zoom.transform(selection,(function(){var e=extent.apply(this,arguments),t0=this.__zoom,p0=centroid(e),p1=t0.invert(p0),k1="function"==typeof k?k.apply(this,arguments):k;return constrain(translate(scale(t0,k1),p0,p1),e,translateExtent)}))},zoom.translateBy=function(selection,x,y){zoom.transform(selection,(function(){return constrain(this.__zoom.translate("function"==typeof x?x.apply(this,arguments):x,"function"==typeof y?y.apply(this,arguments):y),extent.apply(this,arguments),translateExtent)}))},zoom.translateTo=function(selection,x,y){zoom.transform(selection,(function(){var e=extent.apply(this,arguments),t=this.__zoom,p=centroid(e);return constrain(identity$8.translate(p[0],p[1]).scale(t.k).translate("function"==typeof x?-x.apply(this,arguments):-x,"function"==typeof y?-y.apply(this,arguments):-y),e,translateExtent)}))},Gesture.prototype={start:function(){return 1==++this.active&&(this.index=gestures.push(this)-1,this.emit("start")),this},zoom:function(key,transform$$1){return this.mouse&&"mouse"!==key&&(this.mouse[1]=transform$$1.invert(this.mouse[0])),this.touch0&&"touch"!==key&&(this.touch0[1]=transform$$1.invert(this.touch0[0])),this.touch1&&"touch"!==key&&(this.touch1[1]=transform$$1.invert(this.touch1[0])),this.that.__zoom=transform$$1,this.emit("zoom"),this},end:function(){return 0==--this.active&&(gestures.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(type){customEvent(new ZoomEvent(zoom,type,this.that.__zoom),listeners.apply,listeners,[type,this.that,this.args])}},zoom.wheelDelta=function(_){return arguments.length?(wheelDelta="function"==typeof _?_:constant$12(+_),zoom):wheelDelta},zoom.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant$12(!!_),zoom):filter},zoom.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:constant$12(!!_),zoom):touchable},zoom.extent=function(_){return arguments.length?(extent="function"==typeof _?_:constant$12([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),zoom):extent},zoom.scaleExtent=function(_){return arguments.length?(scaleExtent[0]=+_[0],scaleExtent[1]=+_[1],zoom):[scaleExtent[0],scaleExtent[1]]},zoom.translateExtent=function(_){return arguments.length?(translateExtent[0][0]=+_[0][0],translateExtent[1][0]=+_[1][0],translateExtent[0][1]=+_[0][1],translateExtent[1][1]=+_[1][1],zoom):[[translateExtent[0][0],translateExtent[0][1]],[translateExtent[1][0],translateExtent[1][1]]]},zoom.constrain=function(_){return arguments.length?(constrain=_,zoom):constrain},zoom.duration=function(_){return arguments.length?(duration=+_,zoom):duration},zoom.interpolate=function(_){return arguments.length?(interpolate=_,zoom):interpolate},zoom.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?zoom:value},zoom.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,zoom):Math.sqrt(clickDistance2)},zoom},exports.zoomTransform=transform$1,exports.zoomIdentity=identity$8,Object.defineProperty(exports,"__esModule",{value:!0})}(exports)},872:function(module,exports){module.exports='<div class=svg-icons><svg xmlns=http://www.w3.org/2000/svg version=1.1 class=svg-icons><symbol id=icon-add-grid-record viewBox="0 0 16 18"><path d="M13 12a1 1 0 00-1 1v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1v-1a1 1 0 00-1-1zm-4-2h6a1 1 0 001-1V2.459h-.004A2.501 2.501 0 0013.5 0h-11A2.5 2.5 0 000 2.5v13A2.5 2.5 0 002.5 18H7a1 1 0 001-1v-6a1 1 0 011-1zm2-8h2.5c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5H11V2zm0 4h2.5c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5H11V6zM7 6h2v2H7V6zM5 16H2.5a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5H5v2zm0-4H2.5a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5H5v2zm0-4H2.5a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5H5v2zm0-4H2.5a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5H5v2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-add-grid-row viewBox="0 0 16 18"><path d="M13 12a1 1 0 00-1 1v1h-1a1 1 0 100 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1v-1a1 1 0 00-1-1zm-6 4H2.5a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5H7a1 1 0 000-2H2.5a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5H15a1 1 0 001-1V2.458h-.004A2.5 2.5 0 0013.5 0h-11A2.5 2.5 0 00.004 2.458H0V15.5A2.5 2.5 0 002.5 18H7a1 1 0 000-2zM2 2.5c0-.275.225-.5.5-.5h11c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5h-11a.501.501 0 01-.5-.5v-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-add viewBox="0 0 18 18"><path d="M16 8h-6V2a1 1 0 00-2 0v6H2a1 1 0 000 2h6v6a1 1 0 002 0v-6h6a1 1 0 000-2" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-additional-help viewBox="0 0 17 16"><path d="M16 11h-2V9a1 1 0 00-2 0v2h-2a1 1 0 000 2h2v2a1 1 0 002 0v-2h2a1 1 0 000-2zM5 0C2.243 0 0 2.243 0 5a1 1 0 002 0c0-1.654 1.346-3 3-3s3 1.346 3 3-1.346 3-3 3a1 1 0 00-1 1v2.5a1 1 0 002 0V9.9A5.01 5.01 0 0010 5c0-2.757-2.243-5-5-5zm0 14a1 1 0 110 2 1 1 0 010-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-agent viewBox="0 0 15 20"><path d="M14.646 18.019a7 7 0 10-14 0s0 1.728 2 1.728h10c2 0 2-1.728 2-1.728M7.662 2.763a3.5 3.5 0 10.001 7.001 3.5 3.5 0 00-.001-7.001m-5.5 4.949a1.5 1.5 0 001.5-1.5 1.49 1.49 0 00-.571-1.17c.543-2.026 2.377-3.529 4.571-3.529 2.359 0 4.102 1.398 4.595 3.51a1.493 1.493 0 00-.595 1.189 1.5 1.5 0 003 0c0-.614-.369-1.14-.897-1.372C13.171 1.974 10.789.013 7.662.013c-2.951 0-5.426 2.059-6.077 4.815a1.499 1.499 0 00.577 2.884" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-alert-alert viewBox="0 0 18 18"><g fill-rule=nonzero><path d="M17.726 14.877L10.724 2.05C9.954.634 8.047.658 7.276 2.074L.274 14.865C-.5 16.292.458 18 1.998 18h14.004c1.54 0 2.5-1.696 1.724-3.123z" fill=currentColor stroke=none></path><path d="M10 14.5c0 .276-.178.5-.47.5H8.47c-.293 0-.47-.224-.47-.5v-1c0-.276.177-.5.47-.5H9.53c.293 0 .471.224.471.5v1zm0-4c0 .276-.178.5-.47.5H8.47c-.293 0-.47-.224-.47-.5v-4c0-.276.177-.5.47-.5H9.53c.293 0 .471.224.471.5v4z" fill=#FFF stroke=none></path></g></symbol> <symbol id=icon-alert-solid viewBox="0 0 18 18"><path d="M7.276 2.074C8.047.658 9.953.634 10.724 2.05l7.002 12.827c.775 1.427-.184 3.123-1.724 3.123H1.998C.458 18-.5 16.292.274 14.865zM9.53 13H8.471c-.293 0-.47.224-.47.5v1c0 .276.177.5.47.5H9.53c.293 0 .471-.224.471-.5v-1c0-.276-.178-.5-.47-.5zm0-7H8.471c-.293 0-.47.224-.47.5v4c0 .276.177.5.47.5H9.53c.293 0 .471-.224.471-.5v-4c0-.276-.178-.5-.47-.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-apply-rule viewBox="0 0 18 18"><path d="M4 9.999v1a1 1 0 102 0v-1H4zm.063-2a.999.999 0 01-.703-.288L.298 4.71a1 1 0 111.405-1.422l2.353 2.299L9.291.294a1.004 1.004 0 011.415-.005c.391.39.393 1.023.004 1.415l-5.937 6a1.002 1.002 0 01-.71.295zm6.437-2h5c1.375 0 2.5 1.125 2.5 2.5v7c0 1.375-1.125 2.5-2.5 2.5h-13a2.507 2.507 0 01-2.5-2.5v-5.5a1 1 0 112 0v5.5c0 .275.225.5.5.5h13c.275 0 .5-.225.5-.5v-7c0-.275-.225-.5-.5-.5H14v3a1 1 0 11-2 0v-3h-2v5a1 1 0 11-2 0v-4.5a2.5 2.5 0 012.5-2.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-alert viewBox="0 0 18 18"><path d="M7.276 2.074C8.047.658 9.953.634 10.724 2.05l7.002 12.827c.775 1.427-.184 3.123-1.724 3.123H1.998C.458 18-.5 16.292.274 14.865zM9.53 13H8.471c-.293 0-.47.224-.47.5v1c0 .276.177.5.47.5H9.53c.293 0 .471-.224.471-.5v-1c0-.276-.178-.5-.47-.5zm0-7H8.471c-.293 0-.47.224-.47.5v4c0 .276.177.5.47.5H9.53c.293 0 .471-.224.471-.5v-4c0-.276-.178-.5-.47-.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-archives viewBox="0 0 18 18"><path d="M17.48 12.7l.01-.08L15.6 1.29a.944.944 0 00-.93-.79H3.33c-.46 0-.85.33-.93.79L.51 12.62v.08l-.01.08v3.779c0 .521.42.94.94.94h15.12c.521 0 .94-.42.94-.94V12.78l-.02-.08zm-4.7-1.2c-.521 0-1.28.76-1.28 1.28v.72h-5v-.72c0-.521-.76-1.28-1.28-1.28H2.56l1.57-9h9.74l1.57 9h-2.66zm-3.065.065s-.668.668-1.336 0L6.375 8.031s-.647-.531 0-1.531h1.659l.01-2.335c0-.521.423-.665.944-.665h.116c.521 0 .944.144.944.665L10.037 6.5h1.68s.441.679 0 1.531c-.489.95-2.002 3.534-2.002 3.534" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-area viewBox="0 0 18 18"><path d="M18 1.005a1.001 1.001 0 00-1.707-.712l-5.5 5.5L6 1 2 5V1a1 1 0 10-2 0v13.5C0 16.43 1.57 18 3.5 18H17a1 1 0 00.99-1.141c-.043-.832-.017-9.888.01-15.854zM3.5 16c-.827 0-1.5-.673-1.5-1.5v-4.419l3.375 2.7c.396.317.971.287 1.332-.074l9.281-9.281c-.034 7.437-.044 10.904.007 12.574H3.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-attach viewBox="0 0 18 18"><path d="M9.356 0C6.403 0 4 2.46 4 5.485v8.545C4 16.256 5.7 18 7.932 18 10.137 18 12 16.182 12 14.03V6.417C12 5.084 10.841 4 9.387 4 8.026 4 7 5.039 7 6.417V11a1 1 0 102 0V6.417C9 6.14 9.13 6 9.416 6c.275 0 .584.178.584.417v7.613C10 15.098 9.053 16 7.871 16 6.805 16 6 15.153 6 14.03V5.485C6 3.531 7.475 2 9.446 2 11.373 2 13 3.596 13 5.485V14a1 1 0 102 0V5.485C15 2.512 12.457 0 9.356 0" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-back-color viewBox="0 0 18 18"><path d="M9.037 6.125l1.371 4.261H7.577l1.431-4.261h.029zM12.65 14.5c-.531 0-.915-.192-1.092-.663l-.619-1.77H7.046l-.634 1.77c-.162.471-.501.663-1.076.663-.663 0-1.121-.413-1.121-1.062 0-.265.148-.693.236-.928l3.126-8.272c.207-.547.59-.738 1.18-.738h.575c.545 0 1.032.133 1.298.885l2.919 8.125c.089.235.236.663.236.928 0 .591-.516 1.062-1.135 1.062zM15.223 1H2.778C1.796 1 1 1.796 1 2.778v12.445C1 16.205 1.796 17 2.778 17h12.445c.981 0 1.777-.795 1.777-1.777V2.778C17 1.796 16.204 1 15.223 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-articles viewBox="0 0 16 16"><path d="M15.1 0C11.6 0 9.2.4 8 1.2 6.6.3 3.5 0 .9 0 .7 0 .4.1.3.3.1.4 0 .7 0 .9v12.4c0 .5.4.9.9.9 5.1 0 6.1.9 6.2 1.1.1.4.5.7.9.7.5 0 .8-.3.9-.8.5-.5 3.4-1 6.2-1 .5 0 .9-.4.9-.9V.9c0-.5-.4-.9-.9-.9zm-8 13.2c-1.2-.5-3-.7-5.3-.8V1.8c2.5.1 4.9.5 5.3 1v10.4zm7.1-.7c-2.4.1-4.1.3-5.3.8V2.8c.4-.5 2.8-.9 5.3-1v10.7z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-bar viewBox="0 0 17 18"><path d="M16 16h-1V1.5c0-.825-.675-1.5-1.5-1.5S12 .675 12 1.5V16h-2V9.5C10 8.675 9.325 8 8.5 8S7 8.675 7 9.5V16H5V5.5C5 4.675 4.325 4 3.5 4S2 4.675 2 5.5V16H1c-.55 0-1 .45-1 1s.45 1 1 1h15c.55 0 1-.45 1-1s-.45-1-1-1" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-binoculars viewBox="0 0 19 18"><path d="M17.914 12.118l-.143-.809-.035-.141-1.599-8.633A3.015 3.015 0 0014.705.454c-.753-.436-1.577-.56-2.383-.358-1.349.339-2.291 1.604-2.291 3.077v.864H8v-.864C8 1.7 7.057.435 5.709.096 4.903-.109 4.08.015 3.325.455a3.018 3.018 0 00-1.432 2.077L.122 12.101a3.961 3.961 0 00-.122.936c0 2.206 1.794 4 4 4 2.153 0 3.902-1.713 3.984-3.847l.007-.02c.016-.113.061-.566.024-1.133h2.001a6.14 6.14 0 00.024 1.133l.007.02c.082 2.134 1.83 3.847 3.984 3.847 2.206 0 4-1.794 4-4 0-.317-.047-.623-.117-.919zM4 15.038a2 2 0 11-.001-3.999A2 2 0 014 15.038zm4-9.001h2.031v4H8v-4zm6 9.001a2 2 0 11-.001-3.999A2 2 0 0114 15.038z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-bed viewBox="0 0 18 18"><path d="M1 0a1 1 0 01.993.883L2 1v10h15a1 1 0 01.993.884L18 12V17a1 1 0 01-1.993.117L16 17v-2H2v2a1 1 0 01-1.993.117L0 17V1a1 1 0 011-1zm4 6a2 2 0 11-.001 4.001A2 2 0 015 6zm10.5 1A1.5 1.5 0 0117 8.5V9a1 1 0 01-1 1H9a1 1 0 01-1-1V8a1 1 0 011-1h6.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-bookmark-filled viewBox="0 0 18 18"><path d="M15 2.5C15 1.125 13.875 0 12.5 0h-7A2.507 2.507 0 003 2.5V17l.004-.022a.994.994 0 001.704.728L9 13l4.296 4.711a1 1 0 001.703-.762v.003L15 2.5" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-bold viewBox="0 0 18 18"><path d="M4 4.536C4 3.368 4.608 3 5.536 3h3.489c1.921 0 4.21.431 4.21 2.976 0 .977-.528 1.905-1.616 2.337v.032c1.216.321 2.016 1.185 2.016 2.77 0 2.417-1.968 3.409-4.242 3.409H5.536c-.928 0-1.536-.368-1.536-1.537V4.536zm2.625 3.201h2.16c1.233 0 1.825-.496 1.825-1.408 0-1.105-.929-1.409-1.904-1.409H6.625v2.817zm0 4.77h2.209c1.024 0 2.176-.208 2.176-1.537 0-1.392-1.216-1.568-2.497-1.568H6.625v3.105z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-bookmark-outlined viewBox="0 0 18 18"><path d="M12.5 0h-7A2.507 2.507 0 003 2.5V17l.004-.022a.994.994 0 001.704.728L9 13l4.296 4.711A1 1 0 0015 16.95V2.5C15 1.125 13.875 0 12.5 0zM5 13.701V2.5c0-.271.229-.5.5-.5h7c.271 0 .5.229.5.5l-.001 11.918L9 10.032l-1.478 1.62L5 14.406v-.705z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-bottom-aligned viewBox="0 0 18 18"><path d="M13.5 6A2.502 2.502 0 0011 8.5v4c0 1.379 1.121 2.5 2.5 2.5s2.5-1.121 2.5-2.5v-4C16 7.121 14.879 6 13.5 6zM16 16H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99H16v-2zm1.01 0H16v2h1.01a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99zM6.5 2c.275 0 .5.225.5.5v10c0 .275-.225.5-.5.5h-2a.501.501 0 01-.5-.5v-10c0-.275.225-.5.5-.5h2zm0-2h-2A2.503 2.503 0 002 2.5v10C2 13.878 3.122 15 4.5 15h2C7.878 15 9 13.878 9 12.5v-10C9 1.121 7.878 0 6.5 0z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-bubble viewBox="0 0 18 18"><path d="M17 16H3.5c-.827 0-1.5-.673-1.5-1.5V1a1 1 0 00-2 0v13.5C0 16.43 1.57 18 3.5 18H17a1 1 0 100-2zM6 9a2 2 0 10.001-3.999A2 2 0 006 9zm7-1a3 3 0 100-6 3 3 0 000 6zm-2.5 5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-building viewBox="0 0 18 18"><path d="M15.141.5H2.86C1.56.5.5 1.56.5 2.86v12.281A2.363 2.363 0 002.86 17.5h12.281a2.363 2.363 0 002.359-2.359V2.86c0-1.3-1.061-2.36-2.359-2.36zM5.5 10.5h-3v-3h3v3zm0-5h-3V2.86c0-.26.1-.36.36-.36H5.5v3zm5 10h-3v-8h3v8zm0-10h-3v-3h3v3zm5 5h-3v-3h3v3zm0-5h-3v-3h2.641c.26 0 .359.1.359.36V5.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-bullet-list viewBox="0 0 18 18"><path d="M17.99 3.99A.99.99 0 0017 3H4.98a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99H17a.99.99 0 00.99-.99v-.02zM1.01 3H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h.02A.99.99 0 002 4.01v-.02A.99.99 0 001.01 3zm16.98 5.99A.99.99 0 0017 8H4.98a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99H17a.99.99 0 00.99-.99v-.02zM1.01 8H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h.02A.99.99 0 002 9.01v-.02A.99.99 0 001.01 8zm16.98 5.99A.99.99 0 0017 13H4.98a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99H17a.99.99 0 00.99-.99v-.02zM1.01 13H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h.02a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-bullet-steps viewBox="0 0 18 18"><path d="M5 3c-.5 0-1 .4-1 1 0 .5.4 1 1 1h12c.5 0 1-.4 1-1 0-.5-.4-1-1-1H5zM0 4c0 .5.4 1 1 1 .5 0 1-.4 1-1s-.4-1-1-1-1 .4-1 1zm5 4c-.5 0-1 .4-1 1 0 .5.4 1 1 1h12c.5 0 1-.4 1-1 0-.5-.4-1-1-1H5zM0 9c0 .5.4 1 1 1 .5 0 1-.4 1-1s-.4-1-1-1-1 .4-1 1zm5 4c-.5 0-1 .4-1 1 0 .5.4 1 1 1h7c.5 0 1-.4 1-1 0-.5-.4-1-1-1H5zm-5 1c0 .5.4 1 1 1 .5 0 1-.4 1-1s-.4-1-1-1-1 .4-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-business-object viewBox="0 0 28 18"><g fill-rule=evenodd><path d="M8.7 14.4c-2.9-.1-5.2-2.5-5.2-5.4 0-2.9 2.3-5.3 5.2-5.4.9-1.2 2.2-2.2 3.7-2.9C11.3.2 10.1 0 8.9 0 4 0 0 4 0 9c0 4.9 4 9 9 9 1.2 0 2.4-.2 3.4-.7-1.5-.7-2.7-1.7-3.7-2.9z" fill=#1C9A17 stroke=none></path><path d="M19 0c-4.9 0-9 4-9 9 0 4.9 4 9 9 9 4.9 0 9-4 9-9s-4-9-9-9zm0 14.4c-3 0-5.4-2.4-5.4-5.4 0-3 2.4-5.4 5.4-5.4 3 0 5.4 2.4 5.4 5.4.1 3-2.4 5.4-5.4 5.4z" fill=#6DC80D fill-rule=nonzero stroke=none></path></g></symbol> <symbol id=icon-calculator viewBox="0 0 17 18"><path d="M14.5 0h-12A2.502 2.502 0 000 2.5v13C0 16.879 1.121 18 2.5 18h12c1.378 0 2.5-1.121 2.5-2.5v-13C17 1.121 15.878 0 14.5 0zM5 14c0 .55-.45 1-1 1H3c-.55 0-1-.45-1-1v-1c0-.55.45-1 1-1h1c.55 0 1 .45 1 1v1zm0-5c0 .55-.45 1-1 1H3c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1h1c.55 0 1 .45 1 1v1zm5 5c0 .55-.45 1-1 1H8c-.55 0-1-.45-1-1v-1c0-.55.45-1 1-1h1c.55 0 1 .45 1 1v1zm0-5c0 .55-.45 1-1 1H8c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1h1c.55 0 1 .45 1 1v1zm5 5c0 .55-.45 1-1 1h-1c-.55 0-1-.45-1-1v-1c0-.55.45-1 1-1h1c.55 0 1 .45 1 1v1zm0-5c0 .55-.45 1-1 1h-1c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1h1c.55 0 1 .45 1 1v1zm-1-5H3c-.55 0-1-.45-1-1s.45-1 1-1h11c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-calendar viewBox="0 0 18 18"><path d="M15.5 2H15V.99a.99.99 0 00-.99-.99h-.02a.99.99 0 00-.99.99V2H5V.99A.99.99 0 004.01 0h-.02A.99.99 0 003 .99V2h-.5A2.503 2.503 0 000 4.5v11C0 16.878 1.122 18 2.5 18h13c1.378 0 2.5-1.122 2.5-2.5v-11C18 3.122 16.878 2 15.5 2zm.5 13.5a.5.5 0 01-.5.5h-13a.5.5 0 01-.5-.5V8h14v7.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-cancel viewBox="0 0 18 18"><path d="M9 0C4.037 0 0 4.037 0 9s4.037 9 9 9 9-4.037 9-9-4.037-9-9-9zM2 9c0-3.859 3.141-7 7-7 1.57 0 3.015.526 4.184 1.402l-9.782 9.782A6.953 6.953 0 012 9zm7 7a6.953 6.953 0 01-4.184-1.402l9.782-9.782A6.953 6.953 0 0116 9c0 3.859-3.141 7-7 7z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-capslock viewBox="0 0 18 18"><path d="M15 9a.999.999 0 01-1.707.707L9 5.414 4.707 9.707a.999.999 0 11-1.414-1.414l5-5a.999.999 0 011.414 0l5 5A.997.997 0 0115 9zm-1 5H4c-.55 0-1-.45-1-1s.45-1 1-1h10c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-caret-down viewBox="0 0 18 18"><path d="M17 5.452L15.644 4 9 11.109 2.357 4 1 5.452 8.99 14l.01-.01.011.01z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-caret-right viewBox="0 0 18 18"><path d="M5.452 1L4 2.356 11.109 9 4 15.643 5.452 17 14 9.01 13.99 9l.01-.011z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-caret-left viewBox="0 0 18 18"><path d="M12.548 17L14 15.644 6.891 9 14 2.357 12.548 1 4 8.99l.01.01-.01.011z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-caret-up viewBox="0 0 18 18"><path d="M1 12.548L2.356 14 9 6.891 15.643 14 17 12.548 9.01 4 9 4.01 8.989 4z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-cart viewBox="0 0 18 18"><path d="M15 11H6.388l.674-2h6.952A1 1 0 0015 8.167l1.986-5A1 1 0 0016 2H3.618L2.895.553A1.001 1.001 0 002 0H1a1 1 0 100 2h.382L4.92 9.077l-.868 2.607A.996.996 0 005 13h10a1 1 0 100-2zm-7 5a2 2 0 10-3.999-.001A2 2 0 008 16zm8 0a2 2 0 10-3.999-.001A2 2 0 0016 16z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-cascade-objects viewBox="0 0 18 18"><path d="M2 16h6v-4H2v4zm5.5-8h-5A2.507 2.507 0 000 10.5v5C0 16.875 1.125 18 2.5 18h5c1.375 0 2.5-1.125 2.5-2.5v-5C10 9.125 8.875 8 7.5 8zm5.5 4a1 1 0 01-1-1V6H7a1 1 0 110-2h5c1.103 0 2 .897 2 2v5a1 1 0 01-1 1zm4-4a1 1 0 01-1-1V2h-5a1 1 0 110-2h5c1.103 0 2 .897 2 2v5a1 1 0 01-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-cascade viewBox="0 0 18 18"><path d="M6 11V6h5a1 1 0 000-2H6.5A2.5 2.5 0 004 6.5V11a1 1 0 002 0zM2 7V2h5a1 1 0 000-2H2.5A2.5 2.5 0 000 2.5V7a1 1 0 002 0zm13.5 1h-5A2.503 2.503 0 008 10.5v5c0 1.379 1.121 2.5 2.5 2.5h5c1.379 0 2.5-1.121 2.5-2.5v-5C18 9.122 16.879 8 15.5 8zM10 12h6v4h-6v-4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-change-font viewBox="0 0 18 18"><path d="M2.508.927c.139-.37.399-.5.799-.5h.389c.37 0 .701.09.88.599l1.979 5.507c.06.16.16.45.16.63 0 .401-.35.72-.77.72-.359 0-.619-.13-.739-.451l-.42-1.199H2.147l-.429 1.199c-.111.321-.34.451-.73.451-.45 0-.759-.281-.759-.72 0-.18.099-.47.16-.63L2.508.927zm.989 1.279h-.02l-.969 2.889h1.919l-.93-2.889zm5.84 13.704l-.304 1.007C8.805 17.696 7.95 18 7.267 18c-.989 0-1.995-.741-1.995-1.767 0-.627.361-1.634.683-2.545l2.907-8.093c.418-1.14.988-1.767 2.09-1.767h1.367c1.103 0 1.672.627 2.09 1.767l2.907 8.093c.323.911.684 1.918.684 2.545C18 17.259 16.993 18 16.005 18c-.684 0-1.539-.304-1.767-1.083l-.303-1.007H9.337zm2.317-7.731h-.037l-1.482 4.996h3.002l-1.483-4.996z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-center-text viewBox="0 0 18 18"><path d="M1 5h16c.55 0 1-.45 1-1s-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1m3 10h10c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1m-3-5h16c.55 0 1-.45 1-1s-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-change-row-line-height viewBox="0 0 18 18"><path d="M10 5c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1zm0 4c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1zm0 4c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1zm-2.3.3c-.4-.4-1-.4-1.4 0L5 14.6V3.4l1.3 1.3c.4.4 1 .4 1.4 0 .4-.4.4-1 0-1.4l-3-3C4.6.2 4.5.1 4.4.1 4.3 0 4.1 0 4 0c-.3 0-.5.1-.7.3l-3 3c-.4.4-.4 1 0 1.4.4.4 1 .4 1.4 0L3 3.4v11.2l-1.3-1.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l3 3c.1.1.2.2.3.2.1.1.3.1.4.1.3 0 .5-.1.7-.3l3-3c.4-.4.4-1 0-1.4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-camera viewBox="0 0 18 18"><path d="M13.239 3l-.846-1.078C12.031 1.319 11.38 1 10.677 1h-3.34c-.703 0-1.355.319-1.716.922L4.774 3H2a2 2 0 00-2 2v9.996a2 2 0 002 2h13.994a2 2 0 002-2V5a2 2 0 00-2-2h-2.755zM3.988 9.998A5.003 5.003 0 018.997 5a5.003 5.003 0 015.009 4.998 5.005 5.005 0 01-5.009 4.998 5.004 5.004 0 01-5.009-4.998zM8.997 7a3.005 3.005 0 00-3.006 2.999 3.006 3.006 0 006.012 0A3.005 3.005 0 008.997 7z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-check-list viewBox="0 0 19 18"><path d="M14.414 13l3.293-3.293a.999.999 0 10-1.414-1.414L13 11.586 9.707 8.293a.999.999 0 10-1.414 1.414L11.586 13l-3.293 3.293a.999.999 0 101.414 1.414L13 14.414l3.293 3.293a.997.997 0 001.414 0 .999.999 0 000-1.414L14.414 13zM4.063 8a.999.999 0 01-.703-.288L.297 4.711a1 1 0 011.406-1.423l2.353 2.3L9.291.295a1 1 0 111.418 1.41l-5.937 6A1.001 1.001 0 014.063 8z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-check viewBox="0 0 18 18"><path d="M6.063 15a.999.999 0 01-.703-.289l-5.063-5a.999.999 0 111.406-1.423l4.353 4.3 9.235-9.294a1 1 0 111.418 1.41l-9.937 10a1.001 1.001 0 01-.709.295" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-check2 viewBox="0 0 18 18"><path d="M15 13c.55 0 1 .45 1 1s-.45 1-1 1H7.78l2-2zm-.295-9.71a1 1 0 01.004 1.414l-9.937 10a1.001 1.001 0 01-1.412.007l-3.063-3a.998.998 0 01-.008-1.414.998.998 0 011.414-.009l2.353 2.3 9.235-9.294a1.003 1.003 0 011.414-.005zM17 9c.55 0 1 .45 1 1s-.45 1-1 1h-5.22l2-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-clear-formatting viewBox="0 0 18 18"><path d="M8.805 6.262L6.869.909C6.599.141 6.112 0 5.55 0h-.584c-.595 0-.984.195-1.201.757L.585 9.15l-.238.952c0 .66.465 1.082 1.136 1.082.584 0 .93-.195 1.103-.681l.638-1.795H6.35l2.455-2.446zm-3.58-3.591h.022l1.395 4.326H3.765l1.46-4.326zm12.427 7.276a1.5 1.5 0 00-.446-1.069l-3.07-3.071a1.517 1.517 0 00-1.081-.459h-.002c-.406 0-.799.166-1.07.445L8.924 8.85l-.001-.002-3.493 3.495a1.52 1.52 0 00.012 2.132l3.096 3.097c.297.285.675.428 1.055.428a1.55 1.55 0 001.078-.442l1.756-1.756.001.001 1.194-1.196.53-.53 3.052-3.057c.284-.28.448-.671.448-1.073zm-8.054 5.694l-2.239-2.239 2.39-2.391 2.24 2.239-2.391 2.391z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-clear-screen viewBox="0 0 16 15"><path d="M5 5V4h9v5.5c0 .275-.225.5-.5.5H10a1 1 0 000 2h3.5A2.5 2.5 0 0016 9.5v-7A2.5 2.5 0 0013.5 0h-8A2.5 2.5 0 003 2.5V5a1 1 0 002 0zm-.086 6.5l1.793-1.793a.999.999 0 10-1.414-1.414L3.5 10.086 1.707 8.293A.999.999 0 10.293 9.707L2.086 11.5.293 13.293a.999.999 0 101.414 1.414L3.5 12.914l1.793 1.793a.997.997 0 001.414 0 .999.999 0 000-1.414L4.914 11.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-clock viewBox="0 0 18 18"><path d="M9 0C4.037 0 0 4.037 0 9s4.037 9 9 9 9-4.037 9-9-4.037-9-9-9zm0 16c-3.859 0-7-3.141-7-7s3.141-7 7-7 7 3.141 7 7-3.141 7-7 7zm1-7.414V6a1 1 0 10-2 0v3c0 .266.105.519.293.707l2 2a.997.997 0 001.414 0 .999.999 0 000-1.414L10 8.586z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-close-save viewBox="0 0 18 18"><path d="M17.993 3.886C17.993.021 14 0 14 0v2h-3V0h-1c-.55 0-1 .45-1 1v6a2 2 0 002 2h5a2 2 0 002-2V4l-.007-.114zM11 4h5v3h-5V4zm-2 8H5c-.55 0-1 .45-1 1s.45 1 1 1h4c.55 0 1-.45 1-1s-.45-1-1-1zM6 8H5c-.55 0-1 .45-1 1s.45 1 1 1h1c.55 0 1-.45 1-1s-.45-1-1-1zm0-4H2.5A2.5 2.5 0 000 6.5v9A2.5 2.5 0 002.5 18h9a2.5 2.5 0 002.5-2.5V13a1 1 0 00-2 0v2.5a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5v-9a.5.5 0 01.5-.5H6a1 1 0 000-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-close-cancel viewBox="0 0 18 17"><path d="M9 11H5c-.55 0-1 .45-1 1s.45 1 1 1h4c.55 0 1-.45 1-1s-.45-1-1-1zM8 7H5c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1zm0-4H2.5A2.5 2.5 0 000 5.5v9A2.5 2.5 0 002.5 17h9a2.5 2.5 0 002.5-2.5V10a1 1 0 00-2 0v4.5a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5v-9a.5.5 0 01.5-.5H8a1 1 0 000-2zM17.707.293a.999.999 0 00-1.414 0L14.5 2.086 12.707.293a.999.999 0 10-1.414 1.414L13.086 3.5l-1.793 1.793a.999.999 0 101.414 1.414L14.5 4.914l1.793 1.793a.997.997 0 001.414 0 .999.999 0 000-1.414L15.914 3.5l1.793-1.793a.999.999 0 000-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-clockwise-90 viewBox="0 0 17 12"><path d="M16.237 6.004H14.91C14.424 2.614 11.505 0 7.982 0 5.115 0 2.647 1.661 1.567 4.153c-.249.574.122 1.232.734 1.354a.988.988 0 001.104-.583C4.171 3.118 5.925 2 7.976 2a5.02 5.02 0 014.911 4.004H11.7c-.605 0-.856.48-.731 1l2.42 4.286c.371.526.867.527 1.16.149l2.42-4.435c.125-.417-.127-1-.732-1zM3 10.004v-1a1 1 0 00-1-1H1a1 1 0 00-1 1v1a1 1 0 001 1h1a1 1 0 001-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-close viewBox="0 0 18 18"><path d="M10.414 9l5.293-5.293a.999.999 0 10-1.414-1.414L9 7.586 3.707 2.293a.999.999 0 10-1.414 1.414L7.586 9l-5.293 5.293a.999.999 0 101.414 1.414L9 10.414l5.293 5.293a.997.997 0 001.414 0 .999.999 0 000-1.414L10.414 9" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-closed-folder viewBox="0 0 14 14"><path d="M13 6.143v5.143c0 .947-.768 1.714-1.714 1.714H2.714A1.714 1.714 0 011 11.286V6.143h12zM3.947 1c.602 0 1.16.273 1.47.79l.726.924h5.143c.947 0 1.714.768 1.714 1.715H1V2.714C1 1.768 1.767 1 2.714 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-collapse-all viewBox="0 0 18 18"><path d="M13.01 10H8.99a.99.99 0 00-.99.99v.02c0 .547.444.99.99.99h4.02a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99zM16 15.5c0 .275-.225.5-.5.5h-9a.501.501 0 01-.5-.5V6.502c0-.277.22-.5.497-.5l9.003.011c.278 0 .5.221.5.5V15.5zM15.5 4h-9A2.503 2.503 0 004 6.5v9C4 16.878 5.122 18 6.5 18h9c1.379 0 2.5-1.122 2.5-2.5v-9C18 5.122 16.879 4 15.5 4zM14 1a1 1 0 00-1-1H2.5A2.5 2.5 0 000 2.5V13a1 1 0 002 0V2h11a1 1 0 001-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-cloud viewBox="0 0 18 12"><path d="M14.5 11.5c1.898-.387 3-2.092 3-4.104a4.162 4.162 0 00-4.633-4.133 4.76 4.76 0 00-9.18 1.776l.003.066C1.925 5.125.5 6.531.5 8.303c0 1.78 1.445 3.197 3.228 3.197 0 0 10.695.018 10.772 0z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-amend viewBox="0 0 16 18"><path d="M15.996 2.459A2.501 2.501 0 0013.5 0h-11A2.501 2.501 0 00.004 2.459H0V15.5C0 16.878 1.122 18 2.5 18h11c1.378 0 2.5-1.122 2.5-2.5V2.459h-.004zM2 11.5v-1c0-.275.225-.5.5-.5h11c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5h-11a.501.501 0 01-.5-.5zm0-9c0-.275.225-.5.5-.5h11c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5h-11a.501.501 0 01-.5-.5v-1zm12 13c0 .275-.225.5-.5.5h-11a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5h11c.275 0 .5.225.5.5v1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-collapse-app-tray viewBox="0 0 18 18"><path d="M14 15a.997.997 0 01-.707-.293l-5-5a.999.999 0 010-1.414l5-5a.999.999 0 111.414 1.414L10.414 9l4.293 4.293A.999.999 0 0114 15zm-6 0a.997.997 0 01-.707-.293l-5-5a.999.999 0 010-1.414l5-5a.999.999 0 111.414 1.414L4.414 9l4.293 4.293A.999.999 0 018 15z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-columns viewBox="0 0 18 18"><path d="M14.5 0h-12A2.502 2.502 0 000 2.5v13C0 16.878 1.121 18 2.5 18h12c1.378 0 2.5-1.122 2.5-2.5v-13C17 1.121 15.878 0 14.5 0zm-12 16a.501.501 0 01-.5-.5v-13c0-.275.225-.5.5-.5H5v14H2.5zM7 2h3v14H7V2zm8 13.5c0 .275-.225.5-.5.5H12V2h2.5c.275 0 .5.225.5.5v13z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-comment-alt viewBox="0 0 18 18"><path d="M15.5 0h-13A2.507 2.507 0 000 2.5v9C0 12.875 1.125 14 2.5 14H12l4.293 3.293A1 1 0 0018 16.586V2.5C18 1.125 16.875 0 15.5 0m0 2c.271 0 .5.229.5.5v12.048l-2.783-2.135-.538-.413H2.5a.507.507 0 01-.5-.5v-9c0-.271.229-.5.5-.5h13" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-compose viewBox="0 0 18 18"><path d="M14.989 0c-.494 0-.988.183-1.365.548l-.878.858L4.501 9.79c-.285.278-.501.791-.501 1.182v2.274c0 .415.348.754.771.754h2.335c.409 0 .917-.212 1.203-.489l8.499-8.616.632-.62a1.866 1.866 0 000-2.666L16.353.548A1.959 1.959 0 0014.989 0zM5.505 12.545v-1.491l.047-.152 7.264-7.431 1.61 1.61-7.218 7.396-.138.068H5.505zM17.01 8a.996.996 0 00-.992 1v6.599c0 .389-.444.401-.495.401H2.477c-.051 0-.495-.012-.495-.401V2.5c0-.275.221-.5.495-.5H9.01c.547 0 .99-.447.99-1 0-.553-.443-1-.99-1H2.477C1.111 0 0 1.121 0 2.5v13.099C0 16.945 1.088 18 2.477 18h13.046C16.912 18 18 16.945 18 15.599V9c0-.553-.443-1-.99-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-component viewBox="0 0 18 18"><path d="M13 9a4 4 0 10-8 0 4 4 0 008 0m-4 9c-4.963 0-9-4.038-9-9s4.037-9 9-9c1.583 0 3.141.417 4.504 1.206l-1.002 1.731A7.003 7.003 0 009 2C5.141 2 2 5.14 2 9s3.141 7 7 7 7-3.14 7-7c0-1.23-.323-2.44-.936-3.499L16.797 4.5A9.01 9.01 0 0118 9c0 4.962-4.037 9-9 9m6-18a3 3 0 100 6 3 3 0 000-6m0 2c.551 0 1 .449 1 1 0 .551-.449 1-1 1-.551 0-1-.449-1-1 0-.551.449-1 1-1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-confirm viewBox="0 0 18 18"><path d="M9 0a9 9 0 00-9 9 9 9 0 009 9 9 9 0 009-9 9 9 0 00-9-9zm-.937 13a.999.999 0 01-.703-.288l-2.062-2.001a.997.997 0 01-.009-1.413.997.997 0 011.413-.009l1.354 1.299 4.234-4.293a1.001 1.001 0 011.42 1.41l-4.937 5a1.005 1.005 0 01-.71.295z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-connect viewBox="0 0 18 8"><path d="M15.5 0h-3A2.507 2.507 0 0010 2.5V3H8v-.5C8 1.125 6.875 0 5.5 0h-3A2.507 2.507 0 000 2.5v3C0 6.875 1.125 8 2.5 8h3C6.875 8 8 6.875 8 5.5V5h2v.5C10 6.875 11.125 8 12.5 8h3C16.875 8 18 6.875 18 5.5v-3C18 1.125 16.875 0 15.5 0zM6 5.5c0 .271-.229.5-.5.5h-3a.507.507 0 01-.5-.5v-3c0-.271.229-.5.5-.5h3c.271 0 .5.229.5.5v3zm10 0c0 .271-.229.5-.5.5h-3a.507.507 0 01-.5-.5v-3c0-.271.229-.5.5-.5h3c.271 0 .5.229.5.5v3z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-contacts viewBox="0 0 18 18"><path d="M15.5 0h-11C3.293 0 2.283.86 2.051 2H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99H2v2H.99a.99.99 0 00-.99.99v.019A.99.99 0 00.99 8H2v2H.99a.99.99 0 00-.99.99v.02c0 .546.443.99.99.99H2v2H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h1.061c.232 1.14 1.242 2 2.449 2h11c1.379 0 2.5-1.122 2.5-2.5v-13C18 1.121 16.879 0 15.5 0zM10 4a2 2 0 11.001 3.999A2 2 0 0110 4zm0 11c-4 0-4-1-4-1 0-3.979 4-4 4-4 3.979.146 4 4 4 4s0 1-4 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-connections viewBox="0 0 18 17"><path d="M15 11c-.162 0-.317.023-.472.047l-3.302-6.053A2.977 2.977 0 0012 3a3 3 0 10-6 0c0 .769.298 1.463.774 1.994l-3.302 6.053A3.056 3.056 0 003 11a3 3 0 100 6 2.992 2.992 0 002.816-2h6.368A2.992 2.992 0 0018 14a3 3 0 00-3-3zm-9.774 1.006l3.302-6.054c.155.025.31.048.472.048.162 0 .317-.023.472-.048l3.302 6.054a2.964 2.964 0 00-.59.994H5.816a2.964 2.964 0 00-.59-.994z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-copy-url viewBox="0 0 15 18"><path d="M11.978 18h.522a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414L11.586.586A2 2 0 0010.172 0H3.5A2.5 2.5 0 001 2.5V6a1 1 0 102 0V2.5a.5.5 0 01.5-.5H9v3c0 .55.45 1 1 1h3v9.5a.5.5 0 01-.5.5h-.522a.985.985 0 00-.986.979v.031c-.003.546.44.99.986.99zM5 8c-2.722 0-5 2.279-5 5s2.28 5 5 5 5-2.279 5-5c0-2.722-2.277-5-5-5zm.013 8A2.994 2.994 0 012 13c0-.354.06-.689.172-1.005.065.002.841.027.841 1.005 0 1 1 1 1 1-.001 0 1 0 1 1v1zm2.09-.864C7.104 15.121 7.134 14 6 14c-1 0-1-1-1-1 0-.635.423-1 1-1 1.128 0 1.127-1.113 1.127-1.113C7.666 11.428 8 12.175 8 13c0 .837-.344 1.592-.897 2.136z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-copy-mail viewBox="0 0 14 18"><path d="M10.977 18h.523a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414L10.586.586A2 2 0 009.172 0H2.5A2.5 2.5 0 000 2.5V7a1 1 0 102 0V2.5a.5.5 0 01.5-.5H8v3c0 .55.45 1 1 1h3v9.5a.5.5 0 01-.5.5h-.522a.985.985 0 00-.986.979v.031c-.003.546.44.99.985.99zM8 12a2 2 0 00-2-2H2a2 2 0 00-2 2l4 2 4-2zm-8 2v2a2 2 0 002 2h4a2 2 0 002-2v-2l-3.553 1.776a.998.998 0 01-.894 0L0 14z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-checkbox viewBox="0 0 18 18"><path d="M8.063 13a.999.999 0 01-.703-.288L3.297 8.711a.998.998 0 01-.008-1.413.998.998 0 011.414-.009l3.353 3.299 7.235-7.293a1 1 0 111.418 1.41l-7.937 8a1.001 1.001 0 01-.709.295zM14 10a1 1 0 00-1 1v3.599c0 .389-.449.401-.5.401h-10c-.051 0-.5-.012-.5-.401V4.5a.5.5 0 01.5-.5H12a1 1 0 100-2H2.5A2.503 2.503 0 000 4.5v10.099C0 15.945 1.098 17 2.5 17h10c1.402 0 2.5-1.055 2.5-2.401V11a1 1 0 00-1-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-counter-clockwise-90 viewBox="0 0 17 12"><path d="M5.664 6.004H4.477A5.02 5.02 0 019.387 2c2.052 0 3.806 1.118 4.572 2.924a.988.988 0 001.104.583c.612-.122.983-.78.734-1.354C14.717 1.661 12.249 0 9.382 0 5.859 0 2.94 2.615 2.454 6.004H1.127c-.605 0-.857.583-.732 1l2.42 4.436c.292.377.789.376 1.16-.15l2.42-4.286c.125-.52-.126-1-.731-1zm10.336 2h-1a1 1 0 00-1 1v1a1 1 0 001 1h1a1 1 0 001-1v-1a1 1 0 00-1-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-create-report viewBox="0 0 17 16"><path d="M16 2h-1V1a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0V4h1a1 1 0 000-2zm-2 6h-4a1 1 0 01-1-1V3a1 1 0 00-1-1H4.5c-1.207 0-2.217.86-2.449 2H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99H2v2H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99H2v2H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h1.061c.232 1.14 1.242 2 2.449 2h8a2.5 2.5 0 002.5-2.5V9a1 1 0 00-1-1zm-3 5H6c-.55 0-1-.45-1-1s.45-1 1-1h5c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-copy viewBox="0 0 18 18"><path d="M10.414 9.747L8.253 7.586A2.003 2.003 0 006.838 7H4.5A2.502 2.502 0 002 9.5v6C2 16.879 3.121 18 4.5 18h4c1.379 0 2.5-1.121 2.5-2.5v-4.338c0-.531-.211-1.039-.586-1.415zM9 15.5a.5.5 0 01-.5.5h-4a.5.5 0 01-.5-.5v-6a.5.5 0 01.5-.5H6v2c0 .55.45 1 1 1h2v3.5zm6.414-12.086L12.586.586A2 2 0 0011.172 0H4.5A2.5 2.5 0 002 2.5V5a1 1 0 102 0V2.5a.5.5 0 01.5-.5H10v3c0 .55.45 1 1 1h3v9.5a.5.5 0 01-.5.5h-.521a.986.986 0 00-.987.98v.03c-.003.546.44.99.985.99h.523a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-dashboard viewBox="0 0 18 11"><path d="M10.6 2.358c.395.096.811-.028 1.049-.358l.046-.063c.391-.541.13-1.327-.517-1.492-3.841-.984-8.111.642-10.177 4.467a8.846 8.846 0 00-.994 3.141.992.992 0 00.986 1.104.98.98 0 00.972-.857 7.036 7.036 0 01.566-1.97A7.01 7.01 0 0110.6 2.358zm5.368 3.51c-.301.278-.381.707-.248 1.095.151.44.255.888.315 1.337a.98.98 0 00.972.857.992.992 0 00.986-1.104 8.957 8.957 0 00-.394-1.755c-.232-.693-1.095-.927-1.631-.43zm-.347-3.661a1 1 0 00-1.414 0L9.34 7.074A2.002 2.002 0 008.829 7a2 2 0 102 2c0-.178-.031-.347-.075-.512l4.867-4.866a1 1 0 000-1.415z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-cut viewBox="0 0 18 18"><path d="M11.414 9l6.311-6.311a.979.979 0 00-.015-1.385l-.014-.014a.979.979 0 00-1.385-.015L10 7.586 7.753 5.339A3.97 3.97 0 008 4c0-2.206-1.794-4-4-4S0 1.794 0 4s1.794 4 4 4c.997 0 1.899-.38 2.601-.985L8.586 9l-1.985 1.986A3.967 3.967 0 004 10c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4a3.97 3.97 0 00-.247-1.339L10 10.414l6.311 6.311a.979.979 0 001.385-.015l.014-.014a.979.979 0 00.015-1.385L11.414 9zM4 6c-1.102 0-2-.897-2-2 0-1.102.898-2 2-2 1.102 0 2 .898 2 2 0 1.103-.898 2-2 2zm0 10c-1.102 0-2-.898-2-2 0-1.102.898-2 2-2 1.102 0 2 .898 2 2 0 1.102-.898 2-2 2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-database viewBox="0 0 16 18"><path d="M15.5 5.5V3c0-1.3-1.187-2.5-2.484-2.5H2.864A2.365 2.365 0 00.5 2.857V5.5h15zm-15 2h15v3H.5v-3zm0 5v2.643A2.365 2.365 0 002.864 17.5h10.152c1.298 0 2.481-1.104 2.481-2.404L15.5 12.5H.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-decrease-row-line-height viewBox="0 0 18 18"><path d="M10 5c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1zm0 4c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1zm0 4c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1zM.3 14.7l3 3c.1.1.2.2.3.2.1.1.3.1.4.1.1 0 .3 0 .4-.1.1 0 .2-.1.3-.2l3-3c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0L5 14.6V1c0-.6-.4-1-1-1S3 .4 3 1v13.6l-1.3-1.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-default viewBox="0 0 19 15"><path d="M3.5 9.5h-1c-1.1 0-2 .9-2 2v1c0 1.1.9 2 2 2h1c1.1 0 2-.9 2-2v-1c0-1.1-.9-2-2-2zm0 3h-1v-1h1v1zm6-3h-1c-1.1 0-2 .9-2 2v1c0 1.1.9 2 2 2h1c1.1 0 2-.9 2-2v-1c0-1.1-.9-2-2-2zm0 3h-1v-1h1v1zm7-3h-1c-1.1 0-2 .9-2 2v1c0 1.1.9 2 2 2h1c1.1 0 2-.9 2-2v-1c0-1.1-.9-2-2-2zm1.87-3l-.042-.178C17.608 2.963 14.616.49 11.03.49 9.69.49 8.44.87 7.35 1.5L6.79.49c-.31-.56-.83-.61-1.24-.02l-2.99 4.2c-.2.47.12.83.74.83h4.86c.63 0 1.25-.37.94-.93l-.74-1.265c.78-.46 1.7-.667 2.67-.667 2.42 0 4.47 1.642 5.12 3.862h.012l.094.364a1.07 1.07 0 001.307.773c.517-.132.854-.621.807-1.137z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-delete-grid-record viewBox="0 0 16 18"><path d="M15.707 11.293a.999.999 0 00-1.414 0L12.5 13.086l-1.793-1.793a.999.999 0 10-1.414 1.414l1.793 1.793-1.793 1.793a.999.999 0 101.414 1.414l1.793-1.793 1.793 1.793a.997.997 0 001.414 0 .999.999 0 000-1.414L13.914 14.5l1.793-1.793a.999.999 0 000-1.414zM8 9h7a1 1 0 001-1V2.458h-.004A2.5 2.5 0 0013.5 0h-11A2.5 2.5 0 000 2.5v13A2.5 2.5 0 002.5 18H6a1 1 0 001-1v-7a1 1 0 011-1zm3-7h2.5c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5H11V2zm0 4h2.5c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5H11V6zM7 6h2v2H7V6zM5 16H2.5a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5H5v2zm0-4H2.5a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5H5v2zm0-4H2.5a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5H5v2zm0-4H2.5a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5H5v2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-delete viewBox="0 0 18 18"><path d="M3.722 16.328A2 2 0 005.694 18h6.612a2 2 0 001.972-1.672L15 6H3l.722 10.328zM10 9.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v5a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-5zm-4 0a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v5a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-5zM16 2h-4a2 2 0 00-2-2H8a2 2 0 00-2 2H2a1 1 0 100 2h14a1 1 0 100-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-delete-grid-row viewBox="0 0 16 18"><path d="M6 16H2.5a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5H6a1 1 0 000-2H2.5a.501.501 0 01-.5-.5v-2c0-.275.225-.5.5-.5H15a1 1 0 001-1V2.459h-.004A2.501 2.501 0 0013.5 0h-11A2.501 2.501 0 00.004 2.459H0V15.5A2.5 2.5 0 002.5 18H6a1 1 0 000-2zM2 2.5c0-.275.225-.5.5-.5h11c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5h-11a.501.501 0 01-.5-.5v-1zm13.707 8.793a.999.999 0 00-1.414 0L12.5 13.086l-1.793-1.793a.999.999 0 10-1.414 1.414l1.793 1.793-1.793 1.793a.999.999 0 101.414 1.414l1.793-1.793 1.793 1.793a.997.997 0 001.414 0 .999.999 0 000-1.414L13.914 14.5l1.793-1.793a.999.999 0 000-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-dirty viewBox="0 0 18 18"><path d="M1.755 14.697L14.696 1.756c.648-.648.189-1.756-.727-1.756H2.5A2.5 2.5 0 000 2.5v11.47c0 .916 1.107 1.375 1.755.727" fill=#FCD622 fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-design-mode viewBox="0 0 19 19"><path d="M18.208 2.211L9.92 11.72a5.528 5.528 0 00-1.09-1.55c-.46-.46-.98-.83-1.55-1.09L16.788.791a1.01 1.01 0 011.42 0c.39.39.39 1.031 0 1.42zM3.501 11.5c-1.941 1.956-.604 4.415-3 6.998 4.281 0 6.124-1.875 6.999-3 .875-1.124 1-2.998 0-3.998-.999-1-2.999-1-3.999 0zm13.999-1a1 1 0 00-1 1v4.498a.504.504 0 01-.502.502H11.5a1 1 0 100 2h4.498a2.503 2.503 0 002.502-2.502V11.5a1 1 0 00-1-1zm-16-2a1 1 0 001-1V3.001c0-.276.225-.501.501-.501H7.5a1 1 0 100-2H3.001A2.503 2.503 0 00.5 3.001V7.5a1 1 0 001 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-display viewBox="0 0 17 18"><path d="M2.531 16H2.5a.5.5 0 01-.5-.5v-13a.5.5 0 01.5-.5h.031a1 1 0 001-1h.016c0-.549-.519-.992-1.068-.998A2.499 2.499 0 000 2.5v13a2.499 2.499 0 002.479 2.498c.549-.006 1.068-.449 1.068-.998h-.016a1 1 0 00-1-1zm11.938 0h.031a.5.5 0 00.5-.5v-13a.5.5 0 00-.5-.5h-.031a1 1 0 01-1-1h-.016c0-.549.52-.992 1.068-.998A2.498 2.498 0 0117 2.5v13a2.498 2.498 0 01-2.479 2.498c-.548-.006-1.068-.449-1.068-.998h.016a1 1 0 011-1zm-2.055-9.253l-2.161-2.161A2.003 2.003 0 008.838 4H6.5A2.502 2.502 0 004 6.5v5C4 12.879 5.121 14 6.5 14h4c1.379 0 2.5-1.121 2.5-2.5V8.162c0-.531-.211-1.039-.586-1.415zM11 11.5a.5.5 0 01-.5.5h-4a.5.5 0 01-.5-.5v-5a.5.5 0 01.5-.5H8v2c0 .55.45 1 1 1h2v2.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-copy-from viewBox="0 0 15 18"><path d="M11.978 18h.522a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414L11.586.586A2 2 0 0010.172 0H3.5A2.5 2.5 0 001 2.5V6a1 1 0 102 0V2.5a.5.5 0 01.5-.5H9v3c0 .55.45 1 1 1h3v9.5a.5.5 0 01-.5.5h-.522a.985.985 0 00-.986.979v.031c-.003.546.44.99.986.99zm-2.985-5.114C8.993 9.021 5 9 5 9v2H2V9H1c-.55 0-1 .45-1 1v6a2 2 0 002 2h5a2 2 0 002-2v-3l-.007-.114zM2 13h5v3H2v-3z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-distribution viewBox="0 0 18 18"><path d="M7 8a2 2 0 01-2-2V2a2 2 0 012-2h4a2 2 0 012 2v4a2 2 0 01-2 2H7zm5 10a2 2 0 01-2-2v-4a2 2 0 012-2h4a2 2 0 012 2v4a2 2 0 01-2 2h-4zM2 18a2 2 0 01-2-2v-4a2 2 0 012-2h4a2 2 0 012 2v4a2 2 0 01-2 2H2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-distribute-horiz viewBox="0 0 18 18"><path d="M17.01 8H16V5c0-.55-.45-1-1-1s-1 .45-1 1v3h-2V3.5C12 2.122 10.879 1 9.5 1h-1A2.503 2.503 0 006 3.5V8H4V5c0-.55-.45-1-1-1s-1 .45-1 1v3H.99a.99.99 0 00-.99.99v.02c0 .546.443.99.99.99H2v3c0 .55.45 1 1 1s1-.45 1-1v-3h2v4.5C6 15.878 7.122 17 8.5 17h1c1.379 0 2.5-1.122 2.5-2.5V10h2v3c0 .55.45 1 1 1s1-.45 1-1v-3h1.01a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99zM10 14.5c0 .275-.225.5-.5.5h-1a.501.501 0 01-.5-.5v-11c0-.275.225-.5.5-.5h1c.275 0 .5.225.5.5v11z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-doc-check viewBox="0 0 18 18"><path d="M11.171 0c.531 0 1.04.211 1.415.586l2.828 2.828A2 2 0 0116 4.828V15.5c0 1.379-1.122 2.5-2.5 2.5h-9A2.503 2.503 0 012 15.5v-13C2 1.121 3.122 0 4.5 0zM10 2H4.5a.5.5 0 00-.5.5v13a.5.5 0 00.5.5h9a.5.5 0 00.5-.5V6h-3c-.55 0-1-.45-1-1V2zm2.705 6.29a1 1 0 01.004 1.414l-3.937 4a1.001 1.001 0 01-1.412.007l-2.063-2a.998.998 0 01-.008-1.414.998.998 0 011.414-.009l1.353 1.3 3.235-3.294a1.003 1.003 0 011.414-.005z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-document viewBox="0 0 18 18"><path d="M15.414 3.414L12.586.586A2.001 2.001 0 0011.171 0H4.5A2.503 2.503 0 002 2.5v13C2 16.879 3.122 18 4.5 18h9c1.378 0 2.5-1.121 2.5-2.5V4.828a2 2 0 00-.586-1.414zM14 15.5a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5v-13a.5.5 0 01.5-.5H10v3c0 .55.45 1 1 1h3v9.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-document2 viewBox="0 0 14 18"><path d="M13.414 3.414L10.586.586A2.001 2.001 0 009.171 0H2.5A2.503 2.503 0 000 2.5v13C0 16.879 1.122 18 2.5 18h9c1.378 0 2.5-1.121 2.5-2.5V4.828a2 2 0 00-.586-1.414zM12 15.5a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5v-13a.5.5 0 01.5-.5H8v3c0 .55.45 1 1 1h3v9.5zM9 10H5c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1zm0 4H5c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-double-chevron viewBox="0 0 18 18"><path d="M4 14a.999.999 0 01-.707-1.707L6.586 9 3.293 5.707a.999.999 0 111.414-1.414l4 4a.999.999 0 010 1.414l-4 4A.997.997 0 014 14m6 0a.999.999 0 01-.707-1.707L12.586 9 9.293 5.707a.999.999 0 111.414-1.414l4 4a.999.999 0 010 1.414l-4 4A.997.997 0 0110 14" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-down-arrow viewBox="0 0 18 18"><path d="M9.715 15.77l.062-.063h.001l4.999-5a.999.999 0 000-1.414 1.037 1.037 0 00-1.445 0l-3.324 3.293V3a1 1 0 10-2 0v9.711L4.684 9.356a.98.98 0 00-1.399 0 1.002 1.002 0 00.012 1.413l5.002 5.001c.391.39 1.025.39 1.416 0" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-download viewBox="0 0 18 18"><path d="M1 13a1 1 0 00-1 1v1.599C0 16.945 1.098 18 2.5 18h13c1.402 0 2.5-1.055 2.5-2.401V14a1 1 0 10-2 0v1.599c0 .389-.448.401-.5.401h-13c-.052 0-.5-.012-.5-.401V14a1 1 0 00-1-1zm8.707.769l5.062-5.062a.999.999 0 000-1.414 1.037 1.037 0 00-1.445 0L10 10.586V1a1 1 0 10-2 0v9.711L4.676 7.355a.983.983 0 00-1.684.707c0 .256.102.512.297.707l5.002 5a1.001 1.001 0 001.416 0z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-drag viewBox="0 0 3 18"><path d="M2.25 0H.75A.75.75 0 000 .75v1.5c0 .414.335.75.75.75h1.5A.75.75 0 003 2.25V.75A.75.75 0 002.25 0zm0 5H.75a.75.75 0 00-.75.75v1.5c0 .414.335.75.75.75h1.5A.75.75 0 003 7.25v-1.5A.75.75 0 002.25 5zm0 5H.75a.749.749 0 00-.75.75v1.5c0 .414.335.75.75.75h1.5a.75.75 0 00.75-.75v-1.5a.75.75 0 00-.75-.75zm0 5H.75a.75.75 0 00-.75.75v1.5c0 .414.335.75.75.75h1.5a.75.75 0 00.75-.75v-1.5a.75.75 0 00-.75-.75z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-drilldown viewBox="0 0 18 18"><path d="M15.77 8.356l-.062-.062h-.001l-5-5a.999.999 0 10-1.414 1.413l3.293 3.294H3a1 1 0 000 2h9.711l-3.355 3.355a.999.999 0 101.414 1.414l5-5a1 1 0 000-1.414z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-dropdown viewBox="0 0 18 18"><path d="M4 6l5 6 5-6H4" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-duplicate viewBox="0 0 18 18"><path d="M16 6.5v9c0 .275-.225.5-.5.5h-9a.501.501 0 01-.5-.5v-9a.5.5 0 01.5-.5h9a.5.5 0 01.5.5M15.5 4h-9A2.503 2.503 0 004 6.5v9C4 16.879 5.122 18 6.5 18h9c1.379 0 2.5-1.121 2.5-2.5v-9C18 5.122 16.879 4 15.5 4M13 2H2v11a1 1 0 01-2 0V2.5A2.5 2.5 0 012.5 0H13a1 1 0 010 2" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-edit viewBox="0 0 18 18"><path d="M17 16H9.78l-2 2H17c.55 0 1-.45 1-1s-.45-1-1-1zM14.09.003c-.64 0-1.28.242-1.77.727L.65 12.41c-.37.37-.65 1.05-.65 1.57V17c0 .55.45 1 1 1h3.03c.53 0 1.19-.28 1.56-.65L16.45 6.5l.82-.82c.97-.98.97-2.56 0-3.54L15.86.73a2.508 2.508 0 00-1.77-.727zM2 16v-1.98l.06-.2 9.21-9.21 2.25 1.98-9.31 9.32-.18.09H2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-employee-directory viewBox="0 0 18 17"><path d="M7 7c.276 0 .541-.04.798-.1a6.003 6.003 0 012.111-1.456A3.5 3.5 0 107 7m-.15 1.228A5.965 5.965 0 006.167 11c0 3.057 2.299 5.582 5.258 5.949H2c-1.857 0-1.99-1.49-2-1.703v-.025a6.996 6.996 0 016.85-6.993zM12 7c2.206 0 4 1.794 4 4 0 .739-.216 1.424-.566 2.019l2.109 2.109a.99.99 0 010 1.4l-.015.015a.99.99 0 01-1.4 0l-2.109-2.109c-.595.35-1.28.566-2.019.566-2.206 0-4-1.794-4-4s1.794-4 4-4zm0 2c-1.102 0-2 .898-2 2 0 1.103.898 2 2 2 1.102 0 2-.897 2-2 0-1.102-.898-2-2-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-empty-circle viewBox="0 0 18 18"><path d="M9 0C4 0 0 4 0 9s4 9 9 9 9-4 9-9-4-9-9-9zm.4 16c-3.6.2-6.8-2.6-7.2-6.2-.4-4 2.7-7.7 6.7-7.8 3.9-.1 7.1 3.4 6.9 7.3-.1 3.6-3 6.5-6.4 6.7z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-enterprise-planning viewBox="0 0 17 18"><path d="M9.747 0c.703 0 1.354.319 1.716.922L12.309 2h1.567v.038A2.494 2.494 0 0116.001 4.5v11a2.5 2.5 0 01-2.5 2.5h-11a2.5 2.5 0 01-2.5-2.5v-11c0-1.252.924-2.28 2.125-2.462V2h1.718L4.691.922C5.052.319 5.704 0 6.407 0h3.34zm3.754 4h-11a.5.5 0 00-.5.5v11a.5.5 0 00.5.5h11a.5.5 0 00.5-.5v-11a.5.5 0 00-.5-.5zm-2.5 3h-6c-.55 0-1 .45-1 1s.45 1 1 1h6c.55 0 1-.45 1-1s-.45-1-1-1zm0 4h-6c-.55 0-1 .45-1 1s.45 1 1 1h6c.55 0 1-.45 1-1s-.45-1-1-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-comment viewBox="0 0 17 17"><path d="M14.5 0h-12A2.507 2.507 0 000 2.5v8C0 11.875 1.125 13 2.5 13H13l4 4V2.5C17 1.125 15.875 0 14.5 0" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-error-alert viewBox="0 0 18 18"><g fill-rule=nonzero><path d="M9 18A9 9 0 109 0a9 9 0 000 18z" fill=currentColor stroke=none></path><path d="M8.5 12h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1a.5.5 0 01.5-.5zm0-8h1a.5.5 0 01.5.5v5a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-5a.5.5 0 01.5-.5z" fill=#FFF stroke=none></path></g></symbol> <symbol id=icon-error-solid viewBox="0 0 18 18"><path d="M9 0a9 9 0 110 18A9 9 0 019 0zm.5 12h-1a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5zm0-8h-1a.5.5 0 00-.5.5v5a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-5a.5.5 0 00-.5-.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-expand-all viewBox="0 0 18 18"><path d="M13.01 10H12V8.99a.99.99 0 00-.99-.99h-.02a.99.99 0 00-.99.99V10H8.99a.99.99 0 00-.99.99v.02c0 .547.444.99.99.99H10v1.01c0 .547.444.99.99.99h.02a.99.99 0 00.99-.99V12h1.01a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99zM16 15.5c0 .275-.225.5-.5.5h-9a.501.501 0 01-.5-.5V6.502c0-.277.22-.5.497-.5l9.003.011c.278 0 .5.221.5.5V15.5zM15.5 4h-9A2.503 2.503 0 004 6.5v9C4 16.878 5.122 18 6.5 18h9c1.379 0 2.5-1.122 2.5-2.5v-9C18 5.122 16.879 4 15.5 4zM14 1a1 1 0 00-1-1H2.5A2.5 2.5 0 000 2.5V13a1 1 0 002 0V2h11a1 1 0 001-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-expand-app-tray viewBox="0 0 18 18"><path d="M3 15a.999.999 0 01-.707-1.707L6.586 9 2.293 4.707a.999.999 0 111.414-1.414l5 5a.999.999 0 010 1.414l-5 5A.997.997 0 013 15zm6 0a.999.999 0 01-.707-1.707L12.586 9 8.293 4.707a.999.999 0 111.414-1.414l5 5a.999.999 0 010 1.414l-5 5A.997.997 0 019 15z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-expense-report viewBox="0 0 14 18"><path d="M8 16h2-2zm4-.05c1.14-.233 2-1.243 2-2.45v-11C14 1.121 12.878 0 11.5 0h-9A2.503 2.503 0 000 2.5v11c0 1.207.86 2.217 2 2.45L4 16h2l6-.05zm-1-4.94a.99.99 0 01-.99.99H6.99a.99.99 0 01-.99-.99v-.02a.99.99 0 01.99-.99h3.02a.99.99 0 01.99.99v.02zm0-4a.99.99 0 01-.99.99H3.99A.99.99 0 013 7.01v-.02A.99.99 0 013.99 6h6.02a.99.99 0 01.99.99v.02zm0-4.001a.99.99 0 01-.99.991H3.99A.99.99 0 013 3.009V2.99A.99.99 0 013.99 2h6.02a.99.99 0 01.99.99v.019zM1 14c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1zm4 0c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1zm4 0c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1zm4 0c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-expired-schedule viewBox="0 0 19 19"><path d="M18.177 11.11a1.1 1.1 0 00-1.56 0l-1.976 1.976-1.975-1.976a1.098 1.098 0 00-1.559 0 1.096 1.096 0 000 1.556l1.976 1.978-1.975 1.976a1.1 1.1 0 00.779 1.88c.281 0 .562-.11.777-.323l1.975-1.977 1.978 1.977a1.1 1.1 0 001.555-1.557l-1.973-1.979 1.977-1.976a1.098 1.098 0 00.001-1.555M9.5 6.498a1 1 0 00-1 1v2.587l-1.712 1.706c-.392.392-.36 1.022.028 1.413a.97.97 0 00.695.297c.257 0 .518-.1.715-.297l1.973-1.999c.187-.184.301-.441.301-.707V7.496a1 1 0 00-1-.998zm8.446-.051c.73-.738.73-1.94 0-2.691l-2.661-2.703a1.893 1.893 0 00-2.674 0l-1.556 1.563c.188.036-.832-.162-1.558-.162-.529 0-1.043.054-1.544.153L6.406 1.053a1.892 1.892 0 00-2.673 0L1.071 3.756a1.925 1.925 0 000 2.691l1.003 1.02a8.087 8.087 0 00-.602 3.06c0 3.912 2.772 7.254 6.592 7.944l.195.021a1.102 1.102 0 00.193-2.187c-2.777-.503-4.791-2.929-4.791-5.776 0-3.235 2.618-5.868 5.834-5.868a5.83 5.83 0 015.528 3.991c.19.576.81.887 1.387.691.573-.193.882-.818.689-1.396a3.676 3.676 0 00-.185-.454l1.032-1.046z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-export-2 viewBox="0 0 14 18"><path d="M8.999 18H11.5a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414L10.586.586A2 2 0 009.172 0H2.5A2.5 2.5 0 000 2.5V7a1 1 0 102 0V2.5a.5.5 0 01.5-.5H8v3c0 .55.45 1 1 1h3v9.5a.5.5 0 01-.5.5H9a.985.985 0 00-.986.98v.03a.985.985 0 00.985.99zM.732 15H2v2a1 1 0 102 0v-2h1.269c.604 0 .947-.887.58-1.361L3.58 10.31c-.292-.378-.868-.428-1.16-.05L.152 13.663C-.216 14.139.127 15 .732 15z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-export-spreadsheet viewBox="0 0 18 18"><path d="M4 6H2.731c-.604 0-.947-.861-.58-1.337L4.421.26c.291-.378.867-.328 1.16.05l2.268 4.329c.367.474.024 1.36-.58 1.36H6v1a1 1 0 11-2 0V6zm10.414-1.586l-2.828-2.828A2.001 2.001 0 0010.171 1h-1.17a1 1 0 100 2v3c0 .55.45 1 1 1h3v2H3a1 1 0 00-1 1v5.5A2.5 2.5 0 004.5 18h8a2.5 2.5 0 002.5-2.5V5.828a2 2 0 00-.587-1.414zM4 11h4v1H4v-1zm5 0h4v1H9v-1zm-5 2h4v1H4v-1zm5 0h4v1H9v-1zm-5 2h4v1H4v-1zm5 0h4v1H9v-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-export-to-pdf viewBox="0 0 14 18"><path d="M.732 5H2v1a1 1 0 102 0V5h1.269c.605 0 .947-.887.58-1.361L3.58.31c-.292-.378-.868-.428-1.16-.05L.152 3.663C-.216 4.139.127 5 .732 5zm12.682-.586l-2.828-2.828A2.001 2.001 0 009.171 1H8v5c0 .55.45 1 1 1h3v2H2a1 1 0 00-1 1v5.5A2.5 2.5 0 003.5 18h8a2.5 2.5 0 002.5-2.5V5.828a2 2 0 00-.586-1.414zM5 12v2H3v2H2v-5h3v1zm4 3a1 1 0 01-1 1H6v-5h2a1 1 0 011 1v3zm4-3h-2v1h1v1h-1v2h-1v-5h3v1zM3 12h1v1H3v-1zm4 0h1v3H7v-3z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-export-xml viewBox="0 0 15 18"><path d="M2 6H.731c-.605 0-.947-.861-.58-1.337L2.42.26c.292-.378.868-.328 1.16.05l2.269 4.329C6.216 5.113 5.874 6 5.269 6H4v1a1 1 0 11-2 0V6zm11 10h-3v-5h1v4h2v1zm-4 0H8v-3H7v3H6v-5h1v1h1v-1h1v5zm-4-3H4v1h1v2H4v-2H3v2H2v-2h1v-1H2v-2h1v2h1v-2h1v2zm9.414-8.586l-2.828-2.828A2.001 2.001 0 0010.171 1H9a1 1 0 100 2v3c0 .55.45 1 1 1h3v2H1a1 1 0 00-1 1v5.5A2.5 2.5 0 002.5 18h10a2.5 2.5 0 002.5-2.5V5.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-export-xsd viewBox="0 0 15 18"><path d="M2 6H.731c-.605 0-.947-.861-.58-1.337L2.42.26c.292-.378.868-.328 1.16.05l2.269 4.329C6.216 5.113 5.874 6 5.269 6H4v1a1 1 0 11-2 0V6zm9 9h1v-3h-1v3zm2 0a1 1 0 01-1 1h-2v-5h2a1 1 0 011 1v3zm-4-3H7v1h1a1 1 0 011 1v1a1 1 0 01-1 1H6v-1h2v-1H7a1 1 0 01-1-1v-1a1 1 0 011-1h2v1zm-4 1H4v1h1v2H4v-2H3v2H2v-2h1v-1H2v-2h1v2h1v-2h1v2zm9.414-8.586l-2.828-2.828A2.001 2.001 0 0010.171 1H9a1 1 0 100 2v3c0 .55.45 1 1 1h3v2H1a1 1 0 00-1 1v5.5A2.5 2.5 0 002.5 18h10a2.5 2.5 0 002.5-2.5V5.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-export viewBox="0 0 18 18"><path d="M10 0h1.171c.531 0 1.04.211 1.415.586l2.828 2.828A2 2 0 0116 4.828V15.5a2.5 2.5 0 01-2.5 2.5h-9A2.5 2.5 0 012 15.5V14a1 1 0 112 0v1.5a.5.5 0 00.5.5h9a.5.5 0 00.5-.5V6h-3c-.55 0-1-.45-1-1V2H4.5a.5.5 0 00-.5.5V6a1 1 0 11-2 0V2.5A2.5 2.5 0 014.5 0H10zM7 12.269V11h3a1 1 0 100-2H7V7.731c0-.604-.887-.947-1.362-.58L2.31 9.42c-.378.292-.428.868-.05 1.16l3.403 2.269c.476.367 1.337.024 1.337-.58z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-calendar viewBox="0 0 14 14"><path d="M11 3V1.99a.99.99 0 00-.99-.99h-.02a.99.99 0 00-.99.99V3H5V1.99A.99.99 0 004.01 1h-.02a.99.99 0 00-.99.99V3c-1.378 0-2 .622-2 2v6c0 1.378.622 2 2 2h8c1.378 0 2-.622 2-2V5c0-1.378-.622-2-2-2zM3 7h8v4H3V7zm5 1h2v2H8V8z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-between viewBox="0 0 14 14"><path d="M9.269 4H8V2a1 1 0 10-2 0v2H4.731c-.604 0-.947.887-.579 1.361L6.42 8.69c.292.378.868.428 1.16.05l2.269-3.403C10.216 4.861 9.873 4 9.269 4zm2.741 7h-.02a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h.02a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99zm-3 0h-.02a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h.02a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99zm-4 0h-.02a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h.02a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99zm-3 0h-.02a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h.02a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-contains viewBox="0 0 14 14"><path d="M11 12h1V2h-1a1 1 0 010-2h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 010-2zM6 7h2V5H6v2zm4 3a1 1 0 01-1 1H8V9H6v2H5a1 1 0 01-1-1V4a1 1 0 011-1h4a1 1 0 011 1v6zm-6 3a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h2a1 1 0 010 2H2v10h1a1 1 0 011 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-exit-fullview viewBox="0 0 18 18"><path d="M1 14h3v3a1 1 0 102 0v-4a1 1 0 00-1-1H1a1 1 0 100 2m12-8h4a1 1 0 100-2h-3V1a1 1 0 10-2 0v4a1 1 0 001 1M4 1v3H1a1 1 0 100 2h4a1 1 0 001-1V1a1 1 0 10-2 0m8 12v4a1 1 0 102 0v-3h3a1 1 0 100-2h-4a1 1 0 00-1 1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-does-not-end-with viewBox="0 0 14 14"><path d="M9 6.655L7 9.322V11h1a1 1 0 001-1V6.655zm-4-.643L5.759 5H5v1.012zm5.865-4.511l-9 12a1 1 0 11-1.73-1.002L3 8.678V4a1 1 0 011-1h3.259L9.135.499a1 1 0 111.73 1.002zM13 6v7a1 1 0 01-1 1h-2a1 1 0 010-2h1V6a1 1 0 012 0z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-does-not-equal viewBox="0 0 14 14"><path d="M13 5c0-.55-.45-1-1-1h-1.873l-.984 2H12c.55 0 1-.45 1-1M8.306 1.076A1.002 1.002 0 007 1.617L5.827 4H2c-.55 0-1 .45-1 1s.45 1 1 1h2.842l-.985 2H2c-.55 0-1 .45-1 1s.45 1 1 1h.873l-.797 1.618c-.21.508.034 1.096.542 1.306a1.002 1.002 0 001.306-.541L8.848 2.382a1.003 1.003 0 00-.542-1.306M13 9c0 .55-.45 1-1 1H7.173l.985-2H12c.55 0 1 .45 1 1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-does-not-start-with viewBox="0 0 14 14"><path d="M11.135.499a1 1 0 111.73 1.003l-8.999 12a1 1 0 01-1.731-1.003zM4 0a1 1 0 010 2H3v6a1 1 0 01-2 0V1a1 1 0 011-1zm7 6.655V10a1 1 0 01-1 1H9V9.322l2-2.667zM10 3c.377 0 .694.217.864.526L9 6.012V5H7v2h1.259l-2.843 3.79A.98.98 0 015 10V4a1 1 0 011-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-exclamation viewBox="0 0 18 18"><path d="M9.5 14a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm0-13A1.5 1.5 0 0111 2.5v8a1.5 1.5 0 01-3 0v-8A1.5 1.5 0 019.5 1z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-filter-end-with viewBox="0 0 13 14"><path d="M4 7h2V5H4v2zm4 3a1 1 0 01-1 1H6V9H4v2H3a1 1 0 01-1-1V4a1 1 0 011-1h4a1 1 0 011 1v6zm1 2h1V2H9a1 1 0 010-2h2a1 1 0 011 1v12a1 1 0 01-1 1H9a1 1 0 010-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-equals viewBox="0 0 14 14"><path d="M13 5.01c0 .547-.483.99-1.08.99H2.08C1.483 6 1 5.557 1 5.01v-.02C1 4.443 1.483 4 2.08 4h9.84c.597 0 1.08.443 1.08.99v.02zm0 4c0 .547-.483.99-1.08.99H2.08C1.483 10 1 9.557 1 9.01v-.02C1 8.443 1.483 8 2.08 8h9.84c.597 0 1.08.443 1.08.99v.02z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-greater-equals viewBox="0 0 14 14"><path d="M13 12.009a.99.99 0 01-.991.99H1.991a.99.99 0 01-.991-.99v-.02a.99.99 0 01.991-.99h10.018a.99.99 0 01.991.99v.02zM2.063 8.35a1.002 1.002 0 01.585-1.288L8.152 5 2.648 2.936a1.002 1.002 0 01-.585-1.288 1.004 1.004 0 011.289-.585l8 3a1.001 1.001 0 010 1.873l-8 3a1.003 1.003 0 01-1.289-.585z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-in-range viewBox="0 0 14 14"><path d="M13.707 6.293l-2-2a.997.997 0 00-1.414 0 .999.999 0 000 1.414l.293.293H3.414l.293-.293a.999.999 0 10-1.414-1.414l-2 2a.999.999 0 000 1.414l2 2a.999.999 0 101.414-1.414L3.414 8h7.172l-.293.293a.999.999 0 101.414 1.414l2-2a.999.999 0 000-1.414" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-filter-is-empty viewBox="0 0 14 14"><path d="M7 1a6 6 0 100 12A6 6 0 007 1zm0 2c.74 0 1.424.216 2.019.567L3.567 9.019A3.947 3.947 0 013 7c0-2.206 1.794-4 4-4zm0 8c-.74 0-1.424-.216-2.019-.567l5.452-5.452C10.784 5.576 11 6.26 11 7c0 2.206-1.794 4-4 4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-less-equals viewBox="0 0 14 14"><path d="M11 9a1.002 1.002 0 00.352-1.937L5.848 5l5.504-2.064c.516-.194.778-.77.585-1.288a1.004 1.004 0 00-1.289-.585l-8 3a1.001 1.001 0 000 1.873l8 3c.117.043.235.064.352.064zM1 11.99a.99.99 0 01.991-.99h10.018a.99.99 0 01.991.99v.02a.99.99 0 01-.991.99H1.991A.99.99 0 011 12.01v-.02z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-less-than viewBox="0 0 14 14"><path d="M10.999 12a1 1 0 00.448-1.894L5.236 7l6.211-3.105a1.001 1.001 0 00-.894-1.79l-8 4a1.001 1.001 0 000 1.79l8 4c.143.07.296.105.446.105" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-filter-is-not-empty viewBox="0 0 14 14"><path d="M7 5a2 2 0 10-.001 3.999A2 2 0 007 5m0-4a6 6 0 100 12A6 6 0 007 1m0 2c2.206 0 4 1.794 4 4s-1.794 4-4 4-4-1.794-4-4 1.794-4 4-4" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-not-selected viewBox="0 0 14 14"><path d="M3.74 3a.742.742 0 00-.74.74v6.52c0 .408.332.74.74.74h6.52c.408 0 .74-.332.74-.74V3.74a.742.742 0 00-.74-.74H3.74zm6.645 10h-6.77A2.618 2.618 0 011 10.385v-6.77A2.618 2.618 0 013.615 1h6.77A2.618 2.618 0 0113 3.615v6.616C13 11.674 11.827 13 10.385 13z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-selected-notselected viewBox="0 0 14 14"><path d="M3 3.761c0-.42.342-.761.761-.761h6.7c.211 0 .401.085.539.224h-.002l-7.773 7.775-.001.001A.76.76 0 013 10.462v-6.7zM10.385 1h-6.77A2.618 2.618 0 001 3.615v6.769A2.618 2.618 0 003.615 13h6.77A2.618 2.618 0 0013 10.384V3.615A2.618 2.618 0 0010.385 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-greater-than viewBox="0 0 14 14"><path d="M3.002 12a1 1 0 01-.448-1.894L8.764 7l-6.21-3.105a1.001 1.001 0 01.894-1.79l8 4a1.001 1.001 0 010 1.79l-8 4a1.003 1.003 0 01-.446.105" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-error viewBox="0 0 18 18"><path d="M9 0a9 9 0 110 18A9 9 0 019 0zm.5 12h-1a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5zm0-8h-1a.5.5 0 00-.5.5v5a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-5a.5.5 0 00-.5-.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-selected viewBox="0 0 14 14"><path d="M12.74 4.612a.985.985 0 000-1.335.852.852 0 00-1.257 0L7.667 7.33l-1.15-1.22a.852.852 0 00-1.256 0 .985.985 0 000 1.334L7.667 10l5.072-5.388zM10.23 13H3.77A2.773 2.773 0 011 10.23V3.77A2.773 2.773 0 013.77 1h4.615a.923.923 0 110 1.846H3.769a.924.924 0 00-.923.923v6.462c0 .508.414.923.923.923h6.462c.51 0 .923-.415.923-.923v-.923a.923.923 0 111.846 0v.923A2.773 2.773 0 0110.23 13z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-start-with viewBox="0 0 14 14"><path d="M8 7h2V5H8v2zm4 3a1 1 0 01-1 1h-1V9H8v2H7a1 1 0 01-1-1V4a1 1 0 011-1h4a1 1 0 011 1v6zm-6 3a1 1 0 01-1 1H3a1 1 0 01-1-1V1a1 1 0 011-1h2a1 1 0 010 2H4v10h1a1 1 0 011 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter viewBox="0 0 18 18"><path d="M13 8H5a1 1 0 100 2h8a1 1 0 100-2zm2-4H3a1 1 0 100 2h12a1 1 0 100-2zm-4 8H7a1 1 0 100 2h4a1 1 0 100-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-finance viewBox="0 0 18 12"><path d="M4 2h10a2 2 0 00-2-2H2a2 2 0 00-2 2v4a2 2 0 002 2V4c0-1.1.9-2 2-2m12 2H6a2 2 0 00-2 2v4a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2m-5 6a2 2 0 110-4 2 2 0 010 4" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-first-page viewBox="0 0 18 18"><path d="M15 3.731c0-.604-.886-.947-1.361-.58l-6.328 5.27c-.378.291-.428.867-.05 1.16l6.403 5.268c.475.367 1.336.024 1.336-.58V3.731zm-10 .26A.99.99 0 004.01 3h-.02a.99.99 0 00-.99.99v10.02c0 .546.443.99.99.99h.02a.99.99 0 00.99-.99V3.99z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-flag viewBox="0 0 18 18"><path d="M1 18c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1s1 .45 1 1v16c0 .55-.45 1-1 1zm3-6V0h12.297c.928 0 1.356 1.155.651 1.759L12 6l4.948 4.241c.705.604.277 1.759-.651 1.759H4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-fore-color viewBox="0 0 18 18"><path d="M9.606 7.41H7.382l1.123-3.348h.024L9.606 7.41zm-4.68 1.668c-.07.185-.186.521-.186.73 0 .51.36.835.881.835.452 0 .718-.152.846-.522l.498-1.39h3.059l.486 1.39c.139.37.44.522.858.522.486 0 .892-.371.892-.835 0-.209-.116-.545-.186-.73L9.781 2.696C9.57 2.104 9.189 2 8.76 2h-.452c-.463 0-.765.15-.927.58L4.926 9.077zm7.503 6.28H4.57a1.571 1.571 0 010-3.143h7.858a1.571 1.571 0 010 3.143z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-formula-constituents viewBox="0 0 17 18"><path d="M11 9V2c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1 .45-1 1s.45 1 1 1v7L.232 15.703C-.396 16.702.323 18 1.503 18h12.995c1.178 0 1.896-1.296 1.272-2.295L11 9zM7.5 2h1a.5.5 0 01.5.5v6a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-6a.5.5 0 01.5-.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-freight-mgmt viewBox="0 0 18 18"><path d="M16 18h-.004A2.004 2.004 0 0018 16V9l-.01-.034a.987.987 0 00-.349-.734L11.95 3.49c.027-.16.05-.322.05-.49 0-1.654-1.346-3-3-3a1 1 0 100 2 1.001 1.001 0 010 2c-.552 0-1-.449-1-1a1 1 0 10-2 0c0 .168.023.33.05.49L.359 8.232a.987.987 0 00-.349.734L0 9v7c0 1.104.899 2 2.004 2H2l-.004-8.533 1-.832 4.052-3.374A2.977 2.977 0 008.999 6c.748 0 1.425-.285 1.951-.739L15 8.635l1 .834V18zM5 18a1 1 0 01-1-1v-7a1 1 0 012 0v7a1 1 0 01-1 1zm4 0a1 1 0 01-1-1v-7a1 1 0 012 0v7a1 1 0 01-1 1zm4 0a1 1 0 01-1-1v-7a1 1 0 012 0v7a1 1 0 01-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-fullview viewBox="0 0 18 18"><path d="M5 16H2v-3a1 1 0 10-2 0v4a1 1 0 001 1h4a1 1 0 100-2zM17 0h-4a1 1 0 100 2h3v3a1 1 0 102 0V1a1 1 0 00-1-1zM2 5V2h3a1 1 0 100-2H1a1 1 0 00-1 1v4a1 1 0 102 0zm16 12v-4a1 1 0 10-2 0v3h-3a1 1 0 100 2h4a1 1 0 001-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-genealogy viewBox="0 0 12 18"><path d="M1 18a1 1 0 01-1-1v-1.343c0-1.336.52-2.591 1.464-3.535l7.658-7.658A3.02 3.02 0 0010 2.343V1a1 1 0 012 0v1.343c0 1.336-.52 2.591-1.464 3.535l-7.658 7.658A3.02 3.02 0 002 15.657V17a1 1 0 01-1 1M2.878 4.464A3.023 3.023 0 012 2.343V1a1 1 0 10-2 0v1.343c0 1.335.52 2.591 1.464 3.535L3.086 7.5 4.5 6.086 2.878 4.464zm7.658 7.658L8.914 10.5 7.5 11.914l1.622 1.622c.558.559.878 1.332.878 2.121V17a1 1 0 102 0v-1.343c0-1.335-.52-2.591-1.464-3.535zM7 3H5a1 1 0 010-2h2a1 1 0 010 2zm0 14H5a1 1 0 010-2h2a1 1 0 010 2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-generate-key viewBox="0 0 18 17"><path d="M16 5v-.989a1 1 0 00-2 0V5h-1a1 1 0 000 2h1v1a1 1 0 002 0V7h1a1 1 0 000-2h-1zm.708 10.046L9.42 7.757a5 5 0 10-1.414 1.414l1.485 1.486-1.585 1.586a1.003 1.003 0 000 1.414 1.003 1.003 0 001.414 0l1.586-1.586 1.414 1.414-1.586 1.586a1.003 1.003 0 000 1.414 1.003 1.003 0 001.414 0l1.586-1.585 1.56 1.56a1.004 1.004 0 001.414 0 1.003 1.003 0 000-1.414zM5.249 8a2.98 2.98 0 01-2.122-.879A2.981 2.981 0 012.249 5c0-.801.312-1.555.878-2.121A2.98 2.98 0 015.249 2a2.98 2.98 0 012.121.879c.567.566.879 1.32.879 2.121 0 .801-.312 1.555-.879 2.121A2.98 2.98 0 015.249 8z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-folder viewBox="0 0 18 18"><path d="M0 7.099V15a2 2 0 002 2h14a2 2 0 002-2V7H0v.099zM16 2H9.232L8.386.922C8.024.319 7.373 0 6.67 0H2a2 2 0 00-2 2v3h18V4a2 2 0 00-2-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-get-more-rows viewBox="0 0 18 18"><path d="M15 4a1 1 0 00-1 1v1h-1a1 1 0 000 2h1v1a1 1 0 002 0V8h1a1 1 0 000-2h-1V5a1 1 0 00-1-1zm0 10H2.5A2.5 2.5 0 010 11.5v-1A2.5 2.5 0 012.5 8H9a1 1 0 110 2H2.5c-.275 0-.5.225-.5.5v1c0 .275.225.5.5.5H15a1 1 0 010 2zm1-13a1 1 0 01-1 1H2.5c-.275 0-.5.225-.5.5v2c0 .275.225.5.5.5H9a1 1 0 110 2H2.5A2.5 2.5 0 010 4.5v-2A2.5 2.5 0 012.5 0H15a1 1 0 011 1zm1 17H1c-.55 0-1-.45-1-1s.45-1 1-1h16c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-group-selection viewBox="0 0 18 18"><path d="M6 10.5c-3.314 0-6 2.5-6 5.231C0 15.731 0 18 2.5 18h7c2.5 0 2.5-2.269 2.5-2.269C12 13 9.314 10.5 6 10.5zm9.5-8a2.5 2.5 0 10-5 0 2.5 2.5 0 005 0zM6 2.5a3 3 0 100 6 3 3 0 000-6zm7.05 5c-1.546 0-2.925.66-3.833 1.64 2.106.865 3.757 2.534 4.44 4.548h2.281C18 13.688 18 11.815 18 11.815 18 9.562 15.784 7.5 13.05 7.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-grid viewBox="0 0 18 18"><path d="M4 1H2a1 1 0 00-1 1v2a1 1 0 001 1h2a1 1 0 001-1V2a1 1 0 00-1-1zm6 0H8a1 1 0 00-1 1v2a1 1 0 001 1h2a1 1 0 001-1V2a1 1 0 00-1-1zm6 0h-2a1 1 0 00-1 1v2a1 1 0 001 1h2a1 1 0 001-1V2a1 1 0 00-1-1zM4 7H2a1 1 0 00-1 1v2a1 1 0 001 1h2a1 1 0 001-1V8a1 1 0 00-1-1zm6 0H8a1 1 0 00-1 1v2a1 1 0 001 1h2a1 1 0 001-1V8a1 1 0 00-1-1zm6 0h-2a1 1 0 00-1 1v2a1 1 0 001 1h2a1 1 0 001-1V8a1 1 0 00-1-1zM4 13H2a1 1 0 00-1 1v2a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 00-1-1zm6 0H8a1 1 0 00-1 1v2a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 00-1-1zm6 0h-2a1 1 0 00-1 1v2a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 00-1-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-group viewBox="0 0 17 17"><path d="M10.5 2c.271 0 .5.229.5.5v8c0 .271-.229.5-.5.5h-8a.507.507 0 01-.5-.5v-8c0-.271.229-.5.5-.5h8m0-2h-8A2.507 2.507 0 000 2.5v8C0 11.875 1.125 13 2.5 13h8c1.375 0 2.5-1.125 2.5-2.5v-8C13 1.125 11.875 0 10.5 0m4 6c.271 0 .5.229.5.5v8c0 .271-.229.5-.5.5h-8a.507.507 0 01-.5-.5v-8c0-.271.229-.5.5-.5h8m0-2h-8A2.507 2.507 0 004 6.5v8C4 15.875 5.125 17 6.5 17h8c1.375 0 2.5-1.125 2.5-2.5v-8C17 5.125 15.875 4 14.5 4" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-h3 viewBox="0 0 18 18"><path d="M0 4.236C0 3.497.459 3 1.179 3c.718 0 1.179.497 1.179 1.236v3.077h4.284V4.236c0-.739.46-1.236 1.18-1.236C8.54 3 9 3.497 9 4.236v8.778c0 .739-.459 1.236-1.179 1.236-.718 0-1.179-.497-1.179-1.236v-3.62H2.358v3.62c0 .739-.46 1.236-1.18 1.236C.46 14.25 0 13.753 0 13.014V4.236m11.207 6.238c1.356 0 .624 1.911 2.726 1.911 1.142 0 1.752-.714 1.752-1.677 0-.747-.32-1.29-1.37-1.4-.428-.046-1.265-.123-1.265-.838 0-.808.457-.98 1.325-1.026.762-.047 1.158-.497 1.158-1.211 0-.933-.717-1.368-1.524-1.368-1.843 0-1.417 1.771-2.62 1.771-.518 0-1.02-.233-1.02-.932C10.369 3.809 12.577 3 14.055 3c2.635 0 3.61 1.508 3.61 3.015 0 .994-.442 1.709-1.295 2.176 1.143.326 1.63 1.258 1.63 2.424 0 2.454-1.858 3.635-4.113 3.635-2.863 0-3.762-1.818-3.762-2.687 0-.639.458-1.09 1.082-1.09" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-h4 viewBox="0 0 18 18"><path d="M15.513 3c.741 0 1.03.451 1.03 1.118V9.79h.688c.467 0 .769.373.769.886 0 .512-.302.886-.77.886h-.687v1.6c0 .652-.247 1.088-.962 1.088-.714 0-.961-.436-.961-1.087v-1.601h-3.45c-.715 0-1.045-.576-1.045-1.072 0-.405.082-.653.262-.917l4.233-6.138c.206-.31.507-.435.893-.435zM7.82 3C8.541 3 9 3.498 9 4.237v8.776c0 .739-.459 1.237-1.179 1.237-.718 0-1.179-.498-1.179-1.237v-3.62H2.358v3.62c0 .739-.46 1.237-1.18 1.237C.46 14.25 0 13.752 0 13.013V4.237C0 3.498.459 3 1.179 3c.718 0 1.179.498 1.179 1.237v3.075h4.284V4.237c0-.739.46-1.237 1.18-1.237zm6.804 3.375h-.024L12.375 9.75h2.25V6.375z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-half-empty-circle viewBox="0 0 18 18"><path d="M9 0a9 9 0 100 18A9 9 0 009 0m0 2c3.86 0 7 3.14 7 7H2c0-3.86 3.14-7 7-7" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-hcm-calendar viewBox="0 0 17 18"><path d="M14.5 2H14V.99a.99.99 0 00-.99-.99h-.02a.99.99 0 00-.99.99V2H5V.99A.99.99 0 004.01 0h-.02A.99.99 0 003 .99V2h-.5A2.503 2.503 0 000 4.5v11C0 16.878 1.122 18 2.5 18h12c1.378 0 2.5-1.122 2.5-2.5v-11C17 3.122 15.878 2 14.5 2zm.5 13.5a.5.5 0 01-.5.5h-12a.5.5 0 01-.5-.5V5h13v10.5zm-3.293-8.207a.999.999 0 00-1.414 0L8.5 9.086 6.707 7.293a.999.999 0 10-1.414 1.414L7.086 10.5l-1.793 1.793a.999.999 0 101.414 1.414L8.5 11.914l1.793 1.793a.997.997 0 001.414 0 .999.999 0 000-1.414L9.914 10.5l1.793-1.793a.999.999 0 000-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-filter-does-not-contain viewBox="0 0 14 14"><path d="M8.308 2.45L4.122 9.644a.901.901 0 00.33 1.235.91.91 0 001.24-.329l4.186-7.192a.901.901 0 00-.33-1.235.91.91 0 00-1.24.329zM11 5c-.552 0-1 .392-1 .875v4.375c-.552 0-1 .392-1 .875S9.448 12 10 12h1.003c.551 0 .997-.39.997-.872V5.875C12 5.392 11.552 5 11 5zM4 2H2.997C2.446 2 2 2.39 2 2.872v5.253C2 8.608 2.448 9 3 9s1-.392 1-.875V3.75c.552 0 1-.392 1-.875S4.552 2 4 2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-headphones viewBox="0 0 14 17"><path d="M14 7c0-3.86-3.141-7-7-7S0 3.14 0 7v3c0 1.1.9 2 2 2s2-.9 2-2V9c0-1.1-.9-2-2-2 0-2.757 2.243-5 5-5s5 2.243 5 5c-1.1 0-2 .9-2 2v1c0 1.1.9 2 2 2v1.5c0 .275-.225.5-.5.5H8.723A1.994 1.994 0 005 15a1.994 1.994 0 003.723 1H11.5a2.5 2.5 0 002.5-2.5V7" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-heart-filled viewBox="0 0 17 16"><path d="M15.894 1.828a5.001 5.001 0 00-7.402-.364 5 5 0 00-7.401.364c-1.663 2.014-1.364 5.013.482 6.859l6.212 6.212a.999.999 0 001.414 0l6.212-6.212c1.847-1.846 2.146-4.845.483-6.859" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-heart-outlined viewBox="0 0 17 16"><path d="M12.028 0c-1.28 0-2.559.488-3.535 1.464A4.987 4.987 0 004.957 0a4.99 4.99 0 00-3.866 1.828c-1.663 2.014-1.364 5.013.482 6.86l6.212 6.211a.997.997 0 001.415 0l6.212-6.211c1.846-1.847 2.145-4.846.482-6.86A4.988 4.988 0 0012.028 0m0 2c.899 0 1.746.402 2.324 1.102.968 1.172.812 3.004-.354 4.171l-5.505 5.505-5.505-5.505c-1.167-1.167-1.323-2.999-.355-4.171A3.008 3.008 0 014.957 2c.801 0 1.555.312 2.121.879l1.415 1.414 1.414-1.414A2.978 2.978 0 0112.028 2" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-help viewBox="0 0 11 16"><path d="M5.1 0c-2.757 0-5 2.243-5 5a1 1 0 002 0c0-1.654 1.346-3 3-3s3 1.346 3 3-1.346 3-3 3a1 1 0 00-1 1v2.5a1 1 0 002 0V9.9a5.01 5.01 0 004-4.9c0-2.757-2.243-5-5-5zm0 14a1 1 0 110 2 1 1 0 010-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-helper-list-select viewBox="0 0 18 18"><path d="M8 8H5c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1zm0 4H5c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1zm7.5-12h-13A2.5 2.5 0 000 2.5v13A2.5 2.5 0 002.5 18h6.542a.981.981 0 00.98-.996l-.001-.041a.979.979 0 00-.98-.963H2.5a.501.501 0 01-.5-.5V6h14v3a1 1 0 002 0V2.5A2.5 2.5 0 0015.5 0zM3 4a1 1 0 110-2 1 1 0 010 2zm12.758 10.242L17 13c0-.969-1-1-1-1l-4-1c-1 0-1 1-1 1s.656 2.922 1 4c.309.968 1 1 1 1l1.258-1.258 1.949 1.965a.999.999 0 001.414 0l.086-.086a.999.999 0 000-1.414l-1.949-1.965z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-history viewBox="0 0 18 15"><path d="M13.774 3.56c.173.115.329.26.49.4.173.151.335.312.486.486.139.16.285.317.4.49l.228.419c.08.15.172.294.236.449l.127.408c.055.177.122.352.158.535l.038.245S16.008 8 16.996 8c1.118 0 1-1 1-1-.067-.416-.064-.321-.13-.613l-.002-.012a6.815 6.815 0 00-.128-.525l-.038-.15-.143-.409-.092-.251-.137-.296-.163-.337-.112-.191-.246-.405-.064-.086a7.052 7.052 0 00-.795-.961 7.049 7.049 0 00-.956-.792l-.091-.067-.402-.243-.194-.116-.332-.159-.302-.141-.242-.088-.419-.146-.134-.035a6.926 6.926 0 00-1.878-.264v.004c-1.2 0-2.397.314-3.47.926L6.859.421c-.29-.531-.915-.58-1.156-.03L2.897 4.508c-.192.437.113.907.687.946l4.849-.062c.593.094.89-.458.6-.989l-.542-.994a4.98 4.98 0 013.045-.641l.427.044c.183.035.359.102.538.158l.405.126c.155.064.3.156.45.237l.418.227zM3 10H2c-1.101 0-2 .9-2 2v1c0 1.1.899 2 2 2h1c1.1 0 2-.9 2-2v-1c0-1.1-.9-2-2-2zm-1 2h1v1H2v-1zm7-2H7.999c-1.1 0-2 .9-2 2v1c0 1.1.9 2 2 2H9c1.099 0 2-.9 2-2v-1c0-1.1-.901-2-2-2zm-1.001 2H9v1H7.999v-1zM16 10h-1.001c-1.1 0-2 .9-2 2v1c0 1.1.9 2 2 2H16c1.1 0 2-.9 2-2v-1c0-1.1-.9-2-2-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-home viewBox="0 0 18 18"><path d="M16.999 8a.994.994 0 01-.599-.2L9 2.25 1.6 7.8A1 1 0 01.4 6.2l8-6a.999.999 0 011.2 0l8 6a1 1 0 01-.601 1.8zM9 5l7 5v5a2 2 0 01-2 2h-3v-5H7v5H4.013A2.013 2.013 0 012 14.987V10l7-5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-horiz-center-align viewBox="0 0 18 18"><path d="M2 8V6.5C2 5.121 3.121 4 4.5 4S7 5.121 7 6.5V8h2v2H7v1.5C7 12.879 5.879 14 4.5 14A2.502 2.502 0 012 11.5V10H.99A.99.99 0 010 9.01v-.02A.99.99 0 01.99 8H2zm15.01 0H16v2h1.01a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99zM13.5 3c.275 0 .5.225.5.5v11c0 .275-.225.5-.5.5h-2a.501.501 0 01-.5-.5v-11c0-.275.225-.5.5-.5h2zm0-2h-2A2.503 2.503 0 009 3.5v11c0 1.379 1.122 2.5 2.5 2.5h2c1.378 0 2.5-1.121 2.5-2.5v-11C16 2.122 14.878 1 13.5 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-html viewBox="0 0 46 18"><path d="M0 4.313C0 3.529.511 3 1.312 3c.8 0 1.313.529 1.313 1.313v3.264h4.769V4.313C7.394 3.529 7.907 3 8.707 3c.801 0 1.312.529 1.312 1.313v9.315c0 .784-.511 1.313-1.312 1.313-.8 0-1.313-.529-1.313-1.313V9.786H2.625v3.842c0 .784-.513 1.313-1.313 1.313-.801 0-1.312-.529-1.312-1.313V4.313m15.264 1.104h-2.48c-.752 0-1.36-.385-1.36-1.104 0-.721.608-1.105 1.36-1.105h7.587c.752 0 1.36.384 1.36 1.105 0 .719-.608 1.104-1.36 1.104H17.89v8.211c0 .784-.512 1.313-1.313 1.313-.8 0-1.313-.529-1.313-1.313V5.417m7.824-1.121c0-1.056.719-1.296 1.423-1.296h.769c.817 0 1.2.32 1.473 1.2l2.289 7.395h.032L31.331 4.2c.271-.88.656-1.2 1.473-1.2h.736c.704 0 1.424.24 1.424 1.296v9.364c0 .657-.32 1.281-1.168 1.281-.849 0-1.169-.624-1.169-1.281V6.522h-.032l-2.449 7.65c-.176.545-.576.769-1.121.769-.544 0-.944-.224-1.12-.769l-2.449-7.65h-.031v7.138c0 .657-.321 1.281-1.169 1.281-.849 0-1.168-.624-1.168-1.281V4.296m14.256.017c0-.784.511-1.313 1.312-1.313.8 0 1.313.529 1.313 1.313v8.211h4.385c.752 0 1.361.383 1.361 1.104 0 .721-.609 1.105-1.361 1.105H38.88c-.928 0-1.536-.369-1.536-1.538V4.313" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-import-xml viewBox="0 0 15 18"><path d="M2 2H.731c-.605 0-.947.861-.58 1.337L2.42 7.74c.292.378.868.328 1.16-.05l2.269-4.329C6.216 2.887 5.874 2 5.269 2H4V1a1 1 0 10-2 0v1zm11 14h-3v-5h1v4h2v1zm-4 0H8v-3H7v3H6v-5h1v1h1v-1h1v5zm-4-3H4v1h1v2H4v-2H3v2H2v-2h1v-1H2v-2h1v2h1v-2h1v2zm9.414-8.586l-2.828-2.828A2.001 2.001 0 0010.171 1H9a1 1 0 100 2v3c0 .55.45 1 1 1h3v2H1a1 1 0 00-1 1v5.5A2.5 2.5 0 002.5 18h10a2.5 2.5 0 002.5-2.5V5.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-import viewBox="0 0 18 18"><path d="M6 7.731V9H3a1 1 0 100 2h3v1.269c0 .604.887.947 1.362.58l3.328-2.269c.378-.292.429-.868.051-1.16L7.337 7.151C6.861 6.784 6 7.127 6 7.731zm9.414-4.317L12.586.586A2.001 2.001 0 0011.171 0H4.5A2.5 2.5 0 002 2.5V6a1 1 0 102 0V2.5a.5.5 0 01.5-.5H10v3c0 .55.45 1 1 1h3v9.5a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5V14a1 1 0 10-2 0v1.5A2.5 2.5 0 004.5 18h9a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-in-progress-alert viewBox="0 0 18 18"><g fill-rule=evenodd><path d="M18 9a9 9 0 01-9 9 9 9 0 01-9-9 9 9 0 019-9 9 9 0 019 9" fill=currentColor stroke=none></path><path d="M10.293 12.787a1.001 1.001 0 01.646 1.893 6.084 6.084 0 01-.727.198.999.999 0 11-.406-1.959 3.97 3.97 0 00.487-.132zM9 2.146c0-.418.526-.634.845-.345l2.049 1.854a.46.46 0 010 .69L9.844 6.2C9.527 6.488 9 6.273 9 5.854V5C6.795 5 5 6.795 5 9a4.02 4.02 0 002.602 3.749 1 1 0 11-.7 1.873A6.027 6.027 0 013 9c0-3.308 2.692-6 6-6zm3.288 9.133a1 1 0 011.64 1.146 6.605 6.605 0 01-.254.338 1.004 1.004 0 01-1.407.157c-.43-.346-.5-.975-.156-1.407.062-.076.121-.154.177-.234zm1.624-3.162l.11.004c.553.013.99.47.977 1.023l-.006.148a1.002 1.002 0 01-.998.954l-.047-.002a1 1 0 01-.953-1.046L13 9.097c.011-.552.461-1.03 1.023-.976z" fill=#FFF stroke=none></path></g></symbol> <symbol id=icon-in-progress-solid viewBox="0 0 18 18"><path d="M9 0a9 9 0 019 9 9 9 0 01-9 9 9 9 0 01-9-9 9 9 0 019-9zm2.563 13.41a1.001 1.001 0 00-1.27-.623 3.97 3.97 0 01-.487.132 1 1 0 10.406 1.96c.248-.053.491-.118.727-.199.523-.179.802-.747.624-1.27zM9.778 1.75C9.458 1.54 9 1.756 9 2.146V3l-.225.004A6.008 6.008 0 003 9a6.027 6.027 0 003.902 5.622 1 1 0 10.7-1.873A4.02 4.02 0 015 8.999c0-2.204 1.795-4 4-4v.855l.006.08c.063.365.54.535.839.265l2.049-1.853.061-.067a.46.46 0 00-.061-.624L9.844 1.8zm3.903 9.283a1 1 0 00-1.393.246c-.056.08-.115.158-.177.234a1.004 1.004 0 00.156 1.407 1.001 1.001 0 001.407-.157c.087-.109.172-.222.253-.338a1 1 0 00-.246-1.392zm.23-2.916l-.106.01c-.456.068-.795.491-.806.97l-.004.1.002.117a1 1 0 00.95.93l.049.002.112-.007c.479-.054.861-.45.885-.947L15 9.144l-.004-.117a1.001 1.001 0 00-.972-.906l-.111-.004z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-in-progress viewBox="0 0 18 18"><path d="M9 0a9 9 0 019 9 9 9 0 01-9 9 9 9 0 01-9-9 9 9 0 019-9zm2.563 13.41a1.001 1.001 0 00-1.27-.623 3.97 3.97 0 01-.487.132 1 1 0 10.406 1.96c.248-.053.491-.118.727-.199.523-.179.802-.747.624-1.27zM9.778 1.75C9.458 1.54 9 1.756 9 2.146V3l-.225.004A6.008 6.008 0 003 9a6.027 6.027 0 003.902 5.622 1 1 0 10.7-1.873A4.02 4.02 0 015 8.999c0-2.204 1.795-4 4-4v.855l.006.08c.063.365.54.535.839.265l2.049-1.853.061-.067a.46.46 0 00-.061-.624L9.844 1.8zm3.903 9.283a1 1 0 00-1.393.246c-.056.08-.115.158-.177.234a1.004 1.004 0 00.156 1.407 1.001 1.001 0 001.407-.157c.087-.109.172-.222.253-.338a1 1 0 00-.246-1.392zm.23-2.916l-.106.01c-.456.068-.795.491-.806.97l-.004.1.002.117a1 1 0 00.95.93l.049.002.112-.007c.479-.054.861-.45.885-.947L15 9.144l-.004-.117a1.001 1.001 0 00-.972-.906l-.111-.004z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-in-progress-linear viewBox="0 0 18 18"><path d="M15.702 8.96c-.736-.02-1.35.593-1.37 1.337a1.327 1.327 0 001.085 1.345l.21.022c.735.022 1.349-.575 1.372-1.318v-.03a1.316 1.316 0 00-1.297-1.356m-2.276 4.13l-.18.252a1.355 1.355 0 00.244 1.888 1.328 1.328 0 001.871-.247l.277-.389a1.356 1.356 0 00-.36-1.869 1.329 1.329 0 00-1.852.365m-2.651 2.071a4.924 4.924 0 01-.608.178 1.348 1.348 0 00-1.015 1.606 1.34 1.34 0 001.059 1.033c.17.031.35.03.53-.01.315-.07.624-.16.926-.269a1.352 1.352 0 00.81-1.72 1.33 1.33 0 00-1.702-.818M9.012 6.278V4.701c-2.524-.004-4.778 1.81-5.254 4.403-.471 2.563.935 5.092 3.343 6.014a1.35 1.35 0 01.774 1.736 1.332 1.332 0 01-1.488.847l-.232-.065C2.54 16.254.429 12.46 1.135 8.616c.715-3.89 4.094-6.599 7.877-6.594V.715c0-.627.789-.95 1.267-.517l3.074 2.781a.692.692 0 010 1.036l-3.074 2.781c-.478.432-1.267.11-1.267-.518" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-info-alert viewBox="0 0 18 18"><g fill-rule=nonzero><path d="M9 0a9 9 0 00-9 9 9 9 0 009 9 9 9 0 009-9 9 9 0 00-9-9z" fill=currentColor stroke=none></path><path d="M9.5 6h-1a.5.5 0 01-.5-.5v-1a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5zm0 8h-1a.5.5 0 01-.5-.5v-5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v5a.5.5 0 01-.5.5z" fill=#FFF stroke=none></path></g></symbol> <symbol id=icon-info-field-alert viewBox="0 0 18 18"><g fill-rule=nonzero><path d="M9 0a9 9 0 00-9 9 9 9 0 009 9 9 9 0 009-9 9 9 0 00-9-9z" fill=currentColor stroke=none></path><path d="M9.5 6h-1a.5.5 0 01-.5-.5v-1a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5zm0 8h-1a.5.5 0 01-.5-.5v-5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v5a.5.5 0 01-.5.5z" fill=#FFF stroke=none></path></g></symbol> <symbol id=icon-increase-row-line-height viewBox="0 0 18 18"><path d="M10 5c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1zm0 4c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1zm0 4c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1zM7.7 3.3l-3-3C4.6.2 4.5.1 4.4.1 4.3 0 4.1 0 4 0c-.1 0-.3 0-.4.1-.1 0-.2.1-.3.2l-3 3c-.4.4-.4 1 0 1.4.4.4 1 .4 1.4 0L3 3.4V17c0 .6.4 1 1 1s1-.4 1-1V3.4l1.3 1.3c.4.4 1 .4 1.4 0 .4-.4.4-1 0-1.4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-info-field-linear viewBox="0 0 18 18"><path d="M10 4.975a1 1 0 11-2 0 1 1 0 012 0zM10 9a1 1 0 10-2 0v4a1 1 0 102 0V9zM9 2C5.141 2 2 5.14 2 9c0 3.859 3.141 7 7 7s7-3.141 7-7c0-3.86-3.141-7-7-7zm0-2a9 9 0 019 9 9 9 0 01-9 9 9 9 0 01-9-9 9 9 0 019-9z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-info-field-solid viewBox="0 0 18 18"><path d="M9 0a9 9 0 019 9 9 9 0 01-9 9 9 9 0 01-9-9 9 9 0 019-9zm.5 8h-1a.5.5 0 00-.5.5v5a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-5a.5.5 0 00-.5-.5zm0-4h-1a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-info-field viewBox="0 0 18 18"><path d="M10 4.975a1 1 0 11-2 0 1 1 0 012 0zM10 9a1 1 0 10-2 0v4a1 1 0 102 0V9zM9 2C5.141 2 2 5.14 2 9c0 3.859 3.141 7 7 7s7-3.141 7-7c0-3.86-3.141-7-7-7zm0-2a9 9 0 019 9 9 9 0 01-9 9 9 9 0 01-9-9 9 9 0 019-9z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-info-solid viewBox="0 0 18 18"><path d="M9 0a9 9 0 019 9 9 9 0 01-9 9 9 9 0 01-9-9 9 9 0 019-9zm.5 8h-1a.5.5 0 00-.5.5v5a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-5a.5.5 0 00-.5-.5zm0-4h-1a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-info viewBox="0 0 18 18"><path d="M10 4.975a1 1 0 11-2 0 1 1 0 012 0zM10 9a1 1 0 10-2 0v4a1 1 0 102 0V9zM9 2C5.141 2 2 5.14 2 9c0 3.859 3.141 7 7 7s7-3.141 7-7c0-3.86-3.141-7-7-7zm0-2a9 9 0 019 9 9 9 0 01-9 9 9 9 0 01-9-9 9 9 0 019-9z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-insert-grid-row viewBox="0 0 18 18"><path d="M15.973 11.81a2.971 2.971 0 01-1.094-.689l-2-2A2.978 2.978 0 0112 7c0-.801.312-1.555.879-2.121l2-2a2.993 2.993 0 011.09-.688A2.495 2.495 0 0013.5 0h-11A2.503 2.503 0 000 2.5v13C0 16.879 1.121 18 2.5 18h11c1.379 0 2.5-1.121 2.5-2.5v-3.69h-.027zM2 2.5c0-.275.225-.5.5-.5h11c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5h-11a.501.501 0 01-.5-.5v-1zm12 13c0 .275-.225.5-.5.5h-11a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5h11c.275 0 .5.225.5.5v1zm0-4c0 .275-.225.5-.5.5h-11a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5h11c.275 0 .5.225.5.5v1zm.293-3.793l2 2a.997.997 0 001.414 0 .999.999 0 000-1.414L16.414 7l1.293-1.293a.999.999 0 10-1.414-1.414l-2 2a.999.999 0 000 1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-insert-image viewBox="0 0 18 18"><path d="M15.523 0H2.477C1.088 0 0 1.055 0 2.401v13.198C0 16.945 1.088 18 2.477 18h13.046C16.912 18 18 16.945 18 15.599V2.401C18 1.055 16.912 0 15.523 0zM2.477 2h13.046c.051 0 .496.012.496.401V14.02l-3.125-2.869L10 13.062 6.042 9.466 1.982 12V2.5c0-.275.221-.5.495-.5zM14 6a2 2 0 10-3.999-.001A2 2 0 0014 6z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-inventory viewBox="0 0 18 18"><path d="M10.746 0c.703 0 1.354.319 1.716.922L13.308 2h1.567v.038A2.494 2.494 0 0117 4.5v11a2.5 2.5 0 01-2.5 2.5h-11A2.5 2.5 0 011 15.5v-11c0-1.252.924-2.28 2.125-2.462V2h1.718L5.69.922C6.051.319 6.703 0 7.406 0h3.34zM14.5 4h-11a.5.5 0 00-.5.5v11a.5.5 0 00.5.5h11a.5.5 0 00.5-.5v-11a.5.5 0 00-.5-.5zM12 7c.55 0 1 .45 1 1s-.45 1-1 1H6c-.55 0-1-.45-1-1s.45-1 1-1zm0 4H6c-.55 0-1 .45-1 1s.45 1 1 1h6c.55 0 1-.45 1-1s-.45-1-1-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-invoicing viewBox="0 0 14 18"><path d="M13.414 3.414L10.586.586A2.001 2.001 0 009.171 0H2.5A2.503 2.503 0 000 2.5v13C0 16.879 1.122 18 2.5 18h9c1.378 0 2.5-1.121 2.5-2.5V4.828a2 2 0 00-.586-1.414zM12 15.5a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5v-13a.5.5 0 01.5-.5H8v3c0 .55.45 1 1 1h3v9.5zM6.063 14a.999.999 0 01-.703-.288l-2.062-2.001a1 1 0 111.405-1.422l1.353 1.299 3.238-3.291a1 1 0 011.419 1.41l-3.94 3.998a1.002 1.002 0 01-.71.295z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-invoice-released viewBox="0 0 18 18"><path d="M1 10h9.565l-2.331 2.32a1.021 1.021 0 00-.009 1.43c.39.393 1.022.404 1.416.016l4.062-3.996a.998.998 0 00.009-1.412l-4-4.061a.999.999 0 00-1.415-.008.962.962 0 00-.009 1.382L10.606 8H1a1 1 0 100 2zM15.599 0H2.5A2.503 2.503 0 000 2.5V5a1 1 0 102 0V2.5a.5.5 0 01.5-.5h13.099c.389 0 .401.449.401.5v13c0 .051-.012.5-.401.5H2.5a.5.5 0 01-.5-.5V13a1 1 0 10-2 0v2.5C0 16.879 1.121 18 2.5 18h13.099C16.945 18 18 16.902 18 15.5v-13C18 1.098 16.945 0 15.599 0z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-item-purchase-data viewBox="0 0 18 18"><path d="M13 4c-1.936 0-3-.751-3-1s1.064-1 3-1 3 .751 3 1-1.064 1-3 1zM8 7.429C8 9.195 10.592 10 13 10s5-.805 5-2.571V3c0-1.71-2.149-3-5-3S8 1.29 8 3v4.429zM10 7V5.421c.826.362 1.851.579 3 .579s2.174-.217 3-.579v1.894C15.743 7.57 14.67 8 13 8c-1.681 0-2.759-.437-3.007-.69L10 7zm-4 .429V6H2a2 2 0 00-2 2h6.047A3.686 3.686 0 016 7.429zM3.5 16a1.5 1.5 0 11.001-3.001A1.5 1.5 0 013.5 16zm9.5-4c-2.67 0-4.777-.749-5.956-2H0v6a2 2 0 002 2h14a2 2 0 002-2v-5.219C16.777 11.555 15.056 12 13 12z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-italic viewBox="0 0 18 18"><path d="M9.018 4.312C9.185 3.528 9.81 3 10.61 3c.8 0 1.201.528 1.034 1.312l-1.98 9.315c-.168.785-.792 1.313-1.593 1.313-.799 0-1.2-.528-1.033-1.313l1.981-9.315" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-key viewBox="0 0 17 17"><path d="M16.459 15.046L9.171 7.757a5 5 0 10-1.414 1.414l1.485 1.486-1.585 1.586a1.003 1.003 0 000 1.414 1.003 1.003 0 001.414 0l1.586-1.586 1.414 1.414-1.586 1.586a1.003 1.003 0 000 1.414 1.003 1.003 0 001.414 0l1.586-1.585 1.56 1.56a1.004 1.004 0 001.414 0 1.003 1.003 0 000-1.414zM5 8a2.98 2.98 0 01-2.122-.879A2.981 2.981 0 012 5c0-.801.312-1.555.878-2.121A2.98 2.98 0 015 2a2.98 2.98 0 012.121.879C7.688 3.445 8 4.199 8 5c0 .801-.312 1.555-.879 2.121A2.98 2.98 0 015 8z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-language viewBox="0 0 17 17"><path d="M14.5 0h-12A2.507 2.507 0 000 2.5v8C0 11.875 1.125 13 2.5 13H13l4 4V2.5C17 1.125 15.875 0 14.5 0zm-11 8a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-knowledge-base viewBox="0 0 19 18"><path d="M16.103 15.136c0-.015.03-1.136-1.103-1.136-1 0-1-1-1-1 0-.635.423-1 1-1 1.128 0 1.127-1.113 1.127-1.115a2.992 2.992 0 01-.024 4.251zM14.012 16A2.994 2.994 0 0111 13c0-.354.059-.689.172-1.005.064.002.84.027.84 1.005 0 1 1 1 1 1s1 0 1 1v1zM14 8c-2.722 0-5 2.278-5 5 0 2.721 2.279 5 5 5 2.72 0 5-2.279 5-5 0-2.722-2.278-5-5-5zm-6.318 8H3.999a1.001 1.001 0 010-2h3.08a7.014 7.014 0 01-.08-1 6.989 6.989 0 013.408-6H6.999c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h5c.55 0 1 .45 1 1v2l-.016.082c.333-.049.67-.082 1.016-.082 1.076 0 2.09.25 3 .683V2c0-1.103-.897-2-2-2h-11c-1.654 0-3 1.346-3 3v12c0 1.654 1.346 3 3 3h5.106a7.007 7.007 0 01-1.423-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-lasso viewBox="0 0 18 18"><path d="M17.934 5.633C17.606 2.365 13.981 0 9.579 0c-.41 0-.827.021-1.249.063C3.385.559-.334 3.856.024 7.428c.211 2.104 1.792 3.829 4.064 4.794l.068.217-2.884 2.884a.999.999 0 101.414 1.414l2.884-2.883c.282.11.587.176.909.176.803 0 1.509-.385 1.966-.973.389-.002.783-.02 1.182-.059 4.946-.496 8.665-3.794 8.307-7.365zm-3.491 3.339c-1.239 1.099-3.067 1.841-5.015 2.036l-.499.025a2.499 2.499 0 00-4.536-.878c-1.352-.697-2.26-1.74-2.379-2.926-.145-1.446.878-2.588 1.501-3.141C4.754 2.99 6.582 2.248 8.53 2.053 8.88 2.017 9.233 2 9.579 2c3.354 0 6.15 1.683 6.365 3.832.145 1.446-.878 2.588-1.501 3.14z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-last-page viewBox="0 0 18 18"><path d="M3 3.731c0-.604.886-.947 1.361-.58l6.328 5.27c.378.291.428.867.05 1.16l-6.403 5.268C3.86 15.216 3 14.873 3 14.27V3.731zm12 10.28a.99.99 0 01-.99.99h-.02a.99.99 0 01-.99-.99V3.99a.99.99 0 01.99-.99h.02a.99.99 0 01.99.99v10.02z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-ledger viewBox="0 0 18 18"><path d="M17 0c-3.932 0-6.606.47-7.97 1.399C7.4.298 3.993.012 1.004 0H1a1 1 0 00-1 1v14a1 1 0 001 1c5.686 0 6.852 1.006 7.018 1.19.088.454.481.798.959.81H9a1 1 0 00.995-.897c.547-.569 3.828-1.089 7.009-1.103A1 1 0 0018 15V1a1 1 0 00-1-1zm-1 2.011v8.003c-2.891.073-4.784.409-6 .873V3.179c.204-.209 1.317-1.06 6-1.168zm-14 .01c2.83.101 5.5.57 6 1.078v7.803c-1.343-.533-3.343-.833-6-.891v-7.99zm0 11.99v-2c4.693.107 5.8.955 6 1.162v1.729c-1.343-.532-3.343-.833-6-.891zm8 .876v-1.788c.501-.508 3.171-.974 6-1.077v1.992c-2.891.073-4.784.409-6 .873z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-left-align viewBox="0 0 18 18"><path d="M3 4.5C3 5.879 4.121 7 5.5 7h4C10.879 7 12 5.879 12 4.5S10.879 2 9.5 2h-4A2.502 2.502 0 003 4.5zM0 2v15.01c0 .547.443.99.99.99h.02a.99.99 0 00.99-.99V2H0zM0 .99V2h2V.99A.99.99 0 001.01 0H.99A.99.99 0 000 .99zM15.5 11c.275 0 .5.225.5.5v2c0 .275-.225.5-.5.5h-10a.501.501 0 01-.5-.5v-2c0-.275.225-.5.5-.5h10zm0-2h-10A2.502 2.502 0 003 11.5v2C3 14.879 4.121 16 5.5 16h10c1.378 0 2.5-1.121 2.5-2.5v-2c0-1.379-1.122-2.5-2.5-2.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-left-arrow viewBox="0 0 18 18"><path d="M17 8H3.436l5.33-5.29A1 1 0 107.36 1.29l-7.062 7a1 1 0 00-.009 1.414l7 7.062a1 1 0 101.424-1.405L3.394 10H17a1 1 0 100-2" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-left-text-align viewBox="0 0 18 18"><path d="M17 5H1c-.55 0-1-.45-1-1s.45-1 1-1h16c.55 0 1 .45 1 1s-.45 1-1 1m-6 5H1c-.55 0-1-.45-1-1s.45-1 1-1h10c.55 0 1 .45 1 1s-.45 1-1 1m6 5H1c-.55 0-1-.45-1-1s.45-1 1-1h16c.55 0 1 .45 1 1s-.45 1-1 1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-line-bar-chart viewBox="0 0 18 18"><path d="M4 12v4.001H2.5c-.051 0-.5-.012-.5-.402V9.662L5.2 5.4l3.2 2.4a1 1 0 001.369-.16l4.424-5.31 2.252 1.502a1.003 1.003 0 001.44-.365c.246-.46.061-1.038-.374-1.328L14.555.168a1 1 0 00-1.323.192L8.84 5.63 5.6 3.2a1.001 1.001 0 00-1.4.2L2 6.334V1a1 1 0 00-2 0v14.599C0 16.946 1.098 18 2.5 18h13c1.402 0 2.5-1.054 2.5-2.401V7a1 1 0 00-2 0v8.599c0 .39-.449.402-.5.402H14V10a1 1 0 00-2 0v6.001h-2V11a1 1 0 00-2 0v5.001H6V12a1 1 0 00-2 0" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-line-chart viewBox="0 0 18 18"><path d="M17 18H3.5C1.57 18 0 16.43 0 14.5V1a1 1 0 112 0v13.5c0 .827.673 1.5 1.5 1.5H17a1 1 0 110 2zM4.999 12a1 1 0 01-.799-1.6l3-4a1.001 1.001 0 011.4-.2l3.24 2.43 4.392-5.27a1 1 0 111.536 1.281l-5 6a1 1 0 01-1.368.159L8.2 8.4l-2.4 3.2a.998.998 0 01-.801.4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-link viewBox="0 0 18 18"><path d="M7 14H4.5A4.505 4.505 0 010 9.5v-1C0 6.019 2.019 4 4.5 4H7a1 1 0 110 2H4.5A2.502 2.502 0 002 8.5v1C2 10.879 3.121 12 4.5 12H7a1 1 0 110 2zm6.5 0H11a1 1 0 110-2h2.5c1.379 0 2.5-1.121 2.5-2.5v-1C16 7.121 14.879 6 13.5 6H11a1 1 0 110-2h2.5C15.981 4 18 6.019 18 8.5v1c0 2.481-2.019 4.5-4.5 4.5zM12 10H6c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-load viewBox="0 0 18 18"><path d="M2.053 8.002H.731c-.605 0-.947.526-.58 1l2.268 4.436c.292.378.852.335 1.161-.15l2.268-4.286c.367-.474.025-1-.579-1H4.082A5.007 5.007 0 018.982 4a4.887 4.887 0 012.711.818l1.435-1.435A6.936 6.936 0 008.982 2C5.462 2 2.54 4.614 2.053 8.002zm13.83 1.994h1.358c.604 0 .947-.526.58-1.001L15.552 4.56c-.292-.378-.85-.336-1.16.149l-2.268 4.286c-.368.476-.025 1.001.58 1.001h1.15a5.01 5.01 0 01-4.899 3.998 4.899 4.899 0 01-2.712-.818L4.81 14.611a6.923 6.923 0 004.146 1.381c3.52.001 6.44-2.609 6.928-5.996z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-locked viewBox="0 0 18 18"><path d="M13 8V3.8C13 1.74 11.168 0 9 0S5 1.74 5 3.8V8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2v-6c0-1.1-.9-2-2-2zM7 3.8C7 2.857 7.953 2 9 2c1.047 0 2 .857 2 1.8V8H7V3.8zm2 6.7a1.5 1.5 0 011.001 2.617L10 14.5a1 1 0 01-1.993.117L8 14.5v-1.382A1.5 1.5 0 019 10.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-logo-trademark viewBox="0 0 37 32"><g fill-rule=evenodd><path fill=#D52027 d="M0 0h32v32H0z" stroke=none></path><path d="M2.9 13.2h2v6.6h-2v-6.6zm3.1 0h1.9v.6s.3-.8 1.9-.8c2.1 0 2.4 1.3 2.4 3.1v3.6h-2v-3.2c0-.8 0-1.7-1.1-1.7s-1.2.8-1.2 1.7v3.3H6v-6.6zm7.4-1.1c0-1.4.4-2.6 2.6-2.6.4 0 .8 0 1.2.1l-.2 1.6c-.2-.1-.4-.1-.7-.1-.6 0-1 .2-1 1.1v1h1.5v1.6h-1.5v4.9h-2l.1-7.6zm7.4 1c2 0 3.6 1.3 3.6 3.4 0 2.1-1.6 3.4-3.6 3.4s-3.6-1.4-3.6-3.4c-.1-2.1 1.6-3.4 3.6-3.4zm0 5.1c1 0 1.6-.7 1.6-1.7s-.6-1.7-1.6-1.7-1.6.7-1.6 1.7.6 1.7 1.6 1.7zM25.2 13.2h2v.6s.5-.8 2.6-.7v1.8c-.3-.1-.6-.1-.9-.1-1.5 0-1.7 1.1-1.7 2.4v2.7h-2v-6.7zM2.9 11.1l2-1.4v2.5h-2v-1.1z" fill=#FFF fill-rule=nonzero stroke=none></path><path fill=#B5B5B5 d="M33.7 32v-1.8H33V30h1.6v.2h-.7V32zM34.9 32v-2h.4l.5 1.4c0 .1.1.2.1.3 0-.1.1-.2.1-.3l.5-1.4h.4v2h-.3v-1.7l-.7 1.7h-.2l-.6-1.7V32h-.2z" stroke=none></path></g></symbol> <symbol id=icon-logout viewBox="0 0 18 18"><path d="M13 8H3.436l2.33-2.295a1.001 1.001 0 00-1.407-1.427L.297 8.277a1 1 0 00-.009 1.414l4 4.062a.999.999 0 001.415.009.993.993 0 00.009-1.408L3.394 10H13a1 1 0 100-2zm-5 9a1 1 0 001 1h6.599C16.945 18 18 16.902 18 15.5v-13C18 1.098 16.945 0 15.599 0H9a1 1 0 000 2h6.599c.389 0 .401.449.401.5v13c0 .051-.012.5-.401.5H9a1 1 0 00-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-logo viewBox="0 0 34 34"><g fill-rule=evenodd><path fill=#D52027 d="M0 0h34v34H0z" stroke=none></path><path d="M3.035 14.038h2.151v6.97H3.035v-6.97zm3.299 0h2.065v.64s.358-.812 2.065-.812c2.18 0 2.581 1.434 2.581 3.299v3.843h-2.151v-3.413c0-.803-.014-1.836-1.119-1.836-1.119 0-1.291.875-1.291 1.778v3.471h-2.15v-6.97zm7.86-1.233c0-1.521.387-2.811 2.725-2.811.43 0 .861.028 1.262.129l-.101 1.821c-.244-.086-.445-.144-.703-.144-.688 0-1.033.215-1.033 1.133v1.104h1.592v1.721h-1.592v5.249h-2.151v-8.202h.001zm7.895 1.061c2.15 0 3.872 1.434 3.872 3.657 0 2.222-1.722 3.657-3.872 3.657-2.151 0-3.872-1.435-3.872-3.657 0-2.223 1.721-3.657 3.872-3.657zm0 5.421c1.075 0 1.721-.718 1.721-1.764 0-1.047-.646-1.764-1.721-1.764-1.076 0-1.721.717-1.721 1.764 0 1.046.645 1.764 1.721 1.764zM26.804 14.038h2.15v.609s.562-.88 2.754-.786v1.888a3.324 3.324 0 00-.918-.143c-1.635 0-1.836 1.176-1.836 2.567v2.835h-2.15v-6.97zM3.035 11.741l2.151-1.474v2.623H3.035v-1.149z" fill=#FFF fill-rule=nonzero stroke=none></path></g></symbol> <symbol id=icon-magic-wand viewBox="0 0 18 18"><path d="M9.703 3.12a1.004 1.004 0 010-1.414L11.118.292a1.003 1.003 0 011.414 0 1.003 1.003 0 010 1.414L11.118 3.12a1.004 1.004 0 01-1.415 0M.292 12.532a1.003 1.003 0 010-1.414l1.414-1.414a1.003 1.003 0 011.414 0 1.003 1.003 0 010 1.414l-1.414 1.414a1.003 1.003 0 01-1.414 0m16.821 4.581a1.003 1.003 0 01-1.414 0l-5.996-5.995a1.004 1.004 0 010-1.414 1.004 1.004 0 011.415 0l5.995 5.995a1.003 1.003 0 010 1.414M3.12 3.12a1.003 1.003 0 01-1.414 0L.292 1.706a1.003 1.003 0 010-1.414 1.003 1.003 0 011.414 0L3.12 1.706a1.003 1.003 0 010 1.414m7.292 2.285s-3 0-3-3c0-.55-.45-1-1-1s-1 .45-1 1c0 0 0 3-3 3-.55 0-1 .45-1 1s.45 1 1 1v.007s3 0 3 3h.001c.004.547.451.993.999.993.547 0 .995-.446.998-.993h.002s0-3 3-3v-.007c.55 0 1-.45 1-1s-.45-1-1-1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-mail viewBox="0 0 18 18"><path d="M9 10.582l9-6.6v-.179C18 2.698 17.105 2 16 2H2C.896 2 0 2.698 0 3.803v.179l9 6.6zm.573 2.04a.995.995 0 01-1.146 0L0 6.423V14a2 2 0 002 2h14a2 2 0 002-2V6.423l-8.427 6.199z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-map-pin viewBox="0 0 18 18"><path d="M9 0a7 7 0 00-7 7c0 4.028 4.543 9.061 6.31 10.728a.99.99 0 001.367-.003C11.434 16.057 16 11.026 16 7a7 7 0 00-7-7zm0 10a3 3 0 110-6 3 3 0 010 6z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-map viewBox="0 0 18 18"><path d="M15.368.805l-1.591.53-.001.001-.408.135-.01.006-.941.318.001.011-.102.016a1.001 1.001 0 01-.632 0L6.423.068a1.357 1.357 0 00-.846 0l-.441.148-1.768.589-.194.065-1.806.601A2.001 2.001 0 000 3.369v11.784a2 2 0 002.632 1.897l1.618-.539 1.488-.487.262-.042a1 1 0 01.316.051l5.261 1.754a1.357 1.357 0 00.846 0l.533-.178 1.676-.559 2-.667A2 2 0 0018 14.486V2.702A2 2 0 0015.368.805zm-3.371 15.013l-5.048-1.682A2.975 2.975 0 006 13.982V2.036l5.051 1.684c.307.102.626.153.949.153v11.28l.001.005-.004.66z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-marquee viewBox="0 0 18 18"><path d="M1 5a1 1 0 01-1-1V2C0 .897.897 0 2 0h2a1 1 0 110 2H2v2a1 1 0 01-1 1zm16 0a1 1 0 01-1-1V2h-2a1 1 0 010-2h2c1.103 0 2 .897 2 2v2a1 1 0 01-1 1zm-1 13h-2a1 1 0 110-2h2v-2a1 1 0 112 0v2c0 1.102-.897 2-2 2zM4 18H2c-1.103 0-2-.898-2-2v-2a1 1 0 112 0v2h2a1 1 0 110 2zm-3-7a1 1 0 01-1-1V8a1 1 0 112 0v2a1 1 0 01-1 1zm16 0a1 1 0 01-1-1V8a1 1 0 112 0v2a1 1 0 01-1 1zm-7-9H8a1 1 0 010-2h2a1 1 0 110 2zm0 16H8a1 1 0 110-2h2a1 1 0 110 2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-launch viewBox="0 0 18 18"><path d="M6.293 11.707a.999.999 0 001.414 0L14 5.414V9a1 1 0 102 0V3a1 1 0 00-1-1H9a1 1 0 100 2h3.586l-6.293 6.293a.999.999 0 000 1.414zM15.01 12a.995.995 0 00-.991 1v.599c0 .389-.445.401-.496.401H4.477c-.051 0-.495-.012-.495-.401V4.5c0-.275.221-.5.495-.5h.533C5.557 4 6 3.553 6 3c0-.553-.443-1-.99-1h-.533C3.111 2 2 3.121 2 4.5v9.099C2 14.945 3.088 16 4.477 16h9.046C14.912 16 16 14.945 16 13.599V13c0-.553-.443-1-.99-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-maximize viewBox="0 0 18 18"><path d="M7.707 10.293a.999.999 0 00-1.414 0L2 14.586V11a1 1 0 10-2 0v6a1 1 0 001 1h6a1 1 0 100-2H3.414l4.293-4.293a.999.999 0 000-1.414zM17 0h-6a1 1 0 100 2h3.586l-4.293 4.293a.999.999 0 101.414 1.414L16 3.414V7a1 1 0 102 0V1a1 1 0 00-1-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-mingle-share viewBox="0 0 18 18"><path d="M14.5 1h-11A2.507 2.507 0 001 3.5v7C1 11.875 2.125 13 3.5 13H13l4 4V3.5C17 2.125 15.875 1 14.5 1zM11 10H5c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1zm2-4H5c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-minimize viewBox="0 0 18 18"><path d="M.293 17.707a.999.999 0 001.414 0L6 13.414V17a1 1 0 102 0v-6a1 1 0 00-1-1H1a1 1 0 100 2h3.586L.293 16.293a.999.999 0 000 1.414zM11 8h6a1 1 0 100-2h-3.586l4.293-4.293A.999.999 0 1016.293.293L12 4.586V1a1 1 0 10-2 0v6a1 1 0 001 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-menu viewBox="0 0 18 18"><path d="M17.01 3H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h16.02a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99zm0 10H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h16.02a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99zm0-5H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h16.02a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-misc viewBox="0 0 18 18"><path d="M16 2.5v13c0 .275-.225.5-.5.5h-13a.501.501 0 01-.5-.5v-13c0-.277.22-.5.497-.5h13.002c.279 0 .501.235.501.513M15.5 0h-13A2.503 2.503 0 000 2.5v13C0 16.879 1.122 18 2.5 18h13c1.379 0 2.5-1.121 2.5-2.5v-13C18 1.122 16.879 0 15.5 0" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-mobile viewBox="0 0 18 18"><path d="M13.75 0h1.75A2.5 2.5 0 0118 2.5v13a2.5 2.5 0 01-2.5 2.5H10c.031-.031 0-2 0-2h2v-2h-2v-2h6V2.5a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5V5a1 1 0 01-2 0V3.001C4 1.621 5.119 0 6.5 0h7.25zM6 8a2 2 0 012 2v6a2 2 0 01-2 2H2a2 2 0 01-2-2v-6a2 2 0 012-2zm0 2H2v5h4v-5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-minus viewBox="0 0 18 18"><path d="M16 10a1 1 0 100-2H2a1 1 0 100 2h14z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-money viewBox="0 0 18 12"><path d="M10.889 9.943a1.888 1.888 0 11-.001-3.777 1.888 1.888 0 01.001 3.777M15.5 4.5H6.167C5.123 4.5 4.5 5.123 4.5 6.166v3.777c0 1.043.623 1.557 1.667 1.557h9.444c1.043 0 1.889-.514 1.889-1.557V6.166c0-1.043-.846-1.666-1.889-1.666M4.5 2.5h9.223c0-1-.846-2-1.89-2H2.389A1.888 1.888 0 00.5 2.389v3.777c0 1.043 1 1.889 2 1.889V4.278c0-1.039.739-1.778 1.777-1.778" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-more viewBox="0 0 18 18"><path d="M2 7a2 2 0 10.001 4.001A2 2 0 002 7zm7 0a2 2 0 10.001 4.001A2 2 0 009 7zm7 0a2 2 0 10.001 4.001A2 2 0 0016 7z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-new-alert viewBox="0 0 18 18"><g fill-rule=nonzero><path d="M9 0a9 9 0 10.001 18.001A9 9 0 009 0" fill=currentColor stroke=none></path><path d="M14.273 8.412l-2.729 1.894 1.057 3.192c.161.488-.393.895-.806.594l-2.793-2.036-2.794 2.009c-.414.298-.965-.113-.803-.599l1.055-3.161-2.733-1.894a.513.513 0 01.299-.938h3.405l1.072-3.3c.159-.485.839-.492.998-.007l1.072 3.307h3.402c.514 0 .722.644.298.939" fill=#FFF stroke=none></path></g></symbol> <symbol id=icon-move viewBox="0 0 19 19"><path d="M18.21 10.12l-2.95 2.96c-.2.189-.45.29-.71.29-.26 0-.51-.101-.71-.29-.39-.4-.39-1.03 0-1.42l1.17-1.16H10.5v4.58l1.29-1.29c.39-.39 1.03-.39 1.42 0 .39.39.39 1.03 0 1.42l-2.95 2.95c-.2.189-.46.29-.71.29-.26 0-.51-.101-.71-.29l-2.95-2.95c-.39-.39-.39-1.03 0-1.42.39-.39 1.03-.39 1.42 0l1.19 1.19V10.5H3.91l1.25 1.24c.39.39.39 1.029 0 1.42-.2.189-.45.29-.71.29-.26 0-.51-.101-.71-.29L.79 10.21C.4 9.82.4 9.18.79 8.79l2.95-2.95c.39-.39 1.03-.39 1.42 0 .39.39.39 1.03 0 1.42L3.91 8.5H8.5V3.92L7.27 5.16c-.4.39-1.03.39-1.42 0-.39-.39-.39-1.03 0-1.42L8.8.79a.996.996 0 011.41 0l2.96 2.95c.39.39.39 1.03 0 1.42-.2.19-.46.29-.71.29-.26 0-.51-.1-.71-.29L10.5 3.9v4.6h4.67l-1.33-1.33a.996.996 0 010-1.41c.391-.39 1.03-.39 1.42 0l2.95 2.95c.39.39.39 1.02 0 1.41z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-new-document viewBox="0 0 18 18"><path d="M8 9V7.99A.99.99 0 018.99 7h.02a.99.99 0 01.99.99V9h1.01a.99.99 0 01.99.99v.02a.99.99 0 01-.99.99H10v1.01a.99.99 0 01-.99.99h-.02a.99.99 0 01-.99-.99V11H6.99a.99.99 0 01-.99-.99v-.02A.99.99 0 016.99 9H8zm7.414-5.586L12.586.586A2.001 2.001 0 0011.171 0H4.5A2.503 2.503 0 002 2.5v13C2 16.879 3.122 18 4.5 18h9c1.378 0 2.5-1.121 2.5-2.5V4.828a2 2 0 00-.586-1.414zM14 15.5a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5v-13a.5.5 0 01.5-.5H10v3c0 .55.45 1 1 1h3v9.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-new-case viewBox="0 0 18 16"><path d="M12 11h-2v2a1 1 0 01-2 0v-2H6a1 1 0 010-2h2V7a1 1 0 012 0v2h2a1 1 0 010 2zM7 2.5c0-.271.229-.5.5-.5h3c.271 0 .5.229.5.5V4H7V2.5zM15.5 4H13V2.5C13 1.125 11.875 0 10.5 0h-3A2.507 2.507 0 005 2.5V4H2.5A2.5 2.5 0 000 6.5v7A2.5 2.5 0 002.5 16h13a2.5 2.5 0 002.5-2.5v-7A2.5 2.5 0 0015.5 4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-new-expense-report viewBox="0 0 18 19"><path d="M8 16h2v-5a1 1 0 011-1h3V2.5A2.5 2.5 0 0011.5 0h-9A2.5 2.5 0 000 2.5v11c0 1.208.86 2.217 2 2.45L8 16zm-4 0h2-2zm7-8.99a.99.99 0 01-.99.99H3.99A.99.99 0 013 7.01v-.02A.99.99 0 013.99 6h6.02a.99.99 0 01.99.99v.02zm0-4a.99.99 0 01-.99.99H3.99A.99.99 0 013 3.01v-.02A.99.99 0 013.99 2h6.02a.99.99 0 01.99.99v.02zm6 11.472h-1v-1a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2zM1 12c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zm4 1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1s1-.45 1-1v-3c0-.55-.45-1-1-1zm4 1c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-new-payment-request viewBox="0 0 18 16"><path d="M16 8H6a2 2 0 00-2 2v4a2 2 0 002 2h10a2 2 0 002-2v-4a2 2 0 00-2-2zm-2-6V1c0-.55.45-1 1-1s1 .45 1 1v1h1c.55 0 1 .45 1 1s-.45 1-1 1h-1v1c0 .55-.45 1-1 1s-1-.45-1-1V4h-1c-.55 0-1-.45-1-1s.45-1 1-1h1zm-3 12a2 2 0 11-.001-3.999A2 2 0 0111 14zM9 4H2a2 2 0 00-2 2v4a2 2 0 002 2V8c0-1.1.9-2 2-2h5a1 1 0 000-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-new-schedule viewBox="0 0 19 19"><path d="M9.5 6.498a1 1 0 00-1 1v2.587l-1.712 1.706c-.392.393-.36 1.021.028 1.413a.97.97 0 00.695.297c.257 0 .518-.101.715-.297l1.973-1.999c.187-.184.301-.441.301-.707V7.496a1 1 0 00-1-.998zm8.445-.051c.73-.738.73-1.94 0-2.691l-2.66-2.703a1.893 1.893 0 00-2.674 0l-1.556 1.563c.188.036-.832-.162-1.558-.162-.529 0-1.043.054-1.544.153L6.406 1.053a1.892 1.892 0 00-2.673 0L1.071 3.756a1.925 1.925 0 000 2.691l1.003 1.02a8.087 8.087 0 00-.602 3.06c0 3.912 2.772 7.254 6.592 7.943l.195.021a1.102 1.102 0 00.193-2.187c-2.777-.503-4.791-2.929-4.791-5.775 0-3.235 2.618-5.868 5.834-5.868a5.83 5.83 0 015.528 3.991c.189.576.81.887 1.387.691.572-.193.882-.818.689-1.396a3.391 3.391 0 00-.186-.454l1.032-1.046zM17.5 13.5h-2v-2a1 1 0 10-2 0v2h-2a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-new-solid viewBox="0 0 18 18"><path d="M9 0a9 9 0 110 18A9 9 0 019 0zm.501 4.166c-.159-.485-.839-.478-.998.007l-1.072 3.3H4.026a.513.513 0 00-.299.938l2.733 1.894-1.055 3.161c-.162.486.389.897.803.599l2.794-2.009 2.793 2.036c.413.301.967-.106.806-.594l-1.057-3.192 2.729-1.894a.513.513 0 00-.298-.939h-3.402z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-new-time-sheet viewBox="0 0 18 18"><path d="M17 2h-1V1a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0V4h1a1 1 0 000-2zm-7 5V0H2.5A2.507 2.507 0 000 2.5v13C0 16.875 1.125 18 2.5 18h9c1.375 0 2.5-1.125 2.5-2.5V8h-3a1 1 0 01-1-1zm-4 9c-2.206 0-4-1.795-4-4 0-2.206 1.794-4 4-4s4 1.794 4 4c0 2.205-1.794 4-4 4zm1-4.414V11a1 1 0 10-2 0v1a1 1 0 00.293.707l1 1a.997.997 0 001.414 0 .999.999 0 000-1.414L7 11.586z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-new-travel-plan viewBox="0 0 18 18"><path d="M0 6.5v7A2.5 2.5 0 002.5 16H3V4h-.5A2.5 2.5 0 000 6.5zM17 14h-1v-1a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2zm-4-4V2.5C13 1.125 11.875 0 10.5 0h-3A2.507 2.507 0 005 2.5V16h4a1 1 0 001-1v-2c0 .001 0-3 3-3zm-2-6H7V2.5c0-.271.229-.5.5-.5h3c.271 0 .5.229.5.5V4zm4.5 0H15v6h3V6.5A2.5 2.5 0 0015.5 4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-new viewBox="0 0 18 18"><path d="M9 0a9 9 0 110 18A9 9 0 019 0zm0 2a7 7 0 10.001 14.001A7 7 0 009 2zm.41 2.312l.877 2.865h2.783c.42 0 .59.558.244.813L11.08 9.631l.865 2.765c.132.423-.322.775-.66.515l-2.285-1.764-2.286 1.74c-.338.258-.79-.098-.657-.519l.864-2.738-2.236-1.64c-.346-.256-.176-.813.244-.813h2.786l.877-2.859a.422.422 0 01.817-.006z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-no-attachment viewBox="0 0 17 18"><path d="M15.707 16.106l-14-14A.999.999 0 10.293 3.52L3 6.227v7.803C3 16.256 4.7 18 6.932 18c2.143 0 3.948-1.721 4.049-3.792l3.312 3.312a.997.997 0 001.414 0 .999.999 0 000-1.414zM9 14.03C9 15.098 8.053 16 6.871 16 5.805 16 5 15.153 5 14.03V8.227l1 1V11a1 1 0 001 1 .985.985 0 00.962-.811L9 12.227v1.803zM5.734 3.32A3.376 3.376 0 018.446 2C10.373 2 12 3.596 12 5.485v4.101l2 2V5.485C14 2.512 11.457 0 8.356 0c-1.678 0-3.178.796-4.16 2.038a.982.982 0 01.511.255L5.734 3.32zM11 8.586v-2.17C11 5.084 9.841 4 8.387 4c-.568 0-1.071.189-1.473.5l1.5 1.5h.002c.275 0 .584.178.584.416v.17l2 2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-next-page viewBox="0 0 18 18"><path d="M5 3.731c0-.604.886-.947 1.361-.58l6.329 5.27c.377.291.427.867.049 1.16l-6.403 5.268c-.475.367-1.336.024-1.336-.58V3.731" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-no-filter viewBox="0 0 14 15"><path d="M4.946 11a1 1 0 100 2h2.78l-1.208-2H4.946zM4.1 7H2.946a1 1 0 100 2h2.363L4.1 7zM1.737 3H1a1 1 0 100 2h1.946L1.737 3zm11.209 0l-6.604.04L4.857.522A1.002 1.002 0 003.484.184a1.003 1.003 0 00-.339 1.373l7.832 12.961c.284.471.902.623 1.373.339.471-.285.623-.903.339-1.373L9.946 9h.998a1 1 0 100-2H8.737L7.55 5.04 12.946 5a1 1 0 100-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-notes viewBox="0 0 18 18"><path d="M13.5 2H12V.99a.99.99 0 00-.99-.99h-.02a.99.99 0 00-.99.99V2H6V.99A.99.99 0 005.01 0h-.02A.99.99 0 004 .99V2H2.5A2.502 2.502 0 000 4.5v11C0 16.878 1.121 18 2.5 18h11c1.378 0 2.5-1.122 2.5-2.5v-11C16 3.121 14.878 2 13.5 2zm.5 13.5c0 .275-.225.5-.5.5h-11a.501.501 0 01-.5-.5v-11c0-.275.225-.5.5-.5H4v1.01c0 .547.443.99.99.99h.02A.99.99 0 006 5.01V4h4v1.01c0 .547.443.99.99.99h.02a.99.99 0 00.99-.99V4h1.5c.275 0 .5.225.5.5v11zm-1-2.49a.99.99 0 01-.99.99H3.99a.99.99 0 01-.99-.99v-.02a.99.99 0 01.99-.99h8.02a.99.99 0 01.99.99v.02zm0-4a.99.99 0 01-.99.99H3.99A.99.99 0 013 9.01v-.02A.99.99 0 013.99 8h8.02a.99.99 0 01.99.99v.02z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-notification viewBox="0 0 18 18"><path d="M17.496 14.152l.017-.006S16.011 12.959 16.011 10c0-.131-.005-.232-.011-.321V9c0-3.51-2.621-6.429-6-6.919V1c0-.55-.45-1-1-1S8 .45 8 1v1.081C4.621 2.571 2 5.49 2 9v.514a3.01 3.01 0 00-.029.486c0 2.959-1.502 4.146-1.502 4.146l.028.01A.99.99 0 000 15c0 .55.45 1 1 1h5.184A2.99 2.99 0 009 18a2.99 2.99 0 002.816-2H17c.55 0 1-.45 1-1a.988.988 0 00-.504-.848" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-number-list viewBox="0 0 18 18"><path d="M18 3.99a.99.99 0 00-.99-.99H5.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h11.02a.99.99 0 00.99-.99v-.02m0 5a.99.99 0 00-.99-.99H5.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h11.02a.99.99 0 00.99-.99v-.02m0 5a.99.99 0 00-.99-.99H5.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h11.02a.99.99 0 00.99-.99v-.02M0 13h2v.5H1v1h1v.5H0v1h3v-4H0v1m1-7h1V2H0v1h1v3M0 8h1.8L0 10.1v.9h3v-1H1.2L3 7.9V7H0v1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-open-folder viewBox="0 0 14 14"><path d="M11.627 6.143c.942 0 1.628.857 1.285 1.714l-1.628 4.029C11.027 12.57 10.34 13 9.569 13H2.712c-.943 0-1.628-.857-1.285-1.714l1.628-4.029c.257-.686.943-1.114 1.714-1.114zM4.512 1c.429 0 .857.257 1.115.686l.257.514c.171.343.428.514.771.514h3.343c.686 0 1.286.6 1.286 1.286v.429H3.14a1.29 1.29 0 00-1.2.857c-.257.685-.429.857-.686.771-.171-.086-.257-.257-.257-.686V2.714A1.72 1.72 0 012.712 1z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-orderedlist viewBox="0 0 22 21"><path d="M7.266.354v4.549h14.687V.354H7.266zm-.001 11.722h14.688V7.527H7.265v4.549zm.001 7.173h14.687v-4.55H7.266v4.55zM2.127 5.062h.991V.14h-.807l-.038.196a.85.85 0 01-.189.353.902.902 0 01-.475.258 4.033 4.033 0 01-.639.062v.659h1.157v3.394zm.025 6.14c.09-.077.256-.202.499-.373l.387-.275c.327-.231.562-.44.704-.628.218-.283.327-.606.327-.971 0-.475-.154-.857-.463-1.146-.308-.289-.723-.433-1.243-.433-.659 0-1.118.246-1.376.737-.137.258-.213.596-.229 1.015h.94c.012-.276.048-.478.108-.604.106-.22.308-.329.601-.329.216 0 .381.069.497.207a.786.786 0 01.172.52c0 .256-.101.491-.302.706-.132.138-.42.367-.865.686-.515.367-.84.715-.978 1.043a2.297 2.297 0 00-.228.967h3.37v-.852H1.927c.061-.103.136-.193.225-.27zm1.17 5.482a.891.891 0 00.339-.255c.173-.199.258-.443.258-.733 0-.41-.144-.736-.432-.979-.288-.244-.668-.365-1.138-.365-.254 0-.468.029-.642.092a1.278 1.278 0 00-.451.265 1.584 1.584 0 00-.372.532 2.422 2.422 0 00-.126.696h.903c-.005-.242.046-.437.154-.581.106-.145.274-.217.503-.217.198 0 .353.059.461.176.11.119.165.271.165.459 0 .29-.107.482-.321.577-.124.057-.343.087-.656.092v.693c.32 0 .555.03.704.091.262.109.392.325.392.647 0 .245-.069.432-.212.563a.711.711 0 01-.495.195c-.31 0-.523-.119-.641-.357a1.128 1.128 0 01-.095-.488H.67c.017.391.095.709.237.95.271.454.756.682 1.451.682.565 0 .992-.158 1.28-.474.288-.314.433-.681.433-1.098 0-.396-.123-.708-.37-.937-.164-.15-.291-.226-.379-.226z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-overlay-line viewBox="0 0 18 19"><path d="M1 1a1 1 0 011 1v5.339l5.247-5.997a1.001 1.001 0 011.417-.089l5.32 4.729 2.257-2.633a.999.999 0 011.409-.108c.42.36.469.991.109 1.409l-2.28 2.66 2.185 1.943a.999.999 0 11-1.328 1.494l-2.159-1.919-2.418 2.822a.997.997 0 01-1.314.182l-2.267-1.511-5.547 6.401c.245.175.545.278.869.278H17a1 1 0 110 2H3.5C1.57 19 0 17.43 0 15.5V2a1 1 0 011-1zm7.089 2.417L2 10.376v4.02l5.244-6.051a1 1 0 011.31-.177l2.263 1.509L12.683 7.5 8.089 3.417z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-parameter viewBox="0 0 18 17"><path d="M6 14a3 3 0 10-6 0 3 3 0 006 0zm12 0a3 3 0 10-6 0 3 3 0 006 0zM12 3a3 3 0 10-6 0 3 3 0 006 0z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-paste viewBox="0 0 18 18"><path d="M16.414 9.747l-2.161-2.161A2.003 2.003 0 0012.838 7H10.5A2.502 2.502 0 008 9.5v6c0 1.379 1.121 2.5 2.5 2.5h4c1.379 0 2.5-1.121 2.5-2.5v-4.338c0-.531-.211-1.039-.586-1.415zM15 15.5a.5.5 0 01-.5.5h-4a.5.5 0 01-.5-.5v-6a.5.5 0 01.5-.5H12v2c0 .55.45 1 1 1h2v3.5zM12.875 2.038V2h-.567L11.462.922C11.1.319 10.449 0 9.746 0h-3.34C5.703 0 5.051.319 4.69.922L3.843 2h-.718v.038A2.494 2.494 0 001 4.5v9A2.5 2.5 0 003.5 16H6a1 1 0 000-2H3.5a.5.5 0 01-.5-.5v-9a.5.5 0 01.5-.5h9a.5.5 0 01.5.5V5a1 1 0 002 0v-.5c0-1.252-.924-2.28-2.125-2.462z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-paused-schedule viewBox="0 0 19 19"><path d="M9.5 6.498c-.552 0-1 .449-1 1.001v2.585l-1.708 1.707c-.393.392-.358 1.022.03 1.413.195.196.44.297.696.297.258 0 .518-.1.716-.297l1.969-1.999a.998.998 0 00.297-.707V7.496a1 1 0 00-1-.998zm8.453-.051a1.929 1.929 0 000-2.691l-2.661-2.703a1.893 1.893 0 00-2.674 0l-1.556 1.563c.187.036-.833-.162-1.56-.162-.529 0-1.043.054-1.543.153L6.412 1.053a1.892 1.892 0 00-2.673 0L1.077 3.756a1.925 1.925 0 000 2.691l1.003 1.02a8.087 8.087 0 00-.601 3.06c0 3.912 2.771 7.254 6.592 7.944l.196.021a1.103 1.103 0 00.191-2.188c-2.777-.503-4.79-2.929-4.79-5.776 0-3.235 2.618-5.868 5.834-5.868a5.832 5.832 0 015.53 3.991c.188.576.809.887 1.384.691.573-.193.884-.819.69-1.396a3.882 3.882 0 00-.185-.454l1.032-1.045zM13.5 17.938a.562.562 0 01-.562.562h-.876a.562.562 0 01-.562-.562v-5.875c0-.311.252-.563.562-.563h.875c.311 0 .562.252.562.562v5.876h.001zm3 0a.562.562 0 01-.562.562h-.875a.562.562 0 01-.562-.562v-5.875c0-.311.252-.562.562-.562h.875c.311 0 .562.252.562.562v5.875z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-payment-request viewBox="0 0 18 12"><path d="M4 2h10a2 2 0 00-2-2H2a2 2 0 00-2 2v4a2 2 0 002 2V4c0-1.1.9-2 2-2zm12 2H6a2 2 0 00-2 2v4a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2zm-5 6a2 2 0 110-4 2 2 0 010 4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-pdf-file viewBox="0 0 13 18"><path d="M12.414 3.414L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v13A2.5 2.5 0 002.5 18h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414zM2 2.5a.5.5 0 01.5-.5H7v3c0 .55.45 1 1 1h3v3H2V2.5zM4 12v2H2v2H1v-5h3v1zm4 3a1 1 0 01-1 1H5v-5h2a1 1 0 011 1v3zm4-3h-2v1h1v1h-1v2H9v-5h3v1zm-6 0h1v3H6v-3zm-4 0h1v1H2v-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-pending-alert viewBox="0 0 18 18"><g fill-rule=nonzero><path d="M9 0C4.037 0 0 4.037 0 9s4.037 9 9 9 9-4.037 9-9-4.037-9-9-9z" fill=currentColor stroke=none></path><path d="M10 4a1 1 0 10-2 0v5c0 .266.105.519.293.707l3 3a.997.997 0 001.414 0 .999.999 0 000-1.414L10 8.586V4z" fill=#FFF stroke=none></path></g></symbol> <symbol id=icon-pending-solid viewBox="0 0 18 18"><path d="M9 0c4.963 0 9 4.037 9 9s-4.037 9-9 9-9-4.037-9-9 4.037-9 9-9zm0 3a1 1 0 00-1 1v5c0 .266.105.519.293.707l3 3a.997.997 0 001.414 0 .999.999 0 000-1.414L10 8.586V4a1 1 0 00-1-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-pending viewBox="0 0 18 18"><path d="M9 0C4.037 0 0 4.037 0 9s4.037 9 9 9 9-4.037 9-9-4.037-9-9-9zm0 16c-3.859 0-7-3.141-7-7s3.141-7 7-7 7 3.141 7 7-3.141 7-7 7zm1-7.414V6a1 1 0 10-2 0v3c0 .266.105.519.293.707l2 2a.997.997 0 001.414 0 .999.999 0 000-1.414L10 8.586z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-phone-linear viewBox="0 0 18 18"><path d="M2.884.438a1.503 1.503 0 012.121 0l2.216 2.216a1.503 1.503 0 010 2.121l-2.21 2.211L5 7C3.977 8.024 5 9 5 9l4 4c1.008 1.008 2.001 0 2.001 0l2.222-2.222a1.503 1.503 0 012.121 0l2.217 2.216a1.505 1.505 0 010 2.121l-2.446 2.446a1.487 1.487 0 01-1.105.429l-.009.01C.56 18 .022 5.098.001 4.065L0 4l.004-.035.012-.103.045-.228c.057-.274.165-.539.377-.751zm.13 2.125L1.92 3.693c-.141.142-.379.432-.442.649-.063.216.008 1.056.177 1.864.145.694.102.768.916 2.794.435 1.084 1.47 3.01 2.498 3.983 1.682 1.594 3.035 2.484 4.527 2.96 2.185.7 3.092.76 3.641.76.567 0 1.095-.368 1.297-.57l1.63-1.63c.39-.389.551-.516.162-.906l-1.478-1.477c-.388-.39-.713-.15-1.202.327-.488.477-1 .904-1.495 1.458-.496.553-1.24 1.065-1.976 1.065-.735 0-1.509-.147-2.233-.926-.561-.604-1.136-1.087-2.151-2.158-1.12-1.183-1.99-1.883-2.38-2.599-.31-.565-.395-.88-.398-1.31-.006-.96.402-1.527 1.085-2.212.454-.457.778-.777.97-.959.39-.389 1.112-.821.723-1.21L4.179 2.003c-.39-.39-.777.17-1.166.56z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-phone viewBox="0 0 18 18"><path d="M17.561 12.994l-2.217-2.216a1.503 1.503 0 00-2.121 0L11.001 13S10.008 14.008 9 13L5 9s-1.023-.976 0-2l.011-.014 2.21-2.211a1.503 1.503 0 000-2.121L5.005.438a1.503 1.503 0 00-2.121 0L.438 2.883c-.212.212-.32.477-.377.751l-.045.228-.012.103L0 4s0 14 14.001 14l.009-.01c.399.012.802-.126 1.105-.429l2.446-2.446a1.505 1.505 0 000-2.121" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-pause viewBox="0 0 19 19"><path d="M2.5 18.5a2 2 0 01-2-2v-14a2 2 0 012-2h4a2 2 0 012 2v14a2 2 0 01-2 2m6 0a2 2 0 01-2-2v-14a2 2 0 012-2h4a2 2 0 012 2v14a2 2 0 01-2 2" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-play viewBox="0 0 18 18"><path d="M3 10.995v-4-4.532c0-1.21 1.922-1.894 2.949-1.16l9.38 6.536c.819.586.927 1.736.108 2.32l-9.54 6.538c-1.031.734-2.897.05-2.897-1.16v-4.542z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-pie-chart viewBox="0 0 17 16"><path d="M6.01 8.99H1.309c-.653 0-1.155.623-.971 1.25a8.002 8.002 0 005.422 5.422c.627.184 1.25-.318 1.25-.971V9.99a1 1 0 00-1-1zm9.969-1.607a8.624 8.624 0 00-.078-.649l-.052-.346-.031-.123A8.003 8.003 0 009.735.182l-.123-.03-.346-.053a8.624 8.624 0 00-.649-.078l-.33-.016a7.79 7.79 0 00-.649.004l-.306.016a7.758 7.758 0 00-.783.105l-.125.019c-.3.06-.592.139-.878.232l-.217.08a7.953 7.953 0 00-.627.251l-.246.119a7.82 7.82 0 00-.582.321l-.195.118c-.51.33-.983.714-1.404 1.149l-.043.047a8.228 8.228 0 00-.551.643l-.083.111a7.841 7.841 0 00-.457.685l-.048.078A7.976 7.976 0 00.34 5.732c-.185.63.315 1.258.972 1.258H8.01a1 1 0 011 1v6.699c0 .656.628 1.156 1.258.971a7.976 7.976 0 001.749-.753l.078-.047c.237-.141.465-.294.685-.458l.111-.083c.224-.173.439-.356.643-.551l.047-.043a7.998 7.998 0 001.149-1.404l.119-.195a8.19 8.19 0 00.32-.582l.119-.246c.093-.204.176-.413.251-.627l.08-.217c.093-.286.172-.578.232-.878l.019-.124c.048-.258.083-.519.105-.784l.016-.306c.01-.214.012-.431.005-.649l-.017-.33z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-plusminus-folder-closed viewBox="0 0 18 18"><path d="M16 8h-6V2a1 1 0 00-2 0v6H2a1 1 0 000 2h6v6a1 1 0 002 0v-6h6a1 1 0 000-2" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-plusminus-folder-open viewBox="0 0 18 18"><path d="M16 10a1 1 0 100-2H2a1 1 0 100 2h14z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-previous-page viewBox="0 0 18 18"><path d="M13 14.27c0 .603-.887.946-1.361.58l-6.33-5.27c-.377-.292-.427-.868-.05-1.16l6.404-5.269c.476-.367 1.337-.024 1.337.58V14.27" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-print viewBox="0 0 18 18"><path d="M14 1a1 1 0 00-1-1H5a1 1 0 00-1 1v3h10V1zm2 5H2C.897 6 0 6.897 0 8v5c0 1.103.897 2 2 2h1v-3.5A1.5 1.5 0 014.5 10h9a1.5 1.5 0 011.5 1.5V15h1c1.102 0 2-.897 2-2V8c0-1.103-.898-2-2-2zm-4 6H6a1 1 0 00-1 1v4a1 1 0 001 1h6a1 1 0 001-1v-4a1 1 0 00-1-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-process viewBox="0 0 18 16"><path d="M17 12.277V10.5C17 8.57 15.43 7 13.5 7H10V3.723A1.994 1.994 0 009 0a1.994 1.994 0 00-1 3.723V7H4.5C1.932 7 1 9.093 1 10.5v1.777A1.994 1.994 0 002 16a1.994 1.994 0 001-3.723V10.5c0-.25.072-1.5 1.5-1.5H8v3.277A1.994 1.994 0 009 16a1.994 1.994 0 001-3.723V9h3.5c.827 0 1.5.673 1.5 1.5v1.777A1.994 1.994 0 0016 16a1.994 1.994 0 001-3.723" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-profile viewBox="0 0 17 17"><path d="M8.5.5c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 4.05c1.23 0 2.22.99 2.22 2.22 0 1.23-.99 2.22-2.22 2.22-1.23 0-2.22-.99-2.22-2.22 0-1.23.99-2.22 2.22-2.22zm0 10.17a6.18 6.18 0 01-4.26-1.7c.52-1.87 2.22-3.26 4.26-3.26 2.04 0 3.74 1.391 4.26 3.26a6.185 6.185 0 01-4.26 1.7z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-project viewBox="0 0 18 18"><path d="M9 0a1 1 0 011 1v1h7a1 1 0 110 2h-1v9c0 1.103-.897 2-2 2h-2.001l1.601 1.2a1 1 0 11-1.2 1.6L9 15.25 5.6 17.8a.997.997 0 01-1.4-.2 1 1 0 01.2-1.4L6.001 15H4c-1.103 0-2-.897-2-2V4H1a1 1 0 110-2h7V1a1 1 0 011-1zm5 4H4v9h10V4zM7 6c-.55 0-1 .45-1 1s.45 1 1 1h2c.55 0 1-.45 1-1s-.45-1-1-1H7zm-1 4c0 .55.45 1 1 1h4c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-purchasing viewBox="0 0 18 12"><path d="M18 4v6a2 2 0 01-2 2H2a2 2 0 01-2-2V4h18zM3.5 7a1.5 1.5 0 10.001 3.001A1.5 1.5 0 003.5 7zM16 0a2 2 0 012 2H0a2 2 0 012-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-no-comment viewBox="0 0 17 17"><path d="M16.294 1.706a1.003 1.003 0 000-1.414 1.003 1.003 0 00-1.414 0L14.172 1H3.5A2.507 2.507 0 001 3.5v7c0 .989.587 1.842 1.425 2.246L1.172 14a1.003 1.003 0 000 1.414 1.003 1.003 0 001.414 0l13.68-13.68.028-.028zM7.828 13H13l4 4V3.828L7.828 13z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-quality viewBox="0 0 18 18"><path d="M7.063 9a.999.999 0 01-.703-.288L4.298 6.711a1 1 0 111.405-1.422l1.353 1.299L13.291.295a1.001 1.001 0 011.419 1.41l-6.937 7a1.002 1.002 0 01-.71.295m10.644 7.293l-5.108-5.109-.001.001A6.956 6.956 0 0014 7a1 1 0 10-2 0c0 2.757-2.243 5-5 5S2 9.757 2 7a5.006 5.006 0 016.665-4.716A1 1 0 109.331.398 6.984 6.984 0 007 0C3.141 0 0 3.14 0 7s3.141 7 7 7c1.57 0 3.016-.526 4.185-1.402l5.108 5.109a.997.997 0 001.414 0 .999.999 0 000-1.414" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-queries viewBox="0 0 18 18"><path d="M5 6c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2 4H5c-.55 0-1-.45-1-1s.45-1 1-1h2c.55 0 1 .45 1 1s-.45 1-1 1zm2 4H5c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1zM5 0H2.5A2.507 2.507 0 000 2.5v13C0 16.875 1.125 18 2.5 18h9c1.375 0 2.5-1.125 2.5-2.5V11a1 1 0 10-2 0v4.5c0 .275-.225.5-.5.5h-9a.501.501 0 01-.5-.5v-13c0-.275.225-.5.5-.5H5a1 1 0 000-2zm12.543 8.128l-2.109-2.109C15.784 5.424 16 4.739 16 4c0-2.206-1.794-4-4-4S8 1.794 8 4s1.794 4 4 4c.739 0 1.424-.216 2.019-.566l2.109 2.109a.99.99 0 001.4 0l.015-.015a.99.99 0 000-1.4zM12 6c-1.102 0-2-.897-2-2 0-1.102.898-2 2-2 1.102 0 2 .898 2 2 0 1.103-.898 2-2 2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-quick-edit viewBox="0 0 18 18"><path d="M15 16H9.78l-2 2H15c.55 0 1-.45 1-1s-.45-1-1-1zm2-4h-3.22l-2 2H17c.55 0 1-.45 1-1s-.45-1-1-1zM14.09.003c-.64 0-1.28.242-1.77.727l-1.14 1.14L.65 12.41c-.37.37-.65 1.05-.65 1.57V17c0 .55.45 1 1 1h3.03c.53 0 1.19-.28 1.56-.65L16.45 6.5l.82-.82c.97-.98.97-2.56 0-3.54L15.86.73a2.508 2.508 0 00-1.77-.727zM2 16v-1.98l.06-.2 9.21-9.21 2.25 1.98-9.31 9.32-.18.09H2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-quick-reference viewBox="0 0 16 18"><path d="M14 0H3C1.346 0 0 1.346 0 3v12c0 1.654 1.346 3 3 3h12a1 1 0 001-1V2c0-1.103-.897-2-2-2zM5 4c0-.55.45-1 1-1h5c.55 0 1 .45 1 1v2c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1V4zm9 12H3a1 1 0 010-2h11v2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-quote viewBox="0 0 18 18"><path d="M12.5 8c-.171 0-.338.018-.5.05v-.046C12.008 7.546 12.188 7 13 7a1 1 0 100-2c-1.088 0-1.758.445-2.129.818C10.015 6.682 9.999 7.875 10 8v4a1 1 0 001 1 .98.98 0 00.553-.188A2.5 2.5 0 1012.5 8m-7 0c-.171 0-.338.018-.5.05v-.046C5.008 7.546 5.188 7 6 7a1 1 0 100-2c-1.088 0-1.758.445-2.129.818C3.015 6.682 2.999 7.875 3 8v4a1 1 0 001 1 .98.98 0 00.553-.188A2.5 2.5 0 105.5 8" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-record viewBox="0 0 18 18"><path d="M9 1c4.412 0 8 3.588 8 8s-3.588 8-8 8-8-3.588-8-8 3.588-8 8-8zm0 2C5.692 3 3 5.692 3 9s2.692 6 6 6 6-2.692 6-6-2.692-6-6-6zm0 2a4 4 0 110 8 4 4 0 010-8z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-recycle viewBox="0 0 17 17"><path d="M3.37 11.62c-.57.97-1.03 1.88.13 1.88h1.01a.987.987 0 01.99 1c0 .1-.01.21-.04.3-.13.41-.5.7-.95.7H4c-2.76 0-3.92-1.85-2.58-4.26l1.24-2.21-.27-.15-.34-.18c-.41-.22-.37-.7-.13-.94l3.25-2.13c.33-.15.67.03.73.52l.09 3.78c-.11.4-.45.631-.86.41l-.78-.41-.98 1.69zm9.525-6.585L11.311 2.28C9.93-.12 7.73-.07 6.4 2.35l-.445.79c-.246.437-.051 1.003.435 1.265s1.065.18 1.292-.185l.412-.659c.57-.97.932-1.051 1.522-.081l1.53 2.487-.24.129-.338.18c-.409.219-.369.705-.133.941l3.248 2.131c.336.15.672-.03.73-.522l.087-3.783c-.104-.397-.446-.63-.856-.411l-.749.403zm3.308 6.133l-.112-.198-.137-.244a.987.987 0 00-1.075-.485.985.985 0 00-.286.104 1.003 1.003 0 00-.384 1.36l.137.243.002.002.355.636c.566 1.013-.452 1.058-1.577 1.033l-1.953-.028-.022-.882c-.01-.465-.375-.649-.778-.55L7.12 14.085c-.398.293-.389.678-.098.893l3.447 1.793c.327.094.767-.107.757-.572l-.01-.387-.003-.312h2.535c2.758 0 3.805-1.924 2.455-4.332z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-refresh viewBox="0 0 18 18"><path d="M16.099 6.507l-2.806-4.116c-.241-.55-.866-.5-1.156.03l-.667 1.222A6.996 6.996 0 008 2.717v-.004c-.652 0-1.28.096-1.878.264l-.134.034-.419.146-.242.09-.302.14-.332.16-.195.114-.401.243-.091.068a6.975 6.975 0 00-.956.792c-.3.3-.561.623-.795.96l-.064.087-.246.404-.113.191-.162.337-.137.296-.093.252-.142.408-.038.15a6.482 6.482 0 00-.128.525l-.002.012c-.083.43-.13.873-.13 1.327 0 .448.046.885.127 1.31l.005.031.124.51.043.166.136.39.099.27.126.272.175.363.093.157.267.438.024.034c.242.355.516.695.831 1.01.313.313.651.585 1.004.826l.038.028.437.265.16.095.36.174.274.127.268.097.393.138.161.041.515.126.023.003c.427.082.866.13 1.317.13a6.96 6.96 0 001.299-.127l.043-.007.492-.119.185-.048.366-.128.297-.108.24-.11.394-.192.116-.068a7.012 7.012 0 001.518-1.144l-.003-.003A6.979 6.979 0 0015 9.713h-2.001c.001 1.566-.738 2.95-1.87 3.867l-.347.283c-.155.105-.327.182-.494.27l-.373.195c-.161.067-.335.107-.505.156l-.435.13a5.03 5.03 0 01-.751.076l-.464-.002a5.098 5.098 0 01-.736-.075l-.438-.13c-.169-.049-.341-.088-.502-.155l-.389-.205c-.16-.084-.326-.158-.476-.259-.154-.103-.294-.235-.438-.357a5.118 5.118 0 01-.549-.543c-.133-.155-.275-.307-.386-.474-.089-.132-.153-.279-.228-.419-.08-.15-.172-.293-.236-.449l-.127-.407c-.055-.178-.122-.353-.158-.535l-.043-.432a5.036 5.036 0 010-1.07l.043-.432c.036-.182.103-.357.158-.535l.127-.407c.064-.155.156-.3.236-.449l.228-.419c.115-.173.26-.33.4-.49.151-.174.313-.335.486-.487.161-.139.317-.284.49-.399.131-.089.278-.153.418-.228.15-.08.295-.173.45-.236l.405-.126c.179-.057.355-.123.538-.159l.427-.043a4.972 4.972 0 013.045.64l-.542.994c-.29.532.007 1.084.6.99l4.849.061c.574-.039.879-.508.687-.946" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-reject viewBox="0 0 15 15"><path d="M12.5 0h-10A2.502 2.502 0 000 2.5v10.099C0 13.945 1.098 15 2.5 15h10c1.402 0 2.5-1.055 2.5-2.401V2.5C15 1.121 13.879 0 12.5 0zm.5 12.599c0 .389-.449.401-.5.401h-10c-.051 0-.5-.012-.5-.401V2.5a.5.5 0 01.5-.5h10a.5.5 0 01.5.5v10.099zm-2.293-8.306a1 1 0 00-1.414 0L7.5 6.086 5.707 4.293a1 1 0 00-1.414 1.414L6.086 7.5 4.293 9.293a.999.999 0 101.414 1.414L7.5 8.914l1.793 1.793a.997.997 0 001.414 0 .999.999 0 000-1.414L8.914 7.5l1.793-1.793a.999.999 0 000-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-refresh-current viewBox="0 0 16 18"><path d="M1.462 9.467a5.006 5.006 0 017.071 0c.343-.343.862-1 1.414-1a1 1 0 011 1v2.828a1 1 0 01-1 1H7.119a.997.997 0 01-1-1c0-.552.646-1.06 1-1.414a3.003 3.003 0 00-4.243 0 3.003 3.003 0 000 4.243 3.003 3.003 0 004.243 0 .999.999 0 111.414 1.414 5.006 5.006 0 01-7.071 0 5.006 5.006 0 010-7.071zM12.978 18h.522a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414L12.586.586A2 2 0 0011.172 0H4.5A2.5 2.5 0 002 2.5V5a1 1 0 102 0V2.5a.5.5 0 01.5-.5H10v3c0 .55.45 1 1 1h3v9.5a.5.5 0 01-.5.5h-.521a.986.986 0 00-.987.98v.03c-.003.546.44.99.986.99z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-rename viewBox="0 0 19 19"><path d="M17.501 8.5c-.547 0-1.001.447-1.001 1v6.6c0 .389-.426.4-.477.4H2.977c-.051 0-.477-.012-.477-.4V3c0-.275.203-.5.477-.5H9.51c.547 0 .99-.447.99-1 0-.553-.443-1-.99-1H2.977C1.611.5.5 1.621.5 3v13.1c0 1.346 1.088 2.4 2.477 2.4h13.046c1.389 0 2.477-1.055 2.477-2.4V9.5c0-.553-.452-1-.999-1zm.439-6.39l-1.09-1.06C16.47.68 15.98.5 15.49.5c-.49 0-.99.18-1.37.55L5 10.29c-.28.28-.5.79-.5 1.18v2.28c0 .41.35.75.77.75h2.34c.41 0 .91-.21 1.2-.49l9.13-9.24c.75-.73.75-1.92 0-2.66zM7.71 12.98l-.14.06H6v-1.49l.05-.15 7.271-7.43 1.609 1.61-7.22 7.4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-reply-all viewBox="0 0 20 16"><path d="M7.927 13.13a.757.757 0 01-.559.262.737.737 0 01-.452-.166L.839 8.254a1.8 1.8 0 01-.666-1.428c0-.559.237-1.082.678-1.439L6.916.416a.713.713 0 01.999.095c.202.262.214.619.024.868l-.012.024-5.554 4.544a1.149 1.149 0 00-.012 1.76l5.614 4.579a.717.717 0 01-.048.844zm11.121 2.615c.434 0 .794-.322.778-.702-.296-6.402-3.406-10.073-8.1-11.055V1.851c0-.918-.95-1.44-1.635-.882L4.023 5.942c-.546.445-.557 1.318-.012 1.763l6.085 4.971c.685.561 1.629.037 1.629-.881V9.912c3.688.491 5.823 2.104 6.569 5.272.075.322.382.561.754.561" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-reply viewBox="0 0 20 19"><path d="M18.834 18.086c.523 0 .957-.388.938-.846-.354-7.71-4.101-12.13-9.754-13.313V1.354c0-1.106-1.145-1.735-1.97-1.062L.741 6.28C.083 6.816.07 7.867.727 8.403l7.328 5.988c.826.674 1.963.045 1.963-1.062v-2.268c4.441.592 7.013 2.535 7.91 6.352.092.384.459.673.906.673" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-redo viewBox="0 0 18 18"><path d="M17.001 14H7c-2.757 0-5-2.243-5-5s2.243-5 5-5h5v1.269c0 .604.554.947 1.055.58l4.521-2.269c.511-.31.556-.868.157-1.16L13.055.151C12.554-.216 12 .127 12 .731V2H7C3.14 2 0 5.141 0 9s3.14 7 7 7h10.001a.999.999 0 100-2" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-report viewBox="0 0 18 18"><path d="M15.5 0h-11C3.293 0 2.283.86 2.051 2H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99H2v2H.99a.99.99 0 00-.99.99v.02c0 .546.443.99.99.99H2v2H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99H2v2H.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h1.061c.232 1.14 1.242 2 2.449 2h11c1.379 0 2.5-1.122 2.5-2.5v-13C18 1.121 16.879 0 15.5 0zM9 13.907c0 .378-.405.64-.739.462a3.987 3.987 0 01-1.63-1.63c-.178-.334.083-.739.462-.739h1.396c.282 0 .511.229.511.511v1.396zm4.926-2.173l-.027.135a3.988 3.988 0 01-.194.626l-.069.153a4.022 4.022 0 01-.282.521l-.137.188-.266.323-.31.303-.244.201a4.01 4.01 0 01-.692.419c-.327.155-.705-.099-.705-.461V10H6.858c-.362 0-.616-.378-.461-.705.115-.246.258-.477.419-.692l.201-.245.303-.309.322-.266.189-.137c.166-.107.34-.2.521-.283l.153-.068c.201-.081.41-.146.626-.194l.135-.027c.229-.043.462-.069.702-.071l.098.004c.247.004.49.026.725.073l.02.003a4.004 4.004 0 013.106 3.106l.003.02c.047.235.069.478.073.726l.004.097c-.002.24-.028.473-.071.702zM14 3.01a.99.99 0 01-.99.99H6.99A.99.99 0 016 3.01v-.02A.99.99 0 016.99 2h6.02a.99.99 0 01.99.99v.02z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-reset viewBox="0 0 18 18"><path d="M3.098 8H1.762c-.604 0-.856.583-.73 1l2.42 4.435c.291.379.788.378 1.16-.149L7.031 9c.124-.52-.127-1-.732-1H5.118c.44-2.436 2.475-4 4.913-4 2.757 0 5 2.243 5 5s-2 5-5 5v2c4 0 7-3.14 7-7s-3.14-7-7-7c-3.53 0-6.459 2.51-6.933 6z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-restore-user viewBox="0 0 17 16"><path d="M8 2.5a2.5 2.5 0 10-5 0 2.5 2.5 0 005 0zm7.485 4.962a5.006 5.006 0 00-7.071 0c-.342-.342-.862-1-1.414-1a1 1 0 00-1 1v2.829a1 1 0 001 .999h2.828a.997.997 0 001-.999c0-.553-.646-1.061-1-1.415a3.005 3.005 0 014.243 0 3.003 3.003 0 010 4.243 3.003 3.003 0 01-4.243 0 .999.999 0 10-1.414 1.414 5.005 5.005 0 007.071 0 5.005 5.005 0 000-7.071zM4 10.291V6.51c-2.295.618-4 2.668-4 5.158C0 11.668 0 13 1.542 13h4.174A3.003 3.003 0 014 10.291z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-right-align-text viewBox="0 0 18 18"><path d="M1 5h16c.55 0 1-.45 1-1s-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1m6 5h10c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1m-6 5h16c.55 0 1-.45 1-1s-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-right-align viewBox="0 0 18 18"><path d="M6 4.5C6 5.879 7.121 7 8.5 7h4C13.879 7 15 5.879 15 4.5S13.879 2 12.5 2h-4A2.502 2.502 0 006 4.5zM16 2v15.01c0 .547.443.99.99.99h.02a.99.99 0 00.99-.99V2h-2zm0-1.01V2h2V.99a.99.99 0 00-.99-.99h-.02a.99.99 0 00-.99.99zM12.5 11c.275 0 .5.225.5.5v2c0 .275-.225.5-.5.5h-10a.501.501 0 01-.5-.5v-2c0-.275.225-.5.5-.5h10zm0-2h-10A2.502 2.502 0 000 11.5v2C0 14.878 1.121 16 2.5 16h10c1.378 0 2.5-1.122 2.5-2.5v-2c0-1.379-1.122-2.5-2.5-2.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-right-arrow viewBox="0 0 18 18"><path d="M1 10h13.564l-5.33 5.32a1.02 1.02 0 00-.008 1.43 1.001 1.001 0 001.415.016l7.062-6.996a.997.997 0 00.009-1.412l-7-7.061a.999.999 0 00-1.415-.008.962.962 0 00-.009 1.382L14.606 8H1a1 1 0 100 2" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-right-text-align viewBox="0 0 18 18"><path d="M1 5h16c.55 0 1-.45 1-1s-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1m6 5h10c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1m-6 5h16c.55 0 1-.45 1-1s-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-rocket viewBox="0 0 12 16"><path d="M7 14c.55 0 1 .45 1 1s-.45 1-1 1H5c-.55 0-1-.45-1-1s.45-1 1-1h2zm4-6c.55 0 1 .45 1 1v2c0 .55-.45 1-1 1s-1-.45-1-1V8zM2 8v3c0 .55-.45 1-1 1s-1-.45-1-1V9c0-.55.45-1 1-1h1zm4-8C4.35 0 3 1.35 3 3v9h6V3c0-1.65-1.35-3-3-3zm1 6c0 .55-.45 1-1 1s-1-.45-1-1V4c0-.55.45-1 1-1s1 .45 1 1v2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-roles viewBox="0 0 18 18"><path d="M15.5 5H13V3.5C13 2.125 11.875 1 10.5 1h-3A2.507 2.507 0 005 3.5V5H2.5A2.5 2.5 0 000 7.5v7A2.5 2.5 0 002.5 17h13a2.5 2.5 0 002.5-2.5v-7A2.5 2.5 0 0015.5 5zM7 3.5c0-.271.229-.5.5-.5h3c.271 0 .5.229.5.5V5H7V3.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-run-job viewBox="0 0 18 11"><path d="M15.901 0H7.198C6.69 0 6.16.32 6.045.78L5.528 3H3c-.55 0-1 .45-1 1s.45 1 1 1h2.061l-.467 2H1c-.55 0-1 .45-1 1s.45 1 1 1h3.128c-.188 1.14.25 2 2 2h8.532c1.1 0 1.74-.48 2-2l1.241-7c.099-1.08-.401-2-2-2zm-4.434 8.837a.752.752 0 01-.876.599l-.49-.092a.752.752 0 01-.599-.876l.092-.49a.751.751 0 01.876-.599l.49.092c.406.076.676.47.599.876l-.092.49zm.622-3.312c-.102.541-.627.9-1.167.799a1.004 1.004 0 01-.799-1.168l.532-2.83c.101-.541.626-.9 1.167-.799.54.102.9.627.798 1.168l-.531 2.83z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-run-quick-access viewBox="0 0 13 18"><path d="M4 .731V2H1a1 1 0 100 2h3v1.269c0 .604.887.947 1.362.58L8.69 3.58c.378-.292.429-.868.051-1.16L5.337.151C4.861-.216 4 .127 4 .731zm5.913 4.432l-.096.07-3.295 2.245A2.75 2.75 0 014.887 8C3.828 8 2.9 7.457 2.397 6.65 2.158 6.265 1.767 6 1.313 6h-.084C.55 6 0 6.55 0 7.229V15.5A2.5 2.5 0 002.5 18h8a2.5 2.5 0 002.5-2.5v-8A2.5 2.5 0 0010.5 5c-.341 0-.587.163-.587.163zM11 15.5c0 .275-.225.5-.5.5h-8a.501.501 0 01-.5-.5V10h9v5.5zM5 15l3-2-3-2v4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-save-as viewBox="0 0 17 16"><path d="M8 0H2C.9 0 0 .9 0 2v9c0 .55.45 1 1 1s1-.45 1-1V2.5a.5.5 0 01.5-.5H8c.55 0 1-.45 1-1s-.45-1-1-1m3 6H9c-.55 0-1-.45-1-1s.45-1 1-1h2c.55 0 1 .45 1 1s-.45 1-1 1m3 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1V4H5c-.55 0-1 .45-1 1v9a2 2 0 002 2h9a2 2 0 002-2V9s0-3-3-3m-7.5 4h8a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-8a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-save-close viewBox="0 0 17 15"><path d="M7 5H5c-.55 0-1-.45-1-1s.45-1 1-1h2c.55 0 1 .45 1 1s-.45 1-1 1zM16.707.293a.999.999 0 00-1.414 0L13.5 2.086 11.707.293a.999.999 0 10-1.414 1.414L12.086 3.5l-1.793 1.793a.999.999 0 101.414 1.414L13.5 4.914l1.793 1.793a.997.997 0 001.414 0 .999.999 0 000-1.414L14.914 3.5l1.793-1.793a.999.999 0 000-1.414zM12 9a1 1 0 00-1 1v3H2V9h5a1 1 0 000-2H3a1 1 0 01-1-1V3H1c-.55 0-1 .45-1 1v9a2 2 0 002 2h9a2 2 0 002-2v-3a1 1 0 00-1-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-save-new viewBox="0 0 18 18"><path d="M5 2.5v-2a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v2c0 .275-.225.5-.5.5h-5a.5.5 0 01-.5-.5zm8.01 9.5H11a.989.989 0 00-.99.989v.021c0 .546.443.99.99.99h2.01a.99.99 0 00.99-.99v-.021a.989.989 0 00-.99-.989zm.99-1.99v-.021A.989.989 0 0013.01 9H8.99a.989.989 0 00-.99.989v.021c0 .546.443.99.99.99h4.02a.99.99 0 00.99-.99zM7 13H5v-2a1 1 0 10-2 0v2H1a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2zm10.44-8.68L14 .59a1.95 1.95 0 00-1.05-.55c.03.14.05.3.05.46v2A2.5 2.5 0 0110.5 5H5.6C4.22 5 3 3.88 3 2.5v-2c0-.17.12-.34.15-.5H2.5A2.5 2.5 0 000 2.5V8a1 1 0 102 0v-.5c0-.28.22-.5.5-.5h13c.28 0 .5.22.5.5v8c0 .27-.22.5-.5.5H10a1 1 0 100 2h5.5a2.5 2.5 0 002.5-2.5V5.71c0-.54-.21-1.04-.56-1.39z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-save-options viewBox="0 0 18 18"><path d="M4.181 10a.5.5 0 01.49.4l.126.617c.012.06.056.106.113.124.162.051.318.116.467.195a.166.166 0 00.168-.007l.527-.348a.498.498 0 01.629.063l.255.255a.5.5 0 01.063.629l-.348.527a.162.162 0 00-.007.167c.079.15.144.306.195.468a.161.161 0 00.123.112l.618.127a.5.5 0 01.4.49v.362a.5.5 0 01-.4.49l-.618.126a.164.164 0 00-.123.113 2.808 2.808 0 01-.195.467.163.163 0 00.007.168l.348.526a.5.5 0 01-.063.63l-.255.254a.5.5 0 01-.629.064l-.527-.349a.166.166 0 00-.168-.006 2.859 2.859 0 01-.467.195.163.163 0 00-.113.122l-.126.618a.5.5 0 01-.49.401h-.362a.5.5 0 01-.49-.401l-.126-.618a.163.163 0 00-.113-.122 2.859 2.859 0 01-.467-.195.166.166 0 00-.168.006l-.527.349a.5.5 0 01-.629-.064l-.255-.254a.5.5 0 01-.063-.63l.348-.526a.163.163 0 00.007-.168 2.808 2.808 0 01-.195-.467.164.164 0 00-.123-.113L.4 14.671a.5.5 0 01-.4-.49v-.362a.5.5 0 01.4-.49l.618-.127a.161.161 0 00.123-.112c.051-.162.116-.318.195-.468a.162.162 0 00-.007-.167l-.348-.527a.5.5 0 01.063-.629l.255-.255a.498.498 0 01.629-.063l.527.348c.05.033.114.035.168.007.149-.079.305-.144.467-.195a.164.164 0 00.113-.124l.126-.617a.5.5 0 01.49-.4zM4 12.666a1.333 1.333 0 100 2.667 1.333 1.333 0 000-2.667zM13.01 12a.99.99 0 01.99.99v.02a.99.99 0 01-.99.99H11a.991.991 0 01-.99-.99v-.02A.99.99 0 0111 12zM14 9.99a.99.99 0 00-.99-.99H9a.99.99 0 00-.99.99v.02c0 .546.444.99.99.99h4.01a.99.99 0 00.99-.99v-.02zM5.5 3h5a.5.5 0 00.5-.5v-2a.5.5 0 00-.5-.5h-5a.5.5 0 00-.5.5v2a.5.5 0 00.5.5zM0 5V2.5A2.5 2.5 0 012.5 0h.649C3.116.161 3 .329 3 .5v1.901A2.606 2.606 0 005.599 5H10.5A2.5 2.5 0 0013 2.5v-2c0-.159-.019-.314-.047-.464.394.072.757.26 1.047.55l3.442 3.736c.35.349.558.851.558 1.385V15.5a2.5 2.5 0 01-2.5 2.5H10a1 1 0 010-2h5.5a.5.5 0 00.5-.5V7H2a2 2 0 01-2-2zm1 4c-.55 0-1-.45-1-1V5c0-.55.45-1 1-1s1 .45 1 1v3c0 .55-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-save viewBox="0 0 18 18"><path d="M13 9.99a.99.99 0 00-.99-.99H5.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h6.02a.99.99 0 00.99-.99v-.02zm0 3a.99.99 0 00-.99-.99H5.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h6.02a.99.99 0 00.99-.99v-.02zM5.5 3h5a.5.5 0 00.5-.5v-2a.5.5 0 00-.5-.5h-5a.5.5 0 00-.5.5v2a.5.5 0 00.5.5zm11.942 1.322L14 .586a1.977 1.977 0 00-1.047-.55c.028.15.047.305.047.464v2C13 3.879 11.878 5 10.5 5H5.599C4.22 5 3 3.879 3 2.5v-2c0-.171.116-.339.149-.5H2.5A2.503 2.503 0 000 2.5v13C0 16.879 1.122 18 2.5 18h13c1.378 0 2.5-1.121 2.5-2.5V5.707a1.96 1.96 0 00-.558-1.385zM16 15.5a.5.5 0 01-.5.5h-13a.5.5 0 01-.5-.5V7h14v8.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-scale viewBox="0 0 18 18"><path d="M13.031 12L14 8.124 14.969 12h-1.938zM3.024 14L4 9.609 4.976 14H3.024zm14.009-1.993l-2.063-8.25-.053-.112-.053-.141-.042-.058-.108-.124-.099-.106-.063-.039-.143-.072-.141-.063-.025-.012-.046-.002-.167-.01-.129-.013-3.901.39V1a1 1 0 00-2 0v2.595l-4.099.41-.04.012-.059.007h-.019l-.126.056-.163.065-.049.029-.117.108-.118.115-.035.047-.067.143-.068.159-.016.037-2.066 9.225A.997.997 0 000 15c0 1.682 1.757 3 4 3 2.243 0 4-1.318 4-3a.996.996 0 00-.967-.993L5.221 5.883l7.464-.746-1.726 6.871A.996.996 0 0010 13c0 1.682 1.757 3 4 3 2.243 0 4-1.318 4-3a.996.996 0 00-.967-.993z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-schedule viewBox="0 0 17 17"><path d="M9.5 9.5h3v3h-3v-3zm4-6V1.82c0-.73-.26-1.32-.99-1.32h-.02c-.73 0-.99.59-.99 1.32V3.5h-6V1.82C5.5 1.09 5.24.5 4.51.5h-.02c-.73 0-.99.59-.99 1.32V3.5c-2 0-3 .71-3 2.54v7.79c0 1.84.83 2.67 2.67 2.67h10.66c1.84 0 2.67-.83 2.67-2.67V6.08c0-1.83-1-2.58-3-2.58zm0 10h-10v-5h10v5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-screen viewBox="0 0 18 16"><path d="M15.5 0h-13A2.5 2.5 0 000 2.5v7.099C0 10.945 1.098 12 2.5 12h13A2.5 2.5 0 0018 9.5v-7A2.5 2.5 0 0015.5 0zm.5 9v.5a.5.5 0 01-.5.5h-13c-.051 0-.5-.012-.5-.401V2.5a.5.5 0 01.5-.5h13a.5.5 0 01.5.5V9zm-4 7H6c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-search-folder viewBox="0 0 18 18"><path d="M16 2H9.232L8.386.922C8.024.319 7.373 0 6.67 0H2a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2zm-2.457 12.528l-.015.015a.99.99 0 01-1.4 0l-2.108-2.109A3.975 3.975 0 018 13c-2.206 0-4-1.794-4-4s1.794-4 4-4 4 1.794 4 4c0 .739-.216 1.424-.566 2.019l2.109 2.109a.99.99 0 010 1.4zM8 7c-1.102 0-2 .897-2 2 0 1.102.898 2 2 2 1.102 0 2-.898 2-2 0-1.103-.898-2-2-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-search-list viewBox="0 0 18 18"><path d="M9.815 11.726a5.316 5.316 0 00.949-3.04 5.388 5.388 0 00-5.382-5.383A5.388 5.388 0 000 8.686a5.387 5.387 0 005.382 5.381 5.32 5.32 0 003.042-.95l3.595 3.597a.979.979 0 00.695.286.97.97 0 00.695-.287.986.986 0 000-1.391l-3.594-3.596zm-4.433.375a3.419 3.419 0 01-3.415-3.415A3.42 3.42 0 015.382 5.27a3.42 3.42 0 013.416 3.416 3.42 3.42 0 01-3.416 3.415zM17 4h-6c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1zm0 4h-4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1zm0 4h-4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-search-results-history viewBox="0 0 18 18"><path d="M8.707 11.707l2-2A.997.997 0 0011 9V6a1 1 0 10-2 0v2.586l-1.707 1.707a.999.999 0 101.414 1.414zM9 0a8.917 8.917 0 00-4.528 1.25L4.019.42c-.29-.53-.915-.58-1.156-.029L.058 4.507c-.193.438.112.908.686.947l4.85-.063c.592.095.889-.457.599-.988l-.542-.994-.228-.417c1.423-.85 3.166-1.215 5.004-.85 2.715.54 4.9 2.731 5.434 5.448A7.012 7.012 0 019 16c-3.566 0-6.518-2.681-6.947-6.133A.99.99 0 001.069 9C.468 9-.005 9.529.07 10.125c.566 4.518 4.492 8.004 9.19 7.871 4.692-.133 8.603-4.044 8.736-8.736C18.14 4.179 14.049 0 9 0z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-search viewBox="0 0 18 18"><path d="M17.707 16.293l-5.108-5.109A6.954 6.954 0 0014 7c0-3.86-3.141-7-7-7S0 3.14 0 7s3.141 7 7 7a6.958 6.958 0 004.185-1.402l5.108 5.109a.997.997 0 001.414 0 .999.999 0 000-1.414zM7 12c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-sec-menu-collapse viewBox="0 0 18 18"><path d="M5 10h8a1 1 0 100-2H5a1 1 0 100 2" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-sec-menu-expand viewBox="0 0 18 18"><path d="M13 8h-3V5a1 1 0 00-2 0v3H5a1 1 0 000 2h3v3a1 1 0 002 0v-3h3a1 1 0 000-2" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-info-linear viewBox="0 0 18 18"><path d="M10 4.975a1 1 0 11-2 0 1 1 0 012 0zM10 9a1 1 0 10-2 0v4a1 1 0 102 0V9zM9 2C5.141 2 2 5.14 2 9c0 3.859 3.141 7 7 7s7-3.141 7-7c0-3.86-3.141-7-7-7zm0-2a9 9 0 019 9 9 9 0 01-9 9 9 9 0 01-9-9 9 9 0 019-9z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-security-on viewBox="0 0 18 18"><path d="M9.69 1.656c2.03 1.255 4.566 1.255 5.532 1.333.361.029.743.28.982.61.238.329.335.806.282 1.093-.243 1.323-.711 4.001-2.22 6.572-1.508 2.57-3.576 4.31-4.446 4.987-.18.14-.513.249-.816.249-.317 0-.631-.108-.81-.25-.903-.706-2.893-2.414-4.401-4.914-1.509-2.5-2.076-5.383-2.283-6.667-.046-.288.069-.77.283-1.07.213-.3.666-.585 1.033-.61.92-.063 3.365-.116 5.505-1.333.355-.202 1.012-.214 1.359 0zm3.163 4.965a.625.625 0 00-.891 0L8.64 9.97 7.057 8.375a.626.626 0 00-.891 0 .64.64 0 000 .898l2.028 2.046a.625.625 0 00.891 0l3.768-3.8a.64.64 0 000-.898z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-security-off viewBox="0 0 18 18"><path d="M9.001 2.5a.48.48 0 00-.249.07c-1.434.869-3.316 1.332-5.755 1.414a.508.508 0 00-.383.19.508.508 0 00-.107.408c.23 1.378.808 4.01 2.089 6.16 1.302 2.187 3.12 3.848 4.086 4.643a.494.494 0 00.634 0c.968-.795 2.786-2.456 4.088-4.643 1.281-2.15 1.859-4.782 2.089-6.16a.508.508 0 00-.107-.407.508.508 0 00-.382-.19c-2.438-.083-4.32-.546-5.754-1.415a.48.48 0 00-.249-.07M9 16.5c-.34 0-.681-.114-.96-.342-1.016-.834-2.926-2.579-4.304-4.89C2.37 8.983 1.763 6.219 1.52 4.778a1.551 1.551 0 01.321-1.23c.28-.346.694-.553 1.138-.568 2.223-.075 3.99-.5 5.249-1.263a1.485 1.485 0 011.543 0c1.26.762 3.026 1.188 5.248 1.263.443.015.858.222 1.138.568.277.344.394.792.32 1.23-.24 1.442-.85 4.205-2.214 6.492-1.378 2.31-3.29 4.055-4.307 4.89A1.505 1.505 0 019 16.5" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-select-all viewBox="0 0 18 18"><path d="M13 6H5c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1zm0 4H5c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1zm0 4H5c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1zm3-11c0 .55.45 1 1 1s1-.45 1-1v-.5C18 1.125 16.875 0 15.5 0H15c-.55 0-1 .45-1 1s.45 1 1 1c0 0 1.094-.094 1 1zM3 2c.55 0 1-.45 1-1s-.45-1-1-1h-.5A2.507 2.507 0 000 2.5V3c0 .55.45 1 1 1s1-.45 1-1c0 0-.094-1.094 1-1zM2 15c0-.55-.45-1-1-1s-1 .45-1 1v.5C0 16.875 1.125 18 2.5 18H3c.55 0 1-.45 1-1s-.45-1-1-1c0 0-1.094.094-1-1zm13 1c-.55 0-1 .45-1 1s.45 1 1 1h.5c1.375 0 2.5-1.125 2.5-2.5V15c0-.55-.45-1-1-1s-1 .45-1 1c0 0 .094 1.094-1 1zm2-8c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1s1 .45 1 1v1c0 .55-.45 1-1 1zm0 5c-.55 0-1-.45-1-1v-1c0-.55.45-1 1-1s1 .45 1 1v1c0 .55-.45 1-1 1zM10 1c0-.55.45-1 1-1h1c.55 0 1 .45 1 1s-.45 1-1 1h-1c-.55 0-1-.45-1-1zM5 1c0-.55.45-1 1-1h1c.55 0 1 .45 1 1s-.45 1-1 1H6c-.55 0-1-.45-1-1zm-4 9c.55 0 1 .45 1 1v1c0 .55-.45 1-1 1s-1-.45-1-1v-1c0-.55.45-1 1-1zm0-5c.55 0 1 .45 1 1v1c0 .55-.45 1-1 1s-1-.45-1-1V6c0-.55.45-1 1-1zm7 12c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1s.45-1 1-1h1c.55 0 1 .45 1 1zm5 0c0 .55-.45 1-1 1h-1c-.55 0-1-.45-1-1s.45-1 1-1h1c.55 0 1 .45 1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-script viewBox="0 0 17 18"><path d="M17 15.5V11a1 1 0 00-1-1h-3V2.5C13 1.125 11.875 0 10.5 0h-8A2.507 2.507 0 000 2.5v13C0 16.875 1.125 18 2.5 18h12a2.5 2.5 0 002.5-2.5zm-6-.5c0 .352.07.686.182 1H2.5a.507.507 0 01-.5-.5v-13c0-.271.229-.5.5-.5h8c.271 0 .5.229.5.5V15zm4 0c0 .552-.449 1-1 1h.094-.096a1 1 0 01-1-1v-3H15v3zM8 6H5c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1zm0 4H5c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1zm0 4H5c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-select viewBox="0 0 14 14"><path d="M11.001 12.981a1.41 1.41 0 001.989.009 1.41 1.41 0 00-.009-1.989L8.969 7.014l.029-.03 2.642-2.642a.988.988 0 00.292-.669c0-.47-.518-1.122-1.65-1.575L9.983 2l-8-2c-.203 0-.372.032-.536.069a2.319 2.319 0 00-.439.161L.997.234A2.008 2.008 0 00.696.43l-.14.126-.126.14a1.958 1.958 0 00-.196.301l-.004.01a2.327 2.327 0 00-.23.975l2 8 .099.3c.453 1.132 1.087 1.649 1.575 1.649a.98.98 0 00.668-.291l2.642-2.642.03-.03 3.987 4.013" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-send-submit viewBox="0 0 18 17"><path d="M11 11.267s0-.939 1-.939l4 .939s1 .029 1 .939l-1.242 1.166 1.949 1.845a.898.898 0 010 1.328l-.086.081a1.046 1.046 0 01-1.414 0l-1.949-1.845L13 15.962s-.692-.03-1-.939c-.344-1.012-1-3.756-1-3.756zM9 16.9c-4.963 0-9-3.79-9-8.45C0 3.79 4.037 0 9 0s9 3.79 9 8.45c0 .519-.447.939-1 .939-.553 0-1-.42-1-.939 0-3.623-3.141-6.572-7-6.572S2 4.827 2 8.45s3.141 6.572 7 6.572c.553 0 1 .42 1 .939 0 .519-.447.939-1 .939zm-1.002-3.875l-.251-.029C5.541 12.461 4 10.592 4 8.45c0-2.589 2.243-4.694 5-4.694 2.279 0 4.271 1.445 4.84 3.515.138.501-.183 1.014-.718 1.144-.533.134-1.08-.172-1.218-.674-.341-1.24-1.536-2.107-2.904-2.107-1.654 0-3 1.264-3 2.817 0 1.285.924 2.406 2.247 2.727.534.131.856.642.719 1.145-.116.423-.523.704-.968.704v-.002z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-send viewBox="0 0 18 18"><path d="M17 9a1 1 0 00-1 1v5.599c0 .389-.449.401-.5.401h-13c-.051 0-.5-.012-.5-.401V6.5a.5.5 0 01.5-.5H4a1 1 0 100-2H2.5A2.503 2.503 0 000 6.5v9.099C0 16.945 1.098 18 2.5 18h13c1.402 0 2.5-1.055 2.5-2.401V10a1 1 0 00-1-1zM6.586 11.099a.56.56 0 00.556-.415c.551-2.343 2.131-3.536 4.858-3.9v1.393c0 .68.698 1.066 1.206.652l4.5-3.677c.404-.329.396-.975-.009-1.304L13.21.17C12.703-.243 12 .143 12 .823v1.58c-3.472.726-5.773 3.441-5.99 8.177-.012.281.254.519.576.519z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-service viewBox="0 0 18 16"><path d="M11 4H7V2.5c0-.271.229-.5.5-.5h3c.271 0 .5.229.5.5V4zm4.5 0H13V2.5C13 1.125 11.875 0 10.5 0h-3A2.507 2.507 0 005 2.5V4H2.5A2.5 2.5 0 000 6.5v7A2.5 2.5 0 002.5 16h8.813L9.13 13.864a4.047 4.047 0 01-1.556.101c-1.661-.217-3.037-1.525-3.378-3.165a3.856 3.856 0 01.16-2.143.504.504 0 01.827-.173l2.223 2.223A.999.999 0 108.82 9.293L6.597 7.07a.504.504 0 01.173-.827 3.856 3.856 0 012.143-.16c1.64.34 2.948 1.716 3.165 3.377a4.041 4.041 0 01-.109 1.586l4.685 4.659A2.489 2.489 0 0018 13.5v-7A2.5 2.5 0 0015.5 4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-server viewBox="0 0 18 18"><path d="M14.5 0h-11A3.51 3.51 0 000 3.5v1A3.51 3.51 0 003.5 8h11A3.51 3.51 0 0018 4.5v-1A3.51 3.51 0 0014.5 0zM4 6a2 2 0 11-.001-3.999A2 2 0 014 6zm11-1H9c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1zm-.5 5h-11A3.51 3.51 0 000 13.5v1A3.51 3.51 0 003.5 18h11a3.51 3.51 0 003.5-3.5v-1a3.51 3.51 0 00-3.5-3.5zM4 16a2 2 0 11-.001-3.999A2 2 0 014 16zm11-1H9c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-settings viewBox="0 0 18 18"><path d="M17.1 7.49l-1.39-.284a.365.365 0 01-.277-.254 6.545 6.545 0 00-.439-1.052.367.367 0 01.015-.377l.784-1.184a1.125 1.125 0 00-.143-1.416l-.572-.573a1.125 1.125 0 00-1.416-.143l-1.185.784a.373.373 0 01-.378.015 6.372 6.372 0 00-1.051-.439.369.369 0 01-.254-.277L10.51.9A1.125 1.125 0 009.408 0h-.816c-.534 0-.995.376-1.102.9l-.284 1.39a.369.369 0 01-.254.277 6.372 6.372 0 00-1.051.439.373.373 0 01-.378-.015l-1.185-.784a1.125 1.125 0 00-1.416.143l-.572.573c-.378.378-.438.97-.143 1.416l.784 1.184a.367.367 0 01.015.377 6.545 6.545 0 00-.439 1.052.365.365 0 01-.277.254L.9 7.49c-.524.107-.9.568-.9 1.103v.814c0 .535.376.996.9 1.103l1.39.284a.365.365 0 01.277.254c.116.363.262.715.439 1.051a.369.369 0 01-.015.378l-.784 1.184a1.125 1.125 0 00.143 1.416l.572.573c.378.378.971.438 1.416.143l1.185-.784a.371.371 0 01.378-.015c.336.178.687.323 1.051.439.129.04.227.144.254.276L7.49 17.1c.107.524.568.9 1.102.9h.816c.534 0 .995-.376 1.102-.9l.284-1.391a.367.367 0 01.254-.276 6.372 6.372 0 001.051-.439.371.371 0 01.378.015l1.185.784a1.125 1.125 0 001.416-.143l.572-.573c.378-.378.438-.97.143-1.416l-.784-1.184a.369.369 0 01-.015-.378c.177-.336.323-.688.439-1.051a.365.365 0 01.277-.254l1.39-.284c.524-.107.9-.568.9-1.103v-.814c0-.535-.376-.996-.9-1.103zM9 12a3 3 0 110-6 3 3 0 010 6z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-shared-folder-closed viewBox="0 0 15 15"><path d="M12.5 2.5h-6l-.846-1.078C5.292.818 4.641.5 3.938.5H2.5a2 2 0 00-2 2v1h14c0-1.104-.659-1-2-1zm-12 2V12A2.5 2.5 0 003 14.5h9a2.5 2.5 0 002.5-2.5V4.5H.5zm5.75 4.97l-.03.28 2.959 1.38c.25-.24.58-.38.94-.38.76 0 1.38.62 1.38 1.37 0 .76-.62 1.38-1.38 1.38-.75 0-1.37-.62-1.37-1.38l.02-.2-3.01-1.41c-.24.21-.54.33-.88.33-.76 0-1.38-.59-1.38-1.35 0-.76.62-1.4 1.38-1.4.36 0 .69.15.93.38L8.77 7.1l-.02-.22c0-.76.62-1.38 1.37-1.38.76 0 1.38.62 1.38 1.38 0 .75-.62 1.37-1.38 1.37-.36 0-.68-.14-.93-.37L6.23 9.25l.02.22z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-show-last-x-days viewBox="0 0 16 18"><path d="M15.414 3.414L12.586.586A2 2 0 0011.172 0H4.5A2.5 2.5 0 002 2.5V3a1 1 0 102 0v-.5a.5.5 0 01.5-.5H10v3c0 .55.45 1 1 1h3v9.5a.5.5 0 01-.5.5h-.514a.985.985 0 00-.986.98v.03a.985.985 0 00.985.99h.515a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414zM6 6c-3.308 0-6 2.692-6 6s2.692 6 6 6 6-2.692 6-6-2.692-6-6-6zm0 10c-2.206 0-4-1.795-4-4s1.794-4 4-4 4 1.795 4 4-1.794 4-4 4zm1-4.414V10a1 1 0 10-2 0v2c0 .266.106.519.293.707l1 1a.997.997 0 001.414 0 .999.999 0 000-1.414L7 11.586z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-sort-a-to-z viewBox="0 0 18 18"><path d="M7.708 11H8a1 1 0 00-1-1H3.5a.5.5 0 000 1h2.792l-3 3H3a1 1 0 001 1h3.5a.5.5 0 000-1H4.708l3-3zM7 7V4H6v3H3a1 1 0 001 1h3.5a.5.5 0 000-1H7zm7.269 3H13V4a1 1 0 10-2 0v6H9.731c-.604 0-.947.887-.579 1.361l2.268 3.329c.292.378.868.428 1.16.05l2.269-3.403c.367-.476.024-1.337-.58-1.337zM7 4H3.5a.5.5 0 010-1H6a1 1 0 011 1zM6 5v1H3a1 1 0 011-1h2zM3 6h1v1H3V6z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-sohoxi viewBox="0 0 158 33"><path d="M.031 27.141l3.53-4.951a13.41 13.41 0 009.72 4.126c3.576 0 5.318-1.65 5.318-3.393 0-5.41-17.605-1.696-17.605-13.204 0-5.089 4.401-9.307 11.6-9.307 4.859 0 8.894 1.468 11.92 4.264l-3.622 4.769c-2.476-2.293-5.776-3.347-8.895-3.347-2.796 0-4.354 1.237-4.354 3.071 0 4.859 17.559 1.604 17.559 13.021 0 5.593-3.988 9.811-12.241 9.811C7.092 32 2.874 30.028.031 27.141zm26.677-6.786c0-6.281 4.401-11.6 11.69-11.6 7.336 0 11.736 5.318 11.736 11.6 0 6.326-4.4 11.645-11.736 11.645-7.289 0-11.69-5.318-11.69-11.645zm17.376 0c0-3.438-2.063-6.419-5.686-6.419-3.621 0-5.639 2.98-5.639 6.419 0 3.484 2.018 6.464 5.639 6.464 3.623 0 5.686-2.979 5.686-6.464zM74.322 31.45V18.613H59.881V31.45h-6.51V.871h6.51v12.012h14.441V.871h6.557V31.45h-6.557zm9.815-11.095c0-6.281 4.401-11.6 11.69-11.6 7.335 0 11.736 5.318 11.736 11.6 0 6.326-4.401 11.645-11.736 11.645-7.289 0-11.69-5.318-11.69-11.645zm17.375 0c0-3.438-2.062-6.419-5.685-6.419-3.623 0-5.639 2.98-5.639 6.419 0 3.484 2.017 6.464 5.639 6.464 3.622 0 5.685-2.979 5.685-6.464zm40.801 11.095l-7.656-11.187-7.702 11.187h-7.748l11.095-15.68L119.895.871h7.748l7.015 10.452L141.581.871h7.839l-10.406 14.854 11.095 15.726h-7.796v-.001zM151 3.438C151 1.513 152.605 0 154.484 0c1.926 0 3.484 1.513 3.484 3.438a3.483 3.483 0 01-3.484 3.484C152.605 6.923 151 5.363 151 3.438zm.596 28.012V9.307h5.823V31.45h-5.823z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-sort-up viewBox="0 0 18 18"><path d="M17.997 15.01a.99.99 0 01-.99.99h-9.02a.99.99 0 01-.99-.99v-.02a.99.99 0 01.99-.99h9.02a.99.99 0 01.99.99v.02zm0-5a.99.99 0 01-.99.99h-9.02a.99.99 0 01-.99-.99v-.02a.99.99 0 01.99-.99h9.02a.99.99 0 01.99.99v.02zM17.007 6h-6.01c-.547 0-1-.443-1-.99v-.02c0-.547.47-.99.99-.99h6.02a.99.99 0 01.99.99v.02a.99.99 0 01-.99.99zM7.269 6H4.997v11a1 1 0 11-2 0V6H.732c-.606 0-.948-.887-.58-1.361L3.419.309c.293-.377.868-.427 1.16-.05l3.27 4.404C8.216 5.139 7.872 6 7.269 6z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-sort-down viewBox="0 0 18 18"><path d="M18 2.99a.99.99 0 00-.99-.99H7.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h9.02a.99.99 0 00.99-.99v-.02zm0 5a.99.99 0 00-.99-.99H7.99a.99.99 0 00-.99.99v.02c0 .547.443.99.99.99h9.02a.99.99 0 00.99-.99v-.02zM17.01 12H11c-.547 0-1 .443-1 .99v.02c0 .547.47.99.99.99h6.02a.99.99 0 00.99-.99v-.02a.99.99 0 00-.99-.99zm-9.739 0H5V1a1 1 0 10-2 0v11H.734c-.605 0-.947.887-.58 1.361l3.268 4.329c.293.378.868.428 1.16.05l3.269-4.403c.367-.476.025-1.337-.58-1.337z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-manufacturing viewBox="0 0 18 18"><path d="M18 5.414c0-.891-1.077-1.337-1.707-.707L11 10h-1V5.414c0-.891-1.077-1.337-1.707-.707L3 10V1.5C3 .675 2.325 0 1.5 0S0 .675 0 1.5V16a2 2 0 002 2h6v-2.5c0-.825.675-1.5 1.5-1.5s1.5.675 1.5 1.5V18h5a2 2 0 002-2v-4c0-.366-.106-.705-.277-1H18V5.414z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-spreadsheet viewBox="0 0 18 18"><path d="M15.5 0h-13A2.507 2.507 0 000 2.5v13C0 16.875 1.125 18 2.5 18h13c1.375 0 2.5-1.125 2.5-2.5v-13C18 1.125 16.875 0 15.5 0zM14 6h2v2h-2V6zm-4 0h2v2h-2V6zM6 6h2v2H6V6zM2 6h2v2H2V6zm0 4h2v2H2v-2zm4 0h2v2H6v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2zm1.5-8c.271 0 .5.229.5.5V4h-2V2h1.5zM10 2h2v2h-2V2zM6 2h2v2H6V2zm-4 .5c0-.271.229-.5.5-.5H4v2H2V2.5zM2.5 16a.507.507 0 01-.5-.5V14h2v2H2.5zM6 14h2v2H6v-2zm4 0h2v2h-2v-2zm6 1.5c0 .271-.229.5-.5.5H14v-2h2v1.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-special-item viewBox="0 0 18 18"><path d="M15 0H3C1.35 0 0 1.35 0 3v12c0 1.65 1.35 3 3 3h12c1.65 0 3-1.35 3-3V3c0-1.65-1.35-3-3-3zm-5 14H5c-.55 0-1-.45-1-1s.45-1 1-1h5c.55 0 1 .45 1 1s-.45 1-1 1zm3-4H5c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1zm0-4H5c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-sort-z-to-a viewBox="0 0 18 18"><path d="M7.708 4H8a1 1 0 00-1-1H3.5a.5.5 0 000 1h2.792l-3 3H3a1 1 0 001 1h3.5a.5.5 0 000-1H4.708l3-3zM7 14v-3H6v3H3a1 1 0 001 1h3.5a.5.5 0 000-1H7zm7.269-4H13V4a1 1 0 10-2 0v6H9.731c-.604 0-.947.887-.579 1.361l2.268 3.329c.292.378.868.428 1.16.05l2.269-3.403c.367-.476.024-1.337-.58-1.337zM7 11H3.5a.5.5 0 010-1H6a1 1 0 011 1zm-1 1v1H3a1 1 0 011-1h2zm-3 1h1v1H3v-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-stacked viewBox="0 0 18 18"><path d="M16 9H2V7h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H2V1c0-.55-.45-1-1-1S0 .45 0 1v16c0 .55.45 1 1 1s1-.45 1-1v-1h14c1.1 0 2-.9 2-2v-3c0-1.1-.9-2-2-2" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-star-filled viewBox="0 0 18 18"><path d="M9.818 1.59l1.755 5.399h5.566c.842 0 1.181 1.074.488 1.557l-4.465 3.102 1.73 5.23c.262.799-.644 1.466-1.32.973l-4.57-3.336-4.572 3.292c-.678.488-1.579-.186-1.314-.982l1.727-5.178L.371 8.545C-.32 8.061.02 6.989.861 6.989h5.571l1.754-5.388C8.446.807 9.56.796 9.818 1.59" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-star-half viewBox="0 0 18 18"><path d="M17.139 6.989h-5.565L9.819 1.59a.836.836 0 00-.81-.59L9 1.002V1l-.14.022-.11.017-.116.056-.118.058-.071.068a.851.851 0 00-.257.381L6.432 6.989H.86a.85.85 0 00-.53.175c-.417.325-.48 1.019.04 1.382l4.472 3.101-1.726 5.177a.88.88 0 00-.043.267l.004.07.03.181.02.067.099.185.014.023.168.168.047.031.157.086.068.025.177.035.058.007.018.003.142-.023.1-.016.19-.094.065-.032 4.043-2.911.528-.38 4.57 3.336c.16.116.334.167.502.167.539 0 1.018-.533.817-1.142l-1.728-5.23 4.464-3.101c.694-.483.355-1.557-.488-1.557zm-4.832 3.427l-.92.639 1.456 4.407-2.956-2.158-.88-.641-.007.006V3.95l.004-.013 1.48 4.552h4.595l-2.772 1.927z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-stop viewBox="0 0 18 18"><path d="M3.857 17A2.86 2.86 0 011 14.143V3.857A2.86 2.86 0 013.857 1h10.286A2.86 2.86 0 0117 3.857v10.286A2.86 2.86 0 0114.143 17H3.857z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-star-outlined viewBox="0 0 18 18"><path d="M9.005 3.937l1.479 4.552h4.596l-2.772 1.927-.921.639 1.457 4.407-2.957-2.158-.878-.641-3.846 2.769 1.459-4.376-.923-.64-2.777-1.927H7.52l1.484-4.552M9.01 1a.853.853 0 00-.824.602L6.433 6.989H.86c-.842 0-1.182 1.073-.49 1.557l4.473 3.102-1.727 5.176a.87.87 0 00.817 1.148.85.85 0 00.497-.165l4.572-3.291 4.57 3.336c.16.116.333.168.5.168.54 0 1.02-.534.818-1.143l-1.728-5.229 4.465-3.102c.693-.482.354-1.557-.488-1.557h-5.566L9.819 1.59A.835.835 0 009.01 1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-strike-through viewBox="0 0 18 18"><path d="M16.003 8.535h-4.057a5.385 5.385 0 00-1.176-.413l-2.193-.496c-.832-.192-1.793-.448-1.793-1.248 0-.801.673-1.361 1.89-1.361 2.448 0 2.224 1.713 3.441 1.713.64 0 1.2-.384 1.2-1.04 0-1.537-2.417-2.69-4.466-2.69-2.224 0-4.593.961-4.593 3.522 0 .694.152 1.408.697 2.013H2v1h4.638l.434.14 2.962.752c.896.225 1.12.736 1.12 1.201 0 .768-.752 1.521-2.112 1.521-2.658 0-2.289-2.081-3.714-2.081-.64 0-1.105.448-1.105 1.089 0 1.248 1.489 2.913 4.819 2.913 3.169 0 4.737-1.553 4.737-3.634 0-.652-.148-1.321-.569-1.901h2.793v-1z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-submit viewBox="0 0 18 18"><path d="M10 17.03V7.466l2.295 2.33a1.001 1.001 0 001.427-1.407L9.723 4.327a1 1 0 00-1.414-.009l-4.062 4a.999.999 0 00-.009 1.415.993.993 0 001.408.01L8 7.423v9.606a1 1 0 102 0zM1 10a1 1 0 01-1-1V2.401C0 1.055 1.098 0 2.5 0h13C16.902 0 18 1.055 18 2.401V9a1 1 0 01-2 0V2.401c0-.389-.449-.401-.5-.401h-13c-.051 0-.5.012-.5.401V9a1 1 0 01-1 1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-subscribe viewBox="0 0 19 18"><path d="M8.063 11a.999.999 0 01-.703-.288L3.297 6.711a.998.998 0 01-.008-1.413.998.998 0 011.414-.009l3.353 3.299 7.235-7.293a1 1 0 111.418 1.41l-7.937 8a1.001 1.001 0 01-.709.295zM8 14a1 1 0 01-1 1H2.5C1.098 15 0 13.945 0 12.599V2.5A2.5 2.5 0 012.5 0H11a1 1 0 110 2H2.5a.5.5 0 00-.5.5v10.099c0 .389.449.401.5.401H7a1 1 0 011 1zm2.932-2.068s0-1 1-1l4 1s1 .031 1 1l-1.242 1.242 2.085 1.965a.999.999 0 010 1.414l-.085.086c-.391.39-1.024.39-1.415 0l-2.085-1.965-1.258 1.258s-.692-.033-1-1c-.344-1.078-1-4-1-4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-success-alert viewBox="0 0 18 18"><g fill-rule=nonzero><path d="M9 0a9 9 0 00-9 9 9 9 0 009 9 9 9 0 009-9 9 9 0 00-9-9z" fill=currentColor stroke=none></path><path d="M7.36 12.712l-2.062-2.001a.997.997 0 01-.009-1.413.997.997 0 011.413-.009l1.354 1.299 4.234-4.293a1.001 1.001 0 011.42 1.41l-4.937 5a1.005 1.005 0 01-1.413.007z" fill=#FFF stroke=none></path></g></symbol> <symbol id=icon-success viewBox="0 0 18 18"><path d="M9 0a9 9 0 019 9 9 9 0 01-9 9 9 9 0 01-9-9 9 9 0 019-9zm4.705 6.29a1.004 1.004 0 00-1.415.005l-4.234 4.293-1.354-1.299a.997.997 0 00-1.413.009.997.997 0 00.009 1.413l2.062 2.001a.999.999 0 001.413-.007l4.937-5a1.001 1.001 0 00-.005-1.415z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-success-solid viewBox="0 0 18 18"><path d="M9 0a9 9 0 019 9 9 9 0 01-9 9 9 9 0 01-9-9 9 9 0 019-9zm4.705 6.29a1.004 1.004 0 00-1.415.005l-4.234 4.293-1.354-1.299a.997.997 0 00-1.413.009.997.997 0 00.009 1.413l2.062 2.001a.999.999 0 001.413-.007l4.937-5a1.001 1.001 0 00-.005-1.415z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tack viewBox="0 0 18 18"><path d="M17.707 7.293l-7-7a.999.999 0 10-1.414 1.414l.206.207c-1.022 2.36-3.307 4.562-5.677 5.494l-.115-.115a.999.999 0 10-1.414 1.414l2.687 2.688-4.649 4.65a1.13 1.13 0 101.597 1.597l4.65-4.651 2.715 2.716a.997.997 0 001.414 0 .999.999 0 000-1.414l-.197-.197c.97-2.328 3.238-4.604 5.565-5.607l.218.218a.997.997 0 001.414 0 .999.999 0 000-1.414" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-thumbs-down viewBox="0 0 18 18"><path d="M3 0H1C.45 0 0 .45 0 1v11c0 .55.45 1 1 1h2c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1m9 12l.984 4c.208 1.459-1.593 2.312-2.59 1.227l-4.219-5.661A1 1 0 016 11V1a1 1 0 011-1h7a1 1 0 01.958.713l2.283 8.72A2 2 0 0115.323 12H12" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-technology viewBox="0 0 18 18"><path d="M11 6H7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V7a1 1 0 00-1-1m3 7.5c0 .275-.225.5-.5.5h-9a.501.501 0 01-.5-.5v-9c0-.277.22-.5.497-.5h9.002c.279 0 .501.235.501.513V13.5zm3-3.5c.55 0 1-.45 1-1s-.45-1-1-1h-1V6h1c.55 0 1-.45 1-1s-.45-1-1-1h-1.051A2.505 2.505 0 0014 2.051V1c0-.55-.45-1-1-1s-1 .45-1 1v1h-2V1c0-.55-.45-1-1-1S8 .45 8 1v1H6V1c0-.55-.45-1-1-1S4 .45 4 1v1.051A2.505 2.505 0 002.051 4H1c-.55 0-1 .45-1 1s.45 1 1 1h1v2H1c-.55 0-1 .45-1 1s.45 1 1 1h1v2H1c-.55 0-1 .45-1 1s.45 1 1 1h1.051c.199.978.971 1.75 1.949 1.949V17c0 .55.45 1 1 1s1-.45 1-1v-1h2v1c0 .55.45 1 1 1s1-.45 1-1v-1h2v1c0 .55.45 1 1 1s1-.45 1-1v-1.05A2.51 2.51 0 0015.95 14H17c.55 0 1-.45 1-1s-.45-1-1-1h-1v-2h1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-thumbs-up viewBox="0 0 18 18"><path d="M15 18h2c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1v11c0 .55.45 1 1 1M6 6l-.984-4C4.808.54 6.609-.312 7.606.773l4.219 5.661A1 1 0 0112 7v10a1 1 0 01-1 1H4a1 1 0 01-.958-.713L.759 8.567A2 2 0 012.677 6H6" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tile viewBox="0 0 18 18"><path d="M1 6.969h5.971V1H1v5.969zM10.454 1v5.969h5.971V1h-5.971zM1 16.248h5.971v-5.97H1v5.97zm9.454 0h5.971v-5.97h-5.971v5.97z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-timer viewBox="0 0 18 18"><path d="M17.491 3.228L14.816.55a1.901 1.901 0 00-2.676 0l-1.596 1.597A7.972 7.972 0 009.044 2a7.96 7.96 0 00-1.49.145L5.966.559a1.923 1.923 0 00-2.705 0L.555 3.266a1.923 1.923 0 000 2.705l1.065 1.064a7.952 7.952 0 00-.577 2.966c0 4.41 3.59 8 8 8 4.412 0 8-3.59 8-8a7.941 7.941 0 00-.605-3.045l1.052-1.054a1.9 1.9 0 000-2.675zM9.044 16c-3.309 0-6-2.69-6-6 0-3.309 2.692-6 6-6 3.31 0 6 2.691 6 6 0 3.31-2.69 6-6 6zm1-6.414V7a1 1 0 10-2 0v3c0 .265.105.52.293.707l2 2a.997.997 0 001.415 0 .999.999 0 000-1.414l-1.708-1.707" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-timesheet viewBox="0 0 14 18"><path d="M8 5V0H2.5A2.507 2.507 0 000 2.5v13C0 16.875 1.125 18 2.5 18h9c1.375 0 2.5-1.125 2.5-2.5V6H9a1 1 0 01-1-1zM7 16c-2.206 0-4-1.795-4-4s1.794-4 4-4 4 1.795 4 4-1.794 4-4 4zm4.5-16H10v4h4V2.5C14 1.125 12.875 0 11.5 0zM8 11.586V11a1 1 0 10-2 0v1c0 .266.105.519.293.707l1 1a.997.997 0 001.414 0 .999.999 0 000-1.414L8 11.586z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tools-addons viewBox="0 0 18 18"><path d="M16.953 3h-2V1a1 1 0 00-2 0v2h-2a1 1 0 000 2h2v2a1 1 0 002 0V5h2a1 1 0 000-2m-3.438 12.153l-4.6-4.6c.3-.7.5-1.4.4-2.2-.2-2.8-2.9-4.7-5.5-4.3-.6.1-.8.9-.4 1.3l1.1 1.1c.8.8 1.9 1.8.9 2.9-1 1.1-2.1.2-2.9-.6l-1.2-1.2c-.5-.5-1.3-.1-1.3.5-.2 2.5 1.6 4.8 4.2 5.1.8.1 1.6-.1 2.3-.4l4.6 4.6c.6.6 1.6.6 2.2 0l.1-.1c.7-.5.7-1.5.1-2.1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tools viewBox="0 0 18 18"><path d="M8.915 6.75c.3-.7.5-1.4.4-2.2-.2-2.8-2.9-4.7-5.5-4.3-.6.1-.8.9-.4 1.3l1.1 1.1c.8.8 1.9 1.8.9 2.9-1 1.1-2.1.2-2.9-.6l-1.2-1.2c-.5-.5-1.3-.1-1.3.5-.2 2.5 1.6 4.8 4.2 5.1.8.1 1.6-.1 2.3-.4l8.519 8.519c.6.6 1.6.6 2.2 0l.1-.1c.7-.5.7-1.5.1-2.1L8.915 6.75zm-3.192 4.684a1 1 0 00-1.444-.031L.525 15.156a1.56 1.56 0 000 2.2l.1.1c.5.7 1.5.7 2.1.1l3.815-3.815a1 1 0 00.03-1.383l-.847-.924zM11.953 7a.997.997 0 00.707-.293l2.818-2.818.354.354 2.121-2.122L15.832 0 13.71 2.121l.354.354-2.818 2.818A.999.999 0 0011.953 7z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-translate viewBox="0 0 14 14"><path d="M11.717 5.022C11.089 6.753 9.445 8 7.5 8H4v.5C4 9.875 5.125 11 6.5 11H11l3 3V7.5c0-1.301-1.01-2.365-2.283-2.478zM10 2.5C10 1.125 8.875 0 7.5 0h-5A2.507 2.507 0 000 2.5V9l3-3h4.5C8.875 6 10 4.875 10 3.5v-1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-top-align viewBox="0 0 18 18"><path d="M6.55 5c.275 0 .5.225.5.5v10c0 .275-.225.5-.5.5h-2a.5.5 0 01-.5-.5v-10a.5.5 0 01.5-.5h2zm0-2h-2a2.502 2.502 0 00-2.5 2.5v10c0 1.378 1.121 2.5 2.5 2.5h2c1.378 0 2.5-1.122 2.5-2.5v-10c0-1.379-1.122-2.5-2.5-2.5zm10.46-3H16v2h1.01a.99.99 0 00.99-.99V.99a.99.99 0 00-.99-.99zM16 0H.99A.99.99 0 000 .99v.02c0 .547.443.99.99.99H16V0zm-2.5 3A2.502 2.502 0 0011 5.5v4c0 1.379 1.121 2.5 2.5 2.5S16 10.879 16 9.5v-4C16 4.121 14.879 3 13.5 3z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-transfer viewBox="0 0 18 18"><path d="M13.641 8.188l4.062 3.999a1 1 0 01.009 1.414l-4 4.062a.999.999 0 01-1.415.009.993.993 0 01-.009-1.408l2.318-2.354H5a1 1 0 110-2h9.564l-2.33-2.295a1.001 1.001 0 011.407-1.427zM4.359.288a1.001 1.001 0 011.407 1.427L3.436 4.01H13a1 1 0 110 2H3.394l2.318 2.354a.993.993 0 01-.009 1.408.999.999 0 01-1.415-.01l-4-4.061a1 1 0 01.01-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-travel-plan viewBox="0 0 18 16"><path d="M10.5 0h-3A2.507 2.507 0 005 2.5V16h8V2.5C13 1.125 11.875 0 10.5 0zM7 4V2.5c0-.271.229-.5.5-.5h3c.271 0 .5.229.5.5V4H7zM0 6.5v7A2.5 2.5 0 002.5 16H3V4h-.5A2.5 2.5 0 000 6.5zM15.5 4H15v12h.5a2.5 2.5 0 002.5-2.5v-7A2.5 2.5 0 0015.5 4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-avi viewBox="0 0 14 14"><path d="M2.5 10h1V8.999h-1V10zm10-1h-1v3h1v1h-3v-1h1V9h-1V8h3v1zm-4 3h-1v1h-1v-1h-1V8h1v3h1V8h1v4zm-4 1h-1v-2h-1v2h-1V9h1V8h1v1h1v4zm-2-10.5A.5.5 0 013 2h4.5v2c0 .55.45 1 1 1h3v2h-9V2.5zm10.414.914L10.086.586A2 2 0 008.672 0H3A2.5 2.5 0 00.5 2.5v9A2.5 2.5 0 003 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-audio viewBox="0 0 14 14"><path d="M7.433.161a1 1 0 011.541.841v11.997a1 1 0 01-1.541.841L4 10.002l-1.5-.001a2.507 2.507 0 01-2.5-2.5v-1c0-1.375 1.125-2.5 2.5-2.5l1.5.001zm5.452 2.372c.099.189 2.408 4.669-.014 8.959a1.001 1.001 0 01-1.742-.984c1.877-3.323.004-7.007-.015-7.044a1 1 0 011.771-.931z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-tree-bmp viewBox="0 0 14 14"><path d="M3.5 11v1h-1v-1h1zm8-2v1h-1V9h1zm-8 0v1h-1V9h1zm9 2h-2v2h-1V8h3v3zm-4 2h-1v-3h-1v3h-1V8h1v1h1V8h1v5zm-4-3v2a1 1 0 01-1 1h-2V8h2a1 1 0 011 1v1zm-2-7.5A.5.5 0 013 2h4.5v2c0 .55.45 1 1 1h3v2h-9V2.5zm10.414.914L10.086.586A2 2 0 008.672 0H3A2.5 2.5 0 00.5 2.5v9A2.5 2.5 0 003 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-chart viewBox="0 0 14 14"><path d="M7.645 1.355c0-.7.698-1.175 1.358-.939 4.122 1.474 6.461 6.693 2.879 11.57a1.195 1.195 0 01-.251.251C6.753 15.819 1.534 13.481.061 9.358-.175 8.699.3 8 1 8h5.645a1 1 0 001-1zM4.276.42c.664-.239 1.369.228 1.369.934V5a1 1 0 01-1 1H.999C.294 6-.173 5.294.066 4.63A7.005 7.005 0 014.276.42z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-tree-code viewBox="0 0 14 14"><path d="M8.165.014c.544.09.912.606.821 1.15l-2 12a1 1 0 01-.985.836l-.166-.014a.999.999 0 01-.821-1.15l2-12A.998.998 0 018.165.014zm3.542 4.279l2 2a.999.999 0 010 1.414l-2 2a.997.997 0 01-1.414 0 .999.999 0 010-1.414L11.586 7l-1.293-1.293a.999.999 0 111.414-1.414zm-8 0a.999.999 0 010 1.414L2.414 7l1.293 1.293a.999.999 0 11-1.414 1.414l-2-2a.999.999 0 010-1.414l2-2a.999.999 0 011.414 0z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-tree-csv viewBox="0 0 14 14"><path d="M12.5 12h-1v1h-1v-1h-1V8h1v3h1V8h1v4zm-4-3h-2v1h1a1 1 0 011 1v1a1 1 0 01-1 1h-2v-1h2v-1h-1a1 1 0 01-1-1V9a1 1 0 011-1h2v1zm-4 1h-1V9h-1v3h1v-1h1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1V9a1 1 0 011-1h1a1 1 0 011 1v1zm-2-7.5A.5.5 0 013 2h4.5v2c0 .55.45 1 1 1h3v2h-9V2.5zm10.414.914L10.086.586A2 2 0 008.672 0H3A2.5 2.5 0 00.5 2.5v9A2.5 2.5 0 003 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-doc viewBox="0 0 14 14"><path d="M11 11.5a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5v-9a.5.5 0 01.5-.5H7v3c0 .55.45 1 1 1h3v5.5zm1.414-8.086L9.586.586A2.001 2.001 0 008.171 0H3.5A2.503 2.503 0 001 2.5v9C1 12.879 2.122 14 3.5 14h7c1.378 0 2.5-1.121 2.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-excel viewBox="0 0 14 14"><path d="M11.5 7h-9V2.5A.5.5 0 013 2h4.5v2c0 .55.45 1 1 1h3v2zm0 2h-4V8h4v1zm0 2h-4v-1h4v1zm0 2h-4v-1h4v1zm-5-4h-4V8h4v1zm0 2h-4v-1h4v1zm0 2h-4v-1h4v1zm6.414-9.586L10.086.586A2 2 0 008.672 0H3A2.5 2.5 0 00.5 2.5v9A2.5 2.5 0 003 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-gif viewBox="0 0 13 14"><path d="M12 9h-2v1h1v1h-1v2H9V8h3v1zM8 9H7v3h1v1H5v-1h1V9H5V8h3v1zm-4 3a1 1 0 01-1 1H2a1 1 0 01-1-1V9a1 1 0 011-1h1a1 1 0 011 1H2v3h1v-2h2v1H4v1zM2 2.5a.5.5 0 01.5-.5H7v2c0 .55.45 1 1 1h3v2H2V2.5zm10.414.914L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v9A2.5 2.5 0 002.5 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-html viewBox="0 0 14 14"><path d="M12.91 3.41L10.09.59C9.71.21 9.2 0 8.67 0H3A2.5 2.5 0 00.5 2.5v9A2.5 2.5 0 003 14h8a2.5 2.5 0 002.5-2.5V4.83c0-.53-.21-1.04-.59-1.42zM2.5 2.5c0-.28.22-.5.5-.5h4.5v2c0 .55.45 1 1 1h3v1.5c0 .28-.22.5-.5.5H3c-.28 0-.5-.22-.5-.5v-4zm2 10.5h-1v-2h-1v2h-1V8h1v2h1V8h1v5zm4-4h-1v4h-1V9h-1V8h3v1zm4 4h-1v-3h-1v3h-1V8h1v1h1V8h1v5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-image viewBox="0 0 14 14"><path d="M11.524 0C12.913 0 14 1.055 14 2.401v9.198C14 12.945 12.913 14 11.524 14H2.477C1.088 14 0 12.945 0 11.599V2.401C0 1.055 1.088 0 2.477 0zm.023 2h-9.07a.498.498 0 00-.495.5L2 10l3-3 3.019 3 2-2L12 10l.019-7.599c0-.389-.444-.401-.495-.401zM8.5 3a1.5 1.5 0 11-.001 3.001A1.5 1.5 0 018.5 3z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-jpg viewBox="0 0 13 14"><path d="M11 12v-2h1v2a1 1 0 01-1 1h-1a1 1 0 01-1-1V9a1 1 0 011-1h1a1 1 0 011 1h-2v3h1zm-3-1H6v2H5V8h3v3zm-4 1H3v1H2v-1H1v-1h1v1h1V8h1v4zM2 2.5a.5.5 0 01.5-.5H7v2c0 .55.45 1 1 1h3v2H2V2.5zm10.414.914L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v9A2.5 2.5 0 002.5 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414zM7 10H6V9h1v1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-link viewBox="0 0 14 14"><path d="M5 12h-.5A4.505 4.505 0 010 7.5v-1C0 4.019 2.018 2 4.5 2H5a1 1 0 110 2h-.5A2.502 2.502 0 002 6.5v1C2 8.879 3.121 10 4.5 10H5a1 1 0 110 2m4.5 0H9a1 1 0 110-2h.5c1.378 0 2.5-1.121 2.5-2.5v-1C12 5.121 10.878 4 9.5 4H9a1 1 0 110-2h.5C11.981 2 14 4.019 14 6.5v1c0 2.481-2.019 4.5-4.5 4.5M9 8H5c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-linked-report viewBox="0 0 14 14"><g fill-rule=evenodd><path d="M10.5.5h-6c-1.1 0-2 .9-2 2v1H1c-.279 0-.5.22-.5.5s.221.5.5.5h1.5v1H1c-.279 0-.5.221-.5.5s.221.5.5.5h1.5v1H1c-.279 0-.5.22-.5.5s.221.5.5.5h1.5v1H1c-.279 0-.5.22-.5.5s.221.5.5.5h1.5c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zM9.07 3.93H5.64c-.47 0-.85-.39-.85-.86s.38-.86.851-.86h3.43c.47 0 .859.39.859.86s-.39.86-.86.86z" fill=currentColor fill-rule=nonzero stroke=none></path><path d="M13.5 13.5v-6H6A2.5 2.5 0 003.5 10v3.5h10z" fill=#F0F0F0 stroke=none></path><path d="M7.5 13.5h-.75a2.254 2.254 0 01-2.25-2.25v-.501A2.253 2.253 0 016.75 8.5H8a.499.499 0 110 1H6.75c-.689 0-1.25.561-1.25 1.249v.501c0 .688.561 1.25 1.25 1.25H8a.5.5 0 01.5.5c0 .275-.473.5-.75.5m3.75 0H10a.5.5 0 010-1h1.25c.689 0 1.25-.562 1.25-1.25v-.501c0-.688-.561-1.249-1.25-1.249H10a.5.5 0 010-1h1.25c1.24 0 2.25 1.01 2.25 2.249v.501c0 1.239-.885 2.25-2.125 2.25m-.875-2H7.499a.5.5 0 010-1h3.002c.274 0 .499.225.499.5s-.225.5-.5.5" fill=currentColor fill-rule=nonzero stroke=none></path></g></symbol> <symbol id=icon-tree-mail viewBox="0 0 14 14"><path d="M7 6.905l7-3.111V2.401C14 1.054 12.912 0 11.523 0H2.477C1.088 0 0 1.054 0 2.401v1.393l7 3.111zm0 2.19L0 5.984v5.615C0 12.946 1.088 14 2.477 14h9.046C12.912 14 14 12.946 14 11.599V5.984L7 9.095z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-mhtml viewBox="0 0 14 14"><path d="M12.5 9h-1v4h-1V9h-1V8h3v1zm-4 4h-1v-2h-1v2h-1V8h1v2h1V8h1v5zm-4 0h-1v-3h-1v3h-1V8h1v1h1V8h1v5zm-2-10.5A.5.5 0 013 2h4.5v2c0 .55.45 1 1 1h3v1.5a.5.5 0 01-.5.5H3a.5.5 0 01-.5-.5v-4zm10.414.914L10.086.586A2 2 0 008.672 0H3A2.5 2.5 0 00.5 2.5v9A2.5 2.5 0 003 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-mp3 viewBox="0 0 13 14"><path d="M6 10h1V8.999H6V10zm6-1v4H9v-1h2v-1h-1v-1h1V9H9V8h3v1zm-4 2H6v2H5V8h3v3zm-4 2H3v-3H2v3H1V8h1v1h1V8h1v5zM2 2.5a.5.5 0 01.5-.5H7v2c0 .55.45 1 1 1h3v2H2V2.5zm10.414.914L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v9A2.5 2.5 0 002.5 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-node viewBox="0 0 14 14"><path d="M11 11.5a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5v-9a.5.5 0 01.5-.5H7v2c0 .55.45 1 1 1h3v6.5zm1.414-8.086L9.586.586A2.001 2.001 0 008.171 0H3.5A2.503 2.503 0 001 2.5v9C1 12.879 2.122 14 3.5 14h7c1.378 0 2.5-1.121 2.5-2.5V4.828a2 2 0 00-.586-1.414zM9.99 7.01A.99.99 0 019 8H4.99A.99.99 0 014 7.01v-.02A.99.99 0 014.99 6H9c.547 0 1 .444 1 .99l-.01.02zm0 3A.99.99 0 019 11H4.99a.99.99 0 01-.99-.99v-.02A.99.99 0 014.99 9H9c.547 0 1 .444 1 .99l-.01.02z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-msg viewBox="0 0 13 14"><path d="M11 12v-2h1v2a1 1 0 01-1 1h-1a1 1 0 01-1-1V9a1 1 0 011-1h1a1 1 0 011 1h-2v3h1zM8 9H6l.5 1H7a1 1 0 011 1v1a1 1 0 01-1 1H5v-1h2l-.5-1H6a1 1 0 01-1-1V9a1 1 0 011-1h2v1zm-4 4H3v-3H2v3H1V8h1v1h1V8h1v5zM2 2.5a.5.5 0 01.5-.5H7v2c0 .55.45 1 1 1h3v2H2V2.5zm10.414.914L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v9A2.5 2.5 0 002.5 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-other-file viewBox="0 0 14 14"><path d="M3 6A2.503 2.503 0 00.5 8.5a.5.5 0 001 0C1.5 7.673 2.173 7 3 7s1.5.673 1.5 1.5c0 .826-.673 1.5-1.5 1.5a.5.5 0 00-.5.5v1.25a.5.5 0 001 0v-.799a2.507 2.507 0 002-2.451C5.5 7.122 4.378 6 3 6m0 7a.5.5 0 11-.002 1.002A.5.5 0 013 13zM8.67 0c.53 0 1.04.21 1.42.59l2.82 2.82c.38.38.59.89.59 1.42v6.67A2.5 2.5 0 0111 14H6.5a1 1 0 110-2H11c.28 0 .5-.22.5-.5V6h-3c-.55 0-1-.45-1-1V2H4c-.28 0-.5.22-.5.5V4a1 1 0 01-2 0V2.5A2.5 2.5 0 014 0z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-pdf viewBox="0 0 13 14"><path d="M6 12h1V8.999H6V12zm-4-2h1V8.999H2V10zm10-1h-2v1h1v1h-1v2H9V8h3v1zm-4 3a1 1 0 01-1 1H5V8h2a1 1 0 011 1v3zM4 9v2H2v2H1V8h3v1zM2 2.5a.5.5 0 01.5-.5H7v2c0 .55.45 1 1 1h3v2H2V2.5zm10.414.914L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v9A2.5 2.5 0 002.5 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-png viewBox="0 0 13 14"><path d="M11 12v-2h1v2a1 1 0 01-1 1h-1a1 1 0 01-1-1V9a1 1 0 011-1h1a1 1 0 011 1h-2v3h1zm-3 1H7l-1-2.5V13H5V8h1l1 2.5V8h1v5zm-4-2H2v2H1V8h3v3zm-2-1h1V9H2v1zm0-7.5a.5.5 0 01.5-.5H7v2c0 .55.45 1 1 1h3v2H2V2.5zm10.414.914L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v9A2.5 2.5 0 002.5 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-ppt viewBox="0 0 13 14"><path d="M12 9h-1v4h-1V9H9V8h3v1zM8 9v2H6v2H5V8h3v1zm-1 1H6V9h1v1zM4 9v2H2v2H1V8h3v1zm-1 1H2V9h1v1zM2 2.5a.5.5 0 01.5-.5H7v2c0 .55.45 1 1 1h3v2H2V2.5zm10.414.914L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v9A2.5 2.5 0 002.5 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-psd viewBox="0 0 13 14"><path d="M8.172 0a2 2 0 011.414.586l2.828 2.828A2 2 0 0113 4.828V11.5a2.5 2.5 0 01-2.5 2.5h-8A2.5 2.5 0 010 11.5v-9A2.5 2.5 0 012.5 0zM4 8H1v5h1v-2h2V8zm7 0H9v5h2a1 1 0 001-1V9a1 1 0 00-1-1zM8 8H6a1 1 0 00-1 1v1a1 1 0 001 1h1v1H5v1h2a1 1 0 001-1v-1a1 1 0 00-1-1H6V9h2V8zm3 1v3h-1V9h1zm-8-.001V10H2V8.999h1zM7 2H2.5a.5.5 0 00-.5.5V7h9V5H8c-.55 0-1-.45-1-1V2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-prj viewBox="0 0 13 14"><path d="M12.414 3.414L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v9A2.5 2.5 0 002.5 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414zM12 12h-1v1h-1v-1H9v-1h1v1h1V8h1v4zm-4-1H7l1 2H7l-1-2v2H5V8h3v3zm-4 0H2v2H1V8h3v3zm3-2v1H6V9h1zM3 9v1H2V9h1zm4-7v2c0 .55.45 1 1 1h3v2H2V2.5a.5.5 0 01.5-.5H7z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-pub viewBox="0 0 13 14"><path d="M8.172 0a2 2 0 011.414.586l2.828 2.828A2 2 0 0113 4.828V11.5a2.5 2.5 0 01-2.5 2.5h-8A2.5 2.5 0 010 11.5v-9A2.5 2.5 0 012.5 0zM11 8H9v5h2a1 1 0 001-1V9a1 1 0 00-1-1zM6 8H5v5h3V8H7v4H6V8zM4 8H1v5h1v-2h2V8zm7 3v1h-1v-1h1zm0-2v1h-1V9h1zm-8-.001V10H2V8.999h1zM7 2H2.5a.5.5 0 00-.5.5V7h9V5H8c-.55 0-1-.45-1-1V2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-rar viewBox="0 0 13 14"><path d="M8.172 0a2 2 0 011.414.586l2.828 2.828A2 2 0 0113 4.828V11.5a2.5 2.5 0 01-2.5 2.5h-8A2.5 2.5 0 010 11.5v-9A2.5 2.5 0 012.5 0zM12 8H9v5h1v-2l1 2h1l-1-2h1V8zM7 8H6v1H5v4h1v-2h1v2h1V9H7v1H6V9h1V8zM4 8H1v5h1v-2l1 2h1l-1-2h1V8zM3 9v1H2V9h1zm8 0v1h-1V9h1zM7 2H2.5a.5.5 0 00-.5.5V7h9V5H8c-.55 0-1-.45-1-1V2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-rdl viewBox="0 0 14 15"><path d="M6.5 9.5v3h1v-3h-1zm0 0v3h1v-3h-1zm6.41-5.59l-2.82-2.82C9.71.71 9.2.5 8.67.5H3A2.5 2.5 0 00.5 3v9A2.5 2.5 0 003 14.5h8a2.5 2.5 0 002.5-2.5V5.33c0-.53-.21-1.04-.59-1.42zM2.5 3c0-.28.22-.5.5-.5h4.5v2c0 .55.45 1 1 1h3V7c0 .28-.22.5-.5.5H3c-.28 0-.5-.22-.5-.5V3zm2 8.5h-1l1 2h-1l-1-2v2h-1v-5h3v3zm4 1h-1v1h-2v-5h2v1h1v3zm4 1h-3v-5h1v4h2v1zm-10-3h1v-1h-1v1z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-text viewBox="0 0 14 14"><path d="M11.5 1C12.879 1 14 2.121 14 3.5v8c0 1.379-1.121 2.5-2.5 2.5h-9A2.502 2.502 0 010 11.5v-8C0 2.121 1.121 1 2.5 1zm0 2h-9c-.275 0-.5.225-.5.5v8c0 .275.225.5.5.5h9c.275 0 .5-.225.5-.5v-8c0-.275-.225-.5-.5-.5zm-1.49 6a.99.99 0 01.99.99v.02a.99.99 0 01-.99.99H3.99a.99.99 0 01-.99-.99v-.02A.99.99 0 013.99 9h6.02zm0-3a.99.99 0 01.99.99v.02a.99.99 0 01-.99.99H3.99A.99.99 0 013 7.01v-.02A.99.99 0 013.99 6h6.02zm-5-6A.99.99 0 016 .99v2.02a.99.99 0 01-.99.99h-.02A.99.99 0 014 3.01V.99A.99.99 0 014.99 0h.02zm4 0a.99.99 0 01.99.99v2.02a.99.99 0 01-.99.99h-.02A.99.99 0 018 3.01V.99A.99.99 0 018.99 0h.02z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-tif viewBox="0 0 13 14"><path d="M12 9h-2v1h1v1h-1v2H9V8h3v1zM8 9H7v3h1v1H5v-1h1V9H5V8h3v1zM4 9H3v4H2V9H1V8h3v1zM2 2.5a.5.5 0 01.5-.5H7v2c0 .55.45 1 1 1h3v2H2V2.5zm10.414.914L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v9A2.5 2.5 0 002.5 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-video viewBox="0 0 14 14"><path d="M11.524 0C12.913 0 14 1.055 14 2.401v9.198C14 12.945 12.913 14 11.524 14H2.477C1.088 14 0 12.945 0 11.599V2.401C0 1.055 1.088 0 2.477 0zm.023 2h-9.07a.498.498 0 00-.495.5l.001.5H2l-.008 4L2 11h-.017l-.001.5c0 .275.221.5.495.5h9.047c.051 0 .495-.012.495-.401L12.018 11H12l.009-4L12 3h.018l.001-.599c0-.389-.444-.401-.495-.401zM5 4.884a.5.5 0 01.757-.429l3.528 2.117a.5.5 0 010 .858L5.757 9.546A.5.5 0 015 9.117z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-word viewBox="0 0 14 14"><path d="M12.914 3.414L10.086.586A2 2 0 008.672 0H3A2.5 2.5 0 00.5 2.5v9A2.5 2.5 0 003 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414zM12.5 10h-1V9h-1v3h1v-1h1v1a1 1 0 01-1 1h-1a1 1 0 01-1-1V9a1 1 0 011-1h1a1 1 0 011 1v1zm-4 2a1 1 0 01-1 1h-1a1 1 0 01-1-1V9a1 1 0 011-1h1a1 1 0 011 1v3zm-5-4a1 1 0 011 1v3a1 1 0 01-1 1h-2V8h2zm0 1h-1v3h1V9zm4 0v3h-1V9h1zm0-7v2c0 .55.45 1 1 1h3v2h-9V2.5A.5.5 0 013 2h4.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-vis viewBox="0 0 13 14"><path d="M12 9h-2v1h1a1 1 0 011 1v1a1 1 0 01-1 1H9v-1h2v-1h-1a1 1 0 01-1-1V9a1 1 0 011-1h2v1zM8 9H7v3h1v1H5v-1h1V9H5V8h3v1zm-4 3H3v1H2v-1H1V8h1v3h1V8h1v4zM2 2.5a.5.5 0 01.5-.5H7v2c0 .55.45 1 1 1h3v2H2V2.5zm10.414.914L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v9A2.5 2.5 0 002.5 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-xls viewBox="0 0 13 14"><path d="M12 9h-2v1h1a1 1 0 011 1v1a1 1 0 01-1 1H9v-1h2v-1h-1a1 1 0 01-1-1V9a1 1 0 011-1h2v1zm-4 4H5V8h1v4h2v1zm-4 0H3l-.5-1.25L2 13H1l1-2.5L1 8h1l.5 1.25L3 8h1l-1 2.5L4 13zM2 2.5a.5.5 0 01.5-.5H7v2c0 .55.45 1 1 1h3v2H2V2.5zm10.414.914L9.586.586A2 2 0 008.172 0H2.5A2.5 2.5 0 000 2.5v9A2.5 2.5 0 002.5 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-xml viewBox="0 0 14 14"><path d="M12.5 13h-3V8h1v4h2v1zm-4 0h-1v-3h-1v3h-1V8h1v1h1V8h1v5zm-4 0h-1L3 11.75 2.5 13h-1l1-2.5-1-2.5h1L3 9.25 3.5 8h1l-1 2.5 1 2.5zm-2-10.5A.5.5 0 013 2h4.5v2c0 .55.45 1 1 1h3v2h-9V2.5zm10.414.914L10.086.586A2 2 0 008.672 0H3A2.5 2.5 0 00.5 2.5v9A2.5 2.5 0 003 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-zip viewBox="0 0 14 14"><path d="M8.5 10h-4V8h4v2zm4.414-6.586L10.086.586A2 2 0 008.672 0H6.5v1h2v1h-2v1h2v1h-2v1h2v1h-2v1h-2V6h2V5h-2V4h2V3h-2V2h2V1h-2V0H3A2.5 2.5 0 00.5 2.5v9A2.5 2.5 0 003 14h8a2.5 2.5 0 002.5-2.5V4.828a2 2 0 00-.586-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-truck viewBox="0 0 18 12"><path d="M15.611 3.5H11.5V2.222C11.5 1.179 10.988.5 9.943.5H2.389C1.345.5.5 1.179.5 2.222v6.611c0 .522.423.667.944.667h.944c0 1 .846 1.891 1.889 1.891 1.043 0 1.889-.891 1.889-1.891h5.668c0 1 .846 1.891 1.889 1.891 1.043 0 1.889-.891 1.889-1.891h.945c.521 0 .943-.145.943-.667V5.056c0-1.044-.846-1.556-1.889-1.556zm-1.418 4.389a1.418 1.418 0 11.003-2.835 1.418 1.418 0 01-.003 2.835z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-underline viewBox="0 0 18 18"><path d="M4 2.184C4 1.477 4.462 1 5.184 1c.723 0 1.186.477 1.186 1.184v5.694c0 1.416.794 2.051 2.153 2.051 1.358 0 2.152-.635 2.152-2.05V2.183c0-.707.463-1.184 1.185-1.184.723 0 1.185.477 1.185 1.184V7.69c0 2.861-1.762 4.148-4.522 4.148C5.763 11.838 4 10.55 4 7.69V2.184m1.158 10.31h7.222c.497 0 .903.406.903.903a.905.905 0 01-.903.902H5.158a.905.905 0 01-.903-.902c0-.497.407-.903.903-.903" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-undo viewBox="0 0 18 18"><path d="M.999 15H11c2.757 0 5-2.243 5-5s-2.243-5-5-5H6v1.27c0 .603-.554.946-1.055.58L.424 4.58c-.511-.31-.556-.868-.157-1.16l4.678-2.269C5.446.784 6 1.127 6 1.731v1.27h5c3.86 0 7 3.14 7 7 0 3.858-3.14 7-7 7H.999a.999.999 0 110-2" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-unlink viewBox="0 0 18 18"><path d="M13.5 4h-.4l-.7 2h1.1C14.9 6 16 7.1 16 8.5v1c0 1.4-1.1 2.5-2.5 2.5H11c-.5 0-1 .5-1 1s.5 1 1 1h2.5C16 14 18 12 18 9.5v-1C18 6 16 4 13.5 4zM11 10h1c.5 0 1-.5 1-1s-.5-1-1-1h-.3l-.7 2zm.3-9c-.5-.2-1.1.1-1.3.6L7.8 8H6c-.5 0-1 .5-1 1s.5 1 1 1h1.1l-.7 2H4.5C3.1 12 2 10.9 2 9.5v-1C2 7.1 3.1 6 4.5 6H7c.6 0 1-.4 1-1s-.4-1-1-1H4.5C2 4 0 6 0 8.5v1C0 12 2 14 4.5 14h1.2l-.6 1.7c-.2.5.1 1.1.6 1.3.5.2 1.1-.1 1.3-.6l4.9-14c.2-.6-.1-1.2-.6-1.4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-unlocked viewBox="0 0 18 18"><path d="M13 8V3.8C13 1.74 11.169 0 9 0S5 1.74 5 3.8V5a1 1 0 102 0V3.8C7 2.857 7.953 2 9 2c1.047 0 2 .857 2 1.8V8H5c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2v-6c0-1.1-.9-2-2-2zm-8 2h8v6H5v-6zm4 .5a1.5 1.5 0 011.001 2.617L10 14.5a1 1 0 01-1.993.117L8 14.5v-1.382A1.5 1.5 0 019 10.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-unorderedlist viewBox="0 0 18 18"><path d="M23 .7H8.312v4.549H23V.7zm0 7.172H8.312v4.55H23v-4.55zM8.312 15.044v4.55H23v-4.55H8.312zM3.118.632a2.381 2.381 0 100 4.762 2.381 2.381 0 000-4.762zm0 6.849a2.381 2.381 0 100 4.762 2.381 2.381 0 000-4.762zm0 7.331a2.382 2.382 0 10.002 4.766 2.382 2.382 0 00-.002-4.766z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-unsubscribe viewBox="0 0 18 18"><path d="M9 14a1 1 0 00-1-1H2.5c-.051 0-.5-.012-.5-.401V2.5a.5.5 0 01.5-.5h10a.5.5 0 01.5.5V8a1 1 0 002 0V2.5A2.5 2.5 0 0012.5 0h-10A2.5 2.5 0 000 2.5v10.099C0 13.945 1.098 15 2.5 15H8a1 1 0 001-1zm2-2s0-1 1-1l4 1s1 .031 1 1l-1.242 1.242 1.949 1.965a.999.999 0 010 1.414l-.086.086a.999.999 0 01-1.414 0l-1.949-1.965L13 17s-.692-.033-1-1c-.344-1.078-1-4-1-4zM8.914 7.5l1.793-1.793a.999.999 0 10-1.414-1.414L7.5 6.086 5.707 4.293a.999.999 0 10-1.414 1.414L6.086 7.5 4.293 9.293a.999.999 0 101.414 1.414L7.5 8.914l1.5 1.5a.997.997 0 001.414 0 .999.999 0 000-1.414l-1.5-1.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-up-arrow viewBox="0 0 18 18"><path d="M8.356 2.293l-.062.063-5 5a1 1 0 000 1.414c.39.39 1.026.39 1.417 0l3.297-3.293v9.585a1.001 1.001 0 002 0v-9.71l3.352 3.355A.996.996 0 0015.064 8a.998.998 0 00-.294-.707l-5-5a.999.999 0 00-1.414 0" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-update-preview viewBox="0 0 18 18"><path d="M9.543 16.295l-2.109-2.108c.35-.596.566-1.281.566-2.02 0-2.206-1.794-4-4-4s-4 1.794-4 4 1.794 4 4 4c.739 0 1.424-.216 2.02-.566l2.108 2.109a.99.99 0 001.4 0l.015-.015a.99.99 0 000-1.4zM4 14.167c-1.103 0-2-.897-2-2 0-1.102.897-2 2-2s2 .898 2 2c0 1.103-.897 2-2 2zM17.414 3.414L14.586.586A2 2 0 0013.172 0H6.5A2.5 2.5 0 004 2.5V5a1 1 0 002 0V2.5a.5.5 0 01.5-.5H12v3c0 .55.45 1 1 1h3v10h-3c-.55 0-1 .45-1 1s.45 1 1 1h4c.55 0 1-.45 1-1V4.829c0-.531-.211-1.04-.586-1.415z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-upload-adv viewBox="0 0 35 24"><path d="M30 10.23a8.312 8.312 0 00.259-2.066c0-4.504-3.553-8.153-7.932-8.153-3.294 0-6.121 2.063-7.318 5.003-1.03-1.246-2.565-2.037-4.279-2.037-3.1 0-5.614 2.586-5.614 5.773 0 .547.075 1.079.215 1.581-2.533.953-4.337 3.452-4.337 6.389 0 3.753 2.958 6.802 6.616 6.802h8.633v-5.731h-3.565l5.466-6.806 5.464 6.806h-3.565v5.731h7.964c3.66 0 6.618-3.049 6.618-6.802 0-3.044-1.94-5.62-4.625-6.49z" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-url viewBox="0 0 18 18"><path d="M9 0C4.037 0 0 4.037 0 9s4.037 9 9 9 9-4.037 9-9-4.037-9-9-9zm7 9c0 1.074-.25 2.089-.685 3H11c-1.016 0-1-1-1-1 0-.55-.45-1-1-1H7.167l-.081.017L7 10c-.55 0-1-.45-1-1s.45-1 1-1v-.006L9 8c.55 0 1-.45 1-1 0 0 0-1 1-1h1c.55 0 1-.45 1-1V3.264A6.993 6.993 0 0116 9zM2 9c0-.337.032-.666.078-.99C2.992 8.066 3 9 3 9c0 .55.45 1 1 1 0 0 1 .021 1 1v1c0 .55.45 1 1 1 1 0 1 1 1 1v1.705C4.113 14.842 2 12.164 2 9z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-user-avatar-dark viewBox="0 0 32 32"><g fill-rule=evenodd><path fill=#78797D d="M0 0h32v32H0z" stroke=none></path><g transform="translate(5 5)"><circle cx=11 cy=6.4 r=6.4></circle><path d="M21.3 27c.2-.4.3-.9.3-1.5l-1-8.3c-.2-1.4-1.4-2.5-2.8-2.5H4.2c-1.4 0-2.7 1.1-2.8 2.5l-1 8.3c-.1.6 0 1.1.3 1.5h20.6z"></path></g></g></symbol> <symbol id=icon-user-avatar viewBox="0 0 32 32"><g fill-rule=evenodd><path fill=#DDD d="M0 0h32v32H0z" stroke=none></path><g transform="translate(5 5)"><circle cx=11 cy=6.4 r=6.4></circle><path d="M21.3 27c.2-.4.3-.9.3-1.5l-1-8.3c-.2-1.4-1.4-2.5-2.8-2.5H4.2c-1.4 0-2.7 1.1-2.8 2.5l-1 8.3c-.1.6 0 1.1.3 1.5h20.6z"></path></g></g></symbol> <symbol id=icon-user-clock viewBox="0 0 18 18"><g fill-rule=evenodd><path d="M8.257 7.328a6.356 6.356 0 012.235-1.546 3.7 3.7 0 00.626-2.065A3.711 3.711 0 007.412 0a3.712 3.712 0 00-3.706 3.717 3.711 3.711 0 003.706 3.717c.292 0 .573-.042.845-.106zm-1.004 1.41C3.233 8.824 0 12.112 0 16.165 0 16.165 0 18 2.118 18h9.98a6.37 6.37 0 01-5.568-6.318 6.35 6.35 0 01.723-2.944zm5.982-1.835c-2.627 0-4.764 2.144-4.764 4.78 0 2.634 2.137 4.778 4.764 4.778 2.627 0 4.765-2.144 4.765-4.779s-2.138-4.779-4.765-4.779zm.045 8.218a3.51 3.51 0 01-3.5-3.51 3.51 3.51 0 013.5-3.511 3.51 3.51 0 013.5 3.51 3.51 3.51 0 01-3.5 3.511z" fill=currentColor fill-rule=nonzero stroke=none></path><path stroke=currentColor stroke-width=1.25 stroke-linecap=round stroke-linejoin=round d="M13.2 10v1.916l1 1.084" vector-effect=non-scaling-stroke></path></g></symbol> <symbol id=icon-upload viewBox="0 0 18 18"><path d="M1 5a1 1 0 01-1-1V2.401C0 1.055 1.098 0 2.5 0h13C16.902 0 18 1.055 18 2.401V4a1 1 0 11-2 0V2.401c0-.389-.449-.401-.5-.401h-13c-.051 0-.5.012-.5.401V4a1 1 0 01-1 1m8.707-.77l.062.063h.001l4.999 5a.999.999 0 010 1.414 1.037 1.037 0 01-1.445 0L10 7.414V17a1 1 0 11-2 0V7.289l-3.324 3.355a.98.98 0 01-1.399 0 1.005 1.005 0 01.012-1.414l5.002-5a1.003 1.003 0 011.416 0" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-user-folder-closed viewBox="0 0 18 18"><path d="M6.586 2H4a2 2 0 00-2 2v1h14a2 2 0 00-2-2H8l-.707-.707A.997.997 0 006.586 2M6 12c1.76 0 3.415 1.136 3.95 2.715.215.633-.294 1.285-.962 1.285H3.012c-.668 0-1.177-.652-.962-1.285C2.585 13.136 4.24 12 6 12zm10-5v7a2 2 0 01-2 2h-2.173a2.97 2.97 0 00.133-.531l.007-.064c.03-.209.035-.419.02-.63l-.002-.029a2.788 2.788 0 00-.128-.673c-.43-1.266-1.311-2.321-2.429-3.044.089-.149.169-.304.239-.464l.026-.071c.058-.138.112-.279.154-.424l.022-.098.092-.425C9.987 9.369 10 9.186 10 9c0-.732-.212-1.409-.556-2H16zM6 7a2 2 0 11.001 3.999A2 2 0 016 7z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-user-folder-open viewBox="0 0 18 18"><path d="M6.586 2H4a2 2 0 00-2 2v1h13a2 2 0 00-2-2H8l-.707-.707A.997.997 0 006.586 2zM8 9a2 2 0 11-3.999.001A2 2 0 018 9zm.988 7c.668 0 1.177-.652.962-1.285C9.415 13.136 7.76 12 6 12c-1.76 0-3.415 1.136-3.95 2.715-.215.633.294 1.285.962 1.285h5.976zM2 4v2.1c0 .5.098.745.3.8.327.067.5-.1.8-.9.2-.6.8-1 1.4-1L2 4zm12.4 3H9.444c.344.591.556 1.268.556 2a3.96 3.96 0 01-.574 2.033c1.113.722 1.99 1.776 2.419 3.041.213.63.19 1.308-.03 1.926H12c.9 0 1.7-.5 2-1.3L15.9 9c.4-1-.4-2-1.5-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-user-profile viewBox="0 0 18 18"><path d="M9 0a9 9 0 00-9 9 9 9 0 009 9 9 9 0 009-9 9 9 0 00-9-9zm2.501 7.052a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm-2.5 3.371c2.294 0 4.208 1.554 4.796 3.661a6.961 6.961 0 01-9.592.002c.588-2.109 2.501-3.663 4.796-3.663z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-user-status-away viewBox="0 0 14 14"><g fill-rule=evenodd><path d="M7 0C3.14 0 0 3.14 0 7s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7" fill=#FFD726 stroke=none></path><path d="M7.389 4.667a.778.778 0 10-1.556 0V7c0 .207.082.404.228.55l1.556 1.556a.775.775 0 001.1 0 .777.777 0 000-1.1L7.389 6.678V4.667z" fill=#FFF stroke=none></path></g></symbol> <symbol id=icon-user-status-busy viewBox="0 0 15 14"><path d="M7.249 0c-3.86 0-7 3.14-7 7s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7" fill=#E84F4F fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-user-status-available viewBox="0 0 15 15"><g fill-rule=evenodd><path d="M7.696.197a7.105 7.105 0 100 14.21 7.105 7.105 0 000-14.21" fill=#80CE4D stroke=none></path><path d="M6.956 10.461a.79.79 0 01-.555-.227l-1.628-1.58a.788.788 0 01-.007-1.116.788.788 0 011.116-.007l1.069 1.026 3.343-3.389a.79.79 0 011.121 1.113l-3.898 3.947a.793.793 0 01-.561.233" fill=#FFF stroke=none></path></g></symbol> <symbol id=icon-user-status-unknown viewBox="0 0 14 14"><path d="M7 0C3.14 0 0 3.14 0 7s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7" fill=#ABAEB7 fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-user viewBox="0 0 18 18"><path d="M16 16.221a7 7 0 10-14 0s0 1.728 2 1.728h10c2 0 2-1.728 2-1.728M9 8a3.5 3.5 0 110-7 3.5 3.5 0 010 7" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-user-status-do-not-disturb viewBox="0 0 19 18"><g fill-rule=evenodd><path d="M9.498 0c-4.963 0-9 4.037-9 9s4.037 9 9 9 9-4.037 9-9-4.037-9-9-9" fill=#E84F4F stroke=none></path><rect fill=#FFF x=4.998 y=8 width=9 height=2 rx=1 stroke=none></rect></g></symbol> <symbol id=icon-utilities viewBox="0 0 18 16"><path d="M14 10v1h-2v-1H6v1H4v-1H0v3.5A2.5 2.5 0 002.5 16h13a2.5 2.5 0 002.5-2.5V10h-4zM4 8V7h2v1h6V7h2v1h4V6.5A2.5 2.5 0 0015.5 4H13V2.5C13 1.125 11.875 0 10.5 0h-3A2.507 2.507 0 005 2.5V4H2.5A2.5 2.5 0 000 6.5V8h4zm3-5.5c0-.271.229-.5.5-.5h3c.271 0 .5.229.5.5V4H7V2.5z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-vertical-align-center viewBox="0 0 18 18"><path d="M14 4.5C14 3.121 12.879 2 11.5 2h-5A2.502 2.502 0 004 4.5C4 5.879 5.121 7 6.5 7h5C12.879 7 14 5.879 14 4.5M10 9V.99A.99.99 0 009.01 0h-.02A.99.99 0 008 .99V9h2m0 8.01V16H8v1.01c0 .547.443.99.99.99h.02a.99.99 0 00.99-.99M14.5 11c.275 0 .5.225.5.5v2c0 .275-.225.5-.5.5h-11a.501.501 0 01-.5-.5v-2c0-.275.225-.5.5-.5h11m0-2h-11A2.502 2.502 0 001 11.5v2C1 14.879 2.121 16 3.5 16h11c1.378 0 2.5-1.121 2.5-2.5v-2c0-1.379-1.122-2.5-2.5-2.5" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-warehouse viewBox="0 0 19 18"><path d="M4.069 18a2 2 0 01-2-2v-2a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2zm8 0a2 2 0 01-2-2v-2a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2zm-4-7a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2zm9 7h-16c-.55 0-1-.45-1-1s.45-1 1-1h16c.55 0 1 .45 1 1s-.45 1-1 1zm.708-12.706L10.706.223A.96.96 0 0010.332 0H7.736a.963.963 0 00-.373.223L.292 5.294a1.003 1.003 0 000 1.414 1.003 1.003 0 001.414 0L8.414 2h1.241l6.708 4.708a1.003 1.003 0 001.414 0 1.003 1.003 0 000-1.414z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-visual viewBox="0 0 57 18"><path d="M19.937 3c2.038 0 4.441 1.146 4.441 2.674 0 .652-.557 1.034-1.193 1.034-1.21 0-.988-1.703-3.423-1.703-1.209 0-1.877.557-1.877 1.353 0 .796.955 1.051 1.782 1.241l2.181.494c2.387.541 2.992 1.957 2.992 3.294 0 2.069-1.56 3.613-4.711 3.613-3.311 0-4.791-1.655-4.791-2.896 0-.637.461-1.083 1.098-1.083 1.417 0 1.051 2.069 3.693 2.069 1.352 0 2.101-.748 2.101-1.512 0-.461-.223-.97-1.114-1.193l-2.944-.748c-2.373-.605-2.802-1.91-2.802-3.136C15.37 3.955 17.725 3 19.937 3zm-7.494.063c.795 0 1.305.525 1.305 1.305v9.263c0 .78-.51 1.305-1.305 1.305-.796 0-1.305-.525-1.305-1.305V4.368c0-.78.509-1.305 1.305-1.305zm13.586 1.305c0-.78.509-1.305 1.305-1.305.796 0 1.304.525 1.304 1.305v6.271c0 1.559.876 2.26 2.373 2.26 1.495 0 2.371-.701 2.371-2.26V4.368c0-.78.509-1.305 1.305-1.305.796 0 1.305.525 1.305 1.305v6.064c0 3.151-1.942 4.568-4.981 4.568-3.041 0-4.982-1.417-4.982-4.568V4.368zm14.304-.51c.222-.589.636-.796 1.273-.796h.621c.588 0 1.114.143 1.4.955l3.151 8.77c.096.254.255.716.255 1.002 0 .637-.556 1.146-1.225 1.146-.573 0-.987-.207-1.178-.716l-.669-1.91h-4.202l-.683 1.91c-.175.509-.542.716-1.162.716-.716 0-1.21-.446-1.21-1.146 0-.286.16-.748.255-1.002l3.374-8.929zm1.576 2.037h-.032l-1.544 4.6h3.055l-1.479-4.6zM8.707 3.063c.652 0 1.32.286 1.32 1.162 0 .207-.048.461-.159.764l-3.31 9.04c-.271.748-.781.907-1.592.907-.812 0-1.321-.159-1.591-.907L.16 4.989A2.247 2.247 0 010 4.225c0-.876.669-1.162 1.321-1.162.701 0 1.083.366 1.322 1.146l2.355 7.799h.032l2.45-7.799c.239-.78.621-1.146 1.227-1.146zm40.743 0c.795 0 1.305.525 1.305 1.305v8.165h4.36c.749 0 1.354.382 1.354 1.098 0 .716-.605 1.098-1.354 1.098h-5.442c-.923 0-1.528-.366-1.528-1.528V4.368c0-.78.509-1.305 1.305-1.305z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-workflow viewBox="0 0 18 16"><path d="M17 12.277V10.5C17 8.57 15.43 7 13.5 7H10V3.723A1.994 1.994 0 009 0a1.994 1.994 0 00-1 3.723V7H4.5C1.932 7 1 9.093 1 10.5v1.777A1.994 1.994 0 002 16a1.994 1.994 0 001-3.723V10.5c0-.25.072-1.5 1.5-1.5H8v3.277A1.994 1.994 0 009 16a1.994 1.994 0 001-3.723V9h3.5c.827 0 1.5.673 1.5 1.5v1.777A1.994 1.994 0 0016 16a1.994 1.994 0 001-3.723" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-wrench viewBox="0 0 14 14"><path d="M13.515 11.153l-4.6-4.6c.3-.7.5-1.4.4-2.2-.2-2.8-2.9-4.7-5.5-4.3-.6.1-.8.9-.4 1.3l1.1 1.1c.8.8 1.9 1.8.9 2.9-1 1.1-2.1.2-2.9-.6l-1.2-1.2c-.5-.5-1.3-.1-1.3.5-.2 2.5 1.6 4.8 4.2 5.1.8.1 1.6-.1 2.3-.4l4.6 4.6c.6.6 1.6.6 2.2 0l.1-.1c.7-.5.7-1.5.1-2.1" fill=currentColor fill-rule=evenodd stroke=none></path></symbol> <symbol id=icon-zoom-fit viewBox="0 0 18 18"><path d="M1 5a1 1 0 01-1-1V2C0 .897.897 0 2 0h2a1 1 0 110 2H2v2a1 1 0 01-1 1m16 0a1 1 0 01-1-1V2h-2a1 1 0 110-2h2c1.103 0 2 .897 2 2v2a1 1 0 01-1 1m-1 13h-2a1 1 0 110-2h2v-2a1 1 0 112 0v2c0 1.103-.897 2-2 2M4 18H2c-1.103 0-2-.897-2-2v-2a1 1 0 112 0v2h2a1 1 0 110 2m4-8c-1.102 0-2-.898-2-2 0-1.103.898-2 2-2 1.102 0 2 .897 2 2 0 1.102-.898 2-2 2m5.71 2.295l-2.276-2.276C11.784 9.424 12 8.739 12 8c0-2.206-1.794-4-4-4S4 5.794 4 8s1.794 4 4 4c.739 0 1.424-.216 2.019-.566l2.276 2.276a.99.99 0 001.4 0l.015-.015a.99.99 0 000-1.4" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-zoom-100 viewBox="0 0 17 17"><path d="M16.414 15l-3.815-3.816A6.954 6.954 0 0014 7c0-3.86-3.141-7-7-7S0 3.14 0 7s3.141 7 7 7a6.958 6.958 0 004.185-1.402L15 16.414a.997.997 0 001.414 0 .999.999 0 000-1.414M7 12c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5m0-8c.55 0 1 .45 1 1v3c.55 0 1 .45 1 1s-.45 1-1 1H6c-.55 0-1-.45-1-1s.45-1 1-1V6.694a.994.994 0 01-.56-.281 1.003 1.003 0 010-1.414l.706-.707a.999.999 0 01.788-.289L7 4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-zoom-in viewBox="0 0 17 17"><path d="M16.414 15l-3.815-3.816A6.954 6.954 0 0014 7c0-3.86-3.141-7-7-7S0 3.14 0 7s3.141 7 7 7a6.958 6.958 0 004.185-1.402L15 16.414a.997.997 0 001.414 0 .999.999 0 000-1.414zM7 12c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5zm2-6H8V5a1 1 0 00-2 0v1H5a1 1 0 000 2h1v1a1 1 0 002 0V8h1a1 1 0 000-2z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-zoom-out viewBox="0 0 17 17"><path d="M16.414 15l-3.815-3.816A6.954 6.954 0 0014 7c0-3.86-3.141-7-7-7S0 3.14 0 7s3.141 7 7 7a6.958 6.958 0 004.185-1.402L15 16.414a.997.997 0 001.414 0 .999.999 0 000-1.414zM7 12c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5zm1-4h1a1 1 0 000-2H5a1 1 0 000 2h3z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-shared-folder-open viewBox="0 0 15 15"><path d="M12.9 4.5h-8c-.91 0-1.71.56-2 1.46L.6 12.25c-.4 1.13.4 2.25 1.5 2.25h8.4c.9 0 1.69-.56 2-1.46l1.9-6.29c.39-1.13-.4-2.25-1.5-2.25zM6.25 9.47l-.03.28 2.959 1.38c.25-.24.58-.38.94-.38.76 0 1.38.62 1.38 1.37 0 .76-.62 1.38-1.38 1.38-.75 0-1.37-.62-1.37-1.38l.02-.2-3.01-1.41c-.24.21-.54.33-.88.33-.76 0-1.38-.59-1.38-1.35 0-.76.62-1.4 1.38-1.4.36 0 .69.15.93.38L8.77 7.1l-.02-.22c0-.76.62-1.38 1.37-1.38.76 0 1.38.62 1.38 1.38 0 .75-.62 1.37-1.38 1.37-.36 0-.68-.14-.93-.37L6.23 9.25l.02.22zm.844-6.97c-.399 0-.699-.2-.899-.6l-.3-.6C5.594.8 5.094.5 4.594.5h-2.1c-1.1 0-1.995.9-1.995 2L.5 4.574c0 .5.096.746.297.801.328.066.499-.101.8-.901.199-.6.798-1 1.398-1H12.5s.188-.974-1.751-.974H7.094z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-barcode viewBox="0 0 18 18"><path d="M1 5a1 1 0 01-1-1V2C0 .897.897 0 2 0h2a1 1 0 110 2H2v2a1 1 0 01-1 1zm16 0a1 1 0 01-1-1V2h-2a1 1 0 110-2h2c1.103 0 2 .897 2 2v2a1 1 0 01-1 1zm-1 13h-2a1 1 0 110-2h2v-2a1 1 0 112 0v2c0 1.103-.897 2-2 2zM4 18H2c-1.103 0-2-.897-2-2v-2a1 1 0 112 0v2h2a1 1 0 110 2zm5-4h3V4H9v10zm-2 0h1V4H7v10zM6 4v10H5a1 1 0 01-1-1V5a1 1 0 011-1h1zm7 0a1 1 0 011 1v8a1 1 0 01-1 1V4z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-quick-access viewBox="0 0 15 16"><path d="M1 4h4v1.269c0 .604.887.947 1.362.58L9.69 3.58c.378-.292.429-.868.051-1.16L6.337.152C5.861-.215 5 .127 5 .731V2H1a1 1 0 100 2zm11.5-4H9.716l1.134.755.058.04.055.042A2.659 2.659 0 0112 2.957c0 .855-.406 1.68-1.087 2.206l-.047.037-.049.033L9.691 6H13v7.5c0 .275-.225.5-.5.5h-10a.501.501 0 01-.5-.5V7a1 1 0 00-2 0v6.5A2.5 2.5 0 002.5 16h10a2.5 2.5 0 002.5-2.5v-11A2.5 2.5 0 0012.5 0z" fill=currentColor fill-rule=nonzero stroke=none></path></symbol> <symbol id=icon-tree-expenses viewBox="0 0 14 14"><path d="M9.51 8H6.5a.99.99 0 01-.99-.99L5.5 7c0-.547.453-1 1-1h3.01a.99.99 0 01.99.99v.02a.99.99 0 01-.99.99M3.5 3.01V3c0-.547.443-1 .99-1h5.02a.99.99 0 01.99.99v.02a.99.99 0 01-.99.99H4.49a.99.99 0 01-.99-.99M10 0H4a2.503 2.503 0 00-2.5 2.5v10.51c0 .547.444.99.99.99h.02a.99.99 0 00.99-.99v-1.061c.162.033.329.051.5.051h.5v1.01c0 .547.444.99.99.99h.02a.99.99 0 00.99-.99V12h1v1.01c0 .547.444.99.99.99h.02a.99.99 0 00.99-.99V12h.5c.171 0 .339-.018.5-.051v1.061c0 .547.444.99.99.99h.02a.99.99 0 00.99-.99V2.5C12.5 1.121 11.379 0 10 0" fill=currentColor fill-rule=nonzero stroke=none></path></symbol></svg></div>'}}]);
//# sourceMappingURL=ab-ids-enterprise.js.map