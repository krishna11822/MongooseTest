{"version":3,"sources":["webpack:///D:/Program Files (x86)/Jenkins/workspace/APPBUILDER-MONGOOSE-CLIENT-2-BUILD/server/server-gar/node_modules/html2canvas/dist/html2canvas.js"],"names":["module","exports","e","t","n","r","s","o","u","i","f","Error","code","l","call","length","1","_dereq_","Support","CanvasRenderer","ImageLoader","NodeParser","NodeContainer","log","utils","createWindowClone","loadUrlDocument","getBounds","html2canvasCloneIndex","html2canvas","nodeList","options","index","logging","start","Date","now","async","allowTaint","removeContainer","javascriptEnabled","imageTimeout","renderer","strict","Promise","reject","width","window","innerWidth","height","innerHeight","absoluteUrl","url","link","document","createElement","href","proxy","then","container","renderWindow","contentWindow","documentElement","node","undefined","setAttribute","renderDocument","windowWidth","windowHeight","html2canvasIndex","defaultView","pageXOffset","pageYOffset","attributeName","selector","querySelector","removeAttribute","clonedWindow","resolve","onclone","ownerDocument","canvas","onrendered","html2canvasExport","Object","support","imageLoader","bounds","type","documentWidth","doc","Math","max","body","scrollWidth","offsetWidth","clientWidth","documentHeight","scrollHeight","offsetHeight","clientHeight","ready","crop","top","left","x","y","cleanupContainer","parentNode","removeChild","croppedCanvas","x1","min","x2","y1","y2","getContext","drawImage","2","global","root","freeExports","nodeType","freeModule","freeGlobal","self","punycode","key","maxInt","regexPunycode","regexNonASCII","regexSeparators","errors","floor","stringFromCharCode","String","fromCharCode","error","RangeError","map","array","fn","result","mapDomain","string","parts","split","replace","join","ucs2decode","value","extra","output","counter","charCodeAt","push","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","baseMinusTMin","base","decode","input","out","basic","j","oldi","w","baseMinusT","codePoint","inputLength","bias","lastIndexOf","splice","encode","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","toASCII","test","toUnicode","slice","toLowerCase","hasOwnProperty","this","3","cloneNode","clone","createTextNode","nodeValue","child","firstChild","nodeName","appendChild","nextSibling","_scrollTop","scrollTop","_scrollLeft","scrollLeft","cloneCanvasContents","clonedCanvas","putImageData","getImageData","containerDocument","className","style","visibility","position","border","scrolling","documentClone","onload","interval","setInterval","childNodes","initNode","clearInterval","scrollTo","navigator","userAgent","scrollY","scrollX","open","write","restoreOwnerScroll","replaceChild","adoptNode","close","4","Color","g","b","a","fromArray","namedColor","rgb","rgba","hex6","hex3","prototype","darken","amount","round","isTransparent","isBlack","Array","isArray","_hex3","match","parseInt","_hex6","substring","_rgb","Number","_rgba","toString","color","colors","isColor","5","smallImage","DummyImageContainer","src","promise","image","Image","onerror","complete","6","Font","family","size","baseline","middle","img","span","fontFamily","fontSize","margin","padding","verticalAlign","offsetTop","lineHeight","lineWidth","7","FontMetrics","data","getMetrics","8","FrameContainer","sameOrigin","URL","proxyLoad","9","GradientContainer","imageData","colorStops","x0","y0","TYPES","LINEAR","RADIAL","REGEXP_COLORSTOP","10","ImageContainer","cors","tainted","crossOrigin","11","ProxyImageContainer","SVGContainer","SVGNodeContainer","LinearGradientContainer","WebkitGradientContainer","bind","origin","getOrigin","location","findImages","nodes","images","reduce","imageNodes","concat","args","method","forEach","addImage","loadImage","findBackgroundImage","parseBackgroundImages","filter","hasImageBackground","callback","newImage","imageExists","isSVG","svg","isSameOrigin","useCORS","isInline","some","protocol","hostname","port","getPromise","timeout","get","found","fetch","all","timer","race","res","setTimeout","clearTimeout","12","apply","arguments","hasDirection","REGEXP_DIRECTION","reverse","ratio","parseFloat","isNaN","colorStop","colorStopMatch","unit","stop","find","count","create","13","logger","console","Function","14","parseBackgrounds","offsetBounds","parent","stack","borders","clip","backgroundClip","visible","computedStyles","styles","backgroundImages","transformData","transformMatrix","isPseudoElement","opacity","isPercentage","indexOf","removePx","str","asFloat","cloneTo","getOpacity","cssFloat","assignStack","children","isElementVisible","Node","TEXT_NODE","css","hasAttribute","getAttribute","attribute","computedStyle","before","prefixedCss","prefix","substr","toUpperCase","getComputedStyle","cssInt","fontWeight","weight","parseClip","matches","CLIP","right","bottom","cssList","property","trim","parseBackgroundSize","targetRatio","currentRatio","parseBackgroundPosition","backgroundSize","parseBackgroundRepeat","parseTextShadows","textShadow","results","shadows","TEXT_SHADOW_PROPERTY","TEXT_SHADOW_VALUES","offsetX","offsetY","blur","parseTransform","hasTransform","offset","parseBounds","matrix","parseTransformMatrix","transform","parseMatrix","matrix3d","MATRIX_PROPERTY","getValue","tagName","selectionValue","option","selectedIndex","text","placeholder","15","TextContainer","PseudoElementContainer","StackingContext","element","range","renderQueue","background","rectangle","canvasBackground","visibile","createPseudoHideStyles","disableAnimations","flatten","getChildren","getPseudoElements","fontMetrics","calculateOverflowClips","isElement","createStackingContexts","sortStackingContexts","parse","renderIndex","asyncRenderer","paint","hasParentClip","ClearTransform","appendToDOM","parseBorders","cssClip","cleanDOM","isTextNode","queue","asyncTimer","createStyles","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","hidePseudoElements","innerHTML","ELEMENT_NODE","getPseudoElement","after","content","display","stripQuotes","first","isImage","pseudoNode","pseudoContainer","item","parentContainer","renderableNode","nonIgnoredElement","newStackingContext","hasOwnStacking","getParentStack","contexts","isRootElement","hasOpacity","isPositionedForStacking","isBodyWithTransparentRoot","isPositioned","zIndex0","isInlineBlock","isFloating","sort","zIndexSort","parseTextBounds","textList","rangeBounds","getRangeBounds","replacementNode","splitText","getWrapperBounds","wrapper","backupText","createRange","setStart","setEnd","getBoundingClientRect","negativeZindex","negativeZIndex","descendantElements","descendantNonFloats","not","nonInlineNonPositionedDescendants","inlineLevel","nonPositionedFloats","inFlow","stackLevel0","hasText","positiveZindex","positiveZIndex","isStackingContext","ctx","restore","paintText","paintNode","setOpacity","save","setTransform","paintCheckbox","paintRadio","paintElement","renderBackground","getWidth","renderBorders","imgContainer","renderImage","imageContainer","paintFormValue","radius","borderPoints","calculateCurvePoints","calculateBorders","checked","font","circleStroke","circle","ceil","message","textContent","applyTextTransform","characters","ucs2","letterRendering","noLetterSpacing","hasUnicode","character","getWords","word","characterCode","words","onWordBoundary","fontShadow","clearShadow","renderTextDecoration","metrics","borderColorTransforms","inset","nodeBounds","borderSide","bx","by","bw","bh","drawSide","c1","c2","c3","c4","topLeftOuter","topLeftInner","topRightOuter","topRightInner","bottomRightOuter","bottomRightInner","bottomLeftOuter","bottomLeftInner","getCurvePoints","r1","r2","kappa","sqrt","ox","oy","xm","ym","topLeft","bezierCurve","topRight","bottomRight","bottomLeft","borderRadius","tlh","tlv","trh","trv","brh","brv","blh","blv","topWidth","rightHeight","bottomWidth","leftHeight","subdivide","startControl","endControl","end","lerp","ab","bc","cd","abbc","bccd","dest","curveTo","borderArgs","curveToReversed","borderData","radius1","radius2","outer1","inner1","outer2","inner2","parseCorner","corner1","corner2","context","asInt","nodeContainer","arrays","getBorderRadiusData","side","arr","colorTransform","parseBackgroundClip","16","XHR","decode64","Proxy","proxyUrl","supportsCORS","XMLHttpRequest","createCallback","createProxyUrl","jsonp","response","proxyCount","cleanup","random","encodeURIComponent","documentFromHTML","html","parser","DOMParser","parseFromString","implementation","createHTMLDocument","ee","host","head","insertBefore","ProxyURL","supportsCORSImage","17","18","getHideClass","19","Renderer","paddingLeft","paddingTop","paddingRight","paddingBottom","renderBackgroundColor","renderBackgroundImage","renderBorder","drawShape","backgroundImage","renderBackgroundRepeating","gradientImage","renderBackgroundGradient","backgroundRepeatShape","renderBackgroundRepeat","20","taintCtx","textBaseline","variables","hasEntries","setFillStyle","fillStyle","fillRect","beginPath","arc","PI","closePath","fill","stroke","strokeColor","strokeStyle","shape","taints","sx","sy","sw","sh","dx","dy","dw","dh","shapes","point","rect","variant","setVariable","globalAlpha","translate","fillText","backgroundPosition","borderLeft","borderTop","createPattern","resizeImage","gradient","createLinearGradient","addColorStop","21","ownStacking","parentStack","22","testRangeBounds","testCORS","testSVG","testElement","selectNode","toDataURL","23","hasFabric","inlineFormatting","fabric","loadSVGFromString","createCanvas","removeContentType","objects","StaticCanvas","lowerCanvasEl","setWidth","setHeight","add","util","groupSVGElements","renderAll","atob","24","_native","XMLSerializer","serializeToString","parseSVGDocument","25","capitalize","p1","p2","26","base64","encoded2","encoded3","encoded4","byte1","byte2","byte3","chars","len","clientRect","offsetParent","offsetLeft","definition","prefix_i","block","quote","mode","numParen","appendResult","c","27","28","xhr","status","responseText","statusText","send"],"mappings":"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","file":"html2canvas.js","sourcesContent":["/*\r\n  html2canvas 0.5.0-beta5 <http://html2canvas.hertzen.com>\r\n  Copyright (c) 2017 Niklas von Hertzen\r\n\r\n  Released under  License\r\n*/\r\n\r\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.html2canvas = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\r\nvar Support = _dereq_('./support');\r\nvar CanvasRenderer = _dereq_('./renderers/canvas');\r\nvar ImageLoader = _dereq_('./imageloader');\r\nvar NodeParser = _dereq_('./nodeparser');\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\nvar log = _dereq_('./log');\r\nvar utils = _dereq_('./utils');\r\nvar createWindowClone = _dereq_('./clone');\r\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\r\nvar getBounds = utils.getBounds;\r\n\r\nvar html2canvasNodeAttribute = \"data-html2canvas-node\";\r\nvar html2canvasCloneIndex = 0;\r\n\r\nfunction html2canvas(nodeList, options) {\r\n    var index = html2canvasCloneIndex++;\r\n    options = options || {};\r\n    if (options.logging) {\r\n        log.options.logging = true;\r\n        log.options.start = Date.now();\r\n    }\r\n\r\n    options.async = typeof(options.async) === \"undefined\" ? true : options.async;\r\n    options.allowTaint = typeof(options.allowTaint) === \"undefined\" ? false : options.allowTaint;\r\n    options.removeContainer = typeof(options.removeContainer) === \"undefined\" ? true : options.removeContainer;\r\n    options.javascriptEnabled = typeof(options.javascriptEnabled) === \"undefined\" ? false : options.javascriptEnabled;\r\n    options.imageTimeout = typeof(options.imageTimeout) === \"undefined\" ? 10000 : options.imageTimeout;\r\n    options.renderer = typeof(options.renderer) === \"function\" ? options.renderer : CanvasRenderer;\r\n    options.strict = !!options.strict;\r\n\r\n    if (typeof(nodeList) === \"string\") {\r\n        if (typeof(options.proxy) !== \"string\") {\r\n            return Promise.reject(\"Proxy must be used when rendering url\");\r\n        }\r\n        var width = options.width != null ? options.width : window.innerWidth;\r\n        var height = options.height != null ? options.height : window.innerHeight;\r\n        return loadUrlDocument(absoluteUrl(nodeList), options.proxy, document, width, height, options).then(function(container) {\r\n            return renderWindow(container.contentWindow.document.documentElement, container, options, width, height);\r\n        });\r\n    }\r\n\r\n    var node = ((nodeList === undefined) ? [document.documentElement] : ((nodeList.length) ? nodeList : [nodeList]))[0];\r\n    node.setAttribute(html2canvasNodeAttribute + index, index);\r\n    return renderDocument(node.ownerDocument, options, node.ownerDocument.defaultView.innerWidth, node.ownerDocument.defaultView.innerHeight, index).then(function(canvas) {\r\n        if (typeof(options.onrendered) === \"function\") {\r\n            log(\"options.onrendered is deprecated, html2canvas returns a Promise containing the canvas\");\r\n            options.onrendered(canvas);\r\n        }\r\n        return canvas;\r\n    });\r\n}\r\n\r\nhtml2canvas.CanvasRenderer = CanvasRenderer;\r\nhtml2canvas.NodeContainer = NodeContainer;\r\nhtml2canvas.log = log;\r\nhtml2canvas.utils = utils;\r\n\r\nvar html2canvasExport = (typeof(document) === \"undefined\" || typeof(Object.create) !== \"function\" || typeof(document.createElement(\"canvas\").getContext) !== \"function\") ? function() {\r\n    return Promise.reject(\"No canvas support\");\r\n} : html2canvas;\r\n\r\nmodule.exports = html2canvasExport;\r\n\r\nif (typeof(define) === 'function' && define.amd) {\r\n    define('html2canvas', [], function() {\r\n        return html2canvasExport;\r\n    });\r\n}\r\n\r\nfunction renderDocument(document, options, windowWidth, windowHeight, html2canvasIndex) {\r\n    return createWindowClone(document, document, windowWidth, windowHeight, options, document.defaultView.pageXOffset, document.defaultView.pageYOffset).then(function(container) {\r\n        log(\"Document cloned\");\r\n        var attributeName = html2canvasNodeAttribute + html2canvasIndex;\r\n        var selector = \"[\" + attributeName + \"='\" + html2canvasIndex + \"']\";\r\n        document.querySelector(selector).removeAttribute(attributeName);\r\n        var clonedWindow = container.contentWindow;\r\n        var node = clonedWindow.document.querySelector(selector);\r\n        var oncloneHandler = (typeof(options.onclone) === \"function\") ? Promise.resolve(options.onclone(clonedWindow.document)) : Promise.resolve(true);\r\n        return oncloneHandler.then(function() {\r\n            return renderWindow(node, container, options, windowWidth, windowHeight);\r\n        });\r\n    });\r\n}\r\n\r\nfunction renderWindow(node, container, options, windowWidth, windowHeight) {\r\n    var clonedWindow = container.contentWindow;\r\n    var support = new Support(clonedWindow.document);\r\n    var imageLoader = new ImageLoader(options, support);\r\n    var bounds = getBounds(node);\r\n    var width = options.type === \"view\" ? windowWidth : documentWidth(clonedWindow.document);\r\n    var height = options.type === \"view\" ? windowHeight : documentHeight(clonedWindow.document);\r\n    var renderer = new options.renderer(width, height, imageLoader, options, document);\r\n    var parser = new NodeParser(node, renderer, support, imageLoader, options);\r\n    return parser.ready.then(function() {\r\n        log(\"Finished rendering\");\r\n        var canvas;\r\n\r\n        if (options.type === \"view\") {\r\n            canvas = crop(renderer.canvas, {width: renderer.canvas.width, height: renderer.canvas.height, top: 0, left: 0, x: 0, y: 0});\r\n        } else if (node === clonedWindow.document.body || node === clonedWindow.document.documentElement || options.canvas != null) {\r\n            canvas = renderer.canvas;\r\n        } else {\r\n            canvas = crop(renderer.canvas, {width:  options.width != null ? options.width : bounds.width, height: options.height != null ? options.height : bounds.height, top: bounds.top, left: bounds.left, x: 0, y: 0});\r\n        }\r\n\r\n        cleanupContainer(container, options);\r\n        return canvas;\r\n    });\r\n}\r\n\r\nfunction cleanupContainer(container, options) {\r\n    if (options.removeContainer) {\r\n        container.parentNode.removeChild(container);\r\n        log(\"Cleaned up container\");\r\n    }\r\n}\r\n\r\nfunction crop(canvas, bounds) {\r\n    var croppedCanvas = document.createElement(\"canvas\");\r\n    var x1 = Math.min(canvas.width - 1, Math.max(0, bounds.left));\r\n    var x2 = Math.min(canvas.width, Math.max(1, bounds.left + bounds.width));\r\n    var y1 = Math.min(canvas.height - 1, Math.max(0, bounds.top));\r\n    var y2 = Math.min(canvas.height, Math.max(1, bounds.top + bounds.height));\r\n    croppedCanvas.width = bounds.width;\r\n    croppedCanvas.height =  bounds.height;\r\n    var width = x2-x1;\r\n    var height = y2-y1;\r\n    log(\"Cropping canvas at:\", \"left:\", bounds.left, \"top:\", bounds.top, \"width:\", width, \"height:\", height);\r\n    log(\"Resulting crop with width\", bounds.width, \"and height\", bounds.height, \"with x\", x1, \"and y\", y1);\r\n    croppedCanvas.getContext(\"2d\").drawImage(canvas, x1, y1, width, height, bounds.x, bounds.y, width, height);\r\n    return croppedCanvas;\r\n}\r\n\r\nfunction documentWidth (doc) {\r\n    return Math.max(\r\n        Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth),\r\n        Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth),\r\n        Math.max(doc.body.clientWidth, doc.documentElement.clientWidth)\r\n    );\r\n}\r\n\r\nfunction documentHeight (doc) {\r\n    return Math.max(\r\n        Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),\r\n        Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),\r\n        Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)\r\n    );\r\n}\r\n\r\nfunction absoluteUrl(url) {\r\n    var link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.href = link.href;\r\n    return link;\r\n}\r\n\r\n},{\"./clone\":3,\"./imageloader\":11,\"./log\":13,\"./nodecontainer\":14,\"./nodeparser\":15,\"./proxy\":16,\"./renderers/canvas\":20,\"./support\":22,\"./utils\":26}],2:[function(_dereq_,module,exports){\r\n(function (global){\r\n/*! https://mths.be/punycode v1.4.1 by @mathias */\r\n;(function(root) {\r\n\r\n\t/** Detect free variables */\r\n\tvar freeExports = typeof exports == 'object' && exports &&\r\n\t\t!exports.nodeType && exports;\r\n\tvar freeModule = typeof module == 'object' && module &&\r\n\t\t!module.nodeType && module;\r\n\tvar freeGlobal = typeof global == 'object' && global;\r\n\tif (\r\n\t\tfreeGlobal.global === freeGlobal ||\r\n\t\tfreeGlobal.window === freeGlobal ||\r\n\t\tfreeGlobal.self === freeGlobal\r\n\t) {\r\n\t\troot = freeGlobal;\r\n\t}\r\n\r\n\t/**\r\n\t * The `punycode` object.\r\n\t * @name punycode\r\n\t * @type Object\r\n\t */\r\n\tvar punycode,\r\n\r\n\t/** Highest positive signed 32-bit float value */\r\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\r\n\r\n\t/** Bootstring parameters */\r\n\tbase = 36,\r\n\ttMin = 1,\r\n\ttMax = 26,\r\n\tskew = 38,\r\n\tdamp = 700,\r\n\tinitialBias = 72,\r\n\tinitialN = 128, // 0x80\r\n\tdelimiter = '-', // '\\x2D'\r\n\r\n\t/** Regular expressions */\r\n\tregexPunycode = /^xn--/,\r\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\r\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\r\n\r\n\t/** Error messages */\r\n\terrors = {\r\n\t\t'overflow': 'Overflow: input needs wider integers to process',\r\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\r\n\t\t'invalid-input': 'Invalid input'\r\n\t},\r\n\r\n\t/** Convenience shortcuts */\r\n\tbaseMinusTMin = base - tMin,\r\n\tfloor = Math.floor,\r\n\tstringFromCharCode = String.fromCharCode,\r\n\r\n\t/** Temporary variable */\r\n\tkey;\r\n\r\n\t/*--------------------------------------------------------------------------*/\r\n\r\n\t/**\r\n\t * A generic error utility function.\r\n\t * @private\r\n\t * @param {String} type The error type.\r\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\r\n\t */\r\n\tfunction error(type) {\r\n\t\tthrow new RangeError(errors[type]);\r\n\t}\r\n\r\n\t/**\r\n\t * A generic `Array#map` utility function.\r\n\t * @private\r\n\t * @param {Array} array The array to iterate over.\r\n\t * @param {Function} callback The function that gets called for every array\r\n\t * item.\r\n\t * @returns {Array} A new array of values returned by the callback function.\r\n\t */\r\n\tfunction map(array, fn) {\r\n\t\tvar length = array.length;\r\n\t\tvar result = [];\r\n\t\twhile (length--) {\r\n\t\t\tresult[length] = fn(array[length]);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\r\n\t * addresses.\r\n\t * @private\r\n\t * @param {String} domain The domain name or email address.\r\n\t * @param {Function} callback The function that gets called for every\r\n\t * character.\r\n\t * @returns {Array} A new string of characters returned by the callback\r\n\t * function.\r\n\t */\r\n\tfunction mapDomain(string, fn) {\r\n\t\tvar parts = string.split('@');\r\n\t\tvar result = '';\r\n\t\tif (parts.length > 1) {\r\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\r\n\t\t\t// the local part (i.e. everything up to `@`) intact.\r\n\t\t\tresult = parts[0] + '@';\r\n\t\t\tstring = parts[1];\r\n\t\t}\r\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\r\n\t\tstring = string.replace(regexSeparators, '\\x2E');\r\n\t\tvar labels = string.split('.');\r\n\t\tvar encoded = map(labels, fn).join('.');\r\n\t\treturn result + encoded;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates an array containing the numeric code points of each Unicode\r\n\t * character in the string. While JavaScript uses UCS-2 internally,\r\n\t * this function will convert a pair of surrogate halves (each of which\r\n\t * UCS-2 exposes as separate characters) into a single code point,\r\n\t * matching UTF-16.\r\n\t * @see `punycode.ucs2.encode`\r\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\r\n\t * @memberOf punycode.ucs2\r\n\t * @name decode\r\n\t * @param {String} string The Unicode input string (UCS-2).\r\n\t * @returns {Array} The new array of code points.\r\n\t */\r\n\tfunction ucs2decode(string) {\r\n\t\tvar output = [],\r\n\t\t    counter = 0,\r\n\t\t    length = string.length,\r\n\t\t    value,\r\n\t\t    extra;\r\n\t\twhile (counter < length) {\r\n\t\t\tvalue = string.charCodeAt(counter++);\r\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\r\n\t\t\t\t// high surrogate, and there is a next character\r\n\t\t\t\textra = string.charCodeAt(counter++);\r\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\r\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\r\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\r\n\t\t\t\t\toutput.push(value);\r\n\t\t\t\t\tcounter--;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toutput.push(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a string based on an array of numeric code points.\r\n\t * @see `punycode.ucs2.decode`\r\n\t * @memberOf punycode.ucs2\r\n\t * @name encode\r\n\t * @param {Array} codePoints The array of numeric code points.\r\n\t * @returns {String} The new Unicode string (UCS-2).\r\n\t */\r\n\tfunction ucs2encode(array) {\r\n\t\treturn map(array, function(value) {\r\n\t\t\tvar output = '';\r\n\t\t\tif (value > 0xFFFF) {\r\n\t\t\t\tvalue -= 0x10000;\r\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\r\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\r\n\t\t\t}\r\n\t\t\toutput += stringFromCharCode(value);\r\n\t\t\treturn output;\r\n\t\t}).join('');\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a basic code point into a digit/integer.\r\n\t * @see `digitToBasic()`\r\n\t * @private\r\n\t * @param {Number} codePoint The basic numeric code point value.\r\n\t * @returns {Number} The numeric value of a basic code point (for use in\r\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\r\n\t * the code point does not represent a value.\r\n\t */\r\n\tfunction basicToDigit(codePoint) {\r\n\t\tif (codePoint - 48 < 10) {\r\n\t\t\treturn codePoint - 22;\r\n\t\t}\r\n\t\tif (codePoint - 65 < 26) {\r\n\t\t\treturn codePoint - 65;\r\n\t\t}\r\n\t\tif (codePoint - 97 < 26) {\r\n\t\t\treturn codePoint - 97;\r\n\t\t}\r\n\t\treturn base;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a digit/integer into a basic code point.\r\n\t * @see `basicToDigit()`\r\n\t * @private\r\n\t * @param {Number} digit The numeric value of a basic code point.\r\n\t * @returns {Number} The basic code point whose value (when used for\r\n\t * representing integers) is `digit`, which needs to be in the range\r\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\r\n\t * used; else, the lowercase form is used. The behavior is undefined\r\n\t * if `flag` is non-zero and `digit` has no uppercase form.\r\n\t */\r\n\tfunction digitToBasic(digit, flag) {\r\n\t\t//  0..25 map to ASCII a..z or A..Z\r\n\t\t// 26..35 map to ASCII 0..9\r\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\r\n\t}\r\n\r\n\t/**\r\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\r\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\r\n\t * @private\r\n\t */\r\n\tfunction adapt(delta, numPoints, firstTime) {\r\n\t\tvar k = 0;\r\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\r\n\t\tdelta += floor(delta / numPoints);\r\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\r\n\t\t\tdelta = floor(delta / baseMinusTMin);\r\n\t\t}\r\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\r\n\t * symbols.\r\n\t * @memberOf punycode\r\n\t * @param {String} input The Punycode string of ASCII-only symbols.\r\n\t * @returns {String} The resulting string of Unicode symbols.\r\n\t */\r\n\tfunction decode(input) {\r\n\t\t// Don't use UCS-2\r\n\t\tvar output = [],\r\n\t\t    inputLength = input.length,\r\n\t\t    out,\r\n\t\t    i = 0,\r\n\t\t    n = initialN,\r\n\t\t    bias = initialBias,\r\n\t\t    basic,\r\n\t\t    j,\r\n\t\t    index,\r\n\t\t    oldi,\r\n\t\t    w,\r\n\t\t    k,\r\n\t\t    digit,\r\n\t\t    t,\r\n\t\t    /** Cached calculation results */\r\n\t\t    baseMinusT;\r\n\r\n\t\t// Handle the basic code points: let `basic` be the number of input code\r\n\t\t// points before the last delimiter, or `0` if there is none, then copy\r\n\t\t// the first basic code points to the output.\r\n\r\n\t\tbasic = input.lastIndexOf(delimiter);\r\n\t\tif (basic < 0) {\r\n\t\t\tbasic = 0;\r\n\t\t}\r\n\r\n\t\tfor (j = 0; j < basic; ++j) {\r\n\t\t\t// if it's not a basic code point\r\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\r\n\t\t\t\terror('not-basic');\r\n\t\t\t}\r\n\t\t\toutput.push(input.charCodeAt(j));\r\n\t\t}\r\n\r\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\r\n\t\t// points were copied; start at the beginning otherwise.\r\n\r\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\r\n\r\n\t\t\t// `index` is the index of the next character to be consumed.\r\n\t\t\t// Decode a generalized variable-length integer into `delta`,\r\n\t\t\t// which gets added to `i`. The overflow checking is easier\r\n\t\t\t// if we increase `i` as we go, then subtract off its starting\r\n\t\t\t// value at the end to obtain `delta`.\r\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\r\n\r\n\t\t\t\tif (index >= inputLength) {\r\n\t\t\t\t\terror('invalid-input');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\r\n\r\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\r\n\t\t\t\t\terror('overflow');\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti += digit * w;\r\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\r\n\r\n\t\t\t\tif (digit < t) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbaseMinusT = base - t;\r\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\r\n\t\t\t\t\terror('overflow');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tw *= baseMinusT;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tout = output.length + 1;\r\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\r\n\r\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\r\n\t\t\t// incrementing `n` each time, so we'll fix that now:\r\n\t\t\tif (floor(i / out) > maxInt - n) {\r\n\t\t\t\terror('overflow');\r\n\t\t\t}\r\n\r\n\t\t\tn += floor(i / out);\r\n\t\t\ti %= out;\r\n\r\n\t\t\t// Insert `n` at position `i` of the output\r\n\t\t\toutput.splice(i++, 0, n);\r\n\r\n\t\t}\r\n\r\n\t\treturn ucs2encode(output);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\r\n\t * Punycode string of ASCII-only symbols.\r\n\t * @memberOf punycode\r\n\t * @param {String} input The string of Unicode symbols.\r\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\r\n\t */\r\n\tfunction encode(input) {\r\n\t\tvar n,\r\n\t\t    delta,\r\n\t\t    handledCPCount,\r\n\t\t    basicLength,\r\n\t\t    bias,\r\n\t\t    j,\r\n\t\t    m,\r\n\t\t    q,\r\n\t\t    k,\r\n\t\t    t,\r\n\t\t    currentValue,\r\n\t\t    output = [],\r\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\r\n\t\t    inputLength,\r\n\t\t    /** Cached calculation results */\r\n\t\t    handledCPCountPlusOne,\r\n\t\t    baseMinusT,\r\n\t\t    qMinusT;\r\n\r\n\t\t// Convert the input in UCS-2 to Unicode\r\n\t\tinput = ucs2decode(input);\r\n\r\n\t\t// Cache the length\r\n\t\tinputLength = input.length;\r\n\r\n\t\t// Initialize the state\r\n\t\tn = initialN;\r\n\t\tdelta = 0;\r\n\t\tbias = initialBias;\r\n\r\n\t\t// Handle the basic code points\r\n\t\tfor (j = 0; j < inputLength; ++j) {\r\n\t\t\tcurrentValue = input[j];\r\n\t\t\tif (currentValue < 0x80) {\r\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandledCPCount = basicLength = output.length;\r\n\r\n\t\t// `handledCPCount` is the number of code points that have been handled;\r\n\t\t// `basicLength` is the number of basic code points.\r\n\r\n\t\t// Finish the basic string - if it is not empty - with a delimiter\r\n\t\tif (basicLength) {\r\n\t\t\toutput.push(delimiter);\r\n\t\t}\r\n\r\n\t\t// Main encoding loop:\r\n\t\twhile (handledCPCount < inputLength) {\r\n\r\n\t\t\t// All non-basic code points < n have been handled already. Find the next\r\n\t\t\t// larger one:\r\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\r\n\t\t\t\tcurrentValue = input[j];\r\n\t\t\t\tif (currentValue >= n && currentValue < m) {\r\n\t\t\t\t\tm = currentValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\r\n\t\t\t// but guard against overflow\r\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\r\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\r\n\t\t\t\terror('overflow');\r\n\t\t\t}\r\n\r\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\r\n\t\t\tn = m;\r\n\r\n\t\t\tfor (j = 0; j < inputLength; ++j) {\r\n\t\t\t\tcurrentValue = input[j];\r\n\r\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\r\n\t\t\t\t\terror('overflow');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (currentValue == n) {\r\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\r\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\r\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\r\n\t\t\t\t\t\tif (q < t) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tqMinusT = q - t;\r\n\t\t\t\t\t\tbaseMinusT = base - t;\r\n\t\t\t\t\t\toutput.push(\r\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\r\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\r\n\t\t\t\t\tdelta = 0;\r\n\t\t\t\t\t++handledCPCount;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t++delta;\r\n\t\t\t++n;\r\n\r\n\t\t}\r\n\t\treturn output.join('');\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a Punycode string representing a domain name or an email address\r\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\r\n\t * it doesn't matter if you call it on a string that has already been\r\n\t * converted to Unicode.\r\n\t * @memberOf punycode\r\n\t * @param {String} input The Punycoded domain name or email address to\r\n\t * convert to Unicode.\r\n\t * @returns {String} The Unicode representation of the given Punycode\r\n\t * string.\r\n\t */\r\n\tfunction toUnicode(input) {\r\n\t\treturn mapDomain(input, function(string) {\r\n\t\t\treturn regexPunycode.test(string)\r\n\t\t\t\t? decode(string.slice(4).toLowerCase())\r\n\t\t\t\t: string;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a Unicode string representing a domain name or an email address to\r\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\r\n\t * i.e. it doesn't matter if you call it with a domain that's already in\r\n\t * ASCII.\r\n\t * @memberOf punycode\r\n\t * @param {String} input The domain name or email address to convert, as a\r\n\t * Unicode string.\r\n\t * @returns {String} The Punycode representation of the given domain name or\r\n\t * email address.\r\n\t */\r\n\tfunction toASCII(input) {\r\n\t\treturn mapDomain(input, function(string) {\r\n\t\t\treturn regexNonASCII.test(string)\r\n\t\t\t\t? 'xn--' + encode(string)\r\n\t\t\t\t: string;\r\n\t\t});\r\n\t}\r\n\r\n\t/*--------------------------------------------------------------------------*/\r\n\r\n\t/** Define the public API */\r\n\tpunycode = {\r\n\t\t/**\r\n\t\t * A string representing the current Punycode.js version number.\r\n\t\t * @memberOf punycode\r\n\t\t * @type String\r\n\t\t */\r\n\t\t'version': '1.4.1',\r\n\t\t/**\r\n\t\t * An object of methods to convert from JavaScript's internal character\r\n\t\t * representation (UCS-2) to Unicode code points, and back.\r\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\r\n\t\t * @memberOf punycode\r\n\t\t * @type Object\r\n\t\t */\r\n\t\t'ucs2': {\r\n\t\t\t'decode': ucs2decode,\r\n\t\t\t'encode': ucs2encode\r\n\t\t},\r\n\t\t'decode': decode,\r\n\t\t'encode': encode,\r\n\t\t'toASCII': toASCII,\r\n\t\t'toUnicode': toUnicode\r\n\t};\r\n\r\n\t/** Expose `punycode` */\r\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\r\n\t// like the following:\r\n\tif (\r\n\t\ttypeof define == 'function' &&\r\n\t\ttypeof define.amd == 'object' &&\r\n\t\tdefine.amd\r\n\t) {\r\n\t\tdefine('punycode', function() {\r\n\t\t\treturn punycode;\r\n\t\t});\r\n\t} else if (freeExports && freeModule) {\r\n\t\tif (module.exports == freeExports) {\r\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\r\n\t\t\tfreeModule.exports = punycode;\r\n\t\t} else {\r\n\t\t\t// in Narwhal or RingoJS v0.7.0-\r\n\t\t\tfor (key in punycode) {\r\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\t// in Rhino or a web browser\r\n\t\troot.punycode = punycode;\r\n\t}\r\n\r\n}(this));\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n},{}],3:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\n\r\nfunction restoreOwnerScroll(ownerDocument, x, y) {\r\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\r\n        ownerDocument.defaultView.scrollTo(x, y);\r\n    }\r\n}\r\n\r\nfunction cloneCanvasContents(canvas, clonedCanvas) {\r\n    try {\r\n        if (clonedCanvas) {\r\n            clonedCanvas.width = canvas.width;\r\n            clonedCanvas.height = canvas.height;\r\n            clonedCanvas.getContext(\"2d\").putImageData(canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height), 0, 0);\r\n        }\r\n    } catch(e) {\r\n        log(\"Unable to copy canvas content from\", canvas, e);\r\n    }\r\n}\r\n\r\nfunction cloneNode(node, javascriptEnabled) {\r\n    var clone = node.nodeType === 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\r\n\r\n    var child = node.firstChild;\r\n    while(child) {\r\n        if (javascriptEnabled === true || child.nodeType !== 1 || child.nodeName !== 'SCRIPT') {\r\n            clone.appendChild(cloneNode(child, javascriptEnabled));\r\n        }\r\n        child = child.nextSibling;\r\n    }\r\n\r\n    if (node.nodeType === 1) {\r\n        clone._scrollTop = node.scrollTop;\r\n        clone._scrollLeft = node.scrollLeft;\r\n        if (node.nodeName === \"CANVAS\") {\r\n            cloneCanvasContents(node, clone);\r\n        } else if (node.nodeName === \"TEXTAREA\" || node.nodeName === \"SELECT\") {\r\n            clone.value = node.value;\r\n        }\r\n    }\r\n\r\n    return clone;\r\n}\r\n\r\nfunction initNode(node) {\r\n    if (node.nodeType === 1) {\r\n        node.scrollTop = node._scrollTop;\r\n        node.scrollLeft = node._scrollLeft;\r\n\r\n        var child = node.firstChild;\r\n        while(child) {\r\n            initNode(child);\r\n            child = child.nextSibling;\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = function(ownerDocument, containerDocument, width, height, options, x ,y) {\r\n    var documentElement = cloneNode(ownerDocument.documentElement, options.javascriptEnabled);\r\n    var container = containerDocument.createElement(\"iframe\");\r\n\r\n    container.className = \"html2canvas-container\";\r\n    container.style.visibility = \"hidden\";\r\n    container.style.position = \"fixed\";\r\n    container.style.left = \"-10000px\";\r\n    container.style.top = \"0px\";\r\n    container.style.border = \"0\";\r\n    container.width = width;\r\n    container.height = height;\r\n    container.scrolling = \"no\"; // ios won't scroll without it\r\n    containerDocument.body.appendChild(container);\r\n\r\n    return new Promise(function(resolve) {\r\n        var documentClone = container.contentWindow.document;\r\n\r\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\r\n         if window url is about:blank, we can assign the url to current by writing onto the document\r\n         */\r\n        container.contentWindow.onload = container.onload = function() {\r\n            var interval = setInterval(function() {\r\n                if (documentClone.body.childNodes.length > 0) {\r\n                    initNode(documentClone.documentElement);\r\n                    clearInterval(interval);\r\n                    if (options.type === \"view\") {\r\n                        container.contentWindow.scrollTo(x, y);\r\n                        if ((/(iPad|iPhone|iPod)/g).test(navigator.userAgent) && (container.contentWindow.scrollY !== y || container.contentWindow.scrollX !== x)) {\r\n                            documentClone.documentElement.style.top = (-y) + \"px\";\r\n                            documentClone.documentElement.style.left = (-x) + \"px\";\r\n                            documentClone.documentElement.style.position = 'absolute';\r\n                        }\r\n                    }\r\n                    resolve(container);\r\n                }\r\n            }, 50);\r\n        };\r\n\r\n        documentClone.open();\r\n        documentClone.write(\"<!DOCTYPE html><html></html>\");\r\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\r\n        restoreOwnerScroll(ownerDocument, x, y);\r\n        documentClone.replaceChild(documentClone.adoptNode(documentElement), documentClone.documentElement);\r\n        documentClone.close();\r\n    });\r\n};\r\n\r\n},{\"./log\":13}],4:[function(_dereq_,module,exports){\r\n// http://dev.w3.org/csswg/css-color/\r\n\r\nfunction Color(value) {\r\n    this.r = 0;\r\n    this.g = 0;\r\n    this.b = 0;\r\n    this.a = null;\r\n    var result = this.fromArray(value) ||\r\n        this.namedColor(value) ||\r\n        this.rgb(value) ||\r\n        this.rgba(value) ||\r\n        this.hex6(value) ||\r\n        this.hex3(value);\r\n}\r\n\r\nColor.prototype.darken = function(amount) {\r\n    var a = 1 - amount;\r\n    return  new Color([\r\n        Math.round(this.r * a),\r\n        Math.round(this.g * a),\r\n        Math.round(this.b * a),\r\n        this.a\r\n    ]);\r\n};\r\n\r\nColor.prototype.isTransparent = function() {\r\n    return this.a === 0;\r\n};\r\n\r\nColor.prototype.isBlack = function() {\r\n    return this.r === 0 && this.g === 0 && this.b === 0;\r\n};\r\n\r\nColor.prototype.fromArray = function(array) {\r\n    if (Array.isArray(array)) {\r\n        this.r = Math.min(array[0], 255);\r\n        this.g = Math.min(array[1], 255);\r\n        this.b = Math.min(array[2], 255);\r\n        if (array.length > 3) {\r\n            this.a = array[3];\r\n        }\r\n    }\r\n\r\n    return (Array.isArray(array));\r\n};\r\n\r\nvar _hex3 = /^#([a-f0-9]{3})$/i;\r\n\r\nColor.prototype.hex3 = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_hex3)) !== null) {\r\n        this.r = parseInt(match[1][0] + match[1][0], 16);\r\n        this.g = parseInt(match[1][1] + match[1][1], 16);\r\n        this.b = parseInt(match[1][2] + match[1][2], 16);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\nvar _hex6 = /^#([a-f0-9]{6})$/i;\r\n\r\nColor.prototype.hex6 = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_hex6)) !== null) {\r\n        this.r = parseInt(match[1].substring(0, 2), 16);\r\n        this.g = parseInt(match[1].substring(2, 4), 16);\r\n        this.b = parseInt(match[1].substring(4, 6), 16);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\n\r\nvar _rgb = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\r\n\r\nColor.prototype.rgb = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_rgb)) !== null) {\r\n        this.r = Number(match[1]);\r\n        this.g = Number(match[2]);\r\n        this.b = Number(match[3]);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\nvar _rgba = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d?\\.?\\d+)\\s*\\)$/;\r\n\r\nColor.prototype.rgba = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_rgba)) !== null) {\r\n        this.r = Number(match[1]);\r\n        this.g = Number(match[2]);\r\n        this.b = Number(match[3]);\r\n        this.a = Number(match[4]);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\nColor.prototype.toString = function() {\r\n    return this.a !== null && this.a !== 1 ?\r\n    \"rgba(\" + [this.r, this.g, this.b, this.a].join(\",\") + \")\" :\r\n    \"rgb(\" + [this.r, this.g, this.b].join(\",\") + \")\";\r\n};\r\n\r\nColor.prototype.namedColor = function(value) {\r\n    value = value.toLowerCase();\r\n    var color = colors[value];\r\n    if (color) {\r\n        this.r = color[0];\r\n        this.g = color[1];\r\n        this.b = color[2];\r\n    } else if (value === \"transparent\") {\r\n        this.r = this.g = this.b = this.a = 0;\r\n        return true;\r\n    }\r\n\r\n    return !!color;\r\n};\r\n\r\nColor.prototype.isColor = true;\r\n\r\n// JSON.stringify([].slice.call($$('.named-color-table tr'), 1).map(function(row) { return [row.childNodes[3].textContent, row.childNodes[5].textContent.trim().split(\",\").map(Number)] }).reduce(function(data, row) {data[row[0]] = row[1]; return data}, {}))\r\nvar colors = {\r\n    \"aliceblue\": [240, 248, 255],\r\n    \"antiquewhite\": [250, 235, 215],\r\n    \"aqua\": [0, 255, 255],\r\n    \"aquamarine\": [127, 255, 212],\r\n    \"azure\": [240, 255, 255],\r\n    \"beige\": [245, 245, 220],\r\n    \"bisque\": [255, 228, 196],\r\n    \"black\": [0, 0, 0],\r\n    \"blanchedalmond\": [255, 235, 205],\r\n    \"blue\": [0, 0, 255],\r\n    \"blueviolet\": [138, 43, 226],\r\n    \"brown\": [165, 42, 42],\r\n    \"burlywood\": [222, 184, 135],\r\n    \"cadetblue\": [95, 158, 160],\r\n    \"chartreuse\": [127, 255, 0],\r\n    \"chocolate\": [210, 105, 30],\r\n    \"coral\": [255, 127, 80],\r\n    \"cornflowerblue\": [100, 149, 237],\r\n    \"cornsilk\": [255, 248, 220],\r\n    \"crimson\": [220, 20, 60],\r\n    \"cyan\": [0, 255, 255],\r\n    \"darkblue\": [0, 0, 139],\r\n    \"darkcyan\": [0, 139, 139],\r\n    \"darkgoldenrod\": [184, 134, 11],\r\n    \"darkgray\": [169, 169, 169],\r\n    \"darkgreen\": [0, 100, 0],\r\n    \"darkgrey\": [169, 169, 169],\r\n    \"darkkhaki\": [189, 183, 107],\r\n    \"darkmagenta\": [139, 0, 139],\r\n    \"darkolivegreen\": [85, 107, 47],\r\n    \"darkorange\": [255, 140, 0],\r\n    \"darkorchid\": [153, 50, 204],\r\n    \"darkred\": [139, 0, 0],\r\n    \"darksalmon\": [233, 150, 122],\r\n    \"darkseagreen\": [143, 188, 143],\r\n    \"darkslateblue\": [72, 61, 139],\r\n    \"darkslategray\": [47, 79, 79],\r\n    \"darkslategrey\": [47, 79, 79],\r\n    \"darkturquoise\": [0, 206, 209],\r\n    \"darkviolet\": [148, 0, 211],\r\n    \"deeppink\": [255, 20, 147],\r\n    \"deepskyblue\": [0, 191, 255],\r\n    \"dimgray\": [105, 105, 105],\r\n    \"dimgrey\": [105, 105, 105],\r\n    \"dodgerblue\": [30, 144, 255],\r\n    \"firebrick\": [178, 34, 34],\r\n    \"floralwhite\": [255, 250, 240],\r\n    \"forestgreen\": [34, 139, 34],\r\n    \"fuchsia\": [255, 0, 255],\r\n    \"gainsboro\": [220, 220, 220],\r\n    \"ghostwhite\": [248, 248, 255],\r\n    \"gold\": [255, 215, 0],\r\n    \"goldenrod\": [218, 165, 32],\r\n    \"gray\": [128, 128, 128],\r\n    \"green\": [0, 128, 0],\r\n    \"greenyellow\": [173, 255, 47],\r\n    \"grey\": [128, 128, 128],\r\n    \"honeydew\": [240, 255, 240],\r\n    \"hotpink\": [255, 105, 180],\r\n    \"indianred\": [205, 92, 92],\r\n    \"indigo\": [75, 0, 130],\r\n    \"ivory\": [255, 255, 240],\r\n    \"khaki\": [240, 230, 140],\r\n    \"lavender\": [230, 230, 250],\r\n    \"lavenderblush\": [255, 240, 245],\r\n    \"lawngreen\": [124, 252, 0],\r\n    \"lemonchiffon\": [255, 250, 205],\r\n    \"lightblue\": [173, 216, 230],\r\n    \"lightcoral\": [240, 128, 128],\r\n    \"lightcyan\": [224, 255, 255],\r\n    \"lightgoldenrodyellow\": [250, 250, 210],\r\n    \"lightgray\": [211, 211, 211],\r\n    \"lightgreen\": [144, 238, 144],\r\n    \"lightgrey\": [211, 211, 211],\r\n    \"lightpink\": [255, 182, 193],\r\n    \"lightsalmon\": [255, 160, 122],\r\n    \"lightseagreen\": [32, 178, 170],\r\n    \"lightskyblue\": [135, 206, 250],\r\n    \"lightslategray\": [119, 136, 153],\r\n    \"lightslategrey\": [119, 136, 153],\r\n    \"lightsteelblue\": [176, 196, 222],\r\n    \"lightyellow\": [255, 255, 224],\r\n    \"lime\": [0, 255, 0],\r\n    \"limegreen\": [50, 205, 50],\r\n    \"linen\": [250, 240, 230],\r\n    \"magenta\": [255, 0, 255],\r\n    \"maroon\": [128, 0, 0],\r\n    \"mediumaquamarine\": [102, 205, 170],\r\n    \"mediumblue\": [0, 0, 205],\r\n    \"mediumorchid\": [186, 85, 211],\r\n    \"mediumpurple\": [147, 112, 219],\r\n    \"mediumseagreen\": [60, 179, 113],\r\n    \"mediumslateblue\": [123, 104, 238],\r\n    \"mediumspringgreen\": [0, 250, 154],\r\n    \"mediumturquoise\": [72, 209, 204],\r\n    \"mediumvioletred\": [199, 21, 133],\r\n    \"midnightblue\": [25, 25, 112],\r\n    \"mintcream\": [245, 255, 250],\r\n    \"mistyrose\": [255, 228, 225],\r\n    \"moccasin\": [255, 228, 181],\r\n    \"navajowhite\": [255, 222, 173],\r\n    \"navy\": [0, 0, 128],\r\n    \"oldlace\": [253, 245, 230],\r\n    \"olive\": [128, 128, 0],\r\n    \"olivedrab\": [107, 142, 35],\r\n    \"orange\": [255, 165, 0],\r\n    \"orangered\": [255, 69, 0],\r\n    \"orchid\": [218, 112, 214],\r\n    \"palegoldenrod\": [238, 232, 170],\r\n    \"palegreen\": [152, 251, 152],\r\n    \"paleturquoise\": [175, 238, 238],\r\n    \"palevioletred\": [219, 112, 147],\r\n    \"papayawhip\": [255, 239, 213],\r\n    \"peachpuff\": [255, 218, 185],\r\n    \"peru\": [205, 133, 63],\r\n    \"pink\": [255, 192, 203],\r\n    \"plum\": [221, 160, 221],\r\n    \"powderblue\": [176, 224, 230],\r\n    \"purple\": [128, 0, 128],\r\n    \"rebeccapurple\": [102, 51, 153],\r\n    \"red\": [255, 0, 0],\r\n    \"rosybrown\": [188, 143, 143],\r\n    \"royalblue\": [65, 105, 225],\r\n    \"saddlebrown\": [139, 69, 19],\r\n    \"salmon\": [250, 128, 114],\r\n    \"sandybrown\": [244, 164, 96],\r\n    \"seagreen\": [46, 139, 87],\r\n    \"seashell\": [255, 245, 238],\r\n    \"sienna\": [160, 82, 45],\r\n    \"silver\": [192, 192, 192],\r\n    \"skyblue\": [135, 206, 235],\r\n    \"slateblue\": [106, 90, 205],\r\n    \"slategray\": [112, 128, 144],\r\n    \"slategrey\": [112, 128, 144],\r\n    \"snow\": [255, 250, 250],\r\n    \"springgreen\": [0, 255, 127],\r\n    \"steelblue\": [70, 130, 180],\r\n    \"tan\": [210, 180, 140],\r\n    \"teal\": [0, 128, 128],\r\n    \"thistle\": [216, 191, 216],\r\n    \"tomato\": [255, 99, 71],\r\n    \"turquoise\": [64, 224, 208],\r\n    \"violet\": [238, 130, 238],\r\n    \"wheat\": [245, 222, 179],\r\n    \"white\": [255, 255, 255],\r\n    \"whitesmoke\": [245, 245, 245],\r\n    \"yellow\": [255, 255, 0],\r\n    \"yellowgreen\": [154, 205, 50]\r\n};\r\n\r\nmodule.exports = Color;\r\n\r\n},{}],5:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\nvar smallImage = _dereq_('./utils').smallImage;\r\n\r\nfunction DummyImageContainer(src) {\r\n    this.src = src;\r\n    log(\"DummyImageContainer for\", src);\r\n    if (!this.promise || !this.image) {\r\n        log(\"Initiating DummyImageContainer\");\r\n        DummyImageContainer.prototype.image = new Image();\r\n        var image = this.image;\r\n        DummyImageContainer.prototype.promise = new Promise(function(resolve, reject) {\r\n            image.onload = resolve;\r\n            image.onerror = reject;\r\n            image.src = smallImage();\r\n            if (image.complete === true) {\r\n                resolve(image);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nmodule.exports = DummyImageContainer;\r\n\r\n},{\"./log\":13,\"./utils\":26}],6:[function(_dereq_,module,exports){\r\nvar smallImage = _dereq_('./utils').smallImage;\r\n\r\nfunction Font(family, size) {\r\n    var container = document.createElement('div'),\r\n        img = document.createElement('img'),\r\n        span = document.createElement('span'),\r\n        sampleText = 'Hidden Text',\r\n        baseline,\r\n        middle;\r\n\r\n    container.style.visibility = \"hidden\";\r\n    container.style.fontFamily = family;\r\n    container.style.fontSize = size;\r\n    container.style.margin = 0;\r\n    container.style.padding = 0;\r\n\r\n    document.body.appendChild(container);\r\n\r\n    img.src = smallImage();\r\n    img.width = 1;\r\n    img.height = 1;\r\n\r\n    img.style.margin = 0;\r\n    img.style.padding = 0;\r\n    img.style.verticalAlign = \"baseline\";\r\n\r\n    span.style.fontFamily = family;\r\n    span.style.fontSize = size;\r\n    span.style.margin = 0;\r\n    span.style.padding = 0;\r\n\r\n    span.appendChild(document.createTextNode(sampleText));\r\n    container.appendChild(span);\r\n    container.appendChild(img);\r\n    baseline = (img.offsetTop - span.offsetTop) + 1;\r\n\r\n    container.removeChild(span);\r\n    container.appendChild(document.createTextNode(sampleText));\r\n\r\n    container.style.lineHeight = \"normal\";\r\n    img.style.verticalAlign = \"super\";\r\n\r\n    middle = (img.offsetTop-container.offsetTop) + 1;\r\n\r\n    document.body.removeChild(container);\r\n\r\n    this.baseline = baseline;\r\n    this.lineWidth = 1;\r\n    this.middle = middle;\r\n}\r\n\r\nmodule.exports = Font;\r\n\r\n},{\"./utils\":26}],7:[function(_dereq_,module,exports){\r\nvar Font = _dereq_('./font');\r\n\r\nfunction FontMetrics() {\r\n    this.data = {};\r\n}\r\n\r\nFontMetrics.prototype.getMetrics = function(family, size) {\r\n    if (this.data[family + \"-\" + size] === undefined) {\r\n        this.data[family + \"-\" + size] = new Font(family, size);\r\n    }\r\n    return this.data[family + \"-\" + size];\r\n};\r\n\r\nmodule.exports = FontMetrics;\r\n\r\n},{\"./font\":6}],8:[function(_dereq_,module,exports){\r\nvar utils = _dereq_('./utils');\r\nvar getBounds = utils.getBounds;\r\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\r\n\r\nfunction FrameContainer(container, sameOrigin, options) {\r\n    this.image = null;\r\n    this.src = container;\r\n    var self = this;\r\n    var bounds = getBounds(container);\r\n    this.promise = (!sameOrigin ? this.proxyLoad(options.proxy, bounds, options) : new Promise(function(resolve) {\r\n        if (container.contentWindow.document.URL === \"about:blank\" || container.contentWindow.document.documentElement == null) {\r\n            container.contentWindow.onload = container.onload = function() {\r\n                resolve(container);\r\n            };\r\n        } else {\r\n            resolve(container);\r\n        }\r\n    })).then(function(container) {\r\n        var html2canvas = _dereq_('./core');\r\n        return html2canvas(container.contentWindow.document.documentElement, {type: 'view', width: container.width, height: container.height, proxy: options.proxy, javascriptEnabled: options.javascriptEnabled, removeContainer: options.removeContainer, allowTaint: options.allowTaint, imageTimeout: options.imageTimeout / 2});\r\n    }).then(function(canvas) {\r\n        return self.image = canvas;\r\n    });\r\n}\r\n\r\nFrameContainer.prototype.proxyLoad = function(proxy, bounds, options) {\r\n    var container = this.src;\r\n    return loadUrlDocument(container.src, proxy, container.ownerDocument, bounds.width, bounds.height, options);\r\n};\r\n\r\nmodule.exports = FrameContainer;\r\n\r\n},{\"./core\":undefined,\"./proxy\":16,\"./utils\":26}],9:[function(_dereq_,module,exports){\r\nfunction GradientContainer(imageData) {\r\n    this.src = imageData.value;\r\n    this.colorStops = [];\r\n    this.type = null;\r\n    this.x0 = 0.5;\r\n    this.y0 = 0.5;\r\n    this.x1 = 0.5;\r\n    this.y1 = 0.5;\r\n    this.promise = Promise.resolve(true);\r\n}\r\n\r\nGradientContainer.TYPES = {\r\n    LINEAR: 1,\r\n    RADIAL: 2\r\n};\r\n\r\n// TODO: support hsl[a], negative %/length values\r\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\r\nGradientContainer.REGEXP_COLORSTOP = /^\\s*(rgba?\\(\\s*\\d{1,3},\\s*\\d{1,3},\\s*\\d{1,3}(?:,\\s*[0-9\\.]+)?\\s*\\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\\s+(\\d{1,3}(?:\\.\\d+)?)(%|px)?)?(?:\\s|$)/i;\r\n\r\nmodule.exports = GradientContainer;\r\n\r\n},{}],10:[function(_dereq_,module,exports){\r\nfunction ImageContainer(src, cors) {\r\n    this.src = src;\r\n    this.image = new Image();\r\n    var self = this;\r\n    this.tainted = null;\r\n    this.promise = new Promise(function(resolve, reject) {\r\n        self.image.onload = resolve;\r\n        self.image.onerror = reject;\r\n        if (cors) {\r\n            self.image.crossOrigin = \"anonymous\";\r\n        }\r\n        self.image.src = src;\r\n        if (self.image.complete === true) {\r\n            resolve(self.image);\r\n        }\r\n    });\r\n}\r\n\r\nmodule.exports = ImageContainer;\r\n\r\n},{}],11:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\nvar ImageContainer = _dereq_('./imagecontainer');\r\nvar DummyImageContainer = _dereq_('./dummyimagecontainer');\r\nvar ProxyImageContainer = _dereq_('./proxyimagecontainer');\r\nvar FrameContainer = _dereq_('./framecontainer');\r\nvar SVGContainer = _dereq_('./svgcontainer');\r\nvar SVGNodeContainer = _dereq_('./svgnodecontainer');\r\nvar LinearGradientContainer = _dereq_('./lineargradientcontainer');\r\nvar WebkitGradientContainer = _dereq_('./webkitgradientcontainer');\r\nvar bind = _dereq_('./utils').bind;\r\n\r\nfunction ImageLoader(options, support) {\r\n    this.link = null;\r\n    this.options = options;\r\n    this.support = support;\r\n    this.origin = this.getOrigin(window.location.href);\r\n}\r\n\r\nImageLoader.prototype.findImages = function(nodes) {\r\n    var images = [];\r\n    nodes.reduce(function(imageNodes, container) {\r\n        switch(container.node.nodeName) {\r\n        case \"IMG\":\r\n            return imageNodes.concat([{\r\n                args: [container.node.src],\r\n                method: \"url\"\r\n            }]);\r\n        case \"svg\":\r\n        case \"IFRAME\":\r\n            return imageNodes.concat([{\r\n                args: [container.node],\r\n                method: container.node.nodeName\r\n            }]);\r\n        }\r\n        return imageNodes;\r\n    }, []).forEach(this.addImage(images, this.loadImage), this);\r\n    return images;\r\n};\r\n\r\nImageLoader.prototype.findBackgroundImage = function(images, container) {\r\n    container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images, this.loadImage), this);\r\n    return images;\r\n};\r\n\r\nImageLoader.prototype.addImage = function(images, callback) {\r\n    return function(newImage) {\r\n        newImage.args.forEach(function(image) {\r\n            if (!this.imageExists(images, image)) {\r\n                images.splice(0, 0, callback.call(this, newImage));\r\n                log('Added image #' + (images.length), typeof(image) === \"string\" ? image.substring(0, 100) : image);\r\n            }\r\n        }, this);\r\n    };\r\n};\r\n\r\nImageLoader.prototype.hasImageBackground = function(imageData) {\r\n    return imageData.method !== \"none\";\r\n};\r\n\r\nImageLoader.prototype.loadImage = function(imageData) {\r\n    if (imageData.method === \"url\") {\r\n        var src = imageData.args[0];\r\n        if (this.isSVG(src) && !this.support.svg && !this.options.allowTaint) {\r\n            return new SVGContainer(src);\r\n        } else if (src.match(/data:image\\/.*;base64,/i)) {\r\n            return new ImageContainer(src.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/ig, ''), this.options.allowTaint === true);\r\n        } else if (this.isSameOrigin(src) || this.options.allowTaint === true || this.isSVG(src)) {\r\n            return new ImageContainer(src, false);\r\n        } else if (this.support.cors && !this.options.allowTaint && this.options.useCORS) {\r\n            return new ImageContainer(src, true);\r\n        } else if (this.options.proxy) {\r\n            return new ProxyImageContainer(src, this.options.proxy);\r\n        } else {\r\n            return new DummyImageContainer(src);\r\n        }\r\n    } else if (imageData.method === \"linear-gradient\") {\r\n        return new LinearGradientContainer(imageData);\r\n    } else if (imageData.method === \"gradient\") {\r\n        return new WebkitGradientContainer(imageData);\r\n    } else if (imageData.method === \"svg\") {\r\n        return new SVGNodeContainer(imageData.args[0], this.support.svg);\r\n    } else if (imageData.method === \"IFRAME\") {\r\n        return new FrameContainer(imageData.args[0], this.isSameOrigin(imageData.args[0].src), this.options);\r\n    } else {\r\n        return new DummyImageContainer(imageData);\r\n    }\r\n};\r\n\r\nImageLoader.prototype.isSVG = function(src) {\r\n    return src.substring(src.length - 3).toLowerCase() === \"svg\" || SVGContainer.prototype.isInline(src);\r\n};\r\n\r\nImageLoader.prototype.imageExists = function(images, src) {\r\n    return images.some(function(image) {\r\n        return image.src === src;\r\n    });\r\n};\r\n\r\nImageLoader.prototype.isSameOrigin = function(url) {\r\n    return (this.getOrigin(url) === this.origin);\r\n};\r\n\r\nImageLoader.prototype.getOrigin = function(url) {\r\n    var link = this.link || (this.link = document.createElement(\"a\"));\r\n    link.href = url;\r\n    link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\r\n    return link.protocol + link.hostname + link.port;\r\n};\r\n\r\nImageLoader.prototype.getPromise = function(container) {\r\n    return this.timeout(container, this.options.imageTimeout)['catch'](function() {\r\n        var dummy = new DummyImageContainer(container.src);\r\n        return dummy.promise.then(function(image) {\r\n            container.image = image;\r\n        });\r\n    });\r\n};\r\n\r\nImageLoader.prototype.get = function(src) {\r\n    var found = null;\r\n    return this.images.some(function(img) {\r\n        return (found = img).src === src;\r\n    }) ? found : null;\r\n};\r\n\r\nImageLoader.prototype.fetch = function(nodes) {\r\n    this.images = nodes.reduce(bind(this.findBackgroundImage, this), this.findImages(nodes));\r\n    this.images.forEach(function(image, index) {\r\n        image.promise.then(function() {\r\n            log(\"Succesfully loaded image #\"+ (index+1), image);\r\n        }, function(e) {\r\n            log(\"Failed loading image #\"+ (index+1), image, e);\r\n        });\r\n    });\r\n    this.ready = Promise.all(this.images.map(this.getPromise, this));\r\n    log(\"Finished searching images\");\r\n    return this;\r\n};\r\n\r\nImageLoader.prototype.timeout = function(container, timeout) {\r\n    var timer;\r\n    var promise = Promise.race([container.promise, new Promise(function(res, reject) {\r\n        timer = setTimeout(function() {\r\n            log(\"Timed out loading image\", container);\r\n            reject(container);\r\n        }, timeout);\r\n    })]).then(function(container) {\r\n        clearTimeout(timer);\r\n        return container;\r\n    });\r\n    promise['catch'](function() {\r\n        clearTimeout(timer);\r\n    });\r\n    return promise;\r\n};\r\n\r\nmodule.exports = ImageLoader;\r\n\r\n},{\"./dummyimagecontainer\":5,\"./framecontainer\":8,\"./imagecontainer\":10,\"./lineargradientcontainer\":12,\"./log\":13,\"./proxyimagecontainer\":17,\"./svgcontainer\":23,\"./svgnodecontainer\":24,\"./utils\":26,\"./webkitgradientcontainer\":27}],12:[function(_dereq_,module,exports){\r\nvar GradientContainer = _dereq_('./gradientcontainer');\r\nvar Color = _dereq_('./color');\r\n\r\nfunction LinearGradientContainer(imageData) {\r\n    GradientContainer.apply(this, arguments);\r\n    this.type = GradientContainer.TYPES.LINEAR;\r\n\r\n    var hasDirection = LinearGradientContainer.REGEXP_DIRECTION.test( imageData.args[0] ) ||\r\n        !GradientContainer.REGEXP_COLORSTOP.test( imageData.args[0] );\r\n\r\n    if (hasDirection) {\r\n        imageData.args[0].split(/\\s+/).reverse().forEach(function(position, index) {\r\n            switch(position) {\r\n            case \"left\":\r\n                this.x0 = 0;\r\n                this.x1 = 1;\r\n                break;\r\n            case \"top\":\r\n                this.y0 = 0;\r\n                this.y1 = 1;\r\n                break;\r\n            case \"right\":\r\n                this.x0 = 1;\r\n                this.x1 = 0;\r\n                break;\r\n            case \"bottom\":\r\n                this.y0 = 1;\r\n                this.y1 = 0;\r\n                break;\r\n            case \"to\":\r\n                var y0 = this.y0;\r\n                var x0 = this.x0;\r\n                this.y0 = this.y1;\r\n                this.x0 = this.x1;\r\n                this.x1 = x0;\r\n                this.y1 = y0;\r\n                break;\r\n            case \"center\":\r\n                break; // centered by default\r\n            // Firefox internally converts position keywords to percentages:\r\n            // http://www.w3.org/TR/2010/WD-CSS2-20101207/colors.html#propdef-background-position\r\n            default: // percentage or absolute length\r\n                // TODO: support absolute start point positions (e.g., use bounds to convert px to a ratio)\r\n                var ratio = parseFloat(position, 10) * 1e-2;\r\n                if (isNaN(ratio)) { // invalid or unhandled value\r\n                    break;\r\n                }\r\n                if (index === 0) {\r\n                    this.y0 = ratio;\r\n                    this.y1 = 1 - this.y0;\r\n                } else {\r\n                    this.x0 = ratio;\r\n                    this.x1 = 1 - this.x0;\r\n                }\r\n                break;\r\n            }\r\n        }, this);\r\n    } else {\r\n        this.y0 = 0;\r\n        this.y1 = 1;\r\n    }\r\n\r\n    this.colorStops = imageData.args.slice(hasDirection ? 1 : 0).map(function(colorStop) {\r\n        var colorStopMatch = colorStop.match(GradientContainer.REGEXP_COLORSTOP);\r\n        var value = +colorStopMatch[2];\r\n        var unit = value === 0 ? \"%\" : colorStopMatch[3]; // treat \"0\" as \"0%\"\r\n        return {\r\n            color: new Color(colorStopMatch[1]),\r\n            // TODO: support absolute stop positions (e.g., compute gradient line length & convert px to ratio)\r\n            stop: unit === \"%\" ? value / 100 : null\r\n        };\r\n    });\r\n\r\n    if (this.colorStops[0].stop === null) {\r\n        this.colorStops[0].stop = 0;\r\n    }\r\n\r\n    if (this.colorStops[this.colorStops.length - 1].stop === null) {\r\n        this.colorStops[this.colorStops.length - 1].stop = 1;\r\n    }\r\n\r\n    // calculates and fills-in explicit stop positions when omitted from rule\r\n    this.colorStops.forEach(function(colorStop, index) {\r\n        if (colorStop.stop === null) {\r\n            this.colorStops.slice(index).some(function(find, count) {\r\n                if (find.stop !== null) {\r\n                    colorStop.stop = ((find.stop - this.colorStops[index - 1].stop) / (count + 1)) + this.colorStops[index - 1].stop;\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            }, this);\r\n        }\r\n    }, this);\r\n}\r\n\r\nLinearGradientContainer.prototype = Object.create(GradientContainer.prototype);\r\n\r\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\r\nLinearGradientContainer.REGEXP_DIRECTION = /^\\s*(?:to|left|right|top|bottom|center|\\d{1,3}(?:\\.\\d+)?%?)(?:\\s|$)/i;\r\n\r\nmodule.exports = LinearGradientContainer;\r\n\r\n},{\"./color\":4,\"./gradientcontainer\":9}],13:[function(_dereq_,module,exports){\r\nvar logger = function() {\r\n    if (logger.options.logging && window.console && window.console.log) {\r\n        Function.prototype.bind.call(window.console.log, (window.console)).apply(window.console, [(Date.now() - logger.options.start) + \"ms\", \"html2canvas:\"].concat([].slice.call(arguments, 0)));\r\n    }\r\n};\r\n\r\nlogger.options = {logging: false};\r\nmodule.exports = logger;\r\n\r\n},{}],14:[function(_dereq_,module,exports){\r\nvar Color = _dereq_('./color');\r\nvar utils = _dereq_('./utils');\r\nvar getBounds = utils.getBounds;\r\nvar parseBackgrounds = utils.parseBackgrounds;\r\nvar offsetBounds = utils.offsetBounds;\r\n\r\nfunction NodeContainer(node, parent) {\r\n    this.node = node;\r\n    this.parent = parent;\r\n    this.stack = null;\r\n    this.bounds = null;\r\n    this.borders = null;\r\n    this.clip = [];\r\n    this.backgroundClip = [];\r\n    this.offsetBounds = null;\r\n    this.visible = null;\r\n    this.computedStyles = null;\r\n    this.colors = {};\r\n    this.styles = {};\r\n    this.backgroundImages = null;\r\n    this.transformData = null;\r\n    this.transformMatrix = null;\r\n    this.isPseudoElement = false;\r\n    this.opacity = null;\r\n}\r\n\r\nNodeContainer.prototype.cloneTo = function(stack) {\r\n    stack.visible = this.visible;\r\n    stack.borders = this.borders;\r\n    stack.bounds = this.bounds;\r\n    stack.clip = this.clip;\r\n    stack.backgroundClip = this.backgroundClip;\r\n    stack.computedStyles = this.computedStyles;\r\n    stack.styles = this.styles;\r\n    stack.backgroundImages = this.backgroundImages;\r\n    stack.opacity = this.opacity;\r\n};\r\n\r\nNodeContainer.prototype.getOpacity = function() {\r\n    return this.opacity === null ? (this.opacity = this.cssFloat('opacity')) : this.opacity;\r\n};\r\n\r\nNodeContainer.prototype.assignStack = function(stack) {\r\n    this.stack = stack;\r\n    stack.children.push(this);\r\n};\r\n\r\nNodeContainer.prototype.isElementVisible = function() {\r\n    return this.node.nodeType === Node.TEXT_NODE ? this.parent.visible : (\r\n        this.css('display') !== \"none\" &&\r\n        this.css('visibility') !== \"hidden\" &&\r\n        !this.node.hasAttribute(\"data-html2canvas-ignore\") &&\r\n        (this.node.nodeName !== \"INPUT\" || this.node.getAttribute(\"type\") !== \"hidden\")\r\n    );\r\n};\r\n\r\nNodeContainer.prototype.css = function(attribute) {\r\n    if (!this.computedStyles) {\r\n        this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? \":before\" : \":after\") : this.computedStyle(null);\r\n    }\r\n\r\n    return this.styles[attribute] || (this.styles[attribute] = this.computedStyles[attribute]);\r\n};\r\n\r\nNodeContainer.prototype.prefixedCss = function(attribute) {\r\n    var prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\r\n    var value = this.css(attribute);\r\n    if (value === undefined) {\r\n        prefixes.some(function(prefix) {\r\n            value = this.css(prefix + attribute.substr(0, 1).toUpperCase() + attribute.substr(1));\r\n            return value !== undefined;\r\n        }, this);\r\n    }\r\n    return value === undefined ? null : value;\r\n};\r\n\r\nNodeContainer.prototype.computedStyle = function(type) {\r\n    return this.node.ownerDocument.defaultView.getComputedStyle(this.node, type);\r\n};\r\n\r\nNodeContainer.prototype.cssInt = function(attribute) {\r\n    var value = parseInt(this.css(attribute), 10);\r\n    return (isNaN(value)) ? 0 : value; // borders in old IE are throwing 'medium' for demo.html\r\n};\r\n\r\nNodeContainer.prototype.color = function(attribute) {\r\n    return this.colors[attribute] || (this.colors[attribute] = new Color(this.css(attribute)));\r\n};\r\n\r\nNodeContainer.prototype.cssFloat = function(attribute) {\r\n    var value = parseFloat(this.css(attribute));\r\n    return (isNaN(value)) ? 0 : value;\r\n};\r\n\r\nNodeContainer.prototype.fontWeight = function() {\r\n    var weight = this.css(\"fontWeight\");\r\n    switch(parseInt(weight, 10)){\r\n    case 401:\r\n        weight = \"bold\";\r\n        break;\r\n    case 400:\r\n        weight = \"normal\";\r\n        break;\r\n    }\r\n    return weight;\r\n};\r\n\r\nNodeContainer.prototype.parseClip = function() {\r\n    var matches = this.css('clip').match(this.CLIP);\r\n    if (matches) {\r\n        return {\r\n            top: parseInt(matches[1], 10),\r\n            right: parseInt(matches[2], 10),\r\n            bottom: parseInt(matches[3], 10),\r\n            left: parseInt(matches[4], 10)\r\n        };\r\n    }\r\n    return null;\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundImages = function() {\r\n    return this.backgroundImages || (this.backgroundImages = parseBackgrounds(this.css(\"backgroundImage\")));\r\n};\r\n\r\nNodeContainer.prototype.cssList = function(property, index) {\r\n    var value = (this.css(property) || '').split(',');\r\n    value = value[index || 0] || value[0] || 'auto';\r\n    value = value.trim().split(' ');\r\n    if (value.length === 1) {\r\n        value = [value[0], isPercentage(value[0]) ? 'auto' : value[0]];\r\n    }\r\n    return value;\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundSize = function(bounds, image, index) {\r\n    var size = this.cssList(\"backgroundSize\", index);\r\n    var width, height;\r\n\r\n    if (isPercentage(size[0])) {\r\n        width = bounds.width * parseFloat(size[0]) / 100;\r\n    } else if (/contain|cover/.test(size[0])) {\r\n        var targetRatio = bounds.width / bounds.height, currentRatio = image.width / image.height;\r\n        return (targetRatio < currentRatio ^ size[0] === 'contain') ?  {width: bounds.height * currentRatio, height: bounds.height} : {width: bounds.width, height: bounds.width / currentRatio};\r\n    } else {\r\n        width = parseInt(size[0], 10);\r\n    }\r\n\r\n    if (size[0] === 'auto' && size[1] === 'auto') {\r\n        height = image.height;\r\n    } else if (size[1] === 'auto') {\r\n        height = width / image.width * image.height;\r\n    } else if (isPercentage(size[1])) {\r\n        height =  bounds.height * parseFloat(size[1]) / 100;\r\n    } else {\r\n        height = parseInt(size[1], 10);\r\n    }\r\n\r\n    if (size[0] === 'auto') {\r\n        width = height / image.height * image.width;\r\n    }\r\n\r\n    return {width: width, height: height};\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundPosition = function(bounds, image, index, backgroundSize) {\r\n    var position = this.cssList('backgroundPosition', index);\r\n    var left, top;\r\n\r\n    if (isPercentage(position[0])){\r\n        left = (bounds.width - (backgroundSize || image).width) * (parseFloat(position[0]) / 100);\r\n    } else {\r\n        left = parseInt(position[0], 10);\r\n    }\r\n\r\n    if (position[1] === 'auto') {\r\n        top = left / image.width * image.height;\r\n    } else if (isPercentage(position[1])){\r\n        top =  (bounds.height - (backgroundSize || image).height) * parseFloat(position[1]) / 100;\r\n    } else {\r\n        top = parseInt(position[1], 10);\r\n    }\r\n\r\n    if (position[0] === 'auto') {\r\n        left = top / image.height * image.width;\r\n    }\r\n\r\n    return {left: left, top: top};\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundRepeat = function(index) {\r\n    return this.cssList(\"backgroundRepeat\", index)[0];\r\n};\r\n\r\nNodeContainer.prototype.parseTextShadows = function() {\r\n    var textShadow = this.css(\"textShadow\");\r\n    var results = [];\r\n\r\n    if (textShadow && textShadow !== 'none') {\r\n        var shadows = textShadow.match(this.TEXT_SHADOW_PROPERTY);\r\n        for (var i = 0; shadows && (i < shadows.length); i++) {\r\n            var s = shadows[i].match(this.TEXT_SHADOW_VALUES);\r\n            results.push({\r\n                color: new Color(s[0]),\r\n                offsetX: s[1] ? parseFloat(s[1].replace('px', '')) : 0,\r\n                offsetY: s[2] ? parseFloat(s[2].replace('px', '')) : 0,\r\n                blur: s[3] ? s[3].replace('px', '') : 0\r\n            });\r\n        }\r\n    }\r\n    return results;\r\n};\r\n\r\nNodeContainer.prototype.parseTransform = function() {\r\n    if (!this.transformData) {\r\n        if (this.hasTransform()) {\r\n            var offset = this.parseBounds();\r\n            var origin = this.prefixedCss(\"transformOrigin\").split(\" \").map(removePx).map(asFloat);\r\n            origin[0] += offset.left;\r\n            origin[1] += offset.top;\r\n            this.transformData = {\r\n                origin: origin,\r\n                matrix: this.parseTransformMatrix()\r\n            };\r\n        } else {\r\n            this.transformData = {\r\n                origin: [0, 0],\r\n                matrix: [1, 0, 0, 1, 0, 0]\r\n            };\r\n        }\r\n    }\r\n    return this.transformData;\r\n};\r\n\r\nNodeContainer.prototype.parseTransformMatrix = function() {\r\n    if (!this.transformMatrix) {\r\n        var transform = this.prefixedCss(\"transform\");\r\n        var matrix = transform ? parseMatrix(transform.match(this.MATRIX_PROPERTY)) : null;\r\n        this.transformMatrix = matrix ? matrix : [1, 0, 0, 1, 0, 0];\r\n    }\r\n    return this.transformMatrix;\r\n};\r\n\r\nNodeContainer.prototype.parseBounds = function() {\r\n    return this.bounds || (this.bounds = this.hasTransform() ? offsetBounds(this.node) : getBounds(this.node));\r\n};\r\n\r\nNodeContainer.prototype.hasTransform = function() {\r\n    return this.parseTransformMatrix().join(\",\") !== \"1,0,0,1,0,0\" || (this.parent && this.parent.hasTransform());\r\n};\r\n\r\nNodeContainer.prototype.getValue = function() {\r\n    var value = this.node.value || \"\";\r\n    if (this.node.tagName === \"SELECT\") {\r\n        value = selectionValue(this.node);\r\n    } else if (this.node.type === \"password\") {\r\n        value = Array(value.length + 1).join('\\u2022'); // jshint ignore:line\r\n    }\r\n    return value.length === 0 ? (this.node.placeholder || \"\") : value;\r\n};\r\n\r\nNodeContainer.prototype.MATRIX_PROPERTY = /(matrix|matrix3d)\\((.+)\\)/;\r\nNodeContainer.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\\([^\\)]+\\)(\\s-?\\d+px){0,})/g;\r\nNodeContainer.prototype.TEXT_SHADOW_VALUES = /(-?\\d+px)|(#.+)|(rgb\\(.+\\))|(rgba\\(.+\\))/g;\r\nNodeContainer.prototype.CLIP = /^rect\\((\\d+)px,? (\\d+)px,? (\\d+)px,? (\\d+)px\\)$/;\r\n\r\nfunction selectionValue(node) {\r\n    var option = node.options[node.selectedIndex || 0];\r\n    return option ? (option.text || \"\") : \"\";\r\n}\r\n\r\nfunction parseMatrix(match) {\r\n    if (match && match[1] === \"matrix\") {\r\n        return match[2].split(\",\").map(function(s) {\r\n            return parseFloat(s.trim());\r\n        });\r\n    } else if (match && match[1] === \"matrix3d\") {\r\n        var matrix3d = match[2].split(\",\").map(function(s) {\r\n          return parseFloat(s.trim());\r\n        });\r\n        return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];\r\n    }\r\n}\r\n\r\nfunction isPercentage(value) {\r\n    return value.toString().indexOf(\"%\") !== -1;\r\n}\r\n\r\nfunction removePx(str) {\r\n    return str.replace(\"px\", \"\");\r\n}\r\n\r\nfunction asFloat(str) {\r\n    return parseFloat(str);\r\n}\r\n\r\nmodule.exports = NodeContainer;\r\n\r\n},{\"./color\":4,\"./utils\":26}],15:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\nvar punycode = _dereq_('punycode');\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\nvar TextContainer = _dereq_('./textcontainer');\r\nvar PseudoElementContainer = _dereq_('./pseudoelementcontainer');\r\nvar FontMetrics = _dereq_('./fontmetrics');\r\nvar Color = _dereq_('./color');\r\nvar StackingContext = _dereq_('./stackingcontext');\r\nvar utils = _dereq_('./utils');\r\nvar bind = utils.bind;\r\nvar getBounds = utils.getBounds;\r\nvar parseBackgrounds = utils.parseBackgrounds;\r\nvar offsetBounds = utils.offsetBounds;\r\n\r\nfunction NodeParser(element, renderer, support, imageLoader, options) {\r\n    log(\"Starting NodeParser\");\r\n    this.renderer = renderer;\r\n    this.options = options;\r\n    this.range = null;\r\n    this.support = support;\r\n    this.renderQueue = [];\r\n    this.stack = new StackingContext(true, 1, element.ownerDocument, null);\r\n    var parent = new NodeContainer(element, null);\r\n    if (options.background) {\r\n        renderer.rectangle(0, 0, renderer.width, renderer.height, new Color(options.background));\r\n    }\r\n    if (element === element.ownerDocument.documentElement) {\r\n        // http://www.w3.org/TR/css3-background/#special-backgrounds\r\n        var canvasBackground = new NodeContainer(parent.color('backgroundColor').isTransparent() ? element.ownerDocument.body : element.ownerDocument.documentElement, null);\r\n        renderer.rectangle(0, 0, renderer.width, renderer.height, canvasBackground.color('backgroundColor'));\r\n    }\r\n    parent.visibile = parent.isElementVisible();\r\n    this.createPseudoHideStyles(element.ownerDocument);\r\n    this.disableAnimations(element.ownerDocument);\r\n    this.nodes = flatten([parent].concat(this.getChildren(parent)).filter(function(container) {\r\n        return container.visible = container.isElementVisible();\r\n    }).map(this.getPseudoElements, this));\r\n    this.fontMetrics = new FontMetrics();\r\n    log(\"Fetched nodes, total:\", this.nodes.length);\r\n    log(\"Calculate overflow clips\");\r\n    this.calculateOverflowClips();\r\n    log(\"Start fetching images\");\r\n    this.images = imageLoader.fetch(this.nodes.filter(isElement));\r\n    this.ready = this.images.ready.then(bind(function() {\r\n        log(\"Images loaded, starting parsing\");\r\n        log(\"Creating stacking contexts\");\r\n        this.createStackingContexts();\r\n        log(\"Sorting stacking contexts\");\r\n        this.sortStackingContexts(this.stack);\r\n        this.parse(this.stack);\r\n        log(\"Render queue created with \" + this.renderQueue.length + \" items\");\r\n        return new Promise(bind(function(resolve) {\r\n            if (!options.async) {\r\n                this.renderQueue.forEach(this.paint, this);\r\n                resolve();\r\n            } else if (typeof(options.async) === \"function\") {\r\n                options.async.call(this, this.renderQueue, resolve);\r\n            } else if (this.renderQueue.length > 0){\r\n                this.renderIndex = 0;\r\n                this.asyncRenderer(this.renderQueue, resolve);\r\n            } else {\r\n                resolve();\r\n            }\r\n        }, this));\r\n    }, this));\r\n}\r\n\r\nNodeParser.prototype.calculateOverflowClips = function() {\r\n    this.nodes.forEach(function(container) {\r\n        if (isElement(container)) {\r\n            if (isPseudoElement(container)) {\r\n                container.appendToDOM();\r\n            }\r\n            container.borders = this.parseBorders(container);\r\n            var clip = (container.css('overflow') === \"hidden\") ? [container.borders.clip] : [];\r\n            var cssClip = container.parseClip();\r\n            if (cssClip && [\"absolute\", \"fixed\"].indexOf(container.css('position')) !== -1) {\r\n                clip.push([[\"rect\",\r\n                        container.bounds.left + cssClip.left,\r\n                        container.bounds.top + cssClip.top,\r\n                        cssClip.right - cssClip.left,\r\n                        cssClip.bottom - cssClip.top\r\n                ]]);\r\n            }\r\n            container.clip = hasParentClip(container) ? container.parent.clip.concat(clip) : clip;\r\n            container.backgroundClip = (container.css('overflow') !== \"hidden\") ? container.clip.concat([container.borders.clip]) : container.clip;\r\n            if (isPseudoElement(container)) {\r\n                container.cleanDOM();\r\n            }\r\n        } else if (isTextNode(container)) {\r\n            container.clip = hasParentClip(container) ? container.parent.clip : [];\r\n        }\r\n        if (!isPseudoElement(container)) {\r\n            container.bounds = null;\r\n        }\r\n    }, this);\r\n};\r\n\r\nfunction hasParentClip(container) {\r\n    return container.parent && container.parent.clip.length;\r\n}\r\n\r\nNodeParser.prototype.asyncRenderer = function(queue, resolve, asyncTimer) {\r\n    asyncTimer = asyncTimer || Date.now();\r\n    this.paint(queue[this.renderIndex++]);\r\n    if (queue.length === this.renderIndex) {\r\n        resolve();\r\n    } else if (asyncTimer + 20 > Date.now()) {\r\n        this.asyncRenderer(queue, resolve, asyncTimer);\r\n    } else {\r\n        setTimeout(bind(function() {\r\n            this.asyncRenderer(queue, resolve);\r\n        }, this), 0);\r\n    }\r\n};\r\n\r\nNodeParser.prototype.createPseudoHideStyles = function(document) {\r\n    this.createStyles(document, '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ':before { content: \"\" !important; display: none !important; }' +\r\n        '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER + ':after { content: \"\" !important; display: none !important; }');\r\n};\r\n\r\nNodeParser.prototype.disableAnimations = function(document) {\r\n    this.createStyles(document, '* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; ' +\r\n        '-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}');\r\n};\r\n\r\nNodeParser.prototype.createStyles = function(document, styles) {\r\n    var hidePseudoElements = document.createElement('style');\r\n    hidePseudoElements.innerHTML = styles;\r\n    document.body.appendChild(hidePseudoElements);\r\n};\r\n\r\nNodeParser.prototype.getPseudoElements = function(container) {\r\n    var nodes = [[container]];\r\n    if (container.node.nodeType === Node.ELEMENT_NODE) {\r\n        var before = this.getPseudoElement(container, \":before\");\r\n        var after = this.getPseudoElement(container, \":after\");\r\n\r\n        if (before) {\r\n            nodes.push(before);\r\n        }\r\n\r\n        if (after) {\r\n            nodes.push(after);\r\n        }\r\n    }\r\n    return flatten(nodes);\r\n};\r\n\r\nfunction toCamelCase(str) {\r\n    return str.replace(/(\\-[a-z])/g, function(match){\r\n        return match.toUpperCase().replace('-','');\r\n    });\r\n}\r\n\r\nNodeParser.prototype.getPseudoElement = function(container, type) {\r\n    var style = container.computedStyle(type);\r\n    if(!style || !style.content || style.content === \"none\" || style.content === \"-moz-alt-content\" || style.display === \"none\") {\r\n        return null;\r\n    }\r\n\r\n    var content = stripQuotes(style.content);\r\n    var isImage = content.substr(0, 3) === 'url';\r\n    var pseudoNode = document.createElement(isImage ? 'img' : 'html2canvaspseudoelement');\r\n    var pseudoContainer = new PseudoElementContainer(pseudoNode, container, type);\r\n\r\n    for (var i = style.length-1; i >= 0; i--) {\r\n        var property = toCamelCase(style.item(i));\r\n        pseudoNode.style[property] = style[property];\r\n    }\r\n\r\n    pseudoNode.className = PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + \" \" + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\r\n\r\n    if (isImage) {\r\n        pseudoNode.src = parseBackgrounds(content)[0].args[0];\r\n        return [pseudoContainer];\r\n    } else {\r\n        var text = document.createTextNode(content);\r\n        pseudoNode.appendChild(text);\r\n        return [pseudoContainer, new TextContainer(text, pseudoContainer)];\r\n    }\r\n};\r\n\r\n\r\nNodeParser.prototype.getChildren = function(parentContainer) {\r\n    return flatten([].filter.call(parentContainer.node.childNodes, renderableNode).map(function(node) {\r\n        var container = [node.nodeType === Node.TEXT_NODE ? new TextContainer(node, parentContainer) : new NodeContainer(node, parentContainer)].filter(nonIgnoredElement);\r\n        return node.nodeType === Node.ELEMENT_NODE && container.length && node.tagName !== \"TEXTAREA\" ? (container[0].isElementVisible() ? container.concat(this.getChildren(container[0])) : []) : container;\r\n    }, this));\r\n};\r\n\r\nNodeParser.prototype.newStackingContext = function(container, hasOwnStacking) {\r\n    var stack = new StackingContext(hasOwnStacking, container.getOpacity(), container.node, container.parent);\r\n    container.cloneTo(stack);\r\n    var parentStack = hasOwnStacking ? stack.getParentStack(this) : stack.parent.stack;\r\n    parentStack.contexts.push(stack);\r\n    container.stack = stack;\r\n};\r\n\r\nNodeParser.prototype.createStackingContexts = function() {\r\n    this.nodes.forEach(function(container) {\r\n        if (isElement(container) && (this.isRootElement(container) || hasOpacity(container) || isPositionedForStacking(container) || this.isBodyWithTransparentRoot(container) || container.hasTransform())) {\r\n            this.newStackingContext(container, true);\r\n        } else if (isElement(container) && ((isPositioned(container) && zIndex0(container)) || isInlineBlock(container) || isFloating(container))) {\r\n            this.newStackingContext(container, false);\r\n        } else {\r\n            container.assignStack(container.parent.stack);\r\n        }\r\n    }, this);\r\n};\r\n\r\nNodeParser.prototype.isBodyWithTransparentRoot = function(container) {\r\n    return container.node.nodeName === \"BODY\" && container.parent.color('backgroundColor').isTransparent();\r\n};\r\n\r\nNodeParser.prototype.isRootElement = function(container) {\r\n    return container.parent === null;\r\n};\r\n\r\nNodeParser.prototype.sortStackingContexts = function(stack) {\r\n    stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));\r\n    stack.contexts.forEach(this.sortStackingContexts, this);\r\n};\r\n\r\nNodeParser.prototype.parseTextBounds = function(container) {\r\n    return function(text, index, textList) {\r\n        if (container.parent.css(\"textDecoration\").substr(0, 4) !== \"none\" || text.trim().length !== 0) {\r\n            if (this.support.rangeBounds && !container.parent.hasTransform()) {\r\n                var offset = textList.slice(0, index).join(\"\").length;\r\n                return this.getRangeBounds(container.node, offset, text.length);\r\n            } else if (container.node && typeof(container.node.data) === \"string\") {\r\n                var replacementNode = container.node.splitText(text.length);\r\n                var bounds = this.getWrapperBounds(container.node, container.parent.hasTransform());\r\n                container.node = replacementNode;\r\n                return bounds;\r\n            }\r\n        } else if(!this.support.rangeBounds || container.parent.hasTransform()){\r\n            container.node = container.node.splitText(text.length);\r\n        }\r\n        return {};\r\n    };\r\n};\r\n\r\nNodeParser.prototype.getWrapperBounds = function(node, transform) {\r\n    var wrapper = node.ownerDocument.createElement('html2canvaswrapper');\r\n    var parent = node.parentNode,\r\n        backupText = node.cloneNode(true);\r\n\r\n    wrapper.appendChild(node.cloneNode(true));\r\n    parent.replaceChild(wrapper, node);\r\n    var bounds = transform ? offsetBounds(wrapper) : getBounds(wrapper);\r\n    parent.replaceChild(backupText, wrapper);\r\n    return bounds;\r\n};\r\n\r\nNodeParser.prototype.getRangeBounds = function(node, offset, length) {\r\n    var range = this.range || (this.range = node.ownerDocument.createRange());\r\n    range.setStart(node, offset);\r\n    range.setEnd(node, offset + length);\r\n    return range.getBoundingClientRect();\r\n};\r\n\r\nfunction ClearTransform() {}\r\n\r\nNodeParser.prototype.parse = function(stack) {\r\n    // http://www.w3.org/TR/CSS21/visuren.html#z-index\r\n    var negativeZindex = stack.contexts.filter(negativeZIndex); // 2. the child stacking contexts with negative stack levels (most negative first).\r\n    var descendantElements = stack.children.filter(isElement);\r\n    var descendantNonFloats = descendantElements.filter(not(isFloating));\r\n    var nonInlineNonPositionedDescendants = descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)); // 3 the in-flow, non-inline-level, non-positioned descendants.\r\n    var nonPositionedFloats = descendantElements.filter(not(isPositioned)).filter(isFloating); // 4. the non-positioned floats.\r\n    var inFlow = descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel); // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\r\n    var stackLevel0 = stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0); // 6. the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.\r\n    var text = stack.children.filter(isTextNode).filter(hasText);\r\n    var positiveZindex = stack.contexts.filter(positiveZIndex); // 7. the child stacking contexts with positive stack levels (least positive first).\r\n    negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats)\r\n        .concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function(container) {\r\n            this.renderQueue.push(container);\r\n            if (isStackingContext(container)) {\r\n                this.parse(container);\r\n                this.renderQueue.push(new ClearTransform());\r\n            }\r\n        }, this);\r\n};\r\n\r\nNodeParser.prototype.paint = function(container) {\r\n    try {\r\n        if (container instanceof ClearTransform) {\r\n            this.renderer.ctx.restore();\r\n        } else if (isTextNode(container)) {\r\n            if (isPseudoElement(container.parent)) {\r\n                container.parent.appendToDOM();\r\n            }\r\n            this.paintText(container);\r\n            if (isPseudoElement(container.parent)) {\r\n                container.parent.cleanDOM();\r\n            }\r\n        } else {\r\n            this.paintNode(container);\r\n        }\r\n    } catch(e) {\r\n        log(e);\r\n        if (this.options.strict) {\r\n            throw e;\r\n        }\r\n    }\r\n};\r\n\r\nNodeParser.prototype.paintNode = function(container) {\r\n    if (isStackingContext(container)) {\r\n        this.renderer.setOpacity(container.opacity);\r\n        this.renderer.ctx.save();\r\n        if (container.hasTransform()) {\r\n            this.renderer.setTransform(container.parseTransform());\r\n        }\r\n    }\r\n\r\n    if (container.node.nodeName === \"INPUT\" && container.node.type === \"checkbox\") {\r\n        this.paintCheckbox(container);\r\n    } else if (container.node.nodeName === \"INPUT\" && container.node.type === \"radio\") {\r\n        this.paintRadio(container);\r\n    } else {\r\n        this.paintElement(container);\r\n    }\r\n};\r\n\r\nNodeParser.prototype.paintElement = function(container) {\r\n    var bounds = container.parseBounds();\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        this.renderer.renderBackground(container, bounds, container.borders.borders.map(getWidth));\r\n    }, this);\r\n\r\n    this.renderer.clip(container.clip, function() {\r\n        this.renderer.renderBorders(container.borders.borders);\r\n    }, this);\r\n\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        switch (container.node.nodeName) {\r\n        case \"svg\":\r\n        case \"IFRAME\":\r\n            var imgContainer = this.images.get(container.node);\r\n            if (imgContainer) {\r\n                this.renderer.renderImage(container, bounds, container.borders, imgContainer);\r\n            } else {\r\n                log(\"Error loading <\" + container.node.nodeName + \">\", container.node);\r\n            }\r\n            break;\r\n        case \"IMG\":\r\n            var imageContainer = this.images.get(container.node.src);\r\n            if (imageContainer) {\r\n                this.renderer.renderImage(container, bounds, container.borders, imageContainer);\r\n            } else {\r\n                log(\"Error loading <img>\", container.node.src);\r\n            }\r\n            break;\r\n        case \"CANVAS\":\r\n            this.renderer.renderImage(container, bounds, container.borders, {image: container.node});\r\n            break;\r\n        case \"SELECT\":\r\n        case \"INPUT\":\r\n        case \"TEXTAREA\":\r\n            this.paintFormValue(container);\r\n            break;\r\n        }\r\n    }, this);\r\n};\r\n\r\nNodeParser.prototype.paintCheckbox = function(container) {\r\n    var b = container.parseBounds();\r\n\r\n    var size = Math.min(b.width, b.height);\r\n    var bounds = {width: size - 1, height: size - 1, top: b.top, left: b.left};\r\n    var r = [3, 3];\r\n    var radius = [r, r, r, r];\r\n    var borders = [1,1,1,1].map(function(w) {\r\n        return {color: new Color('#A5A5A5'), width: w};\r\n    });\r\n\r\n    var borderPoints = calculateCurvePoints(bounds, radius, borders);\r\n\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        this.renderer.rectangle(bounds.left + 1, bounds.top + 1, bounds.width - 2, bounds.height - 2, new Color(\"#DEDEDE\"));\r\n        this.renderer.renderBorders(calculateBorders(borders, bounds, borderPoints, radius));\r\n        if (container.node.checked) {\r\n            this.renderer.font(new Color('#424242'), 'normal', 'normal', 'bold', (size - 3) + \"px\", 'arial');\r\n            this.renderer.text(\"\\u2714\", bounds.left + size / 6, bounds.top + size - 1);\r\n        }\r\n    }, this);\r\n};\r\n\r\nNodeParser.prototype.paintRadio = function(container) {\r\n    var bounds = container.parseBounds();\r\n\r\n    var size = Math.min(bounds.width, bounds.height) - 2;\r\n\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        this.renderer.circleStroke(bounds.left + 1, bounds.top + 1, size, new Color('#DEDEDE'), 1, new Color('#A5A5A5'));\r\n        if (container.node.checked) {\r\n            this.renderer.circle(Math.ceil(bounds.left + size / 4) + 1, Math.ceil(bounds.top + size / 4) + 1, Math.floor(size / 2), new Color('#424242'));\r\n        }\r\n    }, this);\r\n};\r\n\r\nNodeParser.prototype.paintFormValue = function(container) {\r\n    var value = container.getValue();\r\n    if (value.length > 0) {\r\n        var document = container.node.ownerDocument;\r\n        var wrapper = document.createElement('html2canvaswrapper');\r\n        var properties = ['lineHeight', 'textAlign', 'fontFamily', 'fontWeight', 'fontSize', 'color',\r\n            'paddingLeft', 'paddingTop', 'paddingRight', 'paddingBottom',\r\n            'width', 'height', 'borderLeftStyle', 'borderTopStyle', 'borderLeftWidth', 'borderTopWidth',\r\n            'boxSizing', 'whiteSpace', 'wordWrap'];\r\n\r\n        properties.forEach(function(property) {\r\n            try {\r\n                wrapper.style[property] = container.css(property);\r\n            } catch(e) {\r\n                // Older IE has issues with \"border\"\r\n                log(\"html2canvas: Parse: Exception caught in renderFormValue: \" + e.message);\r\n            }\r\n        });\r\n        var bounds = container.parseBounds();\r\n        wrapper.style.position = \"fixed\";\r\n        wrapper.style.left = bounds.left + \"px\";\r\n        wrapper.style.top = bounds.top + \"px\";\r\n        wrapper.textContent = value;\r\n        document.body.appendChild(wrapper);\r\n        this.paintText(new TextContainer(wrapper.firstChild, container));\r\n        document.body.removeChild(wrapper);\r\n    }\r\n};\r\n\r\nNodeParser.prototype.paintText = function(container) {\r\n    container.applyTextTransform();\r\n    var characters = punycode.ucs2.decode(container.node.data);\r\n    var textList = (!this.options.letterRendering || noLetterSpacing(container)) && !hasUnicode(container.node.data) ? getWords(characters) : characters.map(function(character) {\r\n        return punycode.ucs2.encode([character]);\r\n    });\r\n\r\n    var weight = container.parent.fontWeight();\r\n    var size = container.parent.css('fontSize');\r\n    var family = container.parent.css('fontFamily');\r\n    var shadows = container.parent.parseTextShadows();\r\n\r\n    this.renderer.font(container.parent.color('color'), container.parent.css('fontStyle'), container.parent.css('fontVariant'), weight, size, family);\r\n    if (shadows.length) {\r\n        // TODO: support multiple text shadows\r\n        this.renderer.fontShadow(shadows[0].color, shadows[0].offsetX, shadows[0].offsetY, shadows[0].blur);\r\n    } else {\r\n        this.renderer.clearShadow();\r\n    }\r\n\r\n    this.renderer.clip(container.parent.clip, function() {\r\n        textList.map(this.parseTextBounds(container), this).forEach(function(bounds, index) {\r\n            if (bounds) {\r\n                this.renderer.text(textList[index], bounds.left, bounds.bottom);\r\n                this.renderTextDecoration(container.parent, bounds, this.fontMetrics.getMetrics(family, size));\r\n            }\r\n        }, this);\r\n    }, this);\r\n};\r\n\r\nNodeParser.prototype.renderTextDecoration = function(container, bounds, metrics) {\r\n    switch(container.css(\"textDecoration\").split(\" \")[0]) {\r\n    case \"underline\":\r\n        // Draws a line at the baseline of the font\r\n        // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size\r\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\r\n        break;\r\n    case \"overline\":\r\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top), bounds.width, 1, container.color(\"color\"));\r\n        break;\r\n    case \"line-through\":\r\n        // TODO try and find exact position for line-through\r\n        this.renderer.rectangle(bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\r\n        break;\r\n    }\r\n};\r\n\r\nvar borderColorTransforms = {\r\n    inset: [\r\n        [\"darken\", 0.60],\r\n        [\"darken\", 0.10],\r\n        [\"darken\", 0.10],\r\n        [\"darken\", 0.60]\r\n    ]\r\n};\r\n\r\nNodeParser.prototype.parseBorders = function(container) {\r\n    var nodeBounds = container.parseBounds();\r\n    var radius = getBorderRadiusData(container);\r\n    var borders = [\"Top\", \"Right\", \"Bottom\", \"Left\"].map(function(side, index) {\r\n        var style = container.css('border' + side + 'Style');\r\n        var color = container.color('border' + side + 'Color');\r\n        if (style === \"inset\" && color.isBlack()) {\r\n            color = new Color([255, 255, 255, color.a]); // this is wrong, but\r\n        }\r\n        var colorTransform = borderColorTransforms[style] ? borderColorTransforms[style][index] : null;\r\n        return {\r\n            width: container.cssInt('border' + side + 'Width'),\r\n            color: colorTransform ? color[colorTransform[0]](colorTransform[1]) : color,\r\n            args: null\r\n        };\r\n    });\r\n    var borderPoints = calculateCurvePoints(nodeBounds, radius, borders);\r\n\r\n    return {\r\n        clip: this.parseBackgroundClip(container, borderPoints, borders, radius, nodeBounds),\r\n        borders: calculateBorders(borders, nodeBounds, borderPoints, radius)\r\n    };\r\n};\r\n\r\nfunction calculateBorders(borders, nodeBounds, borderPoints, radius) {\r\n    return borders.map(function(border, borderSide) {\r\n        if (border.width > 0) {\r\n            var bx = nodeBounds.left;\r\n            var by = nodeBounds.top;\r\n            var bw = nodeBounds.width;\r\n            var bh = nodeBounds.height - (borders[2].width);\r\n\r\n            switch(borderSide) {\r\n            case 0:\r\n                // top border\r\n                bh = borders[0].width;\r\n                border.args = drawSide({\r\n                        c1: [bx, by],\r\n                        c2: [bx + bw, by],\r\n                        c3: [bx + bw - borders[1].width, by + bh],\r\n                        c4: [bx + borders[3].width, by + bh]\r\n                    }, radius[0], radius[1],\r\n                    borderPoints.topLeftOuter, borderPoints.topLeftInner, borderPoints.topRightOuter, borderPoints.topRightInner);\r\n                break;\r\n            case 1:\r\n                // right border\r\n                bx = nodeBounds.left + nodeBounds.width - (borders[1].width);\r\n                bw = borders[1].width;\r\n\r\n                border.args = drawSide({\r\n                        c1: [bx + bw, by],\r\n                        c2: [bx + bw, by + bh + borders[2].width],\r\n                        c3: [bx, by + bh],\r\n                        c4: [bx, by + borders[0].width]\r\n                    }, radius[1], radius[2],\r\n                    borderPoints.topRightOuter, borderPoints.topRightInner, borderPoints.bottomRightOuter, borderPoints.bottomRightInner);\r\n                break;\r\n            case 2:\r\n                // bottom border\r\n                by = (by + nodeBounds.height) - (borders[2].width);\r\n                bh = borders[2].width;\r\n                border.args = drawSide({\r\n                        c1: [bx + bw, by + bh],\r\n                        c2: [bx, by + bh],\r\n                        c3: [bx + borders[3].width, by],\r\n                        c4: [bx + bw - borders[3].width, by]\r\n                    }, radius[2], radius[3],\r\n                    borderPoints.bottomRightOuter, borderPoints.bottomRightInner, borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner);\r\n                break;\r\n            case 3:\r\n                // left border\r\n                bw = borders[3].width;\r\n                border.args = drawSide({\r\n                        c1: [bx, by + bh + borders[2].width],\r\n                        c2: [bx, by],\r\n                        c3: [bx + bw, by + borders[0].width],\r\n                        c4: [bx + bw, by + bh]\r\n                    }, radius[3], radius[0],\r\n                    borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner, borderPoints.topLeftOuter, borderPoints.topLeftInner);\r\n                break;\r\n            }\r\n        }\r\n        return border;\r\n    });\r\n}\r\n\r\nNodeParser.prototype.parseBackgroundClip = function(container, borderPoints, borders, radius, bounds) {\r\n    var backgroundClip = container.css('backgroundClip'),\r\n        borderArgs = [];\r\n\r\n    switch(backgroundClip) {\r\n    case \"content-box\":\r\n    case \"padding-box\":\r\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftInner, borderPoints.topRightInner, bounds.left + borders[3].width, bounds.top + borders[0].width);\r\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightInner, borderPoints.bottomRightInner, bounds.left + bounds.width - borders[1].width, bounds.top + borders[0].width);\r\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightInner, borderPoints.bottomLeftInner, bounds.left + bounds.width - borders[1].width, bounds.top + bounds.height - borders[2].width);\r\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftInner, borderPoints.topLeftInner, bounds.left + borders[3].width, bounds.top + bounds.height - borders[2].width);\r\n        break;\r\n\r\n    default:\r\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);\r\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);\r\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomLeftOuter, bounds.left + bounds.width, bounds.top + bounds.height);\r\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);\r\n        break;\r\n    }\r\n\r\n    return borderArgs;\r\n};\r\n\r\nfunction getCurvePoints(x, y, r1, r2) {\r\n    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\r\n    var ox = (r1) * kappa, // control point offset horizontal\r\n        oy = (r2) * kappa, // control point offset vertical\r\n        xm = x + r1, // x-middle\r\n        ym = y + r2; // y-middle\r\n    return {\r\n        topLeft: bezierCurve({x: x, y: ym}, {x: x, y: ym - oy}, {x: xm - ox, y: y}, {x: xm, y: y}),\r\n        topRight: bezierCurve({x: x, y: y}, {x: x + ox,y: y}, {x: xm, y: ym - oy}, {x: xm, y: ym}),\r\n        bottomRight: bezierCurve({x: xm, y: y}, {x: xm, y: y + oy}, {x: x + ox, y: ym}, {x: x, y: ym}),\r\n        bottomLeft: bezierCurve({x: xm, y: ym}, {x: xm - ox, y: ym}, {x: x, y: y + oy}, {x: x, y:y})\r\n    };\r\n}\r\n\r\nfunction calculateCurvePoints(bounds, borderRadius, borders) {\r\n    var x = bounds.left,\r\n        y = bounds.top,\r\n        width = bounds.width,\r\n        height = bounds.height,\r\n\r\n        tlh = borderRadius[0][0] < width / 2 ? borderRadius[0][0] : width / 2,\r\n        tlv = borderRadius[0][1] < height / 2 ? borderRadius[0][1] : height / 2,\r\n        trh = borderRadius[1][0] < width / 2 ? borderRadius[1][0] : width / 2,\r\n        trv = borderRadius[1][1] < height / 2 ? borderRadius[1][1] : height / 2,\r\n        brh = borderRadius[2][0] < width / 2 ? borderRadius[2][0] : width / 2,\r\n        brv = borderRadius[2][1] < height / 2 ? borderRadius[2][1] : height / 2,\r\n        blh = borderRadius[3][0] < width / 2 ? borderRadius[3][0] : width / 2,\r\n        blv = borderRadius[3][1] < height / 2 ? borderRadius[3][1] : height / 2;\r\n\r\n    var topWidth = width - trh,\r\n        rightHeight = height - brv,\r\n        bottomWidth = width - brh,\r\n        leftHeight = height - blv;\r\n\r\n    return {\r\n        topLeftOuter: getCurvePoints(x, y, tlh, tlv).topLeft.subdivide(0.5),\r\n        topLeftInner: getCurvePoints(x + borders[3].width, y + borders[0].width, Math.max(0, tlh - borders[3].width), Math.max(0, tlv - borders[0].width)).topLeft.subdivide(0.5),\r\n        topRightOuter: getCurvePoints(x + topWidth, y, trh, trv).topRight.subdivide(0.5),\r\n        topRightInner: getCurvePoints(x + Math.min(topWidth, width + borders[3].width), y + borders[0].width, (topWidth > width + borders[3].width) ? 0 :trh - borders[3].width, trv - borders[0].width).topRight.subdivide(0.5),\r\n        bottomRightOuter: getCurvePoints(x + bottomWidth, y + rightHeight, brh, brv).bottomRight.subdivide(0.5),\r\n        bottomRightInner: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width), y + Math.min(rightHeight, height + borders[0].width), Math.max(0, brh - borders[1].width),  brv - borders[2].width).bottomRight.subdivide(0.5),\r\n        bottomLeftOuter: getCurvePoints(x, y + leftHeight, blh, blv).bottomLeft.subdivide(0.5),\r\n        bottomLeftInner: getCurvePoints(x + borders[3].width, y + leftHeight, Math.max(0, blh - borders[3].width), blv - borders[2].width).bottomLeft.subdivide(0.5)\r\n    };\r\n}\r\n\r\nfunction bezierCurve(start, startControl, endControl, end) {\r\n    var lerp = function (a, b, t) {\r\n        return {\r\n            x: a.x + (b.x - a.x) * t,\r\n            y: a.y + (b.y - a.y) * t\r\n        };\r\n    };\r\n\r\n    return {\r\n        start: start,\r\n        startControl: startControl,\r\n        endControl: endControl,\r\n        end: end,\r\n        subdivide: function(t) {\r\n            var ab = lerp(start, startControl, t),\r\n                bc = lerp(startControl, endControl, t),\r\n                cd = lerp(endControl, end, t),\r\n                abbc = lerp(ab, bc, t),\r\n                bccd = lerp(bc, cd, t),\r\n                dest = lerp(abbc, bccd, t);\r\n            return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];\r\n        },\r\n        curveTo: function(borderArgs) {\r\n            borderArgs.push([\"bezierCurve\", startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);\r\n        },\r\n        curveToReversed: function(borderArgs) {\r\n            borderArgs.push([\"bezierCurve\", endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);\r\n        }\r\n    };\r\n}\r\n\r\nfunction drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {\r\n    var borderArgs = [];\r\n\r\n    if (radius1[0] > 0 || radius1[1] > 0) {\r\n        borderArgs.push([\"line\", outer1[1].start.x, outer1[1].start.y]);\r\n        outer1[1].curveTo(borderArgs);\r\n    } else {\r\n        borderArgs.push([ \"line\", borderData.c1[0], borderData.c1[1]]);\r\n    }\r\n\r\n    if (radius2[0] > 0 || radius2[1] > 0) {\r\n        borderArgs.push([\"line\", outer2[0].start.x, outer2[0].start.y]);\r\n        outer2[0].curveTo(borderArgs);\r\n        borderArgs.push([\"line\", inner2[0].end.x, inner2[0].end.y]);\r\n        inner2[0].curveToReversed(borderArgs);\r\n    } else {\r\n        borderArgs.push([\"line\", borderData.c2[0], borderData.c2[1]]);\r\n        borderArgs.push([\"line\", borderData.c3[0], borderData.c3[1]]);\r\n    }\r\n\r\n    if (radius1[0] > 0 || radius1[1] > 0) {\r\n        borderArgs.push([\"line\", inner1[1].end.x, inner1[1].end.y]);\r\n        inner1[1].curveToReversed(borderArgs);\r\n    } else {\r\n        borderArgs.push([\"line\", borderData.c4[0], borderData.c4[1]]);\r\n    }\r\n\r\n    return borderArgs;\r\n}\r\n\r\nfunction parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {\r\n    if (radius1[0] > 0 || radius1[1] > 0) {\r\n        borderArgs.push([\"line\", corner1[0].start.x, corner1[0].start.y]);\r\n        corner1[0].curveTo(borderArgs);\r\n        corner1[1].curveTo(borderArgs);\r\n    } else {\r\n        borderArgs.push([\"line\", x, y]);\r\n    }\r\n\r\n    if (radius2[0] > 0 || radius2[1] > 0) {\r\n        borderArgs.push([\"line\", corner2[0].start.x, corner2[0].start.y]);\r\n    }\r\n}\r\n\r\nfunction negativeZIndex(container) {\r\n    return container.cssInt(\"zIndex\") < 0;\r\n}\r\n\r\nfunction positiveZIndex(container) {\r\n    return container.cssInt(\"zIndex\") > 0;\r\n}\r\n\r\nfunction zIndex0(container) {\r\n    return container.cssInt(\"zIndex\") === 0;\r\n}\r\n\r\nfunction inlineLevel(container) {\r\n    return [\"inline\", \"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\r\n}\r\n\r\nfunction isStackingContext(container) {\r\n    return (container instanceof StackingContext);\r\n}\r\n\r\nfunction hasText(container) {\r\n    return container.node.data.trim().length > 0;\r\n}\r\n\r\nfunction noLetterSpacing(container) {\r\n    return (/^(normal|none|0px)$/.test(container.parent.css(\"letterSpacing\")));\r\n}\r\n\r\nfunction getBorderRadiusData(container) {\r\n    return [\"TopLeft\", \"TopRight\", \"BottomRight\", \"BottomLeft\"].map(function(side) {\r\n        var value = container.css('border' + side + 'Radius');\r\n        var arr = value.split(\" \");\r\n        if (arr.length <= 1) {\r\n            arr[1] = arr[0];\r\n        }\r\n        return arr.map(asInt);\r\n    });\r\n}\r\n\r\nfunction renderableNode(node) {\r\n    return (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE);\r\n}\r\n\r\nfunction isPositionedForStacking(container) {\r\n    var position = container.css(\"position\");\r\n    var zIndex = ([\"absolute\", \"relative\", \"fixed\"].indexOf(position) !== -1) ? container.css(\"zIndex\") : \"auto\";\r\n    return zIndex !== \"auto\";\r\n}\r\n\r\nfunction isPositioned(container) {\r\n    return container.css(\"position\") !== \"static\";\r\n}\r\n\r\nfunction isFloating(container) {\r\n    return container.css(\"float\") !== \"none\";\r\n}\r\n\r\nfunction isInlineBlock(container) {\r\n    return [\"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\r\n}\r\n\r\nfunction not(callback) {\r\n    var context = this;\r\n    return function() {\r\n        return !callback.apply(context, arguments);\r\n    };\r\n}\r\n\r\nfunction isElement(container) {\r\n    return container.node.nodeType === Node.ELEMENT_NODE;\r\n}\r\n\r\nfunction isPseudoElement(container) {\r\n    return container.isPseudoElement === true;\r\n}\r\n\r\nfunction isTextNode(container) {\r\n    return container.node.nodeType === Node.TEXT_NODE;\r\n}\r\n\r\nfunction zIndexSort(contexts) {\r\n    return function(a, b) {\r\n        return (a.cssInt(\"zIndex\") + (contexts.indexOf(a) / contexts.length)) - (b.cssInt(\"zIndex\") + (contexts.indexOf(b) / contexts.length));\r\n    };\r\n}\r\n\r\nfunction hasOpacity(container) {\r\n    return container.getOpacity() < 1;\r\n}\r\n\r\nfunction asInt(value) {\r\n    return parseInt(value, 10);\r\n}\r\n\r\nfunction getWidth(border) {\r\n    return border.width;\r\n}\r\n\r\nfunction nonIgnoredElement(nodeContainer) {\r\n    return (nodeContainer.node.nodeType !== Node.ELEMENT_NODE || [\"SCRIPT\", \"HEAD\", \"TITLE\", \"OBJECT\", \"BR\", \"OPTION\"].indexOf(nodeContainer.node.nodeName) === -1);\r\n}\r\n\r\nfunction flatten(arrays) {\r\n    return [].concat.apply([], arrays);\r\n}\r\n\r\nfunction stripQuotes(content) {\r\n    var first = content.substr(0, 1);\r\n    return (first === content.substr(content.length - 1) && first.match(/'|\"/)) ? content.substr(1, content.length - 2) : content;\r\n}\r\n\r\nfunction getWords(characters) {\r\n    var words = [], i = 0, onWordBoundary = false, word;\r\n    while(characters.length) {\r\n        if (isWordBoundary(characters[i]) === onWordBoundary) {\r\n            word = characters.splice(0, i);\r\n            if (word.length) {\r\n                words.push(punycode.ucs2.encode(word));\r\n            }\r\n            onWordBoundary =! onWordBoundary;\r\n            i = 0;\r\n        } else {\r\n            i++;\r\n        }\r\n\r\n        if (i >= characters.length) {\r\n            word = characters.splice(0, i);\r\n            if (word.length) {\r\n                words.push(punycode.ucs2.encode(word));\r\n            }\r\n        }\r\n    }\r\n    return words;\r\n}\r\n\r\nfunction isWordBoundary(characterCode) {\r\n    return [\r\n        32, // <space>\r\n        13, // \\r\r\n        10, // \\n\r\n        9, // \\t\r\n        45 // -\r\n    ].indexOf(characterCode) !== -1;\r\n}\r\n\r\nfunction hasUnicode(string) {\r\n    return (/[^\\u0000-\\u00ff]/).test(string);\r\n}\r\n\r\nmodule.exports = NodeParser;\r\n\r\n},{\"./color\":4,\"./fontmetrics\":7,\"./log\":13,\"./nodecontainer\":14,\"./pseudoelementcontainer\":18,\"./stackingcontext\":21,\"./textcontainer\":25,\"./utils\":26,\"punycode\":2}],16:[function(_dereq_,module,exports){\r\nvar XHR = _dereq_('./xhr');\r\nvar utils = _dereq_('./utils');\r\nvar log = _dereq_('./log');\r\nvar createWindowClone = _dereq_('./clone');\r\nvar decode64 = utils.decode64;\r\n\r\nfunction Proxy(src, proxyUrl, document) {\r\n    var supportsCORS = ('withCredentials' in new XMLHttpRequest());\r\n    if (!proxyUrl) {\r\n        return Promise.reject(\"No proxy configured\");\r\n    }\r\n    var callback = createCallback(supportsCORS);\r\n    var url = createProxyUrl(proxyUrl, src, callback);\r\n\r\n    return supportsCORS ? XHR(url) : (jsonp(document, url, callback).then(function(response) {\r\n        return decode64(response.content);\r\n    }));\r\n}\r\nvar proxyCount = 0;\r\n\r\nfunction ProxyURL(src, proxyUrl, document) {\r\n    var supportsCORSImage = ('crossOrigin' in new Image());\r\n    var callback = createCallback(supportsCORSImage);\r\n    var url = createProxyUrl(proxyUrl, src, callback);\r\n    return (supportsCORSImage ? Promise.resolve(url) : jsonp(document, url, callback).then(function(response) {\r\n        return \"data:\" + response.type + \";base64,\" + response.content;\r\n    }));\r\n}\r\n\r\nfunction jsonp(document, url, callback) {\r\n    return new Promise(function(resolve, reject) {\r\n        var s = document.createElement(\"script\");\r\n        var cleanup = function() {\r\n            delete window.html2canvas.proxy[callback];\r\n            document.body.removeChild(s);\r\n        };\r\n        window.html2canvas.proxy[callback] = function(response) {\r\n            cleanup();\r\n            resolve(response);\r\n        };\r\n        s.src = url;\r\n        s.onerror = function(e) {\r\n            cleanup();\r\n            reject(e);\r\n        };\r\n        document.body.appendChild(s);\r\n    });\r\n}\r\n\r\nfunction createCallback(useCORS) {\r\n    return !useCORS ? \"html2canvas_\" + Date.now() + \"_\" + (++proxyCount) + \"_\" + Math.round(Math.random() * 100000) : \"\";\r\n}\r\n\r\nfunction createProxyUrl(proxyUrl, src, callback) {\r\n    return proxyUrl + \"?url=\" + encodeURIComponent(src) + (callback.length ? \"&callback=html2canvas.proxy.\" + callback : \"\");\r\n}\r\n\r\nfunction documentFromHTML(src) {\r\n    return function(html) {\r\n        var parser = new DOMParser(), doc;\r\n        try {\r\n            doc = parser.parseFromString(html, \"text/html\");\r\n        } catch(e) {\r\n            log(\"DOMParser not supported, falling back to createHTMLDocument\");\r\n            doc = document.implementation.createHTMLDocument(\"\");\r\n            try {\r\n                doc.open();\r\n                doc.write(html);\r\n                doc.close();\r\n            } catch(ee) {\r\n                log(\"createHTMLDocument write not supported, falling back to document.body.innerHTML\");\r\n                doc.body.innerHTML = html; // ie9 doesnt support writing to documentElement\r\n            }\r\n        }\r\n\r\n        var b = doc.querySelector(\"base\");\r\n        if (!b || !b.href.host) {\r\n            var base = doc.createElement(\"base\");\r\n            base.href = src;\r\n            doc.head.insertBefore(base, doc.head.firstChild);\r\n        }\r\n\r\n        return doc;\r\n    };\r\n}\r\n\r\nfunction loadUrlDocument(src, proxy, document, width, height, options) {\r\n    return new Proxy(src, proxy, window.document).then(documentFromHTML(src)).then(function(doc) {\r\n        return createWindowClone(doc, document, width, height, options, 0, 0);\r\n    });\r\n}\r\n\r\nexports.Proxy = Proxy;\r\nexports.ProxyURL = ProxyURL;\r\nexports.loadUrlDocument = loadUrlDocument;\r\n\r\n},{\"./clone\":3,\"./log\":13,\"./utils\":26,\"./xhr\":28}],17:[function(_dereq_,module,exports){\r\nvar ProxyURL = _dereq_('./proxy').ProxyURL;\r\n\r\nfunction ProxyImageContainer(src, proxy) {\r\n    var link = document.createElement(\"a\");\r\n    link.href = src;\r\n    src = link.href;\r\n    this.src = src;\r\n    this.image = new Image();\r\n    var self = this;\r\n    this.promise = new Promise(function(resolve, reject) {\r\n        self.image.crossOrigin = \"Anonymous\";\r\n        self.image.onload = resolve;\r\n        self.image.onerror = reject;\r\n\r\n        new ProxyURL(src, proxy, document).then(function(url) {\r\n            self.image.src = url;\r\n        })['catch'](reject);\r\n    });\r\n}\r\n\r\nmodule.exports = ProxyImageContainer;\r\n\r\n},{\"./proxy\":16}],18:[function(_dereq_,module,exports){\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\n\r\nfunction PseudoElementContainer(node, parent, type) {\r\n    NodeContainer.call(this, node, parent);\r\n    this.isPseudoElement = true;\r\n    this.before = type === \":before\";\r\n}\r\n\r\nPseudoElementContainer.prototype.cloneTo = function(stack) {\r\n    PseudoElementContainer.prototype.cloneTo.call(this, stack);\r\n    stack.isPseudoElement = true;\r\n    stack.before = this.before;\r\n};\r\n\r\nPseudoElementContainer.prototype = Object.create(NodeContainer.prototype);\r\n\r\nPseudoElementContainer.prototype.appendToDOM = function() {\r\n    if (this.before) {\r\n        this.parent.node.insertBefore(this.node, this.parent.node.firstChild);\r\n    } else {\r\n        this.parent.node.appendChild(this.node);\r\n    }\r\n    this.parent.node.className += \" \" + this.getHideClass();\r\n};\r\n\r\nPseudoElementContainer.prototype.cleanDOM = function() {\r\n    this.node.parentNode.removeChild(this.node);\r\n    this.parent.node.className = this.parent.node.className.replace(this.getHideClass(), \"\");\r\n};\r\n\r\nPseudoElementContainer.prototype.getHideClass = function() {\r\n    return this[\"PSEUDO_HIDE_ELEMENT_CLASS_\" + (this.before ? \"BEFORE\" : \"AFTER\")];\r\n};\r\n\r\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = \"___html2canvas___pseudoelement_before\";\r\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER = \"___html2canvas___pseudoelement_after\";\r\n\r\nmodule.exports = PseudoElementContainer;\r\n\r\n},{\"./nodecontainer\":14}],19:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\n\r\nfunction Renderer(width, height, images, options, document) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.images = images;\r\n    this.options = options;\r\n    this.document = document;\r\n}\r\n\r\nRenderer.prototype.renderImage = function(container, bounds, borderData, imageContainer) {\r\n    var paddingLeft = container.cssInt('paddingLeft'),\r\n        paddingTop = container.cssInt('paddingTop'),\r\n        paddingRight = container.cssInt('paddingRight'),\r\n        paddingBottom = container.cssInt('paddingBottom'),\r\n        borders = borderData.borders;\r\n\r\n    var width = bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight);\r\n    var height = bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom);\r\n    this.drawImage(\r\n        imageContainer,\r\n        0,\r\n        0,\r\n        imageContainer.image.width || width,\r\n        imageContainer.image.height || height,\r\n        bounds.left + paddingLeft + borders[3].width,\r\n        bounds.top + paddingTop + borders[0].width,\r\n        width,\r\n        height\r\n    );\r\n};\r\n\r\nRenderer.prototype.renderBackground = function(container, bounds, borderData) {\r\n    if (bounds.height > 0 && bounds.width > 0) {\r\n        this.renderBackgroundColor(container, bounds);\r\n        this.renderBackgroundImage(container, bounds, borderData);\r\n    }\r\n};\r\n\r\nRenderer.prototype.renderBackgroundColor = function(container, bounds) {\r\n    var color = container.color(\"backgroundColor\");\r\n    if (!color.isTransparent()) {\r\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, color);\r\n    }\r\n};\r\n\r\nRenderer.prototype.renderBorders = function(borders) {\r\n    borders.forEach(this.renderBorder, this);\r\n};\r\n\r\nRenderer.prototype.renderBorder = function(data) {\r\n    if (!data.color.isTransparent() && data.args !== null) {\r\n        this.drawShape(data.args, data.color);\r\n    }\r\n};\r\n\r\nRenderer.prototype.renderBackgroundImage = function(container, bounds, borderData) {\r\n    var backgroundImages = container.parseBackgroundImages();\r\n    backgroundImages.reverse().forEach(function(backgroundImage, index, arr) {\r\n        switch(backgroundImage.method) {\r\n        case \"url\":\r\n            var image = this.images.get(backgroundImage.args[0]);\r\n            if (image) {\r\n                this.renderBackgroundRepeating(container, bounds, image, arr.length - (index+1), borderData);\r\n            } else {\r\n                log(\"Error loading background-image\", backgroundImage.args[0]);\r\n            }\r\n            break;\r\n        case \"linear-gradient\":\r\n        case \"gradient\":\r\n            var gradientImage = this.images.get(backgroundImage.value);\r\n            if (gradientImage) {\r\n                this.renderBackgroundGradient(gradientImage, bounds, borderData);\r\n            } else {\r\n                log(\"Error loading background-image\", backgroundImage.args[0]);\r\n            }\r\n            break;\r\n        case \"none\":\r\n            break;\r\n        default:\r\n            log(\"Unknown background-image type\", backgroundImage.args[0]);\r\n        }\r\n    }, this);\r\n};\r\n\r\nRenderer.prototype.renderBackgroundRepeating = function(container, bounds, imageContainer, index, borderData) {\r\n    var size = container.parseBackgroundSize(bounds, imageContainer.image, index);\r\n    var position = container.parseBackgroundPosition(bounds, imageContainer.image, index, size);\r\n    var repeat = container.parseBackgroundRepeat(index);\r\n    switch (repeat) {\r\n    case \"repeat-x\":\r\n    case \"repeat no-repeat\":\r\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + borderData[3], bounds.top + position.top + borderData[0], 99999, size.height, borderData);\r\n        break;\r\n    case \"repeat-y\":\r\n    case \"no-repeat repeat\":\r\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + borderData[0], size.width, 99999, borderData);\r\n        break;\r\n    case \"no-repeat\":\r\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + position.top + borderData[0], size.width, size.height, borderData);\r\n        break;\r\n    default:\r\n        this.renderBackgroundRepeat(imageContainer, position, size, {top: bounds.top, left: bounds.left}, borderData[3], borderData[0]);\r\n        break;\r\n    }\r\n};\r\n\r\nmodule.exports = Renderer;\r\n\r\n},{\"./log\":13}],20:[function(_dereq_,module,exports){\r\nvar Renderer = _dereq_('../renderer');\r\nvar LinearGradientContainer = _dereq_('../lineargradientcontainer');\r\nvar log = _dereq_('../log');\r\n\r\nfunction CanvasRenderer(width, height) {\r\n    Renderer.apply(this, arguments);\r\n    this.canvas = this.options.canvas || this.document.createElement(\"canvas\");\r\n    if (!this.options.canvas) {\r\n        this.canvas.width = width;\r\n        this.canvas.height = height;\r\n    }\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n    this.taintCtx = this.document.createElement(\"canvas\").getContext(\"2d\");\r\n    this.ctx.textBaseline = \"bottom\";\r\n    this.variables = {};\r\n    log(\"Initialized CanvasRenderer with size\", width, \"x\", height);\r\n}\r\n\r\nCanvasRenderer.prototype = Object.create(Renderer.prototype);\r\n\r\nCanvasRenderer.prototype.setFillStyle = function(fillStyle) {\r\n    this.ctx.fillStyle = typeof(fillStyle) === \"object\" && !!fillStyle.isColor ? fillStyle.toString() : fillStyle;\r\n    return this.ctx;\r\n};\r\n\r\nCanvasRenderer.prototype.rectangle = function(left, top, width, height, color) {\r\n    this.setFillStyle(color).fillRect(left, top, width, height);\r\n};\r\n\r\nCanvasRenderer.prototype.circle = function(left, top, size, color) {\r\n    this.setFillStyle(color);\r\n    this.ctx.beginPath();\r\n    this.ctx.arc(left + size / 2, top + size / 2, size / 2, 0, Math.PI*2, true);\r\n    this.ctx.closePath();\r\n    this.ctx.fill();\r\n};\r\n\r\nCanvasRenderer.prototype.circleStroke = function(left, top, size, color, stroke, strokeColor) {\r\n    this.circle(left, top, size, color);\r\n    this.ctx.strokeStyle = strokeColor.toString();\r\n    this.ctx.stroke();\r\n};\r\n\r\nCanvasRenderer.prototype.drawShape = function(shape, color) {\r\n    this.shape(shape);\r\n    this.setFillStyle(color).fill();\r\n};\r\n\r\nCanvasRenderer.prototype.taints = function(imageContainer) {\r\n    if (imageContainer.tainted === null) {\r\n        this.taintCtx.drawImage(imageContainer.image, 0, 0);\r\n        try {\r\n            this.taintCtx.getImageData(0, 0, 1, 1);\r\n            imageContainer.tainted = false;\r\n        } catch(e) {\r\n            this.taintCtx = document.createElement(\"canvas\").getContext(\"2d\");\r\n            imageContainer.tainted = true;\r\n        }\r\n    }\r\n\r\n    return imageContainer.tainted;\r\n};\r\n\r\nCanvasRenderer.prototype.drawImage = function(imageContainer, sx, sy, sw, sh, dx, dy, dw, dh) {\r\n    if (!this.taints(imageContainer) || this.options.allowTaint) {\r\n        this.ctx.drawImage(imageContainer.image, sx, sy, sw, sh, dx, dy, dw, dh);\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.clip = function(shapes, callback, context) {\r\n    this.ctx.save();\r\n    shapes.filter(hasEntries).forEach(function(shape) {\r\n        this.shape(shape).clip();\r\n    }, this);\r\n    callback.call(context);\r\n    this.ctx.restore();\r\n};\r\n\r\nCanvasRenderer.prototype.shape = function(shape) {\r\n    this.ctx.beginPath();\r\n    shape.forEach(function(point, index) {\r\n        if (point[0] === \"rect\") {\r\n            this.ctx.rect.apply(this.ctx, point.slice(1));\r\n        } else {\r\n            this.ctx[(index === 0) ? \"moveTo\" : point[0] + \"To\" ].apply(this.ctx, point.slice(1));\r\n        }\r\n    }, this);\r\n    this.ctx.closePath();\r\n    return this.ctx;\r\n};\r\n\r\nCanvasRenderer.prototype.font = function(color, style, variant, weight, size, family) {\r\n    this.setFillStyle(color).font = [style, variant, weight, size, family].join(\" \").split(\",\")[0];\r\n};\r\n\r\nCanvasRenderer.prototype.fontShadow = function(color, offsetX, offsetY, blur) {\r\n    this.setVariable(\"shadowColor\", color.toString())\r\n        .setVariable(\"shadowOffsetY\", offsetX)\r\n        .setVariable(\"shadowOffsetX\", offsetY)\r\n        .setVariable(\"shadowBlur\", blur);\r\n};\r\n\r\nCanvasRenderer.prototype.clearShadow = function() {\r\n    this.setVariable(\"shadowColor\", \"rgba(0,0,0,0)\");\r\n};\r\n\r\nCanvasRenderer.prototype.setOpacity = function(opacity) {\r\n    this.ctx.globalAlpha = opacity;\r\n};\r\n\r\nCanvasRenderer.prototype.setTransform = function(transform) {\r\n    this.ctx.translate(transform.origin[0], transform.origin[1]);\r\n    this.ctx.transform.apply(this.ctx, transform.matrix);\r\n    this.ctx.translate(-transform.origin[0], -transform.origin[1]);\r\n};\r\n\r\nCanvasRenderer.prototype.setVariable = function(property, value) {\r\n    if (this.variables[property] !== value) {\r\n        this.variables[property] = this.ctx[property] = value;\r\n    }\r\n\r\n    return this;\r\n};\r\n\r\nCanvasRenderer.prototype.text = function(text, left, bottom) {\r\n    this.ctx.fillText(text, left, bottom);\r\n};\r\n\r\nCanvasRenderer.prototype.backgroundRepeatShape = function(imageContainer, backgroundPosition, size, bounds, left, top, width, height, borderData) {\r\n    var shape = [\r\n        [\"line\", Math.round(left), Math.round(top)],\r\n        [\"line\", Math.round(left + width), Math.round(top)],\r\n        [\"line\", Math.round(left + width), Math.round(height + top)],\r\n        [\"line\", Math.round(left), Math.round(height + top)]\r\n    ];\r\n    this.clip([shape], function() {\r\n        this.renderBackgroundRepeat(imageContainer, backgroundPosition, size, bounds, borderData[3], borderData[0]);\r\n    }, this);\r\n};\r\n\r\nCanvasRenderer.prototype.renderBackgroundRepeat = function(imageContainer, backgroundPosition, size, bounds, borderLeft, borderTop) {\r\n    var offsetX = Math.round(bounds.left + backgroundPosition.left + borderLeft), offsetY = Math.round(bounds.top + backgroundPosition.top + borderTop);\r\n    this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer, size), \"repeat\"));\r\n    this.ctx.translate(offsetX, offsetY);\r\n    this.ctx.fill();\r\n    this.ctx.translate(-offsetX, -offsetY);\r\n};\r\n\r\nCanvasRenderer.prototype.renderBackgroundGradient = function(gradientImage, bounds) {\r\n    if (gradientImage instanceof LinearGradientContainer) {\r\n        var gradient = this.ctx.createLinearGradient(\r\n            bounds.left + bounds.width * gradientImage.x0,\r\n            bounds.top + bounds.height * gradientImage.y0,\r\n            bounds.left +  bounds.width * gradientImage.x1,\r\n            bounds.top +  bounds.height * gradientImage.y1);\r\n        gradientImage.colorStops.forEach(function(colorStop) {\r\n            gradient.addColorStop(colorStop.stop, colorStop.color.toString());\r\n        });\r\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, gradient);\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.resizeImage = function(imageContainer, size) {\r\n    var image = imageContainer.image;\r\n    if(image.width === size.width && image.height === size.height) {\r\n        return image;\r\n    }\r\n\r\n    var ctx, canvas = document.createElement('canvas');\r\n    canvas.width = size.width;\r\n    canvas.height = size.height;\r\n    ctx = canvas.getContext(\"2d\");\r\n    ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height );\r\n    return canvas;\r\n};\r\n\r\nfunction hasEntries(array) {\r\n    return array.length > 0;\r\n}\r\n\r\nmodule.exports = CanvasRenderer;\r\n\r\n},{\"../lineargradientcontainer\":12,\"../log\":13,\"../renderer\":19}],21:[function(_dereq_,module,exports){\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\n\r\nfunction StackingContext(hasOwnStacking, opacity, element, parent) {\r\n    NodeContainer.call(this, element, parent);\r\n    this.ownStacking = hasOwnStacking;\r\n    this.contexts = [];\r\n    this.children = [];\r\n    this.opacity = (this.parent ? this.parent.stack.opacity : 1) * opacity;\r\n}\r\n\r\nStackingContext.prototype = Object.create(NodeContainer.prototype);\r\n\r\nStackingContext.prototype.getParentStack = function(context) {\r\n    var parentStack = (this.parent) ? this.parent.stack : null;\r\n    return parentStack ? (parentStack.ownStacking ? parentStack : parentStack.getParentStack(context)) : context.stack;\r\n};\r\n\r\nmodule.exports = StackingContext;\r\n\r\n},{\"./nodecontainer\":14}],22:[function(_dereq_,module,exports){\r\nfunction Support(document) {\r\n    this.rangeBounds = this.testRangeBounds(document);\r\n    this.cors = this.testCORS();\r\n    this.svg = this.testSVG();\r\n}\r\n\r\nSupport.prototype.testRangeBounds = function(document) {\r\n    var range, testElement, rangeBounds, rangeHeight, support = false;\r\n\r\n    if (document.createRange) {\r\n        range = document.createRange();\r\n        if (range.getBoundingClientRect) {\r\n            testElement = document.createElement('boundtest');\r\n            testElement.style.height = \"123px\";\r\n            testElement.style.display = \"block\";\r\n            document.body.appendChild(testElement);\r\n\r\n            range.selectNode(testElement);\r\n            rangeBounds = range.getBoundingClientRect();\r\n            rangeHeight = rangeBounds.height;\r\n\r\n            if (rangeHeight === 123) {\r\n                support = true;\r\n            }\r\n            document.body.removeChild(testElement);\r\n        }\r\n    }\r\n\r\n    return support;\r\n};\r\n\r\nSupport.prototype.testCORS = function() {\r\n    return typeof((new Image()).crossOrigin) !== \"undefined\";\r\n};\r\n\r\nSupport.prototype.testSVG = function() {\r\n    var img = new Image();\r\n    var canvas = document.createElement(\"canvas\");\r\n    var ctx =  canvas.getContext(\"2d\");\r\n    img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\r\n\r\n    try {\r\n        ctx.drawImage(img, 0, 0);\r\n        canvas.toDataURL();\r\n    } catch(e) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n\r\nmodule.exports = Support;\r\n\r\n},{}],23:[function(_dereq_,module,exports){\r\nvar XHR = _dereq_('./xhr');\r\nvar decode64 = _dereq_('./utils').decode64;\r\n\r\nfunction SVGContainer(src) {\r\n    this.src = src;\r\n    this.image = null;\r\n    var self = this;\r\n\r\n    this.promise = this.hasFabric().then(function() {\r\n        return (self.isInline(src) ? Promise.resolve(self.inlineFormatting(src)) : XHR(src));\r\n    }).then(function(svg) {\r\n        return new Promise(function(resolve) {\r\n            window.html2canvas.svg.fabric.loadSVGFromString(svg, self.createCanvas.call(self, resolve));\r\n        });\r\n    });\r\n}\r\n\r\nSVGContainer.prototype.hasFabric = function() {\r\n    return !window.html2canvas.svg || !window.html2canvas.svg.fabric ? Promise.reject(new Error(\"html2canvas.svg.js is not loaded, cannot render svg\")) : Promise.resolve();\r\n};\r\n\r\nSVGContainer.prototype.inlineFormatting = function(src) {\r\n    return (/^data:image\\/svg\\+xml;base64,/.test(src)) ? this.decode64(this.removeContentType(src)) : this.removeContentType(src);\r\n};\r\n\r\nSVGContainer.prototype.removeContentType = function(src) {\r\n    return src.replace(/^data:image\\/svg\\+xml(;base64)?,/,'');\r\n};\r\n\r\nSVGContainer.prototype.isInline = function(src) {\r\n    return (/^data:image\\/svg\\+xml/i.test(src));\r\n};\r\n\r\nSVGContainer.prototype.createCanvas = function(resolve) {\r\n    var self = this;\r\n    return function (objects, options) {\r\n        var canvas = new window.html2canvas.svg.fabric.StaticCanvas('c');\r\n        self.image = canvas.lowerCanvasEl;\r\n        canvas\r\n            .setWidth(options.width)\r\n            .setHeight(options.height)\r\n            .add(window.html2canvas.svg.fabric.util.groupSVGElements(objects, options))\r\n            .renderAll();\r\n        resolve(canvas.lowerCanvasEl);\r\n    };\r\n};\r\n\r\nSVGContainer.prototype.decode64 = function(str) {\r\n    return (typeof(window.atob) === \"function\") ? window.atob(str) : decode64(str);\r\n};\r\n\r\nmodule.exports = SVGContainer;\r\n\r\n},{\"./utils\":26,\"./xhr\":28}],24:[function(_dereq_,module,exports){\r\nvar SVGContainer = _dereq_('./svgcontainer');\r\n\r\nfunction SVGNodeContainer(node, _native) {\r\n    this.src = node;\r\n    this.image = null;\r\n    var self = this;\r\n\r\n    this.promise = _native ? new Promise(function(resolve, reject) {\r\n        self.image = new Image();\r\n        self.image.onload = resolve;\r\n        self.image.onerror = reject;\r\n        self.image.src = \"data:image/svg+xml,\" + (new XMLSerializer()).serializeToString(node);\r\n        if (self.image.complete === true) {\r\n            resolve(self.image);\r\n        }\r\n    }) : this.hasFabric().then(function() {\r\n        return new Promise(function(resolve) {\r\n            window.html2canvas.svg.fabric.parseSVGDocument(node, self.createCanvas.call(self, resolve));\r\n        });\r\n    });\r\n}\r\n\r\nSVGNodeContainer.prototype = Object.create(SVGContainer.prototype);\r\n\r\nmodule.exports = SVGNodeContainer;\r\n\r\n},{\"./svgcontainer\":23}],25:[function(_dereq_,module,exports){\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\n\r\nfunction TextContainer(node, parent) {\r\n    NodeContainer.call(this, node, parent);\r\n}\r\n\r\nTextContainer.prototype = Object.create(NodeContainer.prototype);\r\n\r\nTextContainer.prototype.applyTextTransform = function() {\r\n    this.node.data = this.transform(this.parent.css(\"textTransform\"));\r\n};\r\n\r\nTextContainer.prototype.transform = function(transform) {\r\n    var text = this.node.data;\r\n    switch(transform){\r\n        case \"lowercase\":\r\n            return text.toLowerCase();\r\n        case \"capitalize\":\r\n            return text.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g, capitalize);\r\n        case \"uppercase\":\r\n            return text.toUpperCase();\r\n        default:\r\n            return text;\r\n    }\r\n};\r\n\r\nfunction capitalize(m, p1, p2) {\r\n    if (m.length > 0) {\r\n        return p1 + p2.toUpperCase();\r\n    }\r\n}\r\n\r\nmodule.exports = TextContainer;\r\n\r\n},{\"./nodecontainer\":14}],26:[function(_dereq_,module,exports){\r\nexports.smallImage = function smallImage() {\r\n    return \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\r\n};\r\n\r\nexports.bind = function(callback, context) {\r\n    return function() {\r\n        return callback.apply(context, arguments);\r\n    };\r\n};\r\n\r\n/*\r\n * base64-arraybuffer\r\n * https://github.com/niklasvh/base64-arraybuffer\r\n *\r\n * Copyright (c) 2012 Niklas von Hertzen\r\n * Licensed under the MIT license.\r\n */\r\n\r\nexports.decode64 = function(base64) {\r\n    var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    var len = base64.length, i, encoded1, encoded2, encoded3, encoded4, byte1, byte2, byte3;\r\n\r\n    var output = \"\";\r\n\r\n    for (i = 0; i < len; i+=4) {\r\n        encoded1 = chars.indexOf(base64[i]);\r\n        encoded2 = chars.indexOf(base64[i+1]);\r\n        encoded3 = chars.indexOf(base64[i+2]);\r\n        encoded4 = chars.indexOf(base64[i+3]);\r\n\r\n        byte1 = (encoded1 << 2) | (encoded2 >> 4);\r\n        byte2 = ((encoded2 & 15) << 4) | (encoded3 >> 2);\r\n        byte3 = ((encoded3 & 3) << 6) | encoded4;\r\n        if (encoded3 === 64) {\r\n            output += String.fromCharCode(byte1);\r\n        } else if (encoded4 === 64 || encoded4 === -1) {\r\n            output += String.fromCharCode(byte1, byte2);\r\n        } else{\r\n            output += String.fromCharCode(byte1, byte2, byte3);\r\n        }\r\n    }\r\n\r\n    return output;\r\n};\r\n\r\nexports.getBounds = function(node) {\r\n    if (node.getBoundingClientRect) {\r\n        var clientRect = node.getBoundingClientRect();\r\n        var width = node.offsetWidth == null ? clientRect.width : node.offsetWidth;\r\n        return {\r\n            top: clientRect.top,\r\n            bottom: clientRect.bottom || (clientRect.top + clientRect.height),\r\n            right: clientRect.left + width,\r\n            left: clientRect.left,\r\n            width:  width,\r\n            height: node.offsetHeight == null ? clientRect.height : node.offsetHeight\r\n        };\r\n    }\r\n    return {};\r\n};\r\n\r\nexports.offsetBounds = function(node) {\r\n    var parent = node.offsetParent ? exports.offsetBounds(node.offsetParent) : {top: 0, left: 0};\r\n\r\n    return {\r\n        top: node.offsetTop + parent.top,\r\n        bottom: node.offsetTop + node.offsetHeight + parent.top,\r\n        right: node.offsetLeft + parent.left + node.offsetWidth,\r\n        left: node.offsetLeft + parent.left,\r\n        width: node.offsetWidth,\r\n        height: node.offsetHeight\r\n    };\r\n};\r\n\r\nexports.parseBackgrounds = function(backgroundImage) {\r\n    var whitespace = ' \\r\\n\\t',\r\n        method, definition, prefix, prefix_i, block, results = [],\r\n        mode = 0, numParen = 0, quote, args;\r\n    var appendResult = function() {\r\n        if(method) {\r\n            if (definition.substr(0, 1) === '\"') {\r\n                definition = definition.substr(1, definition.length - 2);\r\n            }\r\n            if (definition) {\r\n                args.push(definition);\r\n            }\r\n            if (method.substr(0, 1) === '-' && (prefix_i = method.indexOf('-', 1 ) + 1) > 0) {\r\n                prefix = method.substr(0, prefix_i);\r\n                method = method.substr(prefix_i);\r\n            }\r\n            results.push({\r\n                prefix: prefix,\r\n                method: method.toLowerCase(),\r\n                value: block,\r\n                args: args,\r\n                image: null\r\n            });\r\n        }\r\n        args = [];\r\n        method = prefix = definition = block = '';\r\n    };\r\n    args = [];\r\n    method = prefix = definition = block = '';\r\n    backgroundImage.split(\"\").forEach(function(c) {\r\n        if (mode === 0 && whitespace.indexOf(c) > -1) {\r\n            return;\r\n        }\r\n        switch(c) {\r\n        case '\"':\r\n            if(!quote) {\r\n                quote = c;\r\n            } else if(quote === c) {\r\n                quote = null;\r\n            }\r\n            break;\r\n        case '(':\r\n            if(quote) {\r\n                break;\r\n            } else if(mode === 0) {\r\n                mode = 1;\r\n                block += c;\r\n                return;\r\n            } else {\r\n                numParen++;\r\n            }\r\n            break;\r\n        case ')':\r\n            if (quote) {\r\n                break;\r\n            } else if(mode === 1) {\r\n                if(numParen === 0) {\r\n                    mode = 0;\r\n                    block += c;\r\n                    appendResult();\r\n                    return;\r\n                } else {\r\n                    numParen--;\r\n                }\r\n            }\r\n            break;\r\n\r\n        case ',':\r\n            if (quote) {\r\n                break;\r\n            } else if(mode === 0) {\r\n                appendResult();\r\n                return;\r\n            } else if (mode === 1) {\r\n                if (numParen === 0 && !method.match(/^url$/i)) {\r\n                    args.push(definition);\r\n                    definition = '';\r\n                    block += c;\r\n                    return;\r\n                }\r\n            }\r\n            break;\r\n        }\r\n\r\n        block += c;\r\n        if (mode === 0) {\r\n            method += c;\r\n        } else {\r\n            definition += c;\r\n        }\r\n    });\r\n\r\n    appendResult();\r\n    return results;\r\n};\r\n\r\n},{}],27:[function(_dereq_,module,exports){\r\nvar GradientContainer = _dereq_('./gradientcontainer');\r\n\r\nfunction WebkitGradientContainer(imageData) {\r\n    GradientContainer.apply(this, arguments);\r\n    this.type = imageData.args[0] === \"linear\" ? GradientContainer.TYPES.LINEAR : GradientContainer.TYPES.RADIAL;\r\n}\r\n\r\nWebkitGradientContainer.prototype = Object.create(GradientContainer.prototype);\r\n\r\nmodule.exports = WebkitGradientContainer;\r\n\r\n},{\"./gradientcontainer\":9}],28:[function(_dereq_,module,exports){\r\nfunction XHR(url) {\r\n    return new Promise(function(resolve, reject) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('GET', url);\r\n\r\n        xhr.onload = function() {\r\n            if (xhr.status === 200) {\r\n                resolve(xhr.responseText);\r\n            } else {\r\n                reject(new Error(xhr.statusText));\r\n            }\r\n        };\r\n\r\n        xhr.onerror = function() {\r\n            reject(new Error(\"Network Error\"));\r\n        };\r\n\r\n        xhr.send();\r\n    });\r\n}\r\n\r\nmodule.exports = XHR;\r\n\r\n},{}]},{},[1])(1)\r\n});"],"sourceRoot":""}